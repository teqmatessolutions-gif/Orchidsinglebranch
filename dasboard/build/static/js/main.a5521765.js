/*! For license information please see main.a5521765.js.LICENSE.txt */
(()=>{var e={356:(e,t,r)=>{e.exports=r(9645).last},418:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.toString=function e(t){if(null==t)return"";if("string"===typeof t)return t;if(Array.isArray(t))return t.map(e).join(",");const r=String(t);return"0"===r&&Object.is(Number(t),-0)?"-0":r}},557:function(e,t,r){var n;"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof this||("undefined"!==typeof window?window:"undefined"!==typeof self?self:r.g),n=function(e){return function(){"use strict";var t={172:function(e,t){var r=this&&this.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.CellHookData=t.HookData=void 0;var n=function(e,t,r){this.table=t,this.pageNumber=t.pageNumber,this.pageCount=this.pageNumber,this.settings=t.settings,this.cursor=r,this.doc=e.getDocument()};t.HookData=n;var a=function(e){function t(t,r,n,a,s,i){var o=e.call(this,t,r,i)||this;return o.cell=n,o.row=a,o.column=s,o.section=a.section,o}return r(t,e),t}(n);t.CellHookData=a},340:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),a=r(136),s=r(744),i=r(776),o=r(664),l=r(972);t.default=function(e){e.API.autoTable=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];1===t.length?e=t[0]:(console.error("Use of deprecated autoTable initiation"),(e=t[2]||{}).columns=t[0],e.body=t[1]);var n=(0,i.parseInput)(this,e),a=(0,l.createTable)(this,n);return(0,o.drawTable)(this,a),this},e.API.lastAutoTable=!1,e.API.previousAutoTable=!1,e.API.autoTable.previous=!1,e.API.autoTableText=function(e,t,r,n){(0,a.default)(e,t,r,n,this)},e.API.autoTableSetDefaults=function(e){return s.DocHandler.setDefaults(e,this),this},e.autoTableSetDefaults=function(e,t){s.DocHandler.setDefaults(e,t)},e.API.autoTableHtmlToJson=function(e,t){var r;if(void 0===t&&(t=!1),"undefined"===typeof window)return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new s.DocHandler(this),i=(0,n.parseHtml)(a,e,window,t,!1),o=i.head,l=i.body;return{columns:(null===(r=o[0])||void 0===r?void 0:r.map(function(e){return e.content}))||[],rows:l,data:l}},e.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var e=this.lastAutoTable;return e&&e.finalY?e.finalY:0},e.API.autoTableAddPageContent=function(t){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),e.API.autoTable.globalDefaults||(e.API.autoTable.globalDefaults={}),e.API.autoTable.globalDefaults.addPageContent=t,this},e.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}},136:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,n,a){n=n||{};var s=a.internal.scaleFactor,i=a.internal.getFontSize()/s,o=i*(a.getLineHeightFactor?a.getLineHeightFactor():1.15),l="",c=1;if("middle"!==n.valign&&"bottom"!==n.valign&&"center"!==n.halign&&"right"!==n.halign||(c=(l="string"===typeof e?e.split(/\r\n|\r|\n/g):e).length||1),r+=i*(2-1.15),"middle"===n.valign?r-=c/2*o:"bottom"===n.valign&&(r-=c*o),"center"===n.halign||"right"===n.halign){var d=i;if("center"===n.halign&&(d*=.5),l&&c>=1){for(var u=0;u<l.length;u++)a.text(l[u],t-a.getStringUnitWidth(l[u])*d,r),r+=o;return a}t-=a.getStringUnitWidth(e)*d}return"justify"===n.halign?a.text(e,t,r,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(e,t,r),a}},420:function(e,t){function r(e,t){var r=e>0,n=t||0===t;return r&&n?"DF":r?"S":n?"F":null}function n(e,t){var r,n,a,s;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(3===e.length)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(2===e.length)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e=1===e.length?e[0]:t}return"object"===typeof e?("number"===typeof e.vertical&&(e.top=e.vertical,e.bottom=e.vertical),"number"===typeof e.horizontal&&(e.right=e.horizontal,e.left=e.horizontal),{left:null!==(r=e.left)&&void 0!==r?r:t,top:null!==(n=e.top)&&void 0!==n?n:t,right:null!==(a=e.right)&&void 0!==a?a:t,bottom:null!==(s=e.bottom)&&void 0!==s?s:t}):("number"!==typeof e&&(e=t),{top:e,right:e,bottom:e,left:e})}Object.defineProperty(t,"__esModule",{value:!0}),t.getPageAvailableWidth=t.parseSpacing=t.getFillStyle=t.addTableBorder=t.getStringWidth=void 0,t.getStringWidth=function(e,t,r){return r.applyStyles(t,!0),(Array.isArray(e)?e:[e]).map(function(e){return r.getTextWidth(e)}).reduce(function(e,t){return Math.max(e,t)},0)},t.addTableBorder=function(e,t,n,a){var s=t.settings.tableLineWidth,i=t.settings.tableLineColor;e.applyStyles({lineWidth:s,lineColor:i});var o=r(s,!1);o&&e.rect(n.x,n.y,t.getWidth(e.pageSize().width),a.y-n.y,o)},t.getFillStyle=r,t.parseSpacing=n,t.getPageAvailableWidth=function(e,t){var r=n(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}},796:function(e,t){var r=this&&this.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.getTheme=t.defaultStyles=t.HtmlRowInput=void 0;var n=function(e){function t(t){var r=e.call(this)||this;return r._element=t,r}return r(t,e),t}(Array);t.HtmlRowInput=n,t.defaultStyles=function(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}},t.getTheme=function(e){return{striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}}[e]}},903:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.parseCss=void 0;var n=r(420);function a(e,t){var r=s(e,t);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])];return 0===parseInt(n[4])||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function s(e,t){var r=t(e);return"rgba(0, 0, 0, 0)"===r||"transparent"===r||"initial"===r||"inherit"===r?null==e.parentElement?null:s(e.parentElement,t):r}t.parseCss=function(e,t,r,s,i){var o={},l=96/72,c=a(t,function(e){return i.getComputedStyle(e).backgroundColor});null!=c&&(o.fillColor=c);var d=a(t,function(e){return i.getComputedStyle(e).color});null!=d&&(o.textColor=d);var u=function(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],a=96/(72/t),s=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,i=r.map(function(e){return parseInt(e||"0")/a}),o=(0,n.parseSpacing)(i,0);return s>o.top&&(o.top=s),s>o.bottom&&(o.bottom=s),o}(s,r);u&&(o.cellPadding=u);var h="borderTopColor",m=l*r,p=s.borderTopWidth;if(s.borderBottomWidth===p&&s.borderRightWidth===p&&s.borderLeftWidth===p){var f=(parseFloat(p)||0)/m;f&&(o.lineWidth=f)}else o.lineWidth={top:(parseFloat(s.borderTopWidth)||0)/m,right:(parseFloat(s.borderRightWidth)||0)/m,bottom:(parseFloat(s.borderBottomWidth)||0)/m,left:(parseFloat(s.borderLeftWidth)||0)/m},o.lineWidth.top||(o.lineWidth.right?h="borderRightColor":o.lineWidth.bottom?h="borderBottomColor":o.lineWidth.left&&(h="borderLeftColor"));var g=a(t,function(e){return i.getComputedStyle(e)[h]});null!=g&&(o.lineColor=g);var x=["left","right","center","justify"];-1!==x.indexOf(s.textAlign)&&(o.halign=s.textAlign),-1!==(x=["middle","bottom","top"]).indexOf(s.verticalAlign)&&(o.valign=s.verticalAlign);var y=parseInt(s.fontSize||"");isNaN(y)||(o.fontSize=y/l);var v=function(e){var t="";return("bold"===e.fontWeight||"bolder"===e.fontWeight||parseInt(e.fontWeight)>=700)&&(t="bold"),"italic"!==e.fontStyle&&"oblique"!==e.fontStyle||(t+="italic"),t}(s);v&&(o.fontStyle=v);var b=(s.fontFamily||"").toLowerCase();return-1!==e.indexOf(b)&&(o.font=b),o}},744:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DocHandler=void 0;var r={},n=function(){function e(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(e,t){void 0===t&&(t=null),t?t.__autoTableDocumentDefaults=e:r=e},e.unifyColor=function(e){return Array.isArray(e)?e:"number"===typeof e?[e,e,e]:"string"===typeof e?[e]:null},e.prototype.applyStyles=function(t,r){var n,a,s;void 0===r&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var i=this.jsPDFDocument.internal.getFont(),o=i.fontStyle,l=i.fontName;if(t.font&&(l=t.font),t.fontStyle){o=t.fontStyle;var c=this.getFontList()[l];c&&-1===c.indexOf(o)&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(c[0]),o=c[0])}if(this.jsPDFDocument.setFont(l,o),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var d=e.unifyColor(t.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),(d=e.unifyColor(t.textColor))&&(a=this.jsPDFDocument).setTextColor.apply(a,d),(d=e.unifyColor(t.lineColor))&&(s=this.jsPDFDocument).setDrawColor.apply(s,d),"number"===typeof t.lineWidth&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(e,t,r){return this.jsPDFDocument.splitTextToSize(e,t,r)},e.prototype.rect=function(e,t,r,n,a){return this.jsPDFDocument.rect(e,t,r,n,a)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return r||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return null==e.width&&(e={width:e.getWidth(),height:e.getHeight()}),e},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}();t.DocHandler=n},4:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.parseHtml=void 0;var n=r(903),a=r(796);function s(e,t,r,s,o,l){for(var c=new a.HtmlRowInput(s),d=0;d<s.cells.length;d++){var u=s.cells[d],h=r.getComputedStyle(u);if(o||"none"!==h.display){var m=void 0;l&&(m=(0,n.parseCss)(e,u,t,h,r)),c.push({rowSpan:u.rowSpan,colSpan:u.colSpan,styles:m,_element:u,content:i(u)})}}var p=r.getComputedStyle(s);if(c.length>0&&(o||"none"!==p.display))return c}function i(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(e){return e.trim()}).join("\n"),t.innerText||t.textContent||""}t.parseHtml=function(e,t,r,n,a){var i,o,l;void 0===n&&(n=!1),void 0===a&&(a=!1),l="string"===typeof t?r.document.querySelector(t):t;var c=Object.keys(e.getFontList()),d=e.scaleFactor(),u=[],h=[],m=[];if(!l)return console.error("Html table could not be found with input: ",t),{head:u,body:h,foot:m};for(var p=0;p<l.rows.length;p++){var f=l.rows[p],g=null===(o=null===(i=null===f||void 0===f?void 0:f.parentElement)||void 0===i?void 0:i.tagName)||void 0===o?void 0:o.toLowerCase(),x=s(c,d,r,f,n,a);x&&("thead"===g?u.push(x):"tfoot"===g?m.push(x):h.push(x))}return{head:u,body:h,foot:m}}},776:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.parseInput=void 0;var n=r(4),a=r(356),s=r(420),i=r(744),o=r(792);t.parseInput=function(e,t){var r=new i.DocHandler(e),l=r.getDocumentOptions(),c=r.getGlobalOptions();(0,o.default)(r,c,l,t);var d,u=(0,a.assign)({},c,l,t);"undefined"!==typeof window&&(d=window);var h=function(e,t,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},s=function(s){if("columnStyles"===s){var i=e[s],o=t[s],l=r[s];n.columnStyles=(0,a.assign)({},i,o,l)}else{var c=[e,t,r].map(function(e){return e[s]||{}});n[s]=(0,a.assign)({},c[0],c[1],c[2])}},i=0,o=Object.keys(n);i<o.length;i++)s(o[i]);return n}(c,l,t),m=function(e,t,r){for(var n={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},a=0,s=[e,t,r];a<s.length;a++){var i=s[a];i.didParseCell&&n.didParseCell.push(i.didParseCell),i.willDrawCell&&n.willDrawCell.push(i.willDrawCell),i.didDrawCell&&n.didDrawCell.push(i.didDrawCell),i.willDrawPage&&n.willDrawPage.push(i.willDrawPage),i.didDrawPage&&n.didDrawPage.push(i.didDrawPage)}return n}(c,l,t),p=function(e,t){var r,n,a,i,o,l,c,d,u,h,m,p,f,g,x=(0,s.parseSpacing)(t.margin,40/e.scaleFactor()),y=null!==(r=function(e,t){var r=e.getLastAutoTable(),n=e.scaleFactor(),a=e.pageNumber(),s=!1;return r&&r.startPageNumber&&(s=r.startPageNumber+r.pageNumber-1===a),"number"===typeof t?t:null!=t&&!1!==t||!s||null==(null===r||void 0===r?void 0:r.finalY)?null:r.finalY+20/n}(e,t.startY))&&void 0!==r?r:x.top;f=!0===t.showFoot?"everyPage":!1===t.showFoot?"never":null!==(n=t.showFoot)&&void 0!==n?n:"everyPage",g=!0===t.showHead?"everyPage":!1===t.showHead?"never":null!==(a=t.showHead)&&void 0!==a?a:"everyPage";var v=null!==(i=t.useCss)&&void 0!==i&&i,b=t.theme||(v?"plain":"striped"),j=!!t.horizontalPageBreak,w=null!==(o=t.horizontalPageBreakRepeat)&&void 0!==o?o:null;return{includeHiddenHtml:null!==(l=t.includeHiddenHtml)&&void 0!==l&&l,useCss:v,theme:b,startY:y,margin:x,pageBreak:null!==(c=t.pageBreak)&&void 0!==c?c:"auto",rowPageBreak:null!==(d=t.rowPageBreak)&&void 0!==d?d:"auto",tableWidth:null!==(u=t.tableWidth)&&void 0!==u?u:"auto",showHead:g,showFoot:f,tableLineWidth:null!==(h=t.tableLineWidth)&&void 0!==h?h:0,tableLineColor:null!==(m=t.tableLineColor)&&void 0!==m?m:200,horizontalPageBreak:j,horizontalPageBreakRepeat:w,horizontalPageBreakBehaviour:null!==(p=t.horizontalPageBreakBehaviour)&&void 0!==p?p:"afterAllRows"}}(r,u),f=function(e,t,r){var a=t.head||[],s=t.body||[],i=t.foot||[];if(t.html){var o=t.includeHiddenHtml;if(r){var l=(0,n.parseHtml)(e,t.html,r,o,t.useCss)||{};a=l.head||a,s=l.body||a,i=l.foot||a}else console.error("Cannot parse html in non browser environment")}var c=t.columns||function(e,t,r){var n=e[0]||t[0]||r[0]||[],a=[];return Object.keys(n).filter(function(e){return"_element"!==e}).forEach(function(e){var t,r=1;"object"!==typeof(t=Array.isArray(n)?n[parseInt(e)]:n[e])||Array.isArray(t)||(r=(null===t||void 0===t?void 0:t.colSpan)||1);for(var s=0;s<r;s++){var i={dataKey:Array.isArray(n)?a.length:e+(s>0?"_".concat(s):"")};a.push(i)}}),a}(a,s,i);return{columns:c,head:a,body:s,foot:i}}(r,u,d);return{id:t.tableId,content:f,hooks:m,styles:h,settings:p}}},792:function(e,t){function r(e){e.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),e.minCellHeight||(e.minCellHeight=e.rowHeight)):e.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),e.cellWidth||(e.cellWidth=e.columnWidth))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,a){for(var s=function(t){t&&"object"!==typeof t&&console.error("The options parameter should be of type object, is: "+typeof t),"undefined"!==typeof t.extendWidth&&(t.tableWidth=t.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),"undefined"!==typeof t.margins&&("undefined"===typeof t.margin&&(t.margin=t.margins),console.error("Use of deprecated option: margins, use margin instead.")),t.startY&&"number"!==typeof t.startY&&(console.error("Invalid value for startY option",t.startY),delete t.startY),!t.didDrawPage&&(t.afterPageContent||t.beforePageContent||t.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),t.didDrawPage=function(r){e.applyStyles(e.userStyles),t.beforePageContent&&t.beforePageContent(r),e.applyStyles(e.userStyles),t.afterPageContent&&t.afterPageContent(r),e.applyStyles(e.userStyles),t.afterPageAdd&&r.pageNumber>1&&r.afterPageAdd(r),e.applyStyles(e.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(e){t[e]&&console.error('The "'.concat(e,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(e){var r=e[0],n=e[1];t[n]&&(console.error("Use of deprecated option ".concat(n,". Use ").concat(r," instead")),t[r]=t[n])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(e){var r="string"===typeof e?e:e[0],n="string"===typeof e?e:e[1];"undefined"!==typeof t[r]&&("undefined"===typeof t.styles[n]&&(t.styles[n]=t[r]),console.error("Use of deprecated option: "+r+", use the style "+n+" instead."))});for(var n=0,a=["styles","bodyStyles","headStyles","footStyles"];n<a.length;n++)r(t[a[n]]||{});for(var s=t.columnStyles||{},i=0,o=Object.keys(s);i<o.length;i++)r(s[o[i]]||{})},i=0,o=[t,n,a];i<o.length;i++)s(o[i])}},260:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.Column=t.Cell=t.Row=t.Table=void 0;var n=r(796),a=r(172),s=r(420),i=function(){function e(e,t){this.pageNumber=1,this.pageCount=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return e.prototype.getHeadHeight=function(e){return this.head.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},e.prototype.getFootHeight=function(e){return this.foot.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(e,t,r,n,s,i){for(var o=0,l=t;o<l.length;o++){var c=!1===(0,l[o])(new a.CellHookData(e,this,r,n,s,i));if(r.text=Array.isArray(r.text)?r.text:[r.text],c)return!1}return!0},e.prototype.callEndPageHooks=function(e,t){e.applyStyles(e.userStyles);for(var r=0,n=this.hooks.didDrawPage;r<n.length;r++)(0,n[r])(new a.HookData(e,this,t))},e.prototype.callWillDrawPageHooks=function(e,t){for(var r=0,n=this.hooks.willDrawPage;r<n.length;r++)(0,n[r])(new a.HookData(e,this,t))},e.prototype.getWidth=function(e){if("number"===typeof this.settings.tableWidth)return this.settings.tableWidth;if("wrap"===this.settings.tableWidth)return this.columns.reduce(function(e,t){return e+t.wrappedWidth},0);var t=this.settings.margin;return e-t.left-t.right},e}();t.Table=i;var o=function(){function e(e,t,r,a,s){void 0===s&&(s=!1),this.height=0,this.raw=e,e instanceof n.HtmlRowInput&&(this.raw=e._element,this.element=e._element),this.index=t,this.section=r,this.cells=a,this.spansMultiplePages=s}return e.prototype.getMaxCellHeight=function(e){var t=this;return e.reduce(function(e,r){var n;return Math.max(e,(null===(n=t.cells[r.index])||void 0===n?void 0:n.height)||0)},0)},e.prototype.hasRowSpan=function(e){var t=this;return e.filter(function(e){var r=t.cells[e.index];return!!r&&r.rowSpan>1}).length>0},e.prototype.canEntireRowFit=function(e,t){return this.getMaxCellHeight(t)<=e},e.prototype.getMinimumRowHeight=function(e,t){var r=this;return e.reduce(function(e,n){var a=r.cells[n.index];if(!a)return 0;var s=t.getLineHeight(a.styles.fontSize),i=a.padding("vertical")+s;return i>e?i:e},0)},e}();t.Row=o;var l=function(){function e(e,t,r){var n,a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=r,this.raw=e;var s=e;null==e||"object"!==typeof e||Array.isArray(e)?(this.rowSpan=1,this.colSpan=1):(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,s=null!==(a=null!==(n=e.content)&&void 0!==n?n:e.title)&&void 0!==a?a:e,e._element&&(this.raw=e._element));var i=null!=s?""+s:"";this.text=i.split(/\r\n|\r|\n/g)}return e.prototype.getTextPos=function(){var e,t;if("top"===this.styles.valign)e=this.y+this.padding("top");else if("bottom"===this.styles.valign)e=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");e=this.y+r/2+this.padding("top")}if("right"===this.styles.halign)t=this.x+this.width-this.padding("right");else if("center"===this.styles.halign){var n=this.width-this.padding("horizontal");t=this.x+n/2+this.padding("left")}else t=this.x+this.padding("left");return{x:t,y:e}},e.prototype.getContentHeight=function(e,t){void 0===t&&(t=1.15);var r=(Array.isArray(this.text)?this.text.length:1)*(this.styles.fontSize/e*t)+this.padding("vertical");return Math.max(r,this.styles.minCellHeight)},e.prototype.padding=function(e){var t=(0,s.parseSpacing)(this.styles.cellPadding,0);return"vertical"===e?t.top+t.bottom:"horizontal"===e?t.left+t.right:t[e]},e}();t.Cell=l;var c=function(){function e(e,t,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=t,this.index=r}return e.prototype.getMaxCustomCellWidth=function(e){for(var t=0,r=0,n=e.allRows();r<n.length;r++){var a=n[r].cells[this.index];a&&"number"===typeof a.styles.cellWidth&&(t=Math.max(t,a.styles.cellWidth))}return t},e}();t.Column=c},356:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.assign=void 0,t.assign=function(e,t,r,n,a){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(e),i=1;i<arguments.length;i++){var o=arguments[i];if(null!=o)for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(s[l]=o[l])}return s}},972:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.createTable=void 0;var n=r(744),a=r(260),s=r(324),i=r(796),o=r(356);function l(e,t,r,n,s,i){var o={};return t.map(function(t,l){for(var c=0,u={},h=0,m=0,p=0,f=r;p<f.length;p++){var g=f[p];if(null==o[g.index]||0===o[g.index].left)if(0===m){var x=void 0,y={};"object"!==typeof(x=Array.isArray(t)?t[g.index-h-c]:t[g.dataKey])||Array.isArray(x)||(y=(null===x||void 0===x?void 0:x.styles)||{});var v=d(e,g,l,s,n,i,y),b=new a.Cell(x,v,e);u[g.dataKey]=b,u[g.index]=b,m=b.colSpan-1,o[g.index]={left:b.rowSpan-1,times:m}}else m--,h++;else o[g.index].left--,m=o[g.index].times,c++}return new a.Row(t,l,e,u)})}function c(e,t){var r={};return e.forEach(function(e){if(null!=e.raw){var n=function(e,t){if("head"===e){if("object"===typeof t)return t.header||t.title||null;if("string"===typeof t||"number"===typeof t)return t}else if("foot"===e&&"object"===typeof t)return t.footer;return null}(t,e.raw);null!=n&&(r[e.dataKey]=n)}}),Object.keys(r).length>0?r:null}function d(e,t,r,n,a,s,l){var c,d=(0,i.getTheme)(n);"head"===e?c=a.headStyles:"body"===e?c=a.bodyStyles:"foot"===e&&(c=a.footStyles);var u=(0,o.assign)({},d.table,d[e],a.styles,c),h=a.columnStyles[t.dataKey]||a.columnStyles[t.index]||{},m="body"===e?h:{},p="body"===e&&r%2===0?(0,o.assign)({},d.alternateRow,a.alternateRowStyles):{},f=(0,i.defaultStyles)(s),g=(0,o.assign)({},f,u,p,m);return(0,o.assign)(g,l)}t.createTable=function(e,t){var r=new n.DocHandler(e),i=function(e,t){var r,n=e.content,s=function(e){return e.map(function(e,t){var r,n,s;return s="object"===typeof e&&null!==(n=null!==(r=e.dataKey)&&void 0!==r?r:e.key)&&void 0!==n?n:t,new a.Column(s,e,t)})}(n.columns);(0===n.head.length&&(r=c(s,"head"))&&n.head.push(r),0===n.foot.length)&&((r=c(s,"foot"))&&n.foot.push(r));var i=e.settings.theme,o=e.styles;return{columns:s,head:l("head",n.head,s,o,i,t),body:l("body",n.body,s,o,i,t),foot:l("foot",n.foot,s,o,i,t)}}(t,r.scaleFactor()),o=new a.Table(t,i);return(0,s.calculateWidths)(r,o),r.applyStyles(r.userStyles),o}},664:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.addPage=t.drawTable=void 0;var n=r(420),a=r(260),s=r(744),i=r(356),o=r(136),l=r(224);function c(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),"firstPage"!==a.showHead&&"everyPage"!==a.showHead||t.head.forEach(function(a){return p(e,t,a,r,n)})}function d(e,t,r,n,a,s){e.applyStyles(e.userStyles),s=null!==s&&void 0!==s?s:t.body.length;var i=Math.min(r+s,t.body.length),o=-1;return t.body.slice(r,i).forEach(function(s,i){var l=r+i===t.body.length-1,c=g(e,t,l,n);s.canEntireRowFit(c,a)&&(p(e,t,s,n,a),o=r+i)}),o}function u(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),"lastPage"!==a.showFoot&&"everyPage"!==a.showFoot||t.foot.forEach(function(a){return p(e,t,a,r,n)})}function h(e,t,r){var n=r.getLineHeight(e.styles.fontSize),a=e.padding("vertical"),s=Math.floor((t-a)/n);return Math.max(0,s)}function m(e,t,r,n,s,o,l){var c=g(e,t,n,o);if(r.canEntireRowFit(c,l))p(e,t,r,o,l);else if(function(e,t,r,n){var a=e.pageSize().height,s=n.settings.margin,i=a-(s.top+s.bottom);"body"===t.section&&(i-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var o=t.getMinimumRowHeight(n.columns,e),l=o<r;if(o>i)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!l)return!1;var c=t.hasRowSpan(n.columns);return t.getMaxCellHeight(n.columns)>i?(c&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!c&&"avoid"!==n.settings.rowPageBreak}(e,r,c,t)){var d=function(e,t,r,n){var s={};e.spansMultiplePages=!0,e.height=0;for(var o=0,l=0,c=r.columns;l<c.length;l++){var d=c[l];if(v=e.cells[d.index]){Array.isArray(v.text)||(v.text=[v.text]);var u=new a.Cell(v.raw,v.styles,v.section);(u=(0,i.assign)(u,v)).text=[];var m=h(v,t,n);v.text.length>m&&(u.text=v.text.splice(m,v.text.length));var p=n.scaleFactor(),f=n.getLineHeightFactor();v.contentHeight=v.getContentHeight(p,f),v.contentHeight>=t&&(v.contentHeight=t,u.styles.minCellHeight-=t),v.contentHeight>e.height&&(e.height=v.contentHeight),u.contentHeight=u.getContentHeight(p,f),u.contentHeight>o&&(o=u.contentHeight),s[d.index]=u}}var g=new a.Row(e.raw,-1,e.section,s,!0);g.height=o;for(var x=0,y=r.columns;x<y.length;x++){var v;d=y[x],(u=g.cells[d.index])&&(u.height=g.height),(v=e.cells[d.index])&&(v.height=e.height)}return g}(r,c,t,e);p(e,t,r,o,l),x(e,t,s,o,l),m(e,t,d,n,s,o,l)}else x(e,t,s,o,l),m(e,t,r,n,s,o,l)}function p(e,t,r,n,a){n.x=t.settings.margin.left;for(var s=0,i=a;s<i.length;s++){var l=i[s],c=r.cells[l.index];if(c)if(e.applyStyles(c.styles),c.x=n.x,c.y=n.y,!1!==t.callCellHooks(e,t.hooks.willDrawCell,c,r,l,n)){f(e,c,n);var d=c.getTextPos();(0,o.default)(c.text,d.x,d.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,c,r,l,n),n.x+=l.width}else n.x+=l.width;else n.x+=l.width}n.y+=r.height}function f(e,t,r){var a=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),"number"===typeof a.lineWidth){var s=(0,n.getFillStyle)(a.lineWidth,a.fillColor);s&&e.rect(t.x,r.y,t.width,t.height,s)}else"object"===typeof a.lineWidth&&(a.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),function(e,t,r,n){var a,s,i,o;function l(t,r,n,a,s){e.getDocument().setLineWidth(t),e.getDocument().line(r,n,a,s,"S")}n.top&&(a=r.x,s=r.y,i=r.x+t.width,o=r.y,n.right&&(i+=.5*n.right),n.left&&(a-=.5*n.left),l(n.top,a,s,i,o)),n.bottom&&(a=r.x,s=r.y+t.height,i=r.x+t.width,o=r.y+t.height,n.right&&(i+=.5*n.right),n.left&&(a-=.5*n.left),l(n.bottom,a,s,i,o)),n.left&&(a=r.x,s=r.y,i=r.x,o=r.y+t.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.left,a,s,i,o)),n.right&&(a=r.x+t.width,s=r.y,i=r.x+t.width,o=r.y+t.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.right,a,s,i,o))}(e,t,r,a.lineWidth))}function g(e,t,r,n){var a=t.settings.margin.bottom,s=t.settings.showFoot;return("everyPage"===s||"lastPage"===s&&r)&&(a+=t.getFootHeight(t.columns)),e.pageSize().height-n.y-a}function x(e,t,r,a,s,i){void 0===s&&(s=[]),void 0===i&&(i=!1),e.applyStyles(e.userStyles),"everyPage"!==t.settings.showFoot||i||t.foot.forEach(function(r){return p(e,t,r,a,s)}),t.callEndPageHooks(e,a);var o=t.settings.margin;(0,n.addTableBorder)(e,t,r,a),y(e),t.pageNumber++,t.pageCount++,a.x=o.left,a.y=o.top,r.y=o.top,t.callWillDrawPageHooks(e,a),"everyPage"===t.settings.showHead&&(t.head.forEach(function(r){return p(e,t,r,a,s)}),e.applyStyles(e.userStyles))}function y(e){var t=e.pageNumber();return e.setPage(t+1),e.pageNumber()===t&&(e.addPage(),!0)}t.drawTable=function(e,t){var r=t.settings,a=r.startY,o=r.margin,h={x:o.left,y:a},f=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),g=a+o.bottom+f;"avoid"===r.pageBreak&&(g+=t.body.reduce(function(e,t){return e+t.height},0));var v=new s.DocHandler(e);("always"===r.pageBreak||null!=r.startY&&g>v.pageSize().height)&&(y(v),h.y=o.top),t.callWillDrawPageHooks(v,h);var b=(0,i.assign)({},h);t.startPageNumber=v.pageNumber(),r.horizontalPageBreak?function(e,t,r,n){var a=(0,l.calculateAllColumnsCanFitInPage)(e,t),s=t.settings;if("afterAllRows"===s.horizontalPageBreakBehaviour)a.forEach(function(a,s){e.applyStyles(e.userStyles),s>0?x(e,t,r,n,a.columns,!0):c(e,t,n,a.columns),function(e,t,r,n,a){e.applyStyles(e.userStyles),t.body.forEach(function(s,i){var o=i===t.body.length-1;m(e,t,s,o,r,n,a)})}(e,t,r,n,a.columns),u(e,t,n,a.columns)});else for(var i=-1,o=a[0],h=function(){var s=i;if(o){e.applyStyles(e.userStyles);var l=o.columns;i>=0?x(e,t,r,n,l,!0):c(e,t,n,l),s=d(e,t,i+1,n,l),u(e,t,n,l)}var h=s-i;a.slice(1).forEach(function(a){e.applyStyles(e.userStyles),x(e,t,r,n,a.columns,!0),d(e,t,i+1,n,a.columns,h),u(e,t,n,a.columns)}),i=s};i<t.body.length-1;)h()}(v,t,b,h):(v.applyStyles(v.userStyles),"firstPage"!==r.showHead&&"everyPage"!==r.showHead||t.head.forEach(function(e){return p(v,t,e,h,t.columns)}),v.applyStyles(v.userStyles),t.body.forEach(function(e,r){var n=r===t.body.length-1;m(v,t,e,n,b,h,t.columns)}),v.applyStyles(v.userStyles),"lastPage"!==r.showFoot&&"everyPage"!==r.showFoot||t.foot.forEach(function(e){return p(v,t,e,h,t.columns)})),(0,n.addTableBorder)(v,t,b,h),t.callEndPageHooks(v,h),t.finalY=h.y,e.lastAutoTable=t,e.previousAutoTable=t,e.autoTable&&(e.autoTable.previous=t),v.applyStyles(v.userStyles)},t.addPage=x},224:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.calculateAllColumnsCanFitInPage=void 0;var n=r(420);function a(e,t,r){var a;void 0===r&&(r={});var s=(0,n.getPageAvailableWidth)(e,t),i=new Map,o=[],l=[],c=[];t.settings.horizontalPageBreakRepeat,Array.isArray(t.settings.horizontalPageBreakRepeat)?c=t.settings.horizontalPageBreakRepeat:"string"!==typeof t.settings.horizontalPageBreakRepeat&&"number"!==typeof t.settings.horizontalPageBreakRepeat||(c=[t.settings.horizontalPageBreakRepeat]),c.forEach(function(e){var r=t.columns.find(function(t){return t.dataKey===e||t.index===e});r&&!i.has(r.index)&&(i.set(r.index,!0),o.push(r.index),l.push(t.columns[r.index]),s-=r.wrappedWidth)});for(var d=!0,u=null!==(a=null===r||void 0===r?void 0:r.start)&&void 0!==a?a:0;u<t.columns.length;)if(i.has(u))u++;else{var h=t.columns[u].wrappedWidth;if(!(d||s>=h))break;d=!1,o.push(u),l.push(t.columns[u]),s-=h,u++}return{colIndexes:o,columns:l,lastIndex:u-1}}t.calculateAllColumnsCanFitInPage=function(e,t){for(var r=[],n=0;n<t.columns.length;n++){var s=a(e,t,{start:n});s.columns.length&&(r.push(s),n=s.lastIndex)}return r}},324:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ellipsize=t.resizeColumns=t.calculateWidths=void 0;var n=r(420);function a(e,t,r){for(var n=t,s=e.reduce(function(e,t){return e+t.wrappedWidth},0),i=0;i<e.length;i++){var o=e[i],l=n*(o.wrappedWidth/s),c=o.width+l,d=r(o),u=c<d?d:c;t-=u-o.width,o.width=u}if(t=Math.round(1e10*t)/1e10){var h=e.filter(function(e){return!(t<0)||e.width>r(e)});h.length&&(t=a(h,t,r))}return t}function s(e,t,r,a,s){return e.map(function(e){return function(e,t,r,a,s){var i=1e4*a.scaleFactor();if((t=Math.ceil(t*i)/i)>=(0,n.getStringWidth)(e,r,a))return e;for(;t<(0,n.getStringWidth)(e+s,r,a)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+s}(e,t,r,a,s)})}t.calculateWidths=function(e,t){!function(e,t){var r=e.scaleFactor(),a=t.settings.horizontalPageBreak,s=(0,n.getPageAvailableWidth)(e,t);t.allRows().forEach(function(i){for(var o=0,l=t.columns;o<l.length;o++){var c=l[o],d=i.cells[c.index];if(d){var u=t.hooks.didParseCell;t.callCellHooks(e,u,d,i,c,null);var h=d.padding("horizontal");d.contentWidth=(0,n.getStringWidth)(d.text,d.styles,e)+h;var m=(0,n.getStringWidth)(d.text.join(" ").split(/[^\S\u00A0]+/),d.styles,e);if(d.minReadableWidth=m+d.padding("horizontal"),"number"===typeof d.styles.cellWidth)d.minWidth=d.styles.cellWidth,d.wrappedWidth=d.styles.cellWidth;else if("wrap"===d.styles.cellWidth||!0===a)d.contentWidth>s?(d.minWidth=s,d.wrappedWidth=s):(d.minWidth=d.contentWidth,d.wrappedWidth=d.contentWidth);else{var p=10/r;d.minWidth=d.styles.minCellWidth||p,d.wrappedWidth=d.contentWidth,d.minWidth>d.wrappedWidth&&(d.wrappedWidth=d.minWidth)}}}}),t.allRows().forEach(function(e){for(var r=0,n=t.columns;r<n.length;r++){var a=n[r],s=e.cells[a.index];if(s&&1===s.colSpan)a.wrappedWidth=Math.max(a.wrappedWidth,s.wrappedWidth),a.minWidth=Math.max(a.minWidth,s.minWidth),a.minReadableWidth=Math.max(a.minReadableWidth,s.minReadableWidth);else{var i=t.styles.columnStyles[a.dataKey]||t.styles.columnStyles[a.index]||{},o=i.cellWidth||i.minCellWidth;o&&"number"===typeof o&&(a.minWidth=o,a.wrappedWidth=o)}s&&(s.colSpan>1&&!a.minWidth&&(a.minWidth=s.minWidth),s.colSpan>1&&!a.wrappedWidth&&(a.wrappedWidth=s.minWidth))}})}(e,t);var r=[],i=0;t.columns.forEach(function(e){var n=e.getMaxCustomCellWidth(t);n?e.width=n:(e.width=e.wrappedWidth,r.push(e)),i+=e.width});var o=t.getWidth(e.pageSize().width)-i;o&&(o=a(r,o,function(e){return Math.max(e.minReadableWidth,e.minWidth)})),o&&(o=a(r,o,function(e){return e.minWidth})),o=Math.abs(o),!t.settings.horizontalPageBreak&&o>.1/e.scaleFactor()&&(o=o<1?o:Math.round(o),console.warn("Of the table content, ".concat(o," units width could not fit page"))),function(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var n=t[r],a=null,s=0,i=0,o=0;o<e.columns.length;o++){var l=e.columns[o];if((i-=1)>1&&e.columns[o+1])s+=l.width,delete n.cells[l.index];else if(a){var c=a;delete n.cells[l.index],a=null,c.width=l.width+s}else{if(!(c=n.cells[l.index]))continue;if(i=c.colSpan,s=0,c.colSpan>1){a=c,s+=l.width;continue}c.width=l.width+s}}}(t),function(e,t){for(var r={count:0,height:0},n=0,a=e.allRows();n<a.length;n++){for(var i=a[n],o=0,l=e.columns;o<l.length;o++){var c=l[o],d=i.cells[c.index];if(d){t.applyStyles(d.styles,!0);var u=d.width-d.padding("horizontal");if("linebreak"===d.styles.overflow)d.text=t.splitTextToSize(d.text,u+1/t.scaleFactor(),{fontSize:d.styles.fontSize});else if("ellipsize"===d.styles.overflow)d.text=s(d.text,u,d.styles,t,"...");else if("hidden"===d.styles.overflow)d.text=s(d.text,u,d.styles,t,"");else if("function"===typeof d.styles.overflow){var h=d.styles.overflow(d.text,u);d.text="string"===typeof h?[h]:h}d.contentHeight=d.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var m=d.contentHeight/d.rowSpan;d.rowSpan>1&&r.count*r.height<m*d.rowSpan?r={height:m,count:d.rowSpan}:r&&r.count>0&&r.height>m&&(m=r.height),m>i.height&&(i.height=m)}}r.count--}}(t,e),function(e){for(var t={},r=1,n=e.allRows(),a=0;a<n.length;a++)for(var s=n[a],i=0,o=e.columns;i<o.length;i++){var l=o[i],c=t[l.index];if(r>1)r--,delete s.cells[l.index];else if(c)c.cell.height+=s.height,r=c.cell.colSpan,delete s.cells[l.index],c.left--,c.left<=1&&delete t[l.index];else{var d=s.cells[l.index];if(!d)continue;if(d.height=s.height,d.rowSpan>1){var u=n.length-a,h=d.rowSpan>u?u:d.rowSpan;t[l.index]={cell:d,left:h,row:s}}}}}(t)},t.resizeColumns=a,t.ellipsize=s},964:function(t){if("undefined"===typeof e){var r=new Error("Cannot find module 'undefined'");throw r.code="MODULE_NOT_FOUND",r}t.exports=e}},r={};function n(e){var a=r[e];if(void 0!==a)return a.exports;var s=r[e]={exports:{}};return t[e].call(s.exports,s,s.exports,n),s.exports}var a={};return function(){var e=a;Object.defineProperty(e,"__esModule",{value:!0}),e.Cell=e.Column=e.Row=e.Table=e.CellHookData=e.__drawTable=e.__createTable=e.applyPlugin=void 0;var t=n(340),r=n(776),s=n(664),i=n(972),o=n(260);Object.defineProperty(e,"Table",{enumerable:!0,get:function(){return o.Table}});var l=n(172);Object.defineProperty(e,"CellHookData",{enumerable:!0,get:function(){return l.CellHookData}});var c=n(260);function d(e){(0,t.default)(e)}Object.defineProperty(e,"Cell",{enumerable:!0,get:function(){return c.Cell}}),Object.defineProperty(e,"Column",{enumerable:!0,get:function(){return c.Column}}),Object.defineProperty(e,"Row",{enumerable:!0,get:function(){return c.Row}}),e.applyPlugin=d,e.__createTable=function(e,t){var n=(0,r.parseInput)(e,t);return(0,i.createTable)(e,n)},e.__drawTable=function(e,t){(0,s.drawTable)(e,t)};try{var u=n(964);u.jsPDF&&(u=u.jsPDF),d(u)}catch(h){}e.default=function(e,t){var n=(0,r.parseInput)(e,t),a=(0,i.createTable)(e,n);(0,s.drawTable)(e,a)}}(),a}()},e.exports=n(function(){try{return r(7762)}catch(e){}}())},579:(e,t,r)=>{"use strict";e.exports=r(1153)},870:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isObject=function(e){return null!==e&&("object"===typeof e||"function"===typeof e)}},1153:(e,t,r)=>{"use strict";var n=r(5043),a=Symbol.for("react.element"),s=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var n,s={},c=null,d=null;for(n in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,n)&&!l.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===s[n]&&(s[n]=t[n]);return{$$typeof:a,type:e,key:c,ref:d,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},1203:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(8420);t.isArrayLike=function(e){return null!=e&&"function"!==typeof e&&n.isLength(e.length)}},1293:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(4830);t.debounce=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"!==typeof r&&(r={});const{leading:a=!1,trailing:s=!0,maxWait:i}=r,o=Array(2);let l;a&&(o[0]="leading"),s&&(o[1]="trailing");let c=null;const d=n.debounce(function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];l=e.apply(this,r),c=null},t,{edges:o}),u=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return null!=i&&(null===c&&(c=Date.now()),Date.now()-c>=i)?(l=e.apply(this,r),c=Date.now(),d.cancel(),d.schedule(),l):(d.apply(this,r),l)};return u.cancel=d.cancel,u.flush=()=>(d.flush(),l),u}},1444:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(418),a=r(3272);t.toPath=function(e){if(Array.isArray(e))return e.map(a.toKey);if("symbol"===typeof e)return[e];const t=[],r=(e=n.toString(e)).length;if(0===r)return t;let s=0,i="",o="",l=!1;for(46===e.charCodeAt(0)&&(t.push(""),s++);s<r;){const n=e[s];o?"\\"===n&&s+1<r?(s++,i+=e[s]):n===o?o="":i+=n:l?'"'===n||"'"===n?o=n:"]"===n?(l=!1,t.push(i),i=""):i+=n:"["===n?(l=!0,i&&(t.push(i),i="")):"."===n?i&&(t.push(i),i=""):i+=n,s++}return i&&t.push(i),t}},1497:(e,t,r)=>{"use strict";var n=r(3218);function a(){}function s(){}s.resetWarningCache=a,e.exports=function(){function e(e,t,r,a,s,i){if(i!==n){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:a};return r.PropTypes=r,r}},2086:(e,t,r)=>{"use strict";e.exports=r(5082)},2104:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(1203),a=r(9921);t.isArrayLikeObject=function(e){return a.isObjectLike(e)&&n.isArrayLike(e)}},2132:(e,t,r)=>{"use strict";var n=r(2897).default;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=r(870),s=r(4803),i=r(9972);function o(e,t,r,d){if(t===e)return!0;switch(typeof t){case"object":return function(e,t,r,n){if(null==t)return!0;if(Array.isArray(t))return l(e,t,r,n);if(t instanceof Map)return function(e,t,r,n){if(0===t.size)return!0;if(!(e instanceof Map))return!1;for(const[a,s]of t.entries()){if(!1===r(e.get(a),s,a,e,t,n))return!1}return!0}(e,t,r,n);if(t instanceof Set)return c(e,t,r,n);const a=Object.keys(t);if(null==e)return 0===a.length;if(0===a.length)return!0;if(null!==n&&void 0!==n&&n.has(t))return n.get(t)===e;null===n||void 0===n||n.set(t,e);try{for(let i=0;i<a.length;i++){const o=a[i];if(!s.isPrimitive(e)&&!(o in e))return!1;if(void 0===t[o]&&void 0!==e[o])return!1;if(null===t[o]&&null!==e[o])return!1;if(!r(e[o],t[o],o,e,t,n))return!1}return!0}finally{null===n||void 0===n||n.delete(t)}}(e,t,r,d);case"function":return Object.keys(t).length>0?o(e,n({},t),r,d):i.eq(e,t);default:return a.isObject(e)?"string"!==typeof t||""===t:i.eq(e,t)}}function l(e,t,r,n){if(0===t.length)return!0;if(!Array.isArray(e))return!1;const a=new Set;for(let s=0;s<t.length;s++){const i=t[s];let o=!1;for(let l=0;l<e.length;l++){if(a.has(l))continue;let c=!1;if(r(e[l],i,s,e,t,n)&&(c=!0),c){a.add(l),o=!0;break}}if(!o)return!1}return!0}function c(e,t,r,n){return 0===t.size||e instanceof Set&&l([...e],[...t],r,n)}t.isMatchWith=function e(t,r,n){return"function"!==typeof n?e(t,r,()=>{}):o(t,r,function e(t,r,a,s,i,l){const c=n(t,r,a,s,i,l);return void 0!==c?Boolean(c):o(t,r,e,l)},new Map)},t.isSetMatch=c},2204:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(5316),a=r(7312),s=r(3799);t.sortBy=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];const o=r.length;return o>1&&s.isIterateeCall(e,r[0],r[1])?r=[]:o>2&&s.isIterateeCall(r[0],r[1],r[2])&&(r=[r[0]]),n.orderBy(e,a.flatten(r),["asc"])}},2284:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r.d(t,{A:()=>n})},2330:(e,t,r)=>{"use strict";var n=r(5043);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=n.useState,i=n.useEffect,o=n.useLayoutEffect,l=n.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!a(e,r)}catch(n){return!0}}var d="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=s({inst:{value:r,getSnapshot:t}}),a=n[0].inst,d=n[1];return o(function(){a.value=r,a.getSnapshot=t,c(a)&&d({inst:a})},[e,r,t]),i(function(){return c(a)&&d({inst:a}),e(function(){c(a)&&d({inst:a})})},[e]),l(r),r};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:d},2489:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isDeepKey=function(e){switch(typeof e){case"number":case"symbol":return!1;case"string":return e.includes(".")||e.includes("[")||e.includes("]")}}},2682:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isPlainObject=function(e){if("object"!==typeof e)return!1;if(null==e)return!1;if(null===Object.getPrototypeOf(e))return!0;if("[object Object]"!==Object.prototype.toString.call(e)){var t;const r=e[Symbol.toStringTag];if(null==r)return!1;return!!(null!==(t=Object.getOwnPropertyDescriptor(e,Symbol.toStringTag))&&void 0!==t&&t.writable)&&e.toString()==="[object ".concat(r,"]")}let r=e;for(;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(e)===r}},2715:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(9599),a=r(7330),s=r(3808),i=r(8845);t.iteratee=function(e){if(null==e)return n.identity;switch(typeof e){case"function":return e;case"object":return Array.isArray(e)&&2===e.length?i.matchesProperty(e[0],e[1]):s.matches(e);case"string":case"symbol":case"number":return a.property(e)}}},2730:(e,t,r)=>{"use strict";var n=r(5043),a=r(8853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)i.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},p={};function f(e,t,r,n,a,s,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=i}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new f(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new f(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new f(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new f(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new f(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new f(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new f(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new f(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new f(e,5,!1,e.toLowerCase(),null,!1,!1)});var x=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function v(e,t,r,n){var a=g.hasOwnProperty(t)?g[t]:null;(null!==a?0!==a.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,n){if(null===t||"undefined"===typeof t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,a,n)&&(r=null),n||null===a?function(e){return!!u.call(p,e)||!u.call(m,e)&&(h.test(e)?p[e]=!0:(m[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=null===r?3!==a.type&&"":r:(t=a.attributeName,n=a.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(a=a.type)||4===a&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(x,y);g[t]=new f(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(x,y);g[t]=new f(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(x,y);g[t]=new f(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j=Symbol.for("react.element"),w=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),A=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var I=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}var M,R=Object.assign;function F(e){if(void 0===M)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var B=!1;function z(e,t){if(!e||B)return"";B=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),s=n.stack.split("\n"),i=a.length-1,o=s.length-1;1<=i&&0<=o&&a[i]!==s[o];)o--;for(;1<=i&&0<=o;i--,o--)if(a[i]!==s[o]){if(1!==i||1!==o)do{if(i--,0>--o||a[i]!==s[o]){var l="\n"+a[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=o);break}}}finally{B=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?F(e):""}function U(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case N:return"Fragment";case w:return"Portal";case k:return"Profiler";case _:return"StrictMode";case E:return"Suspense";case T:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return q(e(t))}catch(r){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var a=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){n=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=H(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var r=t.checked;return R({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function Q(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=V(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&v(e,"checked",t,!1)}function J(e,t){$(e,t);var r=V(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,r):t.hasOwnProperty("defaultValue")&&ee(e,t.type,V(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ee(e,t,r){"number"===t&&Y(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var te=Array.isArray;function re(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+V(r),t=null,a=0;a<e.length;a++){if(e[a].value===r)return e[a].selected=!0,void(n&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return R({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(s(92));if(te(r)){if(1<r.length)throw Error(s(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:V(r)}}function se(e,t){var r=V(t.value),n=V(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function he(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var me={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function fe(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||me.hasOwnProperty(e)&&me[e]?(""+t).trim():t+"px"}function ge(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),a=fe(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}Object.keys(me).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),me[t]=me[e]})});var xe=R({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(xe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function je(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Ne=null,_e=null;function ke(e){if(e=va(e)){if("function"!==typeof we)throw Error(s(280));var t=e.stateNode;t&&(t=ja(t),we(e.stateNode,e.type,t))}}function Se(e){Ne?_e?_e.push(e):_e=[e]:Ne=e}function Ae(){if(Ne){var e=Ne,t=_e;if(_e=Ne=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Ce(e,t){return e(t)}function Ee(){}var Te=!1;function Pe(e,t,r){if(Te)return e(t,r);Te=!0;try{return Ce(e,t,r)}finally{Te=!1,(null!==Ne||null!==_e)&&(Ee(),Ae())}}function Oe(e,t){var r=e.stateNode;if(null===r)return null;var n=ja(r);if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(s(231,t,typeof r));return r}var De=!1;if(d)try{var Ie={};Object.defineProperty(Ie,"passive",{get:function(){De=!0}}),window.addEventListener("test",Ie,Ie),window.removeEventListener("test",Ie,Ie)}catch(de){De=!1}function Le(e,t,r,n,a,s,i,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(d){this.onError(d)}}var Me=!1,Re=null,Fe=!1,Be=null,ze={onError:function(e){Me=!0,Re=e}};function Ue(e,t,r,n,a,s,i,o,l){Me=!1,Re=null,Le.apply(ze,arguments)}function qe(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ve(e){if(qe(e)!==e)throw Error(s(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(s(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(n=a.return)){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return Ve(a),e;if(i===n)return Ve(a),t;i=i.sibling}throw Error(s(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o)throw Error(s(189))}}if(r.alternate!==n)throw Error(s(190))}if(3!==r.tag)throw Error(s(188));return r.stateNode.current===r?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var Ke=a.unstable_scheduleCallback,Ye=a.unstable_cancelCallback,Xe=a.unstable_shouldYield,Qe=a.unstable_requestPaint,$e=a.unstable_now,Je=a.unstable_getCurrentPriorityLevel,Ze=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,rt=a.unstable_LowPriority,nt=a.unstable_IdlePriority,at=null,st=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,a=e.suspendedLanes,s=e.pingedLanes,i=268435455&r;if(0!==i){var o=i&~a;0!==o?n=ut(o):0!==(s&=i)&&(n=ut(s))}else 0!==(i=r&~a)?n=ut(i):0!==s&&(n=ut(s));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&a)&&((a=n&-n)>=(s=t&-t)||16===a&&0!==(4194240&s)))return t;if(0!==(4&n)&&(n|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)a=1<<(r=31-it(t)),n|=e[r],t&=~a;return n}function mt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function xt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=r}function yt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-it(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var vt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var jt,wt,Nt,_t,kt,St=!1,At=[],Ct=null,Et=null,Tt=null,Pt=new Map,Ot=new Map,Dt=[],It="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Et=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Mt(e,t,r,n,a,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[a]},null!==t&&(null!==(t=va(t))&&wt(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Rt(e){var t=ya(e.target);if(null!==t){var r=qe(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=We(r)))return e.blockedOn=t,void kt(e.priority,function(){Nt(r)})}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=va(r))&&wt(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);be=n,r.target.dispatchEvent(n),be=null,t.shift()}return!0}function Bt(e,t,r){Ft(e)&&r.delete(t)}function zt(){St=!1,null!==Ct&&Ft(Ct)&&(Ct=null),null!==Et&&Ft(Et)&&(Et=null),null!==Tt&&Ft(Tt)&&(Tt=null),Pt.forEach(Bt),Ot.forEach(Bt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,zt)))}function qt(e){function t(t){return Ut(t,e)}if(0<At.length){Ut(At[0],e);for(var r=1;r<At.length;r++){var n=At[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==Ct&&Ut(Ct,e),null!==Et&&Ut(Et,e),null!==Tt&&Ut(Tt,e),Pt.forEach(t),Ot.forEach(t),r=0;r<Dt.length;r++)(n=Dt[r]).blockedOn===e&&(n.blockedOn=null);for(;0<Dt.length&&null===(r=Dt[0]).blockedOn;)Rt(r),null===r.blockedOn&&Dt.shift()}var Wt=b.ReactCurrentBatchConfig,Vt=!0;function Ht(e,t,r,n){var a=vt,s=Wt.transition;Wt.transition=null;try{vt=1,Kt(e,t,r,n)}finally{vt=a,Wt.transition=s}}function Gt(e,t,r,n){var a=vt,s=Wt.transition;Wt.transition=null;try{vt=4,Kt(e,t,r,n)}finally{vt=a,Wt.transition=s}}function Kt(e,t,r,n){if(Vt){var a=Xt(e,t,r,n);if(null===a)Vn(e,t,n,Yt,r),Lt(e,n);else if(function(e,t,r,n,a){switch(t){case"focusin":return Ct=Mt(Ct,e,t,r,n,a),!0;case"dragenter":return Et=Mt(Et,e,t,r,n,a),!0;case"mouseover":return Tt=Mt(Tt,e,t,r,n,a),!0;case"pointerover":var s=a.pointerId;return Pt.set(s,Mt(Pt.get(s)||null,e,t,r,n,a)),!0;case"gotpointercapture":return s=a.pointerId,Ot.set(s,Mt(Ot.get(s)||null,e,t,r,n,a)),!0}return!1}(a,e,t,r,n))n.stopPropagation();else if(Lt(e,n),4&t&&-1<It.indexOf(e)){for(;null!==a;){var s=va(a);if(null!==s&&jt(s),null===(s=Xt(e,t,r,n))&&Vn(e,t,n,Yt,r),s===a)break;a=s}null!==a&&n.stopPropagation()}else Vn(e,t,n,null,r)}}var Yt=null;function Xt(e,t,r,n){if(Yt=null,null!==(e=ya(e=je(n))))if(null===(t=qe(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case rt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var $t=null,Jt=null,Zt=null;function er(){if(Zt)return Zt;var e,t,r=Jt,n=r.length,a="value"in $t?$t.value:$t.textContent,s=a.length;for(e=0;e<n&&r[e]===a[e];e++);var i=n-e;for(t=1;t<=i&&r[n-t]===a[s-t];t++);return Zt=a.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function nr(){return!1}function ar(e){function t(t,r,n,a,s){for(var i in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=a,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?rr:nr,this.isPropagationStopped=nr,this}return R(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var sr,ir,or,lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cr=ar(lr),dr=R({},lr,{view:0,detail:0}),ur=ar(dr),hr=R({},dr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_r,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==or&&(or&&"mousemove"===e.type?(sr=e.screenX-or.screenX,ir=e.screenY-or.screenY):ir=sr=0,or=e),sr)},movementY:function(e){return"movementY"in e?e.movementY:ir}}),mr=ar(hr),pr=ar(R({},hr,{dataTransfer:0})),fr=ar(R({},dr,{relatedTarget:0})),gr=ar(R({},lr,{animationName:0,elapsedTime:0,pseudoElement:0})),xr=R({},lr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yr=ar(xr),vr=ar(R({},lr,{data:0})),br={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wr[e])&&!!t[e]}function _r(){return Nr}var kr=R({},dr,{key:function(e){if(e.key){var t=br[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?jr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_r,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sr=ar(kr),Ar=ar(R({},hr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Cr=ar(R({},dr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_r})),Er=ar(R({},lr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Tr=R({},hr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pr=ar(Tr),Or=[9,13,27,32],Dr=d&&"CompositionEvent"in window,Ir=null;d&&"documentMode"in document&&(Ir=document.documentMode);var Lr=d&&"TextEvent"in window&&!Ir,Mr=d&&(!Dr||Ir&&8<Ir&&11>=Ir),Rr=String.fromCharCode(32),Fr=!1;function Br(e,t){switch(e){case"keyup":return-1!==Or.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zr(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Ur=!1;var qr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qr[e.type]:"textarea"===t}function Vr(e,t,r,n){Se(n),0<(t=Gn(t,"onChange")).length&&(r=new cr("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Hr=null,Gr=null;function Kr(e){Fn(e,0)}function Yr(e){if(K(ba(e)))return e}function Xr(e,t){if("change"===e)return t}var Qr=!1;if(d){var $r;if(d){var Jr="oninput"in document;if(!Jr){var Zr=document.createElement("div");Zr.setAttribute("oninput","return;"),Jr="function"===typeof Zr.oninput}$r=Jr}else $r=!1;Qr=$r&&(!document.documentMode||9<document.documentMode)}function en(){Hr&&(Hr.detachEvent("onpropertychange",tn),Gr=Hr=null)}function tn(e){if("value"===e.propertyName&&Yr(Gr)){var t=[];Vr(t,Gr,e,je(e)),Pe(Kr,t)}}function rn(e,t,r){"focusin"===e?(en(),Gr=r,(Hr=t).attachEvent("onpropertychange",tn)):"focusout"===e&&en()}function nn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yr(Gr)}function an(e,t){if("click"===e)return Yr(t)}function sn(e,t){if("input"===e||"change"===e)return Yr(t)}var on="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ln(e,t){if(on(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!u.call(t,a)||!on(e[a],t[a]))return!1}return!0}function cn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dn(e,t){var r,n=cn(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cn(n)}}function un(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?un(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hn(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=Y((e=t.contentWindow).document)}return t}function mn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pn(e){var t=hn(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&un(r.ownerDocument.documentElement,r)){if(null!==n&&mn(r))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=r.textContent.length,s=Math.min(n.start,a);n=void 0===n.end?s:Math.min(n.end,a),!e.extend&&s>n&&(a=n,n=s,s=a),a=dn(r,s);var i=dn(r,n);a&&i&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),s>n?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fn=d&&"documentMode"in document&&11>=document.documentMode,gn=null,xn=null,yn=null,vn=!1;function bn(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;vn||null==gn||gn!==Y(n)||("selectionStart"in(n=gn)&&mn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},yn&&ln(yn,n)||(yn=n,0<(n=Gn(xn,"onSelect")).length&&(t=new cr("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=gn)))}function jn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var wn={animationend:jn("Animation","AnimationEnd"),animationiteration:jn("Animation","AnimationIteration"),animationstart:jn("Animation","AnimationStart"),transitionend:jn("Transition","TransitionEnd")},Nn={},_n={};function kn(e){if(Nn[e])return Nn[e];if(!wn[e])return e;var t,r=wn[e];for(t in r)if(r.hasOwnProperty(t)&&t in _n)return Nn[e]=r[t];return e}d&&(_n=document.createElement("div").style,"AnimationEvent"in window||(delete wn.animationend.animation,delete wn.animationiteration.animation,delete wn.animationstart.animation),"TransitionEvent"in window||delete wn.transitionend.transition);var Sn=kn("animationend"),An=kn("animationiteration"),Cn=kn("animationstart"),En=kn("transitionend"),Tn=new Map,Pn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function On(e,t){Tn.set(e,t),l(t,[e])}for(var Dn=0;Dn<Pn.length;Dn++){var In=Pn[Dn];On(In.toLowerCase(),"on"+(In[0].toUpperCase()+In.slice(1)))}On(Sn,"onAnimationEnd"),On(An,"onAnimationIteration"),On(Cn,"onAnimationStart"),On("dblclick","onDoubleClick"),On("focusin","onFocus"),On("focusout","onBlur"),On(En,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ln="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mn=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ln));function Rn(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,n,a,i,o,l,c){if(Ue.apply(this,arguments),Me){if(!Me)throw Error(s(198));var d=Re;Me=!1,Re=null,Fe||(Fe=!0,Be=d)}}(n,t,void 0,e),e.currentTarget=null}function Fn(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var i=n.length-1;0<=i;i--){var o=n[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&a.isPropagationStopped())break e;Rn(a,o,c),s=l}else for(i=0;i<n.length;i++){if(l=(o=n[i]).instance,c=o.currentTarget,o=o.listener,l!==s&&a.isPropagationStopped())break e;Rn(a,o,c),s=l}}}if(Fe)throw e=Be,Fe=!1,Be=null,e}function Bn(e,t){var r=t[fa];void 0===r&&(r=t[fa]=new Set);var n=e+"__bubble";r.has(n)||(Wn(t,e,2,!1),r.add(n))}function zn(e,t,r){var n=0;t&&(n|=4),Wn(r,e,n,t)}var Un="_reactListening"+Math.random().toString(36).slice(2);function qn(e){if(!e[Un]){e[Un]=!0,i.forEach(function(t){"selectionchange"!==t&&(Mn.has(t)||zn(t,!1,e),zn(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Un]||(t[Un]=!0,zn("selectionchange",!1,t))}}function Wn(e,t,r,n){switch(Qt(t)){case 1:var a=Ht;break;case 4:a=Gt;break;default:a=Kt}r=a.bind(null,t,r,e),a=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),n?void 0!==a?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):void 0!==a?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Vn(e,t,r,n,a){var s=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var i=n.tag;if(3===i||4===i){var o=n.stateNode.containerInfo;if(o===a||8===o.nodeType&&o.parentNode===a)break;if(4===i)for(i=n.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;i=i.return}for(;null!==o;){if(null===(i=ya(o)))return;if(5===(l=i.tag)||6===l){n=s=i;continue e}o=o.parentNode}}n=n.return}Pe(function(){var n=s,a=je(r),i=[];e:{var o=Tn.get(e);if(void 0!==o){var l=cr,c=e;switch(e){case"keypress":if(0===tr(r))break e;case"keydown":case"keyup":l=Sr;break;case"focusin":c="focus",l=fr;break;case"focusout":c="blur",l=fr;break;case"beforeblur":case"afterblur":l=fr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Cr;break;case Sn:case An:case Cn:l=gr;break;case En:l=Er;break;case"scroll":l=ur;break;case"wheel":l=Pr;break;case"copy":case"cut":case"paste":l=yr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Ar}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==o?o+"Capture":null:o;d=[];for(var m,p=n;null!==p;){var f=(m=p).stateNode;if(5===m.tag&&null!==f&&(m=f,null!==h&&(null!=(f=Oe(p,h))&&d.push(Hn(p,f,m)))),u)break;p=p.return}0<d.length&&(o=new l(o,c,null,r,a),i.push({event:o,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||r===be||!(c=r.relatedTarget||r.fromElement)||!ya(c)&&!c[pa])&&(l||o)&&(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=n,null!==(c=(c=r.relatedTarget||r.toElement)?ya(c):null)&&(c!==(u=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=n),l!==c)){if(d=mr,f="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=Ar,f="onPointerLeave",h="onPointerEnter",p="pointer"),u=null==l?o:ba(l),m=null==c?o:ba(c),(o=new d(f,p+"leave",l,r,a)).target=u,o.relatedTarget=m,f=null,ya(a)===n&&((d=new d(h,p+"enter",c,r,a)).target=m,d.relatedTarget=u,f=d),u=f,l&&c)e:{for(h=c,p=0,m=d=l;m;m=Kn(m))p++;for(m=0,f=h;f;f=Kn(f))m++;for(;0<p-m;)d=Kn(d),p--;for(;0<m-p;)h=Kn(h),m--;for(;p--;){if(d===h||null!==h&&d===h.alternate)break e;d=Kn(d),h=Kn(h)}d=null}else d=null;null!==l&&Yn(i,o,l,d,!1),null!==c&&null!==u&&Yn(i,u,c,d,!0)}if("select"===(l=(o=n?ba(n):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Xr;else if(Wr(o))if(Qr)g=sn;else{g=nn;var x=rn}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=an);switch(g&&(g=g(e,n))?Vr(i,g,r,a):(x&&x(e,o,n),"focusout"===e&&(x=o._wrapperState)&&x.controlled&&"number"===o.type&&ee(o,"number",o.value)),x=n?ba(n):window,e){case"focusin":(Wr(x)||"true"===x.contentEditable)&&(gn=x,xn=n,yn=null);break;case"focusout":yn=xn=gn=null;break;case"mousedown":vn=!0;break;case"contextmenu":case"mouseup":case"dragend":vn=!1,bn(i,r,a);break;case"selectionchange":if(fn)break;case"keydown":case"keyup":bn(i,r,a)}var y;if(Dr)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Ur?Br(e,r)&&(v="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(v="onCompositionStart");v&&(Mr&&"ko"!==r.locale&&(Ur||"onCompositionStart"!==v?"onCompositionEnd"===v&&Ur&&(y=er()):(Jt="value"in($t=a)?$t.value:$t.textContent,Ur=!0)),0<(x=Gn(n,v)).length&&(v=new vr(v,e,null,r,a),i.push({event:v,listeners:x}),y?v.data=y:null!==(y=zr(r))&&(v.data=y))),(y=Lr?function(e,t){switch(e){case"compositionend":return zr(t);case"keypress":return 32!==t.which?null:(Fr=!0,Rr);case"textInput":return(e=t.data)===Rr&&Fr?null:e;default:return null}}(e,r):function(e,t){if(Ur)return"compositionend"===e||!Dr&&Br(e,t)?(e=er(),Zt=Jt=$t=null,Ur=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mr&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(n=Gn(n,"onBeforeInput")).length&&(a=new vr("onBeforeInput","beforeinput",null,r,a),i.push({event:a,listeners:n}),a.data=y))}Fn(i,t)})}function Hn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Gn(e,t){for(var r=t+"Capture",n=[];null!==e;){var a=e,s=a.stateNode;5===a.tag&&null!==s&&(a=s,null!=(s=Oe(e,r))&&n.unshift(Hn(e,s,a)),null!=(s=Oe(e,t))&&n.push(Hn(e,s,a))),e=e.return}return n}function Kn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yn(e,t,r,n,a){for(var s=t._reactName,i=[];null!==r&&r!==n;){var o=r,l=o.alternate,c=o.stateNode;if(null!==l&&l===n)break;5===o.tag&&null!==c&&(o=c,a?null!=(l=Oe(r,s))&&i.unshift(Hn(r,l,o)):a||null!=(l=Oe(r,s))&&i.push(Hn(r,l,o))),r=r.return}0!==i.length&&e.push({event:t,listeners:i})}var Xn=/\r\n?/g,Qn=/\u0000|\uFFFD/g;function $n(e){return("string"===typeof e?e:""+e).replace(Xn,"\n").replace(Qn,"")}function Jn(e,t,r){if(t=$n(t),$n(e)!==t&&r)throw Error(s(425))}function Zn(){}var ea=null,ta=null;function ra(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var na="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,sa="function"===typeof Promise?Promise:void 0,ia="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sa?function(e){return sa.resolve(null).then(e).catch(oa)}:na;function oa(e){setTimeout(function(){throw e})}function la(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&8===a.nodeType)if("/$"===(r=a.data)){if(0===n)return e.removeChild(a),void qt(t);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=a}while(r);qt(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function da(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var ua=Math.random().toString(36).slice(2),ha="__reactFiber$"+ua,ma="__reactProps$"+ua,pa="__reactContainer$"+ua,fa="__reactEvents$"+ua,ga="__reactListeners$"+ua,xa="__reactHandles$"+ua;function ya(e){var t=e[ha];if(t)return t;for(var r=e.parentNode;r;){if(t=r[pa]||r[ha]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=da(e);null!==e;){if(r=e[ha])return r;e=da(e)}return t}r=(e=r).parentNode}return null}function va(e){return!(e=e[ha]||e[pa])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ba(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function ja(e){return e[ma]||null}var wa=[],Na=-1;function _a(e){return{current:e}}function ka(e){0>Na||(e.current=wa[Na],wa[Na]=null,Na--)}function Sa(e,t){Na++,wa[Na]=e.current,e.current=t}var Aa={},Ca=_a(Aa),Ea=_a(!1),Ta=Aa;function Pa(e,t){var r=e.type.contextTypes;if(!r)return Aa;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a,s={};for(a in r)s[a]=t[a];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Oa(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Da(){ka(Ea),ka(Ca)}function Ia(e,t,r){if(Ca.current!==Aa)throw Error(s(168));Sa(Ca,t),Sa(Ea,r)}function La(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,"function"!==typeof n.getChildContext)return r;for(var a in n=n.getChildContext())if(!(a in t))throw Error(s(108,W(e)||"Unknown",a));return R({},r,n)}function Ma(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Aa,Ta=Ca.current,Sa(Ca,e),Sa(Ea,Ea.current),!0}function Ra(e,t,r){var n=e.stateNode;if(!n)throw Error(s(169));r?(e=La(e,t,Ta),n.__reactInternalMemoizedMergedChildContext=e,ka(Ea),ka(Ca),Sa(Ca,e)):ka(Ea),Sa(Ea,r)}var Fa=null,Ba=!1,za=!1;function Ua(e){null===Fa?Fa=[e]:Fa.push(e)}function qa(){if(!za&&null!==Fa){za=!0;var e=0,t=vt;try{var r=Fa;for(vt=1;e<r.length;e++){var n=r[e];do{n=n(!0)}while(null!==n)}Fa=null,Ba=!1}catch(a){throw null!==Fa&&(Fa=Fa.slice(e+1)),Ke(Ze,qa),a}finally{vt=t,za=!1}}return null}var Wa=[],Va=0,Ha=null,Ga=0,Ka=[],Ya=0,Xa=null,Qa=1,$a="";function Ja(e,t){Wa[Va++]=Ga,Wa[Va++]=Ha,Ha=e,Ga=t}function Za(e,t,r){Ka[Ya++]=Qa,Ka[Ya++]=$a,Ka[Ya++]=Xa,Xa=e;var n=Qa;e=$a;var a=32-it(n)-1;n&=~(1<<a),r+=1;var s=32-it(t)+a;if(30<s){var i=a-a%5;s=(n&(1<<i)-1).toString(32),n>>=i,a-=i,Qa=1<<32-it(t)+a|r<<a|n,$a=s+e}else Qa=1<<s|r<<a|n,$a=e}function es(e){null!==e.return&&(Ja(e,1),Za(e,1,0))}function ts(e){for(;e===Ha;)Ha=Wa[--Va],Wa[Va]=null,Ga=Wa[--Va],Wa[Va]=null;for(;e===Xa;)Xa=Ka[--Ya],Ka[Ya]=null,$a=Ka[--Ya],Ka[Ya]=null,Qa=Ka[--Ya],Ka[Ya]=null}var rs=null,ns=null,as=!1,ss=null;function is(e,t){var r=Pc(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function os(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,rs=e,ns=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,rs=e,ns=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Xa?{id:Qa,overflow:$a}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Pc(18,null,null,0)).stateNode=t,r.return=e,e.child=r,rs=e,ns=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(as){var t=ns;if(t){var r=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=ca(r.nextSibling);var n=rs;t&&os(e,t)?is(n,r):(e.flags=-4097&e.flags|2,as=!1,rs=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,as=!1,rs=e}}}function ds(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;rs=e}function us(e){if(e!==rs)return!1;if(!as)return ds(e),as=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ra(e.type,e.memoizedProps)),t&&(t=ns)){if(ls(e))throw hs(),Error(s(418));for(;t;)is(e,t),t=ca(t.nextSibling)}if(ds(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){ns=ca(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}ns=null}}else ns=rs?ca(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=ns;e;)e=ca(e.nextSibling)}function ms(){ns=rs=null,as=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var fs=b.ReactCurrentBatchConfig;function gs(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(s(309));var n=r.stateNode}if(!n)throw Error(s(147,e));var a=n,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=a.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(s(284));if(!r._owner)throw Error(s(290,e))}return e}function xs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function vs(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function i(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=2,r):n:(t.flags|=2,r):(t.flags|=1048576,r)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,r,n){return null===t||6!==t.tag?((t=Rc(r,e.mode,n)).return=e,t):((t=a(t,r)).return=e,t)}function c(e,t,r,n){var s=r.type;return s===N?u(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===O&&ys(s)===t.type)?((n=a(t,r.props)).ref=gs(e,t,r),n.return=e,n):((n=Ic(r.type,r.key,r.props,null,e.mode,n)).ref=gs(e,t,r),n.return=e,n)}function d(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Fc(r,e.mode,n)).return=e,t):((t=a(t,r.children||[])).return=e,t)}function u(e,t,r,n,s){return null===t||7!==t.tag?((t=Lc(r,e.mode,n,s)).return=e,t):((t=a(t,r)).return=e,t)}function h(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Rc(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case j:return(r=Ic(t.type,t.key,t.props,null,e.mode,r)).ref=gs(e,null,t),r.return=e,r;case w:return(t=Fc(t,e.mode,r)).return=e,t;case O:return h(e,(0,t._init)(t._payload),r)}if(te(t)||L(t))return(t=Lc(t,e.mode,r,null)).return=e,t;xs(e,t)}return null}function m(e,t,r,n){var a=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==a?null:l(e,t,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case j:return r.key===a?c(e,t,r,n):null;case w:return r.key===a?d(e,t,r,n):null;case O:return m(e,t,(a=r._init)(r._payload),n)}if(te(r)||L(r))return null!==a?null:u(e,t,r,n,null);xs(e,r)}return null}function p(e,t,r,n,a){if("string"===typeof n&&""!==n||"number"===typeof n)return l(t,e=e.get(r)||null,""+n,a);if("object"===typeof n&&null!==n){switch(n.$$typeof){case j:return c(t,e=e.get(null===n.key?r:n.key)||null,n,a);case w:return d(t,e=e.get(null===n.key?r:n.key)||null,n,a);case O:return p(e,t,r,(0,n._init)(n._payload),a)}if(te(n)||L(n))return u(t,e=e.get(r)||null,n,a,null);xs(t,n)}return null}function f(a,s,o,l){for(var c=null,d=null,u=s,f=s=0,g=null;null!==u&&f<o.length;f++){u.index>f?(g=u,u=null):g=u.sibling;var x=m(a,u,o[f],l);if(null===x){null===u&&(u=g);break}e&&u&&null===x.alternate&&t(a,u),s=i(x,s,f),null===d?c=x:d.sibling=x,d=x,u=g}if(f===o.length)return r(a,u),as&&Ja(a,f),c;if(null===u){for(;f<o.length;f++)null!==(u=h(a,o[f],l))&&(s=i(u,s,f),null===d?c=u:d.sibling=u,d=u);return as&&Ja(a,f),c}for(u=n(a,u);f<o.length;f++)null!==(g=p(u,a,f,o[f],l))&&(e&&null!==g.alternate&&u.delete(null===g.key?f:g.key),s=i(g,s,f),null===d?c=g:d.sibling=g,d=g);return e&&u.forEach(function(e){return t(a,e)}),as&&Ja(a,f),c}function g(a,o,l,c){var d=L(l);if("function"!==typeof d)throw Error(s(150));if(null==(l=d.call(l)))throw Error(s(151));for(var u=d=null,f=o,g=o=0,x=null,y=l.next();null!==f&&!y.done;g++,y=l.next()){f.index>g?(x=f,f=null):x=f.sibling;var v=m(a,f,y.value,c);if(null===v){null===f&&(f=x);break}e&&f&&null===v.alternate&&t(a,f),o=i(v,o,g),null===u?d=v:u.sibling=v,u=v,f=x}if(y.done)return r(a,f),as&&Ja(a,g),d;if(null===f){for(;!y.done;g++,y=l.next())null!==(y=h(a,y.value,c))&&(o=i(y,o,g),null===u?d=y:u.sibling=y,u=y);return as&&Ja(a,g),d}for(f=n(a,f);!y.done;g++,y=l.next())null!==(y=p(f,a,g,y.value,c))&&(e&&null!==y.alternate&&f.delete(null===y.key?g:y.key),o=i(y,o,g),null===u?d=y:u.sibling=y,u=y);return e&&f.forEach(function(e){return t(a,e)}),as&&Ja(a,g),d}return function e(n,s,i,l){if("object"===typeof i&&null!==i&&i.type===N&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case j:e:{for(var c=i.key,d=s;null!==d;){if(d.key===c){if((c=i.type)===N){if(7===d.tag){r(n,d.sibling),(s=a(d,i.props.children)).return=n,n=s;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&ys(c)===d.type){r(n,d.sibling),(s=a(d,i.props)).ref=gs(n,d,i),s.return=n,n=s;break e}r(n,d);break}t(n,d),d=d.sibling}i.type===N?((s=Lc(i.props.children,n.mode,l,i.key)).return=n,n=s):((l=Ic(i.type,i.key,i.props,null,n.mode,l)).ref=gs(n,s,i),l.return=n,n=l)}return o(n);case w:e:{for(d=i.key;null!==s;){if(s.key===d){if(4===s.tag&&s.stateNode.containerInfo===i.containerInfo&&s.stateNode.implementation===i.implementation){r(n,s.sibling),(s=a(s,i.children||[])).return=n,n=s;break e}r(n,s);break}t(n,s),s=s.sibling}(s=Fc(i,n.mode,l)).return=n,n=s}return o(n);case O:return e(n,s,(d=i._init)(i._payload),l)}if(te(i))return f(n,s,i,l);if(L(i))return g(n,s,i,l);xs(n,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==s&&6===s.tag?(r(n,s.sibling),(s=a(s,i)).return=n,n=s):(r(n,s),(s=Rc(i,n.mode,l)).return=n,n=s),o(n)):r(n,s)}}var bs=vs(!0),js=vs(!1),ws=_a(null),Ns=null,_s=null,ks=null;function Ss(){ks=_s=Ns=null}function As(e){var t=ws.current;ka(ws),e._currentValue=t}function Cs(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Es(e,t){Ns=e,ks=_s=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(vo=!0),e.firstContext=null)}function Ts(e){var t=e._currentValue;if(ks!==e)if(e={context:e,memoizedValue:t,next:null},null===_s){if(null===Ns)throw Error(s(308));_s=e,Ns.dependencies={lanes:0,firstContext:e}}else _s=_s.next=e;return t}var Ps=null;function Os(e){null===Ps?Ps=[e]:Ps.push(e)}function Ds(e,t,r,n){var a=t.interleaved;return null===a?(r.next=r,Os(t)):(r.next=a.next,a.next=r),t.interleaved=r,Is(e,n)}function Is(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var Ls=!1;function Ms(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Bs(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&Cl)){var a=n.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Is(e,r)}return null===(a=n.interleaved)?(t.next=t,Os(n)):(t.next=a.next,a.next=t),n.interleaved=t,Is(e,r)}function zs(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&r))){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,yt(e,r)}}function Us(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var a=null,s=null;if(null!==(r=r.firstBaseUpdate)){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===s?a=s=i:s=s.next=i,r=r.next}while(null!==r);null===s?a=s=t:s=s.next=t}else a=s=t;return r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function qs(e,t,r,n){var a=e.updateQueue;Ls=!1;var s=a.firstBaseUpdate,i=a.lastBaseUpdate,o=a.shared.pending;if(null!==o){a.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?s=c:i.next=c,i=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==s){var u=a.baseState;for(i=0,d=c=l=null,o=s;;){var h=o.lane,m=o.eventTime;if((n&h)===h){null!==d&&(d=d.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,f=o;switch(h=t,m=r,f.tag){case 1:if("function"===typeof(p=f.payload)){u=p.call(m,u,h);break e}u=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=f.payload)?p.call(m,u,h):p)||void 0===h)break e;u=R({},u,h);break e;case 2:Ls=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=a.effects)?a.effects=[o]:h.push(o))}else m={eventTime:m,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=m,l=u):d=d.next=m,i|=h;if(null===(o=o.next)){if(null===(o=a.shared.pending))break;o=(h=o).next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}if(null===d&&(l=u),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=d,null!==(t=a.shared.interleaved)){a=t;do{i|=a.lane,a=a.next}while(a!==t)}else null===s&&(a.shared.lanes=0);Ml|=i,e.lanes=i,e.memoizedState=u}}function Ws(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(null!==a){if(n.callback=null,n=r,"function"!==typeof a)throw Error(s(191,a));a.call(n)}}}var Vs={},Hs=_a(Vs),Gs=_a(Vs),Ks=_a(Vs);function Ys(e){if(e===Vs)throw Error(s(174));return e}function Xs(e,t){switch(Sa(Ks,t),Sa(Gs,e),Sa(Hs,Vs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ka(Hs),Sa(Hs,t)}function Qs(){ka(Hs),ka(Gs),ka(Ks)}function $s(e){Ys(Ks.current);var t=Ys(Hs.current),r=le(t,e.type);t!==r&&(Sa(Gs,e),Sa(Hs,r))}function Js(e){Gs.current===e&&(ka(Hs),ka(Gs))}var Zs=_a(0);function ei(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ti=[];function ri(){for(var e=0;e<ti.length;e++)ti[e]._workInProgressVersionPrimary=null;ti.length=0}var ni=b.ReactCurrentDispatcher,ai=b.ReactCurrentBatchConfig,si=0,ii=null,oi=null,li=null,ci=!1,di=!1,ui=0,hi=0;function mi(){throw Error(s(321))}function pi(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!on(e[r],t[r]))return!1;return!0}function fi(e,t,r,n,a,i){if(si=i,ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ni.current=null===e||null===e.memoizedState?Ji:Zi,e=r(n,a),di){i=0;do{if(di=!1,ui=0,25<=i)throw Error(s(301));i+=1,li=oi=null,t.updateQueue=null,ni.current=eo,e=r(n,a)}while(di)}if(ni.current=$i,t=null!==oi&&null!==oi.next,si=0,li=oi=ii=null,ci=!1,t)throw Error(s(300));return e}function gi(){var e=0!==ui;return ui=0,e}function xi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===li?ii.memoizedState=li=e:li=li.next=e,li}function yi(){if(null===oi){var e=ii.alternate;e=null!==e?e.memoizedState:null}else e=oi.next;var t=null===li?ii.memoizedState:li.next;if(null!==t)li=t,oi=e;else{if(null===e)throw Error(s(310));e={memoizedState:(oi=e).memoizedState,baseState:oi.baseState,baseQueue:oi.baseQueue,queue:oi.queue,next:null},null===li?ii.memoizedState=li=e:li=li.next=e}return li}function vi(e,t){return"function"===typeof t?t(e):t}function bi(e){var t=yi(),r=t.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=e;var n=oi,a=n.baseQueue,i=r.pending;if(null!==i){if(null!==a){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(null!==a){i=a.next,n=n.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((si&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,o=n):c=c.next=h,ii.lanes|=u,Ml|=u}d=d.next}while(null!==d&&d!==i);null===c?o=n:c.next=l,on(n,t.memoizedState)||(vo=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(null!==(e=r.interleaved)){a=e;do{i=a.lane,ii.lanes|=i,Ml|=i,a=a.next}while(a!==e)}else null===a&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function ji(e){var t=yi(),r=t.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(null!==a){r.pending=null;var o=a=a.next;do{i=e(i,o.action),o=o.next}while(o!==a);on(i,t.memoizedState)||(vo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function wi(){}function Ni(e,t){var r=ii,n=yi(),a=t(),i=!on(n.memoizedState,a);if(i&&(n.memoizedState=a,vo=!0),n=n.queue,Li(Si.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||null!==li&&1&li.memoizedState.tag){if(r.flags|=2048,Ti(9,ki.bind(null,r,n,a,t),void 0,null),null===El)throw Error(s(349));0!==(30&si)||_i(r,t,a)}return a}function _i(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function ki(e,t,r,n){t.value=r,t.getSnapshot=n,Ai(t)&&Ci(e)}function Si(e,t,r){return r(function(){Ai(t)&&Ci(e)})}function Ai(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!on(e,r)}catch(n){return!0}}function Ci(e){var t=Is(e,1);null!==t&&rc(t,e,1,-1)}function Ei(e){var t=xi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:e},t.queue=e,e=e.dispatch=Ki.bind(null,ii,e),[t.memoizedState,e]}function Ti(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function Pi(){return yi().memoizedState}function Oi(e,t,r,n){var a=xi();ii.flags|=e,a.memoizedState=Ti(1|t,r,void 0,void 0===n?null:n)}function Di(e,t,r,n){var a=yi();n=void 0===n?null:n;var s=void 0;if(null!==oi){var i=oi.memoizedState;if(s=i.destroy,null!==n&&pi(n,i.deps))return void(a.memoizedState=Ti(t,r,s,n))}ii.flags|=e,a.memoizedState=Ti(1|t,r,s,n)}function Ii(e,t){return Oi(8390656,8,e,t)}function Li(e,t){return Di(2048,8,e,t)}function Mi(e,t){return Di(4,2,e,t)}function Ri(e,t){return Di(4,4,e,t)}function Fi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Bi(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Di(4,4,Fi.bind(null,t,e),r)}function zi(){}function Ui(e,t){var r=yi();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&pi(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function qi(e,t){var r=yi();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&pi(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Wi(e,t,r){return 0===(21&si)?(e.baseState&&(e.baseState=!1,vo=!0),e.memoizedState=r):(on(r,t)||(r=ft(),ii.lanes|=r,Ml|=r,e.baseState=!0),t)}function Vi(e,t){var r=vt;vt=0!==r&&4>r?r:4,e(!0);var n=ai.transition;ai.transition={};try{e(!1),t()}finally{vt=r,ai.transition=n}}function Hi(){return yi().memoizedState}function Gi(e,t,r){var n=tc(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Yi(e))Xi(t,r);else if(null!==(r=Ds(e,t,r,n))){rc(r,e,n,ec()),Qi(r,t,n)}}function Ki(e,t,r){var n=tc(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Yi(e))Xi(t,a);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=s(i,r);if(a.hasEagerState=!0,a.eagerState=o,on(o,i)){var l=t.interleaved;return null===l?(a.next=a,Os(t)):(a.next=l.next,l.next=a),void(t.interleaved=a)}}catch(c){}null!==(r=Ds(e,t,a,n))&&(rc(r,e,n,a=ec()),Qi(r,t,n))}}function Yi(e){var t=e.alternate;return e===ii||null!==t&&t===ii}function Xi(e,t){di=ci=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Qi(e,t,r){if(0!==(4194240&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,yt(e,r)}}var $i={readContext:Ts,useCallback:mi,useContext:mi,useEffect:mi,useImperativeHandle:mi,useInsertionEffect:mi,useLayoutEffect:mi,useMemo:mi,useReducer:mi,useRef:mi,useState:mi,useDebugValue:mi,useDeferredValue:mi,useTransition:mi,useMutableSource:mi,useSyncExternalStore:mi,useId:mi,unstable_isNewReconciler:!1},Ji={readContext:Ts,useCallback:function(e,t){return xi().memoizedState=[e,void 0===t?null:t],e},useContext:Ts,useEffect:Ii,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Oi(4194308,4,Fi.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Oi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Oi(4,2,e,t)},useMemo:function(e,t){var r=xi();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=xi();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Gi.bind(null,ii,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},xi().memoizedState=e},useState:Ei,useDebugValue:zi,useDeferredValue:function(e){return xi().memoizedState=e},useTransition:function(){var e=Ei(!1),t=e[0];return e=Vi.bind(null,e[1]),xi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ii,a=xi();if(as){if(void 0===r)throw Error(s(407));r=r()}else{if(r=t(),null===El)throw Error(s(349));0!==(30&si)||_i(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,Ii(Si.bind(null,n,i,e),[e]),n.flags|=2048,Ti(9,ki.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=xi(),t=El.identifierPrefix;if(as){var r=$a;t=":"+t+"R"+(r=(Qa&~(1<<32-it(Qa)-1)).toString(32)+r),0<(r=ui++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=hi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zi={readContext:Ts,useCallback:Ui,useContext:Ts,useEffect:Li,useImperativeHandle:Bi,useInsertionEffect:Mi,useLayoutEffect:Ri,useMemo:qi,useReducer:bi,useRef:Pi,useState:function(){return bi(vi)},useDebugValue:zi,useDeferredValue:function(e){return Wi(yi(),oi.memoizedState,e)},useTransition:function(){return[bi(vi)[0],yi().memoizedState]},useMutableSource:wi,useSyncExternalStore:Ni,useId:Hi,unstable_isNewReconciler:!1},eo={readContext:Ts,useCallback:Ui,useContext:Ts,useEffect:Li,useImperativeHandle:Bi,useInsertionEffect:Mi,useLayoutEffect:Ri,useMemo:qi,useReducer:ji,useRef:Pi,useState:function(){return ji(vi)},useDebugValue:zi,useDeferredValue:function(e){var t=yi();return null===oi?t.memoizedState=e:Wi(t,oi.memoizedState,e)},useTransition:function(){return[ji(vi)[0],yi().memoizedState]},useMutableSource:wi,useSyncExternalStore:Ni,useId:Hi,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var r in t=R({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}function ro(e,t,r,n){r=null===(r=r(n,t=e.memoizedState))||void 0===r?t:R({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var no={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ec(),a=tc(e),s=Fs(n,a);s.payload=t,void 0!==r&&null!==r&&(s.callback=r),null!==(t=Bs(e,s,a))&&(rc(t,e,a,n),zs(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ec(),a=tc(e),s=Fs(n,a);s.tag=1,s.payload=t,void 0!==r&&null!==r&&(s.callback=r),null!==(t=Bs(e,s,a))&&(rc(t,e,a,n),zs(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ec(),n=tc(e),a=Fs(r,n);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=Bs(e,a,n))&&(rc(t,e,n,r),zs(t,e,n))}};function ao(e,t,r,n,a,s,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,s,i):!t.prototype||!t.prototype.isPureReactComponent||(!ln(r,n)||!ln(a,s))}function so(e,t,r){var n=!1,a=Aa,s=t.contextType;return"object"===typeof s&&null!==s?s=Ts(s):(a=Oa(t)?Ta:Ca.current,s=(n=null!==(n=t.contextTypes)&&void 0!==n)?Pa(e,a):Aa),t=new t(r,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=no,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=s),t}function io(e,t,r,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&no.enqueueReplaceState(t,t.state,null)}function oo(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Ms(e);var s=t.contextType;"object"===typeof s&&null!==s?a.context=Ts(s):(s=Oa(t)?Ta:Ca.current,a.context=Pa(e,s)),a.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ro(e,t,s,r),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&no.enqueueReplaceState(a,a.state,null),qs(e,r,a,n),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var r="",n=t;do{r+=U(n),n=n.return}while(n);var a=r}catch(s){a="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:a,digest:null}}function co(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var ho="function"===typeof WeakMap?WeakMap:Map;function mo(e,t,r){(r=Fs(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Vl||(Vl=!0,Hl=n),uo(0,t)},r}function po(e,t,r){(r=Fs(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){uo(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(r.callback=function(){uo(0,t),"function"!==typeof n&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function fo(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new ho;var a=new Set;n.set(t,a)}else void 0===(a=n.get(t))&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=kc.bind(null,e,t,r),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function xo(e,t,r,n,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=Fs(-1,1)).tag=2,Bs(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var yo=b.ReactCurrentOwner,vo=!1;function bo(e,t,r,n){t.child=null===e?js(t,null,r,n):bs(t,e.child,r,n)}function jo(e,t,r,n,a){r=r.render;var s=t.ref;return Es(t,a),n=fi(e,t,r,n,s,a),r=gi(),null===e||vo?(as&&r&&es(t),t.flags|=1,bo(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Vo(e,t,a))}function wo(e,t,r,n,a){if(null===e){var s=r.type;return"function"!==typeof s||Oc(s)||void 0!==s.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Ic(r.type,null,n,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,No(e,t,s,n,a))}if(s=e.child,0===(e.lanes&a)){var i=s.memoizedProps;if((r=null!==(r=r.compare)?r:ln)(i,n)&&e.ref===t.ref)return Vo(e,t,a)}return t.flags|=1,(e=Dc(s,n)).ref=t.ref,e.return=t,t.child=e}function No(e,t,r,n,a){if(null!==e){var s=e.memoizedProps;if(ln(s,n)&&e.ref===t.ref){if(vo=!1,t.pendingProps=n=s,0===(e.lanes&a))return t.lanes=e.lanes,Vo(e,t,a);0!==(131072&e.flags)&&(vo=!0)}}return So(e,t,r,n,a)}function _o(e,t,r){var n=t.pendingProps,a=n.children,s=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Sa(Dl,Ol),Ol|=r;else{if(0===(1073741824&r))return e=null!==s?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Sa(Dl,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==s?s.baseLanes:r,Sa(Dl,Ol),Ol|=n}else null!==s?(n=s.baseLanes|r,t.memoizedState=null):n=r,Sa(Dl,Ol),Ol|=n;return bo(e,t,a,r),t.child}function ko(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function So(e,t,r,n,a){var s=Oa(r)?Ta:Ca.current;return s=Pa(t,s),Es(t,a),r=fi(e,t,r,n,s,a),n=gi(),null===e||vo?(as&&n&&es(t),t.flags|=1,bo(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Vo(e,t,a))}function Ao(e,t,r,n,a){if(Oa(r)){var s=!0;Ma(t)}else s=!1;if(Es(t,a),null===t.stateNode)Wo(e,t),so(t,r,n),oo(t,r,n,a),n=!0;else if(null===e){var i=t.stateNode,o=t.memoizedProps;i.props=o;var l=i.context,c=r.contextType;"object"===typeof c&&null!==c?c=Ts(c):c=Pa(t,c=Oa(r)?Ta:Ca.current);var d=r.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate;u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==n||l!==c)&&io(t,i,n,c),Ls=!1;var h=t.memoizedState;i.state=h,qs(t,n,i,a),l=t.memoizedState,o!==n||h!==l||Ea.current||Ls?("function"===typeof d&&(ro(t,r,d,n),l=t.memoizedState),(o=Ls||ao(t,r,o,n,h,l,c))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),i.props=n,i.state=l,i.context=c,n=o):("function"===typeof i.componentDidMount&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,Rs(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),i.props=c,u=t.pendingProps,h=i.context,"object"===typeof(l=r.contextType)&&null!==l?l=Ts(l):l=Pa(t,l=Oa(r)?Ta:Ca.current);var m=r.getDerivedStateFromProps;(d="function"===typeof m||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==u||h!==l)&&io(t,i,n,l),Ls=!1,h=t.memoizedState,i.state=h,qs(t,n,i,a);var p=t.memoizedState;o!==u||h!==p||Ea.current||Ls?("function"===typeof m&&(ro(t,r,m,n),p=t.memoizedState),(c=Ls||ao(t,r,c,n,h,p,l)||!1)?(d||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(n,p,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(n,p,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=p),i.props=n,i.state=p,i.context=l,n=c):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return Co(e,t,r,n,s,a)}function Co(e,t,r,n,a,s){ko(e,t);var i=0!==(128&t.flags);if(!n&&!i)return a&&Ra(t,r,!1),Vo(e,t,s);n=t.stateNode,yo.current=t;var o=i&&"function"!==typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&i?(t.child=bs(t,e.child,null,s),t.child=bs(t,null,o,s)):bo(e,t,o,s),t.memoizedState=n.state,a&&Ra(t,r,!0),t.child}function Eo(e){var t=e.stateNode;t.pendingContext?Ia(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ia(0,t.context,!1),Xs(e,t.containerInfo)}function To(e,t,r,n,a){return ms(),ps(a),t.flags|=256,bo(e,t,r,n),t.child}var Po,Oo,Do,Io,Lo={dehydrated:null,treeContext:null,retryLane:0};function Mo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ro(e,t,r){var n,a=t.pendingProps,i=Zs.current,o=!1,l=0!==(128&t.flags);if((n=l)||(n=(null===e||null!==e.memoizedState)&&0!==(2&i)),n?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Sa(Zs,1&i),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=a.children,e=a.fallback,o?(a=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&a)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Mc(l,a,0,null),e=Lc(e,a,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Mo(r),t.memoizedState=Lo,e):Fo(t,l));if(null!==(i=e.memoizedState)&&null!==(n=i.dehydrated))return function(e,t,r,n,a,i,o){if(r)return 256&t.flags?(t.flags&=-257,Bo(e,t,o,n=co(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=Mc({mode:"visible",children:n.children},a,0,null),(i=Lc(i,a,o,null)).flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,0!==(1&t.mode)&&bs(t,e.child,null,o),t.child.memoizedState=Mo(o),t.memoizedState=Lo,i);if(0===(1&t.mode))return Bo(e,t,o,null);if("$!"===a.data){if(n=a.nextSibling&&a.nextSibling.dataset)var l=n.dgst;return n=l,Bo(e,t,o,n=co(i=Error(s(419)),n,void 0))}if(l=0!==(o&e.childLanes),vo||l){if(null!==(n=El)){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(n.suspendedLanes|o))?0:a)&&a!==i.retryLane&&(i.retryLane=a,Is(e,a),rc(n,e,a,-1))}return fc(),Bo(e,t,o,n=co(Error(s(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Ac.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,ns=ca(a.nextSibling),rs=t,as=!0,ss=null,null!==e&&(Ka[Ya++]=Qa,Ka[Ya++]=$a,Ka[Ya++]=Xa,Qa=e.id,$a=e.overflow,Xa=t),t=Fo(t,n.children),t.flags|=4096,t)}(e,t,l,a,n,i,r);if(o){o=a.fallback,l=t.mode,n=(i=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&l)&&t.child!==i?((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null):(a=Dc(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==n?o=Dc(n,o):(o=Lc(o,l,r,null)).flags|=2,o.return=t,a.return=t,a.sibling=o,t.child=a,a=o,o=t.child,l=null===(l=e.child.memoizedState)?Mo(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~r,t.memoizedState=Lo,a}return e=(o=e.child).sibling,a=Dc(o,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=r),a.return=t,a.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=a,t.memoizedState=null,a}function Fo(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bo(e,t,r,n){return null!==n&&ps(n),bs(t,e.child,null,r),(e=Fo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zo(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Cs(e.return,t,r)}function Uo(e,t,r,n,a){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=a)}function qo(e,t,r){var n=t.pendingProps,a=n.revealOrder,s=n.tail;if(bo(e,t,n.children,r),0!==(2&(n=Zs.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zo(e,r,t);else if(19===e.tag)zo(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Sa(Zs,n),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;null!==r;)null!==(e=r.alternate)&&null===ei(e)&&(a=r),r=r.sibling;null===(r=a)?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Uo(t,!1,a,r,s);break;case"backwards":for(r=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ei(e)){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Uo(t,!0,r,null,s);break;case"together":Uo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Vo(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Ml|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(r=Dc(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Dc(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Ho(e,t){if(!as)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Go(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=14680064&a.subtreeFlags,n|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Ko(e,t,r){var n=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Go(t),null;case 1:case 17:return Oa(t.type)&&Da(),Go(t),null;case 3:return n=t.stateNode,Qs(),ka(Ea),ka(Ca),ri(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(us(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ic(ss),ss=null))),Oo(e,t),Go(t),null;case 5:Js(t);var a=Ys(Ks.current);if(r=t.type,null!==e&&null!=t.stateNode)Do(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(s(166));return Go(t),null}if(e=Ys(Hs.current),us(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[ha]=t,n[ma]=i,e=0!==(1&t.mode),r){case"dialog":Bn("cancel",n),Bn("close",n);break;case"iframe":case"object":case"embed":Bn("load",n);break;case"video":case"audio":for(a=0;a<Ln.length;a++)Bn(Ln[a],n);break;case"source":Bn("error",n);break;case"img":case"image":case"link":Bn("error",n),Bn("load",n);break;case"details":Bn("toggle",n);break;case"input":Q(n,i),Bn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Bn("invalid",n);break;case"textarea":ae(n,i),Bn("invalid",n)}for(var l in ye(r,i),a=null,i)if(i.hasOwnProperty(l)){var c=i[l];"children"===l?"string"===typeof c?n.textContent!==c&&(!0!==i.suppressHydrationWarning&&Jn(n.textContent,c,e),a=["children",c]):"number"===typeof c&&n.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Jn(n.textContent,c,e),a=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Bn("scroll",n)}switch(r){case"input":G(n),Z(n,i,!0);break;case"textarea":G(n),ie(n);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(n.onclick=Zn)}n=a,t.updateQueue=n,null!==n&&(t.flags|=4)}else{l=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=l.createElement(r,{is:n.is}):(e=l.createElement(r),"select"===r&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,r),e[ha]=t,e[ma]=n,Po(e,t,!1,!1),t.stateNode=e;e:{switch(l=ve(r,n),r){case"dialog":Bn("cancel",e),Bn("close",e),a=n;break;case"iframe":case"object":case"embed":Bn("load",e),a=n;break;case"video":case"audio":for(a=0;a<Ln.length;a++)Bn(Ln[a],e);a=n;break;case"source":Bn("error",e),a=n;break;case"img":case"image":case"link":Bn("error",e),Bn("load",e),a=n;break;case"details":Bn("toggle",e),a=n;break;case"input":Q(e,n),a=X(e,n),Bn("invalid",e);break;case"option":default:a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=R({},n,{value:void 0}),Bn("invalid",e);break;case"textarea":ae(e,n),a=ne(e,n),Bn("invalid",e)}for(i in ye(r,a),c=a)if(c.hasOwnProperty(i)){var d=c[i];"style"===i?ge(e,d):"dangerouslySetInnerHTML"===i?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===i?"string"===typeof d?("textarea"!==r||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(o.hasOwnProperty(i)?null!=d&&"onScroll"===i&&Bn("scroll",e):null!=d&&v(e,i,d,l))}switch(r){case"input":G(e),Z(e,n,!1);break;case"textarea":G(e),ie(e);break;case"option":null!=n.value&&e.setAttribute("value",""+V(n.value));break;case"select":e.multiple=!!n.multiple,null!=(i=n.value)?re(e,!!n.multiple,i,!1):null!=n.defaultValue&&re(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Zn)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Go(t),null;case 6:if(e&&null!=t.stateNode)Io(e,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(s(166));if(r=Ys(Ks.current),Ys(Hs.current),us(t)){if(n=t.stateNode,r=t.memoizedProps,n[ha]=t,(i=n.nodeValue!==r)&&null!==(e=rs))switch(e.tag){case 3:Jn(n.nodeValue,r,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jn(n.nodeValue,r,0!==(1&e.mode))}i&&(t.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[ha]=t,t.stateNode=n}return Go(t),null;case 13:if(ka(Zs),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(as&&null!==ns&&0!==(1&t.mode)&&0===(128&t.flags))hs(),ms(),t.flags|=98560,i=!1;else if(i=us(t),null!==n&&null!==n.dehydrated){if(null===e){if(!i)throw Error(s(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(s(317));i[ha]=t}else ms(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Go(t),i=!1}else null!==ss&&(ic(ss),ss=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=r,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Il&&(Il=3):fc())),null!==t.updateQueue&&(t.flags|=4),Go(t),null);case 4:return Qs(),Oo(e,t),null===e&&qn(t.stateNode.containerInfo),Go(t),null;case 10:return As(t.type._context),Go(t),null;case 19:if(ka(Zs),null===(i=t.memoizedState))return Go(t),null;if(n=0!==(128&t.flags),null===(l=i.rendering))if(n)Ho(i,!1);else{if(0!==Il||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ei(e))){for(t.flags|=128,Ho(i,!1),null!==(n=l.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;null!==r;)e=n,(i=r).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Sa(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==i.tail&&$e()>ql&&(t.flags|=128,n=!0,Ho(i,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=ei(l))){if(t.flags|=128,n=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Ho(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!as)return Go(t),null}else 2*$e()-i.renderingStartTime>ql&&1073741824!==r&&(t.flags|=128,n=!0,Ho(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(r=i.last)?r.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=$e(),t.sibling=null,r=Zs.current,Sa(Zs,n?1&r|2:1&r),t):(Go(t),null);case 22:case 23:return uc(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!==(1&t.mode)?0!==(1073741824&Ol)&&(Go(t),6&t.subtreeFlags&&(t.flags|=8192)):Go(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Yo(e,t){switch(ts(t),t.tag){case 1:return Oa(t.type)&&Da(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qs(),ka(Ea),ka(Ca),ri(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Js(t),null;case 13:if(ka(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ms()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ka(Zs),null;case 4:return Qs(),null;case 10:return As(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Po=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Oo=function(){},Do=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Ys(Hs.current);var s,i=null;switch(r){case"input":a=X(e,a),n=X(e,n),i=[];break;case"select":a=R({},a,{value:void 0}),n=R({},n,{value:void 0}),i=[];break;case"textarea":a=ne(e,a),n=ne(e,n),i=[];break;default:"function"!==typeof a.onClick&&"function"===typeof n.onClick&&(e.onclick=Zn)}for(d in ye(r,n),r=null,a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&null!=a[d])if("style"===d){var l=a[d];for(s in l)l.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(o.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(l=null!=a?a[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(r||(r={}),r[s]=c[s])}else r||(i||(i=[]),i.push(d,r)),r=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(i=i||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(o.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Bn("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}},Io=function(e,t,r,n){r!==n&&(t.flags|=4)};var Xo=!1,Qo=!1,$o="function"===typeof WeakSet?WeakSet:Set,Jo=null;function Zo(e,t){var r=e.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(n){_c(e,t,n)}else r.current=null}function el(e,t,r){try{r()}catch(n){_c(e,t,n)}}var tl=!1;function rl(e,t,r){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var a=n=n.next;do{if((a.tag&e)===e){var s=a.destroy;a.destroy=void 0,void 0!==s&&el(t,r,s)}a=a.next}while(a!==n)}}function nl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function al(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ha],delete t[ma],delete t[fa],delete t[ga],delete t[xa])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=Zn));else if(4!==n&&null!==(e=e.child))for(ll(e,t,r),e=e.sibling;null!==e;)ll(e,t,r),e=e.sibling}function cl(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(cl(e,t,r),e=e.sibling;null!==e;)cl(e,t,r),e=e.sibling}var dl=null,ul=!1;function hl(e,t,r){for(r=r.child;null!==r;)ml(e,t,r),r=r.sibling}function ml(e,t,r){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(at,r)}catch(o){}switch(r.tag){case 5:Qo||Zo(r,t);case 6:var n=dl,a=ul;dl=null,hl(e,t,r),ul=a,null!==(dl=n)&&(ul?(e=dl,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):dl.removeChild(r.stateNode));break;case 18:null!==dl&&(ul?(e=dl,r=r.stateNode,8===e.nodeType?la(e.parentNode,r):1===e.nodeType&&la(e,r),qt(e)):la(dl,r.stateNode));break;case 4:n=dl,a=ul,dl=r.stateNode.containerInfo,ul=!0,hl(e,t,r),dl=n,ul=a;break;case 0:case 11:case 14:case 15:if(!Qo&&(null!==(n=r.updateQueue)&&null!==(n=n.lastEffect))){a=n=n.next;do{var s=a,i=s.destroy;s=s.tag,void 0!==i&&(0!==(2&s)||0!==(4&s))&&el(r,t,i),a=a.next}while(a!==n)}hl(e,t,r);break;case 1:if(!Qo&&(Zo(r,t),"function"===typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){_c(r,t,o)}hl(e,t,r);break;case 21:hl(e,t,r);break;case 22:1&r.mode?(Qo=(n=Qo)||null!==r.memoizedState,hl(e,t,r),Qo=n):hl(e,t,r);break;default:hl(e,t,r)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new $o),t.forEach(function(t){var n=Cc.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))})}}function fl(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,ul=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===dl)throw Error(s(160));ml(i,o,a),dl=null,ul=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(d){_c(a,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fl(t,e),xl(e),4&n){try{rl(3,e,e.return),nl(3,e)}catch(g){_c(e,e.return,g)}try{rl(5,e,e.return)}catch(g){_c(e,e.return,g)}}break;case 1:fl(t,e),xl(e),512&n&&null!==r&&Zo(r,r.return);break;case 5:if(fl(t,e),xl(e),512&n&&null!==r&&Zo(r,r.return),32&e.flags){var a=e.stateNode;try{he(a,"")}catch(g){_c(e,e.return,g)}}if(4&n&&null!=(a=e.stateNode)){var i=e.memoizedProps,o=null!==r?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&$(a,i),ve(l,o);var d=ve(l,i);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];"style"===u?ge(a,h):"dangerouslySetInnerHTML"===u?ue(a,h):"children"===u?he(a,h):v(a,u,h,d)}switch(l){case"input":J(a,i);break;case"textarea":se(a,i);break;case"select":var m=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;null!=p?re(a,!!i.multiple,p,!1):m!==!!i.multiple&&(null!=i.defaultValue?re(a,!!i.multiple,i.defaultValue,!0):re(a,!!i.multiple,i.multiple?[]:"",!1))}a[ma]=i}catch(g){_c(e,e.return,g)}}break;case 6:if(fl(t,e),xl(e),4&n){if(null===e.stateNode)throw Error(s(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(g){_c(e,e.return,g)}}break;case 3:if(fl(t,e),xl(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(g){_c(e,e.return,g)}break;case 4:default:fl(t,e),xl(e);break;case 13:fl(t,e),xl(e),8192&(a=e.child).flags&&(i=null!==a.memoizedState,a.stateNode.isHidden=i,!i||null!==a.alternate&&null!==a.alternate.memoizedState||(Ul=$e())),4&n&&pl(e);break;case 22:if(u=null!==r&&null!==r.memoizedState,1&e.mode?(Qo=(d=Qo)||u,fl(t,e),Qo=d):fl(t,e),xl(e),8192&n){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Jo=e,u=e.child;null!==u;){for(h=Jo=u;null!==Jo;){switch(p=(m=Jo).child,m.tag){case 0:case 11:case 14:case 15:rl(4,m,m.return);break;case 1:Zo(m,m.return);var f=m.stateNode;if("function"===typeof f.componentWillUnmount){n=m,r=m.return;try{t=n,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(g){_c(n,r,g)}}break;case 5:Zo(m,m.return);break;case 22:if(null!==m.memoizedState){jl(h);continue}}null!==p?(p.return=m,Jo=p):jl(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{a=h.stateNode,d?"function"===typeof(i=a.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=fe("display",o))}catch(g){_c(e,e.return,g)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){_c(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:fl(t,e),xl(e),4&n&&pl(e);case 21:}}function xl(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(il(r)){var n=r;break e}r=r.return}throw Error(s(160))}switch(n.tag){case 5:var a=n.stateNode;32&n.flags&&(he(a,""),n.flags&=-33),cl(e,ol(e),a);break;case 3:case 4:var i=n.stateNode.containerInfo;ll(e,ol(e),i);break;default:throw Error(s(161))}}catch(o){_c(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,r){Jo=e,vl(e,t,r)}function vl(e,t,r){for(var n=0!==(1&e.mode);null!==Jo;){var a=Jo,s=a.child;if(22===a.tag&&n){var i=null!==a.memoizedState||Xo;if(!i){var o=a.alternate,l=null!==o&&null!==o.memoizedState||Qo;o=Xo;var c=Qo;if(Xo=i,(Qo=l)&&!c)for(Jo=a;null!==Jo;)l=(i=Jo).child,22===i.tag&&null!==i.memoizedState?wl(a):null!==l?(l.return=i,Jo=l):wl(a);for(;null!==s;)Jo=s,vl(s,t,r),s=s.sibling;Jo=a,Xo=o,Qo=c}bl(e)}else 0!==(8772&a.subtreeFlags)&&null!==s?(s.return=a,Jo=s):bl(e)}}function bl(e){for(;null!==Jo;){var t=Jo;if(0!==(8772&t.flags)){var r=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qo||nl(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!Qo)if(null===r)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:to(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Ws(t,i,n);break;case 3:var o=t.updateQueue;if(null!==o){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}Ws(t,o,r)}break;case 5:var l=t.stateNode;if(null===r&&4&t.flags){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&qt(h)}}}break;default:throw Error(s(163))}Qo||512&t.flags&&al(t)}catch(m){_c(t,t.return,m)}}if(t===e){Jo=null;break}if(null!==(r=t.sibling)){r.return=t.return,Jo=r;break}Jo=t.return}}function jl(e){for(;null!==Jo;){var t=Jo;if(t===e){Jo=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Jo=r;break}Jo=t.return}}function wl(e){for(;null!==Jo;){var t=Jo;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{nl(4,t)}catch(l){_c(t,r,l)}break;case 1:var n=t.stateNode;if("function"===typeof n.componentDidMount){var a=t.return;try{n.componentDidMount()}catch(l){_c(t,a,l)}}var s=t.return;try{al(t)}catch(l){_c(t,s,l)}break;case 5:var i=t.return;try{al(t)}catch(l){_c(t,i,l)}}}catch(l){_c(t,t.return,l)}if(t===e){Jo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Jo=o;break}Jo=t.return}}var Nl,_l=Math.ceil,kl=b.ReactCurrentDispatcher,Sl=b.ReactCurrentOwner,Al=b.ReactCurrentBatchConfig,Cl=0,El=null,Tl=null,Pl=0,Ol=0,Dl=_a(0),Il=0,Ll=null,Ml=0,Rl=0,Fl=0,Bl=null,zl=null,Ul=0,ql=1/0,Wl=null,Vl=!1,Hl=null,Gl=null,Kl=!1,Yl=null,Xl=0,Ql=0,$l=null,Jl=-1,Zl=0;function ec(){return 0!==(6&Cl)?$e():-1!==Jl?Jl:Jl=$e()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cl)&&0!==Pl?Pl&-Pl:null!==fs.transition?(0===Zl&&(Zl=ft()),Zl):0!==(e=vt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function rc(e,t,r,n){if(50<Ql)throw Ql=0,$l=null,Error(s(185));xt(e,r,n),0!==(2&Cl)&&e===El||(e===El&&(0===(2&Cl)&&(Rl|=r),4===Il&&oc(e,Pl)),nc(e,n),1===r&&0===Cl&&0===(1&t.mode)&&(ql=$e()+500,Ba&&qa()))}function nc(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var i=31-it(s),o=1<<i,l=a[i];-1===l?0!==(o&r)&&0===(o&n)||(a[i]=mt(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var n=ht(e,e===El?Pl:0);if(0===n)null!==r&&Ye(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=r&&Ye(r),1===t)0===e.tag?function(e){Ba=!0,Ua(e)}(lc.bind(null,e)):Ua(lc.bind(null,e)),ia(function(){0===(6&Cl)&&qa()}),r=null;else{switch(bt(n)){case 1:r=Ze;break;case 4:r=et;break;case 16:default:r=tt;break;case 536870912:r=nt}r=Ec(r,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function ac(e,t){if(Jl=-1,Zl=0,0!==(6&Cl))throw Error(s(327));var r=e.callbackNode;if(wc()&&e.callbackNode!==r)return null;var n=ht(e,e===El?Pl:0);if(0===n)return null;if(0!==(30&n)||0!==(n&e.expiredLanes)||t)t=gc(e,n);else{t=n;var a=Cl;Cl|=2;var i=pc();for(El===e&&Pl===t||(Wl=null,ql=$e()+500,hc(e,t));;)try{yc();break}catch(l){mc(e,l)}Ss(),kl.current=i,Cl=a,null!==Tl?t=0:(El=null,Pl=0,t=Il)}if(0!==t){if(2===t&&(0!==(a=pt(e))&&(n=a,t=sc(e,a))),1===t)throw r=Ll,hc(e,0),oc(e,n),nc(e,$e()),r;if(6===t)oc(e,n);else{if(a=e.current.alternate,0===(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var a=r[n],s=a.getSnapshot;a=a.value;try{if(!on(s(),a))return!1}catch(o){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=gc(e,n))&&(0!==(i=pt(e))&&(n=i,t=sc(e,i))),1===t))throw r=Ll,hc(e,0),oc(e,n),nc(e,$e()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(s(345));case 2:case 5:jc(e,zl,Wl);break;case 3:if(oc(e,n),(130023424&n)===n&&10<(t=Ul+500-$e())){if(0!==ht(e,0))break;if(((a=e.suspendedLanes)&n)!==n){ec(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=na(jc.bind(null,e,zl,Wl),t);break}jc(e,zl,Wl);break;case 4:if(oc(e,n),(4194240&n)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-it(n);i=1<<o,(o=t[o])>a&&(a=o),n&=~i}if(n=a,10<(n=(120>(n=$e()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*_l(n/1960))-n)){e.timeoutHandle=na(jc.bind(null,e,zl,Wl),n);break}jc(e,zl,Wl);break;default:throw Error(s(329))}}}return nc(e,$e()),e.callbackNode===r?ac.bind(null,e):null}function sc(e,t){var r=Bl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=zl,zl=r,null!==t&&ic(t)),e}function ic(e){null===zl?zl=e:zl.push.apply(zl,e)}function oc(e,t){for(t&=~Fl,t&=~Rl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-it(t),n=1<<r;e[r]=-1,t&=~n}}function lc(e){if(0!==(6&Cl))throw Error(s(327));wc();var t=ht(e,0);if(0===(1&t))return nc(e,$e()),null;var r=gc(e,t);if(0!==e.tag&&2===r){var n=pt(e);0!==n&&(t=n,r=sc(e,n))}if(1===r)throw r=Ll,hc(e,0),oc(e,t),nc(e,$e()),r;if(6===r)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,jc(e,zl,Wl),nc(e,$e()),null}function cc(e,t){var r=Cl;Cl|=1;try{return e(t)}finally{0===(Cl=r)&&(ql=$e()+500,Ba&&qa())}}function dc(e){null!==Yl&&0===Yl.tag&&0===(6&Cl)&&wc();var t=Cl;Cl|=1;var r=Al.transition,n=vt;try{if(Al.transition=null,vt=1,e)return e()}finally{vt=n,Al.transition=r,0===(6&(Cl=t))&&qa()}}function uc(){Ol=Dl.current,ka(Dl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,aa(r)),null!==Tl)for(r=Tl.return;null!==r;){var n=r;switch(ts(n),n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&Da();break;case 3:Qs(),ka(Ea),ka(Ca),ri();break;case 5:Js(n);break;case 4:Qs();break;case 13:case 19:ka(Zs);break;case 10:As(n.type._context);break;case 22:case 23:uc()}r=r.return}if(El=e,Tl=e=Dc(e.current,null),Pl=Ol=t,Il=0,Ll=null,Fl=Rl=Ml=0,zl=Bl=null,null!==Ps){for(t=0;t<Ps.length;t++)if(null!==(n=(r=Ps[t]).interleaved)){r.interleaved=null;var a=n.next,s=r.pending;if(null!==s){var i=s.next;s.next=a,n.next=i}r.pending=n}Ps=null}return e}function mc(e,t){for(;;){var r=Tl;try{if(Ss(),ni.current=$i,ci){for(var n=ii.memoizedState;null!==n;){var a=n.queue;null!==a&&(a.pending=null),n=n.next}ci=!1}if(si=0,li=oi=ii=null,di=!1,ui=0,Sl.current=null,null===r||null===r.return){Il=1,Ll=t,Tl=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=Pl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=go(o);if(null!==p){p.flags&=-257,xo(p,o,l,0,t),1&p.mode&&fo(i,d,t),c=d;var f=(t=p).updateQueue;if(null===f){var g=new Set;g.add(c),t.updateQueue=g}else f.add(c);break e}if(0===(1&t)){fo(i,d,t),fc();break e}c=Error(s(426))}else if(as&&1&l.mode){var x=go(o);if(null!==x){0===(65536&x.flags)&&(x.flags|=256),xo(x,o,l,0,t),ps(lo(c,l));break e}}i=c=lo(c,l),4!==Il&&(Il=2),null===Bl?Bl=[i]:Bl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Us(i,mo(0,c,t));break e;case 1:l=c;var y=i.type,v=i.stateNode;if(0===(128&i.flags)&&("function"===typeof y.getDerivedStateFromError||null!==v&&"function"===typeof v.componentDidCatch&&(null===Gl||!Gl.has(v)))){i.flags|=65536,t&=-t,i.lanes|=t,Us(i,po(i,l,t));break e}}i=i.return}while(null!==i)}bc(r)}catch(b){t=b,Tl===r&&null!==r&&(Tl=r=r.return);continue}break}}function pc(){var e=kl.current;return kl.current=$i,null===e?$i:e}function fc(){0!==Il&&3!==Il&&2!==Il||(Il=4),null===El||0===(268435455&Ml)&&0===(268435455&Rl)||oc(El,Pl)}function gc(e,t){var r=Cl;Cl|=2;var n=pc();for(El===e&&Pl===t||(Wl=null,hc(e,t));;)try{xc();break}catch(a){mc(e,a)}if(Ss(),Cl=r,kl.current=n,null!==Tl)throw Error(s(261));return El=null,Pl=0,Il}function xc(){for(;null!==Tl;)vc(Tl)}function yc(){for(;null!==Tl&&!Xe();)vc(Tl)}function vc(e){var t=Nl(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?bc(e):Tl=t,Sl.current=null}function bc(e){var t=e;do{var r=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(r=Ko(r,t,Ol)))return void(Tl=r)}else{if(null!==(r=Yo(r,t)))return r.flags&=32767,void(Tl=r);if(null===e)return Il=6,void(Tl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Tl=t);Tl=t=e}while(null!==t);0===Il&&(Il=5)}function jc(e,t,r){var n=vt,a=Al.transition;try{Al.transition=null,vt=1,function(e,t,r,n){do{wc()}while(null!==Yl);if(0!==(6&Cl))throw Error(s(327));r=e.finishedWork;var a=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-it(r),s=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~s}}(e,i),e===El&&(Tl=El=null,Pl=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Kl||(Kl=!0,Ec(tt,function(){return wc(),null})),i=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||i){i=Al.transition,Al.transition=null;var o=vt;vt=1;var l=Cl;Cl|=4,Sl.current=null,function(e,t){if(ea=Vt,mn(e=hn())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch(j){r=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var p;h!==r||0!==a&&3!==h.nodeType||(l=o+a),h!==i||0!==n&&3!==h.nodeType||(c=o+n),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)m=h,h=p;for(;;){if(h===e)break t;if(m===r&&++d===a&&(l=o),m===i&&++u===n&&(c=o),null!==(p=h.nextSibling))break;m=(h=m).parentNode}h=p}r=-1===l||-1===c?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ta={focusedElem:e,selectionRange:r},Vt=!1,Jo=t;null!==Jo;)if(e=(t=Jo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Jo=e;else for(;null!==Jo;){t=Jo;try{var f=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var g=f.memoizedProps,x=f.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),x);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(j){_c(t,t.return,j)}if(null!==(e=t.sibling)){e.return=t.return,Jo=e;break}Jo=t.return}f=tl,tl=!1}(e,r),gl(r,e),pn(ta),Vt=!!ea,ta=ea=null,e.current=r,yl(r,e,a),Qe(),Cl=l,vt=o,Al.transition=i}else e.current=r;if(Kl&&(Kl=!1,Yl=e,Xl=a),i=e.pendingLanes,0===i&&(Gl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),nc(e,$e()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Vl)throw Vl=!1,e=Hl,Hl=null,e;0!==(1&Xl)&&0!==e.tag&&wc(),i=e.pendingLanes,0!==(1&i)?e===$l?Ql++:(Ql=0,$l=e):Ql=0,qa()}(e,t,r,n)}finally{Al.transition=a,vt=n}return null}function wc(){if(null!==Yl){var e=bt(Xl),t=Al.transition,r=vt;try{if(Al.transition=null,vt=16>e?16:e,null===Yl)var n=!1;else{if(e=Yl,Yl=null,Xl=0,0!==(6&Cl))throw Error(s(331));var a=Cl;for(Cl|=4,Jo=e.current;null!==Jo;){var i=Jo,o=i.child;if(0!==(16&Jo.flags)){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Jo=d;null!==Jo;){var u=Jo;switch(u.tag){case 0:case 11:case 15:rl(8,u,i)}var h=u.child;if(null!==h)h.return=u,Jo=h;else for(;null!==Jo;){var m=(u=Jo).sibling,p=u.return;if(sl(u),u===d){Jo=null;break}if(null!==m){m.return=p,Jo=m;break}Jo=p}}}var f=i.alternate;if(null!==f){var g=f.child;if(null!==g){f.child=null;do{var x=g.sibling;g.sibling=null,g=x}while(null!==g)}}Jo=i}}if(0!==(2064&i.subtreeFlags)&&null!==o)o.return=i,Jo=o;else e:for(;null!==Jo;){if(0!==(2048&(i=Jo).flags))switch(i.tag){case 0:case 11:case 15:rl(9,i,i.return)}var y=i.sibling;if(null!==y){y.return=i.return,Jo=y;break e}Jo=i.return}}var v=e.current;for(Jo=v;null!==Jo;){var b=(o=Jo).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,Jo=b;else e:for(o=v;null!==Jo;){if(0!==(2048&(l=Jo).flags))try{switch(l.tag){case 0:case 11:case 15:nl(9,l)}}catch(w){_c(l,l.return,w)}if(l===o){Jo=null;break e}var j=l.sibling;if(null!==j){j.return=l.return,Jo=j;break e}Jo=l.return}}if(Cl=a,qa(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(at,e)}catch(w){}n=!0}return n}finally{vt=r,Al.transition=t}}return!1}function Nc(e,t,r){e=Bs(e,t=mo(0,t=lo(r,t),1),1),t=ec(),null!==e&&(xt(e,1,t),nc(e,t))}function _c(e,t,r){if(3===e.tag)Nc(e,e,r);else for(;null!==t;){if(3===t.tag){Nc(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Gl||!Gl.has(n))){t=Bs(t,e=po(t,e=lo(r,e),1),1),e=ec(),null!==t&&(xt(t,1,e),nc(t,e));break}}t=t.return}}function kc(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&r,El===e&&(Pl&r)===r&&(4===Il||3===Il&&(130023424&Pl)===Pl&&500>$e()-Ul?hc(e,0):Fl|=r),nc(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var r=ec();null!==(e=Is(e,t))&&(xt(e,t,r),nc(e,r))}function Ac(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Sc(e,r)}function Cc(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;null!==a&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(s(314))}null!==n&&n.delete(t),Sc(e,r)}function Ec(e,t){return Ke(e,t)}function Tc(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,r,n){return new Tc(e,t,r,n)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var r=e.alternate;return null===r?((r=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ic(e,t,r,n,a,i){var o=2;if(n=e,"function"===typeof e)Oc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case N:return Lc(r.children,a,i,t);case _:o=8,a|=8;break;case k:return(e=Pc(12,r,t,2|a)).elementType=k,e.lanes=i,e;case E:return(e=Pc(13,r,t,a)).elementType=E,e.lanes=i,e;case T:return(e=Pc(19,r,t,a)).elementType=T,e.lanes=i,e;case D:return Mc(r,a,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:o=10;break e;case A:o=9;break e;case C:o=11;break e;case P:o=14;break e;case O:o=16,n=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Pc(o,r,t,a)).elementType=e,t.type=n,t.lanes=i,t}function Lc(e,t,r,n){return(e=Pc(7,e,n,t)).lanes=r,e}function Mc(e,t,r,n){return(e=Pc(22,e,n,t)).elementType=D,e.lanes=r,e.stateNode={isHidden:!1},e}function Rc(e,t,r){return(e=Pc(6,e,null,t)).lanes=r,e}function Fc(e,t,r){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bc(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function zc(e,t,r,n,a,s,i,o,l){return e=new Bc(e,t,r,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Pc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ms(s),e}function Uc(e){if(!e)return Aa;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oa(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var r=e.type;if(Oa(r))return La(e,r,t)}return t}function qc(e,t,r,n,a,s,i,o,l){return(e=zc(r,n,!0,e,0,s,0,o,l)).context=Uc(null),r=e.current,(s=Fs(n=ec(),a=tc(r))).callback=void 0!==t&&null!==t?t:null,Bs(r,s,a),e.current.lanes=a,xt(e,a,n),nc(e,n),e}function Wc(e,t,r,n){var a=t.current,s=ec(),i=tc(a);return r=Uc(r),null===t.context?t.context=r:t.pendingContext=r,(t=Fs(s,i)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=Bs(a,t,i))&&(rc(e,a,i,s),zs(e,a,i)),i}function Vc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Gc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}Nl=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ea.current)vo=!0;else{if(0===(e.lanes&r)&&0===(128&t.flags))return vo=!1,function(e,t,r){switch(t.tag){case 3:Eo(t),ms();break;case 5:$s(t);break;case 1:Oa(t.type)&&Ma(t);break;case 4:Xs(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;Sa(ws,n._currentValue),n._currentValue=a;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(Sa(Zs,1&Zs.current),t.flags|=128,null):0!==(r&t.child.childLanes)?Ro(e,t,r):(Sa(Zs,1&Zs.current),null!==(e=Vo(e,t,r))?e.sibling:null);Sa(Zs,1&Zs.current);break;case 19:if(n=0!==(r&t.childLanes),0!==(128&e.flags)){if(n)return qo(e,t,r);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Sa(Zs,Zs.current),n)break;return null;case 22:case 23:return t.lanes=0,_o(e,t,r)}return Vo(e,t,r)}(e,t,r);vo=0!==(131072&e.flags)}else vo=!1,as&&0!==(1048576&t.flags)&&Za(t,Ga,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Wo(e,t),e=t.pendingProps;var a=Pa(t,Ca.current);Es(t,r),a=fi(null,t,n,e,a,r);var i=gi();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oa(n)?(i=!0,Ma(t)):i=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Ms(t),a.updater=no,t.stateNode=a,a._reactInternals=t,oo(t,n,e,r),t=Co(null,t,n,!0,i,r)):(t.tag=0,as&&i&&es(t),bo(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Wo(e,t),e=t.pendingProps,n=(a=n._init)(n._payload),t.type=n,a=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===P)return 14}return 2}(n),e=to(n,e),a){case 0:t=So(null,t,n,e,r);break e;case 1:t=Ao(null,t,n,e,r);break e;case 11:t=jo(null,t,n,e,r);break e;case 14:t=wo(null,t,n,to(n.type,e),r);break e}throw Error(s(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,So(e,t,n,a=t.elementType===n?a:to(n,a),r);case 1:return n=t.type,a=t.pendingProps,Ao(e,t,n,a=t.elementType===n?a:to(n,a),r);case 3:e:{if(Eo(t),null===e)throw Error(s(387));n=t.pendingProps,a=(i=t.memoizedState).element,Rs(e,t),qs(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated){if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=To(e,t,n,r,a=lo(Error(s(423)),t));break e}if(n!==a){t=To(e,t,n,r,a=lo(Error(s(424)),t));break e}for(ns=ca(t.stateNode.containerInfo.firstChild),rs=t,as=!0,ss=null,r=js(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(ms(),n===a){t=Vo(e,t,r);break e}bo(e,t,n,r)}t=t.child}return t;case 5:return $s(t),null===e&&cs(t),n=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,o=a.children,ra(n,a)?o=null:null!==i&&ra(n,i)&&(t.flags|=32),ko(e,t),bo(e,t,o,r),t.child;case 6:return null===e&&cs(t),null;case 13:return Ro(e,t,r);case 4:return Xs(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=bs(t,null,n,r):bo(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,jo(e,t,n,a=t.elementType===n?a:to(n,a),r);case 7:return bo(e,t,t.pendingProps,r),t.child;case 8:case 12:return bo(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Sa(ws,n._currentValue),n._currentValue=o,null!==i)if(on(i.value,o)){if(i.children===a.children&&!Ea.current){t=Vo(e,t,r);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){o=i.child;for(var c=l.firstContext;null!==c;){if(c.context===n){if(1===i.tag){(c=Fs(-1,r&-r)).tag=2;var d=i.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,null!==(c=i.alternate)&&(c.lanes|=r),Cs(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(10===i.tag)o=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(o=i.return))throw Error(s(341));o.lanes|=r,null!==(l=o.alternate)&&(l.lanes|=r),Cs(o,r,t),o=i.sibling}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===t){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}bo(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Es(t,r),n=n(a=Ts(a)),t.flags|=1,bo(e,t,n,r),t.child;case 14:return a=to(n=t.type,t.pendingProps),wo(e,t,n,a=to(n.type,a),r);case 15:return No(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:to(n,a),Wo(e,t),t.tag=1,Oa(n)?(e=!0,Ma(t)):e=!1,Es(t,r),so(t,n,a),oo(t,n,a,r),Co(null,t,n,!0,e,r);case 19:return qo(e,t,r);case 22:return _o(e,t,r)}throw Error(s(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function Zc(e,t,r,n,a){var s=r._reactRootContainer;if(s){var i=s;if("function"===typeof a){var o=a;a=function(){var e=Vc(i);o.call(e)}}Wc(t,i,e,a)}else i=function(e,t,r,n,a){if(a){if("function"===typeof n){var s=n;n=function(){var e=Vc(i);s.call(e)}}var i=qc(t,n,e,0,null,!1,0,"",Jc);return e._reactRootContainer=i,e[pa]=i.current,qn(8===e.nodeType?e.parentNode:e),dc(),i}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof n){var o=n;n=function(){var e=Vc(l);o.call(e)}}var l=zc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[pa]=l.current,qn(8===e.nodeType?e.parentNode:e),dc(function(){Wc(t,l,r,n)}),l}(r,t,e,a,n);return Vc(i)}Xc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Wc(e,t,null,null)},Xc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){Wc(null,e,null,null)}),t[pa]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=_t();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Dt.length&&0!==t&&t<Dt[r].priority;r++);Dt.splice(r,0,e),0===r&&Rt(e)}},jt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ut(t.pendingLanes);0!==r&&(yt(t,1|r),nc(t,$e()),0===(6&Cl)&&(ql=$e()+500,qa()))}break;case 13:dc(function(){var t=Is(e,1);if(null!==t){var r=ec();rc(t,e,1,r)}}),Gc(e,1)}},wt=function(e){if(13===e.tag){var t=Is(e,134217728);if(null!==t)rc(t,e,134217728,ec());Gc(e,134217728)}},Nt=function(e){if(13===e.tag){var t=tc(e),r=Is(e,t);if(null!==r)rc(r,e,t,ec());Gc(e,t)}},_t=function(){return vt},kt=function(e,t){var r=vt;try{return vt=e,t()}finally{vt=r}},we=function(e,t,r){switch(t){case"input":if(J(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=ja(n);if(!a)throw Error(s(90));K(n),J(n,a)}}}break;case"textarea":se(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},Ce=cc,Ee=dc;var ed={usingClientEntryPoint:!1,Events:[va,ba,ja,Se,Ae,cc]},td={findFiberByHostInstance:ya,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nd.isDisabled&&nd.supportsFiber)try{at=nd.inject(rd),st=nd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(t))throw Error(s(200));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.createRoot=function(e,t){if(!Qc(e))throw Error(s(299));var r=!1,n="",a=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=zc(e,1,!1,null,0,r,0,n,a),e[pa]=t.current,qn(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,r){if(!$c(t))throw Error(s(200));return Zc(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!Qc(e))throw Error(s(405));var n=null!=r&&r.hydratedSources||null,a=!1,i="",o=Kc;if(null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(a=!0),void 0!==r.identifierPrefix&&(i=r.identifierPrefix),void 0!==r.onRecoverableError&&(o=r.onRecoverableError)),t=qc(t,null,e,1,null!=r?r:null,a,0,i,o),e[pa]=t.current,qn(e),n)for(e=0;e<n.length;e++)a=(a=(r=n[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Xc(t)},t.render=function(e,t,r){if(!$c(t))throw Error(s(200));return Zc(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(s(40));return!!e._reactRootContainer&&(dc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[pa]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!$c(r))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Zc(e,t,r,!1,n)},t.version="18.3.1-next-f1338f8080-20240426"},2777:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isSymbol=function(e){return"symbol"===typeof e||e instanceof Symbol}},2897:(e,t,r)=>{var n=r(3693);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}e.exports=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e},e.exports.__esModule=!0,e.exports.default=e.exports},3218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3272:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.toKey=function(e){var t;return"string"===typeof e||"symbol"===typeof e?e:Object.is(null===e||void 0===e||null===(t=e.valueOf)||void 0===t?void 0:t.call(e),-0)?"-0":String(e)}},3693:(e,t,r)=>{var n=r(7736);e.exports=function(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},3738:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},3757:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isTypedArray=function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}},3799:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(4704),a=r(1203),s=r(870),i=r(9972);t.isIterateeCall=function(e,t,r){return!!s.isObject(r)&&(!!("number"===typeof t&&a.isArrayLike(r)&&n.isIndex(t)&&t<r.length||"string"===typeof t&&t in r)&&i.eq(r[t],e))}},3808:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(8268),a=r(5261);t.matches=function(e){return e=a.cloneDeep(e),t=>n.isMatch(t,e)}},3821:(e,t,r)=>{e.exports=r(2204).sortBy},4202:(e,t)=>{"use strict";var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,g={};function x(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||p}function y(){}function v(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||p}x.prototype.isReactComponent={},x.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},x.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=x.prototype;var b=v.prototype=new y;b.constructor=v,f(b,x.prototype),b.isPureReactComponent=!0;var j=Array.isArray,w=Object.prototype.hasOwnProperty,N={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,n){var a,s={},i=null,o=null;if(null!=t)for(a in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(i=""+t.key),t)w.call(t,a)&&!_.hasOwnProperty(a)&&(s[a]=t[a]);var l=arguments.length-2;if(1===l)s.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(a in l=e.defaultProps)void 0===s[a]&&(s[a]=l[a]);return{$$typeof:r,type:e,key:i,ref:o,props:s,_owner:N.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var A=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function E(e,t,a,s,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case r:case n:l=!0}}if(l)return i=i(l=e),e=""===s?"."+C(l,0):s,j(i)?(a="",null!=e&&(a=e.replace(A,"$&/")+"/"),E(i,t,a,"",function(e){return e})):null!=i&&(S(i)&&(i=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,a+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(A,"$&/")+"/")+e)),t.push(i)),1;if(l=0,s=""===s?".":s+":",j(e))for(var c=0;c<e.length;c++){var d=s+C(o=e[c],c);l+=E(o,t,a,d,i)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=m&&e[m]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(o=e.next()).done;)l+=E(o=o.value,t,a,d=s+C(o,c++),i);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function T(e,t,r){if(null==e)return e;var n=[],a=0;return E(e,n,"","",function(e){return t.call(r,e,a++)}),n}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},D={transition:null},I={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:D,ReactCurrentOwner:N};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:T,forEach:function(e,t,r){T(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return T(e,function(){t++}),t},toArray:function(e){return T(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=x,t.Fragment=a,t.Profiler=i,t.PureComponent=v,t.StrictMode=s,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,t.act=L,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=f({},e.props),s=e.key,i=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,o=N.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!_.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];a.children=l}return{$$typeof:r,type:e.type,key:s,ref:i,props:a,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,r){return O.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,r){return O.current.useReducer(e,t,r)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return O.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return O.current.useTransition()},t.version="18.3.1"},4208:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.uniqBy=function(e,t){const r=new Map;for(let n=0;n<e.length;n++){const a=e[n],s=t(a);r.has(s)||r.set(s,a)}return Array.from(r.values())}},4332:(e,t,r)=>{e.exports=r(5053).uniqBy},4391:(e,t,r)=>{"use strict";var n=r(7950);t.createRoot=n.createRoot,t.hydrateRoot=n.hydrateRoot},4704:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=/^(?:0|[1-9]\d*)$/;t.isIndex=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_SAFE_INTEGER;switch(typeof e){case"number":return Number.isInteger(e)&&e>=0&&e<t;case"symbol":return!1;case"string":return r.test(e)}}},4788:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(e){try{l(n.next(e))}catch(t){s(t)}}function o(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){e.done?a(e.value):new r(function(t){t(e.value)}).then(i,o)}l((n=n.apply(e,t||[])).next())})},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=a(r(5457));function i(e){let t,r,a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"maxAge";const o=()=>n(this,void 0,void 0,function*(){if(void 0!==t)return;const o=o=>n(this,void 0,void 0,function*(){a=s.default();const n=o[1][i]-Date.now();return n<=0?(e.delete(o[0]),void a.resolve()):(t=o[0],r=setTimeout(()=>{e.delete(o[0]),a&&a.resolve()},n),"function"===typeof r.unref&&r.unref(),a.promise)});try{for(const t of e)yield o(t)}catch(l){}t=void 0}),l=e.set.bind(e);return e.set=(n,s)=>{e.has(n)&&e.delete(n);const i=l(n,s);return t&&t===n&&(t=void 0,void 0!==r&&(clearTimeout(r),r=void 0),void 0!==a&&(a.reject(void 0),a=void 0)),o(),i},o(),e}t.default=i,e.exports=i,e.exports.default=i},4803:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isPrimitive=function(e){return null==e||"object"!==typeof e&&"function"!==typeof e}},4830:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.debounce=function(e,t){let r,{signal:n,edges:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=null;const i=null!=a&&a.includes("leading"),o=null==a||a.includes("trailing"),l=()=>{null!==s&&(e.apply(r,s),r=void 0,s=null)};let c=null;const d=()=>{null!=c&&clearTimeout(c),c=setTimeout(()=>{c=null,o&&l(),u()},t)},u=()=>{null!==c&&(clearTimeout(c),c=null),r=void 0,s=null},h=function(){if(null!==n&&void 0!==n&&n.aborted)return;r=this;for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];s=t;const o=null==c;d(),i&&o&&l()};return h.schedule=d,h.cancel=u,h.flush=()=>{l()},null===n||void 0===n||n.addEventListener("abort",u,{once:!0}),h}},4879:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(6770);t.toFinite=function(e){if(!e)return 0===e?e:0;if((e=n.toNumber(e))===1/0||e===-1/0){return(e<0?-1:1)*Number.MAX_VALUE}return e===e?e:0}},4980:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(2284);function a(e){var t=function(e,t){if("object"!=(0,n.A)(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=(0,n.A)(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(0,n.A)(t)?t:t+""}function s(e,t,r){return(t=a(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},5043:(e,t,r)=>{"use strict";e.exports=r(4202)},5053:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(4208),a=r(9599),s=r(2104),i=r(2715);t.uniqBy=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.identity;return s.isArrayLikeObject(e)?n.uniqBy(Array.from(e),i.iteratee(t)):[]}},5082:(e,t)=>{"use strict";var r="function"===typeof Symbol&&Symbol.for,n=r?Symbol.for("react.element"):60103,a=r?Symbol.for("react.portal"):60106,s=r?Symbol.for("react.fragment"):60107,i=r?Symbol.for("react.strict_mode"):60108,o=r?Symbol.for("react.profiler"):60114,l=r?Symbol.for("react.provider"):60109,c=r?Symbol.for("react.context"):60110,d=r?Symbol.for("react.async_mode"):60111,u=r?Symbol.for("react.concurrent_mode"):60111,h=r?Symbol.for("react.forward_ref"):60112,m=r?Symbol.for("react.suspense"):60113,p=r?Symbol.for("react.suspense_list"):60120,f=r?Symbol.for("react.memo"):60115,g=r?Symbol.for("react.lazy"):60116,x=r?Symbol.for("react.block"):60121,y=r?Symbol.for("react.fundamental"):60117,v=r?Symbol.for("react.responder"):60118,b=r?Symbol.for("react.scope"):60119;function j(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case d:case u:case s:case o:case i:case m:return e;default:switch(e=e&&e.$$typeof){case c:case h:case g:case f:case l:return e;default:return t}}case a:return t}}}function w(e){return j(e)===u}t.isFragment=function(e){return j(e)===s}},5173:(e,t,r)=>{e.exports=r(1497)()},5261:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(6433);t.cloneDeep=function(e){return n.cloneDeepWithImpl(e,void 0,e,new Map,void 0)}},5303:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(2489),a=r(4704),s=r(6321),i=r(1444);t.has=function(e,t){let r;if(r=Array.isArray(t)?t:"string"===typeof t&&n.isDeepKey(t)&&null==(null===e||void 0===e?void 0:e[t])?i.toPath(t):[t],0===r.length)return!1;let o=e;for(let n=0;n<r.length;n++){const e=r[n];if(null==o||!Object.hasOwn(o,e)){if(!((Array.isArray(o)||s.isArguments(o))&&a.isIndex(e)&&e<o.length))return!1}o=o[e]}return!0}},5316:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(9709),a=r(7043),s=r(1444);t.orderBy=function(e,t,r,i){if(null==e)return[];r=i?void 0:r,Array.isArray(e)||(e=Object.values(e)),Array.isArray(t)||(t=null==t?[null]:[t]),0===t.length&&(t=[null]),Array.isArray(r)||(r=null==r?[]:[r]),r=r.map(e=>String(e));const o=(e,t)=>{let r=e;for(let n=0;n<t.length&&null!=r;++n)r=r[t[n]];return r},l=t.map(e=>(Array.isArray(e)&&1===e.length&&(e=e[0]),null==e||"function"===typeof e||Array.isArray(e)||a.isKey(e)?e:{key:e,path:s.toPath(e)}));return e.map(e=>({original:e,criteria:l.map(t=>((e,t)=>null==t||null==e?t:"object"===typeof e&&"key"in e?Object.hasOwn(t,e.key)?t[e.key]:o(t,e.path):"function"===typeof e?e(t):Array.isArray(e)?o(t,e):"object"===typeof t?t[e]:t)(t,e))})).slice().sort((e,t)=>{for(let a=0;a<l.length;a++){const s=n.compareValues(e.criteria[a],t.criteria[a],r[a]);if(0!==s)return s}return 0}).map(e=>e.original)}},5414:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(1293);t.throttle=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{leading:a=!0,trailing:s=!0}=r;return n.debounce(e,t,{leading:a,maxWait:t,trailing:s})}},5457:e=>{"use strict";e.exports=()=>{const e={};return e.promise=new Promise((t,r)=>{e.resolve=t,e.reject=r}),e}},5508:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(6433),a=r(7599);t.cloneDeepWith=function(e,t){return n.cloneDeepWith(e,(r,s,i,o)=>{const l=null===t||void 0===t?void 0:t(r,s,i,o);if(void 0!==l)return l;if("object"===typeof e)switch(Object.prototype.toString.call(e)){case a.numberTag:case a.stringTag:case a.booleanTag:{const t=new e.constructor(null===e||void 0===e?void 0:e.valueOf());return n.copyProperties(t,e),t}case a.argumentsTag:{const t={};return n.copyProperties(t,e),t.length=e.length,t[Symbol.iterator]=e[Symbol.iterator],t}default:return}})}},5724:(e,t,r)=>{"use strict";var n=r(2897).default;const a=(e,t,r,n)=>{if("length"===r||"prototype"===r)return;if("arguments"===r||"caller"===r)return;const a=Object.getOwnPropertyDescriptor(e,r),i=Object.getOwnPropertyDescriptor(t,r);!s(a,i)&&n||Object.defineProperty(e,r,i)},s=function(e,t){return void 0===e||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},i=(e,t)=>"/* Wrapped ".concat(e,"*/\n").concat(t),o=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),l=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name");e.exports=function(e,t){let{ignoreNonConfigurable:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{name:s}=e;for(const n of Reflect.ownKeys(t))a(e,t,n,r);return((e,t)=>{const r=Object.getPrototypeOf(t);r!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,r)})(e,t),((e,t,r)=>{const a=""===r?"":"with ".concat(r.trim(),"() "),s=i.bind(null,a,t.toString());Object.defineProperty(s,"name",l),Object.defineProperty(e,"toString",n(n({},o),{},{value:s}))})(e,t,s),e}},5751:(e,t,r)=>{"use strict";var n=r(5043),a=r(7870);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach(function(t){l(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function o(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function l(e,t,r){return(t=o(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(this,arguments)}function d(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s,i,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var m="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?n.useLayoutEffect:n.useEffect;function p(e){var t=n.useRef(e);return m(function(){t.current=e}),n.useCallback(function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t.current.apply(void 0,r)},[])}var f=["ref","startOnMount","enableReinitialize","delay","onEnd","onStart","onPauseResume","onReset","onUpdate"],g={decimal:".",separator:",",delay:null,prefix:"",suffix:"",duration:2,start:0,decimals:0,startOnMount:!0,enableReinitialize:!0,useEasing:!0,useGrouping:!0,useIndianSeparators:!1},x=function(e){var t=Object.fromEntries(Object.entries(e).filter(function(e){return void 0!==u(e,2)[1]})),r=n.useMemo(function(){return i(i({},g),t)},[e]),s=r.ref,o=r.startOnMount,l=r.enableReinitialize,c=r.delay,h=r.onEnd,m=r.onStart,x=r.onPauseResume,y=r.onReset,v=r.onUpdate,b=d(r,f),j=n.useRef(),w=n.useRef(),N=n.useRef(!1),_=p(function(){return function(e,t){var r=t.decimal,n=t.decimals,s=t.duration,i=t.easingFn,o=t.end,l=t.formattingFn,c=t.numerals,d=t.prefix,u=t.separator,h=t.start,m=t.suffix,p=t.useEasing,f=t.useGrouping,g=t.useIndianSeparators,x=t.enableScrollSpy,y=t.scrollSpyDelay,v=t.scrollSpyOnce,b=t.plugin;return new a.CountUp(e,o,{startVal:h,duration:s,decimal:r,decimalPlaces:n,easingFn:i,formattingFn:l,numerals:c,separator:u,prefix:d,suffix:m,plugin:b,useEasing:p,useIndianSeparators:g,useGrouping:f,enableScrollSpy:x,scrollSpyDelay:y,scrollSpyOnce:v})}("string"===typeof s?s:s.current,b)}),k=p(function(e){var t=j.current;if(t&&!e)return t;var r=_();return j.current=r,r}),S=p(function(){var e=function(){return k(!0).start(function(){null===h||void 0===h||h({pauseResume:A,reset:C,start:T,update:E})})};c&&c>0?w.current=setTimeout(e,1e3*c):e(),null===m||void 0===m||m({pauseResume:A,reset:C,update:E})}),A=p(function(){k().pauseResume(),null===x||void 0===x||x({reset:C,start:T,update:E})}),C=p(function(){k().el&&(w.current&&clearTimeout(w.current),k().reset(),null===y||void 0===y||y({pauseResume:A,start:T,update:E}))}),E=p(function(e){k().update(e),null===v||void 0===v||v({pauseResume:A,reset:C,start:T})}),T=p(function(){C(),S()}),P=p(function(e){o&&(e&&C(),S())});return n.useEffect(function(){N.current?l&&P(!0):(N.current=!0,P())},[l,N,P,c,e.start,e.suffix,e.prefix,e.duration,e.separator,e.decimals,e.decimal,e.formattingFn]),n.useEffect(function(){return function(){C()}},[C]),{start:T,pauseResume:A,reset:C,update:E,getCountUp:k}},y=["className","redraw","containerProps","children","style"];t.Ay=function(e){var t=e.className,r=e.redraw,a=e.containerProps,s=e.children,o=e.style,l=d(e,y),u=n.useRef(null),h=n.useRef(!1),m=x(i(i({},l),{},{ref:u,startOnMount:"function"!==typeof s||0===e.delay,enableReinitialize:!1})),f=m.start,g=m.reset,v=m.update,b=m.pauseResume,j=m.getCountUp,w=p(function(){f()}),N=p(function(t){e.preserveValue||g(),v(t)}),_=p(function(){"function"!==typeof e.children||u.current instanceof Element?j():console.error('Couldn\'t find attached element to hook the CountUp instance into! Try to attach "containerRef" from the render prop to a an Element, eg. <span ref={containerRef} />.')});n.useEffect(function(){_()},[_]),n.useEffect(function(){h.current&&N(e.end)},[e.end,N]);var k=r&&e;return n.useEffect(function(){r&&h.current&&w()},[w,r,k]),n.useEffect(function(){!r&&h.current&&w()},[w,r,e.start,e.suffix,e.prefix,e.duration,e.separator,e.decimals,e.decimal,e.className,e.formattingFn]),n.useEffect(function(){h.current=!0},[]),"function"===typeof s?s({countUpRef:u,start:f,reset:g,update:v,pauseResume:b,getCountUp:j}):n.createElement("span",c({className:t,ref:u,style:o},a),"undefined"!==typeof e.start?j().formattingFn(e.start):"")}},5990:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.getTag=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}},6321:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(5990);t.isArguments=function(e){return null!==e&&"object"===typeof e&&"[object Arguments]"===n.getTag(e)}},6392:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.last=function(e){return e[e.length-1]}},6433:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(6443),a=r(5990),s=r(7599),i=r(4803),o=r(3757);function l(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Map,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;const u=null===d||void 0===d?void 0:d(e,t,r,n);if(void 0!==u)return u;if(i.isPrimitive(e))return e;if(n.has(e))return n.get(e);if(Array.isArray(e)){const t=new Array(e.length);n.set(e,t);for(let a=0;a<e.length;a++)t[a]=l(e[a],a,r,n,d);return Object.hasOwn(e,"index")&&(t.index=e.index),Object.hasOwn(e,"input")&&(t.input=e.input),t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){const t=new RegExp(e.source,e.flags);return t.lastIndex=e.lastIndex,t}if(e instanceof Map){const t=new Map;n.set(e,t);for(const[a,s]of e)t.set(a,l(s,a,r,n,d));return t}if(e instanceof Set){const t=new Set;n.set(e,t);for(const a of e)t.add(l(a,void 0,r,n,d));return t}if("undefined"!==typeof Buffer&&Buffer.isBuffer(e))return e.subarray();if(o.isTypedArray(e)){const t=new(Object.getPrototypeOf(e).constructor)(e.length);n.set(e,t);for(let a=0;a<e.length;a++)t[a]=l(e[a],a,r,n,d);return t}if(e instanceof ArrayBuffer||"undefined"!==typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){const t=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return n.set(e,t),c(t,e,r,n,d),t}if("undefined"!==typeof File&&e instanceof File){const t=new File([e],e.name,{type:e.type});return n.set(e,t),c(t,e,r,n,d),t}if("undefined"!==typeof Blob&&e instanceof Blob){const t=new Blob([e],{type:e.type});return n.set(e,t),c(t,e,r,n,d),t}if(e instanceof Error){const t=new e.constructor;return n.set(e,t),t.message=e.message,t.name=e.name,t.stack=e.stack,t.cause=e.cause,c(t,e,r,n,d),t}if(e instanceof Boolean){const t=new Boolean(e.valueOf());return n.set(e,t),c(t,e,r,n,d),t}if(e instanceof Number){const t=new Number(e.valueOf());return n.set(e,t),c(t,e,r,n,d),t}if(e instanceof String){const t=new String(e.valueOf());return n.set(e,t),c(t,e,r,n,d),t}if("object"===typeof e&&function(e){switch(a.getTag(e)){case s.argumentsTag:case s.arrayTag:case s.arrayBufferTag:case s.dataViewTag:case s.booleanTag:case s.dateTag:case s.float32ArrayTag:case s.float64ArrayTag:case s.int8ArrayTag:case s.int16ArrayTag:case s.int32ArrayTag:case s.mapTag:case s.numberTag:case s.objectTag:case s.regexpTag:case s.setTag:case s.stringTag:case s.symbolTag:case s.uint8ArrayTag:case s.uint8ClampedArrayTag:case s.uint16ArrayTag:case s.uint32ArrayTag:return!0;default:return!1}}(e)){const t=Object.create(Object.getPrototypeOf(e));return n.set(e,t),c(t,e,r,n,d),t}return e}function c(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,a=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;const i=[...Object.keys(t),...n.getSymbols(t)];for(let n=0;n<i.length;n++){const o=i[n],c=Object.getOwnPropertyDescriptor(e,o);(null==c||c.writable)&&(e[o]=l(t[o],o,r,a,s))}}t.cloneDeepWith=function(e,t){return l(e,void 0,e,new Map,t)},t.cloneDeepWithImpl=l,t.copyProperties=c},6440:e=>{"use strict";var t=function(){};e.exports=t},6443:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.getSymbols=function(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}},6770:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(2777);t.toNumber=function(e){return n.isSymbol(e)?NaN:Number(e)}},6922:(e,t,r)=>{"use strict";const n=r(5724),a=r(4788),s=new WeakMap,i=new WeakMap,o=function(e){let{cacheKey:t,cache:r=new Map,maxAge:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"number"===typeof s&&a(r);const o=function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];const o=t?t(a):a[0],l=r.get(o);if(l)return l.data;const c=e.apply(this,a);return r.set(o,{data:c,maxAge:s?Date.now()+s:Number.POSITIVE_INFINITY}),c};return n(o,e,{ignoreNonConfigurable:!0}),i.set(o,r),o};o.decorator=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(t,r,n)=>{const a=t[r];if("function"!==typeof a)throw new TypeError("The decorated value must be a function");delete n.value,delete n.writable,n.get=function(){if(!s.has(this)){const t=o(a,e);return s.set(this,t),t}return s.get(this)}}},o.clear=e=>{const t=i.get(e);if(!t)throw new TypeError("Can't clear a function that was not memoized!");if("function"!==typeof t.clear)throw new TypeError("The cache Map can't be cleared!");t.clear()},e.exports=o},7043:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(2777),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;t.isKey=function(e,t){return!Array.isArray(e)&&(!("number"!==typeof e&&"boolean"!==typeof e&&null!=e&&!n.isSymbol(e))||("string"===typeof e&&(s.test(e)||!a.test(e))||null!=t&&Object.hasOwn(t,e)))}},7231:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(3799),a=r(4879);t.range=function(e,t,r){r&&"number"!==typeof r&&n.isIterateeCall(e,t,r)&&(t=r=void 0),e=a.toFinite(e),void 0===t?(t=e,e=0):t=a.toFinite(t),r=void 0===r?e<t?1:-1:a.toFinite(r);const s=Math.max(Math.ceil((t-e)/(r||1)),0),i=new Array(s);for(let n=0;n<s;n++)i[n]=e,e+=r;return i}},7234:(e,t)=>{"use strict";function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,a=e[n];if(!(0<s(a,t)))break e;e[n]=t,e[r]=a,r=n}}function n(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,a=e.length,i=a>>>1;n<i;){var o=2*(n+1)-1,l=e[o],c=o+1,d=e[c];if(0>s(l,r))c<a&&0>s(d,l)?(e[n]=d,e[c]=r,n=c):(e[n]=l,e[o]=r,n=o);else{if(!(c<a&&0>s(d,r)))break e;e[n]=d,e[c]=r,n=c}}}return t}function s(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,m=3,p=!1,f=!1,g=!1,x="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=n(d);null!==t;){if(null===t.callback)a(d);else{if(!(t.startTime<=e))break;a(d),t.sortIndex=t.expirationTime,r(c,t)}t=n(d)}}function j(e){if(g=!1,b(e),!f)if(null!==n(c))f=!0,D(w);else{var t=n(d);null!==t&&I(j,t.startTime-e)}}function w(e,r){f=!1,g&&(g=!1,y(S),S=-1),p=!0;var s=m;try{for(b(r),h=n(c);null!==h&&(!(h.expirationTime>r)||e&&!E());){var i=h.callback;if("function"===typeof i){h.callback=null,m=h.priorityLevel;var o=i(h.expirationTime<=r);r=t.unstable_now(),"function"===typeof o?h.callback=o:h===n(c)&&a(c),b(r)}else a(c);h=n(c)}if(null!==h)var l=!0;else{var u=n(d);null!==u&&I(j,u.startTime-r),l=!1}return l}finally{h=null,m=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var N,_=!1,k=null,S=-1,A=5,C=-1;function E(){return!(t.unstable_now()-C<A)}function T(){if(null!==k){var e=t.unstable_now();C=e;var r=!0;try{r=k(!0,e)}finally{r?N():(_=!1,k=null)}}else _=!1}if("function"===typeof v)N=function(){v(T)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,O=P.port2;P.port1.onmessage=T,N=function(){O.postMessage(null)}}else N=function(){x(T,0)};function D(e){k=e,_||(_=!0,N())}function I(e,r){S=x(function(){e(t.unstable_now())},r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||p||(f=!0,D(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var r=m;m=t;try{return e()}finally{m=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=m;m=e;try{return t()}finally{m=r}},t.unstable_scheduleCallback=function(e,a,s){var i=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?i+s:i:s=i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:a,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>i?(e.sortIndex=s,r(d,e),null===n(c)&&e===n(d)&&(g?(y(S),S=-1):g=!0,I(j,s-i))):(e.sortIndex=o,r(c,e),f||p||(f=!0,D(w))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=m;return function(){var r=m;m=t;try{return e.apply(this,arguments)}finally{m=r}}}},7237:(e,t,r)=>{"use strict";r(8365)},7260:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isUnsafeProperty=function(e){return"__proto__"===e}},7283:e=>{"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function a(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,n,s,i){if("function"!==typeof n)throw new TypeError("The listener must be a function");var o=new a(n,s||e,i),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function i(e,t){0===--e._eventsCount?e._events=new n:delete e._events[t]}function o(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),o.prototype.eventNames=function(){var e,n,a=[];if(0===this._eventsCount)return a;for(n in e=this._events)t.call(e,n)&&a.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(e)):a},o.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var a=0,s=n.length,i=new Array(s);a<s;a++)i[a]=n[a].fn;return i},o.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},o.prototype.emit=function(e,t,n,a,s,i){var o=r?r+e:e;if(!this._events[o])return!1;var l,c,d=this._events[o],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,n),!0;case 4:return d.fn.call(d.context,t,n,a),!0;case 5:return d.fn.call(d.context,t,n,a,s),!0;case 6:return d.fn.call(d.context,t,n,a,s,i),!0}for(c=1,l=new Array(u-1);c<u;c++)l[c-1]=arguments[c];d.fn.apply(d.context,l)}else{var h,m=d.length;for(c=0;c<m;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),u){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,n);break;case 4:d[c].fn.call(d[c].context,t,n,a);break;default:if(!l)for(h=1,l=new Array(u-1);h<u;h++)l[h-1]=arguments[h];d[c].fn.apply(d[c].context,l)}}return!0},o.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},o.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},o.prototype.removeListener=function(e,t,n,a){var s=r?r+e:e;if(!this._events[s])return this;if(!t)return i(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||a&&!o.once||n&&o.context!==n||i(this,s);else{for(var l=0,c=[],d=o.length;l<d;l++)(o[l].fn!==t||a&&!o[l].once||n&&o[l].context!==n)&&c.push(o[l]);c.length?this._events[s]=1===c.length?c[0]:c:i(this,s)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&i(this,t)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o},7312:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.flatten=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const r=[],n=Math.floor(t),a=(e,t)=>{for(let s=0;s<e.length;s++){const i=e[s];Array.isArray(i)&&t<n?a(i,t+1):r.push(i)}};return a(e,0),r}},7330:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(9323);t.property=function(e){return function(t){return n.get(t,e)}}},7599:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});t.argumentsTag="[object Arguments]",t.arrayBufferTag="[object ArrayBuffer]",t.arrayTag="[object Array]",t.bigInt64ArrayTag="[object BigInt64Array]",t.bigUint64ArrayTag="[object BigUint64Array]",t.booleanTag="[object Boolean]",t.dataViewTag="[object DataView]",t.dateTag="[object Date]",t.errorTag="[object Error]",t.float32ArrayTag="[object Float32Array]",t.float64ArrayTag="[object Float64Array]",t.functionTag="[object Function]",t.int16ArrayTag="[object Int16Array]",t.int32ArrayTag="[object Int32Array]",t.int8ArrayTag="[object Int8Array]",t.mapTag="[object Map]",t.numberTag="[object Number]",t.objectTag="[object Object]",t.regexpTag="[object RegExp]",t.setTag="[object Set]",t.stringTag="[object String]",t.symbolTag="[object Symbol]",t.uint16ArrayTag="[object Uint16Array]",t.uint32ArrayTag="[object Uint32Array]",t.uint8ArrayTag="[object Uint8Array]",t.uint8ClampedArrayTag="[object Uint8ClampedArray]"},7736:(e,t,r)=>{var n=r(3738).default,a=r(9045);e.exports=function(e){var t=a(e,"string");return"symbol"==n(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},7762:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AcroForm:()=>jt,AcroFormAppearance:()=>vt,AcroFormButton:()=>ht,AcroFormCheckBox:()=>gt,AcroFormChoiceField:()=>lt,AcroFormComboBox:()=>dt,AcroFormEditBox:()=>ut,AcroFormListBox:()=>ct,AcroFormPasswordField:()=>yt,AcroFormPushButton:()=>mt,AcroFormRadioButton:()=>pt,AcroFormTextField:()=>xt,GState:()=>Ee,ShadingPattern:()=>Pe,TilingPattern:()=>Oe,default:()=>vr,jsPDF:()=>De});var n=r(2284),a=Uint8Array,s=Uint16Array,i=Int32Array,o=new a([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),l=new a([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),c=new a([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),d=function(e,t){for(var r=new s(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];var a=new i(r[30]);for(n=1;n<30;++n)for(var o=r[n];o<r[n+1];++o)a[o]=o-r[n]<<5|n;return{b:r,r:a}},u=d(o,2),h=u.b,m=u.r;h[28]=258,m[258]=28;for(var p=d(l,0),f=p.b,g=p.r,x=new s(32768),y=0;y<32768;++y){var v=(43690&y)>>1|(21845&y)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,x[y]=((65280&v)>>8|(255&v)<<8)>>1}var b=function(e,t,r){for(var n=e.length,a=0,i=new s(t);a<n;++a)e[a]&&++i[e[a]-1];var o,l=new s(t);for(a=1;a<t;++a)l[a]=l[a-1]+i[a-1]<<1;if(r){o=new s(1<<t);var c=15-t;for(a=0;a<n;++a)if(e[a])for(var d=a<<4|e[a],u=t-e[a],h=l[e[a]-1]++<<u,m=h|(1<<u)-1;h<=m;++h)o[x[h]>>c]=d}else for(o=new s(n),a=0;a<n;++a)e[a]&&(o[a]=x[l[e[a]-1]++]>>15-e[a]);return o},j=new a(288);for(y=0;y<144;++y)j[y]=8;for(y=144;y<256;++y)j[y]=9;for(y=256;y<280;++y)j[y]=7;for(y=280;y<288;++y)j[y]=8;var w=new a(32);for(y=0;y<32;++y)w[y]=5;var N=b(j,9,0),_=b(j,9,1),k=b(w,5,0),S=b(w,5,1),A=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},C=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(7&t)&r},E=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(7&t)},T=function(e){return(e+7)/8|0},P=function(e,t,r){return(null==t||t<0)&&(t=0),(null==r||r>e.length)&&(r=e.length),new a(e.subarray(t,r))},O=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],D=function(e,t,r){var n=new Error(t||O[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,D),!r)throw n;return n},I=function(e,t,r,n){var s=e.length,i=n?n.length:0;if(!s||t.f&&!t.l)return r||new a(0);var d=!r,u=d||2!=t.i,m=t.i;d&&(r=new a(3*s));var p=function(e){var t=r.length;if(e>t){var n=new a(Math.max(2*t,e));n.set(r),r=n}},g=t.f||0,x=t.p||0,y=t.b||0,v=t.l,j=t.d,w=t.m,N=t.n,k=8*s;do{if(!v){g=C(e,x,1);var O=C(e,x+1,3);if(x+=3,!O){var I=e[(H=T(x)+4)-4]|e[H-3]<<8,L=H+I;if(L>s){m&&D(0);break}u&&p(y+I),r.set(e.subarray(H,L),y),t.b=y+=I,t.p=x=8*L,t.f=g;continue}if(1==O)v=_,j=S,w=9,N=5;else if(2==O){var M=C(e,x,31)+257,R=C(e,x+10,15)+4,F=M+C(e,x+5,31)+1;x+=14;for(var B=new a(F),z=new a(19),U=0;U<R;++U)z[c[U]]=C(e,x+3*U,7);x+=3*R;var q=A(z),W=(1<<q)-1,V=b(z,q,1);for(U=0;U<F;){var H,G=V[C(e,x,W)];if(x+=15&G,(H=G>>4)<16)B[U++]=H;else{var K=0,Y=0;for(16==H?(Y=3+C(e,x,3),x+=2,K=B[U-1]):17==H?(Y=3+C(e,x,7),x+=3):18==H&&(Y=11+C(e,x,127),x+=7);Y--;)B[U++]=K}}var X=B.subarray(0,M),Q=B.subarray(M);w=A(X),N=A(Q),v=b(X,w,1),j=b(Q,N,1)}else D(1);if(x>k){m&&D(0);break}}u&&p(y+131072);for(var $=(1<<w)-1,J=(1<<N)-1,Z=x;;Z=x){var ee=(K=v[E(e,x)&$])>>4;if((x+=15&K)>k){m&&D(0);break}if(K||D(2),ee<256)r[y++]=ee;else{if(256==ee){Z=x,v=null;break}var te=ee-254;if(ee>264){var re=o[U=ee-257];te=C(e,x,(1<<re)-1)+h[U],x+=re}var ne=j[E(e,x)&J],ae=ne>>4;ne||D(3),x+=15&ne;Q=f[ae];if(ae>3){re=l[ae];Q+=E(e,x)&(1<<re)-1,x+=re}if(x>k){m&&D(0);break}u&&p(y+131072);var se=y+te;if(y<Q){var ie=i-Q,oe=Math.min(Q,se);for(ie+y<0&&D(3);y<oe;++y)r[y]=n[ie+y]}for(;y<se;++y)r[y]=r[y-Q]}}t.l=v,t.p=Z,t.b=y,t.f=g,v&&(g=1,t.m=w,t.d=j,t.n=N)}while(!g);return y!=r.length&&d?P(r,0,y):r.subarray(0,y)},L=function(e,t,r){r<<=7&t;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},M=function(e,t,r){r<<=7&t;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},R=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var i=r.length,o=r.slice();if(!i)return{t:V,l:0};if(1==i){var l=new a(r[0].s+1);return l[r[0].s]=1,{t:l,l:1}}r.sort(function(e,t){return e.f-t.f}),r.push({s:-1,f:25001});var c=r[0],d=r[1],u=0,h=1,m=2;for(r[0]={s:-1,f:c.f+d.f,l:c,r:d};h!=i-1;)c=r[r[u].f<r[m].f?u++:m++],d=r[u!=h&&r[u].f<r[m].f?u++:m++],r[h++]={s:-1,f:c.f+d.f,l:c,r:d};var p=o[0].s;for(n=1;n<i;++n)o[n].s>p&&(p=o[n].s);var f=new s(p+1),g=F(r[h-1],f,0);if(g>t){n=0;var x=0,y=g-t,v=1<<y;for(o.sort(function(e,t){return f[t.s]-f[e.s]||e.f-t.f});n<i;++n){var b=o[n].s;if(!(f[b]>t))break;x+=v-(1<<g-f[b]),f[b]=t}for(x>>=y;x>0;){var j=o[n].s;f[j]<t?x-=1<<t-f[j]++-1:++n}for(;n>=0&&x;--n){var w=o[n].s;f[w]==t&&(--f[w],++x)}g=t}return{t:new a(f),l:g}},F=function(e,t,r){return-1==e.s?Math.max(F(e.l,t,r+1),F(e.r,t,r+1)):t[e.s]=r},B=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new s(++t),n=0,a=e[0],i=1,o=function(e){r[n++]=e},l=1;l<=t;++l)if(e[l]==a&&l!=t)++i;else{if(!a&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(a),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(a);i=1,a=e[l]}return{c:r.subarray(0,n),n:t}},z=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},U=function(e,t,r){var n=r.length,a=T(t+2);e[a]=255&n,e[a+1]=n>>8,e[a+2]=255^e[a],e[a+3]=255^e[a+1];for(var s=0;s<n;++s)e[a+s+4]=r[s];return 8*(a+4+n)},q=function(e,t,r,n,a,i,d,u,h,m,p){L(t,p++,r),++a[256];for(var f=R(a,15),g=f.t,x=f.l,y=R(i,15),v=y.t,_=y.l,S=B(g),A=S.c,C=S.n,E=B(v),T=E.c,P=E.n,O=new s(19),D=0;D<A.length;++D)++O[31&A[D]];for(D=0;D<T.length;++D)++O[31&T[D]];for(var I=R(O,7),F=I.t,q=I.l,W=19;W>4&&!F[c[W-1]];--W);var V,H,G,K,Y=m+5<<3,X=z(a,j)+z(i,w)+d,Q=z(a,g)+z(i,v)+d+14+3*W+z(O,F)+2*O[16]+3*O[17]+7*O[18];if(h>=0&&Y<=X&&Y<=Q)return U(t,p,e.subarray(h,h+m));if(L(t,p,1+(Q<X)),p+=2,Q<X){V=b(g,x,0),H=g,G=b(v,_,0),K=v;var $=b(F,q,0);L(t,p,C-257),L(t,p+5,P-1),L(t,p+10,W-4),p+=14;for(D=0;D<W;++D)L(t,p+3*D,F[c[D]]);p+=3*W;for(var J=[A,T],Z=0;Z<2;++Z){var ee=J[Z];for(D=0;D<ee.length;++D){var te=31&ee[D];L(t,p,$[te]),p+=F[te],te>15&&(L(t,p,ee[D]>>5&127),p+=ee[D]>>12)}}}else V=N,H=j,G=k,K=w;for(D=0;D<u;++D){var re=n[D];if(re>255){M(t,p,V[(te=re>>18&31)+257]),p+=H[te+257],te>7&&(L(t,p,re>>23&31),p+=o[te]);var ne=31&re;M(t,p,G[ne]),p+=K[ne],ne>3&&(M(t,p,re>>5&8191),p+=l[ne])}else M(t,p,V[re]),p+=H[re]}return M(t,p,V[256]),p+H[256]},W=new i([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),V=new a(0),H=function(e,t,r,n,c,d){var u=d.z||e.length,h=new a(n+u+5*(1+Math.ceil(u/7e3))+c),p=h.subarray(n,h.length-c),f=d.l,x=7&(d.r||0);if(t){x&&(p[0]=d.r>>3);for(var y=W[t-1],v=y>>13,b=8191&y,j=(1<<r)-1,w=d.p||new s(32768),N=d.h||new s(j+1),_=Math.ceil(r/3),k=2*_,S=function(t){return(e[t]^e[t+1]<<_^e[t+2]<<k)&j},A=new i(25e3),C=new s(288),E=new s(32),O=0,D=0,I=d.i||0,L=0,M=d.w||0,R=0;I+2<u;++I){var F=S(I),B=32767&I,z=N[F];if(w[B]=z,N[F]=B,M<=I){var V=u-I;if((O>7e3||L>24576)&&(V>423||!f)){x=q(e,p,0,A,C,E,D,L,R,I-R,x),L=O=D=0,R=I;for(var H=0;H<286;++H)C[H]=0;for(H=0;H<30;++H)E[H]=0}var G=2,K=0,Y=b,X=B-z&32767;if(V>2&&F==S(I-X))for(var Q=Math.min(v,V)-1,$=Math.min(32767,I),J=Math.min(258,V);X<=$&&--Y&&B!=z;){if(e[I+G]==e[I+G-X]){for(var Z=0;Z<J&&e[I+Z]==e[I+Z-X];++Z);if(Z>G){if(G=Z,K=X,Z>Q)break;var ee=Math.min(X,Z-2),te=0;for(H=0;H<ee;++H){var re=I-X+H&32767,ne=re-w[re]&32767;ne>te&&(te=ne,z=re)}}}X+=(B=z)-(z=w[B])&32767}if(K){A[L++]=268435456|m[G]<<18|g[K];var ae=31&m[G],se=31&g[K];D+=o[ae]+l[se],++C[257+ae],++E[se],M=I+G,++O}else A[L++]=e[I],++C[e[I]]}}for(I=Math.max(I,M);I<u;++I)A[L++]=e[I],++C[e[I]];x=q(e,p,f,A,C,E,D,L,R,I-R,x),f||(d.r=7&x|p[x/8|0]<<3,x-=7,d.h=N,d.p=w,d.i=I,d.w=M)}else{for(I=d.w||0;I<u+f;I+=65535){var ie=I+65535;ie>=u&&(p[x/8|0]=f,ie=u),x=U(p,x+1,e.subarray(I,ie))}d.i=u}return P(h,0,n+T(x)+c)},G=function(){var e=1,t=0;return{p:function(r){for(var n=e,a=t,s=0|r.length,i=0;i!=s;){for(var o=Math.min(i+2655,s);i<o;++i)a+=n+=r[i];n=(65535&n)+15*(n>>16),a=(65535&a)+15*(a>>16)}e=n,t=a},d:function(){return(255&(e%=65521))<<24|(65280&e)<<8|(255&(t%=65521))<<8|t>>8}}},K=function(e,t,r,n,s){if(!s&&(s={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new a(i.length+e.length);o.set(i),o.set(e,i.length),e=o,s.w=i.length}return H(e,null==t.level?6:t.level,null==t.mem?s.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+t.mem,r,n,s)},Y=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},X=function(e,t){var r=t.level,n=0==r?0:r<6?1:9==r?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=G();a.p(t.dictionary),Y(e,2,a.d())}},Q=function(e,t){return(8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31)&&D(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&D(6,"invalid zlib data: "+(32&e[1]?"need":"unexpected")+" dictionary"),2+(e[1]>>3&4)};function $(e,t){t||(t={});var r=G();r.p(e);var n=K(e,t,t.dictionary?6:2,4);return X(n,t),Y(n,n.length-4,r.d()),n}function J(e,t){return I(e.subarray(Q(e,t&&t.dictionary),-4),{i:2},t&&t.out,t&&t.dictionary)}var Z="undefined"!=typeof TextDecoder&&new TextDecoder;try{Z.decode(V,{stream:!0})}catch(br){}"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;var ee=function(){return"undefined"!=typeof window?window:"undefined"!=typeof r.g?r.g:"undefined"!=typeof self?self:this}();function te(){ee.console&&"function"==typeof ee.console.log&&ee.console.log.apply(ee.console,arguments)}var re={log:te,warn:function(e){ee.console&&("function"==typeof ee.console.warn?ee.console.warn.apply(ee.console,arguments):te.call(null,arguments))},error:function(e){ee.console&&("function"==typeof ee.console.error?ee.console.error.apply(ee.console,arguments):te(e))}};function ne(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){le(n.response,t,r)},n.onerror=function(){re.error("could not download file")},n.send()}function ae(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return t.status>=200&&t.status<=299}function se(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(r){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var ie,oe,le=ee.saveAs||("object"!==("undefined"==typeof window?"undefined":(0,n.A)(window))||window!==ee?function(){}:"undefined"!=typeof HTMLAnchorElement&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=ee.URL||ee.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener","string"==typeof e?(a.href=e,a.origin!==location.origin?ae(a.href)?ne(e,t,r):se(a,a.target="_blank"):se(a)):(a.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){se(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download","string"==typeof e)if(ae(e))ne(e,t,r);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout(function(){se(a)})}else navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!==(0,n.A)(t)&&(re.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}(e,r),t)}:function(e,t,r,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof e)return ne(e,t,r);var s="application/octet-stream"===e.type,i=/constructor/i.test(ee.HTMLElement)||ee.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||s&&i)&&"object"===("undefined"==typeof FileReader?"undefined":(0,n.A)(FileReader))){var l=new FileReader;l.onloadend=function(){var e=l.result;e=o?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=e:location=e,a=null},l.readAsDataURL(e)}else{var c=ee.URL||ee.webkitURL,d=c.createObjectURL(e);a?a.location=d:location.href=d,a=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});function ce(e){var t;e=e||"",this.ok=!1,"#"==e.charAt(0)&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,s=r[n].process,i=a.exec(e);i&&(t=s(i),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),r=this.b.toString(16);return 1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==r.length&&(r="0"+r),"#"+e+t+r}}function de(e,t){var r=e[0],n=e[1],a=e[2],s=e[3];r=he(r,n,a,s,t[0],7,-680876936),s=he(s,r,n,a,t[1],12,-389564586),a=he(a,s,r,n,t[2],17,606105819),n=he(n,a,s,r,t[3],22,-1044525330),r=he(r,n,a,s,t[4],7,-176418897),s=he(s,r,n,a,t[5],12,1200080426),a=he(a,s,r,n,t[6],17,-1473231341),n=he(n,a,s,r,t[7],22,-45705983),r=he(r,n,a,s,t[8],7,1770035416),s=he(s,r,n,a,t[9],12,-1958414417),a=he(a,s,r,n,t[10],17,-42063),n=he(n,a,s,r,t[11],22,-1990404162),r=he(r,n,a,s,t[12],7,1804603682),s=he(s,r,n,a,t[13],12,-40341101),a=he(a,s,r,n,t[14],17,-1502002290),r=me(r,n=he(n,a,s,r,t[15],22,1236535329),a,s,t[1],5,-165796510),s=me(s,r,n,a,t[6],9,-1069501632),a=me(a,s,r,n,t[11],14,643717713),n=me(n,a,s,r,t[0],20,-373897302),r=me(r,n,a,s,t[5],5,-701558691),s=me(s,r,n,a,t[10],9,38016083),a=me(a,s,r,n,t[15],14,-660478335),n=me(n,a,s,r,t[4],20,-405537848),r=me(r,n,a,s,t[9],5,568446438),s=me(s,r,n,a,t[14],9,-1019803690),a=me(a,s,r,n,t[3],14,-187363961),n=me(n,a,s,r,t[8],20,1163531501),r=me(r,n,a,s,t[13],5,-1444681467),s=me(s,r,n,a,t[2],9,-51403784),a=me(a,s,r,n,t[7],14,1735328473),r=pe(r,n=me(n,a,s,r,t[12],20,-1926607734),a,s,t[5],4,-378558),s=pe(s,r,n,a,t[8],11,-2022574463),a=pe(a,s,r,n,t[11],16,1839030562),n=pe(n,a,s,r,t[14],23,-35309556),r=pe(r,n,a,s,t[1],4,-1530992060),s=pe(s,r,n,a,t[4],11,1272893353),a=pe(a,s,r,n,t[7],16,-155497632),n=pe(n,a,s,r,t[10],23,-1094730640),r=pe(r,n,a,s,t[13],4,681279174),s=pe(s,r,n,a,t[0],11,-358537222),a=pe(a,s,r,n,t[3],16,-722521979),n=pe(n,a,s,r,t[6],23,76029189),r=pe(r,n,a,s,t[9],4,-640364487),s=pe(s,r,n,a,t[12],11,-421815835),a=pe(a,s,r,n,t[15],16,530742520),r=fe(r,n=pe(n,a,s,r,t[2],23,-995338651),a,s,t[0],6,-198630844),s=fe(s,r,n,a,t[7],10,1126891415),a=fe(a,s,r,n,t[14],15,-1416354905),n=fe(n,a,s,r,t[5],21,-57434055),r=fe(r,n,a,s,t[12],6,1700485571),s=fe(s,r,n,a,t[3],10,-1894986606),a=fe(a,s,r,n,t[10],15,-1051523),n=fe(n,a,s,r,t[1],21,-2054922799),r=fe(r,n,a,s,t[8],6,1873313359),s=fe(s,r,n,a,t[15],10,-30611744),a=fe(a,s,r,n,t[6],15,-1560198380),n=fe(n,a,s,r,t[13],21,1309151649),r=fe(r,n,a,s,t[4],6,-145523070),s=fe(s,r,n,a,t[11],10,-1120210379),a=fe(a,s,r,n,t[2],15,718787259),n=fe(n,a,s,r,t[9],21,-343485551),e[0]=Ne(r,e[0]),e[1]=Ne(n,e[1]),e[2]=Ne(a,e[2]),e[3]=Ne(s,e[3])}function ue(e,t,r,n,a,s){return t=Ne(Ne(t,e),Ne(n,s)),Ne(t<<a|t>>>32-a,r)}function he(e,t,r,n,a,s,i){return ue(t&r|~t&n,e,t,a,s,i)}function me(e,t,r,n,a,s,i){return ue(t&n|r&~n,e,t,a,s,i)}function pe(e,t,r,n,a,s,i){return ue(t^r^n,e,t,a,s,i)}function fe(e,t,r,n,a,s,i){return ue(r^(t|~n),e,t,a,s,i)}function ge(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)de(n,xe(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(de(n,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,de(n,a),n}function xe(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}ie=ee.atob.bind(ee),oe=ee.btoa.bind(ee);var ye="0123456789abcdef".split("");function ve(e){for(var t="",r=0;r<4;r++)t+=ye[e>>8*r+4&15]+ye[e>>8*r&15];return t}function be(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function je(e){return ge(e).map(be).join("")}var we="5d41402abc4b2a76b9719d911017c592"!=function(e){for(var t=0;t<e.length;t++)e[t]=ve(e[t]);return e.join("")}(ge("hello"));function Ne(e,t){if(we){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}function _e(e,t){var r,n,a,s;if(e!==r){for(var i=(a=e,s=1+(256/e.length|0),new Array(s+1).join(a)),o=[],l=0;l<256;l++)o[l]=l;var c=0;for(l=0;l<256;l++){var d=o[l];c=(c+d+i.charCodeAt(l))%256,o[l]=o[c],o[c]=d}r=e,n=o}else o=n;var u=t.length,h=0,m=0,p="";for(l=0;l<u;l++)m=(m+(d=o[h=(h+1)%256]))%256,o[h]=o[m],o[m]=d,i=o[(o[h]+o[m])%256],p+=String.fromCharCode(t.charCodeAt(l)^i);return p}var ke={print:4,modify:8,copy:16,"annot-forms":32};function Se(e,t,r,n){this.v=1,this.r=2;var a=192;e.forEach(function(e){if(void 0!==ke.perm)throw new Error("Invalid permission: "+e);a+=ke[e]}),this.padding="(\xbfN^Nu\x8aAd\0NV\xff\xfa\x01\b..\0\xb6\xd0h>\x80/\f\xa9\xfedSiz";var s=(t+this.padding).substr(0,32),i=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,i),this.P=-(1+(255^a)),this.encryptionKey=je(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=_e(this.encryptionKey,this.padding)}function Ae(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var a=e.charCodeAt(n);t+=a<33||35===a||37===a||40===a||41===a||47===a||60===a||62===a||91===a||93===a||123===a||125===a||a>126?"#"+("0"+a.toString(16)).slice(-2):e[n]}return t}function Ce(e){if("object"!==(0,n.A)(e))throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,r,n){if(n=n||!1,"string"!=typeof e||"function"!=typeof r||"boolean"!=typeof n)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var a=Math.random().toString(35);return t[e][a]=[r,!!n],a},this.unsubscribe=function(e){for(var r in t)if(t[r][e])return delete t[r][e],0===Object.keys(t[r]).length&&delete t[r],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var s in t[r]){var i=t[r][s];try{i[0].apply(e,n)}catch(r){ee.console&&re.error("jsPDF PubSub Error",r.message,r)}i[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Ee(e){if(!(this instanceof Ee))return new Ee(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function Te(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Pe(e,t,r,n,a){if(!(this instanceof Pe))return new Pe(e,t,r,n,a);this.type="axial"===e?2:3,this.coords=t,this.colors=r,Te.call(this,n,a)}function Oe(e,t,r,n,a){if(!(this instanceof Oe))return new Oe(e,t,r,n,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,Te.call(this,n,a)}function De(e){var t,r="string"==typeof arguments[0]?arguments[0]:"p",a=arguments[1],s=arguments[2],i=arguments[3],o=[],l=1,c=16,d="S",u=null;"object"===(0,n.A)(e=e||{})&&(r=e.orientation,a=e.unit||a,s=e.format||s,i=e.compress||e.compressPdf||i,null!==(u=e.encryption||null)&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),l="number"==typeof e.userUnit?Math.abs(e.userUnit):1,void 0!==e.precision&&(t=e.precision),void 0!==e.floatPrecision&&(c=e.floatPrecision),d=e.defaultPathOperation||"S"),o=e.filters||(!0===i?["FlateEncode"]:o),a=a||"mm",r=(""+(r||"P")).toLowerCase();var h=e.putOnlyUsedFonts||!1,m={},p={internal:{},__private__:{}};p.__private__.PubSub=Ce;var f="1.3",g=p.__private__.getPdfVersion=function(){return f};p.__private__.setPdfVersion=function(e){f=e};var x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return x};var y=p.__private__.getPageFormat=function(e){return x[e]};s=s||"a4";var v="compat",b="advanced",j=v;function w(){this.saveGraphicsState(),J(new Ve(ye,0,0,-ye,0,wr()*ye).toString()+" cm"),this.setFontSize(this.getFontSize()/ye),d="n",j=b}function N(){this.restoreGraphicsState(),d="S",j=v}var _=p.__private__.combineFontStyleAndFontWeight=function(e,t){if("bold"==e&&"normal"==t||"bold"==e&&400==t||"normal"==e&&"italic"==t||"bold"==e&&"italic"==t)throw new Error("Invalid Combination of fontweight and fontstyle");return t&&(e=400==t||"normal"===t?"italic"===e?"italic":"normal":700!=t&&"bold"!==t||"normal"!==e?(700==t?"bold":t)+""+e:"bold"),e};p.advancedAPI=function(e){var t=j===v;return t&&w.call(this),"function"!=typeof e||(e(this),t&&N.call(this)),this},p.compatAPI=function(e){var t=j===b;return t&&N.call(this),"function"!=typeof e||(e(this),t&&w.call(this)),this},p.isAdvancedAPI=function(){return j===b};var k,S=function(e){if(j!==b)throw new Error(e+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},A=p.roundToPrecision=p.__private__.roundToPrecision=function(e,r){var n=t||r;if(isNaN(e)||isNaN(n))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return e.toFixed(n).replace(/0+$/,"")};k=p.hpf=p.__private__.hpf="number"==typeof c?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return A(e,c)}:"smart"===c?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return A(e,e>-1&&e<1?16:5)}:function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return A(e,16)};var C=p.f2=p.__private__.f2=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f2");return A(e,2)},E=p.__private__.f3=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f3");return A(e,3)},T=p.scale=p.__private__.scale=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.scale");return j===v?e*ye:j===b?e:void 0},P=function(e){return T(function(e){return j===v?wr()-e:j===b?e:void 0}(e))};p.__private__.setPrecision=p.setPrecision=function(e){"number"==typeof parseInt(e,10)&&(t=parseInt(e,10))};var O,D="00000000000000000000000000000000",I=p.__private__.getFileId=function(){return D},L=p.__private__.setFileId=function(e){return D=void 0!==e&&/^[a-fA-F0-9]{32}$/.test(e)?e.toUpperCase():D.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),null!==u&&(Ot=new Se(u.userPermissions,u.userPassword,u.ownerPassword,D)),D};p.setFileId=function(e){return L(e),this},p.getFileId=function(){return I()};var M=p.__private__.convertDateToPDFDate=function(e){var t=e.getTimezoneOffset(),r=t<0?"+":"-",n=Math.floor(Math.abs(t/60)),a=Math.abs(t%60),s=[r,U(n),"'",U(a),"'"].join("");return["D:",e.getFullYear(),U(e.getMonth()+1),U(e.getDate()),U(e.getHours()),U(e.getMinutes()),U(e.getSeconds()),s].join("")},R=p.__private__.convertPDFDateToDate=function(e){var t=parseInt(e.substr(2,4),10),r=parseInt(e.substr(6,2),10)-1,n=parseInt(e.substr(8,2),10),a=parseInt(e.substr(10,2),10),s=parseInt(e.substr(12,2),10),i=parseInt(e.substr(14,2),10);return new Date(t,r,n,a,s,i,0)},F=p.__private__.setCreationDate=function(e){var t;if(void 0===e&&(e=new Date),e instanceof Date)t=M(e);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(e))throw new Error("Invalid argument passed to jsPDF.setCreationDate");t=e}return O=t},B=p.__private__.getCreationDate=function(e){var t=O;return"jsDate"===e&&(t=R(O)),t};p.setCreationDate=function(e){return F(e),this},p.getCreationDate=function(e){return B(e)};var z,U=p.__private__.padd2=function(e){return("0"+parseInt(e)).slice(-2)},q=p.__private__.padd2Hex=function(e){return("00"+(e=e.toString())).substr(e.length)},W=0,V=[],H=[],G=0,K=[],Y=[],X=!1,Q=H;p.__private__.setCustomOutputDestination=function(e){X=!0,Q=e};var $=function(e){X||(Q=e)};p.__private__.resetCustomOutputDestination=function(){X=!1,Q=H};var J=p.__private__.out=function(e){return e=e.toString(),G+=e.length+1,Q.push(e),Q},Z=p.__private__.write=function(e){return J(1===arguments.length?e.toString():Array.prototype.join.call(arguments," "))},te=p.__private__.getArrayBuffer=function(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r);t--;)n[t]=e.charCodeAt(t);return r},ne=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return ne};var ae=e.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(e){return ae=j===b?e/ye:e,this};var se,ie=p.__private__.getFontSize=p.getFontSize=function(){return j===v?ae:ae*ye},de=e.R2L||!1;p.__private__.setR2L=p.setR2L=function(e){return de=e,this},p.__private__.getR2L=p.getR2L=function(){return de};var ue,he=p.__private__.setZoomMode=function(e){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(e))se=e;else if(isNaN(e)){if(-1===[void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(e))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+e+'" is not recognized.');se=e}else se=parseInt(e,10)};p.__private__.getZoomMode=function(){return se};var me,pe=p.__private__.setPageMode=function(e){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(e))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+e+'" is not recognized.');ue=e};p.__private__.getPageMode=function(){return ue};var fe=p.__private__.setLayoutMode=function(e){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(e))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+e+'" is not recognized.');me=e};p.__private__.getLayoutMode=function(){return me},p.__private__.setDisplayMode=p.setDisplayMode=function(e,t,r){return he(e),fe(t),pe(r),this};var ge={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(e){if(-1===Object.keys(ge).indexOf(e))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ge[e]},p.__private__.getDocumentProperties=function(){return ge},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(e){for(var t in ge)ge.hasOwnProperty(t)&&e[t]&&(ge[t]=e[t]);return this},p.__private__.setDocumentProperty=function(e,t){if(-1===Object.keys(ge).indexOf(e))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ge[e]=t};var xe,ye,ve,be,je,we={},Ne={},_e=[],ke={},Te={},Ie={},Le={},Me=null,Re=0,Fe=[],Be=new Ce(p),ze=e.hotfixes||[],Ue={},qe={},We=[],Ve=function e(t,r,n,a,s,i){if(!(this instanceof e))return new e(t,r,n,a,s,i);isNaN(t)&&(t=1),isNaN(r)&&(r=0),isNaN(n)&&(n=0),isNaN(a)&&(a=1),isNaN(s)&&(s=0),isNaN(i)&&(i=0),this._matrix=[t,r,n,a,s,i]};Object.defineProperty(Ve.prototype,"sx",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(Ve.prototype,"shy",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(Ve.prototype,"shx",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(Ve.prototype,"sy",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(Ve.prototype,"tx",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(Ve.prototype,"ty",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(Ve.prototype,"a",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(Ve.prototype,"b",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(Ve.prototype,"c",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(Ve.prototype,"d",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(Ve.prototype,"e",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(Ve.prototype,"f",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(Ve.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ve.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ve.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ve.prototype,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),Ve.prototype.join=function(e){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(k).join(e)},Ve.prototype.multiply=function(e){var t=e.sx*this.sx+e.shy*this.shx,r=e.sx*this.shy+e.shy*this.sy,n=e.shx*this.sx+e.sy*this.shx,a=e.shx*this.shy+e.sy*this.sy,s=e.tx*this.sx+e.ty*this.shx+this.tx,i=e.tx*this.shy+e.ty*this.sy+this.ty;return new Ve(t,r,n,a,s,i)},Ve.prototype.decompose=function(){var e=this.sx,t=this.shy,r=this.shx,n=this.sy,a=this.tx,s=this.ty,i=Math.sqrt(e*e+t*t),o=(e/=i)*r+(t/=i)*n;r-=e*o,n-=t*o;var l=Math.sqrt(r*r+n*n);return o/=l,e*(n/=l)<t*(r/=l)&&(e=-e,t=-t,o=-o,i=-i),{scale:new Ve(i,0,0,l,0,0),translate:new Ve(1,0,0,1,a,s),rotate:new Ve(e,t,-t,e,0,0),skew:new Ve(1,0,o,1,0,0)}},Ve.prototype.toString=function(e){return this.join(" ")},Ve.prototype.inversed=function(){var e=this.sx,t=this.shy,r=this.shx,n=this.sy,a=this.tx,s=this.ty,i=1/(e*n-t*r),o=n*i,l=-t*i,c=-r*i,d=e*i;return new Ve(o,l,c,d,-o*a-c*s,-l*a-d*s)},Ve.prototype.applyToPoint=function(e){var t=e.x*this.sx+e.y*this.shx+this.tx,r=e.x*this.shy+e.y*this.sy+this.ty;return new fr(t,r)},Ve.prototype.applyToRectangle=function(e){var t=this.applyToPoint(e),r=this.applyToPoint(new fr(e.x+e.w,e.y+e.h));return new gr(t.x,t.y,r.x-t.x,r.y-t.y)},Ve.prototype.clone=function(){var e=this.sx,t=this.shy,r=this.shx,n=this.sy,a=this.tx,s=this.ty;return new Ve(e,t,r,n,a,s)},p.Matrix=Ve;var He=p.matrixMult=function(e,t){return t.multiply(e)},Ge=new Ve(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=Ge;var Ke=function(e,t){if(!Te[e]){var r=(t instanceof Pe?"Sh":"P")+(Object.keys(ke).length+1).toString(10);t.id=r,Te[e]=r,ke[r]=t,Be.publish("addPattern",t)}};p.ShadingPattern=Pe,p.TilingPattern=Oe,p.addShadingPattern=function(e,t){return S("addShadingPattern()"),Ke(e,t),this},p.beginTilingPattern=function(e){S("beginTilingPattern()"),yr(e.boundingBox[0],e.boundingBox[1],e.boundingBox[2]-e.boundingBox[0],e.boundingBox[3]-e.boundingBox[1],e.matrix)},p.endTilingPattern=function(e,t){S("endTilingPattern()"),t.stream=Y[z].join("\n"),Ke(e,t),Be.publish("endTilingPattern",t),We.pop().restore()};var Ye,Xe=p.__private__.newObject=function(){var e=Qe();return $e(e,!0),e},Qe=p.__private__.newObjectDeferred=function(){return W++,V[W]=function(){return G},W},$e=function(e,t){return t="boolean"==typeof t&&t,V[e]=G,t&&J(e+" 0 obj"),e},Je=p.__private__.newAdditionalObject=function(){var e={objId:Qe(),content:""};return K.push(e),e},Ze=Qe(),et=Qe(),tt=p.__private__.decodeColorString=function(e){var t=e.split(" ");if(2!==t.length||"g"!==t[1]&&"G"!==t[1])5!==t.length||"k"!==t[4]&&"K"!==t[4]||(t=[(1-t[0])*(1-t[3]),(1-t[1])*(1-t[3]),(1-t[2])*(1-t[3]),"r"]);else{var r=parseFloat(t[0]);t=[r,r,r,"r"]}for(var n="#",a=0;a<3;a++)n+=("0"+Math.floor(255*parseFloat(t[a])).toString(16)).slice(-2);return n},rt=p.__private__.encodeColorString=function(e){var t;"string"==typeof e&&(e={ch1:e});var r=e.ch1,a=e.ch2,s=e.ch3,i=e.ch4,o="draw"===e.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof r&&"#"!==r.charAt(0)){var l=new ce(r);if(l.ok)r=l.toHex();else if(!/^\d*\.?\d*$/.test(r))throw new Error('Invalid color "'+r+'" passed to jsPDF.encodeColorString.')}if("string"==typeof r&&/^#[0-9A-Fa-f]{3}$/.test(r)&&(r="#"+r[1]+r[1]+r[2]+r[2]+r[3]+r[3]),"string"==typeof r&&/^#[0-9A-Fa-f]{6}$/.test(r)){var c=parseInt(r.substr(1),16);r=c>>16&255,a=c>>8&255,s=255&c}if(void 0===a||void 0===i&&r===a&&a===s)if("string"==typeof r)t=r+" "+o[0];else if(2===e.precision)t=C(r/255)+" "+o[0];else t=E(r/255)+" "+o[0];else if(void 0===i||"object"===(0,n.A)(i)){if(i&&!isNaN(i.a)&&0===i.a)return["1.","1.","1.",o[1]].join(" ");if("string"==typeof r)t=[r,a,s,o[1]].join(" ");else if(2===e.precision)t=[C(r/255),C(a/255),C(s/255),o[1]].join(" ");else t=[E(r/255),E(a/255),E(s/255),o[1]].join(" ")}else if("string"==typeof r)t=[r,a,s,i,o[2]].join(" ");else if(2===e.precision)t=[C(r),C(a),C(s),C(i),o[2]].join(" ");else t=[E(r),E(a),E(s),E(i),o[2]].join(" ");return t},nt=p.__private__.getFilters=function(){return o},at=p.__private__.putStream=function(e){var t=(e=e||{}).data||"",r=e.filters||nt(),n=e.alreadyAppliedFilters||[],a=e.addLength1||!1,s=t.length,i=e.objectId,o=function(e){return e};if(null!==u&&void 0===i)throw new Error("ObjectId must be passed to putStream for file encryption");null!==u&&(o=Ot.encryptor(i,0));var l={};!0===r&&(r=["FlateEncode"]);var c=e.additionalKeyValues||[],d=(l=void 0!==De.API.processDataByFilters?De.API.processDataByFilters(t,r):{data:t,reverseChain:[]}).reverseChain+(Array.isArray(n)?n.join(" "):n.toString());if(0!==l.data.length&&(c.push({key:"Length",value:l.data.length}),!0===a&&c.push({key:"Length1",value:s})),0!=d.length)if(d.split("/").length-1==1)c.push({key:"Filter",value:d});else{c.push({key:"Filter",value:"["+d+"]"});for(var h=0;h<c.length;h+=1)if("DecodeParms"===c[h].key){for(var m=[],p=0;p<l.reverseChain.split("/").length-1;p+=1)m.push("null");m.push(c[h].value),c[h].value="["+m.join(" ")+"]"}}J("<<");for(var f=0;f<c.length;f++)J("/"+c[f].key+" "+c[f].value);J(">>"),0!==l.data.length&&(J("stream"),J(o(l.data)),J("endstream"))},st=p.__private__.putPage=function(e){var t=e.number,r=e.data,n=e.objId,a=e.contentsObjId;$e(n,!0),J("<</Type /Page"),J("/Parent "+e.rootDictionaryObjId+" 0 R"),J("/Resources "+e.resourceDictionaryObjId+" 0 R"),J("/MediaBox ["+parseFloat(k(e.mediaBox.bottomLeftX))+" "+parseFloat(k(e.mediaBox.bottomLeftY))+" "+k(e.mediaBox.topRightX)+" "+k(e.mediaBox.topRightY)+"]"),null!==e.cropBox&&J("/CropBox ["+k(e.cropBox.bottomLeftX)+" "+k(e.cropBox.bottomLeftY)+" "+k(e.cropBox.topRightX)+" "+k(e.cropBox.topRightY)+"]"),null!==e.bleedBox&&J("/BleedBox ["+k(e.bleedBox.bottomLeftX)+" "+k(e.bleedBox.bottomLeftY)+" "+k(e.bleedBox.topRightX)+" "+k(e.bleedBox.topRightY)+"]"),null!==e.trimBox&&J("/TrimBox ["+k(e.trimBox.bottomLeftX)+" "+k(e.trimBox.bottomLeftY)+" "+k(e.trimBox.topRightX)+" "+k(e.trimBox.topRightY)+"]"),null!==e.artBox&&J("/ArtBox ["+k(e.artBox.bottomLeftX)+" "+k(e.artBox.bottomLeftY)+" "+k(e.artBox.topRightX)+" "+k(e.artBox.topRightY)+"]"),"number"==typeof e.userUnit&&1!==e.userUnit&&J("/UserUnit "+e.userUnit),Be.publish("putPage",{objId:n,pageContext:Fe[t],pageNumber:t,page:r}),J("/Contents "+a+" 0 R"),J(">>"),J("endobj");var s=r.join("\n");return j===b&&(s+="\nQ"),$e(a,!0),at({data:s,filters:nt(),objectId:a}),J("endobj"),n},it=p.__private__.putPages=function(){var e,t,r=[];for(e=1;e<=Re;e++)Fe[e].objId=Qe(),Fe[e].contentsObjId=Qe();for(e=1;e<=Re;e++)r.push(st({number:e,data:Y[e],objId:Fe[e].objId,contentsObjId:Fe[e].contentsObjId,mediaBox:Fe[e].mediaBox,cropBox:Fe[e].cropBox,bleedBox:Fe[e].bleedBox,trimBox:Fe[e].trimBox,artBox:Fe[e].artBox,userUnit:Fe[e].userUnit,rootDictionaryObjId:Ze,resourceDictionaryObjId:et}));$e(Ze,!0),J("<</Type /Pages");var n="/Kids [";for(t=0;t<Re;t++)n+=r[t]+" 0 R ";J(n+"]"),J("/Count "+Re),J(">>"),J("endobj"),Be.publish("postPutPages")},ot=function(e){Be.publish("putFont",{font:e,out:J,newObject:Xe,putStream:at}),!0!==e.isAlreadyPutted&&(e.objectNumber=Xe(),J("<<"),J("/Type /Font"),J("/BaseFont /"+Ae(e.postScriptName)),J("/Subtype /Type1"),"string"==typeof e.encoding&&J("/Encoding /"+e.encoding),J("/FirstChar 32"),J("/LastChar 255"),J(">>"),J("endobj"))},lt=function(e){e.objectNumber=Xe();var t=[];t.push({key:"Type",value:"/XObject"}),t.push({key:"Subtype",value:"/Form"}),t.push({key:"BBox",value:"["+[k(e.x),k(e.y),k(e.x+e.width),k(e.y+e.height)].join(" ")+"]"}),t.push({key:"Matrix",value:"["+e.matrix.toString()+"]"});var r=e.pages[1].join("\n");at({data:r,additionalKeyValues:t,objectId:e.objectNumber}),J("endobj")},ct=function(e,t){t||(t=21);var r=Xe(),n=function(e,t){var r,n=[],a=1/(t-1);for(r=0;r<1;r+=a)n.push(r);if(n.push(1),0!=e[0].offset){var s={offset:0,color:e[0].color};e.unshift(s)}if(1!=e[e.length-1].offset){var i={offset:1,color:e[e.length-1].color};e.push(i)}for(var o="",l=0,c=0;c<n.length;c++){for(r=n[c];r>e[l+1].offset;)l++;var d=e[l].offset,u=(r-d)/(e[l+1].offset-d),h=e[l].color,m=e[l+1].color;o+=q(Math.round((1-u)*h[0]+u*m[0]).toString(16))+q(Math.round((1-u)*h[1]+u*m[1]).toString(16))+q(Math.round((1-u)*h[2]+u*m[2]).toString(16))}return o.trim()}(e.colors,t),a=[];a.push({key:"FunctionType",value:"0"}),a.push({key:"Domain",value:"[0.0 1.0]"}),a.push({key:"Size",value:"["+t+"]"}),a.push({key:"BitsPerSample",value:"8"}),a.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),a.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),at({data:n,additionalKeyValues:a,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:r}),J("endobj"),e.objectNumber=Xe(),J("<< /ShadingType "+e.type),J("/ColorSpace /DeviceRGB");var s="/Coords ["+k(parseFloat(e.coords[0]))+" "+k(parseFloat(e.coords[1]))+" ";2===e.type?s+=k(parseFloat(e.coords[2]))+" "+k(parseFloat(e.coords[3])):s+=k(parseFloat(e.coords[2]))+" "+k(parseFloat(e.coords[3]))+" "+k(parseFloat(e.coords[4]))+" "+k(parseFloat(e.coords[5])),J(s+="]"),e.matrix&&J("/Matrix ["+e.matrix.toString()+"]"),J("/Function "+r+" 0 R"),J("/Extend [true true]"),J(">>"),J("endobj")},dt=function(e,t){var r=Qe(),n=Xe();t.push({resourcesOid:r,objectOid:n}),e.objectNumber=n;var a=[];a.push({key:"Type",value:"/Pattern"}),a.push({key:"PatternType",value:"1"}),a.push({key:"PaintType",value:"1"}),a.push({key:"TilingType",value:"1"}),a.push({key:"BBox",value:"["+e.boundingBox.map(k).join(" ")+"]"}),a.push({key:"XStep",value:k(e.xStep)}),a.push({key:"YStep",value:k(e.yStep)}),a.push({key:"Resources",value:r+" 0 R"}),e.matrix&&a.push({key:"Matrix",value:"["+e.matrix.toString()+"]"}),at({data:e.stream,additionalKeyValues:a,objectId:e.objectNumber}),J("endobj")},ut=function(e){for(var t in e.objectNumber=Xe(),J("<<"),e)switch(t){case"opacity":J("/ca "+C(e[t]));break;case"stroke-opacity":J("/CA "+C(e[t]))}J(">>"),J("endobj")},ht=function(e){$e(e.resourcesOid,!0),J("<<"),J("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var e in J("/Font <<"),we)we.hasOwnProperty(e)&&(!1===h||!0===h&&m.hasOwnProperty(e))&&J("/"+e+" "+we[e].objectNumber+" 0 R");J(">>")}(),function(){if(Object.keys(ke).length>0){for(var e in J("/Shading <<"),ke)ke.hasOwnProperty(e)&&ke[e]instanceof Pe&&ke[e].objectNumber>=0&&J("/"+e+" "+ke[e].objectNumber+" 0 R");Be.publish("putShadingPatternDict"),J(">>")}}(),function(e){if(Object.keys(ke).length>0){for(var t in J("/Pattern <<"),ke)ke.hasOwnProperty(t)&&ke[t]instanceof p.TilingPattern&&ke[t].objectNumber>=0&&ke[t].objectNumber<e&&J("/"+t+" "+ke[t].objectNumber+" 0 R");Be.publish("putTilingPatternDict"),J(">>")}}(e.objectOid),function(){if(Object.keys(Ie).length>0){var e;for(e in J("/ExtGState <<"),Ie)Ie.hasOwnProperty(e)&&Ie[e].objectNumber>=0&&J("/"+e+" "+Ie[e].objectNumber+" 0 R");Be.publish("putGStateDict"),J(">>")}}(),function(){for(var e in J("/XObject <<"),Ue)Ue.hasOwnProperty(e)&&Ue[e].objectNumber>=0&&J("/"+e+" "+Ue[e].objectNumber+" 0 R");Be.publish("putXobjectDict"),J(">>")}(),J(">>"),J("endobj")},mt=function(){var e=[];(function(){for(var e in we)we.hasOwnProperty(e)&&(!1===h||!0===h&&m.hasOwnProperty(e))&&ot(we[e])})(),function(){var e;for(e in Ie)Ie.hasOwnProperty(e)&&ut(Ie[e])}(),function(){for(var e in Ue)Ue.hasOwnProperty(e)&&lt(Ue[e])}(),function(e){var t;for(t in ke)ke.hasOwnProperty(t)&&(ke[t]instanceof Pe?ct(ke[t]):ke[t]instanceof Oe&&dt(ke[t],e))}(e),Be.publish("putResources"),e.forEach(ht),ht({resourcesOid:et,objectOid:Number.MAX_SAFE_INTEGER}),Be.publish("postPutResources")},pt=function(e){Ne[e.fontName]=Ne[e.fontName]||{},Ne[e.fontName][e.fontStyle]=e.id},ft=function(e,t,r,n,a){var s={id:"F"+(Object.keys(we).length+1).toString(10),postScriptName:e,fontName:t,fontStyle:r,encoding:n,isStandardFont:a||!1,metadata:{}};return Be.publish("addFont",{font:s,instance:this}),we[s.id]=s,pt(s),s.id},gt=p.__private__.pdfEscape=p.pdfEscape=function(e,t){return function(e,t){var r,n,a,s,i,o,l,c,d;if(a=(t=t||{}).sourceEncoding||"Unicode",i=t.outputEncoding,(t.autoencode||i)&&we[xe].metadata&&we[xe].metadata[a]&&we[xe].metadata[a].encoding&&(s=we[xe].metadata[a].encoding,!i&&we[xe].encoding&&(i=we[xe].encoding),!i&&s.codePages&&(i=s.codePages[0]),"string"==typeof i&&(i=s[i]),i)){for(l=!1,o=[],r=0,n=e.length;r<n;r++)(c=i[e.charCodeAt(r)])?o.push(String.fromCharCode(c)):o.push(e[r]),o[r].charCodeAt(0)>>8&&(l=!0);e=o.join("")}for(r=e.length;void 0===l&&0!==r;)e.charCodeAt(r-1)>>8&&(l=!0),r--;if(!l)return e;for(o=t.noBOM?[]:[254,255],r=0,n=e.length;r<n;r++){if((d=(c=e.charCodeAt(r))>>8)>>8)throw new Error("Character at position "+r+" of string '"+e+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");o.push(d),o.push(c-(d<<8))}return String.fromCharCode.apply(void 0,o)}(e,t).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},xt=p.__private__.beginPage=function(e){Y[++Re]=[],Fe[Re]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(e[0]),topRightY:Number(e[1])}},bt(Re),$(Y[z])},yt=function(e,t){var n,a,i;switch(r=t||r,"string"==typeof e&&(n=y(e.toLowerCase()),Array.isArray(n)&&(a=n[0],i=n[1])),Array.isArray(e)&&(a=e[0]*ye,i=e[1]*ye),isNaN(a)&&(a=s[0],i=s[1]),(a>14400||i>14400)&&(re.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),a=Math.min(14400,a),i=Math.min(14400,i)),s=[a,i],r.substr(0,1)){case"l":i>a&&(s=[i,a]);break;case"p":a>i&&(s=[i,a])}xt(s),Jt(Qt),J(ir),0!==hr&&J(hr+" J"),0!==mr&&J(mr+" j"),Be.publish("addPage",{pageNumber:Re})},vt=function(e){e>0&&e<=Re&&(Y.splice(e,1),Fe.splice(e,1),Re--,z>Re&&(z=Re),this.setPage(z))},bt=function(e){e>0&&e<=Re&&(z=e)},jt=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return Y.length-1},wt=function(e,t,r){var n,a=void 0;return r=r||{},e=void 0!==e?e:we[xe].fontName,t=void 0!==t?t:we[xe].fontStyle,n=e.toLowerCase(),void 0!==Ne[n]&&void 0!==Ne[n][t]?a=Ne[n][t]:void 0!==Ne[e]&&void 0!==Ne[e][t]?a=Ne[e][t]:!1===r.disableWarning&&re.warn("Unable to look up font label for font '"+e+"', '"+t+"'. Refer to getFontList() for available fonts."),a||r.noFallback||null==(a=Ne.times[t])&&(a=Ne.times.normal),a},Nt=p.__private__.putInfo=function(){var e=Xe(),t=function(e){return e};for(var r in null!==u&&(t=Ot.encryptor(e,0)),J("<<"),J("/Producer ("+gt(t("jsPDF "+De.version))+")"),ge)ge.hasOwnProperty(r)&&ge[r]&&J("/"+r.substr(0,1).toUpperCase()+r.substr(1)+" ("+gt(t(ge[r]))+")");J("/CreationDate ("+gt(t(O))+")"),J(">>"),J("endobj")},_t=p.__private__.putCatalog=function(e){var t=(e=e||{}).rootDictionaryObjId||Ze;switch(Xe(),J("<<"),J("/Type /Catalog"),J("/Pages "+t+" 0 R"),se||(se="fullwidth"),se){case"fullwidth":J("/OpenAction [3 0 R /FitH null]");break;case"fullheight":J("/OpenAction [3 0 R /FitV null]");break;case"fullpage":J("/OpenAction [3 0 R /Fit]");break;case"original":J("/OpenAction [3 0 R /XYZ null null 1]");break;default:var r=""+se;"%"===r.substr(r.length-1)&&(se=parseInt(se)/100),"number"==typeof se&&J("/OpenAction [3 0 R /XYZ null null "+C(se)+"]")}switch(me||(me="continuous"),me){case"continuous":J("/PageLayout /OneColumn");break;case"single":J("/PageLayout /SinglePage");break;case"two":case"twoleft":J("/PageLayout /TwoColumnLeft");break;case"tworight":J("/PageLayout /TwoColumnRight")}ue&&J("/PageMode /"+ue),Be.publish("putCatalog"),J(">>"),J("endobj")},kt=p.__private__.putTrailer=function(){J("trailer"),J("<<"),J("/Size "+(W+1)),J("/Root "+W+" 0 R"),J("/Info "+(W-1)+" 0 R"),null!==u&&J("/Encrypt "+Ot.oid+" 0 R"),J("/ID [ <"+D+"> <"+D+"> ]"),J(">>")},St=p.__private__.putHeader=function(){J("%PDF-"+f),J("%\xba\xdf\xac\xe0")},At=p.__private__.putXRef=function(){var e="0000000000";J("xref"),J("0 "+(W+1)),J("0000000000 65535 f ");for(var t=1;t<=W;t++)"function"==typeof V[t]?J((e+V[t]()).slice(-10)+" 00000 n "):void 0!==V[t]?J((e+V[t]).slice(-10)+" 00000 n "):J("0000000000 00000 n ")},Ct=p.__private__.buildDocument=function(){W=0,G=0,H=[],V=[],K=[],Ze=Qe(),et=Qe(),$(H),Be.publish("buildDocument"),St(),it(),function(){Be.publish("putAdditionalObjects");for(var e=0;e<K.length;e++){var t=K[e];$e(t.objId,!0),J(t.content),J("endobj")}Be.publish("postPutAdditionalObjects")}(),mt(),null!==u&&(Ot.oid=Xe(),J("<<"),J("/Filter /Standard"),J("/V "+Ot.v),J("/R "+Ot.r),J("/U <"+Ot.toHexString(Ot.U)+">"),J("/O <"+Ot.toHexString(Ot.O)+">"),J("/P "+Ot.P),J(">>"),J("endobj")),Nt(),_t();var e=G;return At(),kt(),J("startxref"),J(""+e),J("%%EOF"),$(Y[z]),H.join("\n")},Et=p.__private__.getBlob=function(e){return new Blob([te(e)],{type:"application/pdf"})},Tt=p.output=p.__private__.output=(Ye=function(e,t){switch("string"==typeof(t=t||{})?t={filename:t}:t.filename=t.filename||"generated.pdf",e){case void 0:return Ct();case"save":p.save(t.filename);break;case"arraybuffer":return te(Ct());case"blob":return Et(Ct());case"bloburi":case"bloburl":if(void 0!==ee.URL&&"function"==typeof ee.URL.createObjectURL)return ee.URL&&ee.URL.createObjectURL(Et(Ct()))||void 0;re.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var r="",n=Ct();try{r=oe(n)}catch(e){r=oe(unescape(encodeURIComponent(n)))}return"data:application/pdf;filename="+t.filename+";base64,"+r;case"pdfobjectnewwindow":if("[object Window]"===Object.prototype.toString.call(ee)){var a="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",s=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';t.pdfObjectUrl&&(a=t.pdfObjectUrl,s="");var i='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+a+'"'+s+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(t)+");<\/script></body></html>",o=ee.open();return null!==o&&o.document.write(i),o}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if("[object Window]"===Object.prototype.toString.call(ee)){var l='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(t.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+t.filename+'" width="500px" height="400px" /></body></html>',c=ee.open();if(null!==c){c.document.write(l);var d=this;c.document.documentElement.querySelector("#pdfViewer").onload=function(){c.document.title=t.filename,c.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(d.output("bloburl"))}}return c}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(ee))throw new Error("The option dataurlnewwindow just works in a browser-environment.");var u='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",t)+'"></iframe></body></html>',h=ee.open();if(null!==h&&(h.document.write(u),h.document.title=t.filename),h||"undefined"==typeof safari)return h;break;case"datauri":case"dataurl":return ee.document.location.href=this.output("datauristring",t);default:return null}},Ye.foo=function(){try{return Ye.apply(this,arguments)}catch(Ye){var e=Ye.stack||"";~e.indexOf(" at ")&&(e=e.split(" at ")[1]);var t="Error in function "+e.split("\n")[0].split("<")[0]+": "+Ye.message;if(!ee.console)throw new Error(t);ee.console.error(t,Ye),ee.alert&&alert(t)}},Ye.foo.bar=Ye,Ye.foo),Pt=function(e){return!0===Array.isArray(ze)&&ze.indexOf(e)>-1};switch(a){case"pt":ye=1;break;case"mm":ye=72/25.4;break;case"cm":ye=72/2.54;break;case"in":ye=72;break;case"px":ye=1==Pt("px_scaling")?.75:96/72;break;case"pc":case"em":ye=12;break;case"ex":ye=6;break;default:if("number"!=typeof a)throw new Error("Invalid unit: "+a);ye=a}var Ot=null;F(),L();var Dt=p.__private__.getPageInfo=p.getPageInfo=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Fe[e].objId,pageNumber:e,pageContext:Fe[e]}},It=p.__private__.getPageInfoByObjId=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var t in Fe)if(Fe[t].objId===e)break;return Dt(t)},Lt=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Fe[z].objId,pageNumber:z,pageContext:Fe[z]}};p.addPage=function(){return yt.apply(this,arguments),this},p.setPage=function(){return bt.apply(this,arguments),$.call(this,Y[z]),this},p.insertPage=function(e){return this.addPage(),this.movePage(z,e),this},p.movePage=function(e,t){var r,n;if(e>t){r=Y[e],n=Fe[e];for(var a=e;a>t;a--)Y[a]=Y[a-1],Fe[a]=Fe[a-1];Y[t]=r,Fe[t]=n,this.setPage(t)}else if(e<t){r=Y[e],n=Fe[e];for(var s=e;s<t;s++)Y[s]=Y[s+1],Fe[s]=Fe[s+1];Y[t]=r,Fe[t]=n,this.setPage(t)}return this},p.deletePage=function(){return vt.apply(this,arguments),this},p.__private__.text=p.text=function(e,t,r,a,s){var i,o,l,c,d,u,h,p,f,g=(a=a||{}).scope||this;if("number"==typeof e&&"number"==typeof t&&("string"==typeof r||Array.isArray(r))){var x=r;r=t,t=e,e=x}if(arguments[3]instanceof Ve==0?(l=arguments[4],c=arguments[5],"object"===(0,n.A)(h=arguments[3])&&null!==h||("string"==typeof l&&(c=l,l=null),"string"==typeof h&&(c=h,h=null),"number"==typeof h&&(l=h,h=null),a={flags:h,angle:l,align:c})):(S("The transform parameter of text() with a Matrix value"),f=s),isNaN(t)||isNaN(r)||null==e)throw new Error("Invalid arguments passed to jsPDF.text");if(0===e.length)return g;var y,v="",w="number"==typeof a.lineHeightFactor?a.lineHeightFactor:Xt,N=g.internal.scaleFactor;function _(e){return e=e.split("\t").join(Array(a.TabLen||9).join(" ")),gt(e,h)}function A(e){for(var t,r=e.concat(),n=[],a=r.length;a--;)"string"==typeof(t=r.shift())?n.push(t):Array.isArray(e)&&(1===t.length||void 0===t[1]&&void 0===t[2])?n.push(t[0]):n.push([t[0],t[1],t[2]]);return n}function C(e,t){var r;if("string"==typeof e)r=t(e)[0];else if(Array.isArray(e)){for(var n,a,s=e.concat(),i=[],o=s.length;o--;)"string"==typeof(n=s.shift())?i.push(t(n)[0]):Array.isArray(n)&&"string"==typeof n[0]&&(a=t(n[0],n[1],n[2]),i.push([a[0],a[1],a[2]]));r=i}return r}var E=!1,P=!0;if("string"==typeof e)E=!0;else if(Array.isArray(e)){var O=e.concat();o=[];for(var D,I=O.length;I--;)("string"!=typeof(D=O.shift())||Array.isArray(D)&&"string"!=typeof D[0])&&(P=!1);E=P}if(!1===E)throw new Error('Type of text must be string or Array. "'+e+'" is not recognized.');"string"==typeof e&&(e=e.match(/[\r?\n]/)?e.split(/\r\n|\r|\n/g):[e]);var L=ae/g.internal.scaleFactor,M=L*(w-1);switch(a.baseline){case"bottom":r-=M;break;case"top":r+=L-M;break;case"hanging":r+=L-2*M;break;case"middle":r+=L/2-M}if((u=a.maxWidth||0)>0&&("string"==typeof e?e=g.splitTextToSize(e,u):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce(function(e,t){return e.concat(g.splitTextToSize(t,u))},[]))),i={text:e,x:t,y:r,options:a,mutex:{pdfEscape:gt,activeFontKey:xe,fonts:we,activeFontSize:ae}},Be.publish("preProcessText",i),e=i.text,l=(a=i.options).angle,f instanceof Ve==0&&l&&"number"==typeof l){l*=Math.PI/180,0===a.rotationDirection&&(l=-l),j===b&&(l=-l);var R=Math.cos(l),F=Math.sin(l);f=new Ve(R,F,-F,R,0,0)}else l&&l instanceof Ve&&(f=l);j!==b||f||(f=Ge),void 0!==(d=a.charSpace||dr)&&(v+=k(T(d))+" Tc\n",this.setCharSpace(this.getCharSpace()||0)),void 0!==(p=a.horizontalScale)&&(v+=k(100*p)+" Tz\n"),a.lang;var B=-1,z=void 0!==a.renderingMode?a.renderingMode:a.stroke,U=g.internal.getCurrentPageInfo().pageContext;switch(z){case 0:case!1:case"fill":B=0;break;case 1:case!0:case"stroke":B=1;break;case 2:case"fillThenStroke":B=2;break;case 3:case"invisible":B=3;break;case 4:case"fillAndAddForClipping":B=4;break;case 5:case"strokeAndAddPathForClipping":B=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":B=6;break;case 7:case"addToPathForClipping":B=7}var q=void 0!==U.usedRenderingMode?U.usedRenderingMode:-1;-1!==B?v+=B+" Tr\n":-1!==q&&(v+="0 Tr\n"),-1!==B&&(U.usedRenderingMode=B),c=a.align||"left";var W,V=ae*w,H=g.internal.pageSize.getWidth(),G=we[xe];d=a.charSpace||dr,u=a.maxWidth||0,h=Object.assign({autoencode:!0,noBOM:!0},a.flags);var K=[],Y=function(e){return g.getStringUnitWidth(e,{font:G,charSpace:d,fontSize:ae,doKerning:!1})*ae/N};if("[object Array]"===Object.prototype.toString.call(e)){var X;o=A(e),"left"!==c&&(W=o.map(Y));var Q,$=0;if("right"===c){t-=W[0],e=[],I=o.length;for(var Z=0;Z<I;Z++)0===Z?(Q=rr(t),X=nr(r)):(Q=T($-W[Z]),X=-V),e.push([o[Z],Q,X]),$=W[Z]}else if("center"===c){t-=W[0]/2,e=[],I=o.length;for(var ee=0;ee<I;ee++)0===ee?(Q=rr(t),X=nr(r)):(Q=T(($-W[ee])/2),X=-V),e.push([o[ee],Q,X]),$=W[ee]}else if("left"===c){e=[],I=o.length;for(var te=0;te<I;te++)e.push(o[te])}else if("justify"===c&&"Identity-H"===G.encoding){e=[],I=o.length,u=0!==u?u:H;for(var re=0,ne=0;ne<I;ne++)if(X=0===ne?nr(r):-V,Q=0===ne?rr(t):re,ne<I-1){var se=T((u-W[ne])/(o[ne].split(" ").length-1)),ie=o[ne].split(" ");e.push([ie[0]+" ",Q,X]),re=0;for(var oe=1;oe<ie.length;oe++){var le=(Y(ie[oe-1]+" "+ie[oe])-Y(ie[oe]))*N+se;oe==ie.length-1?e.push([ie[oe],le,0]):e.push([ie[oe]+" ",le,0]),re-=le}}else e.push([o[ne],Q,X]);e.push(["",re,0])}else{if("justify"!==c)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(e=[],I=o.length,u=0!==u?u:H,ne=0;ne<I;ne++)X=0===ne?nr(r):-V,Q=0===ne?rr(t):0,ne<I-1?K.push(k(T((u-W[ne])/(o[ne].split(" ").length-1)))):K.push(0),e.push([o[ne],Q,X])}}!0===("boolean"==typeof a.R2L?a.R2L:de)&&(e=C(e,function(e,t,r){return[e.split("").reverse().join(""),t,r]})),i={text:e,x:t,y:r,options:a,mutex:{pdfEscape:gt,activeFontKey:xe,fonts:we,activeFontSize:ae}},Be.publish("postProcessText",i),e=i.text,y=i.mutex.isHex||!1;var ce=we[xe].encoding;"WinAnsiEncoding"!==ce&&"StandardEncoding"!==ce||(e=C(e,function(e,t,r){return[_(e),t,r]})),o=A(e),e=[];for(var ue,he,me,pe=Array.isArray(o[0])?1:0,fe="",ge=function(e,t,r){var n="";return r instanceof Ve?(r="number"==typeof a.angle?He(r,new Ve(1,0,0,1,e,t)):He(new Ve(1,0,0,1,e,t),r),j===b&&(r=He(new Ve(1,0,0,-1,0,0),r)),n=r.join(" ")+" Tm\n"):n=k(e)+" "+k(t)+" Td\n",n},ye=0;ye<o.length;ye++){switch(fe="",pe){case 1:me=(y?"<":"(")+o[ye][0]+(y?">":")"),ue=parseFloat(o[ye][1]),he=parseFloat(o[ye][2]);break;case 0:me=(y?"<":"(")+o[ye]+(y?">":")"),ue=rr(t),he=nr(r)}void 0!==K&&void 0!==K[ye]&&(fe=K[ye]+" Tw\n"),0===ye?e.push(fe+ge(ue,he,f)+me):0===pe?e.push(fe+me):1===pe&&e.push(fe+ge(ue,he,f)+me)}e=0===pe?e.join(" Tj\nT* "):e.join(" Tj\n"),e+=" Tj\n";var ve="BT\n/";return ve+=xe+" "+ae+" Tf\n",ve+=k(ae*w)+" TL\n",ve+=lr+"\n",ve+=v,ve+=e,J(ve+="ET"),m[xe]=!0,g};var Mt=p.__private__.clip=p.clip=function(e){return J("evenodd"===e?"W*":"W"),this};p.clipEvenOdd=function(){return Mt("evenodd")},p.__private__.discardPath=p.discardPath=function(){return J("n"),this};var Rt=p.__private__.isValidStyle=function(e){var t=!1;return-1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(e)&&(t=!0),t};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(e){return Rt(e)&&(d=e),this};var Ft=p.__private__.getStyle=p.getStyle=function(e){var t=d;switch(e){case"D":case"S":t="S";break;case"F":t="f";break;case"FD":case"DF":t="B";break;case"f":case"f*":case"B":case"B*":t=e}return t},Bt=p.close=function(){return J("h"),this};p.stroke=function(){return J("S"),this},p.fill=function(e){return zt("f",e),this},p.fillEvenOdd=function(e){return zt("f*",e),this},p.fillStroke=function(e){return zt("B",e),this},p.fillStrokeEvenOdd=function(e){return zt("B*",e),this};var zt=function(e,t){"object"===(0,n.A)(t)?Wt(t,e):J(e)},Ut=function(e){null===e||j===b&&void 0===e||(e=Ft(e),J(e))};function qt(e,t,r,n,a){var s=new Oe(t||this.boundingBox,r||this.xStep,n||this.yStep,this.gState,a||this.matrix);s.stream=this.stream;var i=e+"$$"+this.cloneIndex+++"$$";return Ke(i,s),s}var Wt=function(e,t){var r=Te[e.key],n=ke[r];if(n instanceof Pe)J("q"),J(Vt(t)),n.gState&&p.setGState(n.gState),J(e.matrix.toString()+" cm"),J("/"+r+" sh"),J("Q");else if(n instanceof Oe){var a=new Ve(1,0,0,-1,0,wr());e.matrix&&(a=a.multiply(e.matrix||Ge),r=qt.call(n,e.key,e.boundingBox,e.xStep,e.yStep,a).id),J("q"),J("/Pattern cs"),J("/"+r+" scn"),n.gState&&p.setGState(n.gState),J(t),J("Q")}},Vt=function(e){switch(e){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Ht=p.moveTo=function(e,t){return J(k(T(e))+" "+k(P(t))+" m"),this},Gt=p.lineTo=function(e,t){return J(k(T(e))+" "+k(P(t))+" l"),this},Kt=p.curveTo=function(e,t,r,n,a,s){return J([k(T(e)),k(P(t)),k(T(r)),k(P(n)),k(T(a)),k(P(s)),"c"].join(" ")),this};p.__private__.line=p.line=function(e,t,r,n,a){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n)||!Rt(a))throw new Error("Invalid arguments passed to jsPDF.line");return j===v?this.lines([[r-e,n-t]],e,t,[1,1],a||"S"):this.lines([[r-e,n-t]],e,t,[1,1]).stroke()},p.__private__.lines=p.lines=function(e,t,r,n,a,s){var i,o,l,c,d,u,h,m,p,f,g,x;if("number"==typeof e&&(x=r,r=t,t=e,e=x),n=n||[1,1],s=s||!1,isNaN(t)||isNaN(r)||!Array.isArray(e)||!Array.isArray(n)||!Rt(a)||"boolean"!=typeof s)throw new Error("Invalid arguments passed to jsPDF.lines");for(Ht(t,r),i=n[0],o=n[1],c=e.length,f=t,g=r,l=0;l<c;l++)2===(d=e[l]).length?(f=d[0]*i+f,g=d[1]*o+g,Gt(f,g)):(u=d[0]*i+f,h=d[1]*o+g,m=d[2]*i+f,p=d[3]*o+g,f=d[4]*i+f,g=d[5]*o+g,Kt(u,h,m,p,f,g));return s&&Bt(),Ut(a),this},p.path=function(e){for(var t=0;t<e.length;t++){var r=e[t],n=r.c;switch(r.op){case"m":Ht(n[0],n[1]);break;case"l":Gt(n[0],n[1]);break;case"c":Kt.apply(this,n);break;case"h":Bt()}}return this},p.__private__.rect=p.rect=function(e,t,r,n,a){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n)||!Rt(a))throw new Error("Invalid arguments passed to jsPDF.rect");return j===v&&(n=-n),J([k(T(e)),k(P(t)),k(T(r)),k(T(n)),"re"].join(" ")),Ut(a),this},p.__private__.triangle=p.triangle=function(e,t,r,n,a,s,i){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n)||isNaN(a)||isNaN(s)||!Rt(i))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[r-e,n-t],[a-r,s-n],[e-a,t-s]],e,t,[1,1],i,!0),this},p.__private__.roundedRect=p.roundedRect=function(e,t,r,n,a,s,i){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n)||isNaN(a)||isNaN(s)||!Rt(i))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var o=4/3*(Math.SQRT2-1);return a=Math.min(a,.5*r),s=Math.min(s,.5*n),this.lines([[r-2*a,0],[a*o,0,a,s-s*o,a,s],[0,n-2*s],[0,s*o,-a*o,s,-a,s],[2*a-r,0],[-a*o,0,-a,-s*o,-a,-s],[0,2*s-n],[0,-s*o,a*o,-s,a,-s]],e+a,t,[1,1],i,!0),this},p.__private__.ellipse=p.ellipse=function(e,t,r,n,a){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n)||!Rt(a))throw new Error("Invalid arguments passed to jsPDF.ellipse");var s=4/3*(Math.SQRT2-1)*r,i=4/3*(Math.SQRT2-1)*n;return Ht(e+r,t),Kt(e+r,t-i,e+s,t-n,e,t-n),Kt(e-s,t-n,e-r,t-i,e-r,t),Kt(e-r,t+i,e-s,t+n,e,t+n),Kt(e+s,t+n,e+r,t+i,e+r,t),Ut(a),this},p.__private__.circle=p.circle=function(e,t,r,n){if(isNaN(e)||isNaN(t)||isNaN(r)||!Rt(n))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(e,t,r,r,n)},p.setFont=function(e,t,r){return r&&(t=_(t,r)),xe=wt(e,t,{disableWarning:!1}),this};var Yt=p.__private__.getFont=p.getFont=function(){return we[wt.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var e,t,r={};for(e in Ne)if(Ne.hasOwnProperty(e))for(t in r[e]=[],Ne[e])Ne[e].hasOwnProperty(t)&&r[e].push(t);return r},p.addFont=function(e,t,r,n,a){var s=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&-1!==s.indexOf(arguments[3])?a=arguments[3]:arguments[3]&&-1==s.indexOf(arguments[3])&&(r=_(r,n)),ft.call(this,e,t,r,a=a||"Identity-H")};var Xt,Qt=e.lineWidth||.200025,$t=p.__private__.getLineWidth=p.getLineWidth=function(){return Qt},Jt=p.__private__.setLineWidth=p.setLineWidth=function(e){return Qt=e,J(k(T(e))+" w"),this};p.__private__.setLineDash=De.API.setLineDash=De.API.setLineDashPattern=function(e,t){if(e=e||[],t=t||0,isNaN(t)||!Array.isArray(e))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return e=e.map(function(e){return k(T(e))}).join(" "),t=k(T(t)),J("["+e+"] "+t+" d"),this};var Zt=p.__private__.getLineHeight=p.getLineHeight=function(){return ae*Xt};p.__private__.getLineHeight=p.getLineHeight=function(){return ae*Xt};var er=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(e){return"number"==typeof(e=e||1.15)&&(Xt=e),this},tr=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return Xt};er(e.lineHeight);var rr=p.__private__.getHorizontalCoordinate=function(e){return T(e)},nr=p.__private__.getVerticalCoordinate=function(e){return j===b?e:Fe[z].mediaBox.topRightY-Fe[z].mediaBox.bottomLeftY-T(e)},ar=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(e){return k(rr(e))},sr=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(e){return k(nr(e))},ir=e.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return tt(ir)},p.__private__.setStrokeColor=p.setDrawColor=function(e,t,r,n){return ir=rt({ch1:e,ch2:t,ch3:r,ch4:n,pdfColorType:"draw",precision:2}),J(ir),this};var or=e.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return tt(or)},p.__private__.setFillColor=p.setFillColor=function(e,t,r,n){return or=rt({ch1:e,ch2:t,ch3:r,ch4:n,pdfColorType:"fill",precision:2}),J(or),this};var lr=e.textColor||"0 g",cr=p.__private__.getTextColor=p.getTextColor=function(){return tt(lr)};p.__private__.setTextColor=p.setTextColor=function(e,t,r,n){return lr=rt({ch1:e,ch2:t,ch3:r,ch4:n,pdfColorType:"text",precision:3}),this};var dr=e.charSpace,ur=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(dr||0)};p.__private__.setCharSpace=p.setCharSpace=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return dr=e,this};var hr=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(e){var t=p.CapJoinStyles[e];if(void 0===t)throw new Error("Line cap style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return hr=t,J(t+" J"),this};var mr=0;p.__private__.setLineJoin=p.setLineJoin=function(e){var t=p.CapJoinStyles[e];if(void 0===t)throw new Error("Line join style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return mr=t,J(t+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(e){if(e=e||0,isNaN(e))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return J(k(T(e))+" M"),this},p.GState=Ee,p.setGState=function(e){(e="string"==typeof e?Ie[Le[e]]:pr(null,e)).equals(Me)||(J("/"+e.id+" gs"),Me=e)};var pr=function(e,t){if(!e||!Le[e]){var r=!1;for(var n in Ie)if(Ie.hasOwnProperty(n)&&Ie[n].equals(t)){r=!0;break}if(r)t=Ie[n];else{var a="GS"+(Object.keys(Ie).length+1).toString(10);Ie[a]=t,t.id=a}return e&&(Le[e]=t.id),Be.publish("addGState",t),t}};p.addGState=function(e,t){return pr(e,t),this},p.saveGraphicsState=function(){return J("q"),_e.push({key:xe,size:ae,color:lr}),this},p.restoreGraphicsState=function(){J("Q");var e=_e.pop();return xe=e.key,ae=e.size,lr=e.color,Me=null,this},p.setCurrentTransformationMatrix=function(e){return J(e.toString()+" cm"),this},p.comment=function(e){return J("#"+e),this};var fr=function(e,t){var r=e||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return r},set:function(e){isNaN(e)||(r=parseFloat(e))}});var n=t||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return n},set:function(e){isNaN(e)||(n=parseFloat(e))}});var a="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return a},set:function(e){a=e.toString()}}),this},gr=function(e,t,r,n){fr.call(this,e,t),this.type="rect";var a=r||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return a},set:function(e){isNaN(e)||(a=parseFloat(e))}});var s=n||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return s},set:function(e){isNaN(e)||(s=parseFloat(e))}}),this},xr=function(){this.page=Re,this.currentPage=z,this.pages=Y.slice(0),this.pagesContext=Fe.slice(0),this.x=ve,this.y=be,this.matrix=je,this.width=br(z),this.height=wr(z),this.outputDestination=Q,this.id="",this.objectNumber=-1};xr.prototype.restore=function(){Re=this.page,z=this.currentPage,Fe=this.pagesContext,Y=this.pages,ve=this.x,be=this.y,je=this.matrix,jr(z,this.width),Nr(z,this.height),Q=this.outputDestination};var yr=function(e,t,r,n,a){We.push(new xr),Re=z=0,Y=[],ve=e,be=t,je=a,xt([r,n])};for(var vr in p.beginFormObject=function(e,t,r,n,a){return yr(e,t,r,n,a),this},p.endFormObject=function(e){return function(e){if(qe[e])We.pop().restore();else{var t=new xr,r="Xo"+(Object.keys(Ue).length+1).toString(10);t.id=r,qe[e]=r,Ue[r]=t,Be.publish("addFormObject",t),We.pop().restore()}}(e),this},p.doFormObject=function(e,t){var r=Ue[qe[e]];return J("q"),J(t.toString()+" cm"),J("/"+r.id+" Do"),J("Q"),this},p.getFormObject=function(e){var t=Ue[qe[e]];return{x:t.x,y:t.y,width:t.width,height:t.height,matrix:t.matrix}},p.save=function(e,t){return e=e||"generated.pdf",(t=t||{}).returnPromise=t.returnPromise||!1,!1===t.returnPromise?(le(Et(Ct()),e),"function"==typeof le.unload&&ee.setTimeout&&setTimeout(le.unload,911),this):new Promise(function(t,r){try{var n=le(Et(Ct()),e);"function"==typeof le.unload&&ee.setTimeout&&setTimeout(le.unload,911),t(n)}catch(e){r(e.message)}})},De.API)De.API.hasOwnProperty(vr)&&("events"===vr&&De.API.events.length?function(e,t){var r,n,a;for(a=t.length-1;-1!==a;a--)r=t[a][0],n=t[a][1],e.subscribe.apply(e,[r].concat("function"==typeof n?[n]:n))}(Be,De.API.events):p[vr]=De.API[vr]);var br=p.getPageWidth=function(e){return(Fe[e=e||z].mediaBox.topRightX-Fe[e].mediaBox.bottomLeftX)/ye},jr=p.setPageWidth=function(e,t){Fe[e].mediaBox.topRightX=t*ye+Fe[e].mediaBox.bottomLeftX},wr=p.getPageHeight=function(e){return(Fe[e=e||z].mediaBox.topRightY-Fe[e].mediaBox.bottomLeftY)/ye},Nr=p.setPageHeight=function(e,t){Fe[e].mediaBox.topRightY=t*ye+Fe[e].mediaBox.bottomLeftY};return p.internal={pdfEscape:gt,getStyle:Ft,getFont:Yt,getFontSize:ie,getCharSpace:ur,getTextColor:cr,getLineHeight:Zt,getLineHeightFactor:tr,getLineWidth:$t,write:Z,getHorizontalCoordinate:rr,getVerticalCoordinate:nr,getCoordinateString:ar,getVerticalCoordinateString:sr,collections:{},newObject:Xe,newAdditionalObject:Je,newObjectDeferred:Qe,newObjectDeferredBegin:$e,getFilters:nt,putStream:at,events:Be,scaleFactor:ye,pageSize:{getWidth:function(){return br(z)},setWidth:function(e){jr(z,e)},getHeight:function(){return wr(z)},setHeight:function(e){Nr(z,e)}},encryptionOptions:u,encryption:Ot,getEncryptor:function(e){return null!==u?Ot.encryptor(e,0):function(e){return e}},output:Tt,getNumberOfPages:jt,pages:Y,out:J,f2:C,f3:E,getPageInfo:Dt,getPageInfoByObjId:It,getCurrentPageInfo:Lt,getPDFVersion:g,Point:fr,Rectangle:gr,Matrix:Ve,hasHotfix:Pt},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return br(z)},set:function(e){jr(z,e)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return wr(z)},set:function(e){Nr(z,e)},enumerable:!0,configurable:!0}),function(e){for(var t=0,r=ne.length;t<r;t++){var n=ft.call(this,e[t][0],e[t][1],e[t][2],ne[t][3],!0);!1===h&&(m[n]=!0);var a=e[t][0].split("-");pt({id:n,fontName:a[0],fontStyle:a[1]||""})}Be.publish("addFonts",{fonts:we,dictionary:Ne})}.call(p,ne),xe="F1",yt(s,r),Be.publish("initialized"),p}Se.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},Se.prototype.toHexString=function(e){return e.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Se.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},Se.prototype.processOwnerPassword=function(e,t){return _e(je(t).substr(0,5),e)},Se.prototype.encryptor=function(e,t){var r=je(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(e){return _e(r,e)}},Ee.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||(0,n.A)(e)!==(0,n.A)(this))return!1;var a=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t))return!1;if(this[t]!==e[t])return!1;a++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&a--;return 0===a},De.API={events:[]},De.version="2.5.2";var Ie=De.API,Le=1,Me=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Re=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Fe=function(e){return e.toFixed(2)},Be=function(e){return e.toFixed(5)};Ie.__acroform__={};var ze=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},Ue=function(e){return e*Le},qe=function(e){var t=new st,r=vt.internal.getHeight(e)||0,n=vt.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Fe(n)),Number(Fe(r))],t},We=Ie.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},Ve=Ie.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},He=Ie.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return 0==(e&1<<t)?0:1},Ge=Ie.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return He(e,t-1)},Ke=Ie.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return We(e,t-1)},Ye=Ie.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Ve(e,t-1)},Xe=Ie.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,a=e[0],s=e[1],i=e[2],o=e[3],l={};return l.lowerLeft_X=r(a)||0,l.lowerLeft_Y=n(s+o)||0,l.upperRight_X=r(a+i)||0,l.upperRight_Y=n(s)||0,[Number(Fe(l.lowerLeft_X)),Number(Fe(l.lowerLeft_Y)),Number(Fe(l.upperRight_X)),Number(Fe(l.upperRight_Y))]},Qe=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=$e(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+Fe(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=qe(e);return s.scope=e.scope,s.stream=t.join("\n"),s}},$e=function(e,t){var r=0===e.fontSize?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},a=(t=")"==(t="("==t.substr(0,1)?t.substr(1):t).substr(t.length-1)?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(e){return e.split("\n")}):a.map(function(e){return[e]});var s=r,i=vt.internal.getHeight(e)||0;i=i<0?-i:i;var o=vt.internal.getWidth(e)||0;o=o<0?-o:o;var l=function(t,r,n){if(t+1<a.length){var s=r+" "+a[t+1][0];return Je(s,e,n).width<=o-4}return!1};s++;e:for(;s>0;){t="",s--;var c,d,u=Je("3",e,s).height,h=e.multiline?i-s:(i-u)/2,m=h+=2,p=0,f=0,g=0;if(s<=0){t="(...) Tj\n",t+="% Width of Text: "+Je(t,e,s=12).width+", FieldWidth:"+o+"\n";break}for(var x="",y=0,v=0;v<a.length;v++)if(a.hasOwnProperty(v)){var b=!1;if(1!==a[v].length&&g!==a[v].length-1){if((u+2)*(y+2)+2>i)continue e;x+=a[v][g],b=!0,f=v,v--}else{x=" "==(x+=a[v][g]+" ").substr(x.length-1)?x.substr(0,x.length-1):x;var j=parseInt(v),w=l(j,x,s),N=v>=a.length-1;if(w&&!N){x+=" ",g=0;continue}if(w||N){if(N)f=j;else if(e.multiline&&(u+2)*(y+2)+2>i)continue e}else{if(!e.multiline)continue e;if((u+2)*(y+2)+2>i)continue e;f=j}}for(var _="",k=p;k<=f;k++){var S=a[k];if(e.multiline){if(k===f){_+=S[g]+" ",g=(g+1)%S.length;continue}if(k===p){_+=S[S.length-1]+" ";continue}}_+=S[0]+" "}switch(_=" "==_.substr(_.length-1)?_.substr(0,_.length-1):_,d=Je(_,e,s).width,e.textAlign){case"right":c=o-d-2;break;case"center":c=(o-d)/2;break;default:c=2}t+=Fe(c)+" "+Fe(m)+" Td\n",t+="("+Me(_)+") Tj\n",t+=-Fe(c)+" 0 Td\n",m=-(s+2),d=0,p=b?f:f+1,y++,x=""}break}return n.text=t,n.fontSize=s,n},Je=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},Ze={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},et=function(e,t){var r={type:"reference",object:e};void 0===t.internal.getPageInfo(e.page).pageContext.annotations.find(function(e){return e.type===r.type&&e.object===r.object})&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},tt=function(e,t){if(t.scope=e,void 0!==e.internal&&(void 0===e.internal.acroformPlugin||!1===e.internal.acroformPlugin.isInitialized)){if(ot.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(Ze)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Le=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new it,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){var t;(t=e).internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0}),e.internal.events.subscribe("buildDocument",function(){!function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var t=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var r in t)if(t.hasOwnProperty(r)){var n=t[r];n.objId=void 0,n.hasAnnotation&&et(n,e)}}(e)}),e.internal.events.subscribe("putCatalog",function(){!function(e){if(void 0===e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")}(e)}),e.internal.events.subscribe("postPutPages",function(t){!function(e,t){var r=!e;for(var a in e||(t.internal.newObjectDeferredBegin(t.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),t.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),e=e||t.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(e.hasOwnProperty(a)){var s=e[a],i=[],o=s.Rect;if(s.Rect&&(s.Rect=Xe(s.Rect,t)),t.internal.newObjectDeferredBegin(s.objId,!0),s.DA=vt.createDefaultAppearanceStream(s),"object"===(0,n.A)(s)&&"function"==typeof s.getKeyValueListForStream&&(i=s.getKeyValueListForStream()),s.Rect=o,s.hasAppearanceStream&&!s.appearanceStreamContent){var l=Qe(s);i.push({key:"AP",value:"<</N "+l+">>"}),t.internal.acroformPlugin.xForms.push(l)}if(s.appearanceStreamContent){var c="";for(var d in s.appearanceStreamContent)if(s.appearanceStreamContent.hasOwnProperty(d)){var u=s.appearanceStreamContent[d];if(c+="/"+d+" ",c+="<<",Object.keys(u).length>=1||Array.isArray(u)){for(var a in u)if(u.hasOwnProperty(a)){var h=u[a];"function"==typeof h&&(h=h.call(t,s)),c+="/"+a+" "+h+" ",t.internal.acroformPlugin.xForms.indexOf(h)>=0||t.internal.acroformPlugin.xForms.push(h)}}else"function"==typeof(h=u)&&(h=h.call(t,s)),c+="/"+a+" "+h,t.internal.acroformPlugin.xForms.indexOf(h)>=0||t.internal.acroformPlugin.xForms.push(h);c+=">>"}i.push({key:"AP",value:"<<\n"+c+">>"})}t.internal.putStream({additionalKeyValues:i,objectId:s.objId}),t.internal.out("endobj")}r&&function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var a=r,s=e[r];t.internal.newObjectDeferredBegin(s.objId,!0),"object"===(0,n.A)(s)&&"function"==typeof s.putStream&&s.putStream(),delete e[a]}}(t.internal.acroformPlugin.xForms,t)}(t,e)}),e.internal.acroformPlugin.isInitialized=!0}},rt=Ie.__acroform__.arrayToPdfArray=function(e,t,r){var a=function(e){return e};if(Array.isArray(e)){for(var s="[",i=0;i<e.length;i++)switch(0!==i&&(s+=" "),(0,n.A)(e[i])){case"boolean":case"number":case"object":s+=e[i].toString();break;case"string":"/"!==e[i].substr(0,1)?(void 0!==t&&r&&(a=r.internal.getEncryptor(t)),s+="("+Me(a(e[i].toString()))+")"):s+=e[i].toString()}return s+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},nt=function(e,t,r){var n=function(e){return e};return void 0!==t&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),"("+Me(n(e))+")"},at=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(void 0===this._objId){if(void 0===this.scope)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};at.prototype.toString=function(){return this.objId+" 0 R"},at.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},at.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(e){return"content"!=e&&"appearanceStreamContent"!=e&&"scope"!=e&&"objId"!=e&&"_"!=e.substring(0,1)});for(var r in t)if(!1===Object.getOwnPropertyDescriptor(this,t[r]).configurable){var n=t[r],a=this[n];a&&(Array.isArray(a)?e.push({key:n,value:rt(a,this.objId,this.scope)}):a instanceof at?(a.scope=this.scope,e.push({key:n,value:a.objId+" 0 R"})):"function"!=typeof a&&e.push({key:n,value:a}))}return e};var st=function(){at.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){e=t.trim()},get:function(){return e||null}})};ze(st,at);var it=function(){at.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Me(t(e))+")"}},set:function(t){e=t}})};ze(it,at);var ot=function e(){at.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute F supplied.');t=e}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(t,3))},set:function(e){!0===Boolean(e)?this.F=Ke(t,3):this.F=Ye(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute Ff supplied.');r=e}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==n.length)return n},set:function(e){n=void 0!==e?e:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(e){n[0]=e}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(e){n[1]=e}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(e){n[2]=e}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(e){n[3]=e}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(e){switch(e){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=e;break;default:throw new Error('Invalid value "'+e+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof ft)return;s="FieldObject"+e.FieldNum++}var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Me(t(s))+")"},set:function(e){s=e.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(e){s=e}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(e){i=e}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(e){o=e}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(e){l=e}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return void 0===c?50/Le:c},set:function(e){c=e}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(e){d=e}});var u="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!u||this instanceof ft||this instanceof xt))return nt(u,this.objId,this.scope)},set:function(e){e=e.toString(),u=e}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof ht==0?nt(h,this.objId,this.scope):h},set:function(e){e=e.toString(),h=this instanceof ht==0?"("===e.substr(0,1)?Re(e.substr(1,e.length-2)):Re(e):e}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ht==1?Re(h.substr(1,h.length-1)):h},set:function(e){e=e.toString(),h=this instanceof ht==1?"/"+e:e}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(e){this.V=e}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof ht==0?nt(m,this.objId,this.scope):m},set:function(e){e=e.toString(),m=this instanceof ht==0?"("===e.substr(0,1)?Re(e.substr(1,e.length-2)):Re(e):e}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ht==1?Re(m.substr(1,m.length-1)):m},set:function(e){e=e.toString(),m=this instanceof ht==1?"/"+e:e}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var p,f=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return f},set:function(e){e=Boolean(e),f=e}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(p)return p},set:function(e){p=e}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,1))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,1):this.Ff=Ye(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,2))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,2):this.Ff=Ye(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,3))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,3):this.Ff=Ye(this.Ff,3)}});var g=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==g)return g},set:function(e){if(-1===[0,1,2].indexOf(e))throw new Error('Invalid value "'+e+'" for attribute Q supplied.');g=e}}),Object.defineProperty(this,"textAlign",{get:function(){var e;switch(g){case 0:default:e="left";break;case 1:e="center";break;case 2:e="right"}return e},configurable:!0,enumerable:!0,set:function(e){switch(e){case"right":case 2:g=2;break;case"center":case 1:g=1;break;default:g=0}}})};ze(ot,at);var lt=function(){ot.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){e=t}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return rt(t,this.objId,this.scope)},set:function(e){var r,n;n=[],"string"==typeof(r=e)&&(n=function(e,t,r){r||(r=1);for(var n,a=[];n=t.exec(e);)a.push(n[r]);return a}(r,/\((.*?)\)/g)),t=n}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,r){for(r=r||!1,e=(e=e||"").toString();-1!==t.indexOf(e)&&(t.splice(t.indexOf(e),1),!1!==r););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,18))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,18):this.Ff=Ye(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,19))},set:function(e){!0===this.combo&&(!0===Boolean(e)?this.Ff=Ke(this.Ff,19):this.Ff=Ye(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,20))},set:function(e){!0===Boolean(e)?(this.Ff=Ke(this.Ff,20),t.sort()):this.Ff=Ye(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,22))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,22):this.Ff=Ye(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,23):this.Ff=Ye(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,27))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,27):this.Ff=Ye(this.Ff,27)}}),this.hasAppearanceStream=!1};ze(lt,ot);var ct=function(){lt.call(this),this.fontName="helvetica",this.combo=!1};ze(ct,lt);var dt=function(){ct.call(this),this.combo=!0};ze(dt,ct);var ut=function(){dt.call(this),this.edit=!0};ze(ut,dt);var ht=function(){ot.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,15))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,15):this.Ff=Ye(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,16))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,16):this.Ff=Ye(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,17))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,17):this.Ff=Ye(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,26):this.Ff=Ye(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),0!==Object.keys(t).length){var r,n=[];for(r in n.push("<<"),t)n.push("/"+r+" ("+Me(e(t[r]))+")");return n.push(">>"),n.join("\n")}},set:function(e){"object"===(0,n.A)(e)&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){"string"==typeof e&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(t){e="/"+t}})};ze(ht,ot);var mt=function(){ht.call(this),this.pushButton=!0};ze(mt,ht);var pt=function(){ht.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=void 0!==t?t:[]}})};ze(pt,ht);var ft=function(){var e,t;ot.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(e){t=e}});var r,a={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};this.scope&&(e=this.scope.internal.getEncryptor(this.objId));var t,r=[];for(t in r.push("<<"),a)r.push("/"+t+" ("+Me(e(a[t]))+")");return r.push(">>"),r.join("\n")},set:function(e){"object"===(0,n.A)(e)&&(a=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return a.CA||""},set:function(e){"string"==typeof e&&(a.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(e){r="/"+e}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=vt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ze(ft,ot),pt.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},pt.prototype.createOption=function(e){var t=new ft;return t.Parent=this,t.optionName=e,this.Kids.push(t),bt.call(this.scope,t),t};var gt=function(){ht.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=vt.CheckBox.createAppearanceStream()};ze(gt,ht);var xt=function(){ot.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,13))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,13):this.Ff=Ye(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,21))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,21):this.Ff=Ye(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,23):this.Ff=Ye(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,24))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,24):this.Ff=Ye(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,25))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,25):this.Ff=Ye(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,26):this.Ff=Ye(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ze(xt,ot);var yt=function(){xt.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,14))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,14):this.Ff=Ye(this.Ff,14)}}),this.password=!0};ze(yt,xt);var vt={CheckBox:{createAppearanceStream:function(){return{N:{On:vt.CheckBox.YesNormal},D:{On:vt.CheckBox.YesPushDown,Off:vt.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=qe(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),s=$e(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+Fe(vt.internal.getWidth(e))+" "+Fe(vt.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Fe(s.fontSize)+" Tf "+a),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join("\n"),t},YesNormal:function(e){var t=qe(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),a=[],s=vt.internal.getHeight(e),i=vt.internal.getWidth(e),o=$e(e,e.caption);return a.push("1 g"),a.push("0 0 "+Fe(i)+" "+Fe(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+Fe(i-1)+" "+Fe(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+Fe(o.fontSize)+" Tf "+n),a.push(o.text),a.push("ET"),a.push("Q"),t.stream=a.join("\n"),t},OffPushDown:function(e){var t=qe(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Fe(vt.internal.getWidth(e))+" "+Fe(vt.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join("\n"),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:vt.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=vt.RadioButton.Circle.YesNormal,t.D[e]=vt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=qe(e);t.scope=e.scope;var r=[],n=vt.internal.getWidth(e)<=vt.internal.getHeight(e)?vt.internal.getWidth(e)/4:vt.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=vt.internal.Bezier_C,s=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Be(vt.internal.getWidth(e)/2)+" "+Be(vt.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join("\n"),t},YesPushDown:function(e){var t=qe(e);t.scope=e.scope;var r=[],n=vt.internal.getWidth(e)<=vt.internal.getHeight(e)?vt.internal.getWidth(e)/4:vt.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*vt.internal.Bezier_C).toFixed(5)),i=Number((n*vt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Be(vt.internal.getWidth(e)/2)+" "+Be(vt.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Be(vt.internal.getWidth(e)/2)+" "+Be(vt.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join("\n"),t},OffPushDown:function(e){var t=qe(e);t.scope=e.scope;var r=[],n=vt.internal.getWidth(e)<=vt.internal.getHeight(e)?vt.internal.getWidth(e)/4:vt.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*vt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Be(vt.internal.getWidth(e)/2)+" "+Be(vt.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join("\n"),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:vt.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=vt.RadioButton.Cross.YesNormal,t.D[e]=vt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=qe(e);t.scope=e.scope;var r=[],n=vt.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+Fe(vt.internal.getWidth(e)-2)+" "+Fe(vt.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Fe(n.x1.x)+" "+Fe(n.x1.y)+" m"),r.push(Fe(n.x2.x)+" "+Fe(n.x2.y)+" l"),r.push(Fe(n.x4.x)+" "+Fe(n.x4.y)+" m"),r.push(Fe(n.x3.x)+" "+Fe(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join("\n"),t},YesPushDown:function(e){var t=qe(e);t.scope=e.scope;var r=vt.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+Fe(vt.internal.getWidth(e))+" "+Fe(vt.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Fe(vt.internal.getWidth(e)-2)+" "+Fe(vt.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Fe(r.x1.x)+" "+Fe(r.x1.y)+" m"),n.push(Fe(r.x2.x)+" "+Fe(r.x2.y)+" l"),n.push(Fe(r.x4.x)+" "+Fe(r.x4.y)+" m"),n.push(Fe(r.x3.x)+" "+Fe(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join("\n"),t},OffPushDown:function(e){var t=qe(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Fe(vt.internal.getWidth(e))+" "+Fe(vt.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join("\n"),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};vt.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=vt.internal.getWidth(e),r=vt.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},vt.internal.getWidth=function(e){var t=0;return"object"===(0,n.A)(e)&&(t=Ue(e.Rect[2])),t},vt.internal.getHeight=function(e){var t=0;return"object"===(0,n.A)(e)&&(t=Ue(e.Rect[3])),t};var bt=Ie.addField=function(e){if(tt(this,e),!(e instanceof ot))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Ie.AcroFormChoiceField=lt,Ie.AcroFormListBox=ct,Ie.AcroFormComboBox=dt,Ie.AcroFormEditBox=ut,Ie.AcroFormButton=ht,Ie.AcroFormPushButton=mt,Ie.AcroFormRadioButton=pt,Ie.AcroFormCheckBox=gt,Ie.AcroFormTextField=xt,Ie.AcroFormPasswordField=yt,Ie.AcroFormAppearance=vt,Ie.AcroForm={ChoiceField:lt,ListBox:ct,ComboBox:dt,EditBox:ut,Button:ht,PushButton:mt,RadioButton:pt,CheckBox:gt,TextField:xt,PasswordField:yt,Appearance:vt},De.AcroForm={ChoiceField:lt,ListBox:ct,ComboBox:dt,EditBox:ut,Button:ht,PushButton:mt,RadioButton:pt,CheckBox:gt,TextField:xt,PasswordField:yt,Appearance:vt};var jt=De.AcroForm;function wt(e){return e.reduce(function(e,t,r){return e[t]=r,e},{})}!function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=e.__addimage__.getImageFileTypeByImageData=function(e,n){var a,s,i,o,l,c=t;if("RGBA"===(n=n||t)||void 0!==e.data&&e.data instanceof Uint8ClampedArray&&"height"in e&&"width"in e)return"RGBA";if(N(e))for(l in r)for(i=r[l],a=0;a<i.length;a+=1){for(o=!0,s=0;s<i[a].length;s+=1)if(void 0!==i[a][s]&&i[a][s]!==e[s]){o=!1;break}if(!0===o){c=l;break}}else for(l in r)for(i=r[l],a=0;a<i.length;a+=1){for(o=!0,s=0;s<i[a].length;s+=1)if(void 0!==i[a][s]&&i[a][s]!==e.charCodeAt(s)){o=!1;break}if(!0===o){c=l;break}}return c===t&&n!==t&&(c=n),c},s=function e(t){for(var r=this.internal.write,n=this.internal.putStream,a=(0,this.internal.getFilters)();-1!==a.indexOf("FlateEncode");)a.splice(a.indexOf("FlateEncode"),1);t.objectId=this.internal.newObject();var s=[];if(s.push({key:"Type",value:"/XObject"}),s.push({key:"Subtype",value:"/Image"}),s.push({key:"Width",value:t.width}),s.push({key:"Height",value:t.height}),t.colorSpace===x.INDEXED?s.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(t.palette.length/3-1)+" "+("sMask"in t&&void 0!==t.sMask?t.objectId+2:t.objectId+1)+" 0 R]"}):(s.push({key:"ColorSpace",value:"/"+t.colorSpace}),t.colorSpace===x.DEVICE_CMYK&&s.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),s.push({key:"BitsPerComponent",value:t.bitsPerComponent}),"decodeParameters"in t&&void 0!==t.decodeParameters&&s.push({key:"DecodeParms",value:"<<"+t.decodeParameters+">>"}),"transparency"in t&&Array.isArray(t.transparency)){for(var i="",o=0,l=t.transparency.length;o<l;o++)i+=t.transparency[o]+" "+t.transparency[o]+" ";s.push({key:"Mask",value:"["+i+"]"})}void 0!==t.sMask&&s.push({key:"SMask",value:t.objectId+1+" 0 R"});var c=void 0!==t.filter?["/"+t.filter]:void 0;if(n({data:t.data,additionalKeyValues:s,alreadyAppliedFilters:c,objectId:t.objectId}),r("endobj"),"sMask"in t&&void 0!==t.sMask){var d="/Predictor "+t.predictor+" /Colors 1 /BitsPerComponent "+t.bitsPerComponent+" /Columns "+t.width,u={width:t.width,height:t.height,colorSpace:"DeviceGray",bitsPerComponent:t.bitsPerComponent,decodeParameters:d,data:t.sMask};"filter"in t&&(u.filter=t.filter),e.call(this,u)}if(t.colorSpace===x.INDEXED){var h=this.internal.newObject();n({data:k(new Uint8Array(t.palette)),objectId:h}),r("endobj")}},i=function(){var e=this.internal.collections.addImage_images;for(var t in e)s.call(this,e[t])},o=function(){var e,t=this.internal.collections.addImage_images,r=this.internal.write;for(var n in t)r("/I"+(e=t[n]).index,e.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var e=this.internal.collections.addImage_images;return l.call(this),e},d=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(t){return"function"==typeof e["process"+t.toUpperCase()]},h=function(e){return"object"===(0,n.A)(e)&&1===e.nodeType},m=function(t,r){if("IMG"===t.nodeName&&t.hasAttribute("src")){var n=""+t.getAttribute("src");if(0===n.indexOf("data:image/"))return ie(unescape(n).split("base64,").pop());var a=e.loadFile(n,!0);if(void 0!==a)return a}if("CANVAS"===t.nodeName){if(0===t.width||0===t.height)throw new Error("Given canvas must have data. Canvas width: "+t.width+", height: "+t.height);var s;switch(r){case"PNG":s="image/png";break;case"WEBP":s="image/webp";break;default:s="image/jpeg"}return ie(t.toDataURL(s,1).split("base64,").pop())}},p=function(e){var t=this.internal.collections.addImage_images;if(t)for(var r in t)if(e===t[r].alias)return t[r]},f=function(e,t,r){return e||t||(e=-96,t=-96),e<0&&(e=-1*r.width*72/e/this.internal.scaleFactor),t<0&&(t=-1*r.height*72/t/this.internal.scaleFactor),0===e&&(e=t*r.width/r.height),0===t&&(t=e*r.height/r.width),[e,t]},g=function(e,t,r,n,a,s){var i=f.call(this,r,n,a),o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,d=c.call(this);if(r=i[0],n=i[1],d[a.index]=a,s){s*=Math.PI/180;var u=Math.cos(s),h=Math.sin(s),m=function(e){return e.toFixed(4)},p=[m(u),m(h),m(-1*h),m(u),0,0,"cm"]}this.internal.write("q"),s?(this.internal.write([1,"0","0",1,o(e),l(t+n),"cm"].join(" ")),this.internal.write(p.join(" ")),this.internal.write([o(r),"0","0",o(n),"0","0","cm"].join(" "))):this.internal.write([o(r),"0","0",o(n),o(e),l(t+n),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+a.index+" Do"),this.internal.write("Q")},x=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},v=e.__addimage__.sHashCode=function(e){var t,r,n=0;if("string"==typeof e)for(r=e.length,t=0;t<r;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;else if(N(e))for(r=e.byteLength/2,t=0;t<r;t++)n=(n<<5)-n+e[t],n|=0;return n},b=e.__addimage__.validateStringAsBase64=function(e){(e=e||"").toString().trim();var t=!0;return 0===e.length&&(t=!1),e.length%4!=0&&(t=!1),!1===/^[A-Za-z0-9+/]+$/.test(e.substr(0,e.length-2))&&(t=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(e.substr(-2))&&(t=!1),t},j=e.__addimage__.extractImageFromDataUrl=function(e){var t=(e=e||"").split("base64,"),r=null;if(2===t.length){var n=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(t[0]);Array.isArray(n)&&(r={mimeType:n[1],charset:n[2],data:t[1]})}return r},w=e.__addimage__.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array};e.__addimage__.isArrayBuffer=function(e){return w()&&e instanceof ArrayBuffer};var N=e.__addimage__.isArrayBufferView=function(e){return w()&&"undefined"!=typeof Uint32Array&&(e instanceof Int8Array||e instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)},_=e.__addimage__.binaryStringToUint8Array=function(e){for(var t=e.length,r=new Uint8Array(t),n=0;n<t;n++)r[n]=e.charCodeAt(n);return r},k=e.__addimage__.arrayBufferToBinaryString=function(e){for(var t="",r=N(e)?e:new Uint8Array(e),n=0;n<r.length;n+=8192)t+=String.fromCharCode.apply(null,r.subarray(n,n+8192));return t};e.addImage=function(){var e,r,a,s,i,o,c,d,u;if("number"==typeof arguments[1]?(r=t,a=arguments[1],s=arguments[2],i=arguments[3],o=arguments[4],c=arguments[5],d=arguments[6],u=arguments[7]):(r=arguments[1],a=arguments[2],s=arguments[3],i=arguments[4],o=arguments[5],c=arguments[6],d=arguments[7],u=arguments[8]),"object"===(0,n.A)(e=arguments[0])&&!h(e)&&"imageData"in e){var m=e;e=m.imageData,r=m.format||r||t,a=m.x||a||0,s=m.y||s||0,i=m.w||m.width||i,o=m.h||m.height||o,c=m.alias||c,d=m.compression||d,u=m.rotation||m.angle||u}var p=this.internal.getFilters();if(void 0===d&&-1!==p.indexOf("FlateEncode")&&(d="SLOW"),isNaN(a)||isNaN(s))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var f=S.call(this,e,r,c,d);return g.call(this,a,s,i,o,f,u),this};var S=function(r,n,s,i){var o,l,c;if("string"==typeof r&&a(r)===t){r=unescape(r);var f=A(r,!1);(""!==f||void 0!==(f=e.loadFile(r,!0)))&&(r=f)}if(h(r)&&(r=m(r,n)),n=a(r,n),!u(n))throw new Error("addImage does not support files of type '"+n+"', please ensure that a plugin for '"+n+"' support is added.");if((null==(c=s)||0===c.length)&&(s=function(e){return"string"==typeof e||N(e)?v(e):N(e.data)?v(e.data):null}(r)),(o=p.call(this,s))||(w()&&(r instanceof Uint8Array||"RGBA"===n||(l=r,r=_(r))),o=this["process"+n.toUpperCase()](r,d.call(this),s,function(t){return t&&"string"==typeof t&&(t=t.toUpperCase()),t in e.image_compression?t:y.NONE}(i),l)),!o)throw new Error("An unknown error occurred whilst processing the image.");return o},A=e.__addimage__.convertBase64ToBinaryString=function(e,t){var r;t="boolean"!=typeof t||t;var n,a="";if("string"==typeof e){n=null!==(r=j(e))?r.data:e;try{a=ie(n)}catch(e){if(t)throw b(n)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+e.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return a};e.getImageProperties=function(r){var n,s,i="";if(h(r)&&(r=m(r)),"string"==typeof r&&a(r)===t&&(""===(i=A(r,!1))&&(i=e.loadFile(r)||""),r=i),s=a(r),!u(s))throw new Error("addImage does not support files of type '"+s+"', please ensure that a plugin for '"+s+"' support is added.");if(!w()||r instanceof Uint8Array||(r=_(r)),!(n=this["process"+s.toUpperCase()](r)))throw new Error("An unknown error occurred whilst processing the image");return n.fileType=s,n}}(De.API),function(e){var t=function(e){if(void 0!==e&&""!=e)return!0};De.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(e){for(var r,n,a,s=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,o=this.internal.getPageInfoByObjId(e.objId),l=e.pageContext.annotations,c=!1,d=0;d<l.length&&!c;d++)switch((r=l[d]).type){case"link":(t(r.options.url)||t(r.options.pageNumber))&&(c=!0);break;case"reference":case"text":case"freetext":c=!0}if(0!=c){this.internal.write("/Annots [");for(var u=0;u<l.length;u++){r=l[u];var h=this.internal.pdfEscape,m=this.internal.getEncryptor(e.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var p=this.internal.newAdditionalObject(),f=this.internal.newAdditionalObject(),g=this.internal.getEncryptor(p.objId),x=r.title||"Note";a="<</Type /Annot /Subtype /Text "+(n="/Rect ["+s(r.bounds.x)+" "+i(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w)+" "+i(r.bounds.y)+"] ")+"/Contents ("+h(g(r.contents))+")",a+=" /Popup "+f.objId+" 0 R",a+=" /P "+o.objId+" 0 R",a+=" /T ("+h(g(x))+") >>",p.content=a;var y=p.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(n="/Rect ["+s(r.bounds.x+30)+" "+i(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w+30)+" "+i(r.bounds.y)+"] ")+" /Parent "+y,r.open&&(a+=" /Open true"),a+=" >>",f.content=a,this.internal.write(p.objId,"0 R",f.objId,"0 R");break;case"freetext":n="/Rect ["+s(r.bounds.x)+" "+i(r.bounds.y)+" "+s(r.bounds.x+r.bounds.w)+" "+i(r.bounds.y+r.bounds.h)+"] ";var v=r.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+n+"/Contents ("+h(m(r.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+v+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(r.options.name){var b=this.annotations._nameMap[r.options.name];r.options.pageNumber=b.page,r.options.top=b.y}else r.options.top||(r.options.top=0);if(n="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",a="",r.options.url)a="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /A <</S /URI /URI ("+h(m(r.options.url))+") >>";else if(r.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,a+=" /FitV "+r.options.left+"]";break;default:var j=i(r.options.top);r.options.left=r.options.left||0,void 0===r.options.zoom&&(r.options.zoom=0),a+=" /XYZ "+r.options.left+" "+j+" "+r.options.zoom+"]"}""!=a&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),e.createAnnotation=function(e){var t=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":t.pageContext.annotations.push(e)}},e.link=function(e,t,r,n,a){var s=this.internal.getCurrentPageInfo(),i=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString;s.pageContext.annotations.push({finalBounds:{x:i(e),y:o(t),w:i(e+r),h:o(t+n)},options:a,type:"link"})},e.textWithLink=function(e,t,r,n){var a,s,i=this.getTextWidth(e),o=this.internal.getLineHeight()/this.internal.scaleFactor;if(void 0!==n.maxWidth){s=n.maxWidth;var l=this.splitTextToSize(e,s).length;a=Math.ceil(o*l)}else s=i,a=o;return this.text(e,t,r,n),r+=.2*o,"center"===n.align&&(t-=i/2),"right"===n.align&&(t-=i),this.link(t,r-o,s,a,n),i},e.getTextWidth=function(e){var t=this.internal.getFontSize();return this.getStringUnitWidth(e)*t/this.internal.scaleFactor}}(De.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(e){return void 0!==t[e.charCodeAt(0)]},i=e.__arabicParser__.isArabicLetter=function(e){return"string"==typeof e&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(e)},o=e.__arabicParser__.isArabicEndLetter=function(e){return i(e)&&s(e)&&t[e.charCodeAt(0)].length<=2},l=e.__arabicParser__.isArabicAlfLetter=function(e){return i(e)&&a.indexOf(e.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(e){return i(e)&&s(e)&&t[e.charCodeAt(0)].length>=1};var c=e.__arabicParser__.arabicLetterHasFinalForm=function(e){return i(e)&&s(e)&&t[e.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(e){return i(e)&&s(e)&&t[e.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(e){return i(e)&&s(e)&&4==t[e.charCodeAt(0)].length},u=e.__arabicParser__.resolveLigatures=function(e){var t=0,n=r,a="",s=0;for(t=0;t<e.length;t+=1)void 0!==n[e.charCodeAt(t)]?(s++,"number"==typeof(n=n[e.charCodeAt(t)])&&(a+=String.fromCharCode(n),n=r,s=0),t===e.length-1&&(n=r,a+=e.charAt(t-(s-1)),t-=s-1,s=0)):(n=r,a+=e.charAt(t-s),t-=s,s=0);return a};e.__arabicParser__.isArabicDiacritic=function(e){return void 0!==e&&void 0!==n[e.charCodeAt(0)]};var h=e.__arabicParser__.getCorrectForm=function(e,t,r){return i(e)?!1===s(e)?-1:!c(e)||!i(t)&&!i(r)||!i(r)&&o(t)||o(e)&&!i(t)||o(e)&&l(t)||o(e)&&o(t)?0:d(e)&&i(t)&&!o(t)&&i(r)&&c(r)?3:o(e)||!i(r)?1:2:-1},m=function(e){var r=0,n=0,a=0,s="",o="",l="",c=(e=e||"").split("\\s+"),d=[];for(r=0;r<c.length;r+=1){for(d.push(""),n=0;n<c[r].length;n+=1)s=c[r][n],o=c[r][n-1],l=c[r][n+1],i(s)?(a=h(s,o,l),d[r]+=-1!==a?String.fromCharCode(t[s.charCodeAt(0)][a]):s):d[r]+=s;d[r]=u(d[r])}return d.join(" ")},p=e.__arabicParser__.processArabic=e.processArabic=function(){var e,t="string"==typeof arguments[0]?arguments[0]:arguments[0].text,r=[];if(Array.isArray(t)){var n=0;for(r=[],n=0;n<t.length;n+=1)Array.isArray(t[n])?r.push([m(t[n][0]),t[n][1],t[n][2]]):r.push([m(t[n])]);e=r}else e=m(t);return"string"==typeof arguments[0]?e:(arguments[0].text=e,arguments[0])};e.events.push(["preProcessText",p])}(De.API),De.API.autoPrint=function(e){var t;if("javascript"===((e=e||{}).variant=e.variant||"non-conform",e.variant))this.addJS("print({});");else this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")});return this},function(e){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(t){e=t}});var t=150;Object.defineProperty(this,"width",{get:function(){return t},set:function(e){t=isNaN(e)||!1===Number.isInteger(e)||e<0?150:e,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=t+1)}});var r=300;Object.defineProperty(this,"height",{get:function(){return r},set:function(e){r=isNaN(e)||!1===Number.isInteger(e)||e<0?300:e,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=r+1)}});var n=[];Object.defineProperty(this,"childNodes",{get:function(){return n},set:function(e){n=e}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(e){a=e}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,t){var r;if("2d"!==(e=e||"2d"))return null;for(r in t)this.pdf.context2d.hasOwnProperty(r)&&(this.pdf.context2d[r]=t[r]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(De.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,a=function(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var e=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return e},set:function(t){e=t}});var t=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return t},set:function(e){t=e}});var r=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return r},set:function(e){r=e}});var n=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return n},set:function(e){n=e}});var a=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return a},set:function(e){a=e}});var s=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return s},set:function(e){s=e}});var i=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return i},set:function(e){i=e}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(e){return a.call(this),this.internal.__cell__.headerFunction="function"==typeof e?e:void 0,this},e.getTextDimensions=function(e,t){a.call(this);var r=(t=t||{}).fontSize||this.getFontSize(),n=t.font||this.getFont(),s=t.scaleFactor||this.internal.scaleFactor,i=0,o=0,l=0,c=this;if(!Array.isArray(e)&&"string"!=typeof e){if("number"!=typeof e)throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");e=String(e)}var d=t.maxWidth;d>0?"string"==typeof e?e=this.splitTextToSize(e,d):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce(function(e,t){return e.concat(c.splitTextToSize(t,d))},[])):e=Array.isArray(e)?e:[e];for(var u=0;u<e.length;u++)i<(l=this.getStringUnitWidth(e[u],{font:n})*r)&&(i=l);return 0!==i&&(o=e.length),{w:i/=s,h:Math.max((o*r*this.getLineHeightFactor()-r*(this.getLineHeightFactor()-1))/s,0)}},e.cellAddPage=function(){a.call(this),this.addPage();var e=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(e.left,e.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var e;e=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),a.call(this);var n=this.internal.__cell__.lastCell,s=this.internal.__cell__.padding,o=this.internal.__cell__.margins||t,l=this.internal.__cell__.tableHeaderRow,c=this.internal.__cell__.printHeaders;return void 0!==n.lineNumber&&(n.lineNumber===e.lineNumber?(e.x=(n.x||0)+(n.width||0),e.y=n.y||0):n.y+n.height+e.height+o.bottom>this.getPageHeight()?(this.cellAddPage(),e.y=o.top,c&&l&&(this.printHeaderRow(e.lineNumber,!0),e.y+=l[0].height)):e.y=n.y+n.height||e.y),void 0!==e.text[0]&&(this.rect(e.x,e.y,e.width,e.height,!0===r?"FD":void 0),"right"===e.align?this.text(e.text,e.x+e.width-s,e.y+s,{align:"right",baseline:"top"}):"center"===e.align?this.text(e.text,e.x+e.width/2,e.y+s,{align:"center",baseline:"top",maxWidth:e.width-s-s}):this.text(e.text,e.x+s,e.y+s,{align:"left",baseline:"top",maxWidth:e.width-s-s})),this.internal.__cell__.lastCell=e,this};e.table=function(e,r,c,d,u){if(a.call(this),!c)throw new Error("No data for PDF table.");var h,m,p,f,g=[],x=[],y=[],v={},b={},j=[],w=[],N=(u=u||{}).autoSize||!1,_=!1!==u.printHeaders,k=u.css&&void 0!==u.css["font-size"]?16*u.css["font-size"]:u.fontSize||12,S=u.margins||Object.assign({width:this.getPageWidth()},t),A="number"==typeof u.padding?u.padding:3,C=u.headerBackgroundColor||"#c8c8c8",E=u.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=_,this.internal.__cell__.margins=S,this.internal.__cell__.table_font_size=k,this.internal.__cell__.padding=A,this.internal.__cell__.headerBackgroundColor=C,this.internal.__cell__.headerTextColor=E,this.setFontSize(k),null==d)x=g=Object.keys(c[0]),y=g.map(function(){return"left"});else if(Array.isArray(d)&&"object"===(0,n.A)(d[0]))for(g=d.map(function(e){return e.name}),x=d.map(function(e){return e.prompt||e.name||""}),y=d.map(function(e){return e.align||"left"}),h=0;h<d.length;h+=1)b[d[h].name]=d[h].width*(19.049976/25.4);else Array.isArray(d)&&"string"==typeof d[0]&&(x=g=d,y=g.map(function(){return"left"}));if(N||Array.isArray(d)&&"string"==typeof d[0])for(h=0;h<g.length;h+=1){for(v[f=g[h]]=c.map(function(e){return e[f]}),this.setFont(void 0,"bold"),j.push(this.getTextDimensions(x[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),m=v[f],this.setFont(void 0,"normal"),p=0;p<m.length;p+=1)j.push(this.getTextDimensions(m[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);b[f]=Math.max.apply(null,j)+A+A,j=[]}if(_){var T={};for(h=0;h<g.length;h+=1)T[g[h]]={},T[g[h]].text=x[h],T[g[h]].align=y[h];var P=l.call(this,T,b);w=g.map(function(t){return new i(e,r,b[t],P,T[t].text,void 0,T[t].align)}),this.setTableHeaderRow(w),this.printHeaderRow(1,!1)}var O=d.reduce(function(e,t){return e[t.name]=t.align,e},{});for(h=0;h<c.length;h+=1){"rowStart"in u&&u.rowStart instanceof Function&&u.rowStart({row:h,data:c[h]},this);var D=l.call(this,c[h],b);for(p=0;p<g.length;p+=1){var I=c[h][g[p]];"cellStart"in u&&u.cellStart instanceof Function&&u.cellStart({row:h,col:p,data:I},this),o.call(this,new i(e,r,b[g[p]],D,I,h+2,O[g[p]]))}}return this.internal.__cell__.table_x=e,this.internal.__cell__.table_y=r,this};var l=function(e,t){var r=this.internal.__cell__.padding,n=this.internal.__cell__.table_font_size,a=this.internal.scaleFactor;return Object.keys(e).map(function(n){var a=e[n];return this.splitTextToSize(a.hasOwnProperty("text")?a.text:a,t[n]-r-r)},this).map(function(e){return this.getLineHeightFactor()*e.length*n/a+r+r},this).reduce(function(e,t){return Math.max(e,t)},0)};e.setTableHeaderRow=function(e){a.call(this),this.internal.__cell__.tableHeaderRow=e},e.printHeaderRow=function(e,t){if(a.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var n;if(r=!0,"function"==typeof this.internal.__cell__.headerFunction){var s=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(s[0],s[1],s[2],s[3],void 0,-1)}this.setFont(void 0,"bold");for(var l=[],c=0;c<this.internal.__cell__.tableHeaderRow.length;c+=1){n=this.internal.__cell__.tableHeaderRow[c].clone(),t&&(n.y=this.internal.__cell__.margins.top||0,l.push(n)),n.lineNumber=e;var d=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,n),this.setTextColor(d)}l.length>0&&this.setTableHeaderRow(l),this.setFont(void 0,"normal"),r=!1}}(De.API);var Nt={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},_t=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],kt=wt(_t),St=[100,200,300,400,500,600,700,800,900],At=wt(St);function Ct(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(e){return Nt[e=e||"normal"]?e:"normal"}(e.style),n=function(e){return e?"number"==typeof e?e>=100&&e<=900&&e%100==0?e:400:/^\d00$/.test(e)?parseInt(e):"bold"===e?700:400:400}(e.weight),a=function(e){return"number"==typeof kt[e=e||"normal"]?e:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,n].join(" ")}}}function Et(e,t,r,n){var a;for(a=r;a>=0&&a<t.length;a+=n)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=n)if(e[t[a]])return e[t[a]]}var Tt={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Pt={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Ot(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function Dt(e){return e.trimLeft()}function It(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function Lt(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return null===t?null:[t[0],e.substring(t[0].length)]}var Mt,Rt,Ft,Bt,zt=["times"];!function(e){var t,r,a,s,i,o,l,c,d,u=function(e){return e=e||{},this.isStrokeTransparent=e.isStrokeTransparent||!1,this.strokeOpacity=e.strokeOpacity||1,this.strokeStyle=e.strokeStyle||"#000000",this.fillStyle=e.fillStyle||"#000000",this.isFillTransparent=e.isFillTransparent||!1,this.fillOpacity=e.fillOpacity||1,this.font=e.font||"10px sans-serif",this.textBaseline=e.textBaseline||"alphabetic",this.textAlign=e.textAlign||"left",this.lineWidth=e.lineWidth||1,this.lineJoin=e.lineJoin||"miter",this.lineCap=e.lineCap||"butt",this.path=e.path||[],this.transform=void 0!==e.transform?e.transform.clone():new c,this.globalCompositeOperation=e.globalCompositeOperation||"normal",this.globalAlpha=e.globalAlpha||1,this.clip_path=e.clip_path||[],this.currentPoint=e.currentPoint||new o,this.miterLimit=e.miterLimit||10,this.lastPoint=e.lastPoint||new o,this.lineDashOffset=e.lineDashOffset||0,this.lineDash=e.lineDash||[],this.margin=e.margin||[0,0,0,0],this.prevPageLastElemOffset=e.prevPageLastElemOffset||0,this.ignoreClearRect="boolean"!=typeof e.ignoreClearRect||e.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new h(this),t=this.internal.f2,r=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,d=new u}]);var h=function(e){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var t=e;Object.defineProperty(this,"pdf",{get:function(){return t}});var r=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return r},set:function(e){r=Boolean(e)}});var n=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return n},set:function(e){n=Boolean(e)}});var a=0;Object.defineProperty(this,"posX",{get:function(){return a},set:function(e){isNaN(e)||(a=e)}});var s=0;Object.defineProperty(this,"posY",{get:function(){return s},set:function(e){isNaN(e)||(s=e)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(e){var t;"number"==typeof e?t=[e,e,e,e]:((t=new Array(4))[0]=e[0],t[1]=e.length>=2?e[1]:t[0],t[2]=e.length>=3?e[2]:t[0],t[3]=e.length>=4?e[3]:t[1]),d.margin=t}});var i=!1;Object.defineProperty(this,"autoPaging",{get:function(){return i},set:function(e){i=e}});var o=0;Object.defineProperty(this,"lastBreak",{get:function(){return o},set:function(e){o=e}});var l=[];Object.defineProperty(this,"pageBreaks",{get:function(){return l},set:function(e){l=e}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(e){e instanceof u&&(d=e)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(e){d.path=e}});var c=[];Object.defineProperty(this,"ctxStack",{get:function(){return c},set:function(e){c=e}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(e){var t;t=m(e),this.ctx.fillStyle=t.style,this.ctx.isFillTransparent=0===t.a,this.ctx.fillOpacity=t.a,this.pdf.setFillColor(t.r,t.g,t.b,{a:t.a}),this.pdf.setTextColor(t.r,t.g,t.b,{a:t.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(e){var t=m(e);this.ctx.strokeStyle=t.style,this.ctx.isStrokeTransparent=0===t.a,this.ctx.strokeOpacity=t.a,0===t.a?this.pdf.setDrawColor(255,255,255):(t.a,this.pdf.setDrawColor(t.r,t.g,t.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(e){-1!==["butt","round","square"].indexOf(e)&&(this.ctx.lineCap=e,this.pdf.setLineCap(e))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(e){isNaN(e)||(this.ctx.lineWidth=e,this.pdf.setLineWidth(e))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(e){-1!==["bevel","round","miter"].indexOf(e)&&(this.ctx.lineJoin=e,this.pdf.setLineJoin(e))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(e){isNaN(e)||(this.ctx.miterLimit=e,this.pdf.setMiterLimit(e))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(e){this.ctx.textBaseline=e}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(e){-1!==["right","end","center","left","start"].indexOf(e)&&(this.ctx.textAlign=e)}});var h=null;function p(e,t){if(null===h){var r=function(e){var t=[];return Object.keys(e).forEach(function(r){e[r].forEach(function(e){var n=null;switch(e){case"bold":n={family:r,weight:"bold"};break;case"italic":n={family:r,style:"italic"};break;case"bolditalic":n={family:r,weight:"bold",style:"italic"};break;case"":case"normal":n={family:r}}null!==n&&(n.ref={name:r,style:e},t.push(n))})}),t}(e.getFontList());h=function(e){for(var t={},r=0;r<e.length;++r){var n=Ct(e[r]),a=n.family,s=n.stretch,i=n.style,o=n.weight;t[a]=t[a]||{},t[a][s]=t[a][s]||{},t[a][s][i]=t[a][s][i]||{},t[a][s][i][o]=n}return t}(r.concat(t))}return h}var f=null;Object.defineProperty(this,"fontFaces",{get:function(){return f},set:function(e){h=null,f=e}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(e){var t;if(this.ctx.font=e,null!==(t=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(e))){var r=t[1],n=(t[2],t[3]),a=t[4],s=(t[5],t[6]),i=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(a)[2];a="px"===i?Math.floor(parseFloat(a)*this.pdf.internal.scaleFactor):"em"===i?Math.floor(parseFloat(a)*this.pdf.getFontSize()):Math.floor(parseFloat(a)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(a);var o=function(e){var t,r,n=[],a=e.trim();if(""===a)return zt;if(a in Pt)return[Pt[a]];for(;""!==a;){switch(r=null,t=(a=Dt(a)).charAt(0)){case'"':case"'":r=It(a.substring(1),t);break;default:r=Lt(a)}if(null===r)return zt;if(n.push(r[0]),""!==(a=Dt(r[1]))&&","!==a.charAt(0))return zt;a=a.replace(/^,/,"")}return n}(s);if(this.fontFaces){var l=function(e,t,r){for(var n=(r=r||{}).defaultFontFamily||"times",a=Object.assign({},Tt,r.genericFontFamilies||{}),s=null,i=null,o=0;o<t.length;++o)if(a[(s=Ct(t[o])).family]&&(s.family=a[s.family]),e.hasOwnProperty(s.family)){i=e[s.family];break}if(!(i=i||e[n]))throw new Error("Could not find a font-family for the rule '"+Ot(s)+"' and default family '"+n+"'.");if(i=function(e,t){if(t[e])return t[e];var r=kt[e],n=r<=kt.normal?-1:1,a=Et(t,_t,r,n);if(!a)throw new Error("Could not find a matching font-stretch value for "+e);return a}(s.stretch,i),i=function(e,t){if(t[e])return t[e];for(var r=Nt[e],n=0;n<r.length;++n)if(t[r[n]])return t[r[n]];throw new Error("Could not find a matching font-style for "+e)}(s.style,i),!(i=function(e,t){if(t[e])return t[e];if(400===e&&t[500])return t[500];if(500===e&&t[400])return t[400];var r=At[e],n=Et(t,St,r,e<400?-1:1);if(!n)throw new Error("Could not find a matching font-weight for value "+e);return n}(s.weight,i)))throw new Error("Failed to resolve a font for the rule '"+Ot(s)+"'.");return i}(p(this.pdf,this.fontFaces),o.map(function(e){return{family:e,stretch:"normal",weight:n,style:r}}));this.pdf.setFont(l.ref.name,l.ref.style)}else{var c="";("bold"===n||parseInt(n,10)>=700||"bold"===r)&&(c="bold"),"italic"===r&&(c+="italic"),0===c.length&&(c="normal");for(var d="",u={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},h=0;h<o.length;h++){if(void 0!==this.pdf.internal.getFont(o[h],c,{noFallback:!0,disableWarning:!0})){d=o[h];break}if("bolditalic"===c&&void 0!==this.pdf.internal.getFont(o[h],"bold",{noFallback:!0,disableWarning:!0}))d=o[h],c="bold";else if(void 0!==this.pdf.internal.getFont(o[h],"normal",{noFallback:!0,disableWarning:!0})){d=o[h],c="normal";break}}if(""===d)for(var m=0;m<o.length;m++)if(u[o[m]]){d=u[o[m]];break}d=""===d?"Times":d,this.pdf.setFont(d,c)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(e){this.ctx.globalCompositeOperation=e}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(e){this.ctx.globalAlpha=e}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(e){this.ctx.lineDashOffset=e,F.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(e){this.ctx.lineDash=e,F.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(e){this.ctx.ignoreClearRect=Boolean(e)}})};h.prototype.setLineDash=function(e){this.lineDash=e},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){j.call(this,"fill",!1)},h.prototype.stroke=function(){j.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(e,t){if(isNaN(e)||isNaN(t))throw re.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var r=this.ctx.transform.applyToPoint(new o(e,t));this.path.push({type:"mt",x:r.x,y:r.y}),this.ctx.lastPoint=new o(e,t)},h.prototype.closePath=function(){var e=new o(0,0),t=0;for(t=this.path.length-1;-1!==t;t--)if("begin"===this.path[t].type&&"object"===(0,n.A)(this.path[t+1])&&"number"==typeof this.path[t+1].x){e=new o(this.path[t+1].x,this.path[t+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(e.x,e.y)},h.prototype.lineTo=function(e,t){if(isNaN(e)||isNaN(t))throw re.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var r=this.ctx.transform.applyToPoint(new o(e,t));this.path.push({type:"lt",x:r.x,y:r.y}),this.ctx.lastPoint=new o(r.x,r.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),j.call(this,null,!0)},h.prototype.quadraticCurveTo=function(e,t,r,n){if(isNaN(r)||isNaN(n)||isNaN(e)||isNaN(t))throw re.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var a=this.ctx.transform.applyToPoint(new o(r,n)),s=this.ctx.transform.applyToPoint(new o(e,t));this.path.push({type:"qct",x1:s.x,y1:s.y,x:a.x,y:a.y}),this.ctx.lastPoint=new o(a.x,a.y)},h.prototype.bezierCurveTo=function(e,t,r,n,a,s){if(isNaN(a)||isNaN(s)||isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n))throw re.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var i=this.ctx.transform.applyToPoint(new o(a,s)),l=this.ctx.transform.applyToPoint(new o(e,t)),c=this.ctx.transform.applyToPoint(new o(r,n));this.path.push({type:"bct",x1:l.x,y1:l.y,x2:c.x,y2:c.y,x:i.x,y:i.y}),this.ctx.lastPoint=new o(i.x,i.y)},h.prototype.arc=function(e,t,r,n,a,s){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n)||isNaN(a))throw re.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(s=Boolean(s),!this.ctx.transform.isIdentity){var i=this.ctx.transform.applyToPoint(new o(e,t));e=i.x,t=i.y;var l=this.ctx.transform.applyToPoint(new o(0,r)),c=this.ctx.transform.applyToPoint(new o(0,0));r=Math.sqrt(Math.pow(l.x-c.x,2)+Math.pow(l.y-c.y,2))}Math.abs(a-n)>=2*Math.PI&&(n=0,a=2*Math.PI),this.path.push({type:"arc",x:e,y:t,radius:r,startAngle:n,endAngle:a,counterclockwise:s})},h.prototype.arcTo=function(e,t,r,n,a){throw new Error("arcTo not implemented.")},h.prototype.rect=function(e,t,r,n){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n))throw re.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(e,t),this.lineTo(e+r,t),this.lineTo(e+r,t+n),this.lineTo(e,t+n),this.lineTo(e,t),this.lineTo(e+r,t),this.lineTo(e,t)},h.prototype.fillRect=function(e,t,r,n){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n))throw re.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var a={};"butt"!==this.lineCap&&(a.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(a.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(e,t,r,n),this.fill(),a.hasOwnProperty("lineCap")&&(this.lineCap=a.lineCap),a.hasOwnProperty("lineJoin")&&(this.lineJoin=a.lineJoin)}},h.prototype.strokeRect=function(e,t,r,n){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n))throw re.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");f.call(this)||(this.beginPath(),this.rect(e,t,r,n),this.stroke())},h.prototype.clearRect=function(e,t,r,n){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n))throw re.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(e,t,r,n))},h.prototype.save=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,r=0;r<this.pdf.internal.getNumberOfPages();r++)this.pdf.setPage(r+1),this.pdf.internal.out("q");if(this.pdf.setPage(t),e){this.ctx.fontSize=this.pdf.internal.getFontSize();var n=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=n}},h.prototype.restore=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,r=0;r<this.pdf.internal.getNumberOfPages();r++)this.pdf.setPage(r+1),this.pdf.internal.out("Q");this.pdf.setPage(t),e&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(e){var t,r,n,a;if(!0===e.isCanvasGradient&&(e=e.getColor()),!e)return{r:0,g:0,b:0,a:0,style:e};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(e))t=0,r=0,n=0,a=0;else{var s=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(e);if(null!==s)t=parseInt(s[1]),r=parseInt(s[2]),n=parseInt(s[3]),a=1;else if(null!==(s=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(e)))t=parseInt(s[1]),r=parseInt(s[2]),n=parseInt(s[3]),a=parseFloat(s[4]);else{if(a=1,"string"==typeof e&&"#"!==e.charAt(0)){var i=new ce(e);e=i.ok?i.toHex():"#000000"}4===e.length?(t=e.substring(1,2),t+=t,r=e.substring(2,3),r+=r,n=e.substring(3,4),n+=n):(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7)),t=parseInt(t,16),r=parseInt(r,16),n=parseInt(n,16)}}return{r:t,g:r,b:n,a:a,style:e}},p=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},f=function(){return Boolean(this.ctx.isStrokeTransparent||0==this.globalAlpha)};h.prototype.fillText=function(e,t,r,n){if(isNaN(t)||isNaN(r)||"string"!=typeof e)throw re.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(n=isNaN(n)?void 0:n,!p.call(this)){var a=L(this.ctx.transform.rotation),s=this.ctx.transform.scaleX;E.call(this,{text:e,x:t,y:r,scale:s,angle:a,align:this.textAlign,maxWidth:n})}},h.prototype.strokeText=function(e,t,r,n){if(isNaN(t)||isNaN(r)||"string"!=typeof e)throw re.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!f.call(this)){n=isNaN(n)?void 0:n;var a=L(this.ctx.transform.rotation),s=this.ctx.transform.scaleX;E.call(this,{text:e,x:t,y:r,scale:s,renderingMode:"stroke",angle:a,align:this.textAlign,maxWidth:n})}},h.prototype.measureText=function(e){if("string"!=typeof e)throw re.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var t=this.pdf,r=this.pdf.internal.scaleFactor,n=t.internal.getFontSize(),a=t.getStringUnitWidth(e)*n/t.internal.scaleFactor;return new function(e){var t=(e=e||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return t}}),this}({width:a*=Math.round(96*r/72*1e4)/1e4})},h.prototype.scale=function(e,t){if(isNaN(e)||isNaN(t))throw re.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var r=new c(e,0,0,t,0,0);this.ctx.transform=this.ctx.transform.multiply(r)},h.prototype.rotate=function(e){if(isNaN(e))throw re.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var t=new c(Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0);this.ctx.transform=this.ctx.transform.multiply(t)},h.prototype.translate=function(e,t){if(isNaN(e)||isNaN(t))throw re.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var r=new c(1,0,0,1,e,t);this.ctx.transform=this.ctx.transform.multiply(r)},h.prototype.transform=function(e,t,r,n,a,s){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n)||isNaN(a)||isNaN(s))throw re.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var i=new c(e,t,r,n,a,s);this.ctx.transform=this.ctx.transform.multiply(i)},h.prototype.setTransform=function(e,t,r,n,a,s){e=isNaN(e)?1:e,t=isNaN(t)?0:t,r=isNaN(r)?0:r,n=isNaN(n)?1:n,a=isNaN(a)?0:a,s=isNaN(s)?0:s,this.ctx.transform=new c(e,t,r,n,a,s)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(e,t,r,n,a,s,i,o,d){var u=this.pdf.getImageProperties(e),h=1,m=1,p=1,f=1;void 0!==n&&void 0!==o&&(p=o/n,f=d/a,h=u.width/n*o/n,m=u.height/a*d/a),void 0===s&&(s=t,i=r,t=0,r=0),void 0!==n&&void 0===o&&(o=n,d=a),void 0===n&&void 0===o&&(o=u.width,d=u.height);for(var y,j=this.ctx.transform.decompose(),N=L(j.rotate.shx),_=new c,k=(_=(_=(_=_.multiply(j.translate)).multiply(j.skew)).multiply(j.scale)).applyToRectangle(new l(s-t*p,i-r*f,n*h,a*m)),S=x.call(this,k),A=[],C=0;C<S.length;C+=1)-1===A.indexOf(S[C])&&A.push(S[C]);if(b(A),this.autoPaging)for(var E=A[0],T=A[A.length-1],P=E;P<T+1;P++){this.pdf.setPage(P);var O=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],D=1===P?this.posY+this.margin[0]:this.margin[0],I=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],M=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],R=1===P?0:I+(P-2)*M;if(0!==this.ctx.clip_path.length){var F=this.path;y=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(y,this.posX+this.margin[3],-R+D+this.ctx.prevPageLastElemOffset),w.call(this,"fill",!0),this.path=F}var B=JSON.parse(JSON.stringify(k));B=v([B],this.posX+this.margin[3],-R+D+this.ctx.prevPageLastElemOffset)[0];var z=(P>E||P<T)&&g.call(this);z&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],O,M,null).clip().discardPath()),this.pdf.addImage(e,"JPEG",B.x,B.y,B.w,B.h,null,null,N),z&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(e,"JPEG",k.x,k.y,k.w,k.h,null,null,N)};var x=function(e,t,r){var n=[];t=t||this.pdf.internal.pageSize.width,r=r||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var a=this.posY+this.ctx.prevPageLastElemOffset;switch(e.type){default:case"mt":case"lt":n.push(Math.floor((e.y+a)/r)+1);break;case"arc":n.push(Math.floor((e.y+a-e.radius)/r)+1),n.push(Math.floor((e.y+a+e.radius)/r)+1);break;case"qct":var s=M(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x,e.y);n.push(Math.floor((s.y+a)/r)+1),n.push(Math.floor((s.y+s.h+a)/r)+1);break;case"bct":var i=R(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x2,e.y2,e.x,e.y);n.push(Math.floor((i.y+a)/r)+1),n.push(Math.floor((i.y+i.h+a)/r)+1);break;case"rect":n.push(Math.floor((e.y+a)/r)+1),n.push(Math.floor((e.y+e.h+a)/r)+1)}for(var o=0;o<n.length;o+=1)for(;this.pdf.internal.getNumberOfPages()<n[o];)y.call(this);return n},y=function(){var e=this.fillStyle,t=this.strokeStyle,r=this.font,n=this.lineCap,a=this.lineWidth,s=this.lineJoin;this.pdf.addPage(),this.fillStyle=e,this.strokeStyle=t,this.font=r,this.lineCap=n,this.lineWidth=a,this.lineJoin=s},v=function(e,t,r){for(var n=0;n<e.length;n++)switch(e[n].type){case"bct":e[n].x2+=t,e[n].y2+=r;case"qct":e[n].x1+=t,e[n].y1+=r;default:e[n].x+=t,e[n].y+=r}return e},b=function(e){return e.sort(function(e,t){return e-t})},j=function(e,t){for(var r,n,a=this.fillStyle,s=this.strokeStyle,i=this.lineCap,o=this.lineWidth,l=Math.abs(o*this.ctx.transform.scaleX),c=this.lineJoin,d=JSON.parse(JSON.stringify(this.path)),u=JSON.parse(JSON.stringify(this.path)),h=[],m=0;m<u.length;m++)if(void 0!==u[m].x)for(var p=x.call(this,u[m]),f=0;f<p.length;f+=1)-1===h.indexOf(p[f])&&h.push(p[f]);for(var j=0;j<h.length;j++)for(;this.pdf.internal.getNumberOfPages()<h[j];)y.call(this);if(b(h),this.autoPaging)for(var N=h[0],_=h[h.length-1],k=N;k<_+1;k++){this.pdf.setPage(k),this.fillStyle=a,this.strokeStyle=s,this.lineCap=i,this.lineWidth=l,this.lineJoin=c;var S=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],A=1===k?this.posY+this.margin[0]:this.margin[0],C=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],E=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],T=1===k?0:C+(k-2)*E;if(0!==this.ctx.clip_path.length){var P=this.path;r=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(r,this.posX+this.margin[3],-T+A+this.ctx.prevPageLastElemOffset),w.call(this,e,!0),this.path=P}if(n=JSON.parse(JSON.stringify(d)),this.path=v(n,this.posX+this.margin[3],-T+A+this.ctx.prevPageLastElemOffset),!1===t||0===k){var O=(k>N||k<_)&&g.call(this);O&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],S,E,null).clip().discardPath()),w.call(this,e,t),O&&this.pdf.restoreGraphicsState()}this.lineWidth=o}else this.lineWidth=l,w.call(this,e,t),this.lineWidth=o;this.path=d},w=function(e,t){if(("stroke"!==e||t||!f.call(this))&&("stroke"===e||t||!p.call(this))){for(var r,n,a=[],s=this.path,i=0;i<s.length;i++){var o=s[i];switch(o.type){case"begin":a.push({begin:!0});break;case"close":a.push({close:!0});break;case"mt":a.push({start:o,deltas:[],abs:[]});break;case"lt":var l=a.length;if(s[i-1]&&!isNaN(s[i-1].x)&&(r=[o.x-s[i-1].x,o.y-s[i-1].y],l>0))for(;l>=0;l--)if(!0!==a[l-1].close&&!0!==a[l-1].begin){a[l-1].deltas.push(r),a[l-1].abs.push(o);break}break;case"bct":r=[o.x1-s[i-1].x,o.y1-s[i-1].y,o.x2-s[i-1].x,o.y2-s[i-1].y,o.x-s[i-1].x,o.y-s[i-1].y],a[a.length-1].deltas.push(r);break;case"qct":var c=s[i-1].x+2/3*(o.x1-s[i-1].x),d=s[i-1].y+2/3*(o.y1-s[i-1].y),u=o.x+2/3*(o.x1-o.x),h=o.y+2/3*(o.y1-o.y),m=o.x,g=o.y;r=[c-s[i-1].x,d-s[i-1].y,u-s[i-1].x,h-s[i-1].y,m-s[i-1].x,g-s[i-1].y],a[a.length-1].deltas.push(r);break;case"arc":a.push({deltas:[],abs:[],arc:!0}),Array.isArray(a[a.length-1].abs)&&a[a.length-1].abs.push(o)}}n=t?null:"stroke"===e?"stroke":"fill";for(var x=!1,y=0;y<a.length;y++)if(a[y].arc)for(var v=a[y].abs,b=0;b<v.length;b++){var j=v[b];"arc"===j.type?k.call(this,j.x,j.y,j.radius,j.startAngle,j.endAngle,j.counterclockwise,void 0,t,!x):T.call(this,j.x,j.y),x=!0}else if(!0===a[y].close)this.pdf.internal.out("h"),x=!1;else if(!0!==a[y].begin){var w=a[y].start.x,N=a[y].start.y;P.call(this,a[y].deltas,w,N),x=!0}n&&S.call(this,n),t&&A.call(this)}},N=function(e){var t=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,r=t*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return e-r;case"top":return e+t-r;case"hanging":return e+t-2*r;case"middle":return e+t/2-r;default:return e}},_=function(e){return e+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var e=function(){};return e.colorStops=[],e.addColorStop=function(e,t){this.colorStops.push([e,t])},e.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},e.isCanvasGradient=!0,e},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var k=function(e,t,r,n,a,s,i,o,l){for(var c=D.call(this,r,n,a,s),d=0;d<c.length;d++){var u=c[d];0===d&&(l?C.call(this,u.x1+e,u.y1+t):T.call(this,u.x1+e,u.y1+t)),O.call(this,e,t,u.x2,u.y2,u.x3,u.y3,u.x4,u.y4)}o?A.call(this):S.call(this,i)},S=function(e){switch(e){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},A=function(){this.pdf.clip(),this.pdf.discardPath()},C=function(e,t){this.pdf.internal.out(r(e)+" "+a(t)+" m")},E=function(e){var t;switch(e.align){case"right":case"end":t="right";break;case"center":t="center";break;default:t="left"}var r=this.pdf.getTextDimensions(e.text),n=N.call(this,e.y),a=_.call(this,n)-r.h,s=this.ctx.transform.applyToPoint(new o(e.x,n)),i=this.ctx.transform.decompose(),d=new c;d=(d=(d=d.multiply(i.translate)).multiply(i.skew)).multiply(i.scale);for(var u,h,m,p=this.ctx.transform.applyToRectangle(new l(e.x,n,r.w,r.h)),f=d.applyToRectangle(new l(e.x,a,r.w,r.h)),y=x.call(this,f),j=[],k=0;k<y.length;k+=1)-1===j.indexOf(y[k])&&j.push(y[k]);if(b(j),this.autoPaging)for(var S=j[0],A=j[j.length-1],C=S;C<A+1;C++){this.pdf.setPage(C);var E=1===C?this.posY+this.margin[0]:this.margin[0],T=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],P=this.pdf.internal.pageSize.height-this.margin[2],O=P-this.margin[0],D=this.pdf.internal.pageSize.width-this.margin[1],I=D-this.margin[3],L=1===C?0:T+(C-2)*O;if(0!==this.ctx.clip_path.length){var M=this.path;u=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(u,this.posX+this.margin[3],-1*L+E),w.call(this,"fill",!0),this.path=M}var R=v([JSON.parse(JSON.stringify(f))],this.posX+this.margin[3],-L+E+this.ctx.prevPageLastElemOffset)[0];e.scale>=.01&&(h=this.pdf.internal.getFontSize(),this.pdf.setFontSize(h*e.scale),m=this.lineWidth,this.lineWidth=m*e.scale);var F="text"!==this.autoPaging;if(F||R.y+R.h<=P){if(F||R.y>=E&&R.x<=D){var B=F?e.text:this.pdf.splitTextToSize(e.text,e.maxWidth||D-R.x)[0],z=v([JSON.parse(JSON.stringify(p))],this.posX+this.margin[3],-L+E+this.ctx.prevPageLastElemOffset)[0],U=F&&(C>S||C<A)&&g.call(this);U&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],I,O,null).clip().discardPath()),this.pdf.text(B,z.x,z.y,{angle:e.angle,align:t,renderingMode:e.renderingMode}),U&&this.pdf.restoreGraphicsState()}}else R.y<P&&(this.ctx.prevPageLastElemOffset+=P-R.y);e.scale>=.01&&(this.pdf.setFontSize(h),this.lineWidth=m)}else e.scale>=.01&&(h=this.pdf.internal.getFontSize(),this.pdf.setFontSize(h*e.scale),m=this.lineWidth,this.lineWidth=m*e.scale),this.pdf.text(e.text,s.x+this.posX,s.y+this.posY,{angle:e.angle,align:t,renderingMode:e.renderingMode,maxWidth:e.maxWidth}),e.scale>=.01&&(this.pdf.setFontSize(h),this.lineWidth=m)},T=function(e,t,n,s){n=n||0,s=s||0,this.pdf.internal.out(r(e+n)+" "+a(t+s)+" l")},P=function(e,t,r){return this.pdf.lines(e,t,r,null,null)},O=function(e,r,n,a,o,l,c,d){this.pdf.internal.out([t(s(n+e)),t(i(a+r)),t(s(o+e)),t(i(l+r)),t(s(c+e)),t(i(d+r)),"c"].join(" "))},D=function(e,t,r,n){for(var a=2*Math.PI,s=Math.PI/2;t>r;)t-=a;var i=Math.abs(r-t);i<a&&n&&(i=a-i);for(var o=[],l=n?-1:1,c=t;i>1e-5;){var d=c+l*Math.min(i,s);o.push(I.call(this,e,c,d)),i-=Math.abs(d-c),c=d}return o},I=function(e,t,r){var n=(r-t)/2,a=e*Math.cos(n),s=e*Math.sin(n),i=a,o=-s,l=i*i+o*o,c=l+i*a+o*s,d=4/3*(Math.sqrt(2*l*c)-c)/(i*s-o*a),u=i-d*o,h=o+d*i,m=u,p=-h,f=n+t,g=Math.cos(f),x=Math.sin(f);return{x1:e*Math.cos(t),y1:e*Math.sin(t),x2:u*g-h*x,y2:u*x+h*g,x3:m*g-p*x,y3:m*x+p*g,x4:e*Math.cos(r),y4:e*Math.sin(r)}},L=function(e){return 180*e/Math.PI},M=function(e,t,r,n,a,s){var i=e+.5*(r-e),o=t+.5*(n-t),c=a+.5*(r-a),d=s+.5*(n-s),u=Math.min(e,a,i,c),h=Math.max(e,a,i,c),m=Math.min(t,s,o,d),p=Math.max(t,s,o,d);return new l(u,m,h-u,p-m)},R=function(e,t,r,n,a,s,i,o){var c,d,u,h,m,p,f,g,x,y,v,b,j,w,N=r-e,_=n-t,k=a-r,S=s-n,A=i-a,C=o-s;for(d=0;d<41;d++)x=(f=(u=e+(c=d/40)*N)+c*((m=r+c*k)-u))+c*(m+c*(a+c*A-m)-f),y=(g=(h=t+c*_)+c*((p=n+c*S)-h))+c*(p+c*(s+c*C-p)-g),0==d?(v=x,b=y,j=x,w=y):(v=Math.min(v,x),b=Math.min(b,y),j=Math.max(j,x),w=Math.max(w,y));return new l(Math.round(v),Math.round(b),Math.round(j-v),Math.round(w-b))},F=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var e,t,r=(e=this.ctx.lineDash,t=this.ctx.lineDashOffset,JSON.stringify({lineDash:e,lineDashOffset:t}));this.prevLineDash!==r&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=r)}}}(De.API),function(e){var t=function(e){var t,r,n,a,s,i,o,l,c,d;for(/[^\x00-\xFF]/.test(e),r=[],n=0,a=(e+=t="\0\0\0\0".slice(e.length%4||4)).length;a>n;n+=4)0!==(s=(e.charCodeAt(n)<<24)+(e.charCodeAt(n+1)<<16)+(e.charCodeAt(n+2)<<8)+e.charCodeAt(n+3))?(i=(s=((s=((s=((s=(s-(d=s%85))/85)-(c=s%85))/85)-(l=s%85))/85)-(o=s%85))/85)%85,r.push(i+33,o+33,l+33,c+33,d+33)):r.push(122);return function(e,t){for(var r=t;r>0;r--)e.pop()}(r,t.length),String.fromCharCode.apply(String,r)+"~>"},r=function(e){var t,r,n,a,s,i=String,o="length",l=255,c="charCodeAt",d="slice",u="replace";for(e[d](-2),e=e[d](0,-2)[u](/\s/g,"")[u]("z","!!!!!"),n=[],a=0,s=(e+=t="uuuuu"[d](e[o]%5||5))[o];s>a;a+=5)r=52200625*(e[c](a)-33)+614125*(e[c](a+1)-33)+7225*(e[c](a+2)-33)+85*(e[c](a+3)-33)+(e[c](a+4)-33),n.push(l&r>>24,l&r>>16,l&r>>8,l&r);return function(e,t){for(var r=t;r>0;r--)e.pop()}(n,t[o]),i.fromCharCode.apply(i,n)},n=function(e){var t=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(e=e.replace(/\s/g,"")).indexOf(">")&&(e=e.substr(0,e.indexOf(">"))),e.length%2&&(e+="0"),!1===t.test(e))return"";for(var r="",n=0;n<e.length;n+=2)r+=String.fromCharCode("0x"+(e[n]+e[n+1]));return r},a=function(e){for(var t=new Uint8Array(e.length),r=e.length;r--;)t[r]=e.charCodeAt(r);return(t=$(t)).reduce(function(e,t){return e+String.fromCharCode(t)},"")};e.processDataByFilters=function(e,s){var i=0,o=e||"",l=[];for("string"==typeof(s=s||[])&&(s=[s]),i=0;i<s.length;i+=1)switch(s[i]){case"ASCII85Decode":case"/ASCII85Decode":o=r(o),l.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":o=t(o),l.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":o=n(o),l.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":o=o.split("").map(function(e){return("0"+e.charCodeAt().toString(16)).slice(-2)}).join("")+">",l.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":o=a(o),l.push("/FlateDecode");break;default:throw new Error('The filter: "'+s[i]+'" is not implemented')}return{data:o,reverseChain:l.reverse().join(" ")}}}(De.API),(Bt=De.API).loadFile=function(e,t,r){return function(e,t,r){t=!1!==t,r="function"==typeof r?r:function(){};var n=void 0;try{n=function(e,t,r){var n=new XMLHttpRequest,a=0,s=function(e){var t=e.length,r=[],n=String.fromCharCode;for(a=0;a<t;a+=1)r.push(n(255&e.charCodeAt(a)));return r.join("")};if(n.open("GET",e,!t),n.overrideMimeType("text/plain; charset=x-user-defined"),!1===t&&(n.onload=function(){200===n.status?r(s(this.responseText)):r(void 0)}),n.send(null),t&&200===n.status)return s(n.responseText)}(e,t,r)}catch(e){}return n}(e,t,r)},Bt.loadImageFile=Bt.loadFile,function(e){function t(){return(ee.html2canvas?Promise.resolve(ee.html2canvas):r.e(239).then(r.t.bind(r,5239,23))).catch(function(e){return Promise.reject(new Error("Could not load html2canvas: "+e))}).then(function(e){return e.default?e.default:e})}function a(){return(ee.DOMPurify?Promise.resolve(ee.DOMPurify):r.e(213).then(r.t.bind(r,6213,23))).catch(function(e){return Promise.reject(new Error("Could not load dompurify: "+e))}).then(function(e){return e.default?e.default:e})}var s=function(e){var t=(0,n.A)(e);return"undefined"===t?"undefined":"string"===t||e instanceof String?"string":"number"===t||e instanceof Number?"number":"function"===t||e instanceof Function?"function":e&&e.constructor===Array?"array":e&&1===e.nodeType?"element":"object"===t?"object":"unknown"},i=function(e,t){var r=document.createElement(e);for(var n in t.className&&(r.className=t.className),t.innerHTML&&t.dompurify&&(r.innerHTML=t.dompurify.sanitize(t.innerHTML)),t.style)r.style[n]=t.style[n];return r},o=function e(t){var r=Object.assign(e.convert(Promise.resolve()),JSON.parse(JSON.stringify(e.template))),n=e.convert(Promise.resolve(),r);return(n=n.setProgress(1,e,1,[e])).set(t)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(e,t){return e.__proto__=t||o.prototype,e},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(e,t){return this.then(function(){switch(t=t||function(e){switch(s(e)){case"string":return"string";case"element":return"canvas"===e.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(e)){case"string":return this.then(a).then(function(t){return this.set({src:i("div",{innerHTML:e,dompurify:t})})});case"element":return this.set({src:e});case"canvas":return this.set({canvas:e});case"img":return this.set({img:e});default:return this.error("Unknown source type.")}})},o.prototype.to=function(e){switch(e){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var e={position:"relative",display:"inline-block",width:("number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},t=function e(t,r){for(var n=3===t.nodeType?document.createTextNode(t.nodeValue):t.cloneNode(!1),a=t.firstChild;a;a=a.nextSibling)!0!==r&&1===a.nodeType&&"SCRIPT"===a.nodeName||n.appendChild(e(a,r));return 1===t.nodeType&&("CANVAS"===t.nodeName?(n.width=t.width,n.height=t.height,n.getContext("2d").drawImage(t,0,0)):"TEXTAREA"!==t.nodeName&&"SELECT"!==t.nodeName||(n.value=t.value),n.addEventListener("load",function(){n.scrollTop=t.scrollTop,n.scrollLeft=t.scrollLeft},!0)),n}(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===t.tagName&&(e.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:e}),this.prop.container.appendChild(t),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then(function(e){var t=Object.assign({},this.opt.html2canvas);return delete t.onrendered,e(this.prop.container,t)}).then(function(e){(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then(function(e){var t=this.opt.jsPDF,r=this.opt.fontFaces,n="number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,a=Object.assign({async:!0,allowTaint:!0,scale:n,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete a.onrendered,t.context2d.autoPaging=void 0===this.opt.autoPaging||this.opt.autoPaging,t.context2d.posX=this.opt.x,t.context2d.posY=this.opt.y,t.context2d.margin=this.opt.margin,t.context2d.fontFaces=r,r)for(var s=0;s<r.length;++s){var i=r[s],o=i.src.find(function(e){return"truetype"===e.format});o&&t.addFont(o.url,i.ref.name,i.ref.style)}return a.windowHeight=a.windowHeight||0,a.windowHeight=0==a.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):a.windowHeight,t.context2d.save(!0),e(this.prop.container,a)}).then(function(e){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var e=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=e})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(e,t,r){return"img"===(r=r||"pdf").toLowerCase()||"image"===r.toLowerCase()?this.outputImg(e,t):this.outputPdf(e,t)},o.prototype.outputPdf=function(e,t){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(e,t)})},o.prototype.outputImg=function(e){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(e){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+e+'" is not supported.'}})},o.prototype.save=function(e){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(e?{filename:e}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(e){if("object"!==s(e))return this;var t=Object.keys(e||{}).map(function(t){if(t in o.template.prop)return function(){this.prop[t]=e[t]};switch(t){case"margin":return this.setMargin.bind(this,e.margin);case"jsPDF":return function(){return this.opt.jsPDF=e.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,e.pageSize);default:return function(){this.opt[t]=e[t]}}},this);return this.then(function(){return this.thenList(t)})},o.prototype.get=function(e,t){return this.then(function(){var r=e in o.template.prop?this.prop[e]:this.opt[e];return t?t(r):r})},o.prototype.setMargin=function(e){return this.then(function(){switch(s(e)){case"number":e=[e,e,e,e];case"array":if(2===e.length&&(e=[e[0],e[1],e[0],e[1]]),4===e.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=e}).then(this.setPageSize)},o.prototype.setPageSize=function(e){function t(e,t){return Math.floor(e*t/72*96)}return this.then(function(){(e=e||De.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(e.inner={width:e.width-this.opt.margin[1]-this.opt.margin[3],height:e.height-this.opt.margin[0]-this.opt.margin[2]},e.inner.px={width:t(e.inner.width,e.k),height:t(e.inner.height,e.k)},e.inner.ratio=e.inner.height/e.inner.width),this.prop.pageSize=e})},o.prototype.setProgress=function(e,t,r,n){return null!=e&&(this.progress.val=e),null!=t&&(this.progress.state=t),null!=r&&(this.progress.n=r),null!=n&&(this.progress.stack=n),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(e,t,r,n){return this.setProgress(e?this.progress.val+e:null,t||null,r?this.progress.n+r:null,n?this.progress.stack.concat(n):null)},o.prototype.then=function(e,t){var r=this;return this.thenCore(e,t,function(e,t){return r.updateProgress(null,null,1,[e]),Promise.prototype.then.call(this,function(t){return r.updateProgress(null,e),t}).then(e,t).then(function(e){return r.updateProgress(1),e})})},o.prototype.thenCore=function(e,t,r){r=r||Promise.prototype.then,e&&(e=e.bind(this)),t&&(t=t.bind(this));var n=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?this:o.convert(Object.assign({},this),Promise.prototype),a=r.call(n,e,t);return o.convert(a,this.__proto__)},o.prototype.thenExternal=function(e,t){return Promise.prototype.then.call(this,e,t)},o.prototype.thenList=function(e){var t=this;return e.forEach(function(e){t=t.thenCore(e)}),t},o.prototype.catch=function(e){e&&(e=e.bind(this));var t=Promise.prototype.catch.call(this,e);return o.convert(t,this)},o.prototype.catchExternal=function(e){return Promise.prototype.catch.call(this,e)},o.prototype.error=function(e){return this.then(function(){throw new Error(e)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,De.getPageSize=function(e,t,r){if("object"===(0,n.A)(e)){var a=e;e=a.orientation,t=a.unit||t,r=a.format||r}t=t||"mm",r=r||"a4",e=(""+(e||"P")).toLowerCase();var s,i=(""+r).toLowerCase(),o={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(t){case"pt":s=1;break;case"mm":s=72/25.4;break;case"cm":s=72/2.54;break;case"in":s=72;break;case"px":s=.75;break;case"pc":case"em":s=12;break;case"ex":s=6;break;default:throw"Invalid unit: "+t}var l,c=0,d=0;if(o.hasOwnProperty(i))c=o[i][1]/s,d=o[i][0]/s;else try{c=r[1],d=r[0]}catch(Bt){throw new Error("Invalid format: "+r)}if("p"===e||"portrait"===e)e="p",d>c&&(l=d,d=c,c=l);else{if("l"!==e&&"landscape"!==e)throw"Invalid orientation: "+e;e="l",c>d&&(l=d,d=c,c=l)}return{width:d,height:c,unit:t,k:s,orientation:e}},e.html=function(e,t){(t=t||{}).callback=t.callback||function(){},t.html2canvas=t.html2canvas||{},t.html2canvas.canvas=t.html2canvas.canvas||this.canvas,t.jsPDF=t.jsPDF||this,t.fontFaces=t.fontFaces?t.fontFaces.map(Ct):null;var r=new o(t);return t.worker?r:r.from(e).doCallback()}}(De.API),De.API.addJS=function(e){return Ft=e,this.internal.events.subscribe("postPutResources",function(){Mt=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Mt+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Rt=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Ft+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){void 0!==Mt&&void 0!==Rt&&this.internal.out("/Names <</JavaScript "+Mt+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var e=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var n=e.outline.render().split(/\r\n/),a=0;a<n.length;a++){var s=n[a],i=r.exec(s);if(null!=i){var o=i[1];e.internal.newObjectDeferredBegin(o,!1)}e.internal.write(s)}if(this.outline.createNamedDestinations){var l=this.internal.pages.length,c=[];for(a=0;a<l;a++){var d=e.internal.newObject();c.push(d);var u=e.internal.getPageInfo(a+1);e.internal.write("<< /D["+u.objId+" 0 R /XYZ null null null]>> endobj")}var h=e.internal.newObject();for(e.internal.write("<< /Names [ "),a=0;a<c.length;a++)e.internal.write("(page_"+(a+1)+")"+c[a]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+h+" 0 R"),e.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(e,t,r){var n={title:t,options:r,children:[]};return null==e&&(e=this.root),e.children.push(n),n},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(t){t.id=e.internal.newObjectDeferred();for(var r=0;r<t.children.length;r++)this.genIds_r(t.children[r])},e.outline.renderRoot=function(e){this.objStart(e),this.line("/Type /Outlines"),e.children.length>0&&(this.line("/First "+this.makeRef(e.children[0])),this.line("/Last "+this.makeRef(e.children[e.children.length-1]))),this.line("/Count "+this.count_r({count:0},e)),this.objEnd()},e.outline.renderItems=function(t){for(var r=this.ctx.pdf.internal.getVerticalCoordinateString,n=0;n<t.children.length;n++){var a=t.children[n];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(t)),n>0&&this.line("/Prev "+this.makeRef(t.children[n-1])),n<t.children.length-1&&this.line("/Next "+this.makeRef(t.children[n+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var s=this.count=this.count_r({count:0},a);if(s>0&&this.line("/Count "+s),a.options&&a.options.pageNumber){var i=e.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+i.objId+" 0 R /XYZ 0 "+r(0)+" 0]")}this.objEnd()}for(var o=0;o<t.children.length;o++)this.renderItems(t.children[o])},e.outline.line=function(e){this.ctx.val+=e+"\r\n"},e.outline.makeRef=function(e){return e.id+" 0 R"},e.outline.makeString=function(t){return"("+e.internal.pdfEscape(t)+")"},e.outline.objStart=function(e){this.ctx.val+="\r\n"+e.id+" 0 obj\r\n<<\r\n"},e.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},e.outline.count_r=function(e,t){for(var r=0;r<t.children.length;r++)e.count++,this.count_r(e,t.children[r]);return e.count}}])}(De.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(e,r,n,a,s,i){var o,l=this.decode.DCT_DECODE,c=null;if("string"==typeof e||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=s||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,(o=function(e){for(var r,n=256*e.charCodeAt(4)+e.charCodeAt(5),a=e.length,s={width:0,height:0,numcomponents:1},i=4;i<a;i+=2){if(i+=n,-1!==t.indexOf(e.charCodeAt(i+1))){r=256*e.charCodeAt(i+5)+e.charCodeAt(i+6),s={width:256*e.charCodeAt(i+7)+e.charCodeAt(i+8),height:r,numcomponents:e.charCodeAt(i+9)};break}n=256*e.charCodeAt(i+2)+e.charCodeAt(i+3)}return s}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e)).numcomponents){case 1:i=this.color_spaces.DEVICE_GRAY;break;case 4:i=this.color_spaces.DEVICE_CMYK;break;case 3:i=this.color_spaces.DEVICE_RGB}c={data:e,width:o.width,height:o.height,colorSpace:i,bitsPerComponent:8,filter:l,index:r,alias:n}}return c}}(De.API);var Ut,qt,Wt,Vt,Ht,Gt=function(){var e,t,r;function n(e){var t,r,n,a,s,i,o,l,c,d,u,h,m,p;for(this.data=e,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},i=null;;){switch(t=this.readUInt32(),c=function(){var e,t;for(t=[],e=0;e<4;++e)t.push(String.fromCharCode(this.data[this.pos++]));return t}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(t);break;case"fcTL":i&&this.animation.frames.push(i),this.pos+=4,i={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},s=this.readUInt16(),a=this.readUInt16()||100,i.delay=1e3*s/a,i.disposeOp=this.data[this.pos++],i.blendOp=this.data[this.pos++],i.data=[];break;case"IDAT":case"fdAT":for("fdAT"===c&&(this.pos+=4,t-=4),e=(null!=i?i.data:void 0)||this.imgData,h=0;0<=t?h<t:h>t;0<=t?++h:--h)e.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(n=this.palette.length/3,this.transparency.indexed=this.read(t),this.transparency.indexed.length>n)throw new Error("More transparent colors than palette size");if((d=n-this.transparency.indexed.length)>0)for(m=0;0<=d?m<d:m>d;0<=d?++m:--m)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(t)[0];break;case 2:this.transparency.rgb=this.read(t)}break;case"tEXt":o=(u=this.read(t)).indexOf(0),l=String.fromCharCode.apply(String,u.slice(0,o)),this.text[l]=String.fromCharCode.apply(String,u.slice(o+1));break;case"IEND":return i&&this.animation.frames.push(i),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(p=this.colorType)||6===p,r=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*r,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=t}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;0<=e?++t:--t)r.push(this.data[this.pos++]);return r},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(e){var t=this.pixelBitlength/8,r=new Uint8Array(this.width*this.height*t),n=0,a=this;if(null==e&&(e=this.imgData),0===e.length)return new Uint8Array(0);function s(s,i,o,l){var c,d,u,h,m,p,f,g,x,y,v,b,j,w,N,_,k,S,A,C,E,T=Math.ceil((a.width-s)/o),P=Math.ceil((a.height-i)/l),O=a.width==T&&a.height==P;for(w=t*T,b=O?r:new Uint8Array(w*P),p=e.length,j=0,d=0;j<P&&n<p;){switch(e[n++]){case 0:for(h=k=0;k<w;h=k+=1)b[d++]=e[n++];break;case 1:for(h=S=0;S<w;h=S+=1)c=e[n++],m=h<t?0:b[d-t],b[d++]=(c+m)%256;break;case 2:for(h=A=0;A<w;h=A+=1)c=e[n++],u=(h-h%t)/t,N=j&&b[(j-1)*w+u*t+h%t],b[d++]=(N+c)%256;break;case 3:for(h=C=0;C<w;h=C+=1)c=e[n++],u=(h-h%t)/t,m=h<t?0:b[d-t],N=j&&b[(j-1)*w+u*t+h%t],b[d++]=(c+Math.floor((m+N)/2))%256;break;case 4:for(h=E=0;E<w;h=E+=1)c=e[n++],u=(h-h%t)/t,m=h<t?0:b[d-t],0===j?N=_=0:(N=b[(j-1)*w+u*t+h%t],_=u&&b[(j-1)*w+(u-1)*t+h%t]),f=m+N-_,g=Math.abs(f-m),y=Math.abs(f-N),v=Math.abs(f-_),x=g<=y&&g<=v?m:y<=v?N:_,b[d++]=(c+x)%256;break;default:throw new Error("Invalid filter algorithm: "+e[n-1])}if(!O){var D=((i+j*l)*a.width+s)*t,I=j*w;for(h=0;h<T;h+=1){for(var L=0;L<t;L+=1)r[D++]=b[I++];D+=(o-1)*t}}j++}}return e=J(e),1==a.interlaceMethod?(s(0,0,8,8),s(4,0,8,8),s(0,4,4,8),s(2,0,4,4),s(0,2,2,4),s(1,0,2,2),s(0,1,1,2)):s(0,0,1,1),r},n.prototype.decodePalette=function(){var e,t,r,n,a,s,i,o,l;for(r=this.palette,s=this.transparency.indexed||[],a=new Uint8Array((s.length||0)+r.length),n=0,e=0,t=i=0,o=r.length;i<o;t=i+=3)a[n++]=r[t],a[n++]=r[t+1],a[n++]=r[t+2],a[n++]=null!=(l=s[e++])?l:255;return a},n.prototype.copyToImageData=function(e,t){var r,n,a,s,i,o,l,c,d,u,h;if(n=this.colors,d=null,r=this.hasAlphaChannel,this.palette.length&&(d=null!=(h=this._decodedPalette)?h:this._decodedPalette=this.decodePalette(),n=4,r=!0),c=(a=e.data||e).length,i=d||t,s=o=0,1===n)for(;s<c;)l=d?4*t[s/4]:o,u=i[l++],a[s++]=u,a[s++]=u,a[s++]=u,a[s++]=r?i[l++]:255,o=l;else for(;s<c;)l=d?4*t[s/4]:o,a[s++]=i[l++],a[s++]=i[l++],a[s++]=i[l++],a[s++]=r?i[l++]:255,o=l},n.prototype.decode=function(){var e;return e=new Uint8Array(this.width*this.height*4),this.copyToImageData(e,this.decodePixels()),e};var a=function(){if("[object Window]"===Object.prototype.toString.call(ee)){try{t=ee.document.createElement("canvas"),r=t.getContext("2d")}catch(e){return!1}return!0}return!1};return a(),e=function(e){var n;if(!0===a())return r.width=e.width,r.height=e.height,r.clearRect(0,0,e.width,e.height),r.putImageData(e,0,0),(n=new Image).src=t.toDataURL(),n;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(t){var r,n,a,s,i,o,l,c;if(this.animation){for(c=[],n=i=0,o=(l=this.animation.frames).length;i<o;n=++i)r=l[n],a=t.createImageData(r.width,r.height),s=this.decodePixels(new Uint8Array(r.data)),this.copyToImageData(a,s),r.imageData=a,c.push(r.image=e(a));return c}},n.prototype.renderFrame=function(e,t){var r,n,a;return r=(n=this.animation.frames)[t],a=n[t-1],0===t&&e.clearRect(0,0,this.width,this.height),1===(null!=a?a.disposeOp:void 0)?e.clearRect(a.xOffset,a.yOffset,a.width,a.height):2===(null!=a?a.disposeOp:void 0)&&e.putImageData(a.imageData,a.xOffset,a.yOffset),0===r.blendOp&&e.clearRect(r.xOffset,r.yOffset,r.width,r.height),e.drawImage(r.image,r.xOffset,r.yOffset)},n.prototype.animate=function(e){var t,r,n,a,s,i,o=this;return r=0,i=this.animation,a=i.numFrames,n=i.frames,s=i.numPlays,(t=function(){var i,l;if(i=r++%a,l=n[i],o.renderFrame(e,i),a>1&&r/a<s)return o.animation._timeout=setTimeout(t,l.delay)})()},n.prototype.stopAnimation=function(){var e;return clearTimeout(null!=(e=this.animation)?e._timeout:void 0)},n.prototype.render=function(e){var t,r;return e._png&&e._png.stopAnimation(),e._png=this,e.width=this.width,e.height=this.height,t=e.getContext("2d"),this.animation?(this.decodeFrames(t),this.animate(t)):(r=t.createImageData(this.width,this.height),this.copyToImageData(r,this.decodePixels()),t.putImageData(r,0,0))},n}();function Kt(e){var t=0;if(71!==e[t++]||73!==e[t++]||70!==e[t++]||56!==e[t++]||56!=(e[t++]+1&253)||97!==e[t++])throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,a=e[t++],s=a>>7,i=1<<1+(7&a);e[t++],e[t++];var o=null,l=null;s&&(o=t,l=i,t+=3*i);var c=!0,d=[],u=0,h=null,m=0,p=null;for(this.width=r,this.height=n;c&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(11!==e[t]||78==e[t+1]&&69==e[t+2]&&84==e[t+3]&&83==e[t+4]&&67==e[t+5]&&65==e[t+6]&&80==e[t+7]&&69==e[t+8]&&50==e[t+9]&&46==e[t+10]&&48==e[t+11]&&3==e[t+12]&&1==e[t+13]&&0==e[t+16])t+=14,p=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((A=e[t++])>=0))throw Error("Invalid block size");if(0===A)break;t+=A}break;case 249:if(4!==e[t++]||0!==e[t+4])throw new Error("Invalid graphics extension block.");var f=e[t++];u=e[t++]|e[t++]<<8,h=e[t++],0==(1&f)&&(h=null),m=f>>2&7,t++;break;case 254:for(;;){if(!((A=e[t++])>=0))throw Error("Invalid block size");if(0===A)break;t+=A}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var g=e[t++]|e[t++]<<8,x=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,v=e[t++]|e[t++]<<8,b=e[t++],j=b>>6&1,w=1<<1+(7&b),N=o,_=l,k=!1;b>>7&&(k=!0,N=t,_=w,t+=3*w);var S=t;for(t++;;){var A;if(!((A=e[t++])>=0))throw Error("Invalid block size");if(0===A)break;t+=A}d.push({x:g,y:x,width:y,height:v,has_local_palette:k,palette_offset:N,palette_size:_,data_offset:S,data_length:t-S,transparent_index:h,interlaced:!!j,delay:u,disposal:m});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return p},this.frameInfo=function(e){if(e<0||e>=d.length)throw new Error("Frame index out of range.");return d[e]},this.decodeAndBlitFrameBGRA=function(t,n){var a=this.frameInfo(t),s=a.width*a.height,i=new Uint8Array(s);Yt(e,a.data_offset,i,s);var o=a.palette_offset,l=a.transparent_index;null===l&&(l=256);var c=a.width,d=r-c,u=c,h=4*(a.y*r+a.x),m=4*((a.y+a.height)*r+a.x),p=h,f=4*d;!0===a.interlaced&&(f+=4*r*7);for(var g=8,x=0,y=i.length;x<y;++x){var v=i[x];if(0===u&&(u=c,(p+=f)>=m&&(f=4*d+4*r*(g-1),p=h+(c+d)*(g<<1),g>>=1)),v===l)p+=4;else{var b=e[o+3*v],j=e[o+3*v+1],w=e[o+3*v+2];n[p++]=w,n[p++]=j,n[p++]=b,n[p++]=255}--u}},this.decodeAndBlitFrameRGBA=function(t,n){var a=this.frameInfo(t),s=a.width*a.height,i=new Uint8Array(s);Yt(e,a.data_offset,i,s);var o=a.palette_offset,l=a.transparent_index;null===l&&(l=256);var c=a.width,d=r-c,u=c,h=4*(a.y*r+a.x),m=4*((a.y+a.height)*r+a.x),p=h,f=4*d;!0===a.interlaced&&(f+=4*r*7);for(var g=8,x=0,y=i.length;x<y;++x){var v=i[x];if(0===u&&(u=c,(p+=f)>=m&&(f=4*d+4*r*(g-1),p=h+(c+d)*(g<<1),g>>=1)),v===l)p+=4;else{var b=e[o+3*v],j=e[o+3*v+1],w=e[o+3*v+2];n[p++]=b,n[p++]=j,n[p++]=w,n[p++]=255}--u}}}function Yt(e,t,r,n){for(var a=e[t++],s=1<<a,i=s+1,o=i+1,l=a+1,c=(1<<l)-1,d=0,u=0,h=0,m=e[t++],p=new Int32Array(4096),f=null;;){for(;d<16&&0!==m;)u|=e[t++]<<d,d+=8,1===m?m=e[t++]:--m;if(d<l)break;var g=u&c;if(u>>=l,d-=l,g!==s){if(g===i)break;for(var x=g<o?g:f,y=0,v=x;v>s;)v=p[v]>>8,++y;var b=v;if(h+y+(x!==g?1:0)>n)return void re.log("Warning, gif stream longer than expected.");r[h++]=b;var j=h+=y;for(x!==g&&(r[h++]=b),v=x;y--;)v=p[v],r[--j]=255&v,v>>=8;null!==f&&o<4096&&(p[o++]=f<<8|b,o>=c+1&&l<12&&(++l,c=c<<1|1)),f=g}else o=i+1,c=(1<<(l=a+1))-1,f=null}return h!==n&&re.log("Warning, gif stream shorter than expected."),r}function Xt(e){var t,r,n,a,s,i=Math.floor,o=new Array(64),l=new Array(64),c=new Array(64),d=new Array(64),u=new Array(65535),h=new Array(65535),m=new Array(64),p=new Array(64),f=[],g=0,x=7,y=new Array(64),v=new Array(64),b=new Array(64),j=new Array(256),w=new Array(2048),N=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],_=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],k=[0,1,2,3,4,5,6,7,8,9,10,11],S=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],A=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],C=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],E=[0,1,2,3,4,5,6,7,8,9,10,11],T=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],P=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function O(e,t){for(var r=0,n=0,a=new Array,s=1;s<=16;s++){for(var i=1;i<=e[s];i++)a[t[n]]=[],a[t[n]][0]=r,a[t[n]][1]=s,n++,r++;r*=2}return a}function D(e){for(var t=e[0],r=e[1]-1;r>=0;)t&1<<r&&(g|=1<<x),r--,--x<0&&(255==g?(I(255),I(0)):I(g),x=7,g=0)}function I(e){f.push(e)}function L(e){I(e>>8&255),I(255&e)}function M(e,t,r,n,a){for(var s,i=a[0],o=a[240],l=function(e,t){var r,n,a,s,i,o,l,c,d,u,h=0;for(d=0;d<8;++d){r=e[h],n=e[h+1],a=e[h+2],s=e[h+3],i=e[h+4],o=e[h+5],l=e[h+6];var p=r+(c=e[h+7]),f=r-c,g=n+l,x=n-l,y=a+o,v=a-o,b=s+i,j=s-i,w=p+b,N=p-b,_=g+y,k=g-y;e[h]=w+_,e[h+4]=w-_;var S=.707106781*(k+N);e[h+2]=N+S,e[h+6]=N-S;var A=.382683433*((w=j+v)-(k=x+f)),C=.5411961*w+A,E=1.306562965*k+A,T=.707106781*(_=v+x),P=f+T,O=f-T;e[h+5]=O+C,e[h+3]=O-C,e[h+1]=P+E,e[h+7]=P-E,h+=8}for(h=0,d=0;d<8;++d){r=e[h],n=e[h+8],a=e[h+16],s=e[h+24],i=e[h+32],o=e[h+40],l=e[h+48];var D=r+(c=e[h+56]),I=r-c,L=n+l,M=n-l,R=a+o,F=a-o,B=s+i,z=s-i,U=D+B,q=D-B,W=L+R,V=L-R;e[h]=U+W,e[h+32]=U-W;var H=.707106781*(V+q);e[h+16]=q+H,e[h+48]=q-H;var G=.382683433*((U=z+F)-(V=M+I)),K=.5411961*U+G,Y=1.306562965*V+G,X=.707106781*(W=F+M),Q=I+X,$=I-X;e[h+40]=$+K,e[h+24]=$-K,e[h+8]=Q+Y,e[h+56]=Q-Y,h++}for(d=0;d<64;++d)u=e[d]*t[d],m[d]=u>0?u+.5|0:u-.5|0;return m}(e,t),c=0;c<64;++c)p[N[c]]=l[c];var d=p[0]-r;r=p[0],0==d?D(n[0]):(D(n[h[s=32767+d]]),D(u[s]));for(var f=63;f>0&&0==p[f];)f--;if(0==f)return D(i),r;for(var g,x=1;x<=f;){for(var y=x;0==p[x]&&x<=f;)++x;var v=x-y;if(v>=16){g=v>>4;for(var b=1;b<=g;++b)D(o);v&=15}s=32767+p[x],D(a[(v<<4)+h[s]]),D(u[s]),x++}return 63!=f&&D(i),r}function R(e){e=Math.min(Math.max(e,1),100),s!=e&&(function(e){for(var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],r=0;r<64;r++){var n=i((t[r]*e+50)/100);n=Math.min(Math.max(n,1),255),o[N[r]]=n}for(var a=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],s=0;s<64;s++){var u=i((a[s]*e+50)/100);u=Math.min(Math.max(u,1),255),l[N[s]]=u}for(var h=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],m=0,p=0;p<8;p++)for(var f=0;f<8;f++)c[m]=1/(o[N[m]]*h[p]*h[f]*8),d[m]=1/(l[N[m]]*h[p]*h[f]*8),m++}(e<50?Math.floor(5e3/e):Math.floor(200-2*e)),s=e)}this.encode=function(e,s){s&&R(s),f=new Array,g=0,x=7,L(65496),L(65504),L(16),I(74),I(70),I(73),I(70),I(0),I(1),I(1),I(0),L(1),L(1),I(0),I(0),function(){L(65499),L(132),I(0);for(var e=0;e<64;e++)I(o[e]);I(1);for(var t=0;t<64;t++)I(l[t])}(),function(e,t){L(65472),L(17),I(8),L(t),L(e),I(3),I(1),I(17),I(0),I(2),I(17),I(1),I(3),I(17),I(1)}(e.width,e.height),function(){L(65476),L(418),I(0);for(var e=0;e<16;e++)I(_[e+1]);for(var t=0;t<=11;t++)I(k[t]);I(16);for(var r=0;r<16;r++)I(S[r+1]);for(var n=0;n<=161;n++)I(A[n]);I(1);for(var a=0;a<16;a++)I(C[a+1]);for(var s=0;s<=11;s++)I(E[s]);I(17);for(var i=0;i<16;i++)I(T[i+1]);for(var o=0;o<=161;o++)I(P[o])}(),L(65498),L(12),I(3),I(1),I(0),I(2),I(17),I(3),I(17),I(0),I(63),I(0);var i=0,u=0,h=0;g=0,x=7,this.encode.displayName="_encode_";for(var m,p,j,N,O,F,B,z,U,q=e.data,W=e.width,V=e.height,H=4*W,G=0;G<V;){for(m=0;m<H;){for(O=H*G+m,B=-1,z=0,U=0;U<64;U++)F=O+(z=U>>3)*H+(B=4*(7&U)),G+z>=V&&(F-=H*(G+1+z-V)),m+B>=H&&(F-=m+B-H+4),p=q[F++],j=q[F++],N=q[F++],y[U]=(w[p]+w[j+256|0]+w[N+512|0]>>16)-128,v[U]=(w[p+768|0]+w[j+1024|0]+w[N+1280|0]>>16)-128,b[U]=(w[p+1280|0]+w[j+1536|0]+w[N+1792|0]>>16)-128;i=M(y,c,i,t,n),u=M(v,d,u,r,a),h=M(b,d,h,r,a),m+=32}G+=8}if(x>=0){var K=[];K[1]=x+1,K[0]=(1<<x+1)-1,D(K)}return L(65497),new Uint8Array(f)},e=e||50,function(){for(var e=String.fromCharCode,t=0;t<256;t++)j[t]=e(t)}(),t=O(_,k),r=O(C,E),n=O(S,A),a=O(T,P),function(){for(var e=1,t=2,r=1;r<=15;r++){for(var n=e;n<t;n++)h[32767+n]=r,u[32767+n]=[],u[32767+n][1]=r,u[32767+n][0]=n;for(var a=-(t-1);a<=-e;a++)h[32767+a]=r,u[32767+a]=[],u[32767+a][1]=r,u[32767+a][0]=t-1+a;e<<=1,t<<=1}}(),function(){for(var e=0;e<256;e++)w[e]=19595*e,w[e+256|0]=38470*e,w[e+512|0]=7471*e+32768,w[e+768|0]=-11059*e,w[e+1024|0]=-21709*e,w[e+1280|0]=32768*e+8421375,w[e+1536|0]=-27439*e,w[e+1792|0]=-5329*e}(),R(e)}function Qt(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function $t(e){function t(e){if(!e)throw Error("assert :P")}function r(e,t,r){for(var n=0;4>n;n++)if(e[t+n]!=r.charCodeAt(n))return!0;return!1}function n(e,t,r,n,a){for(var s=0;s<a;s++)e[t+s]=r[n+s]}function a(e,t,r,n){for(var a=0;a<n;a++)e[t+a]=r}function s(e){return new Int32Array(e)}function i(e,t){for(var r=[],n=0;n<e;n++)r.push(new t);return r}function o(e,t){var r=[];return function e(r,n,a){for(var s=a[n],i=0;i<s&&(r.push(a.length>n+1?[]:new t),!(a.length<n+1));i++)e(r[i],n+1,a)}(r,0,e),r}var l=function(){var e=this;function l(e,t){for(var r=1<<t-1>>>0;e&r;)r>>>=1;return r?(e&r-1)+r:e}function c(e,r,n,a,s){t(!(a%n));do{e[r+(a-=n)]=s}while(0<a)}function d(e,r,n,a,i){if(t(2328>=i),512>=i)var o=s(512);else if(null==(o=s(i)))return 0;return function(e,r,n,a,i,o){var d,h,m=r,p=1<<n,f=s(16),g=s(16);for(t(0!=i),t(null!=a),t(null!=e),t(0<n),h=0;h<i;++h){if(15<a[h])return 0;++f[a[h]]}if(f[0]==i)return 0;for(g[1]=0,d=1;15>d;++d){if(f[d]>1<<d)return 0;g[d+1]=g[d]+f[d]}for(h=0;h<i;++h)d=a[h],0<a[h]&&(o[g[d]++]=h);if(1==g[15])return(a=new u).g=0,a.value=o[0],c(e,m,1,p,a),p;var x,y=-1,v=p-1,b=0,j=1,w=1,N=1<<n;for(h=0,d=1,i=2;d<=n;++d,i<<=1){if(j+=w<<=1,0>(w-=f[d]))return 0;for(;0<f[d];--f[d])(a=new u).g=d,a.value=o[h++],c(e,m+b,i,N,a),b=l(b,d)}for(d=n+1,i=2;15>=d;++d,i<<=1){if(j+=w<<=1,0>(w-=f[d]))return 0;for(;0<f[d];--f[d]){if(a=new u,(b&v)!=y){for(m+=N,x=1<<(y=d)-n;15>y&&!(0>=(x-=f[y]));)++y,x<<=1;p+=N=1<<(x=y-n),e[r+(y=b&v)].g=x+n,e[r+y].value=m-r-y}a.g=d-n,a.value=o[h++],c(e,m+(b>>n),i,N,a),b=l(b,d)}}return j!=2*g[15]-1?0:p}(e,r,n,a,i,o)}function u(){this.value=this.g=0}function h(){this.value=this.g=0}function m(){this.G=i(5,u),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(Fr,h)}function p(e,r,n,a){t(null!=e),t(null!=r),t(2147483648>a),e.Ca=254,e.I=0,e.b=-8,e.Ka=0,e.oa=r,e.pa=n,e.Jd=r,e.Yc=n+a,e.Zc=4<=a?n+a-4+1:n,S(e)}function f(e,t){for(var r=0;0<t--;)r|=C(e,128)<<t;return r}function g(e,t){var r=f(e,t);return A(e)?-r:r}function x(e,r,n,a){var s,i=0;for(t(null!=e),t(null!=r),t(4294967288>a),e.Sb=a,e.Ra=0,e.u=0,e.h=0,4<a&&(a=4),s=0;s<a;++s)i+=r[n+s]<<8*s;e.Ra=i,e.bb=a,e.oa=r,e.pa=n}function y(e){for(;8<=e.u&&e.bb<e.Sb;)e.Ra>>>=8,e.Ra+=e.oa[e.pa+e.bb]<<Ur-8>>>0,++e.bb,e.u-=8;N(e)&&(e.h=1,e.u=0)}function v(e,r){if(t(0<=r),!e.h&&r<=zr){var n=w(e)&Br[r];return e.u+=r,y(e),n}return e.h=1,e.u=0}function b(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function j(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function w(e){return e.Ra>>>(e.u&Ur-1)>>>0}function N(e){return t(e.bb<=e.Sb),e.h||e.bb==e.Sb&&e.u>Ur}function _(e,t){e.u=t,e.h=N(e)}function k(e){e.u>=qr&&(t(e.u>=qr),y(e))}function S(e){t(null!=e&&null!=e.oa),e.pa<e.Zc?(e.I=(e.oa[e.pa++]|e.I<<8)>>>0,e.b+=8):(t(null!=e&&null!=e.oa),e.pa<e.Yc?(e.b+=8,e.I=e.oa[e.pa++]|e.I<<8):e.Ka?e.b=0:(e.I<<=8,e.b+=8,e.Ka=1))}function A(e){return f(e,1)}function C(e,t){var r=e.Ca;0>e.b&&S(e);var n=e.b,a=r*t>>>8,s=(e.I>>>n>a)+0;for(s?(r-=a,e.I-=a+1<<n>>>0):r=a+1,n=r,a=0;256<=n;)a+=8,n>>=8;return n=7^a+Wr[n],e.b-=n,e.Ca=(r<<n)-1,s}function E(e,t,r){e[t+0]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r}function T(e,t){return e[t+0]|e[t+1]<<8}function P(e,t){return T(e,t)|e[t+2]<<16}function O(e,t){return T(e,t)|T(e,t+2)<<16}function D(e,r){var n=1<<r;return t(null!=e),t(0<r),e.X=s(n),null==e.X?0:(e.Mb=32-r,e.Xa=r,1)}function I(e,r){t(null!=e),t(null!=r),t(e.Xa==r.Xa),n(r.X,0,e.X,0,1<<r.Xa)}function L(){this.X=[],this.Xa=this.Mb=0}function M(e,r,n,a){t(null!=n),t(null!=a);var s=n[0],i=a[0];return 0==s&&(s=(e*i+r/2)/r),0==i&&(i=(r*s+e/2)/e),0>=s||0>=i?0:(n[0]=s,a[0]=i,1)}function R(e,t){return e+(1<<t)-1>>>t}function F(e,t){return((4278255360&e)+(4278255360&t)>>>0&4278255360)+((16711935&e)+(16711935&t)>>>0&16711935)>>>0}function B(t,r){e[r]=function(r,n,a,s,i,o,l){var c;for(c=0;c<i;++c){var d=e[t](o[l+c-1],a,s+c);o[l+c]=F(r[n+c],d)}}}function z(){this.ud=this.hd=this.jd=0}function U(e,t){return((4278124286&(e^t))>>>1)+(e&t)>>>0}function q(e){return 0<=e&&256>e?e:0>e?0:255<e?255:void 0}function W(e,t){return q(e+(e-t+.5>>1))}function V(e,t,r){return Math.abs(t-r)-Math.abs(e-r)}function H(e,t,r,n,a,s,i){for(n=s[i-1],r=0;r<a;++r)s[i+r]=n=F(e[t+r],n)}function G(e,t,r,n,a){var s;for(s=0;s<r;++s){var i=e[t+s],o=i>>8&255,l=16711935&(l=(l=16711935&i)+((o<<16)+o));n[a+s]=(4278255360&i)+l>>>0}}function K(e,t){t.jd=255&e,t.hd=e>>8&255,t.ud=e>>16&255}function Y(e,t,r,n,a,s){var i;for(i=0;i<n;++i){var o=t[r+i],l=o>>>8,c=o,d=255&(d=(d=o>>>16)+((e.jd<<24>>24)*(l<<24>>24)>>>5));c=255&(c=(c+=(e.hd<<24>>24)*(l<<24>>24)>>>5)+((e.ud<<24>>24)*(d<<24>>24)>>>5)),a[s+i]=(4278255360&o)+(d<<16)+c}}function X(t,r,n,a,s){e[r]=function(e,t,r,n,i,o,l,c,d){for(n=l;n<c;++n)for(l=0;l<d;++l)i[o++]=s(r[a(e[t++])])},e[t]=function(t,r,i,o,l,c,d){var u=8>>t.b,h=t.Ea,m=t.K[0],p=t.w;if(8>u)for(t=(1<<t.b)-1,p=(1<<u)-1;r<i;++r){var f,g=0;for(f=0;f<h;++f)f&t||(g=a(o[l++])),c[d++]=s(m[g&p]),g>>=u}else e["VP8LMapColor"+n](o,l,m,p,c,d,r,i,h)}}function Q(e,t,r,n,a){for(r=t+r;t<r;){var s=e[t++];n[a++]=s>>16&255,n[a++]=s>>8&255,n[a++]=255&s}}function $(e,t,r,n,a){for(r=t+r;t<r;){var s=e[t++];n[a++]=s>>16&255,n[a++]=s>>8&255,n[a++]=255&s,n[a++]=s>>24&255}}function J(e,t,r,n,a){for(r=t+r;t<r;){var s=(i=e[t++])>>16&240|i>>12&15,i=240&i|i>>28&15;n[a++]=s,n[a++]=i}}function Z(e,t,r,n,a){for(r=t+r;t<r;){var s=(i=e[t++])>>16&248|i>>13&7,i=i>>5&224|i>>3&31;n[a++]=s,n[a++]=i}}function ee(e,t,r,n,a){for(r=t+r;t<r;){var s=e[t++];n[a++]=255&s,n[a++]=s>>8&255,n[a++]=s>>16&255}}function te(e,t,r,a,s,i){if(0==i)for(r=t+r;t<r;)E(a,((i=e[t++])[0]>>24|i[1]>>8&65280|i[2]<<8&16711680|i[3]<<24)>>>0),s+=32;else n(a,s,e,t,r)}function re(t,r){e[r][0]=e[t+"0"],e[r][1]=e[t+"1"],e[r][2]=e[t+"2"],e[r][3]=e[t+"3"],e[r][4]=e[t+"4"],e[r][5]=e[t+"5"],e[r][6]=e[t+"6"],e[r][7]=e[t+"7"],e[r][8]=e[t+"8"],e[r][9]=e[t+"9"],e[r][10]=e[t+"10"],e[r][11]=e[t+"11"],e[r][12]=e[t+"12"],e[r][13]=e[t+"13"],e[r][14]=e[t+"0"],e[r][15]=e[t+"0"]}function ne(e){return e==Wn||e==Vn||e==Hn||e==Gn}function ae(){this.eb=[],this.size=this.A=this.fb=0}function se(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ie(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ae,this.f.kb=new se,this.sd=null}function oe(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function le(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ce(e){return alert("todo:WebPSamplerProcessPlane"),e.T}function de(e,t){var r=e.T,a=t.ba.f.RGBA,s=a.eb,i=a.fb+e.ka*a.A,o=xa[t.ba.S],l=e.y,c=e.O,d=e.f,u=e.N,h=e.ea,m=e.W,p=t.cc,f=t.dc,g=t.Mc,x=t.Nc,y=e.ka,v=e.ka+e.T,b=e.U,j=b+1>>1;for(0==y?o(l,c,null,null,d,u,h,m,d,u,h,m,s,i,null,null,b):(o(t.ec,t.fc,l,c,p,f,g,x,d,u,h,m,s,i-a.A,s,i,b),++r);y+2<v;y+=2)p=d,f=u,g=h,x=m,u+=e.Rc,m+=e.Rc,i+=2*a.A,o(l,(c+=2*e.fa)-e.fa,l,c,p,f,g,x,d,u,h,m,s,i-a.A,s,i,b);return c+=e.fa,e.j+v<e.o?(n(t.ec,t.fc,l,c,b),n(t.cc,t.dc,d,u,j),n(t.Mc,t.Nc,h,m,j),r--):1&v||o(l,c,null,null,d,u,h,m,d,u,h,m,s,i+a.A,null,null,b),r}function ue(e,r,n){var a=e.F,s=[e.J];if(null!=a){var i=e.U,o=r.ba.S,l=o==zn||o==Hn;r=r.ba.f.RGBA;var c=[0],d=e.ka;c[0]=e.T,e.Kb&&(0==d?--c[0]:(--d,s[0]-=e.width),e.j+e.ka+e.T==e.o&&(c[0]=e.o-e.j-d));var u=r.eb;d=r.fb+d*r.A,e=kn(a,s[0],e.width,i,c,u,d+(l?0:3),r.A),t(n==c),e&&ne(o)&&Nn(u,d,l,i,c,r.A)}return 0}function he(e){var t=e.ma,r=t.ba.S,n=11>r,a=r==Rn||r==Bn||r==zn||r==Un||12==r||ne(r);if(t.memory=null,t.Ib=null,t.Jb=null,t.Nd=null,!Lr(t.Oa,e,a?11:12))return 0;if(a&&ne(r)&&yr(),e.da)alert("todo:use_scaling");else{if(n){if(t.Ib=ce,e.Kb){if(r=e.U+1>>1,t.memory=s(e.U+2*r),null==t.memory)return 0;t.ec=t.memory,t.fc=0,t.cc=t.ec,t.dc=t.fc+e.U,t.Mc=t.cc,t.Nc=t.dc+r,t.Ib=de,yr()}}else alert("todo:EmitYUV");a&&(t.Jb=ue,n&&gr())}if(n&&!Pa){for(e=0;256>e;++e)Oa[e]=89858*(e-128)+Sa>>ka,La[e]=-22014*(e-128)+Sa,Ia[e]=-45773*(e-128),Da[e]=113618*(e-128)+Sa>>ka;for(e=Aa;e<Ca;++e)t=76283*(e-16)+Sa>>ka,Ma[e-Aa]=He(t,255),Ra[e-Aa]=He(t+8>>4,15);Pa=1}return 1}function me(e){var r=e.ma,n=e.U,a=e.T;return t(!(1&e.ka)),0>=n||0>=a?0:(n=r.Ib(e,r),null!=r.Jb&&r.Jb(e,r,n),r.Dc+=n,1)}function pe(e){e.ma.memory=null}function fe(e,t,r,n){return 47!=v(e,8)?0:(t[0]=v(e,14)+1,r[0]=v(e,14)+1,n[0]=v(e,1),0!=v(e,3)?0:!e.h)}function ge(e,t){if(4>e)return e+1;var r=e-2>>1;return(2+(1&e)<<r)+v(t,r)+1}function xe(e,t){return 120<t?t-120:1<=(r=((r=Jn[t-1])>>4)*e+(8-(15&r)))?r:1;var r}function ye(e,t,r){var n=w(r),a=e[t+=255&n].g-8;return 0<a&&(_(r,r.u+8),n=w(r),t+=e[t].value,t+=n&(1<<a)-1),_(r,r.u+e[t].g),e[t].value}function ve(e,r,n){return n.g+=e.g,n.value+=e.value<<r>>>0,t(8>=n.g),e.g}function be(e,r,n){var a=e.xc;return t((r=0==a?0:e.vc[e.md*(n>>a)+(r>>a)])<e.Wb),e.Ya[r]}function je(e,r,a,s){var i=e.ab,o=e.c*r,l=e.C;r=l+r;var c=a,d=s;for(s=e.Ta,a=e.Ua;0<i--;){var u=e.gc[i],h=l,m=r,p=c,f=d,g=(d=s,c=a,u.Ea);switch(t(h<m),t(m<=u.nc),u.hc){case 2:Gr(p,f,(m-h)*g,d,c);break;case 0:var x=h,y=m,v=d,b=c,j=(S=u).Ea;0==x&&(Vr(p,f,null,null,1,v,b),H(p,f+1,0,0,j-1,v,b+1),f+=j,b+=j,++x);for(var w=1<<S.b,N=w-1,_=R(j,S.b),k=S.K,S=S.w+(x>>S.b)*_;x<y;){var A=k,C=S,E=1;for(Hr(p,f,v,b-j,1,v,b);E<j;){var T=(E&~N)+w;T>j&&(T=j),(0,$r[A[C++]>>8&15])(p,f+ +E,v,b+E-j,T-E,v,b+E),E=T}f+=j,b+=j,++x&N||(S+=_)}m!=u.nc&&n(d,c-g,d,c+(m-h-1)*g,g);break;case 1:for(g=p,y=f,j=(p=u.Ea)-(b=p&~(v=(f=1<<u.b)-1)),x=R(p,u.b),w=u.K,u=u.w+(h>>u.b)*x;h<m;){for(N=w,_=u,k=new z,S=y+b,A=y+p;y<S;)K(N[_++],k),Jr(k,g,y,f,d,c),y+=f,c+=f;y<A&&(K(N[_++],k),Jr(k,g,y,j,d,c),y+=j,c+=j),++h&v||(u+=x)}break;case 3:if(p==d&&f==c&&0<u.b){for(y=d,p=g=c+(m-h)*g-(b=(m-h)*R(u.Ea,u.b)),f=d,v=c,x=[],b=(j=b)-1;0<=b;--b)x[b]=f[v+b];for(b=j-1;0<=b;--b)y[p+b]=x[b];Kr(u,h,m,d,g,d,c)}else Kr(u,h,m,p,f,d,c)}c=s,d=a}d!=a&&n(s,a,c,d,o)}function we(e,r){var n=e.V,a=e.Ba+e.c*e.C,s=r-e.C;if(t(r<=e.l.o),t(16>=s),0<s){var i=e.l,o=e.Ta,l=e.Ua,c=i.width;if(je(e,s,n,a),s=l=[l],t((n=e.C)<(a=r)),t(i.v<i.va),a>i.o&&(a=i.o),n<i.j){var d=i.j-n;n=i.j,s[0]+=d*c}if(n>=a?n=0:(s[0]+=4*i.v,i.ka=n-i.j,i.U=i.va-i.v,i.T=a-n,n=1),n){if(l=l[0],11>(n=e.ca).S){var u=n.f.RGBA,h=(a=n.S,s=i.U,i=i.T,d=u.eb,u.A),m=i;for(u=u.fb+e.Ma*u.A;0<m--;){var p=o,f=l,g=s,x=d,y=u;switch(a){case Mn:Zr(p,f,g,x,y);break;case Rn:en(p,f,g,x,y);break;case Wn:en(p,f,g,x,y),Nn(x,y,0,g,1,0);break;case Fn:nn(p,f,g,x,y);break;case Bn:te(p,f,g,x,y,1);break;case Vn:te(p,f,g,x,y,1),Nn(x,y,0,g,1,0);break;case zn:te(p,f,g,x,y,0);break;case Hn:te(p,f,g,x,y,0),Nn(x,y,1,g,1,0);break;case Un:tn(p,f,g,x,y);break;case Gn:tn(p,f,g,x,y),_n(x,y,g,1,0);break;case qn:rn(p,f,g,x,y);break;default:t(0)}l+=c,u+=h}e.Ma+=i}else alert("todo:EmitRescaledRowsYUVA");t(e.Ma<=n.height)}}e.C=r,t(e.C<=e.i)}function Ne(e){var t;if(0<e.ua)return 0;for(t=0;t<e.Wb;++t){var r=e.Ya[t].G,n=e.Ya[t].H;if(0<r[1][n[1]+0].g||0<r[2][n[2]+0].g||0<r[3][n[3]+0].g)return 0}return 1}function _e(e,r,n,a,s,i){if(0!=e.Z){var o=e.qd,l=e.rd;for(t(null!=ga[e.Z]);r<n;++r)ga[e.Z](o,l,a,s,a,s,i),o=a,l=s,s+=i;e.qd=o,e.rd=l}}function ke(e,r){var n=e.l.ma,a=0==n.Z||1==n.Z?e.l.j:e.C;if(a=e.C<a?a:e.C,t(r<=e.l.o),r>a){var s=e.l.width,i=n.ca,o=n.tb+s*a,l=e.V,c=e.Ba+e.c*a,d=e.gc;t(1==e.ab),t(3==d[0].hc),Xr(d[0],a,r,l,c,i,o),_e(n,a,r,i,o,s)}e.C=e.Ma=r}function Se(e,r,n,a,s,i,o){var l=e.$/a,c=e.$%a,d=e.m,u=e.s,h=n+e.$,m=h;s=n+a*s;var p=n+a*i,f=280+u.ua,g=e.Pb?l:16777216,x=0<u.ua?u.Wa:null,y=u.wc,v=h<p?be(u,c,l):null;t(e.C<i),t(p<=s);var b=!1;e:for(;;){for(;b||h<p;){var j=0;if(l>=g){var S=h-n;t((g=e).Pb),g.wd=g.m,g.xd=S,0<g.s.ua&&I(g.s.Wa,g.s.vb),g=l+ea}if(c&y||(v=be(u,c,l)),t(null!=v),v.Qb&&(r[h]=v.qb,b=!0),!b)if(k(d),v.jc){j=d,S=r;var A=h,C=v.pd[w(j)&Fr-1];t(v.jc),256>C.g?(_(j,j.u+C.g),S[A]=C.value,j=0):(_(j,j.u+C.g-256),t(256<=C.value),j=C.value),0==j&&(b=!0)}else j=ye(v.G[0],v.H[0],d);if(d.h)break;if(b||256>j){if(!b)if(v.nd)r[h]=(v.qb|j<<8)>>>0;else{if(k(d),b=ye(v.G[1],v.H[1],d),k(d),S=ye(v.G[2],v.H[2],d),A=ye(v.G[3],v.H[3],d),d.h)break;r[h]=(A<<24|b<<16|j<<8|S)>>>0}if(b=!1,++h,++c>=a&&(c=0,++l,null!=o&&l<=i&&!(l%16)&&o(e,l),null!=x))for(;m<h;)j=r[m++],x.X[(506832829*j&4294967295)>>>x.Mb]=j}else if(280>j){if(j=ge(j-256,d),S=ye(v.G[4],v.H[4],d),k(d),S=xe(a,S=ge(S,d)),d.h)break;if(h-n<S||s-h<j)break e;for(A=0;A<j;++A)r[h+A]=r[h+A-S];for(h+=j,c+=j;c>=a;)c-=a,++l,null!=o&&l<=i&&!(l%16)&&o(e,l);if(t(h<=s),c&y&&(v=be(u,c,l)),null!=x)for(;m<h;)j=r[m++],x.X[(506832829*j&4294967295)>>>x.Mb]=j}else{if(!(j<f))break e;for(b=j-280,t(null!=x);m<h;)j=r[m++],x.X[(506832829*j&4294967295)>>>x.Mb]=j;j=h,t(!(b>>>(S=x).Xa)),r[j]=S.X[b],b=!0}b||t(d.h==N(d))}if(e.Pb&&d.h&&h<s)t(e.m.h),e.a=5,e.m=e.wd,e.$=e.xd,0<e.s.ua&&I(e.s.vb,e.s.Wa);else{if(d.h)break e;null!=o&&o(e,l>i?i:l),e.a=0,e.$=h-n}return 1}return e.a=3,0}function Ae(e){t(null!=e),e.vc=null,e.yc=null,e.Ya=null;var r=e.Wa;null!=r&&(r.X=null),e.vb=null,t(null!=e)}function Ce(){var t=new ir;return null==t?null:(t.a=0,t.xb=fa,re("Predictor","VP8LPredictors"),re("Predictor","VP8LPredictors_C"),re("PredictorAdd","VP8LPredictorsAdd"),re("PredictorAdd","VP8LPredictorsAdd_C"),Gr=G,Jr=Y,Zr=Q,en=$,tn=J,rn=Z,nn=ee,e.VP8LMapColor32b=Yr,e.VP8LMapColor8b=Qr,t)}function Ee(e,r,n,o,l){var c=1,h=[e],p=[r],f=o.m,g=o.s,x=null,y=0;e:for(;;){if(n)for(;c&&v(f,1);){var b=h,j=p,N=o,S=1,A=N.m,C=N.gc[N.ab],E=v(A,2);if(N.Oc&1<<E)c=0;else{switch(N.Oc|=1<<E,C.hc=E,C.Ea=b[0],C.nc=j[0],C.K=[null],++N.ab,t(4>=N.ab),E){case 0:case 1:C.b=v(A,3)+2,S=Ee(R(C.Ea,C.b),R(C.nc,C.b),0,N,C.K),C.K=C.K[0];break;case 3:var T,P=v(A,8)+1,O=16<P?0:4<P?1:2<P?2:3;if(b[0]=R(C.Ea,O),C.b=O,T=S=Ee(P,1,0,N,C.K)){var I,L=P,M=C,B=1<<(8>>M.b),z=s(B);if(null==z)T=0;else{var U=M.K[0],q=M.w;for(z[0]=M.K[0][0],I=1;I<1*L;++I)z[I]=F(U[q+I],z[I-1]);for(;I<4*B;++I)z[I]=0;M.K[0]=null,M.K[0]=z,T=1}}S=T;break;case 2:break;default:t(0)}c=S}}if(h=h[0],p=p[0],c&&v(f,1)&&!(c=1<=(y=v(f,4))&&11>=y)){o.a=3;break e}var W;if(W=c)t:{var V,H,G,K=o,Y=h,X=p,Q=y,$=n,J=K.m,Z=K.s,ee=[null],te=1,re=0,ne=Zn[Q];r:for(;;){if($&&v(J,1)){var ae=v(J,3)+2,se=R(Y,ae),ie=R(X,ae),oe=se*ie;if(!Ee(se,ie,0,K,ee))break r;for(ee=ee[0],Z.xc=ae,V=0;V<oe;++V){var le=ee[V]>>8&65535;ee[V]=le,le>=te&&(te=le+1)}}if(J.h)break r;for(H=0;5>H;++H){var ce=Xn[H];!H&&0<Q&&(ce+=1<<Q),re<ce&&(re=ce)}var de=i(te*ne,u),ue=te,he=i(ue,m);if(null==he)var me=null;else t(65536>=ue),me=he;var pe=s(re);if(null==me||null==pe||null==de){K.a=1;break r}var fe=de;for(V=G=0;V<te;++V){var ge=me[V],xe=ge.G,ye=ge.H,be=0,je=1,we=0;for(H=0;5>H;++H){ce=Xn[H],xe[H]=fe,ye[H]=G,!H&&0<Q&&(ce+=1<<Q);n:{var Ne,_e=ce,ke=K,Ce=pe,Te=fe,Pe=G,Oe=0,De=ke.m,Ie=v(De,1);if(a(Ce,0,0,_e),Ie){var Le=v(De,1)+1,Me=v(De,1),Re=v(De,0==Me?1:8);Ce[Re]=1,2==Le&&(Ce[Re=v(De,8)]=1);var Fe=1}else{var Be=s(19),ze=v(De,4)+4;if(19<ze){ke.a=3;var Ue=0;break n}for(Ne=0;Ne<ze;++Ne)Be[$n[Ne]]=v(De,3);var qe=void 0,We=void 0,Ve=ke,He=Be,Ge=_e,Ke=Ce,Ye=0,Xe=Ve.m,Qe=8,$e=i(128,u);a:for(;d($e,0,7,He,19);){if(v(Xe,1)){var Je=2+2*v(Xe,3);if((qe=2+v(Xe,Je))>Ge)break a}else qe=Ge;for(We=0;We<Ge&&qe--;){k(Xe);var Ze=$e[0+(127&w(Xe))];_(Xe,Xe.u+Ze.g);var et=Ze.value;if(16>et)Ke[We++]=et,0!=et&&(Qe=et);else{var tt=16==et,rt=et-16,nt=Yn[rt],at=v(Xe,Kn[rt])+nt;if(We+at>Ge)break a;for(var st=tt?Qe:0;0<at--;)Ke[We++]=st}}Ye=1;break a}Ye||(Ve.a=3),Fe=Ye}(Fe=Fe&&!De.h)&&(Oe=d(Te,Pe,8,Ce,_e)),Fe&&0!=Oe?Ue=Oe:(ke.a=3,Ue=0)}if(0==Ue)break r;if(je&&1==Qn[H]&&(je=0==fe[G].g),be+=fe[G].g,G+=Ue,3>=H){var it,ot=pe[0];for(it=1;it<ce;++it)pe[it]>ot&&(ot=pe[it]);we+=ot}}if(ge.nd=je,ge.Qb=0,je&&(ge.qb=(xe[3][ye[3]+0].value<<24|xe[1][ye[1]+0].value<<16|xe[2][ye[2]+0].value)>>>0,0==be&&256>xe[0][ye[0]+0].value&&(ge.Qb=1,ge.qb+=xe[0][ye[0]+0].value<<8)),ge.jc=!ge.Qb&&6>we,ge.jc){var lt,ct=ge;for(lt=0;lt<Fr;++lt){var dt=lt,ut=ct.pd[dt],ht=ct.G[0][ct.H[0]+dt];256<=ht.value?(ut.g=ht.g+256,ut.value=ht.value):(ut.g=0,ut.value=0,dt>>=ve(ht,8,ut),dt>>=ve(ct.G[1][ct.H[1]+dt],16,ut),dt>>=ve(ct.G[2][ct.H[2]+dt],0,ut),ve(ct.G[3][ct.H[3]+dt],24,ut))}}}Z.vc=ee,Z.Wb=te,Z.Ya=me,Z.yc=de,W=1;break t}W=0}if(!(c=W)){o.a=3;break e}if(0<y){if(g.ua=1<<y,!D(g.Wa,y)){o.a=1,c=0;break e}}else g.ua=0;var mt=o,pt=h,ft=p,gt=mt.s,xt=gt.xc;if(mt.c=pt,mt.i=ft,gt.md=R(pt,xt),gt.wc=0==xt?-1:(1<<xt)-1,n){o.xb=pa;break e}if(null==(x=s(h*p))){o.a=1,c=0;break e}c=(c=Se(o,x,0,h,p,p,null))&&!f.h;break e}return c?(null!=l?l[0]=x:(t(null==x),t(n)),o.$=0,n||Ae(g)):Ae(g),c}function Te(e,r){var n=e.c*e.i,a=n+r+16*r;return t(e.c<=r),e.V=s(a),null==e.V?(e.Ta=null,e.Ua=0,e.a=1,0):(e.Ta=e.V,e.Ua=e.Ba+n+r,1)}function Pe(e,r){var n=e.C,a=r-n,s=e.V,i=e.Ba+e.c*n;for(t(r<=e.l.o);0<a;){var o=16<a?16:a,l=e.l.ma,c=e.l.width,d=c*o,u=l.ca,h=l.tb+c*n,m=e.Ta,p=e.Ua;je(e,o,s,i),Sn(m,p,u,h,d),_e(l,n,n+o,u,h,c),a-=o,s+=o*e.c,n+=o}t(n==r),e.C=e.Ma=r}function Oe(){this.ub=this.yd=this.td=this.Rb=0}function De(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ie(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Le(){this.Yb=function(){var e=[];return function e(t,r,n){for(var a=n[r],s=0;s<a&&(t.push(n.length>r+1?[]:0),!(n.length<r+1));s++)e(t[s],r+1,n)}(e,0,[3,11]),e}()}function Me(){this.jb=s(3),this.Wc=o([4,8],Le),this.Xc=o([4,17],Le)}function Re(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Fe(){this.ld=this.La=this.dd=this.tc=0}function Be(){this.Na=this.la=0}function ze(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ue(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function qe(){this.uc=this.M=this.Nb=0,this.wa=Array(new Fe),this.Y=0,this.ya=Array(new Ue),this.aa=0,this.l=new Ge}function We(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Ve(){this.cb=this.a=0,this.sc="",this.m=new b,this.Od=new Oe,this.Kc=new De,this.ed=new Re,this.Qa=new Ie,this.Ic=this.$c=this.Aa=0,this.D=new qe,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,b),this.ia=0,this.pb=i(4,ze),this.Pa=new Me,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new We),this.Hd=0,this.rb=Array(new Be),this.sb=0,this.wa=Array(new Fe),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ue),this.L=this.aa=0,this.gd=o([4,2],Fe),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function He(e,t){return 0>e?0:e>t?t:e}function Ge(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ke(){var e=new Ve;return null!=e&&(e.a=0,e.sc="OK",e.cb=0,e.Xb=0,na||(na=$e)),e}function Ye(e,t,r){return 0==e.a&&(e.a=t,e.sc=r,e.cb=0),0}function Xe(e,t,r){return 3<=r&&157==e[t+0]&&1==e[t+1]&&42==e[t+2]}function Qe(e,r){if(null==e)return 0;if(e.a=0,e.sc="OK",null==r)return Ye(e,2,"null VP8Io passed to VP8GetHeaders()");var n=r.data,s=r.w,i=r.ha;if(4>i)return Ye(e,7,"Truncated header.");var o=n[s+0]|n[s+1]<<8|n[s+2]<<16,l=e.Od;if(l.Rb=!(1&o),l.td=o>>1&7,l.yd=o>>4&1,l.ub=o>>5,3<l.td)return Ye(e,3,"Incorrect keyframe parameters.");if(!l.yd)return Ye(e,4,"Frame not displayable.");s+=3,i-=3;var c=e.Kc;if(l.Rb){if(7>i)return Ye(e,7,"cannot parse picture header");if(!Xe(n,s,i))return Ye(e,3,"Bad code word");c.c=16383&(n[s+4]<<8|n[s+3]),c.Td=n[s+4]>>6,c.i=16383&(n[s+6]<<8|n[s+5]),c.Ud=n[s+6]>>6,s+=7,i-=7,e.za=c.c+15>>4,e.Ub=c.i+15>>4,r.width=c.c,r.height=c.i,r.Da=0,r.j=0,r.v=0,r.va=r.width,r.o=r.height,r.da=0,r.ib=r.width,r.hb=r.height,r.U=r.width,r.T=r.height,a((o=e.Pa).jb,0,255,o.jb.length),t(null!=(o=e.Qa)),o.Cb=0,o.Bb=0,o.Fb=1,a(o.Zb,0,0,o.Zb.length),a(o.Lb,0,0,o.Lb)}if(l.ub>i)return Ye(e,7,"bad partition length");p(o=e.m,n,s,l.ub),s+=l.ub,i-=l.ub,l.Rb&&(c.Ld=A(o),c.Kd=A(o)),c=e.Qa;var d,u=e.Pa;if(t(null!=o),t(null!=c),c.Cb=A(o),c.Cb){if(c.Bb=A(o),A(o)){for(c.Fb=A(o),d=0;4>d;++d)c.Zb[d]=A(o)?g(o,7):0;for(d=0;4>d;++d)c.Lb[d]=A(o)?g(o,6):0}if(c.Bb)for(d=0;3>d;++d)u.jb[d]=A(o)?f(o,8):255}else c.Bb=0;if(o.Ka)return Ye(e,3,"cannot parse segment header");if((c=e.ed).zd=A(o),c.Tb=f(o,6),c.wb=f(o,3),c.Pc=A(o),c.Pc&&A(o)){for(u=0;4>u;++u)A(o)&&(c.vd[u]=g(o,6));for(u=0;4>u;++u)A(o)&&(c.od[u]=g(o,6))}if(e.L=0==c.Tb?0:c.zd?1:2,o.Ka)return Ye(e,3,"cannot parse filter header");var h=i;if(i=d=s,s=d+h,c=h,e.Xb=(1<<f(e.m,2))-1,h<3*(u=e.Xb))n=7;else{for(d+=3*u,c-=3*u,h=0;h<u;++h){var m=n[i+0]|n[i+1]<<8|n[i+2]<<16;m>c&&(m=c),p(e.Jc[+h],n,d,m),d+=m,c-=m,i+=3}p(e.Jc[+u],n,d,c),n=d<s?0:5}if(0!=n)return Ye(e,n,"cannot parse partitions");for(n=f(d=e.m,7),i=A(d)?g(d,4):0,s=A(d)?g(d,4):0,c=A(d)?g(d,4):0,u=A(d)?g(d,4):0,d=A(d)?g(d,4):0,h=e.Qa,m=0;4>m;++m){if(h.Cb){var x=h.Zb[m];h.Fb||(x+=n)}else{if(0<m){e.pb[m]=e.pb[0];continue}x=n}var y=e.pb[m];y.Sc[0]=ta[He(x+i,127)],y.Sc[1]=ra[He(x+0,127)],y.Eb[0]=2*ta[He(x+s,127)],y.Eb[1]=101581*ra[He(x+c,127)]>>16,8>y.Eb[1]&&(y.Eb[1]=8),y.Qc[0]=ta[He(x+u,117)],y.Qc[1]=ra[He(x+d,127)],y.lc=x+d}if(!l.Rb)return Ye(e,4,"Not a key frame.");for(A(o),l=e.Pa,n=0;4>n;++n){for(i=0;8>i;++i)for(s=0;3>s;++s)for(c=0;11>c;++c)u=C(o,ca[n][i][s][c])?f(o,8):oa[n][i][s][c],l.Wc[n][i].Yb[s][c]=u;for(i=0;17>i;++i)l.Xc[n][i]=l.Wc[n][da[i]]}return e.kc=A(o),e.kc&&(e.Bd=f(o,8)),e.cb=1}function $e(e,t,r,n,a,s,i){var o=t[a].Yb[r];for(r=0;16>a;++a){if(!C(e,o[r+0]))return a;for(;!C(e,o[r+1]);)if(o=t[++a].Yb[0],r=0,16==a)return 16;var l=t[a+1].Yb;if(C(e,o[r+2])){var c=e,d=0;if(C(c,(h=o)[(u=r)+3]))if(C(c,h[u+6])){for(o=0,u=2*(d=C(c,h[u+8]))+(h=C(c,h[u+9+d])),d=0,h=aa[u];h[o];++o)d+=d+C(c,h[o]);d+=3+(8<<u)}else C(c,h[u+7])?(d=7+2*C(c,165),d+=C(c,145)):d=5+C(c,159);else d=C(c,h[u+4])?3+C(c,h[u+5]):2;o=l[2]}else d=1,o=l[1];l=i+sa[a],0>(c=e).b&&S(c);var u,h=c.b,m=(u=c.Ca>>1)-(c.I>>h)>>31;--c.b,c.Ca+=m,c.Ca|=1,c.I-=(u+1&m)<<h,s[l]=((d^m)-m)*n[(0<a)+0]}return 16}function Je(e){var t=e.rb[e.sb-1];t.la=0,t.Na=0,a(e.zc,0,0,e.zc.length),e.ja=0}function Ze(e,r){if(null==e)return 0;if(null==r)return Ye(e,2,"NULL VP8Io parameter in VP8Decode().");if(!e.cb&&!Qe(e,r))return 0;if(t(e.cb),null==r.ac||r.ac(r)){r.ob&&(e.L=0);var o=Ba[e.L];if(2==e.L?(e.yb=0,e.zb=0):(e.yb=r.v-o>>4,e.zb=r.j-o>>4,0>e.yb&&(e.yb=0),0>e.zb&&(e.zb=0)),e.Va=r.o+15+o>>4,e.Hb=r.va+15+o>>4,e.Hb>e.za&&(e.Hb=e.za),e.Va>e.Ub&&(e.Va=e.Ub),0<e.L){var l=e.ed;for(o=0;4>o;++o){var c;if(e.Qa.Cb){var d=e.Qa.Lb[o];e.Qa.Fb||(d+=l.Tb)}else d=l.Tb;for(c=0;1>=c;++c){var u=e.gd[o][c],h=d;if(l.Pc&&(h+=l.vd[0],c&&(h+=l.od[0])),0<(h=0>h?0:63<h?63:h)){var m=h;0<l.wb&&(m=4<l.wb?m>>2:m>>1)>9-l.wb&&(m=9-l.wb),1>m&&(m=1),u.dd=m,u.tc=2*h+m,u.ld=40<=h?2:15<=h?1:0}else u.tc=0;u.La=c}}}o=0}else Ye(e,6,"Frame setup failed"),o=e.a;if(o=0==o){if(o){e.$c=0,0<e.Aa||(e.Ic=Ua);e:{o=e.Ic,l=4*(m=e.za);var p=32*m,f=m+1,g=0<e.L?m*(0<e.Aa?2:1):0,x=(2==e.Aa?2:1)*m;if((u=l+832+(c=3*(16*o+Ba[e.L])/2*p)+(d=null!=e.Fa&&0<e.Fa.length?e.Kc.c*e.Kc.i:0))!=u)o=0;else{if(u>e.Vb){if(e.Vb=0,e.Ec=s(u),e.Fc=0,null==e.Ec){o=Ye(e,1,"no memory during frame initialization.");break e}e.Vb=u}u=e.Ec,h=e.Fc,e.Ac=u,e.Bc=h,h+=l,e.Gd=i(p,We),e.Hd=0,e.rb=i(f+1,Be),e.sb=1,e.wa=g?i(g,Fe):null,e.Y=0,e.D.Nb=0,e.D.wa=e.wa,e.D.Y=e.Y,0<e.Aa&&(e.D.Y+=m),t(!0),e.oc=u,e.pc=h,h+=832,e.ya=i(x,Ue),e.aa=0,e.D.ya=e.ya,e.D.aa=e.aa,2==e.Aa&&(e.D.aa+=m),e.R=16*m,e.B=8*m,m=(p=Ba[e.L])*e.R,p=p/2*e.B,e.sa=u,e.ta=h+m,e.qa=e.sa,e.ra=e.ta+16*o*e.R+p,e.Ha=e.qa,e.Ia=e.ra+8*o*e.B+p,e.$c=0,h+=c,e.mb=d?u:null,e.nb=d?h:null,t(h+d<=e.Fc+e.Vb),Je(e),a(e.Ac,e.Bc,0,l),o=1}}if(o){if(r.ka=0,r.y=e.sa,r.O=e.ta,r.f=e.qa,r.N=e.ra,r.ea=e.Ha,r.Vd=e.Ia,r.fa=e.R,r.Rc=e.B,r.F=null,r.J=0,!Pn){for(o=-255;255>=o;++o)An[255+o]=0>o?-o:o;for(o=-1020;1020>=o;++o)Cn[1020+o]=-128>o?-128:127<o?127:o;for(o=-112;112>=o;++o)En[112+o]=-16>o?-16:15<o?15:o;for(o=-255;510>=o;++o)Tn[255+o]=0>o?0:255<o?255:o;Pn=1}an=ct,sn=st,ln=it,cn=ot,dn=lt,on=at,un=Yt,hn=Xt,mn=Jt,pn=Zt,fn=Qt,gn=$t,xn=er,yn=tr,vn=qt,bn=Wt,jn=Vt,wn=Ht,ha[0]=_t,ha[1]=ut,ha[2]=wt,ha[3]=Nt,ha[4]=kt,ha[5]=At,ha[6]=St,ha[7]=Ct,ha[8]=Tt,ha[9]=Et,ua[0]=xt,ua[1]=mt,ua[2]=pt,ua[3]=ft,ua[4]=yt,ua[5]=vt,ua[6]=bt,ma[0]=It,ma[1]=ht,ma[2]=Pt,ma[3]=Ot,ma[4]=Mt,ma[5]=Lt,ma[6]=Rt,o=1}else o=0}o&&(o=function(e,r){for(e.M=0;e.M<e.Va;++e.M){var i,o=e.Jc[e.M&e.Xb],l=e.m,c=e;for(i=0;i<c.za;++i){var d=l,u=c,h=u.Ac,m=u.Bc+4*i,p=u.zc,f=u.ya[u.aa+i];if(u.Qa.Bb?f.$b=C(d,u.Pa.jb[0])?2+C(d,u.Pa.jb[2]):C(d,u.Pa.jb[1]):f.$b=0,u.kc&&(f.Ad=C(d,u.Bd)),f.Za=!C(d,145)+0,f.Za){var g=f.Ob,x=0;for(u=0;4>u;++u){var y,v=p[0+u];for(y=0;4>y;++y){v=la[h[m+y]][v];for(var b=ia[C(d,v[0])];0<b;)b=ia[2*b+C(d,v[b])];v=-b,h[m+y]=v}n(g,x,h,m,4),x+=4,p[0+u]=v}}else v=C(d,156)?C(d,128)?1:3:C(d,163)?2:0,f.Ob[0]=v,a(h,m,v,4),a(p,0,v,4);f.Dd=C(d,142)?C(d,114)?C(d,183)?1:3:2:0}if(c.m.Ka)return Ye(e,7,"Premature end-of-partition0 encountered.");for(;e.ja<e.za;++e.ja){if(c=o,d=(l=e).rb[l.sb-1],h=l.rb[l.sb+l.ja],i=l.ya[l.aa+l.ja],m=l.kc?i.Ad:0)d.la=h.la=0,i.Za||(d.Na=h.Na=0),i.Hc=0,i.Gc=0,i.ia=0;else{var j,w;if(d=h,h=c,m=l.Pa.Xc,p=l.ya[l.aa+l.ja],f=l.pb[p.$b],u=p.ad,g=0,x=l.rb[l.sb-1],v=y=0,a(u,g,0,384),p.Za)var N=0,_=m[3];else{b=s(16);var k=d.Na+x.Na;if(k=na(h,m[1],k,f.Eb,0,b,0),d.Na=x.Na=(0<k)+0,1<k)an(b,0,u,g);else{var S=b[0]+3>>3;for(b=0;256>b;b+=16)u[g+b]=S}N=1,_=m[0]}var A=15&d.la,E=15&x.la;for(b=0;4>b;++b){var T=1&E;for(S=w=0;4>S;++S)A=A>>1|(T=(k=na(h,_,k=T+(1&A),f.Sc,N,u,g))>N)<<7,w=w<<2|(3<k?3:1<k?2:0!=u[g+0]),g+=16;A>>=4,E=E>>1|T<<7,y=(y<<8|w)>>>0}for(_=A,N=E>>4,j=0;4>j;j+=2){for(w=0,A=d.la>>4+j,E=x.la>>4+j,b=0;2>b;++b){for(T=1&E,S=0;2>S;++S)k=T+(1&A),A=A>>1|(T=0<(k=na(h,m[2],k,f.Qc,0,u,g)))<<3,w=w<<2|(3<k?3:1<k?2:0!=u[g+0]),g+=16;A>>=2,E=E>>1|T<<5}v|=w<<4*j,_|=A<<4<<j,N|=(240&E)<<j}d.la=_,x.la=N,p.Hc=y,p.Gc=v,p.ia=43690&v?0:f.ia,m=!(y|v)}if(0<l.L&&(l.wa[l.Y+l.ja]=l.gd[i.$b][i.Za],l.wa[l.Y+l.ja].La|=!m),c.Ka)return Ye(e,7,"Premature end-of-file encountered.")}if(Je(e),l=r,c=1,i=(o=e).D,d=0<o.L&&o.M>=o.zb&&o.M<=o.Va,0==o.Aa)e:{if(i.M=o.M,i.uc=d,Dr(o,i),c=1,i=(w=o.D).Nb,d=(v=Ba[o.L])*o.R,h=v/2*o.B,b=16*i*o.R,S=8*i*o.B,m=o.sa,p=o.ta-d+b,f=o.qa,u=o.ra-h+S,g=o.Ha,x=o.Ia-h+S,E=0==(A=w.M),y=A>=o.Va-1,2==o.Aa&&Dr(o,w),w.uc)for(T=(k=o).D.M,t(k.D.uc),w=k.yb;w<k.Hb;++w){N=w,_=T;var P=(O=(U=k).D).Nb;j=U.R;var O=O.wa[O.Y+N],D=U.sa,I=U.ta+16*P*j+16*N,L=O.dd,M=O.tc;if(0!=M)if(t(3<=M),1==U.L)0<N&&bn(D,I,j,M+4),O.La&&wn(D,I,j,M),0<_&&vn(D,I,j,M+4),O.La&&jn(D,I,j,M);else{var R=U.B,F=U.qa,B=U.ra+8*P*R+8*N,z=U.Ha,U=U.Ia+8*P*R+8*N;P=O.ld,0<N&&(hn(D,I,j,M+4,L,P),pn(F,B,z,U,R,M+4,L,P)),O.La&&(gn(D,I,j,M,L,P),yn(F,B,z,U,R,M,L,P)),0<_&&(un(D,I,j,M+4,L,P),mn(F,B,z,U,R,M+4,L,P)),O.La&&(fn(D,I,j,M,L,P),xn(F,B,z,U,R,M,L,P))}}if(o.ia&&alert("todo:DitherRow"),null!=l.put){if(w=16*A,A=16*(A+1),E?(l.y=o.sa,l.O=o.ta+b,l.f=o.qa,l.N=o.ra+S,l.ea=o.Ha,l.W=o.Ia+S):(w-=v,l.y=m,l.O=p,l.f=f,l.N=u,l.ea=g,l.W=x),y||(A-=v),A>l.o&&(A=l.o),l.F=null,l.J=null,null!=o.Fa&&0<o.Fa.length&&w<A&&(l.J=ur(o,l,w,A-w),l.F=o.mb,null==l.F&&0==l.F.length)){c=Ye(o,3,"Could not decode alpha data.");break e}w<l.j&&(v=l.j-w,w=l.j,t(!(1&v)),l.O+=o.R*v,l.N+=o.B*(v>>1),l.W+=o.B*(v>>1),null!=l.F&&(l.J+=l.width*v)),w<A&&(l.O+=l.v,l.N+=l.v>>1,l.W+=l.v>>1,null!=l.F&&(l.J+=l.v),l.ka=w-l.j,l.U=l.va-l.v,l.T=A-w,c=l.put(l))}i+1!=o.Ic||y||(n(o.sa,o.ta-d,m,p+16*o.R,d),n(o.qa,o.ra-h,f,u+8*o.B,h),n(o.Ha,o.Ia-h,g,x+8*o.B,h))}if(!c)return Ye(e,6,"Output aborted.")}return 1}(e,r)),null!=r.bc&&r.bc(r),o&=1}return o?(e.cb=0,o):0}function et(e,t,r,n,a){a=e[t+r+32*n]+(a>>3),e[t+r+32*n]=-256&a?0>a?0:255:a}function tt(e,t,r,n,a,s){et(e,t,0,r,n+a),et(e,t,1,r,n+s),et(e,t,2,r,n-s),et(e,t,3,r,n-a)}function rt(e){return(20091*e>>16)+e}function nt(e,t,r,n){var a,i=0,o=s(16);for(a=0;4>a;++a){var l=e[t+0]+e[t+8],c=e[t+0]-e[t+8],d=(35468*e[t+4]>>16)-rt(e[t+12]),u=rt(e[t+4])+(35468*e[t+12]>>16);o[i+0]=l+u,o[i+1]=c+d,o[i+2]=c-d,o[i+3]=l-u,i+=4,t++}for(a=i=0;4>a;++a)l=(e=o[i+0]+4)+o[i+8],c=e-o[i+8],d=(35468*o[i+4]>>16)-rt(o[i+12]),et(r,n,0,0,l+(u=rt(o[i+4])+(35468*o[i+12]>>16))),et(r,n,1,0,c+d),et(r,n,2,0,c-d),et(r,n,3,0,l-u),i++,n+=32}function at(e,t,r,n){var a=e[t+0]+4,s=35468*e[t+4]>>16,i=rt(e[t+4]),o=35468*e[t+1]>>16;tt(r,n,0,a+i,e=rt(e[t+1]),o),tt(r,n,1,a+s,e,o),tt(r,n,2,a-s,e,o),tt(r,n,3,a-i,e,o)}function st(e,t,r,n,a){nt(e,t,r,n),a&&nt(e,t+16,r,n+4)}function it(e,t,r,n){sn(e,t+0,r,n,1),sn(e,t+32,r,n+128,1)}function ot(e,t,r,n){var a;for(e=e[t+0]+4,a=0;4>a;++a)for(t=0;4>t;++t)et(r,n,t,a,e)}function lt(e,t,r,n){e[t+0]&&cn(e,t+0,r,n),e[t+16]&&cn(e,t+16,r,n+4),e[t+32]&&cn(e,t+32,r,n+128),e[t+48]&&cn(e,t+48,r,n+128+4)}function ct(e,t,r,n){var a,i=s(16);for(a=0;4>a;++a){var o=e[t+0+a]+e[t+12+a],l=e[t+4+a]+e[t+8+a],c=e[t+4+a]-e[t+8+a],d=e[t+0+a]-e[t+12+a];i[0+a]=o+l,i[8+a]=o-l,i[4+a]=d+c,i[12+a]=d-c}for(a=0;4>a;++a)o=(e=i[0+4*a]+3)+i[3+4*a],l=i[1+4*a]+i[2+4*a],c=i[1+4*a]-i[2+4*a],d=e-i[3+4*a],r[n+0]=o+l>>3,r[n+16]=d+c>>3,r[n+32]=o-l>>3,r[n+48]=d-c>>3,n+=64}function dt(e,t,r){var n,a=t-32,s=In,i=255-e[a-1];for(n=0;n<r;++n){var o,l=s,c=i+e[t-1];for(o=0;o<r;++o)e[t+o]=l[c+e[a+o]];t+=32}}function ut(e,t){dt(e,t,4)}function ht(e,t){dt(e,t,8)}function mt(e,t){dt(e,t,16)}function pt(e,t){var r;for(r=0;16>r;++r)n(e,t+32*r,e,t-32,16)}function ft(e,t){var r;for(r=16;0<r;--r)a(e,t,e[t-1],16),t+=32}function gt(e,t,r){var n;for(n=0;16>n;++n)a(t,r+32*n,e,16)}function xt(e,t){var r,n=16;for(r=0;16>r;++r)n+=e[t-1+32*r]+e[t+r-32];gt(n>>5,e,t)}function yt(e,t){var r,n=8;for(r=0;16>r;++r)n+=e[t-1+32*r];gt(n>>4,e,t)}function vt(e,t){var r,n=8;for(r=0;16>r;++r)n+=e[t+r-32];gt(n>>4,e,t)}function bt(e,t){gt(128,e,t)}function jt(e,t,r){return e+2*t+r+2>>2}function wt(e,t){var r,a=t-32;for(a=new Uint8Array([jt(e[a-1],e[a+0],e[a+1]),jt(e[a+0],e[a+1],e[a+2]),jt(e[a+1],e[a+2],e[a+3]),jt(e[a+2],e[a+3],e[a+4])]),r=0;4>r;++r)n(e,t+32*r,a,0,a.length)}function Nt(e,t){var r=e[t-1],n=e[t-1+32],a=e[t-1+64],s=e[t-1+96];E(e,t+0,16843009*jt(e[t-1-32],r,n)),E(e,t+32,16843009*jt(r,n,a)),E(e,t+64,16843009*jt(n,a,s)),E(e,t+96,16843009*jt(a,s,s))}function _t(e,t){var r,n=4;for(r=0;4>r;++r)n+=e[t+r-32]+e[t-1+32*r];for(n>>=3,r=0;4>r;++r)a(e,t+32*r,n,4)}function kt(e,t){var r=e[t-1+0],n=e[t-1+32],a=e[t-1+64],s=e[t-1-32],i=e[t+0-32],o=e[t+1-32],l=e[t+2-32],c=e[t+3-32];e[t+0+96]=jt(n,a,e[t-1+96]),e[t+1+96]=e[t+0+64]=jt(r,n,a),e[t+2+96]=e[t+1+64]=e[t+0+32]=jt(s,r,n),e[t+3+96]=e[t+2+64]=e[t+1+32]=e[t+0+0]=jt(i,s,r),e[t+3+64]=e[t+2+32]=e[t+1+0]=jt(o,i,s),e[t+3+32]=e[t+2+0]=jt(l,o,i),e[t+3+0]=jt(c,l,o)}function St(e,t){var r=e[t+1-32],n=e[t+2-32],a=e[t+3-32],s=e[t+4-32],i=e[t+5-32],o=e[t+6-32],l=e[t+7-32];e[t+0+0]=jt(e[t+0-32],r,n),e[t+1+0]=e[t+0+32]=jt(r,n,a),e[t+2+0]=e[t+1+32]=e[t+0+64]=jt(n,a,s),e[t+3+0]=e[t+2+32]=e[t+1+64]=e[t+0+96]=jt(a,s,i),e[t+3+32]=e[t+2+64]=e[t+1+96]=jt(s,i,o),e[t+3+64]=e[t+2+96]=jt(i,o,l),e[t+3+96]=jt(o,l,l)}function At(e,t){var r=e[t-1+0],n=e[t-1+32],a=e[t-1+64],s=e[t-1-32],i=e[t+0-32],o=e[t+1-32],l=e[t+2-32],c=e[t+3-32];e[t+0+0]=e[t+1+64]=s+i+1>>1,e[t+1+0]=e[t+2+64]=i+o+1>>1,e[t+2+0]=e[t+3+64]=o+l+1>>1,e[t+3+0]=l+c+1>>1,e[t+0+96]=jt(a,n,r),e[t+0+64]=jt(n,r,s),e[t+0+32]=e[t+1+96]=jt(r,s,i),e[t+1+32]=e[t+2+96]=jt(s,i,o),e[t+2+32]=e[t+3+96]=jt(i,o,l),e[t+3+32]=jt(o,l,c)}function Ct(e,t){var r=e[t+0-32],n=e[t+1-32],a=e[t+2-32],s=e[t+3-32],i=e[t+4-32],o=e[t+5-32],l=e[t+6-32],c=e[t+7-32];e[t+0+0]=r+n+1>>1,e[t+1+0]=e[t+0+64]=n+a+1>>1,e[t+2+0]=e[t+1+64]=a+s+1>>1,e[t+3+0]=e[t+2+64]=s+i+1>>1,e[t+0+32]=jt(r,n,a),e[t+1+32]=e[t+0+96]=jt(n,a,s),e[t+2+32]=e[t+1+96]=jt(a,s,i),e[t+3+32]=e[t+2+96]=jt(s,i,o),e[t+3+64]=jt(i,o,l),e[t+3+96]=jt(o,l,c)}function Et(e,t){var r=e[t-1+0],n=e[t-1+32],a=e[t-1+64],s=e[t-1+96];e[t+0+0]=r+n+1>>1,e[t+2+0]=e[t+0+32]=n+a+1>>1,e[t+2+32]=e[t+0+64]=a+s+1>>1,e[t+1+0]=jt(r,n,a),e[t+3+0]=e[t+1+32]=jt(n,a,s),e[t+3+32]=e[t+1+64]=jt(a,s,s),e[t+3+64]=e[t+2+64]=e[t+0+96]=e[t+1+96]=e[t+2+96]=e[t+3+96]=s}function Tt(e,t){var r=e[t-1+0],n=e[t-1+32],a=e[t-1+64],s=e[t-1+96],i=e[t-1-32],o=e[t+0-32],l=e[t+1-32],c=e[t+2-32];e[t+0+0]=e[t+2+32]=r+i+1>>1,e[t+0+32]=e[t+2+64]=n+r+1>>1,e[t+0+64]=e[t+2+96]=a+n+1>>1,e[t+0+96]=s+a+1>>1,e[t+3+0]=jt(o,l,c),e[t+2+0]=jt(i,o,l),e[t+1+0]=e[t+3+32]=jt(r,i,o),e[t+1+32]=e[t+3+64]=jt(n,r,i),e[t+1+64]=e[t+3+96]=jt(a,n,r),e[t+1+96]=jt(s,a,n)}function Pt(e,t){var r;for(r=0;8>r;++r)n(e,t+32*r,e,t-32,8)}function Ot(e,t){var r;for(r=0;8>r;++r)a(e,t,e[t-1],8),t+=32}function Dt(e,t,r){var n;for(n=0;8>n;++n)a(t,r+32*n,e,8)}function It(e,t){var r,n=8;for(r=0;8>r;++r)n+=e[t+r-32]+e[t-1+32*r];Dt(n>>4,e,t)}function Lt(e,t){var r,n=4;for(r=0;8>r;++r)n+=e[t+r-32];Dt(n>>3,e,t)}function Mt(e,t){var r,n=4;for(r=0;8>r;++r)n+=e[t-1+32*r];Dt(n>>3,e,t)}function Rt(e,t){Dt(128,e,t)}function Ft(e,t,r){var n=e[t-r],a=e[t+0],s=3*(a-n)+On[1020+e[t-2*r]-e[t+r]],i=Dn[112+(s+4>>3)];e[t-r]=In[255+n+Dn[112+(s+3>>3)]],e[t+0]=In[255+a-i]}function Bt(e,t,r,n){var a=e[t+0],s=e[t+r];return Ln[255+e[t-2*r]-e[t-r]]>n||Ln[255+s-a]>n}function zt(e,t,r,n){return 4*Ln[255+e[t-r]-e[t+0]]+Ln[255+e[t-2*r]-e[t+r]]<=n}function Ut(e,t,r,n,a){var s=e[t-3*r],i=e[t-2*r],o=e[t-r],l=e[t+0],c=e[t+r],d=e[t+2*r],u=e[t+3*r];return 4*Ln[255+o-l]+Ln[255+i-c]>n?0:Ln[255+e[t-4*r]-s]<=a&&Ln[255+s-i]<=a&&Ln[255+i-o]<=a&&Ln[255+u-d]<=a&&Ln[255+d-c]<=a&&Ln[255+c-l]<=a}function qt(e,t,r,n){var a=2*n+1;for(n=0;16>n;++n)zt(e,t+n,r,a)&&Ft(e,t+n,r)}function Wt(e,t,r,n){var a=2*n+1;for(n=0;16>n;++n)zt(e,t+n*r,1,a)&&Ft(e,t+n*r,1)}function Vt(e,t,r,n){var a;for(a=3;0<a;--a)qt(e,t+=4*r,r,n)}function Ht(e,t,r,n){var a;for(a=3;0<a;--a)Wt(e,t+=4,r,n)}function Gt(e,t,r,n,a,s,i,o){for(s=2*s+1;0<a--;){if(Ut(e,t,r,s,i))if(Bt(e,t,r,o))Ft(e,t,r);else{var l=e,c=t,d=r,u=l[c-2*d],h=l[c-d],m=l[c+0],p=l[c+d],f=l[c+2*d],g=27*(y=On[1020+3*(m-h)+On[1020+u-p]])+63>>7,x=18*y+63>>7,y=9*y+63>>7;l[c-3*d]=In[255+l[c-3*d]+y],l[c-2*d]=In[255+u+x],l[c-d]=In[255+h+g],l[c+0]=In[255+m-g],l[c+d]=In[255+p-x],l[c+2*d]=In[255+f-y]}t+=n}}function Kt(e,t,r,n,a,s,i,o){for(s=2*s+1;0<a--;){if(Ut(e,t,r,s,i))if(Bt(e,t,r,o))Ft(e,t,r);else{var l=e,c=t,d=r,u=l[c-d],h=l[c+0],m=l[c+d],p=Dn[112+(4+(f=3*(h-u))>>3)],f=Dn[112+(f+3>>3)],g=p+1>>1;l[c-2*d]=In[255+l[c-2*d]+g],l[c-d]=In[255+u+f],l[c+0]=In[255+h-p],l[c+d]=In[255+m-g]}t+=n}}function Yt(e,t,r,n,a,s){Gt(e,t,r,1,16,n,a,s)}function Xt(e,t,r,n,a,s){Gt(e,t,1,r,16,n,a,s)}function Qt(e,t,r,n,a,s){var i;for(i=3;0<i;--i)Kt(e,t+=4*r,r,1,16,n,a,s)}function $t(e,t,r,n,a,s){var i;for(i=3;0<i;--i)Kt(e,t+=4,1,r,16,n,a,s)}function Jt(e,t,r,n,a,s,i,o){Gt(e,t,a,1,8,s,i,o),Gt(r,n,a,1,8,s,i,o)}function Zt(e,t,r,n,a,s,i,o){Gt(e,t,1,a,8,s,i,o),Gt(r,n,1,a,8,s,i,o)}function er(e,t,r,n,a,s,i,o){Kt(e,t+4*a,a,1,8,s,i,o),Kt(r,n+4*a,a,1,8,s,i,o)}function tr(e,t,r,n,a,s,i,o){Kt(e,t+4,1,a,8,s,i,o),Kt(r,n+4,1,a,8,s,i,o)}function rr(){this.ba=new ie,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new le,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function nr(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ar(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function sr(){this.ua=0,this.Wa=new L,this.vb=new L,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new m,this.yc=new u}function ir(){this.xb=this.a=0,this.l=new Ge,this.ca=new ie,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new j,this.Pb=0,this.wd=new j,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new sr,this.ab=0,this.gc=i(4,ar),this.Oc=0}function or(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ge,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function lr(e,t,r,n,a,s,i){for(e=null==e?0:e[t+0],t=0;t<i;++t)a[s+t]=e+r[n+t]&255,e=a[s+t]}function cr(e,t,r,n,a,s,i){var o;if(null==e)lr(null,null,r,n,a,s,i);else for(o=0;o<i;++o)a[s+o]=e[t+o]+r[n+o]&255}function dr(e,t,r,n,a,s,i){if(null==e)lr(null,null,r,n,a,s,i);else{var o,l=e[t+0],c=l,d=l;for(o=0;o<i;++o)c=d+(l=e[t+o])-c,d=r[n+o]+(-256&c?0>c?0:255:c)&255,c=l,a[s+o]=d}}function ur(e,r,a,i){var o=r.width,l=r.o;if(t(null!=e&&null!=r),0>a||0>=i||a+i>l)return null;if(!e.Cc){if(null==e.ga){var c;if(e.ga=new or,(c=null==e.ga)||(c=r.width*r.o,t(0==e.Gb.length),e.Gb=s(c),e.Uc=0,null==e.Gb?c=0:(e.mb=e.Gb,e.nb=e.Uc,e.rc=null,c=1),c=!c),!c){c=e.ga;var d=e.Fa,u=e.P,h=e.qc,m=e.mb,p=e.nb,f=u+1,g=h-1,y=c.l;if(t(null!=d&&null!=m&&null!=r),ga[0]=null,ga[1]=lr,ga[2]=cr,ga[3]=dr,c.ca=m,c.tb=p,c.c=r.width,c.i=r.height,t(0<c.c&&0<c.i),1>=h)r=0;else if(c.$a=3&d[u+0],c.Z=d[u+0]>>2&3,c.Lc=d[u+0]>>4&3,u=d[u+0]>>6&3,0>c.$a||1<c.$a||4<=c.Z||1<c.Lc||u)r=0;else if(y.put=me,y.ac=he,y.bc=pe,y.ma=c,y.width=r.width,y.height=r.height,y.Da=r.Da,y.v=r.v,y.va=r.va,y.j=r.j,y.o=r.o,c.$a)e:{t(1==c.$a),r=Ce();t:for(;;){if(null==r){r=0;break e}if(t(null!=c),c.mc=r,r.c=c.c,r.i=c.i,r.l=c.l,r.l.ma=c,r.l.width=c.c,r.l.height=c.i,r.a=0,x(r.m,d,f,g),!Ee(c.c,c.i,1,r,null))break t;if(1==r.ab&&3==r.gc[0].hc&&Ne(r.s)?(c.ic=1,d=r.c*r.i,r.Ta=null,r.Ua=0,r.V=s(d),r.Ba=0,null==r.V?(r.a=1,r=0):r=1):(c.ic=0,r=Te(r,c.c)),!r)break t;r=1;break e}c.mc=null,r=0}else r=g>=c.c*c.i;c=!r}if(c)return null;1!=e.ga.Lc?e.Ga=0:i=l-a}t(null!=e.ga),t(a+i<=l);e:{if(r=(d=e.ga).c,l=d.l.o,0==d.$a){if(f=e.rc,g=e.Vc,y=e.Fa,u=e.P+1+a*r,h=e.mb,m=e.nb+a*r,t(u<=e.P+e.qc),0!=d.Z)for(t(null!=ga[d.Z]),c=0;c<i;++c)ga[d.Z](f,g,y,u,h,m,r),f=h,g=m,m+=r,u+=r;else for(c=0;c<i;++c)n(h,m,y,u,r),f=h,g=m,m+=r,u+=r;e.rc=f,e.Vc=g}else{if(t(null!=d.mc),r=a+i,t(null!=(c=d.mc)),t(r<=c.i),c.C>=r)r=1;else if(d.ic||gr(),d.ic){d=c.V,f=c.Ba,g=c.c;var v=c.i,b=(y=1,u=c.$/g,h=c.$%g,m=c.m,p=c.s,c.$),j=g*v,w=g*r,_=p.wc,S=b<w?be(p,h,u):null;t(b<=j),t(r<=v),t(Ne(p));t:for(;;){for(;!m.h&&b<w;){if(h&_||(S=be(p,h,u)),t(null!=S),k(m),256>(v=ye(S.G[0],S.H[0],m)))d[f+b]=v,++b,++h>=g&&(h=0,++u<=r&&!(u%16)&&ke(c,u));else{if(!(280>v)){y=0;break t}v=ge(v-256,m);var A,C=ye(S.G[4],S.H[4],m);if(k(m),!(b>=(C=xe(g,C=ge(C,m)))&&j-b>=v)){y=0;break t}for(A=0;A<v;++A)d[f+b+A]=d[f+b+A-C];for(b+=v,h+=v;h>=g;)h-=g,++u<=r&&!(u%16)&&ke(c,u);b<w&&h&_&&(S=be(p,h,u))}t(m.h==N(m))}ke(c,u>r?r:u);break t}!y||m.h&&b<j?(y=0,c.a=m.h?5:3):c.$=b,r=y}else r=Se(c,c.V,c.Ba,c.c,c.i,r,Pe);if(!r){i=0;break e}}a+i>=l&&(e.Cc=1),i=1}if(!i)return null;if(e.Cc&&(null!=(i=e.ga)&&(i.mc=null),e.ga=null,0<e.Ga))return alert("todo:WebPDequantizeLevels"),null}return e.nb+a*o}function hr(e,t,r,n,a,s){for(;0<a--;){var i,o=e,l=t+(r?1:0),c=e,d=t+(r?0:3);for(i=0;i<n;++i){var u=c[d+4*i];255!=u&&(u*=32897,o[l+4*i+0]=o[l+4*i+0]*u>>23,o[l+4*i+1]=o[l+4*i+1]*u>>23,o[l+4*i+2]=o[l+4*i+2]*u>>23)}t+=s}}function mr(e,t,r,n,a){for(;0<n--;){var s;for(s=0;s<r;++s){var i=e[t+2*s+0],o=15&(c=e[t+2*s+1]),l=4369*o,c=(240&c|c>>4)*l>>16;e[t+2*s+0]=(240&i|i>>4)*l>>16&240|(15&i|i<<4)*l>>16>>4&15,e[t+2*s+1]=240&c|o}t+=a}}function pr(e,t,r,n,a,s,i,o){var l,c,d=255;for(c=0;c<a;++c){for(l=0;l<n;++l){var u=e[t+l];s[i+4*l]=u,d&=u}t+=r,i+=o}return 255!=d}function fr(e,t,r,n,a){var s;for(s=0;s<a;++s)r[n+s]=e[t+s]>>8}function gr(){Nn=hr,_n=mr,kn=pr,Sn=fr}function xr(r,n,a){e[r]=function(e,r,s,i,o,l,c,d,u,h,m,p,f,g,x,y,v){var b,j=v-1>>1,w=o[l+0]|c[d+0]<<16,N=u[h+0]|m[p+0]<<16;t(null!=e);var _=3*w+N+131074>>2;for(n(e[r+0],255&_,_>>16,f,g),null!=s&&(_=3*N+w+131074>>2,n(s[i+0],255&_,_>>16,x,y)),b=1;b<=j;++b){var k=o[l+b]|c[d+b]<<16,S=u[h+b]|m[p+b]<<16,A=w+k+N+S+524296,C=A+2*(k+N)>>3;_=C+w>>1,w=(A=A+2*(w+S)>>3)+k>>1,n(e[r+2*b-1],255&_,_>>16,f,g+(2*b-1)*a),n(e[r+2*b-0],255&w,w>>16,f,g+(2*b-0)*a),null!=s&&(_=A+N>>1,w=C+S>>1,n(s[i+2*b-1],255&_,_>>16,x,y+(2*b-1)*a),n(s[i+2*b+0],255&w,w>>16,x,y+(2*b+0)*a)),w=k,N=S}1&v||(_=3*w+N+131074>>2,n(e[r+v-1],255&_,_>>16,f,g+(v-1)*a),null!=s&&(_=3*N+w+131074>>2,n(s[i+v-1],255&_,_>>16,x,y+(v-1)*a)))}}function yr(){xa[Mn]=ya,xa[Rn]=ba,xa[Fn]=va,xa[Bn]=ja,xa[zn]=wa,xa[Un]=Na,xa[qn]=_a,xa[Wn]=ba,xa[Vn]=ja,xa[Hn]=wa,xa[Gn]=Na}function vr(e){return e&~Ta?0>e?0:255:e>>Ea}function br(e,t){return vr((19077*e>>8)+(26149*t>>8)-14234)}function jr(e,t,r){return vr((19077*e>>8)-(6419*t>>8)-(13320*r>>8)+8708)}function wr(e,t){return vr((19077*e>>8)+(33050*t>>8)-17685)}function Nr(e,t,r,n,a){n[a+0]=br(e,r),n[a+1]=jr(e,t,r),n[a+2]=wr(e,t)}function _r(e,t,r,n,a){n[a+0]=wr(e,t),n[a+1]=jr(e,t,r),n[a+2]=br(e,r)}function kr(e,t,r,n,a){var s=jr(e,t,r);t=s<<3&224|wr(e,t)>>3,n[a+0]=248&br(e,r)|s>>5,n[a+1]=t}function Sr(e,t,r,n,a){var s=240&wr(e,t)|15;n[a+0]=240&br(e,r)|jr(e,t,r)>>4,n[a+1]=s}function Ar(e,t,r,n,a){n[a+0]=255,Nr(e,t,r,n,a+1)}function Cr(e,t,r,n,a){_r(e,t,r,n,a),n[a+3]=255}function Er(e,t,r,n,a){Nr(e,t,r,n,a),n[a+3]=255}function He(e,t){return 0>e?0:e>t?t:e}function Tr(t,r,n){e[t]=function(e,t,a,s,i,o,l,c,d){for(var u=c+(-2&d)*n;c!=u;)r(e[t+0],a[s+0],i[o+0],l,c),r(e[t+1],a[s+0],i[o+0],l,c+n),t+=2,++s,++o,c+=2*n;1&d&&r(e[t+0],a[s+0],i[o+0],l,c)}}function Pr(e,t,r){return 0==r?0==e?0==t?6:5:0==t?4:0:r}function Or(e,t,r,n,a){switch(e>>>30){case 3:sn(t,r,n,a,0);break;case 2:on(t,r,n,a);break;case 1:cn(t,r,n,a)}}function Dr(e,t){var r,s,i=t.M,o=t.Nb,l=e.oc,c=e.pc+40,d=e.oc,u=e.pc+584,h=e.oc,m=e.pc+600;for(r=0;16>r;++r)l[c+32*r-1]=129;for(r=0;8>r;++r)d[u+32*r-1]=129,h[m+32*r-1]=129;for(0<i?l[c-1-32]=d[u-1-32]=h[m-1-32]=129:(a(l,c-32-1,127,21),a(d,u-32-1,127,9),a(h,m-32-1,127,9)),s=0;s<e.za;++s){var p=t.ya[t.aa+s];if(0<s){for(r=-1;16>r;++r)n(l,c+32*r-4,l,c+32*r+12,4);for(r=-1;8>r;++r)n(d,u+32*r-4,d,u+32*r+4,4),n(h,m+32*r-4,h,m+32*r+4,4)}var f=e.Gd,g=e.Hd+s,x=p.ad,y=p.Hc;if(0<i&&(n(l,c-32,f[g].y,0,16),n(d,u-32,f[g].f,0,8),n(h,m-32,f[g].ea,0,8)),p.Za){var v=l,b=c-32+16;for(0<i&&(s>=e.za-1?a(v,b,f[g].y[15],4):n(v,b,f[g+1].y,0,4)),r=0;4>r;r++)v[b+128+r]=v[b+256+r]=v[b+384+r]=v[b+0+r];for(r=0;16>r;++r,y<<=2)v=l,b=c+Fa[r],ha[p.Ob[r]](v,b),Or(y,x,16*+r,v,b)}else if(v=Pr(s,i,p.Ob[0]),ua[v](l,c),0!=y)for(r=0;16>r;++r,y<<=2)Or(y,x,16*+r,l,c+Fa[r]);for(r=p.Gc,v=Pr(s,i,p.Dd),ma[v](d,u),ma[v](h,m),y=x,v=d,b=u,255&(p=r|0)&&(170&p?ln(y,256,v,b):dn(y,256,v,b)),p=h,y=m,255&(r>>=8)&&(170&r?ln(x,320,p,y):dn(x,320,p,y)),i<e.Ub-1&&(n(f[g].y,0,l,c+480,16),n(f[g].f,0,d,u+224,8),n(f[g].ea,0,h,m+224,8)),r=8*o*e.B,f=e.sa,g=e.ta+16*s+16*o*e.R,x=e.qa,p=e.ra+8*s+r,y=e.Ha,v=e.Ia+8*s+r,r=0;16>r;++r)n(f,g+r*e.R,l,c+32*r,16);for(r=0;8>r;++r)n(x,p+r*e.B,d,u+32*r,8),n(y,v+r*e.B,h,m+32*r,8)}}function Ir(e,n,a,s,i,o,l,c,d){var u=[0],h=[0],m=0,p=null!=d?d.kd:0,f=null!=d?d:new nr;if(null==e||12>a)return 7;f.data=e,f.w=n,f.ha=a,n=[n],a=[a],f.gb=[f.gb];e:{var g=n,y=a,v=f.gb;if(t(null!=e),t(null!=y),t(null!=v),v[0]=0,12<=y[0]&&!r(e,g[0],"RIFF")){if(r(e,g[0]+8,"WEBP")){v=3;break e}var b=O(e,g[0]+4);if(12>b||4294967286<b){v=3;break e}if(p&&b>y[0]-8){v=7;break e}v[0]=b,g[0]+=12,y[0]-=12}v=0}if(0!=v)return v;for(b=0<f.gb[0],a=a[0];;){e:{var w=e;y=n,v=a;var N=u,_=h,k=g=[0];if((C=m=[m])[0]=0,8>v[0])v=7;else{if(!r(w,y[0],"VP8X")){if(10!=O(w,y[0]+4)){v=3;break e}if(18>v[0]){v=7;break e}var S=O(w,y[0]+8),A=1+P(w,y[0]+12);if(2147483648<=A*(w=1+P(w,y[0]+15))){v=3;break e}null!=k&&(k[0]=S),null!=N&&(N[0]=A),null!=_&&(_[0]=w),y[0]+=18,v[0]-=18,C[0]=1}v=0}}if(m=m[0],g=g[0],0!=v)return v;if(y=!!(2&g),!b&&m)return 3;if(null!=o&&(o[0]=!!(16&g)),null!=l&&(l[0]=y),null!=c&&(c[0]=0),l=u[0],g=h[0],m&&y&&null==d){v=0;break}if(4>a){v=7;break}if(b&&m||!b&&!m&&!r(e,n[0],"ALPH")){a=[a],f.na=[f.na],f.P=[f.P],f.Sa=[f.Sa];e:{S=e,v=n,b=a;var C=f.gb;N=f.na,_=f.P,k=f.Sa,A=22,t(null!=S),t(null!=b),w=v[0];var E=b[0];for(t(null!=N),t(null!=k),N[0]=null,_[0]=null,k[0]=0;;){if(v[0]=w,b[0]=E,8>E){v=7;break e}var T=O(S,w+4);if(4294967286<T){v=3;break e}var D=8+T+1&-2;if(A+=D,0<C&&A>C){v=3;break e}if(!r(S,w,"VP8 ")||!r(S,w,"VP8L")){v=0;break e}if(E[0]<D){v=7;break e}r(S,w,"ALPH")||(N[0]=S,_[0]=w+8,k[0]=T),w+=D,E-=D}}if(a=a[0],f.na=f.na[0],f.P=f.P[0],f.Sa=f.Sa[0],0!=v)break}a=[a],f.Ja=[f.Ja],f.xa=[f.xa];e:if(C=e,v=n,b=a,N=f.gb[0],_=f.Ja,k=f.xa,S=v[0],w=!r(C,S,"VP8 "),A=!r(C,S,"VP8L"),t(null!=C),t(null!=b),t(null!=_),t(null!=k),8>b[0])v=7;else{if(w||A){if(C=O(C,S+4),12<=N&&C>N-12){v=3;break e}if(p&&C>b[0]-8){v=7;break e}_[0]=C,v[0]+=8,b[0]-=8,k[0]=A}else k[0]=5<=b[0]&&47==C[S+0]&&!(C[S+4]>>5),_[0]=b[0];v=0}if(a=a[0],f.Ja=f.Ja[0],f.xa=f.xa[0],n=n[0],0!=v)break;if(4294967286<f.Ja)return 3;if(null==c||y||(c[0]=f.xa?2:1),l=[l],g=[g],f.xa){if(5>a){v=7;break}c=l,p=g,y=o,null==e||5>a?e=0:5<=a&&47==e[n+0]&&!(e[n+4]>>5)?(b=[0],C=[0],N=[0],x(_=new j,e,n,a),fe(_,b,C,N)?(null!=c&&(c[0]=b[0]),null!=p&&(p[0]=C[0]),null!=y&&(y[0]=N[0]),e=1):e=0):e=0}else{if(10>a){v=7;break}c=g,null==e||10>a||!Xe(e,n+3,a-3)?e=0:(p=e[n+0]|e[n+1]<<8|e[n+2]<<16,y=16383&(e[n+7]<<8|e[n+6]),e=16383&(e[n+9]<<8|e[n+8]),1&p||3<(p>>1&7)||!(p>>4&1)||p>>5>=f.Ja||!y||!e?e=0:(l&&(l[0]=y),c&&(c[0]=e),e=1))}if(!e)return 3;if(l=l[0],g=g[0],m&&(u[0]!=l||h[0]!=g))return 3;null!=d&&(d[0]=f,d.offset=n-d.w,t(4294967286>n-d.w),t(d.offset==d.ha-a));break}return 0==v||7==v&&m&&null==d?(null!=o&&(o[0]|=null!=f.na&&0<f.na.length),null!=s&&(s[0]=l),null!=i&&(i[0]=g),0):v}function Lr(e,t,r){var n=t.width,a=t.height,s=0,i=0,o=n,l=a;if(t.Da=null!=e&&0<e.Da,t.Da&&(o=e.cd,l=e.bd,s=e.v,i=e.j,11>r||(s&=-2,i&=-2),0>s||0>i||0>=o||0>=l||s+o>n||i+l>a))return 0;if(t.v=s,t.j=i,t.va=s+o,t.o=i+l,t.U=o,t.T=l,t.da=null!=e&&0<e.da,t.da){if(!M(o,l,r=[e.ib],s=[e.hb]))return 0;t.ib=r[0],t.hb=s[0]}return t.ob=null!=e&&e.ob,t.Kb=null==e||!e.Sd,t.da&&(t.ob=t.ib<3*n/4&&t.hb<3*a/4,t.Kb=0),1}function Mr(e){if(null==e)return 2;if(11>e.S){var t=e.f.RGBA;t.fb+=(e.height-1)*t.A,t.A=-t.A}else t=e.f.kb,e=e.height,t.O+=(e-1)*t.fa,t.fa=-t.fa,t.N+=(e-1>>1)*t.Ab,t.Ab=-t.Ab,t.W+=(e-1>>1)*t.Db,t.Db=-t.Db,null!=t.F&&(t.J+=(e-1)*t.lb,t.lb=-t.lb);return 0}function Rr(e,t,r,n){if(null==n||0>=e||0>=t)return 2;if(null!=r){if(r.Da){var a=r.cd,i=r.bd,o=-2&r.v,l=-2&r.j;if(0>o||0>l||0>=a||0>=i||o+a>e||l+i>t)return 2;e=a,t=i}if(r.da){if(!M(e,t,a=[r.ib],i=[r.hb]))return 2;e=a[0],t=i[0]}}n.width=e,n.height=t;e:{var c=n.width,d=n.height;if(e=n.S,0>=c||0>=d||!(e>=Mn&&13>e))e=2;else{if(0>=n.Rd&&null==n.sd){o=i=a=t=0;var u=(l=c*qa[e])*d;if(11>e||(i=(d+1)/2*(t=(c+1)/2),12==e&&(o=(a=c)*d)),null==(d=s(u+2*i+o))){e=1;break e}n.sd=d,11>e?((c=n.f.RGBA).eb=d,c.fb=0,c.A=l,c.size=u):((c=n.f.kb).y=d,c.O=0,c.fa=l,c.Fd=u,c.f=d,c.N=0+u,c.Ab=t,c.Cd=i,c.ea=d,c.W=0+u+i,c.Db=t,c.Ed=i,12==e&&(c.F=d,c.J=0+u+2*i),c.Tc=o,c.lb=a)}if(t=1,a=n.S,i=n.width,o=n.height,a>=Mn&&13>a)if(11>a)e=n.f.RGBA,t&=(l=Math.abs(e.A))*(o-1)+i<=e.size,t&=l>=i*qa[a],t&=null!=e.eb;else{e=n.f.kb,l=(i+1)/2,u=(o+1)/2,c=Math.abs(e.fa),d=Math.abs(e.Ab);var h=Math.abs(e.Db),m=Math.abs(e.lb),p=m*(o-1)+i;t&=c*(o-1)+i<=e.Fd,t&=d*(u-1)+l<=e.Cd,t=(t&=h*(u-1)+l<=e.Ed)&c>=i&d>=l&h>=l,t&=null!=e.y,t&=null!=e.f,t&=null!=e.ea,12==a&&(t&=m>=i,t&=p<=e.Tc,t&=null!=e.F)}else t=0;e=t?0:2}}return 0!=e||null!=r&&r.fd&&(e=Mr(n)),e}var Fr=64,Br=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],zr=24,Ur=32,qr=8,Wr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];B("Predictor0","PredictorAdd0"),e.Predictor0=function(){return 4278190080},e.Predictor1=function(e){return e},e.Predictor2=function(e,t,r){return t[r+0]},e.Predictor3=function(e,t,r){return t[r+1]},e.Predictor4=function(e,t,r){return t[r-1]},e.Predictor5=function(e,t,r){return U(U(e,t[r+1]),t[r+0])},e.Predictor6=function(e,t,r){return U(e,t[r-1])},e.Predictor7=function(e,t,r){return U(e,t[r+0])},e.Predictor8=function(e,t,r){return U(t[r-1],t[r+0])},e.Predictor9=function(e,t,r){return U(t[r+0],t[r+1])},e.Predictor10=function(e,t,r){return U(U(e,t[r-1]),U(t[r+0],t[r+1]))},e.Predictor11=function(e,t,r){var n=t[r+0];return 0>=V(n>>24&255,e>>24&255,(t=t[r-1])>>24&255)+V(n>>16&255,e>>16&255,t>>16&255)+V(n>>8&255,e>>8&255,t>>8&255)+V(255&n,255&e,255&t)?n:e},e.Predictor12=function(e,t,r){var n=t[r+0];return(q((e>>24&255)+(n>>24&255)-((t=t[r-1])>>24&255))<<24|q((e>>16&255)+(n>>16&255)-(t>>16&255))<<16|q((e>>8&255)+(n>>8&255)-(t>>8&255))<<8|q((255&e)+(255&n)-(255&t)))>>>0},e.Predictor13=function(e,t,r){var n=t[r-1];return(W((e=U(e,t[r+0]))>>24&255,n>>24&255)<<24|W(e>>16&255,n>>16&255)<<16|W(e>>8&255,n>>8&255)<<8|W(255&e,255&n))>>>0};var Vr=e.PredictorAdd0;e.PredictorAdd1=H,B("Predictor2","PredictorAdd2"),B("Predictor3","PredictorAdd3"),B("Predictor4","PredictorAdd4"),B("Predictor5","PredictorAdd5"),B("Predictor6","PredictorAdd6"),B("Predictor7","PredictorAdd7"),B("Predictor8","PredictorAdd8"),B("Predictor9","PredictorAdd9"),B("Predictor10","PredictorAdd10"),B("Predictor11","PredictorAdd11"),B("Predictor12","PredictorAdd12"),B("Predictor13","PredictorAdd13");var Hr=e.PredictorAdd2;X("ColorIndexInverseTransform","MapARGB","32b",function(e){return e>>8&255},function(e){return e}),X("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(e){return e},function(e){return e>>8&255});var Gr,Kr=e.ColorIndexInverseTransform,Yr=e.MapARGB,Xr=e.VP8LColorIndexInverseTransformAlpha,Qr=e.MapAlpha,$r=e.VP8LPredictorsAdd=[];$r.length=16,(e.VP8LPredictors=[]).length=16,(e.VP8LPredictorsAdd_C=[]).length=16,(e.VP8LPredictors_C=[]).length=16;var Jr,Zr,en,tn,rn,nn,an,sn,on,ln,cn,dn,un,hn,mn,pn,fn,gn,xn,yn,vn,bn,jn,wn,Nn,_n,kn,Sn,An=s(511),Cn=s(2041),En=s(225),Tn=s(767),Pn=0,On=Cn,Dn=En,In=Tn,Ln=An,Mn=0,Rn=1,Fn=2,Bn=3,zn=4,Un=5,qn=6,Wn=7,Vn=8,Hn=9,Gn=10,Kn=[2,3,7],Yn=[3,3,11],Xn=[280,256,256,256,40],Qn=[0,1,1,1,0],$n=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Jn=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Zn=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],ea=8,ta=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],ra=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],na=null,aa=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],sa=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],ia=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],oa=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],la=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ca=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],da=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ua=[],ha=[],ma=[],pa=1,fa=2,ga=[],xa=[];xr("UpsampleRgbLinePair",Nr,3),xr("UpsampleBgrLinePair",_r,3),xr("UpsampleRgbaLinePair",Er,4),xr("UpsampleBgraLinePair",Cr,4),xr("UpsampleArgbLinePair",Ar,4),xr("UpsampleRgba4444LinePair",Sr,2),xr("UpsampleRgb565LinePair",kr,2);var ya=e.UpsampleRgbLinePair,va=e.UpsampleBgrLinePair,ba=e.UpsampleRgbaLinePair,ja=e.UpsampleBgraLinePair,wa=e.UpsampleArgbLinePair,Na=e.UpsampleRgba4444LinePair,_a=e.UpsampleRgb565LinePair,ka=16,Sa=1<<ka-1,Aa=-227,Ca=482,Ea=6,Ta=(256<<Ea)-1,Pa=0,Oa=s(256),Da=s(256),Ia=s(256),La=s(256),Ma=s(Ca-Aa),Ra=s(Ca-Aa);Tr("YuvToRgbRow",Nr,3),Tr("YuvToBgrRow",_r,3),Tr("YuvToRgbaRow",Er,4),Tr("YuvToBgraRow",Cr,4),Tr("YuvToArgbRow",Ar,4),Tr("YuvToRgba4444Row",Sr,2),Tr("YuvToRgb565Row",kr,2);var Fa=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Ba=[0,2,8],za=[8,7,6,4,4,2,2,2,1,1,1,1],Ua=1;this.WebPDecodeRGBA=function(e,r,n,a,s){var i=Rn,o=new rr,l=new ie;o.ba=l,l.S=i,l.width=[l.width],l.height=[l.height];var c=l.width,d=l.height,u=new oe;if(null==u||null==e)var h=2;else t(null!=u),h=Ir(e,r,n,u.width,u.height,u.Pd,u.Qd,u.format,null);if(0!=h?c=0:(null!=c&&(c[0]=u.width[0]),null!=d&&(d[0]=u.height[0]),c=1),c){l.width=l.width[0],l.height=l.height[0],null!=a&&(a[0]=l.width),null!=s&&(s[0]=l.height);e:{if(a=new Ge,(s=new nr).data=e,s.w=r,s.ha=n,s.kd=1,r=[0],t(null!=s),(0==(e=Ir(s.data,s.w,s.ha,null,null,null,r,null,s))||7==e)&&r[0]&&(e=4),0==(r=e)){if(t(null!=o),a.data=s.data,a.w=s.w+s.offset,a.ha=s.ha-s.offset,a.put=me,a.ac=he,a.bc=pe,a.ma=o,s.xa){if(null==(e=Ce())){o=1;break e}if(function(e,r){var n=[0],a=[0],s=[0];t:for(;;){if(null==e)return 0;if(null==r)return e.a=2,0;if(e.l=r,e.a=0,x(e.m,r.data,r.w,r.ha),!fe(e.m,n,a,s)){e.a=3;break t}if(e.xb=fa,r.width=n[0],r.height=a[0],!Ee(n[0],a[0],1,e,null))break t;return 1}return t(0!=e.a),0}(e,a)){if(a=0==(r=Rr(a.width,a.height,o.Oa,o.ba))){t:{a=e;r:for(;;){if(null==a){a=0;break t}if(t(null!=a.s.yc),t(null!=a.s.Ya),t(0<a.s.Wb),t(null!=(n=a.l)),t(null!=(s=n.ma)),0!=a.xb){if(a.ca=s.ba,a.tb=s.tb,t(null!=a.ca),!Lr(s.Oa,n,Bn)){a.a=2;break r}if(!Te(a,n.width))break r;if(n.da)break r;if((n.da||ne(a.ca.S))&&gr(),11>a.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=a.ca.f.kb.F&&gr()),a.Pb&&0<a.s.ua&&null==a.s.vb.X&&!D(a.s.vb,a.s.Wa.Xa)){a.a=1;break r}a.xb=0}if(!Se(a,a.V,a.Ba,a.c,a.i,n.o,we))break r;s.Dc=a.Ma,a=1;break t}t(0!=a.a),a=0}a=!a}a&&(r=e.a)}else r=e.a}else{if(null==(e=new Ke)){o=1;break e}if(e.Fa=s.na,e.P=s.P,e.qc=s.Sa,Qe(e,a)){if(0==(r=Rr(a.width,a.height,o.Oa,o.ba))){if(e.Aa=0,n=o.Oa,t(null!=(s=e)),null!=n){if(0<(c=0>(c=n.Md)?0:100<c?255:255*c/100)){for(d=u=0;4>d;++d)12>(h=s.pb[d]).lc&&(h.ia=c*za[0>h.lc?0:h.lc]>>3),u|=h.ia;u&&(alert("todo:VP8InitRandom"),s.ia=1)}s.Ga=n.Id,100<s.Ga?s.Ga=100:0>s.Ga&&(s.Ga=0)}Ze(e,a)||(r=e.a)}}else r=e.a}0==r&&null!=o.Oa&&o.Oa.fd&&(r=Mr(o.ba))}o=r}i=0!=o?null:11>i?l.f.RGBA.eb:l.f.kb.y}else i=null;return i};var qa=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(e,t){for(var r="",n=0;n<4;n++)r+=String.fromCharCode(e[t++]);return r}function d(e,t){return(e[t+0]|e[t+1]<<8|e[t+2]<<16)>>>0}function u(e,t){return(e[t+0]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}new l;var h=[0],m=[0],p=[],f=new l,g=e,x=function(e,t){var r={},n=0,a=!1,s=0,i=0;if(r.frames=[],!function(e,t){for(var r=0;r<4;r++)if(e[t+r]!="RIFF".charCodeAt(r))return!0;return!1}(e,t)){var o,l;for(u(e,t+=4),t+=8;t<e.length;){var h=c(e,t),m=u(e,t+=4);t+=4;var p=m+(1&m);switch(h){case"VP8 ":case"VP8L":void 0===r.frames[n]&&(r.frames[n]={}),(x=r.frames[n]).src_off=a?i:t-8,x.src_size=s+m+8,n++,a&&(a=!1,s=0,i=0);break;case"VP8X":(x=r.header={}).feature_flags=e[t];var f=t+4;x.canvas_width=1+d(e,f),f+=3,x.canvas_height=1+d(e,f),f+=3;break;case"ALPH":a=!0,s=p+8,i=t-8;break;case"ANIM":(x=r.header).bgcolor=u(e,t),f=t+4,x.loop_count=(o=e)[(l=f)+0]|o[l+1]<<8,f+=2;break;case"ANMF":var g,x;(x=r.frames[n]={}).offset_x=2*d(e,t),t+=3,x.offset_y=2*d(e,t),t+=3,x.width=1+d(e,t),t+=3,x.height=1+d(e,t),t+=3,x.duration=d(e,t),t+=3,g=e[t++],x.dispose=1&g,x.blend=g>>1&1}"ANMF"!=h&&(t+=p)}return r}}(g,0);x.response=g,x.rgbaoutput=!0,x.dataurl=!1;var y=x.header?x.header:null,v=x.frames?x.frames:null;if(y){y.loop_counter=y.loop_count,h=[y.canvas_height],m=[y.canvas_width];for(var b=0;b<v.length&&0!=v[b].blend;b++);}var j=v[0],w=f.WebPDecodeRGBA(g,j.src_off,j.src_size,m,h);j.rgba=w,j.imgwidth=m[0],j.imgheight=h[0];for(var N=0;N<m[0]*h[0]*4;N++)p[N]=w[N];return this.width=m,this.height=h,this.data=p,this}!function(e){var t=function(t,n,l,c){var d=4,u=s;switch(c){case e.image_compression.FAST:d=1,u=a;break;case e.image_compression.MEDIUM:d=6,u=i;break;case e.image_compression.SLOW:d=9,u=o}var h=$(t=r(t,n,l,u),{level:d});return e.__addimage__.arrayBufferToBinaryString(h)},r=function(e,t,r,n){for(var a,s,i,o=e.length/t,l=new Uint8Array(e.length+o),u=c(),h=0;h<o;h+=1){if(i=h*t,a=e.subarray(i,i+t),n)l.set(n(a,r,s),i+h);else{for(var m,p=u.length,f=[];m<p;m+=1)f[m]=u[m](a,r,s);var g=d(f.concat());l.set(f[g],i+h)}s=a}return l},n=function(e){var t=Array.apply([],e);return t.unshift(0),t},a=function(e,t){var r,n=[],a=e.length;n[0]=1;for(var s=0;s<a;s+=1)r=e[s-t]||0,n[s+1]=e[s]-r+256&255;return n},s=function(e,t,r){var n,a=[],s=e.length;a[0]=2;for(var i=0;i<s;i+=1)n=r&&r[i]||0,a[i+1]=e[i]-n+256&255;return a},i=function(e,t,r){var n,a,s=[],i=e.length;s[0]=3;for(var o=0;o<i;o+=1)n=e[o-t]||0,a=r&&r[o]||0,s[o+1]=e[o]+256-(n+a>>>1)&255;return s},o=function(e,t,r){var n,a,s,i,o=[],c=e.length;o[0]=4;for(var d=0;d<c;d+=1)n=e[d-t]||0,a=r&&r[d]||0,s=r&&r[d-t]||0,i=l(n,a,s),o[d+1]=e[d]-i+256&255;return o},l=function(e,t,r){if(e===t&&t===r)return e;var n=Math.abs(t-r),a=Math.abs(e-r),s=Math.abs(e+t-r-r);return n<=a&&n<=s?e:a<=s?t:r},c=function(){return[n,a,s,i,o]},d=function(e){var t=e.map(function(e){return e.reduce(function(e,t){return e+Math.abs(t)},0)});return t.indexOf(Math.min.apply(null,t))};e.processPNG=function(r,n,a,s){var i,o,l,c,d,u,h,m,p,f,g,x,y,v,b,j=this.decode.FLATE_DECODE,w="";if(this.__addimage__.isArrayBuffer(r)&&(r=new Uint8Array(r)),this.__addimage__.isArrayBufferView(r)){if(r=(l=new Gt(r)).imgData,o=l.bits,i=l.colorSpace,d=l.colors,-1!==[4,6].indexOf(l.colorType)){if(8===l.bits){p=(m=32==l.pixelBitlength?new Uint32Array(l.decodePixels().buffer):16==l.pixelBitlength?new Uint16Array(l.decodePixels().buffer):new Uint8Array(l.decodePixels().buffer)).length,g=new Uint8Array(p*l.colors),f=new Uint8Array(p);var N,_=l.pixelBitlength-l.bits;for(v=0,b=0;v<p;v++){for(y=m[v],N=0;N<_;)g[b++]=y>>>N&255,N+=l.bits;f[v]=y>>>N&255}}if(16===l.bits){p=(m=new Uint32Array(l.decodePixels().buffer)).length,g=new Uint8Array(p*(32/l.pixelBitlength)*l.colors),f=new Uint8Array(p*(32/l.pixelBitlength)),x=l.colors>1,v=0,b=0;for(var k=0;v<p;)y=m[v++],g[b++]=y>>>0&255,x&&(g[b++]=y>>>16&255,y=m[v++],g[b++]=y>>>0&255),f[k++]=y>>>16&255;o=8}s!==e.image_compression.NONE?(r=t(g,l.width*l.colors,l.colors,s),h=t(f,l.width,1,s)):(r=g,h=f,j=void 0)}if(3===l.colorType&&(i=this.color_spaces.INDEXED,u=l.palette,l.transparency.indexed)){var S=l.transparency.indexed,A=0;for(v=0,p=S.length;v<p;++v)A+=S[v];if((A/=255)===p-1&&-1!==S.indexOf(0))c=[S.indexOf(0)];else if(A!==p){for(m=l.decodePixels(),f=new Uint8Array(m.length),v=0,p=m.length;v<p;v++)f[v]=S[m[v]];h=t(f,l.width,1)}}var C=function(t){var r;switch(t){case e.image_compression.FAST:r=11;break;case e.image_compression.MEDIUM:r=13;break;case e.image_compression.SLOW:r=14;break;default:r=12}return r}(s);return j===this.decode.FLATE_DECODE&&(w="/Predictor "+C+" "),w+="/Colors "+d+" /BitsPerComponent "+o+" /Columns "+l.width,(this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r))&&(r=this.__addimage__.arrayBufferToBinaryString(r)),(h&&this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),{alias:a,data:r,index:n,filter:j,decodeParameters:w,transparency:c,palette:u,sMask:h,predictor:C,width:l.width,height:l.height,bitsPerComponent:o,colorSpace:i}}}}(De.API),function(e){e.processGIF89A=function(t,r,n,a){var s=new Kt(t),i=s.width,o=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:i,height:o},d=new Xt(100).encode(c,100);return e.processJPEG.call(this,d,r,n,a)},e.processGIF87A=e.processGIF89A}(De.API),Qt.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Qt.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(e){re.log("bit decode error:"+e)}},Qt.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+8*a*4,o=0;o<8&&8*a+o<this.width;o++){var l=this.palette[s>>7-o&1];this.data[i+4*o]=l.blue,this.data[i+4*o+1]=l.green,this.data[i+4*o+2]=l.red,this.data[i+4*o+3]=255}0!==r&&(this.pos+=4-r)}},Qt.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+2*a*4,o=s>>4,l=15&s,c=this.palette[o];if(this.data[i]=c.blue,this.data[i+1]=c.green,this.data[i+2]=c.red,this.data[i+3]=255,2*a+1>=this.width)break;c=this.palette[l],this.data[i+4]=c.blue,this.data[i+4+1]=c.green,this.data[i+4+2]=c.red,this.data[i+4+3]=255}0!==t&&(this.pos+=4-t)}},Qt.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(a<this.palette.length){var i=this.palette[a];this.data[s]=i.red,this.data[s+1]=i.green,this.data[s+2]=i.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}0!==e&&(this.pos+=4-e)}},Qt.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(s&t)/t*255|0,o=(s>>5&t)/t*255|0,l=(s>>10&t)/t*255|0,c=s>>15?255:0,d=n*this.width*4+4*a;this.data[d]=l,this.data[d+1]=o,this.data[d+2]=i,this.data[d+3]=c}this.pos+=e}},Qt.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&r)/r*255|0,c=(i>>11)/t*255|0,d=a*this.width*4+4*s;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=255}this.pos+=e}},Qt.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=t*this.width*4+4*r;this.data[i]=s,this.data[i+1]=a,this.data[i+2]=n,this.data[i+3]=255}this.pos+=this.width%4}},Qt.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=s,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=i}},Qt.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,a){var s=new Qt(t,!1),i=s.width,o=s.height,l={data:s.getData(),width:i,height:o},c=new Xt(100).encode(l,100);return e.processJPEG.call(this,c,r,n,a)}}(De.API),$t.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,a){var s=new $t(t,!1),i=s.width,o=s.height,l={data:s.getData(),width:i,height:o},c=new Xt(100).encode(l,100);return e.processJPEG.call(this,c,r,n,a)}}(De.API),De.API.processRGBA=function(e,t,r){for(var n=e.data,a=n.length,s=new Uint8Array(a/4*3),i=new Uint8Array(a/4),o=0,l=0,c=0;c<a;c+=4){var d=n[c],u=n[c+1],h=n[c+2],m=n[c+3];s[o++]=d,s[o++]=u,s[o++]=h,i[l++]=m}var p=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:p,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},De.API.setLanguage=function(e){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]&&(this.internal.languageSettings.languageCode=e,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Ut=De.API,qt=Ut.getCharWidthsArray=function(e,t){var r,a,s=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:s.metadata.Unicode.widths,c=l.fof?l.fof:1,d=t.kerning?t.kerning:s.metadata.Unicode.kerning,u=d.fof?d.fof:1,h=!1!==t.doKerning,m=0,p=e.length,f=0,g=l[0]||c,x=[];for(r=0;r<p;r++)a=e.charCodeAt(r),"function"==typeof s.metadata.widthOfString?x.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(a))+o*(1e3/i)||0)/1e3):(m=h&&"object"===(0,n.A)(d[a])&&!isNaN(parseInt(d[a][f],10))?d[a][f]/u:0,x.push((l[a]||g)/c+m)),f=a;return x},Wt=Ut.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return Ut.processArabic&&(e=Ut.processArabic(e)),"function"==typeof n.metadata.widthOfString?n.metadata.widthOfString(e,r,a)/r:qt.apply(this,arguments).reduce(function(e,t){return e+t},0)},Vt=function(e,t,r,n){for(var a=[],s=0,i=e.length,o=0;s!==i&&o+t[s]<r;)o+=t[s],s++;a.push(e.slice(0,s));var l=s;for(o=0;s!==i;)o+t[s]>n&&(a.push(e.slice(l,s)),o=0,l=s),o+=t[s],s++;return l!==s&&a.push(e.slice(l,s)),a},Ht=function(e,t,r){r||(r={});var n,a,s,i,o,l,c,d=[],u=[d],h=r.textIndent||0,m=0,p=0,f=e.split(" "),g=qt.apply(this,[" ",r])[0];if(l=-1===r.lineIndent?f[0].length+2:r.lineIndent||0){var x=Array(l).join(" "),y=[];f.map(function(e){(e=e.split(/\s*\n/)).length>1?y=y.concat(e.map(function(e,t){return(t&&e.length?"\n":"")+e})):y.push(e[0])}),f=y,l=Wt.apply(this,[x,r])}for(s=0,i=f.length;s<i;s++){var v=0;if(n=f[s],l&&"\n"==n[0]&&(n=n.substr(1),v=1),h+m+(p=(a=qt.apply(this,[n,r])).reduce(function(e,t){return e+t},0))>t||v){if(p>t){for(o=Vt.apply(this,[n,a,t-(h+m),t]),d.push(o.shift()),d=[o.pop()];o.length;)u.push([o.shift()]);p=a.slice(n.length-(d[0]?d[0].length:0)).reduce(function(e,t){return e+t},0)}else d=[n];u.push(d),h=p+l,m=g}else d.push(n),h+=m+p,m=g}return c=l?function(e,t){return(t?x:"")+e.join(" ")}:function(e){return e.join(" ")},u.map(c)},Ut.splitTextToSize=function(e,t,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),s=function(e){if(e.widths&&e.kerning)return{widths:e.widths,kerning:e.kerning};var t=this.internal.getFont(e.fontName,e.fontStyle);return t.metadata.Unicode?{widths:t.metadata.Unicode.widths||{0:1},kerning:t.metadata.Unicode.kerning||{}}:{font:t.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var i=1*this.internal.scaleFactor*t/a;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=r.lineIndent;var o,l,c=[];for(o=0,l=n.length;o<l;o++)c=c.concat(Ht.apply(this,[n[o],i,s]));return c},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},a={},s=0;s<16;s++)r[t[s]]="0123456789abcdef"[s],a["0123456789abcdef"[s]]=t[s];var i=function(e){return"0x"+parseInt(e,10).toString(16)},o=e.__fontmetrics__.compress=function(e){var t,r,s,l,c=["{"];for(var d in e){if(t=e[d],isNaN(parseInt(d,10))?r="'"+d+"'":(d=parseInt(d,10),r=(r=i(d).slice(2)).slice(0,-1)+a[r.slice(-1)]),"number"==typeof t)t<0?(s=i(t).slice(3),l="-"):(s=i(t).slice(2),l=""),s=l+s.slice(0,-1)+a[s.slice(-1)];else{if("object"!==(0,n.A)(t))throw new Error("Don't know what to do with value type "+(0,n.A)(t)+".");s=o(t)}c.push(r+s)}return c.push("}"),c.join("")},l=e.__fontmetrics__.uncompress=function(e){if("string"!=typeof e)throw new Error("Invalid argument passed to uncompress.");for(var t,n,a,s,i={},o=1,l=i,c=[],d="",u="",h=e.length-1,m=1;m<h;m+=1)"'"==(s=e[m])?t?(a=t.join(""),t=void 0):t=[]:t?t.push(s):"{"==s?(c.push([l,a]),l={},a=void 0):"}"==s?((n=c.pop())[0][n[1]]=l,a=void 0,l=n[0]):"-"==s?o=-1:void 0===a?r.hasOwnProperty(s)?(d+=r[s],a=parseInt(d,16)*o,o=1,d=""):d+=s:r.hasOwnProperty(s)?(u+=r[s],l[a]=parseInt(u,16)*o,o=1,a=void 0,u=""):u+=s;return i},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},u={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(e){var t=e.font,r=u.Unicode[t.postScriptName];r&&(t.metadata.Unicode={},t.metadata.Unicode.widths=r.widths,t.metadata.Unicode.kerning=r.kerning);var n=d.Unicode[t.postScriptName];n&&(t.metadata.Unicode.encoding=n,t.encoding=n.codePages[0])}])}(De.API),function(e){var t=function(e){for(var t=e.length,r=new Uint8Array(t),n=0;n<t;n++)r[n]=e.charCodeAt(n);return r};e.API.events.push(["addFont",function(r){var n=void 0,a=r.font,s=r.instance;if(!a.isStandardFont){if(void 0===s)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if("string"!=typeof(n=!1===s.existsFileInVFS(a.postScriptName)?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName)))throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");!function(r,n){n=/^\x00\x01\x00\x00/.test(n)?t(n):t(ie(n)),r.metadata=e.API.TTFFont.open(n),r.metadata.Unicode=r.metadata.Unicode||{encoding:{},kerning:{},widths:[]},r.metadata.glyIdsUsed=[0]}(a,n)}}])}(De),function(){function e(){return(ee.canvg?Promise.resolve(ee.canvg):r.e(455).then(r.bind(r,8455))).catch(function(e){return Promise.reject(new Error("Could not load canvg: "+e))}).then(function(e){return e.default?e.default:e})}De.API.addSvgAsImage=function(t,r,n,a,s,i,o,l){if(isNaN(r)||isNaN(n))throw re.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(s))throw re.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=a,c.height=s;var d=c.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,c.width,c.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},h=this;return e().then(function(e){return e.fromString(d,t,u)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(e){return e.render(u)}).then(function(){h.addImage(c.toDataURL("image/jpeg",1),r,n,a,s,o,l)})}}(),De.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(t,r);return this},De.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var a,s,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],d=0,u=0,h=0;function m(e,t){var r,n=!1;for(r=0;r<e.length;r+=1)e[r]===t&&(n=!0);return n}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,"reset"===e||!0===t){var p=l.length;for(h=0;h<p;h+=1)r[l[h]].value=r[l[h]].defaultValue,r[l[h]].explicitSet=!1}if("object"===(0,n.A)(e))for(s in e)if(i=e[s],m(l,s)&&void 0!==i){if("boolean"===r[s].type&&"boolean"==typeof i)r[s].value=i;else if("name"===r[s].type&&m(r[s].valueSet,i))r[s].value=i;else if("integer"===r[s].type&&Number.isInteger(i))r[s].value=i;else if("array"===r[s].type){for(d=0;d<i.length;d+=1)if(a=!0,1===i[d].length&&"number"==typeof i[d][0])c.push(String(i[d]-1));else if(i[d].length>1){for(u=0;u<i[d].length;u+=1)"number"!=typeof i[d][u]&&(a=!1);!0===a&&c.push([i[d][0]-1,i[d][1]-1].join(" "))}r[s].value="["+c.join(" ")+"]"}else r[s].value=r[s].defaultValue;r[s].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){var e,t=[];for(e in r)!0===r[e].explicitSet&&("name"===r[e].type?t.push("/"+e+" /"+r[e].value):t.push("/"+e+" "+r[e].value));0!==t.length&&this.internal.write("/ViewerPreferences\n<<\n"+t.join("\n")+"\n>>")}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var e='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',t=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),r=unescape(encodeURIComponent(e)),n=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),s=unescape(encodeURIComponent("</x:xmpmeta>")),i=r.length+n.length+a.length+t.length+s.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+i+" >>"),this.internal.write("stream"),this.internal.write(t+r+n+a+s),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(e,n){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:e,namespaceuri:n||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(De.API),function(e){var t=e.API,r=t.pdfEscape16=function(e,t){for(var r,n=t.metadata.Unicode.widths,a=["","0","00","000","0000"],s=[""],i=0,o=e.length;i<o;++i){if(r=t.metadata.characterToGlyph(e.charCodeAt(i)),t.metadata.glyIdsUsed.push(r),t.metadata.toUnicode[r]=e.charCodeAt(i),-1==n.indexOf(r)&&(n.push(r),n.push([parseInt(t.metadata.widthOfGlyph(r),10)])),"0"==r)return s.join("");r=r.toString(16),s.push(a[4-r.length],r)}return s.join("")},n=function(e){var t,r,n,a,s,i,o;for(s="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",n=[],i=0,o=(r=Object.keys(e).sort(function(e,t){return e-t})).length;i<o;i++)t=r[i],n.length>=100&&(s+="\n"+n.length+" beginbfchar\n"+n.join("\n")+"\nendbfchar",n=[]),void 0!==e[t]&&null!==e[t]&&"function"==typeof e[t].toString&&(a=("0000"+e[t].toString(16)).slice(-4),t=("0000"+(+t).toString(16)).slice(-4),n.push("<"+t+"><"+a+">"));return n.length&&(s+="\n"+n.length+" beginbfchar\n"+n.join("\n")+"\nendbfchar\n"),s+"endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};t.events.push(["putFont",function(t){!function(t){var r=t.font,a=t.out,s=t.newObject,i=t.putStream;if(r.metadata instanceof e.API.TTFFont&&"Identity-H"===r.encoding){for(var o=r.metadata.Unicode.widths,l=r.metadata.subset.encode(r.metadata.glyIdsUsed,1),c="",d=0;d<l.length;d++)c+=String.fromCharCode(l[d]);var u=s();i({data:c,addLength1:!0,objectId:u}),a("endobj");var h=s();i({data:n(r.metadata.toUnicode),addLength1:!0,objectId:h}),a("endobj");var m=s();a("<<"),a("/Type /FontDescriptor"),a("/FontName /"+Ae(r.fontName)),a("/FontFile2 "+u+" 0 R"),a("/FontBBox "+e.API.PDFObject.convert(r.metadata.bbox)),a("/Flags "+r.metadata.flags),a("/StemV "+r.metadata.stemV),a("/ItalicAngle "+r.metadata.italicAngle),a("/Ascent "+r.metadata.ascender),a("/Descent "+r.metadata.decender),a("/CapHeight "+r.metadata.capHeight),a(">>"),a("endobj");var p=s();a("<<"),a("/Type /Font"),a("/BaseFont /"+Ae(r.fontName)),a("/FontDescriptor "+m+" 0 R"),a("/W "+e.API.PDFObject.convert(o)),a("/CIDToGIDMap /Identity"),a("/DW 1000"),a("/Subtype /CIDFontType2"),a("/CIDSystemInfo"),a("<<"),a("/Supplement 0"),a("/Registry (Adobe)"),a("/Ordering ("+r.encoding+")"),a(">>"),a(">>"),a("endobj"),r.objectNumber=s(),a("<<"),a("/Type /Font"),a("/Subtype /Type0"),a("/ToUnicode "+h+" 0 R"),a("/BaseFont /"+Ae(r.fontName)),a("/Encoding /"+r.encoding),a("/DescendantFonts ["+p+" 0 R]"),a(">>"),a("endobj"),r.isAlreadyPutted=!0}}(t)}]),t.events.push(["putFont",function(t){!function(t){var r=t.font,a=t.out,s=t.newObject,i=t.putStream;if(r.metadata instanceof e.API.TTFFont&&"WinAnsiEncoding"===r.encoding){for(var o=r.metadata.rawData,l="",c=0;c<o.length;c++)l+=String.fromCharCode(o[c]);var d=s();i({data:l,addLength1:!0,objectId:d}),a("endobj");var u=s();i({data:n(r.metadata.toUnicode),addLength1:!0,objectId:u}),a("endobj");var h=s();a("<<"),a("/Descent "+r.metadata.decender),a("/CapHeight "+r.metadata.capHeight),a("/StemV "+r.metadata.stemV),a("/Type /FontDescriptor"),a("/FontFile2 "+d+" 0 R"),a("/Flags 96"),a("/FontBBox "+e.API.PDFObject.convert(r.metadata.bbox)),a("/FontName /"+Ae(r.fontName)),a("/ItalicAngle "+r.metadata.italicAngle),a("/Ascent "+r.metadata.ascender),a(">>"),a("endobj"),r.objectNumber=s();for(var m=0;m<r.metadata.hmtx.widths.length;m++)r.metadata.hmtx.widths[m]=parseInt(r.metadata.hmtx.widths[m]*(1e3/r.metadata.head.unitsPerEm));a("<</Subtype/TrueType/Type/Font/ToUnicode "+u+" 0 R/BaseFont/"+Ae(r.fontName)+"/FontDescriptor "+h+" 0 R/Encoding/"+r.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(r.metadata.hmtx.widths)+">>"),a("endobj"),r.isAlreadyPutted=!0}}(t)}]);var a=function(e){var t,n=e.text||"",a=e.x,s=e.y,i=e.options||{},o=e.mutex||{},l=o.pdfEscape,c=o.activeFontKey,d=o.fonts,u=c,h="",m=0,p="",f=d[u].encoding;if("Identity-H"!==d[u].encoding)return{text:n,x:a,y:s,options:i,mutex:o};for(p=n,u=c,Array.isArray(n)&&(p=n[0]),m=0;m<p.length;m+=1)d[u].metadata.hasOwnProperty("cmap")&&(t=d[u].metadata.cmap.unicode.codeMap[p[m].charCodeAt(0)]),t||p[m].charCodeAt(0)<256&&d[u].metadata.hasOwnProperty("Unicode")?h+=p[m]:h+="";var g="";return parseInt(u.slice(1))<14||"WinAnsiEncoding"===f?g=l(h,u).split("").map(function(e){return e.charCodeAt(0).toString(16)}).join(""):"Identity-H"===f&&(g=r(h,d[u])),o.isHex=!0,{text:g,x:a,y:s,options:i,mutex:o}};t.events.push(["postProcessText",function(e){var t=e.text||"",r=[],n={text:t,x:e.x,y:e.y,options:e.options,mutex:e.mutex};if(Array.isArray(t)){var s=0;for(s=0;s<t.length;s+=1)Array.isArray(t[s])&&3===t[s].length?r.push([a(Object.assign({},n,{text:t[s][0]})).text,t[s][1],t[s][2]]):r.push(a(Object.assign({},n,{text:t[s]})).text);e.text=r}else e.text=a(Object.assign({},n,{text:t})).text}])}(De),function(e){var t=function(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]},e.addFileToVFS=function(e,r){return t.call(this),this.internal.vFS[e]=r,this},e.getFileFromVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]?this.internal.vFS[e]:null}}(De.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(e){var r,n,a,s,i,o,l,c=t,d=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],u=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],h={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},m={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},p=["(",")","(","<",">","<","[","]","[","{","}","{","\xab","\xbb","\xab","\u2039","\u203a","\u2039","\u2045","\u2046","\u2045","\u207d","\u207e","\u207d","\u208d","\u208e","\u208d","\u2264","\u2265","\u2264","\u2329","\u232a","\u2329","\ufe59","\ufe5a","\ufe59","\ufe5b","\ufe5c","\ufe5b","\ufe5d","\ufe5e","\ufe5d","\ufe64","\ufe65","\ufe64"],f=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),g=!1,x=0;this.__bidiEngine__={};var y=function(e){var t=e.charCodeAt(),r=t>>8,n=m[r];return void 0!==n?c[256*n+(255&t)]:252===r||253===r?"AL":f.test(r)?"L":8===r?"R":"N"},v=function(e){for(var t,r=0;r<e.length;r++){if("L"===(t=y(e.charAt(r))))return!1;if("R"===t)return!0}return!1},b=function(e,t,i,o){var l,c,d,u,h=t[o];switch(h){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":g=!1;break;case"N":case"AN":break;case"EN":g&&(h="AN");break;case"AL":g=!0,h="R";break;case"WS":case"BN":h="N";break;case"CS":o<1||o+1>=t.length||"EN"!==(l=i[o-1])&&"AN"!==l||"EN"!==(c=t[o+1])&&"AN"!==c?h="N":g&&(c="AN"),h=c===l?c:"N";break;case"ES":h="EN"===(l=o>0?i[o-1]:"B")&&o+1<t.length&&"EN"===t[o+1]?"EN":"N";break;case"ET":if(o>0&&"EN"===i[o-1]){h="EN";break}if(g){h="N";break}for(d=o+1,u=t.length;d<u&&"ET"===t[d];)d++;h=d<u&&"EN"===t[d]?"EN":"N";break;case"NSM":if(a&&!s){for(u=t.length,d=o+1;d<u&&"NSM"===t[d];)d++;if(d<u){var m=e[o],p=m>=1425&&m<=2303||64286===m;if(l=t[d],p&&("R"===l||"AL"===l)){h="R";break}}}h=o<1||"B"===(l=t[o-1])?"N":i[o-1];break;case"B":g=!1,r=!0,h=x;break;case"S":n=!0,h="N"}return h},j=function(e,t,r){var n=e.split("");return r&&w(n,r,{hiLevel:x}),n.reverse(),t&&t.reverse(),n.join("")},w=function(e,t,a){var s,i,o,l,c,m=-1,p=e.length,f=0,v=[],j=x?u:d,w=[];for(g=!1,r=!1,n=!1,i=0;i<p;i++)w[i]=y(e[i]);for(o=0;o<p;o++){if(c=f,v[o]=b(e,w,v,o),s=240&(f=j[c][h[v[o]]]),f&=15,t[o]=l=j[f][5],s>0)if(16===s){for(i=m;i<o;i++)t[i]=1;m=-1}else m=-1;if(j[f][6])-1===m&&(m=o);else if(m>-1){for(i=m;i<o;i++)t[i]=l;m=-1}"B"===w[o]&&(t[o]=0),a.hiLevel|=l}n&&function(e,t,r){for(var n=0;n<r;n++)if("S"===e[n]){t[n]=x;for(var a=n-1;a>=0&&"WS"===e[a];a--)t[a]=x}}(w,t,p)},N=function(e,t,n,a,s){if(!(s.hiLevel<e)){if(1===e&&1===x&&!r)return t.reverse(),void(n&&n.reverse());for(var i,o,l,c,d=t.length,u=0;u<d;){if(a[u]>=e){for(l=u+1;l<d&&a[l]>=e;)l++;for(c=u,o=l-1;c<o;c++,o--)i=t[c],t[c]=t[o],t[o]=i,n&&(i=n[c],n[c]=n[o],n[o]=i);u=l}u++}}},_=function(e,t,r){var n=e.split(""),a={hiLevel:x};return r||(r=[]),w(n,r,a),function(e,t,r){if(0!==r.hiLevel&&l)for(var n,a=0;a<e.length;a++)1===t[a]&&(n=p.indexOf(e[a]))>=0&&(e[a]=p[n+1])}(n,r,a),N(2,n,t,r,a),N(1,n,t,r,a),n.join("")};return this.__bidiEngine__.doBidiReorder=function(e,t,r){if(function(e,t){if(t)for(var r=0;r<e.length;r++)t[r]=r;void 0===s&&(s=v(e)),void 0===o&&(o=v(e))}(e,t),a||!i||o)if(a&&i&&s^o)x=s?1:0,e=j(e,t,r);else if(!a&&i&&o)x=s?1:0,e=_(e,t,r),e=j(e,t);else if(!a||s||i||o){if(a&&!i&&s^o)e=j(e,t),s?(x=0,e=_(e,t,r)):(x=1,e=_(e,t,r),e=j(e,t));else if(a&&s&&!i&&o)x=1,e=_(e,t,r),e=j(e,t);else if(!a&&!i&&s^o){var n=l;s?(x=1,e=_(e,t,r),x=0,l=!1,e=_(e,t,r),l=n):(x=0,e=_(e,t,r),e=j(e,t),x=1,l=!1,e=_(e,t,r),l=n,e=j(e,t))}}else x=0,e=_(e,t,r);else x=s?1:0,e=_(e,t,r);return e},this.__bidiEngine__.setOptions=function(e){e&&(a=e.isInputVisual,i=e.isOutputVisual,s=e.isInputRtl,o=e.isOutputRtl,l=e.isSymmetricSwapping)},this.__bidiEngine__.setOptions(e),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(e){var t=e.text,n=(e.x,e.y,e.options||{}),a=(e.mutex,n.lang,[]);if(n.isInputVisual="boolean"!=typeof n.isInputVisual||n.isInputVisual,r.setOptions(n),"[object Array]"===Object.prototype.toString.call(t)){var s=0;for(a=[],s=0;s<t.length;s+=1)"[object Array]"===Object.prototype.toString.call(t[s])?a.push([r.doBidiReorder(t[s][0]),t[s][1],t[s][2]]):a.push([r.doBidiReorder(t[s])]);e.text=a}else e.text=r.doBidiReorder(t);r.setOptions({isInputVisual:!0})}])}(De),De.API.TTFFont=function(){function e(e){var t;if(this.rawData=e,t=this.contents=new Zt(e),this.contents.pos=4,"ttcf"===t.readString(4))throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new yr(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new er(this.contents),this.head=new nr(this),this.name=new dr(this),this.cmap=new sr(this),this.toUnicode={},this.hhea=new ir(this),this.maxp=new ur(this),this.hmtx=new hr(this),this.post=new lr(this),this.os2=new or(this),this.loca=new xr(this),this.glyf=new pr(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var e,t,r,n,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var t,r,n,a;for(a=[],t=0,r=(n=this.bbox).length;t<r;t++)e=n[t],a.push(Math.round(e*this.scaleFactor));return a}.call(this),this.stemV=0,this.post.exists?(r=255&(n=this.post.italic_angle),0!=(32768&(t=n>>16))&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(a=this.familyClass)||2===a||3===a||4===a||5===a||7===a,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(e){var t;return(null!=(t=this.cmap.unicode)?t.codeMap[e]:void 0)||0},e.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},e.prototype.widthOfString=function(e,t,r){var n,a,s,i;for(s=0,a=0,i=(e=""+e).length;0<=i?a<i:a>i;a=0<=i?++a:--a)n=e.charCodeAt(a),s+=this.widthOfGlyph(this.characterToGlyph(n))+r*(1e3/t)||0;return s*(t/1e3)},e.prototype.lineHeight=function(e,t){var r;return null==t&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},e}();var Jt,Zt=function(){function e(e){this.data=null!=e?e:[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(e){return this.data[this.pos++]=e},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},e.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},e.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},e.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},e.prototype.writeString=function(e){var t,r,n;for(n=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)n.push(this.writeByte(e.charCodeAt(t)));return n},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(e){return this.writeInt16(e)},e.prototype.readLongLong=function(){var e,t,r,n,a,s,i,o;return e=this.readByte(),t=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),s=this.readByte(),i=this.readByte(),o=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^n)+16777216*(255^a)+65536*(255^s)+256*(255^i)+(255^o)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*n+16777216*a+65536*s+256*i+o},e.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(e){return this.writeInt32(e)},e.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},e.prototype.write=function(e){var t,r,n,a;for(a=[],r=0,n=e.length;r<n;r++)t=e[r],a.push(this.writeByte(t));return a},e}(),er=function(){var e;function t(e){var t,r,n;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},r=0,n=this.tableCount;0<=n?r<n:r>n;r=0<=n?++r:--r)t={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[t.tag]=t}return t.prototype.encode=function(t){var r,n,a,s,i,o,l,c,d,u,h,m,p;for(p in h=Object.keys(t).length,o=Math.log(2),d=16*Math.floor(Math.log(h)/o),s=Math.floor(d/o),c=16*h-d,(n=new Zt).writeInt(this.scalarType),n.writeShort(h),n.writeShort(d),n.writeShort(s),n.writeShort(c),a=16*h,l=n.pos+a,i=null,m=[],t)for(u=t[p],n.writeString(p),n.writeInt(e(u)),n.writeInt(l),n.writeInt(u.length),m=m.concat(u),"head"===p&&(i=l),l+=u.length;l%4;)m.push(0),l++;return n.write(m),r=2981146554-e(n.data),n.pos=i+8,n.writeUInt32(r),n.data},e=function(e){var t,r,n,a;for(e=mr.call(e);e.length%4;)e.push(0);for(n=new Zt(e),r=0,t=0,a=e.length;t<a;t=t+=4)r+=n.readUInt32();return 4294967295&r},t}(),tr={}.hasOwnProperty,rr=function(e,t){for(var r in t)tr.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};Jt=function(){function e(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var nr=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return rr(e,Jt),e.prototype.tag="head",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},e.prototype.encode=function(e){var t;return(t=new Zt).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},e}(),ar=function(){function e(e,t){var r,n,a,s,i,o,l,c,d,u,h,m,p,f,g,x,y;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),d=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(o=0;o<256;++o)this.codeMap[o]=e.readByte();break;case 4:for(h=e.readUInt16(),u=h/2,e.pos+=6,a=function(){var t,r;for(r=[],o=t=0;0<=u?t<u:t>u;o=0<=u?++t:--t)r.push(e.readUInt16());return r}(),e.pos+=2,p=function(){var t,r;for(r=[],o=t=0;0<=u?t<u:t>u;o=0<=u?++t:--t)r.push(e.readUInt16());return r}(),l=function(){var t,r;for(r=[],o=t=0;0<=u?t<u:t>u;o=0<=u?++t:--t)r.push(e.readUInt16());return r}(),c=function(){var t,r;for(r=[],o=t=0;0<=u?t<u:t>u;o=0<=u?++t:--t)r.push(e.readUInt16());return r}(),n=(this.length-e.pos+this.offset)/2,i=function(){var t,r;for(r=[],o=t=0;0<=n?t<n:t>n;o=0<=n?++t:--t)r.push(e.readUInt16());return r}(),o=g=0,y=a.length;g<y;o=++g)for(f=a[o],r=x=m=p[o];m<=f?x<=f:x>=f;r=m<=f?++x:--x)0===c[o]?s=r+l[o]:0!==(s=i[c[o]/2+(r-m)-(u-o)]||0)&&(s+=l[o]),this.codeMap[r]=65535&s}e.pos=d}return e.encode=function(e,t){var r,n,a,s,i,o,l,c,d,u,h,m,p,f,g,x,y,v,b,j,w,N,_,k,S,A,C,E,T,P,O,D,I,L,M,R,F,B,z,U,q,W,V,H,G,K;switch(E=new Zt,s=Object.keys(e).sort(function(e,t){return e-t}),t){case"macroman":for(p=0,f=function(){var e=[];for(m=0;m<256;++m)e.push(0);return e}(),x={0:0},a={},T=0,I=s.length;T<I;T++)null==x[V=e[n=s[T]]]&&(x[V]=++p),a[n]={old:e[n],new:x[e[n]]},f[n]=x[e[n]];return E.writeUInt16(1),E.writeUInt16(0),E.writeUInt32(12),E.writeUInt16(0),E.writeUInt16(262),E.writeUInt16(0),E.write(f),{charMap:a,subtable:E.data,maxGlyphID:p+1};case"unicode":for(A=[],d=[],y=0,x={},r={},g=l=null,P=0,L=s.length;P<L;P++)null==x[b=e[n=s[P]]]&&(x[b]=++y),r[n]={old:b,new:x[b]},i=x[b]-n,null!=g&&i===l||(g&&d.push(g),A.push(n),l=i),g=n;for(g&&d.push(g),d.push(65535),A.push(65535),k=2*(_=A.length),N=2*Math.pow(Math.log(_)/Math.LN2,2),u=Math.log(N/2)/Math.LN2,w=2*_-N,o=[],j=[],h=[],m=O=0,M=A.length;O<M;m=++O){if(S=A[m],c=d[m],65535===S){o.push(0),j.push(0);break}if(S-(C=r[S].new)>=32768)for(o.push(0),j.push(2*(h.length+_-m)),n=D=S;S<=c?D<=c:D>=c;n=S<=c?++D:--D)h.push(r[n].new);else o.push(C-S),j.push(0)}for(E.writeUInt16(3),E.writeUInt16(1),E.writeUInt32(12),E.writeUInt16(4),E.writeUInt16(16+8*_+2*h.length),E.writeUInt16(0),E.writeUInt16(k),E.writeUInt16(N),E.writeUInt16(u),E.writeUInt16(w),q=0,R=d.length;q<R;q++)n=d[q],E.writeUInt16(n);for(E.writeUInt16(0),W=0,F=A.length;W<F;W++)n=A[W],E.writeUInt16(n);for(H=0,B=o.length;H<B;H++)i=o[H],E.writeUInt16(i);for(G=0,z=j.length;G<z;G++)v=j[G],E.writeUInt16(v);for(K=0,U=h.length;K<U;K++)p=h[K],E.writeUInt16(p);return{charMap:r,subtable:E.data,maxGlyphID:y+1}}},e}(),sr=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return rr(e,Jt),e.prototype.tag="cmap",e.prototype.parse=function(e){var t,r,n;for(e.pos=this.offset,this.version=e.readUInt16(),n=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=n?r<n:r>n;r=0<=n?++r:--r)t=new ar(e,this.offset),this.tables.push(t),t.isUnicode&&null==this.unicode&&(this.unicode=t);return!0},e.encode=function(e,t){var r,n;return null==t&&(t="macroman"),r=ar.encode(e,t),(n=new Zt).writeUInt16(0),n.writeUInt16(1),r.table=n.data.concat(r.subtable),r},e}(),ir=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return rr(e,Jt),e.prototype.tag="hhea",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},e}(),or=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return rr(e,Jt),e.prototype.tag="OS/2",e.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var t,r;for(r=[],t=0;t<10;++t)r.push(e.readByte());return r}(),this.charRange=function(){var t,r;for(r=[],t=0;t<4;++t)r.push(e.readInt());return r}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var t,r;for(r=[],t=0;t<2;t=++t)r.push(e.readInt());return r}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},e}(),lr=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return rr(e,Jt),e.prototype.tag="post",e.prototype.parse=function(e){var t,r,n;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var a;for(r=e.readUInt16(),this.glyphNameIndex=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],n=[];e.pos<this.offset+this.length;)t=e.readByte(),n.push(this.names.push(e.readString(t)));return n;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=function(){var t,r,n;for(n=[],a=t=0,r=this.file.maxp.numGlyphs;0<=r?t<r:t>r;a=0<=r?++t:--t)n.push(e.readUInt32());return n}.call(this)}},e}(),cr=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},dr=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return rr(e,Jt),e.prototype.tag="name",e.prototype.parse=function(e){var t,r,n,a,s,i,o,l,c,d,u;for(e.pos=this.offset,e.readShort(),t=e.readShort(),i=e.readShort(),r=[],a=0;0<=t?a<t:a>t;a=0<=t?++a:--a)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+i+e.readShort()});for(o={},a=c=0,d=r.length;c<d;a=++c)n=r[a],e.pos=n.offset,l=e.readString(n.length),s=new cr(l,n),null==o[u=n.nameID]&&(o[u]=[]),o[n.nameID].push(s);this.strings=o,this.copyright=o[0],this.fontFamily=o[1],this.fontSubfamily=o[2],this.uniqueSubfamily=o[3],this.fontName=o[4],this.version=o[5];try{this.postscriptName=o[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch(e){this.postscriptName=o[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=o[7],this.manufacturer=o[8],this.designer=o[9],this.description=o[10],this.vendorUrl=o[11],this.designerUrl=o[12],this.license=o[13],this.licenseUrl=o[14],this.preferredFamily=o[15],this.preferredSubfamily=o[17],this.compatibleFull=o[18],this.sampleText=o[19]},e}(),ur=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return rr(e,Jt),e.prototype.tag="maxp",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},e}(),hr=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return rr(e,Jt),e.prototype.tag="hmtx",e.prototype.parse=function(e){var t,r,n,a,s,i,o;for(e.pos=this.offset,this.metrics=[],t=0,i=this.file.hhea.numberOfMetrics;0<=i?t<i:t>i;t=0<=i?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(n=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var r,a;for(a=[],t=r=0;0<=n?r<n:r>n;t=0<=n?++r:--r)a.push(e.readInt16());return a}(),this.widths=function(){var e,t,r,n;for(n=[],e=0,t=(r=this.metrics).length;e<t;e++)a=r[e],n.push(a.advance);return n}.call(this),r=this.widths[this.widths.length-1],o=[],t=s=0;0<=n?s<n:s>n;t=0<=n?++s:--s)o.push(this.widths.push(r));return o},e.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},e}(),mr=[].slice,pr=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return rr(e,Jt),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(e){var t,r,n,a,s,i,o,l,c,d;return e in this.cache?this.cache[e]:(a=this.file.loca,t=this.file.contents,r=a.indexOf(e),0===(n=a.lengthOf(e))?this.cache[e]=null:(t.pos=this.offset+r,s=(i=new Zt(t.read(n))).readShort(),l=i.readShort(),d=i.readShort(),o=i.readShort(),c=i.readShort(),this.cache[e]=-1===s?new gr(i,l,d,o,c):new fr(i,s,l,d,o,c),this.cache[e]))},e.prototype.encode=function(e,t,r){var n,a,s,i,o;for(s=[],a=[],i=0,o=t.length;i<o;i++)n=e[t[i]],a.push(s.length),n&&(s=s.concat(n.encode(r)));return a.push(s.length),{table:s,offsets:a}},e}(),fr=function(){function e(e,t,r,n,a,s){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=s,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),gr=function(){function e(e,t,r,n,a){var s,i;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=n,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;i=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&i;)s.pos+=1&i?4:2,128&i?s.pos+=8:64&i?s.pos+=4:8&i&&(s.pos+=2)}return e.prototype.encode=function(){var e,t,r;for(t=new Zt(mr.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},e}(),xr=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return rr(e,Jt),e.prototype.tag="loca",e.prototype.parse=function(e){var t,r;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=0===t?function(){var t,n;for(n=[],r=0,t=this.length;r<t;r+=2)n.push(2*e.readUInt16());return n}.call(this):function(){var t,n;for(n=[],r=0,t=this.length;r<t;r+=4)n.push(e.readUInt32());return n}.call(this)},e.prototype.indexOf=function(e){return this.offsets[e]},e.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},e.prototype.encode=function(e,t){for(var r=new Uint32Array(this.offsets.length),n=0,a=0,s=0;s<r.length;++s)if(r[s]=n,a<t.length&&t[a]==s){++a,r[s]=n;var i=this.offsets[s],o=this.offsets[s+1]-i;o>0&&(n+=o)}for(var l=new Array(4*r.length),c=0;c<r.length;++c)l[4*c+3]=255&r[c],l[4*c+2]=(65280&r[c])>>8,l[4*c+1]=(16711680&r[c])>>16,l[4*c]=(4278190080&r[c])>>24;return l},e}(),yr=function(){function e(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var e,t,r,n,a;for(t in n=this.font.cmap.tables[0].codeMap,e={},a=this.subset)r=a[t],e[t]=n[r];return e},e.prototype.glyphsFor=function(e){var t,r,n,a,s,i,o;for(n={},s=0,i=e.length;s<i;s++)n[a=e[s]]=this.font.glyf.glyphFor(a);for(a in t=[],n)(null!=(r=n[a])?r.compound:void 0)&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(a in o=this.glyphsFor(t))r=o[a],n[a]=r;return n},e.prototype.encode=function(e,t){var r,n,a,s,i,o,l,c,d,u,h,m,p,f,g;for(n in r=sr.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(e),h={0:0},g=r.charMap)h[(o=g[n]).old]=o.new;for(m in u=r.maxGlyphID,s)m in h||(h[m]=u++);return c=function(e){var t,r;for(t in r={},e)r[e[t]]=t;return r}(h),d=Object.keys(c).sort(function(e,t){return e-t}),p=function(){var e,t,r;for(r=[],e=0,t=d.length;e<t;e++)i=d[e],r.push(c[i]);return r}(),a=this.font.glyf.encode(s,p,h),l=this.font.loca.encode(a.offsets,p),f={cmap:this.font.cmap.raw(),glyf:a.table,loca:l,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(f["OS/2"]=this.font.os2.raw()),this.font.directory.encode(f)},e}();De.API.PDFObject=function(){var e;function t(){}return e=function(e,t){return(Array(t+1).join("0")+e).slice(-t)},t.convert=function(r){var n,a,s,i;if(Array.isArray(r))return"["+function(){var e,a,s;for(s=[],e=0,a=r.length;e<a;e++)n=r[e],s.push(t.convert(n));return s}().join(" ")+"]";if("string"==typeof r)return"/"+r;if(null!=r?r.isString:void 0)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if("[object Object]"==={}.toString.call(r)){for(a in s=["<<"],r)i=r[a],s.push("/"+a+" "+t.convert(i));return s.push(">>"),s.join("\n")}return""+r},t}();const vr=De},7770:(e,t,r)=>{e.exports=r(9323).get},7820:(e,t,r)=>{e.exports=r(5414).throttle},7870:function(e,t){!function(e){"use strict";var t=function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},t.apply(this,arguments)},r=function(){function e(e,r,n){var a=this;this.endVal=r,this.options=n,this.version="2.9.0",this.defaults={startVal:0,decimalPlaces:0,duration:2,useEasing:!0,useGrouping:!0,useIndianSeparators:!1,smartEasingThreshold:999,smartEasingAmount:333,separator:",",decimal:".",prefix:"",suffix:"",enableScrollSpy:!1,scrollSpyDelay:200,scrollSpyOnce:!1},this.finalEndVal=null,this.useEasing=!0,this.countDown=!1,this.error="",this.startVal=0,this.paused=!0,this.once=!1,this.count=function(e){a.startTime||(a.startTime=e);var t=e-a.startTime;a.remaining=a.duration-t,a.useEasing?a.countDown?a.frameVal=a.startVal-a.easingFn(t,0,a.startVal-a.endVal,a.duration):a.frameVal=a.easingFn(t,a.startVal,a.endVal-a.startVal,a.duration):a.frameVal=a.startVal+(a.endVal-a.startVal)*(t/a.duration);var r=a.countDown?a.frameVal<a.endVal:a.frameVal>a.endVal;a.frameVal=r?a.endVal:a.frameVal,a.frameVal=Number(a.frameVal.toFixed(a.options.decimalPlaces)),a.printValue(a.frameVal),t<a.duration?a.rAF=requestAnimationFrame(a.count):null!==a.finalEndVal?a.update(a.finalEndVal):a.options.onCompleteCallback&&a.options.onCompleteCallback()},this.formatNumber=function(e){var t,r,n,s,i=e<0?"-":"";t=Math.abs(e).toFixed(a.options.decimalPlaces);var o=(t+="").split(".");if(r=o[0],n=o.length>1?a.options.decimal+o[1]:"",a.options.useGrouping){s="";for(var l=3,c=0,d=0,u=r.length;d<u;++d)a.options.useIndianSeparators&&4===d&&(l=2,c=1),0!==d&&c%l==0&&(s=a.options.separator+s),c++,s=r[u-d-1]+s;r=s}return a.options.numerals&&a.options.numerals.length&&(r=r.replace(/[0-9]/g,function(e){return a.options.numerals[+e]}),n=n.replace(/[0-9]/g,function(e){return a.options.numerals[+e]})),i+a.options.prefix+r+n+a.options.suffix},this.easeOutExpo=function(e,t,r,n){return r*(1-Math.pow(2,-10*e/n))*1024/1023+t},this.options=t(t({},this.defaults),n),this.formattingFn=this.options.formattingFn?this.options.formattingFn:this.formatNumber,this.easingFn=this.options.easingFn?this.options.easingFn:this.easeOutExpo,this.el="string"==typeof e?document.getElementById(e):e,r=null==r?this.parse(this.el.innerHTML):r,this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.endVal=this.validateValue(r),this.options.decimalPlaces=Math.max(this.options.decimalPlaces),this.resetDuration(),this.options.separator=String(this.options.separator),this.useEasing=this.options.useEasing,""===this.options.separator&&(this.options.useGrouping=!1),this.el?this.printValue(this.startVal):this.error="[CountUp] target is null or undefined","undefined"!=typeof window&&this.options.enableScrollSpy&&(this.error?console.error(this.error,e):(window.onScrollFns=window.onScrollFns||[],window.onScrollFns.push(function(){return a.handleScroll(a)}),window.onscroll=function(){window.onScrollFns.forEach(function(e){return e()})},this.handleScroll(this)))}return e.prototype.handleScroll=function(e){if(e&&window&&!e.once){var t=window.innerHeight+window.scrollY,r=e.el.getBoundingClientRect(),n=r.top+window.pageYOffset,a=r.top+r.height+window.pageYOffset;a<t&&a>window.scrollY&&e.paused?(e.paused=!1,setTimeout(function(){return e.start()},e.options.scrollSpyDelay),e.options.scrollSpyOnce&&(e.once=!0)):(window.scrollY>a||n>t)&&!e.paused&&e.reset()}},e.prototype.determineDirectionAndSmartEasing=function(){var e=this.finalEndVal?this.finalEndVal:this.endVal;this.countDown=this.startVal>e;var t=e-this.startVal;if(Math.abs(t)>this.options.smartEasingThreshold&&this.options.useEasing){this.finalEndVal=e;var r=this.countDown?1:-1;this.endVal=e+r*this.options.smartEasingAmount,this.duration=this.duration/2}else this.endVal=e,this.finalEndVal=null;null!==this.finalEndVal?this.useEasing=!1:this.useEasing=this.options.useEasing},e.prototype.start=function(e){this.error||(this.options.onStartCallback&&this.options.onStartCallback(),e&&(this.options.onCompleteCallback=e),this.duration>0?(this.determineDirectionAndSmartEasing(),this.paused=!1,this.rAF=requestAnimationFrame(this.count)):this.printValue(this.endVal))},e.prototype.pauseResume=function(){this.paused?(this.startTime=null,this.duration=this.remaining,this.startVal=this.frameVal,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count)):cancelAnimationFrame(this.rAF),this.paused=!this.paused},e.prototype.reset=function(){cancelAnimationFrame(this.rAF),this.paused=!0,this.resetDuration(),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.printValue(this.startVal)},e.prototype.update=function(e){cancelAnimationFrame(this.rAF),this.startTime=null,this.endVal=this.validateValue(e),this.endVal!==this.frameVal&&(this.startVal=this.frameVal,null==this.finalEndVal&&this.resetDuration(),this.finalEndVal=null,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count))},e.prototype.printValue=function(e){var t;if(this.el){var r=this.formattingFn(e);(null===(t=this.options.plugin)||void 0===t?void 0:t.render)?this.options.plugin.render(this.el,r):"INPUT"===this.el.tagName?this.el.value=r:"text"===this.el.tagName||"tspan"===this.el.tagName?this.el.textContent=r:this.el.innerHTML=r}},e.prototype.ensureNumber=function(e){return"number"==typeof e&&!isNaN(e)},e.prototype.validateValue=function(e){var t=Number(e);return this.ensureNumber(t)?t:(this.error="[CountUp] invalid start or end value: ".concat(e),null)},e.prototype.resetDuration=function(){this.startTime=null,this.duration=1e3*Number(this.options.duration),this.remaining=this.duration},e.prototype.parse=function(e){var t=function(e){return e.replace(/([.,'\xa0 ])/g,"\\$1")},r=t(this.options.separator),n=t(this.options.decimal),a=e.replace(new RegExp(r,"g"),"").replace(new RegExp(n,"g"),".");return parseFloat(a)},e}();e.CountUp=r}(t)},7950:(e,t,r)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(2730)},8210:function(e,t,r){var n;!function(){"use strict";var a,s=1e9,i={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},o=!0,l="[DecimalError] ",c=l+"Invalid argument: ",d=l+"Exponent out of range: ",u=Math.floor,h=Math.pow,m=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,p=1e7,f=9007199254740991,g=u(1286742750677284.5),x={};function y(e,t){var r,n,a,s,i,l,c,d,u=e.constructor,h=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),o?C(t,h):t;if(c=e.d,d=t.d,i=e.e,a=t.e,c=c.slice(),s=i-a){for(s<0?(n=c,s=-s,l=d.length):(n=d,a=i,l=c.length),s>(l=(i=Math.ceil(h/7))>l?i+1:l+1)&&(s=l,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for((l=c.length)-(s=d.length)<0&&(s=l,n=d,d=c,c=n),r=0;s;)r=(c[--s]=c[s]+d[s]+r)/p|0,c[s]%=p;for(r&&(c.unshift(r),++a),l=c.length;0==c[--l];)c.pop();return t.d=c,t.e=a,o?C(t,h):t}function v(e,t,r){if(e!==~~e||e<t||e>r)throw Error(c+e)}function b(e){var t,r,n,a=e.length-1,s="",i=e[0];if(a>0){for(s+=i,t=1;t<a;t++)(r=7-(n=e[t]+"").length)&&(s+=k(r)),s+=n;(r=7-(n=(i=e[t])+"").length)&&(s+=k(r))}else if(0===i)return"0";for(;i%10===0;)i/=10;return s+i}x.absoluteValue=x.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},x.comparedTo=x.cmp=function(e){var t,r,n,a,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(t=0,r=(n=s.d.length)<(a=e.d.length)?n:a;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return n===a?0:n>a^s.s<0?1:-1},x.decimalPlaces=x.dp=function(){var e=this,t=e.d.length-1,r=7*(t-e.e);if(t=e.d[t])for(;t%10==0;t/=10)r--;return r<0?0:r},x.dividedBy=x.div=function(e){return j(this,new this.constructor(e))},x.dividedToIntegerBy=x.idiv=function(e){var t=this.constructor;return C(j(this,new t(e),0,1),t.precision)},x.equals=x.eq=function(e){return!this.cmp(e)},x.exponent=function(){return N(this)},x.greaterThan=x.gt=function(e){return this.cmp(e)>0},x.greaterThanOrEqualTo=x.gte=function(e){return this.cmp(e)>=0},x.isInteger=x.isint=function(){return this.e>this.d.length-2},x.isNegative=x.isneg=function(){return this.s<0},x.isPositive=x.ispos=function(){return this.s>0},x.isZero=function(){return 0===this.s},x.lessThan=x.lt=function(e){return this.cmp(e)<0},x.lessThanOrEqualTo=x.lte=function(e){return this.cmp(e)<1},x.logarithm=x.log=function(e){var t,r=this,n=r.constructor,s=n.precision,i=s+5;if(void 0===e)e=new n(10);else if((e=new n(e)).s<1||e.eq(a))throw Error(l+"NaN");if(r.s<1)throw Error(l+(r.s?"NaN":"-Infinity"));return r.eq(a)?new n(0):(o=!1,t=j(S(r,i),S(e,i),i),o=!0,C(t,s))},x.minus=x.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?E(t,e):y(t,(e.s=-e.s,e))},x.modulo=x.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(!(e=new n(e)).s)throw Error(l+"NaN");return r.s?(o=!1,t=j(r,e,0,1).times(e),o=!0,r.minus(t)):C(new n(r),a)},x.naturalExponential=x.exp=function(){return w(this)},x.naturalLogarithm=x.ln=function(){return S(this)},x.negated=x.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},x.plus=x.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?y(t,e):E(t,(e.s=-e.s,e))},x.precision=x.sd=function(e){var t,r,n,a=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(c+e);if(t=N(a)+1,r=7*(n=a.d.length-1)+1,n=a.d[n]){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r},x.squareRoot=x.sqrt=function(){var e,t,r,n,a,s,i,c=this,d=c.constructor;if(c.s<1){if(!c.s)return new d(0);throw Error(l+"NaN")}for(e=N(c),o=!1,0==(a=Math.sqrt(+c))||a==1/0?(((t=b(c.d)).length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=u((e+1)/2)-(e<0||e%2),n=new d(t=a==1/0?"5e"+e:(t=a.toExponential()).slice(0,t.indexOf("e")+1)+e)):n=new d(a.toString()),a=i=(r=d.precision)+3;;)if(n=(s=n).plus(j(c,s,i+2)).times(.5),b(s.d).slice(0,i)===(t=b(n.d)).slice(0,i)){if(t=t.slice(i-3,i+1),a==i&&"4999"==t){if(C(s,r+1,0),s.times(s).eq(c)){n=s;break}}else if("9999"!=t)break;i+=4}return o=!0,C(n,r)},x.times=x.mul=function(e){var t,r,n,a,s,i,l,c,d,u=this,h=u.constructor,m=u.d,f=(e=new h(e)).d;if(!u.s||!e.s)return new h(0);for(e.s*=u.s,r=u.e+e.e,(c=m.length)<(d=f.length)&&(s=m,m=f,f=s,i=c,c=d,d=i),s=[],n=i=c+d;n--;)s.push(0);for(n=d;--n>=0;){for(t=0,a=c+n;a>n;)l=s[a]+f[n]*m[a-n-1]+t,s[a--]=l%p|0,t=l/p|0;s[a]=(s[a]+t)%p|0}for(;!s[--i];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,o?C(e,h.precision):e},x.toDecimalPlaces=x.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),void 0===e?r:(v(e,0,s),void 0===t?t=n.rounding:v(t,0,8),C(r,e+N(r)+1,t))},x.toExponential=function(e,t){var r,n=this,a=n.constructor;return void 0===e?r=T(n,!0):(v(e,0,s),void 0===t?t=a.rounding:v(t,0,8),r=T(n=C(new a(n),e+1,t),!0,e+1)),r},x.toFixed=function(e,t){var r,n,a=this,i=a.constructor;return void 0===e?T(a):(v(e,0,s),void 0===t?t=i.rounding:v(t,0,8),r=T((n=C(new i(a),e+N(a)+1,t)).abs(),!1,e+N(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)},x.toInteger=x.toint=function(){var e=this,t=e.constructor;return C(new t(e),N(e)+1,t.rounding)},x.toNumber=function(){return+this},x.toPower=x.pow=function(e){var t,r,n,s,i,c,d=this,h=d.constructor,m=+(e=new h(e));if(!e.s)return new h(a);if(!(d=new h(d)).s){if(e.s<1)throw Error(l+"Infinity");return d}if(d.eq(a))return d;if(n=h.precision,e.eq(a))return C(d,n);if(c=(t=e.e)>=(r=e.d.length-1),i=d.s,c){if((r=m<0?-m:m)<=f){for(s=new h(a),t=Math.ceil(n/7+4),o=!1;r%2&&P((s=s.times(d)).d,t),0!==(r=u(r/2));)P((d=d.times(d)).d,t);return o=!0,e.s<0?new h(a).div(s):C(s,n)}}else if(i<0)throw Error(l+"NaN");return i=i<0&&1&e.d[Math.max(t,r)]?-1:1,d.s=1,o=!1,s=e.times(S(d,n+12)),o=!0,(s=w(s)).s=i,s},x.toPrecision=function(e,t){var r,n,a=this,i=a.constructor;return void 0===e?n=T(a,(r=N(a))<=i.toExpNeg||r>=i.toExpPos):(v(e,1,s),void 0===t?t=i.rounding:v(t,0,8),n=T(a=C(new i(a),e,t),e<=(r=N(a))||r<=i.toExpNeg,e)),n},x.toSignificantDigits=x.tosd=function(e,t){var r=this.constructor;return void 0===e?(e=r.precision,t=r.rounding):(v(e,1,s),void 0===t?t=r.rounding:v(t,0,8)),C(new r(this),e,t)},x.toString=x.valueOf=x.val=x.toJSON=function(){var e=this,t=N(e),r=e.constructor;return T(e,t<=r.toExpNeg||t>=r.toExpPos)};var j=function(){function e(e,t){var r,n=0,a=e.length;for(e=e.slice();a--;)r=e[a]*t+n,e[a]=r%p|0,n=r/p|0;return n&&e.unshift(n),e}function t(e,t,r,n){var a,s;if(r!=n)s=r>n?1:-1;else for(a=s=0;a<r;a++)if(e[a]!=t[a]){s=e[a]>t[a]?1:-1;break}return s}function r(e,t,r){for(var n=0;r--;)e[r]-=n,n=e[r]<t[r]?1:0,e[r]=n*p+e[r]-t[r];for(;!e[0]&&e.length>1;)e.shift()}return function(n,a,s,i){var o,c,d,u,h,m,f,g,x,y,v,b,j,w,_,k,S,A,E=n.constructor,T=n.s==a.s?1:-1,P=n.d,O=a.d;if(!n.s)return new E(n);if(!a.s)throw Error(l+"Division by zero");for(c=n.e-a.e,S=O.length,_=P.length,g=(f=new E(T)).d=[],d=0;O[d]==(P[d]||0);)++d;if(O[d]>(P[d]||0)&&--c,(b=null==s?s=E.precision:i?s+(N(n)-N(a))+1:s)<0)return new E(0);if(b=b/7+2|0,d=0,1==S)for(u=0,O=O[0],b++;(d<_||u)&&b--;d++)j=u*p+(P[d]||0),g[d]=j/O|0,u=j%O|0;else{for((u=p/(O[0]+1)|0)>1&&(O=e(O,u),P=e(P,u),S=O.length,_=P.length),w=S,y=(x=P.slice(0,S)).length;y<S;)x[y++]=0;(A=O.slice()).unshift(0),k=O[0],O[1]>=p/2&&++k;do{u=0,(o=t(O,x,S,y))<0?(v=x[0],S!=y&&(v=v*p+(x[1]||0)),(u=v/k|0)>1?(u>=p&&(u=p-1),1==(o=t(h=e(O,u),x,m=h.length,y=x.length))&&(u--,r(h,S<m?A:O,m))):(0==u&&(o=u=1),h=O.slice()),(m=h.length)<y&&h.unshift(0),r(x,h,y),-1==o&&(o=t(O,x,S,y=x.length))<1&&(u++,r(x,S<y?A:O,y)),y=x.length):0===o&&(u++,x=[0]),g[d++]=u,o&&x[0]?x[y++]=P[w]||0:(x=[P[w]],y=1)}while((w++<_||void 0!==x[0])&&b--)}return g[0]||g.shift(),f.e=c,C(f,i?s+N(f)+1:s)}}();function w(e,t){var r,n,s,i,l,c=0,u=0,m=e.constructor,p=m.precision;if(N(e)>16)throw Error(d+N(e));if(!e.s)return new m(a);for(null==t?(o=!1,l=p):l=t,i=new m(.03125);e.abs().gte(.1);)e=e.times(i),u+=5;for(l+=Math.log(h(2,u))/Math.LN10*2+5|0,r=n=s=new m(a),m.precision=l;;){if(n=C(n.times(e),l),r=r.times(++c),b((i=s.plus(j(n,r,l))).d).slice(0,l)===b(s.d).slice(0,l)){for(;u--;)s=C(s.times(s),l);return m.precision=p,null==t?(o=!0,C(s,p)):s}s=i}}function N(e){for(var t=7*e.e,r=e.d[0];r>=10;r/=10)t++;return t}function _(e,t,r){if(t>e.LN10.sd())throw o=!0,r&&(e.precision=r),Error(l+"LN10 precision limit exceeded");return C(new e(e.LN10),t)}function k(e){for(var t="";e--;)t+="0";return t}function S(e,t){var r,n,s,i,c,d,u,h,m,p=1,f=e,g=f.d,x=f.constructor,y=x.precision;if(f.s<1)throw Error(l+(f.s?"NaN":"-Infinity"));if(f.eq(a))return new x(0);if(null==t?(o=!1,h=y):h=t,f.eq(10))return null==t&&(o=!0),_(x,h);if(h+=10,x.precision=h,n=(r=b(g)).charAt(0),i=N(f),!(Math.abs(i)<15e14))return u=_(x,h+2,y).times(i+""),f=S(new x(n+"."+r.slice(1)),h-10).plus(u),x.precision=y,null==t?(o=!0,C(f,y)):f;for(;n<7&&1!=n||1==n&&r.charAt(1)>3;)n=(r=b((f=f.times(e)).d)).charAt(0),p++;for(i=N(f),n>1?(f=new x("0."+r),i++):f=new x(n+"."+r.slice(1)),d=c=f=j(f.minus(a),f.plus(a),h),m=C(f.times(f),h),s=3;;){if(c=C(c.times(m),h),b((u=d.plus(j(c,new x(s),h))).d).slice(0,h)===b(d.d).slice(0,h))return d=d.times(2),0!==i&&(d=d.plus(_(x,h+2,y).times(i+""))),d=j(d,new x(p),h),x.precision=y,null==t?(o=!0,C(d,y)):d;d=u,s+=2}}function A(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;48===t.charCodeAt(n);)++n;for(a=t.length;48===t.charCodeAt(a-1);)--a;if(t=t.slice(n,a)){if(a-=n,r=r-n-1,e.e=u(r/7),e.d=[],n=(r+1)%7,r<0&&(n+=7),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=7;n<a;)e.d.push(+t.slice(n,n+=7));n=7-(t=t.slice(n)).length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),o&&(e.e>g||e.e<-g))throw Error(d+r)}else e.s=0,e.e=0,e.d=[0];return e}function C(e,t,r){var n,a,s,i,l,c,m,f,x=e.d;for(i=1,s=x[0];s>=10;s/=10)i++;if((n=t-i)<0)n+=7,a=t,m=x[f=0];else{if((f=Math.ceil((n+1)/7))>=(s=x.length))return e;for(m=s=x[f],i=1;s>=10;s/=10)i++;a=(n%=7)-7+i}if(void 0!==r&&(l=m/(s=h(10,i-a-1))%10|0,c=t<0||void 0!==x[f+1]||m%s,c=r<4?(l||c)&&(0==r||r==(e.s<0?3:2)):l>5||5==l&&(4==r||c||6==r&&(n>0?a>0?m/h(10,i-a):0:x[f-1])%10&1||r==(e.s<0?8:7))),t<1||!x[0])return c?(s=N(e),x.length=1,t=t-s-1,x[0]=h(10,(7-t%7)%7),e.e=u(-t/7)||0):(x.length=1,x[0]=e.e=e.s=0),e;if(0==n?(x.length=f,s=1,f--):(x.length=f+1,s=h(10,7-n),x[f]=a>0?(m/h(10,i-a)%h(10,a)|0)*s:0),c)for(;;){if(0==f){(x[0]+=s)==p&&(x[0]=1,++e.e);break}if(x[f]+=s,x[f]!=p)break;x[f--]=0,s=1}for(n=x.length;0===x[--n];)x.pop();if(o&&(e.e>g||e.e<-g))throw Error(d+N(e));return e}function E(e,t){var r,n,a,s,i,l,c,d,u,h,m=e.constructor,f=m.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new m(e),o?C(t,f):t;if(c=e.d,h=t.d,n=t.e,d=e.e,c=c.slice(),i=d-n){for((u=i<0)?(r=c,i=-i,l=h.length):(r=h,n=d,l=c.length),i>(a=Math.max(Math.ceil(f/7),l)+2)&&(i=a,r.length=1),r.reverse(),a=i;a--;)r.push(0);r.reverse()}else{for((u=(a=c.length)<(l=h.length))&&(l=a),a=0;a<l;a++)if(c[a]!=h[a]){u=c[a]<h[a];break}i=0}for(u&&(r=c,c=h,h=r,t.s=-t.s),l=c.length,a=h.length-l;a>0;--a)c[l++]=0;for(a=h.length;a>i;){if(c[--a]<h[a]){for(s=a;s&&0===c[--s];)c[s]=p-1;--c[s],c[a]+=p}c[a]-=h[a]}for(;0===c[--l];)c.pop();for(;0===c[0];c.shift())--n;return c[0]?(t.d=c,t.e=n,o?C(t,f):t):new m(0)}function T(e,t,r){var n,a=N(e),s=b(e.d),i=s.length;return t?(r&&(n=r-i)>0?s=s.charAt(0)+"."+s.slice(1)+k(n):i>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+k(-a-1)+s,r&&(n=r-i)>0&&(s+=k(n))):a>=i?(s+=k(a+1-i),r&&(n=r-a-1)>0&&(s=s+"."+k(n))):((n=a+1)<i&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-i)>0&&(a+1===i&&(s+="."),s+=k(n))),e.s<0?"-"+s:s}function P(e,t){if(e.length>t)return e.length=t,!0}function O(e){if(!e||"object"!==typeof e)throw Error(l+"Object expected");var t,r,n,a=["precision",1,s,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if(void 0!==(n=e[r=a[t]])){if(!(u(n)===n&&n>=a[t+1]&&n<=a[t+2]))throw Error(c+r+": "+n);this[r]=n}if(void 0!==(n=e[r="LN10"])){if(n!=Math.LN10)throw Error(c+r+": "+n);this[r]=new this(n)}return this}i=function e(t){var r,n,a;function s(e){var t=this;if(!(t instanceof s))return new s(e);if(t.constructor=s,e instanceof s)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"===typeof e){if(0*e!==0)throw Error(c+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):A(t,e.toString())}if("string"!==typeof e)throw Error(c+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!m.test(e))throw Error(c+e);A(t,e)}if(s.prototype=x,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=e,s.config=s.set=O,void 0===t&&(t={}),t)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],r=0;r<a.length;)t.hasOwnProperty(n=a[r++])||(t[n]=this[n]);return s.config(t),s}(i),i.default=i.Decimal=i,a=new i(1),void 0===(n=function(){return i}.call(t,r,t,e))||(e.exports=n)}()},8268:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(2132);t.isMatch=function(e,t){return n.isMatchWith(e,t,()=>{})}},8346:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.toArray=function(e){return Array.isArray(e)?e:Array.from(e)}},8365:(e,t,r)=>{"use strict";var n=r(5043);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=n.useSyncExternalStore,i=n.useRef,o=n.useEffect,l=n.useMemo,c=n.useDebugValue},8396:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(5508);t.cloneDeep=function(e){return n.cloneDeepWith(e)}},8420:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isLength=function(e){return Number.isSafeInteger(e)&&e>=0}},8443:(e,t,r)=>{"use strict";e.exports=r(9717)},8845:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(8268),a=r(3272),s=r(8396),i=r(9323),o=r(5303);t.matchesProperty=function(e,t){switch(typeof e){case"object":var r;Object.is(null===(r=e)||void 0===r?void 0:r.valueOf(),-0)&&(e="-0");break;case"number":e=a.toKey(e)}return t=s.cloneDeep(t),function(r){const a=i.get(r,e);return void 0===a?o.has(r,e):void 0===t?void 0===a:n.isMatch(a,t)}}},8853:(e,t,r)=>{"use strict";e.exports=r(7234)},9045:(e,t,r)=>{var n=r(3738).default;e.exports=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=n(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},9323:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(7260),a=r(2489),s=r(3272),i=r(1444);t.get=function e(t,r,o){if(null==t)return o;switch(typeof r){case"string":{if(n.isUnsafeProperty(r))return o;const s=t[r];return void 0===s?a.isDeepKey(r)?e(t,i.toPath(r),o):o:s}case"number":case"symbol":{"number"===typeof r&&(r=s.toKey(r));const e=t[r];return void 0===e?o:e}default:{var l;if(Array.isArray(r))return function(e,t,r){if(0===t.length)return r;let a=e;for(let s=0;s<t.length;s++){if(null==a)return r;if(n.isUnsafeProperty(t[s]))return r;a=a[t[s]]}if(void 0===a)return r;return a}(t,r,o);if(r=Object.is(null===(l=r)||void 0===l?void 0:l.valueOf(),-0)?"-0":String(r),n.isUnsafeProperty(r))return o;const e=t[r];return void 0===e?o:e}}}},9397:(e,t,r)=>{e.exports=r(2682).isPlainObject},9461:(e,t,r)=>{"use strict";e.exports=r(2330)},9599:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.identity=function(e){return e}},9645:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(6392),a=r(8346),s=r(1203);t.last=function(e){if(s.isArrayLike(e))return n.last(a.toArray(e))}},9709:(e,t)=>{"use strict";function r(e){return"symbol"===typeof e?1:null===e?2:void 0===e?3:e!==e?4:0}Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});t.compareValues=(e,t,n)=>{if(e!==t){const a=r(e),s=r(t);if(a===s&&0===a){if(e<t)return"desc"===n?1:-1;if(e>t)return"desc"===n?-1:1}return"desc"===n?s-a:a-s}return 0}},9717:(e,t,r)=>{"use strict";var n=r(5043),a=r(9461);var s="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},i=a.useSyncExternalStore,o=n.useRef,l=n.useEffect,c=n.useMemo,d=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var u=o(null);if(null===u.current){var h={hasValue:!1,value:null};u.current=h}else h=u.current;u=c(function(){function e(e){if(!l){if(l=!0,i=e,e=n(e),void 0!==a&&h.hasValue){var t=h.value;if(a(t,e))return o=t}return o=e}if(t=o,s(i,e))return t;var r=n(e);return void 0!==a&&a(t,r)?(i=e,t):(i=e,o=r)}var i,o,l=!1,c=void 0===r?null:r;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,r,n,a]);var m=i(e,u[0],u[1]);return l(function(){h.hasValue=!0,h.value=m},[m]),d(m),m}},9859:(e,t,r)=>{e.exports=r(7231).range},9921:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isObjectLike=function(e){return"object"===typeof e&&null!==e}},9972:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.eq=function(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,r),s.exports}r.m=e,r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(n,a){if(1&a&&(n=this(n)),8&a)return n;if("object"===typeof n&&n){if(4&a&&n.__esModule)return n;if(16&a&&"function"===typeof n.then)return n}var s=Object.create(null);r.r(s);var i={};e=e||[null,t({}),t([]),t(t)];for(var o=2&a&&n;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>i[e]=()=>n[e]);return i.default=()=>n,r.d(s,i),s}})(),r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce((t,n)=>(r.f[n](e,t),t),[])),r.u=e=>"static/js/"+e+"."+{213:"b8d4b5a9",239:"3742c463",455:"929e50be"}[e]+".chunk.js",r.miniCssF=e=>{},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="orchid-resort-dashboard:";r.l=(n,a,s,i)=>{if(e[n])e[n].push(a);else{var o,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==n||u.getAttribute("data-webpack")==t+s){o=u;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",r.nc&&o.setAttribute("nonce",r.nc),o.setAttribute("data-webpack",t+s),o.src=n),e[n]=[a];var h=(t,r)=>{o.onerror=o.onload=null,clearTimeout(m);var a=e[n];if(delete e[n],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach(e=>e(r)),t)return t(r)},m=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="/",(()=>{var e={792:0};r.f.j=(t,n)=>{var a=r.o(e,t)?e[t]:void 0;if(0!==a)if(a)n.push(a[2]);else{var s=new Promise((r,n)=>a=e[t]=[r,n]);n.push(a[2]=s);var i=r.p+r.u(t),o=new Error;r.l(i,n=>{if(r.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var s=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+i+")",o.name="ChunkLoadError",o.type=s,o.request=i,a[1](o)}},"chunk-"+t,t)}};var t=(t,n)=>{var a,s,[i,o,l]=n,c=0;if(i.some(t=>0!==e[t])){for(a in o)r.o(o,a)&&(r.m[a]=o[a]);if(l)l(r)}for(t&&t(n);c<i.length;c++)s=i[c],r.o(e,s)&&e[s]&&e[s][0](),e[s]=0},n=self.webpackChunkorchid_resort_dashboard=self.webpackChunkorchid_resort_dashboard||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),(()=>{"use strict";var e={};r.r(e),r.d(e,{hasBrowserEnv:()=>dn,hasStandardBrowserEnv:()=>hn,hasStandardBrowserWebWorkerEnv:()=>mn,navigator:()=>un,origin:()=>pn});var t={};r.r(t),r.d(t,{scaleBand:()=>Mv,scaleDiverging:()=>T_,scaleDivergingLog:()=>P_,scaleDivergingPow:()=>D_,scaleDivergingSqrt:()=>I_,scaleDivergingSymlog:()=>O_,scaleIdentity:()=>_j,scaleImplicit:()=>Iv,scaleLinear:()=>Nj,scaleLog:()=>Dj,scaleOrdinal:()=>Lv,scalePoint:()=>Fv,scalePow:()=>qj,scaleQuantile:()=>ew,scaleQuantize:()=>tw,scaleRadial:()=>Hj,scaleSequential:()=>N_,scaleSequentialLog:()=>__,scaleSequentialPow:()=>S_,scaleSequentialQuantile:()=>C_,scaleSequentialSqrt:()=>A_,scaleSequentialSymlog:()=>k_,scaleSqrt:()=>Wj,scaleSymlog:()=>Rj,scaleThreshold:()=>rw,scaleTime:()=>v_,scaleUtc:()=>b_,tickFormat:()=>jj});var n,a=r(5043),s=r.t(a,2),i=r(4391),o=r(7950),l=r.t(o,2);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(n||(n={}));const d="popstate";function u(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function h(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(ze){}}}function m(e,t){return{usr:e.state,key:e.key,idx:t}}function p(e,t,r,n){return void 0===r&&(r=null),c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?g(t):t,{state:r,key:t&&t.key||n||Math.random().toString(36).substr(2,8)})}function f(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&"?"!==r&&(t+="?"===r.charAt(0)?r:"?"+r),n&&"#"!==n&&(t+="#"===n.charAt(0)?n:"#"+n),t}function g(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function x(e,t,r,a){void 0===a&&(a={});let{window:s=document.defaultView,v5Compat:i=!1}=a,o=s.history,l=n.Pop,h=null,g=x();function x(){return(o.state||{idx:null}).idx}function y(){l=n.Pop;let e=x(),t=null==e?null:e-g;g=e,h&&h({action:l,location:b.location,delta:t})}function v(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,r="string"===typeof e?e:f(e);return r=r.replace(/ $/,"%20"),u(t,"No window.location.(origin|href) available to create URL for href: "+r),new URL(r,t)}null==g&&(g=0,o.replaceState(c({},o.state,{idx:g}),""));let b={get action(){return l},get location(){return e(s,o)},listen(e){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(d,y),h=e,()=>{s.removeEventListener(d,y),h=null}},createHref:e=>t(s,e),createURL:v,encodeLocation(e){let t=v(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=n.Push;let a=p(b.location,e,t);r&&r(a,e),g=x()+1;let c=m(a,g),d=b.createHref(a);try{o.pushState(c,"",d)}catch(u){if(u instanceof DOMException&&"DataCloneError"===u.name)throw u;s.location.assign(d)}i&&h&&h({action:l,location:b.location,delta:1})},replace:function(e,t){l=n.Replace;let a=p(b.location,e,t);r&&r(a,e),g=x();let s=m(a,g),c=b.createHref(a);o.replaceState(s,"",c),i&&h&&h({action:l,location:b.location,delta:0})},go:e=>o.go(e)};return b}var y;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(y||(y={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function v(e,t,r){return void 0===r&&(r="/"),b(e,t,r,!1)}function b(e,t,r,n){let a=I(("string"===typeof t?g(t):t).pathname||"/",r);if(null==a)return null;let s=j(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every((e,r)=>e===t[r]);return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let i=null;for(let o=0;null==i&&o<s.length;++o){let e=D(a);i=P(s[o],e,n)}return i}function j(e,t,r,n){void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===n&&(n="");let a=(e,a,s)=>{let i={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};i.relativePath.startsWith("/")&&(u(i.relativePath.startsWith(n),'Absolute route path "'+i.relativePath+'" nested under path "'+n+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(n.length));let o=q([n,i.relativePath]),l=r.concat(i);e.children&&e.children.length>0&&(u(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),j(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:T(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var r;if(""!==e.path&&null!=(r=e.path)&&r.includes("?"))for(let n of w(e.path))a(e,t,n);else a(e,t)}),t}function w(e){let t=e.split("/");if(0===t.length)return[];let[r,...n]=t,a=r.endsWith("?"),s=r.replace(/\?$/,"");if(0===n.length)return a?[s,""]:[s];let i=w(n.join("/")),o=[];return o.push(...i.map(e=>""===e?s:[s,e].join("/"))),a&&o.push(...i),o.map(t=>e.startsWith("/")&&""===t?"/":t)}const N=/^:[\w-]+$/,_=3,k=2,S=1,A=10,C=-2,E=e=>"*"===e;function T(e,t){let r=e.split("/"),n=r.length;return r.some(E)&&(n+=C),t&&(n+=k),r.filter(e=>!E(e)).reduce((e,t)=>e+(N.test(t)?_:""===t?S:A),n)}function P(e,t,r){void 0===r&&(r=!1);let{routesMeta:n}=e,a={},s="/",i=[];for(let o=0;o<n.length;++o){let e=n[o],l=o===n.length-1,c="/"===s?t:t.slice(s.length)||"/",d=O({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&r&&!n[n.length-1].route.index&&(d=O({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(a,d.params),i.push({params:a,pathname:q([s,d.pathname]),pathnameBase:W(q([s,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(s=q([s,d.pathnameBase]))}return i}function O(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=function(e,t,r){void 0===t&&(t=!1);void 0===r&&(r=!0);h("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,r)=>(n.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(n.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))");let s=new RegExp(a,t?void 0:"i");return[s,n]}(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let s=a[0],i=s.replace(/(.)\/+$/,"$1"),o=a.slice(1),l=n.reduce((e,t,r)=>{let{paramName:n,isOptional:a}=t;if("*"===n){let e=o[r]||"";i=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[r];return e[n]=a&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:l,pathname:s,pathnameBase:i,pattern:e}}function D(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return h(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function I(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&"/"!==n?null:e.slice(r)||"/"}const L=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function M(e,t){void 0===t&&(t="/");let r,{pathname:n,search:a="",hash:s=""}="string"===typeof e?g(e):e;if(n)if(i=n,L.test(i))r=n;else{if(n.includes("//")){let e=n;n=n.replace(/\/\/+/g,"/"),h(!1,"Pathnames cannot have embedded double slashes - normalizing "+e+" -> "+n)}r=n.startsWith("/")?R(n.substring(1),"/"):R(n,t)}else r=t;var i;return{pathname:r,search:V(a),hash:H(s)}}function R(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)}),r.length>1?r.join("/"):"/"}function F(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the `to."+r+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function B(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function z(e,t){let r=B(e);return t?r.map((e,t)=>t===r.length-1?e.pathname:e.pathnameBase):r.map(e=>e.pathnameBase)}function U(e,t,r,n){let a;void 0===n&&(n=!1),"string"===typeof e?a=g(e):(a=c({},e),u(!a.pathname||!a.pathname.includes("?"),F("?","pathname","search",a)),u(!a.pathname||!a.pathname.includes("#"),F("#","pathname","hash",a)),u(!a.search||!a.search.includes("#"),F("#","search","hash",a)));let s,i=""===e||""===a.pathname,o=i?"/":a.pathname;if(null==o)s=r;else{let e=t.length-1;if(!n&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=M(a,s),d=o&&"/"!==o&&o.endsWith("/"),h=(i||"."===o)&&r.endsWith("/");return l.pathname.endsWith("/")||!d&&!h||(l.pathname+="/"),l}const q=e=>e.join("/").replace(/\/\/+/g,"/"),W=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),V=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",H=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function G(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const K=["post","put","patch","delete"],Y=(new Set(K),["get",...K]);new Set(Y),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function X(){return X=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},X.apply(this,arguments)}const Q=a.createContext(null);const J=a.createContext(null);const Z=a.createContext(null);const ee=a.createContext(null);const te=a.createContext({outlet:null,matches:[],isDataRoute:!1});const re=a.createContext(null);function ne(){return null!=a.useContext(ee)}function ae(){return ne()||u(!1),a.useContext(ee).location}function se(e){a.useContext(Z).static||a.useLayoutEffect(e)}function ie(){let{isDataRoute:e}=a.useContext(te);return e?function(){let{router:e}=ge(pe.UseNavigateStable),t=ye(fe.UseNavigateStable),r=a.useRef(!1);se(()=>{r.current=!0});let n=a.useCallback(function(n,a){void 0===a&&(a={}),r.current&&("number"===typeof n?e.navigate(n):e.navigate(n,X({fromRouteId:t},a)))},[e,t]);return n}():function(){ne()||u(!1);let e=a.useContext(Q),{basename:t,future:r,navigator:n}=a.useContext(Z),{matches:s}=a.useContext(te),{pathname:i}=ae(),o=JSON.stringify(z(s,r.v7_relativeSplatPath)),l=a.useRef(!1);se(()=>{l.current=!0});let c=a.useCallback(function(r,a){if(void 0===a&&(a={}),!l.current)return;if("number"===typeof r)return void n.go(r);let s=U(r,JSON.parse(o),i,"path"===a.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:q([t,s.pathname])),(a.replace?n.replace:n.push)(s,a.state,a)},[t,n,o,i,e]);return c}()}function oe(e,t){let{relative:r}=void 0===t?{}:t,{future:n}=a.useContext(Z),{matches:s}=a.useContext(te),{pathname:i}=ae(),o=JSON.stringify(z(s,n.v7_relativeSplatPath));return a.useMemo(()=>U(e,JSON.parse(o),i,"path"===r),[e,o,i,r])}function le(e,t,r,s){ne()||u(!1);let{navigator:i}=a.useContext(Z),{matches:o}=a.useContext(te),l=o[o.length-1],c=l?l.params:{},d=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,m=ae();if(t){var p;let e="string"===typeof t?g(t):t;"/"===d||(null==(p=e.pathname)?void 0:p.startsWith(d))||u(!1),h=e}else h=m;let f=h.pathname||"/",x=f;if("/"!==d){let e=d.replace(/^\//,"").split("/");x="/"+f.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=v(e,{pathname:x});let b=me(y&&y.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:q([d,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:q([d,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),o,r,s);return t&&b?a.createElement(ee.Provider,{value:{location:X({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:n.Pop}},b):b}function ce(){let e=function(){var e;let t=a.useContext(re),r=xe(fe.UseRouteError),n=ye(fe.UseRouteError);if(void 0!==t)return t;return null==(e=r.errors)?void 0:e[n]}(),t=G(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n};return a.createElement(a.Fragment,null,a.createElement("h2",null,"Unexpected Application Error!"),a.createElement("h3",{style:{fontStyle:"italic"}},t),r?a.createElement("pre",{style:s},r):null,null)}const de=a.createElement(ce,null);class ue extends a.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?a.createElement(te.Provider,{value:this.props.routeContext},a.createElement(re.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function he(e){let{routeContext:t,match:r,children:n}=e,s=a.useContext(Q);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),a.createElement(te.Provider,{value:t},n)}function me(e,t,r,n){var s;if(void 0===t&&(t=[]),void 0===r&&(r=null),void 0===n&&(n=null),null==e){var i;if(!r)return null;if(r.errors)e=r.matches;else{if(!(null!=(i=n)&&i.v7_partialHydration&&0===t.length&&!r.initialized&&r.matches.length>0))return null;e=r.matches}}let o=e,l=null==(s=r)?void 0:s.errors;if(null!=l){let e=o.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||u(!1),o=o.slice(0,Math.min(o.length,e+1))}let c=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let a=0;a<o.length;a++){let e=o[a];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=a),e.route.id){let{loaderData:t,errors:n}=r,a=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||a){c=!0,o=d>=0?o.slice(0,d+1):[o[0]];break}}}return o.reduceRight((e,n,s)=>{let i,u=!1,h=null,m=null;var p;r&&(i=l&&n.route.id?l[n.route.id]:void 0,h=n.route.errorElement||de,c&&(d<0&&0===s?(p="route-fallback",!1||ve[p]||(ve[p]=!0),u=!0,m=null):d===s&&(u=!0,m=n.route.hydrateFallbackElement||null)));let f=t.concat(o.slice(0,s+1)),g=()=>{let t;return t=i?h:u?m:n.route.Component?a.createElement(n.route.Component,null):n.route.element?n.route.element:e,a.createElement(he,{match:n,routeContext:{outlet:e,matches:f,isDataRoute:null!=r},children:t})};return r&&(n.route.ErrorBoundary||n.route.errorElement||0===s)?a.createElement(ue,{location:r.location,revalidation:r.revalidation,component:h,error:i,children:g(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):g()},null)}var pe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(pe||{}),fe=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(fe||{});function ge(e){let t=a.useContext(Q);return t||u(!1),t}function xe(e){let t=a.useContext(J);return t||u(!1),t}function ye(e){let t=function(){let e=a.useContext(te);return e||u(!1),e}(),r=t.matches[t.matches.length-1];return r.route.id||u(!1),r.route.id}const ve={};function be(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}s.startTransition;function je(e){let{to:t,replace:r,state:n,relative:s}=e;ne()||u(!1);let{future:i,static:o}=a.useContext(Z),{matches:l}=a.useContext(te),{pathname:c}=ae(),d=ie(),h=U(t,z(l,i.v7_relativeSplatPath),c,"path"===s),m=JSON.stringify(h);return a.useEffect(()=>d(JSON.parse(m),{replace:r,state:n,relative:s}),[d,m,s,r,n]),null}function we(e){u(!1)}function Ne(e){let{basename:t="/",children:r=null,location:s,navigationType:i=n.Pop,navigator:o,static:l=!1,future:c}=e;ne()&&u(!1);let d=t.replace(/^\/*/,"/"),h=a.useMemo(()=>({basename:d,navigator:o,static:l,future:X({v7_relativeSplatPath:!1},c)}),[d,c,o,l]);"string"===typeof s&&(s=g(s));let{pathname:m="/",search:p="",hash:f="",state:x=null,key:y="default"}=s,v=a.useMemo(()=>{let e=I(m,d);return null==e?null:{location:{pathname:e,search:p,hash:f,state:x,key:y},navigationType:i}},[d,m,p,f,x,y,i]);return null==v?null:a.createElement(Z.Provider,{value:h},a.createElement(ee.Provider,{children:r,value:v}))}function _e(e){let{children:t,location:r}=e;return le(ke(t),r)}new Promise(()=>{});a.Component;function ke(e,t){void 0===t&&(t=[]);let r=[];return a.Children.forEach(e,(e,n)=>{if(!a.isValidElement(e))return;let s=[...t,n];if(e.type===a.Fragment)return void r.push.apply(r,ke(e.props.children,s));e.type!==we&&u(!1),e.props.index&&e.props.children&&u(!1);let i={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=ke(e.props.children,s)),r.push(i)}),r}function Se(){return Se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Se.apply(this,arguments)}function Ae(e,t){if(null==e)return{};var r,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Ce=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(ze){}new Map;const Ee=s.startTransition;l.flushSync,s.useId;function Te(e){let{basename:t,children:r,future:n,window:s}=e,i=a.useRef();var o;null==i.current&&(i.current=(void 0===(o={window:s,v5Compat:!0})&&(o={}),x(function(e,t){let{pathname:r,search:n,hash:a}=e.location;return p("",{pathname:r,search:n,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:f(t)},null,o)));let l=i.current,[c,d]=a.useState({action:l.action,location:l.location}),{v7_startTransition:u}=n||{},h=a.useCallback(e=>{u&&Ee?Ee(()=>d(e)):d(e)},[d,u]);return a.useLayoutEffect(()=>l.listen(h),[l,h]),a.useEffect(()=>be(n),[n]),a.createElement(Ne,{basename:t,children:r,location:c.location,navigationType:c.action,navigator:l,future:n})}const Pe="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Oe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,De=a.forwardRef(function(e,t){let r,{onClick:n,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:h,viewTransition:m}=e,p=Ae(e,Ce),{basename:g}=a.useContext(Z),x=!1;if("string"===typeof d&&Oe.test(d)&&(r=d,Pe))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),r=I(t.pathname,g);t.origin===e.origin&&null!=r?d=r+t.search+t.hash:x=!0}catch(ze){}let y=function(e,t){let{relative:r}=void 0===t?{}:t;ne()||u(!1);let{basename:n,navigator:s}=a.useContext(Z),{hash:i,pathname:o,search:l}=oe(e,{relative:r}),c=o;return"/"!==n&&(c="/"===o?n:q([n,o])),s.createHref({pathname:c,search:l,hash:i})}(d,{relative:s}),v=function(e,t){let{target:r,replace:n,state:s,preventScrollReset:i,relative:o,viewTransition:l}=void 0===t?{}:t,c=ie(),d=ae(),u=oe(e,{relative:o});return a.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();let r=void 0!==n?n:f(d)===f(u);c(e,{replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,u,n,s,r,e,i,o,l])}(d,{replace:o,state:l,target:c,preventScrollReset:h,relative:s,viewTransition:m});return a.createElement("a",Se({},p,{href:r||y,onClick:x||i?n:function(e){n&&n(e),e.defaultPrevented||v(e)},ref:t,target:c}))});var Ie,Le;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ie||(Ie={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Le||(Le={}));function Me(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Re=r(4980);function Fe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(r),!0).forEach(function(t){(0,Re.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fe(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let ze={data:""},Ue=e=>{if("object"==typeof window){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||ze},qe=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,We=/\/\*[^]*?\*\/|  +/g,Ve=/\n+/g,He=(e,t)=>{let r="",n="",a="";for(let s in e){let i=e[s];"@"==s[0]?"i"==s[1]?r=s+" "+i+";":n+="f"==s[1]?He(i,s):s+"{"+He(i,"k"==s[1]?"":t)+"}":"object"==typeof i?n+=He(i,t?t.replace(/([^,])+/g,e=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):s):null!=i&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=He.p?He.p(s,i):s+":"+i+";")}return r+(t&&a?t+"{"+a+"}":a)+n},Ge={},Ke=e=>{if("object"==typeof e){let t="";for(let r in e)t+=r+Ke(e[r]);return t}return e},Ye=(e,t,r,n,a)=>{let s=Ke(e),i=Ge[s]||(Ge[s]=(e=>{let t=0,r=11;for(;t<e.length;)r=101*r+e.charCodeAt(t++)>>>0;return"go"+r})(s));if(!Ge[i]){let t=s!==e?e:(e=>{let t,r,n=[{}];for(;t=qe.exec(e.replace(We,""));)t[4]?n.shift():t[3]?(r=t[3].replace(Ve," ").trim(),n.unshift(n[0][r]=n[0][r]||{})):n[0][t[1]]=t[2].replace(Ve," ").trim();return n[0]})(e);Ge[i]=He(a?{["@keyframes "+i]:t}:t,r?"":"."+i)}let o=r&&Ge.g?Ge.g:null;return r&&(Ge.g=Ge[i]),((e,t,r,n)=>{n?t.data=t.data.replace(n,e):-1===t.data.indexOf(e)&&(t.data=r?e+t.data:t.data+e)})(Ge[i],t,n,o),i};function Xe(e){let t=this||{},r=e.call?e(t.p):e;return Ye(r.unshift?r.raw?((e,t,r)=>e.reduce((e,n,a)=>{let s=t[a];if(s&&s.call){let e=s(r),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;s=t?"."+t:e&&"object"==typeof e?e.props?"":He(e,""):!1===e?"":e}return e+n+(null==s?"":s)},""))(r,[].slice.call(arguments,1),t.p):r.reduce((e,r)=>Object.assign(e,r&&r.call?r(t.p):r),{}):r,Ue(t.target),t.g,t.o,t.k)}Xe.bind({g:1});let Qe,$e,Je,Ze=Xe.bind({k:1});function et(e,t){let r=this||{};return function(){let n=arguments;function a(s,i){let o=Object.assign({},s),l=o.className||a.className;r.p=Object.assign({theme:$e&&$e()},o),r.o=/ *go\d+/.test(l),o.className=Xe.apply(r,n)+(l?" "+l:""),t&&(o.ref=i);let c=e;return e[0]&&(c=o.as||e,delete o.as),Je&&c[0]&&Je(o),Qe(c,o)}return t?t(a):a}}var tt,rt,nt,at,st,it,ot,lt,ct,dt,ut,ht,mt,pt,ft,gt,xt=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,yt=(()=>{let e=0;return()=>(++e).toString()})(),vt=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),bt="default",jt=(e,t)=>{let{toastLimit:r}=e.settings;switch(t.type){case 0:return Be(Be({},e),{},{toasts:[t.toast,...e.toasts].slice(0,r)});case 1:return Be(Be({},e),{},{toasts:e.toasts.map(e=>e.id===t.toast.id?Be(Be({},e),t.toast):e)});case 2:let{toast:n}=t;return jt(e,{type:e.toasts.find(e=>e.id===n.id)?1:0,toast:n});case 3:let{toastId:a}=t;return Be(Be({},e),{},{toasts:e.toasts.map(e=>e.id===a||void 0===a?Be(Be({},e),{},{dismissed:!0,visible:!1}):e)});case 4:return void 0===t.toastId?Be(Be({},e),{},{toasts:[]}):Be(Be({},e),{},{toasts:e.toasts.filter(e=>e.id!==t.toastId)});case 5:return Be(Be({},e),{},{pausedAt:t.time});case 6:let s=t.time-(e.pausedAt||0);return Be(Be({},e),{},{pausedAt:void 0,toasts:e.toasts.map(e=>Be(Be({},e),{},{pauseDuration:e.pauseDuration+s}))})}},wt=[],Nt={toasts:[],pausedAt:void 0,settings:{toastLimit:20}},_t={},kt=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bt;_t[t]=jt(_t[t]||Nt,e),wt.forEach(e=>{let[r,n]=e;r===t&&n(_t[t])})},St=e=>Object.keys(_t).forEach(t=>kt(e,t)),At=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt;return t=>{kt(t,e)}},Ct={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Et=e=>(t,r)=>{let n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",r=arguments.length>2?arguments[2]:void 0;return Be(Be({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0},r),{},{id:(null==r?void 0:r.id)||yt()})}(t,e,r);return At(n.toasterId||(e=>Object.keys(_t).find(t=>_t[t].toasts.some(t=>t.id===e)))(n.id))({type:2,toast:n}),n.id},Tt=(e,t)=>Et("blank")(e,t);Tt.error=Et("error"),Tt.success=Et("success"),Tt.loading=Et("loading"),Tt.custom=Et("custom"),Tt.dismiss=(e,t)=>{let r={type:3,toastId:e};t?At(t)(r):St(r)},Tt.dismissAll=e=>Tt.dismiss(void 0,e),Tt.remove=(e,t)=>{let r={type:4,toastId:e};t?At(t)(r):St(r)},Tt.removeAll=e=>Tt.remove(void 0,e),Tt.promise=(e,t,r)=>{let n=Tt.loading(t.loading,Be(Be({},r),null==r?void 0:r.loading));return"function"==typeof e&&(e=e()),e.then(e=>{let a=t.success?xt(t.success,e):void 0;return a?Tt.success(a,Be(Be({id:n},r),null==r?void 0:r.success)):Tt.dismiss(n),e}).catch(e=>{let a=t.error?xt(t.error,e):void 0;a?Tt.error(a,Be(Be({id:n},r),null==r?void 0:r.error)):Tt.dismiss(n)}),e};var Pt=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",{toasts:r,pausedAt:n}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bt,[r,n]=(0,a.useState)(_t[t]||Nt),s=(0,a.useRef)(_t[t]);(0,a.useEffect)(()=>(s.current!==_t[t]&&n(_t[t]),wt.push([t,n]),()=>{let e=wt.findIndex(e=>{let[r]=e;return r===t});e>-1&&wt.splice(e,1)}),[t]);let i=r.toasts.map(t=>{var r,n,a;return Be(Be(Be(Be({},e),e[t.type]),t),{},{removeDelay:t.removeDelay||(null==(r=e[t.type])?void 0:r.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(n=e[t.type])?void 0:n.duration)||(null==e?void 0:e.duration)||Ct[t.type],style:Be(Be(Be({},e.style),null==(a=e[t.type])?void 0:a.style),t.style)})});return Be(Be({},r),{},{toasts:i})}(e,t),s=(0,a.useRef)(new Map).current,i=(0,a.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(s.has(e))return;let r=setTimeout(()=>{s.delete(e),o({type:4,toastId:e})},t);s.set(e,r)},[]);(0,a.useEffect)(()=>{if(n)return;let e=Date.now(),a=r.map(r=>{if(r.duration===1/0)return;let n=(r.duration||0)+r.pauseDuration-(e-r.createdAt);if(!(n<0))return setTimeout(()=>Tt.dismiss(r.id,t),n);r.visible&&Tt.dismiss(r.id)});return()=>{a.forEach(e=>e&&clearTimeout(e))}},[r,n,t]);let o=(0,a.useCallback)(At(t),[t]),l=(0,a.useCallback)(()=>{o({type:5,time:Date.now()})},[o]),c=(0,a.useCallback)((e,t)=>{o({type:1,toast:{id:e,height:t}})},[o]),d=(0,a.useCallback)(()=>{n&&o({type:6,time:Date.now()})},[n,o]),u=(0,a.useCallback)((e,t)=>{let{reverseOrder:n=!1,gutter:a=8,defaultPosition:s}=t||{},i=r.filter(t=>(t.position||s)===(e.position||s)&&t.height),o=i.findIndex(t=>t.id===e.id),l=i.filter((e,t)=>t<o&&e.visible).length;return i.filter(e=>e.visible).slice(...n?[l+1]:[0,l]).reduce((e,t)=>e+(t.height||0)+a,0)},[r]);return(0,a.useEffect)(()=>{r.forEach(e=>{if(e.dismissed)i(e.id,e.removeDelay);else{let t=s.get(e.id);t&&(clearTimeout(t),s.delete(e.id))}})},[r,i]),{toasts:r,handlers:{updateHeight:c,startPause:l,endPause:d,calculateOffset:u}}},Ot=Ze(tt||(tt=Me(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n transform: scale(1) rotate(45deg);\n  opacity: 1;\n}"]))),Dt=Ze(rt||(rt=Me(["\nfrom {\n  transform: scale(0);\n  opacity: 0;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),It=Ze(nt||(nt=Me(["\nfrom {\n  transform: scale(0) rotate(90deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(90deg);\n\topacity: 1;\n}"]))),Lt=et("div")(at||(at=Me(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n\n  &:after,\n  &:before {\n    content: '';\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 150ms;\n    position: absolute;\n    border-radius: 3px;\n    opacity: 0;\n    background: ",";\n    bottom: 9px;\n    left: 4px;\n    height: 2px;\n    width: 12px;\n  }\n\n  &:before {\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 180ms;\n    transform: rotate(90deg);\n  }\n"])),e=>e.primary||"#ff4b4b",Ot,Dt,e=>e.secondary||"#fff",It),Mt=Ze(st||(st=Me(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]))),Rt=et("div")(it||(it=Me(["\n  width: 12px;\n  height: 12px;\n  box-sizing: border-box;\n  border: 2px solid;\n  border-radius: 100%;\n  border-color: ",";\n  border-right-color: ",";\n  animation: "," 1s linear infinite;\n"])),e=>e.secondary||"#e0e0e0",e=>e.primary||"#616161",Mt),Ft=Ze(ot||(ot=Me(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(45deg);\n\topacity: 1;\n}"]))),Bt=Ze(lt||(lt=Me(["\n0% {\n\theight: 0;\n\twidth: 0;\n\topacity: 0;\n}\n40% {\n  height: 0;\n\twidth: 6px;\n\topacity: 1;\n}\n100% {\n  opacity: 1;\n  height: 10px;\n}"]))),zt=et("div")(ct||(ct=Me(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n  &:after {\n    content: '';\n    box-sizing: border-box;\n    animation: "," 0.2s ease-out forwards;\n    opacity: 0;\n    animation-delay: 200ms;\n    position: absolute;\n    border-right: 2px solid;\n    border-bottom: 2px solid;\n    border-color: ",";\n    bottom: 6px;\n    left: 6px;\n    height: 10px;\n    width: 6px;\n  }\n"])),e=>e.primary||"#61d345",Ft,Bt,e=>e.secondary||"#fff"),Ut=et("div")(dt||(dt=Me(["\n  position: absolute;\n"]))),qt=et("div")(ut||(ut=Me(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-width: 20px;\n  min-height: 20px;\n"]))),Wt=Ze(ht||(ht=Me(["\nfrom {\n  transform: scale(0.6);\n  opacity: 0.4;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),Vt=et("div")(mt||(mt=Me(["\n  position: relative;\n  transform: scale(0.6);\n  opacity: 0.4;\n  min-width: 20px;\n  animation: "," 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n"])),Wt),Ht=e=>{let{toast:t}=e,{icon:r,type:n,iconTheme:s}=t;return void 0!==r?"string"==typeof r?a.createElement(Vt,null,r):r:"blank"===n?null:a.createElement(qt,null,a.createElement(Rt,Be({},s)),"loading"!==n&&a.createElement(Ut,null,"error"===n?a.createElement(Lt,Be({},s)):a.createElement(zt,Be({},s))))},Gt=e=>"\n0% {transform: translate3d(0,".concat(-200*e,"%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n"),Kt=e=>"\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,".concat(-150*e,"%,-1px) scale(.6); opacity:0;}\n"),Yt=et("div")(pt||(pt=Me(["\n  display: flex;\n  align-items: center;\n  background: #fff;\n  color: #363636;\n  line-height: 1.3;\n  will-change: transform;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\n  max-width: 350px;\n  pointer-events: auto;\n  padding: 8px 10px;\n  border-radius: 8px;\n"]))),Xt=et("div")(ft||(ft=Me(["\n  display: flex;\n  justify-content: center;\n  margin: 4px 10px;\n  color: inherit;\n  flex: 1 1 auto;\n  white-space: pre-line;\n"]))),Qt=a.memo(e=>{let{toast:t,position:r,style:n,children:s}=e,i=t.height?((e,t)=>{let r=e.includes("top")?1:-1,[n,a]=vt()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[Gt(r),Kt(r)];return{animation:t?"".concat(Ze(n)," 0.35s cubic-bezier(.21,1.02,.73,1) forwards"):"".concat(Ze(a)," 0.4s forwards cubic-bezier(.06,.71,.55,1)")}})(t.position||r||"top-center",t.visible):{opacity:0},o=a.createElement(Ht,{toast:t}),l=a.createElement(Xt,Be({},t.ariaProps),xt(t.message,t));return a.createElement(Yt,{className:t.className,style:Be(Be(Be({},i),n),t.style)},"function"==typeof s?s({icon:o,message:l}):a.createElement(a.Fragment,null,o,l))});!function(e,t,r,n){He.p=t,Qe=e,$e=r,Je=n}(a.createElement);var $t=e=>{let{id:t,className:r,style:n,onHeightUpdate:s,children:i}=e,o=a.useCallback(e=>{if(e){let r=()=>{let r=e.getBoundingClientRect().height;s(t,r)};r(),new MutationObserver(r).observe(e,{subtree:!0,childList:!0,characterData:!0})}},[t,s]);return a.createElement("div",{ref:o,className:r,style:n},i)},Jt=Xe(gt||(gt=Me(["\n  z-index: 9999;\n  > * {\n    pointer-events: auto;\n  }\n"]))),Zt=e=>{let{reverseOrder:t,position:r="top-center",toastOptions:n,gutter:s,children:i,toasterId:o,containerStyle:l,containerClassName:c}=e,{toasts:d,handlers:u}=Pt(n,o);return a.createElement("div",{"data-rht-toaster":o||"",style:Be({position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none"},l),className:c,onMouseEnter:u.startPause,onMouseLeave:u.endPause},d.map(e=>{let n=e.position||r,o=((e,t)=>{let r=e.includes("top"),n=r?{top:0}:{bottom:0},a=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return Be(Be({left:0,right:0,display:"flex",position:"absolute",transition:vt()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:"translateY(".concat(t*(r?1:-1),"px)")},n),a)})(n,u.calculateOffset(e,{reverseOrder:t,gutter:s,defaultPosition:r}));return a.createElement($t,{id:e.id,key:e.id,onHeightUpdate:u.updateHeight,className:e.visible?Jt:"",style:o},"custom"===e.type?xt(e.message,e):i?i(e):a.createElement(Qt,{toast:e,position:n}))}))},er=r(579);const tr=(0,a.createContext)(),rr=e=>{let{children:t}=e;const r={notifications:[],unreadCount:0,fetchNotifications:()=>{console.log("[INFO] Notification system is disabled")},markAsRead:()=>{},markAllAsRead:()=>{},deleteNotification:()=>{},clearAll:()=>{}};return(0,er.jsx)(tr.Provider,{value:r,children:t})},nr=()=>null;function ar(e,t){return function(){return e.apply(t,arguments)}}const{toString:sr}=Object.prototype,{getPrototypeOf:ir}=Object,{iterator:or,toStringTag:lr}=Symbol,cr=(dr=Object.create(null),e=>{const t=sr.call(e);return dr[t]||(dr[t]=t.slice(8,-1).toLowerCase())});var dr;const ur=e=>(e=e.toLowerCase(),t=>cr(t)===e),hr=e=>t=>typeof t===e,{isArray:mr}=Array,pr=hr("undefined");function fr(e){return null!==e&&!pr(e)&&null!==e.constructor&&!pr(e.constructor)&&yr(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const gr=ur("ArrayBuffer");const xr=hr("string"),yr=hr("function"),vr=hr("number"),br=e=>null!==e&&"object"===typeof e,jr=e=>{if("object"!==cr(e))return!1;const t=ir(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(lr in e)&&!(or in e)},wr=ur("Date"),Nr=ur("File"),_r=ur("Blob"),kr=ur("FileList"),Sr=ur("URLSearchParams"),[Ar,Cr,Er,Tr]=["ReadableStream","Request","Response","Headers"].map(ur);function Pr(e,t){let r,n,{allOwnKeys:a=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),mr(e))for(r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else{if(fr(e))return;const n=a?Object.getOwnPropertyNames(e):Object.keys(e),s=n.length;let i;for(r=0;r<s;r++)i=n[r],t.call(null,e[i],i,e)}}function Or(e,t){if(fr(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n,a=r.length;for(;a-- >0;)if(n=r[a],t===n.toLowerCase())return n;return null}const Dr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:r.g,Ir=e=>!pr(e)&&e!==Dr;const Lr=(Mr="undefined"!==typeof Uint8Array&&ir(Uint8Array),e=>Mr&&e instanceof Mr);var Mr;const Rr=ur("HTMLFormElement"),Fr=(e=>{let{hasOwnProperty:t}=e;return(e,r)=>t.call(e,r)})(Object.prototype),Br=ur("RegExp"),zr=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};Pr(r,(r,a)=>{let s;!1!==(s=t(r,a,e))&&(n[a]=s||r)}),Object.defineProperties(e,n)};const Ur=ur("AsyncFunction"),qr=((e,t)=>{return e?setImmediate:t?(r="axios@".concat(Math.random()),n=[],Dr.addEventListener("message",e=>{let{source:t,data:a}=e;t===Dr&&a===r&&n.length&&n.shift()()},!1),e=>{n.push(e),Dr.postMessage(r,"*")}):e=>setTimeout(e);var r,n})("function"===typeof setImmediate,yr(Dr.postMessage)),Wr="undefined"!==typeof queueMicrotask?queueMicrotask.bind(Dr):"undefined"!==typeof process&&process.nextTick||qr,Vr={isArray:mr,isArrayBuffer:gr,isBuffer:fr,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||yr(e.append)&&("formdata"===(t=cr(e))||"object"===t&&yr(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&gr(e.buffer),t},isString:xr,isNumber:vr,isBoolean:e=>!0===e||!1===e,isObject:br,isPlainObject:jr,isEmptyObject:e=>{if(!br(e)||fr(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(ze){return!1}},isReadableStream:Ar,isRequest:Cr,isResponse:Er,isHeaders:Tr,isUndefined:pr,isDate:wr,isFile:Nr,isBlob:_r,isRegExp:Br,isFunction:yr,isStream:e=>br(e)&&yr(e.pipe),isURLSearchParams:Sr,isTypedArray:Lr,isFileList:kr,forEach:Pr,merge:function e(){const{caseless:t,skipUndefined:r}=Ir(this)&&this||{},n={},a=(a,s)=>{const i=t&&Or(n,s)||s;jr(n[i])&&jr(a)?n[i]=e(n[i],a):jr(a)?n[i]=e({},a):mr(a)?n[i]=a.slice():r&&pr(a)||(n[i]=a)};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&Pr(arguments[s],a);return n},extend:function(e,t,r){let{allOwnKeys:n}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Pr(t,(t,n)=>{r&&yr(t)?e[n]=ar(t,r):e[n]=t},{allOwnKeys:n}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,n)=>{let a,s,i;const o={};if(t=t||{},null==e)return t;do{for(a=Object.getOwnPropertyNames(e),s=a.length;s-- >0;)i=a[s],n&&!n(i,e,t)||o[i]||(t[i]=e[i],o[i]=!0);e=!1!==r&&ir(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:cr,kindOfTest:ur,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return-1!==n&&n===r},toArray:e=>{if(!e)return null;if(mr(e))return e;let t=e.length;if(!vr(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{const r=(e&&e[or]).call(e);let n;for(;(n=r.next())&&!n.done;){const r=n.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let r;const n=[];for(;null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm:Rr,hasOwnProperty:Fr,hasOwnProp:Fr,reduceDescriptors:zr,freezeMethods:e=>{zr(e,(t,r)=>{if(yr(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const n=e[r];yr(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))})},toObjectSet:(e,t)=>{const r={},n=e=>{e.forEach(e=>{r[e]=!0})};return mr(e)?n(e):n(String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,r){return t.toUpperCase()+r}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:Or,global:Dr,isContextDefined:Ir,isSpecCompliantForm:function(e){return!!(e&&yr(e.append)&&"FormData"===e[lr]&&e[or])},toJSONObject:e=>{const t=new Array(10),r=(e,n)=>{if(br(e)){if(t.indexOf(e)>=0)return;if(fr(e))return e;if(!("toJSON"in e)){t[n]=e;const a=mr(e)?[]:{};return Pr(e,(e,t)=>{const s=r(e,n+1);!pr(s)&&(a[t]=s)}),t[n]=void 0,a}}return e};return r(e,0)},isAsyncFn:Ur,isThenable:e=>e&&(br(e)||yr(e))&&yr(e.then)&&yr(e.catch),setImmediate:qr,asap:Wr,isIterable:e=>null!=e&&yr(e[or])};function Hr(e,t,r,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}Vr.inherits(Hr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Vr.toJSONObject(this.config),code:this.code,status:this.status}}});const Gr=Hr.prototype,Kr={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Kr[e]={value:e}}),Object.defineProperties(Hr,Kr),Object.defineProperty(Gr,"isAxiosError",{value:!0}),Hr.from=(e,t,r,n,a,s)=>{const i=Object.create(Gr);Vr.toFlatObject(e,i,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);const o=e&&e.message?e.message:"Error",l=null==t&&e?e.code:t;return Hr.call(i,o,l,r,n,a),e&&null==i.cause&&Object.defineProperty(i,"cause",{value:e,configurable:!0}),i.name=e&&e.name||"Error",s&&Object.assign(i,s),i};const Yr=Hr;function Xr(e){return Vr.isPlainObject(e)||Vr.isArray(e)}function Qr(e){return Vr.endsWith(e,"[]")?e.slice(0,-2):e}function $r(e,t,r){return e?e.concat(t).map(function(e,t){return e=Qr(e),!r&&t?"["+e+"]":e}).join(r?".":""):t}const Jr=Vr.toFlatObject(Vr,{},null,function(e){return/^is[A-Z]/.test(e)});const Zr=function(e,t,r){if(!Vr.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const n=(r=Vr.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!Vr.isUndefined(t[e])})).metaTokens,a=r.visitor||c,s=r.dots,i=r.indexes,o=(r.Blob||"undefined"!==typeof Blob&&Blob)&&Vr.isSpecCompliantForm(t);if(!Vr.isFunction(a))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(Vr.isDate(e))return e.toISOString();if(Vr.isBoolean(e))return e.toString();if(!o&&Vr.isBlob(e))throw new Yr("Blob is not supported. Use a Buffer instead.");return Vr.isArrayBuffer(e)||Vr.isTypedArray(e)?o&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,r,a){let o=e;if(e&&!a&&"object"===typeof e)if(Vr.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else if(Vr.isArray(e)&&function(e){return Vr.isArray(e)&&!e.some(Xr)}(e)||(Vr.isFileList(e)||Vr.endsWith(r,"[]"))&&(o=Vr.toArray(e)))return r=Qr(r),o.forEach(function(e,n){!Vr.isUndefined(e)&&null!==e&&t.append(!0===i?$r([r],n,s):null===i?r:r+"[]",l(e))}),!1;return!!Xr(e)||(t.append($r(a,r,s),l(e)),!1)}const d=[],u=Object.assign(Jr,{defaultVisitor:c,convertValue:l,isVisitable:Xr});if(!Vr.isObject(e))throw new TypeError("data must be an object");return function e(r,n){if(!Vr.isUndefined(r)){if(-1!==d.indexOf(r))throw Error("Circular reference detected in "+n.join("."));d.push(r),Vr.forEach(r,function(r,s){!0===(!(Vr.isUndefined(r)||null===r)&&a.call(t,r,Vr.isString(s)?s.trim():s,n,u))&&e(r,n?n.concat(s):[s])}),d.pop()}}(e),t};function en(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function tn(e,t){this._pairs=[],e&&Zr(e,this,t)}const rn=tn.prototype;rn.append=function(e,t){this._pairs.push([e,t])},rn.toString=function(e){const t=e?function(t){return e.call(this,t,en)}:en;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const nn=tn;function an(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function sn(e,t,r){if(!t)return e;const n=r&&r.encode||an;Vr.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let s;if(s=a?a(t,r):Vr.isURLSearchParams(t)?t.toString():new nn(t,r).toString(n),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}const on=class{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Vr.forEach(this.handlers,function(t){null!==t&&e(t)})}},ln={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},cn={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:nn,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},dn="undefined"!==typeof window&&"undefined"!==typeof document,un="object"===typeof navigator&&navigator||void 0,hn=dn&&(!un||["ReactNative","NativeScript","NS"].indexOf(un.product)<0),mn="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,pn=dn&&window.location.href||"http://localhost",fn=Be(Be({},e),cn);const gn=function(e){function t(e,r,n,a){let s=e[a++];if("__proto__"===s)return!0;const i=Number.isFinite(+s),o=a>=e.length;if(s=!s&&Vr.isArray(n)?n.length:s,o)return Vr.hasOwnProp(n,s)?n[s]=[n[s],r]:n[s]=r,!i;n[s]&&Vr.isObject(n[s])||(n[s]=[]);return t(e,r,n[s],a)&&Vr.isArray(n[s])&&(n[s]=function(e){const t={},r=Object.keys(e);let n;const a=r.length;let s;for(n=0;n<a;n++)s=r[n],t[s]=e[s];return t}(n[s])),!i}if(Vr.isFormData(e)&&Vr.isFunction(e.entries)){const r={};return Vr.forEachEntry(e,(e,n)=>{t(function(e){return Vr.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),n,r,0)}),r}return null};const xn={transitional:ln,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",n=r.indexOf("application/json")>-1,a=Vr.isObject(e);a&&Vr.isHTMLForm(e)&&(e=new FormData(e));if(Vr.isFormData(e))return n?JSON.stringify(gn(e)):e;if(Vr.isArrayBuffer(e)||Vr.isBuffer(e)||Vr.isStream(e)||Vr.isFile(e)||Vr.isBlob(e)||Vr.isReadableStream(e))return e;if(Vr.isArrayBufferView(e))return e.buffer;if(Vr.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Zr(e,new fn.classes.URLSearchParams,Be({visitor:function(e,t,r,n){return fn.isNode&&Vr.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((s=Vr.isFileList(e))||r.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Zr(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return a||n?(t.setContentType("application/json",!1),function(e,t,r){if(Vr.isString(e))try{return(t||JSON.parse)(e),Vr.trim(e)}catch(ze){if("SyntaxError"!==ze.name)throw ze}return(r||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||xn.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(Vr.isResponse(e)||Vr.isReadableStream(e))return e;if(e&&Vr.isString(e)&&(r&&!this.responseType||n)){const r=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e,this.parseReviver)}catch(ze){if(r){if("SyntaxError"===ze.name)throw Yr.from(ze,Yr.ERR_BAD_RESPONSE,this,null,this.response);throw ze}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:fn.classes.FormData,Blob:fn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Vr.forEach(["delete","get","head","post","put","patch"],e=>{xn.headers[e]={}});const yn=xn,vn=Vr.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),bn=Symbol("internals");function jn(e){return e&&String(e).trim().toLowerCase()}function wn(e){return!1===e||null==e?e:Vr.isArray(e)?e.map(wn):String(e)}function Nn(e,t,r,n,a){return Vr.isFunction(n)?n.call(this,t,r):(a&&(t=r),Vr.isString(t)?Vr.isString(n)?-1!==t.indexOf(n):Vr.isRegExp(n)?n.test(t):void 0:void 0)}class _n{constructor(e){e&&this.set(e)}set(e,t,r){const n=this;function a(e,t,r){const a=jn(t);if(!a)throw new Error("header name must be a non-empty string");const s=Vr.findKey(n,a);(!s||void 0===n[s]||!0===r||void 0===r&&!1!==n[s])&&(n[s||t]=wn(e))}const s=(e,t)=>Vr.forEach(e,(e,r)=>a(e,r,t));if(Vr.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(Vr.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))s((e=>{const t={};let r,n,a;return e&&e.split("\n").forEach(function(e){a=e.indexOf(":"),r=e.substring(0,a).trim().toLowerCase(),n=e.substring(a+1).trim(),!r||t[r]&&vn[r]||("set-cookie"===r?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t})(e),t);else if(Vr.isObject(e)&&Vr.isIterable(e)){let r,n,a={};for(const t of e){if(!Vr.isArray(t))throw TypeError("Object iterator must return a key-value pair");a[n=t[0]]=(r=a[n])?Vr.isArray(r)?[...r,t[1]]:[r,t[1]]:t[1]}s(a,t)}else null!=e&&a(t,e,r);return this}get(e,t){if(e=jn(e)){const r=Vr.findKey(this,e);if(r){const e=this[r];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}(e);if(Vr.isFunction(t))return t.call(this,e,r);if(Vr.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=jn(e)){const r=Vr.findKey(this,e);return!(!r||void 0===this[r]||t&&!Nn(0,this[r],r,t))}return!1}delete(e,t){const r=this;let n=!1;function a(e){if(e=jn(e)){const a=Vr.findKey(r,e);!a||t&&!Nn(0,r[a],a,t)||(delete r[a],n=!0)}}return Vr.isArray(e)?e.forEach(a):a(e),n}clear(e){const t=Object.keys(this);let r=t.length,n=!1;for(;r--;){const a=t[r];e&&!Nn(0,this[a],a,e,!0)||(delete this[a],n=!0)}return n}normalize(e){const t=this,r={};return Vr.forEach(this,(n,a)=>{const s=Vr.findKey(r,a);if(s)return t[s]=wn(n),void delete t[a];const i=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}(a):String(a).trim();i!==a&&delete t[a],t[i]=wn(n),r[i]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return Vr.forEach(this,(r,n)=>{null!=r&&!1!==r&&(t[n]=e&&Vr.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,r]=e;return t+": "+r}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return n.forEach(e=>t.set(e)),t}static accessor(e){const t=(this[bn]=this[bn]={accessors:{}}).accessors,r=this.prototype;function n(e){const n=jn(e);t[n]||(!function(e,t){const r=Vr.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(e,r,a){return this[n].call(this,t,e,r,a)},configurable:!0})})}(r,e),t[n]=!0)}return Vr.isArray(e)?e.forEach(n):n(e),this}}_n.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Vr.reduceDescriptors(_n.prototype,(e,t)=>{let{value:r}=e,n=t[0].toUpperCase()+t.slice(1);return{get:()=>r,set(e){this[n]=e}}}),Vr.freezeMethods(_n);const kn=_n;function Sn(e,t){const r=this||yn,n=t||r,a=kn.from(n.headers);let s=n.data;return Vr.forEach(e,function(e){s=e.call(r,s,a.normalize(),t?t.status:void 0)}),a.normalize(),s}function An(e){return!(!e||!e.__CANCEL__)}function Cn(e,t,r){Yr.call(this,null==e?"canceled":e,Yr.ERR_CANCELED,t,r),this.name="CanceledError"}Vr.inherits(Cn,Yr,{__CANCEL__:!0});const En=Cn;function Tn(e,t,r){const n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(new Yr("Request failed with status code "+r.status,[Yr.ERR_BAD_REQUEST,Yr.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}const Pn=function(e,t){e=e||10;const r=new Array(e),n=new Array(e);let a,s=0,i=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=n[i];a||(a=l),r[s]=o,n[s]=l;let d=i,u=0;for(;d!==s;)u+=r[d++],d%=e;if(s=(s+1)%e,s===i&&(i=(i+1)%e),l-a<t)return;const h=c&&l-c;return h?Math.round(1e3*u/h):void 0}};const On=function(e,t){let r,n,a=0,s=1e3/t;const i=function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();a=s,r=null,n&&(clearTimeout(n),n=null),e(...t)};return[function(){const e=Date.now(),t=e-a;for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];t>=s?i(l,e):(r=l,n||(n=setTimeout(()=>{n=null,i(r)},s-t)))},()=>r&&i(r)]},Dn=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,n=0;const a=Pn(50,250);return On(r=>{const s=r.loaded,i=r.lengthComputable?r.total:void 0,o=s-n,l=a(o);n=s;e({loaded:s,total:i,progress:i?s/i:void 0,bytes:o,rate:l||void 0,estimated:l&&i&&s<=i?(i-s)/l:void 0,event:r,lengthComputable:null!=i,[t?"download":"upload"]:!0})},r)},In=(e,t)=>{const r=null!=e;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},Ln=e=>function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Vr.asap(()=>e(...r))},Mn=fn.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,fn.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(fn.origin),fn.navigator&&/(msie|trident)/i.test(fn.navigator.userAgent)):()=>!0,Rn=fn.hasStandardBrowserEnv?{write(e,t,r,n,a,s,i){if("undefined"===typeof document)return;const o=["".concat(e,"=").concat(encodeURIComponent(t))];Vr.isNumber(r)&&o.push("expires=".concat(new Date(r).toUTCString())),Vr.isString(n)&&o.push("path=".concat(n)),Vr.isString(a)&&o.push("domain=".concat(a)),!0===s&&o.push("secure"),Vr.isString(i)&&o.push("SameSite=".concat(i)),document.cookie=o.join("; ")},read(e){if("undefined"===typeof document)return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read:()=>null,remove(){}};function Fn(e,t,r){let n=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(n||0==r)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Bn=e=>e instanceof kn?Be({},e):e;function zn(e,t){t=t||{};const r={};function n(e,t,r,n){return Vr.isPlainObject(e)&&Vr.isPlainObject(t)?Vr.merge.call({caseless:n},e,t):Vr.isPlainObject(t)?Vr.merge({},t):Vr.isArray(t)?t.slice():t}function a(e,t,r,a){return Vr.isUndefined(t)?Vr.isUndefined(e)?void 0:n(void 0,e,0,a):n(e,t,0,a)}function s(e,t){if(!Vr.isUndefined(t))return n(void 0,t)}function i(e,t){return Vr.isUndefined(t)?Vr.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function o(r,a,s){return s in t?n(r,a):s in e?n(void 0,r):void 0}const l={url:s,method:s,data:s,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:o,headers:(e,t,r)=>a(Bn(e),Bn(t),0,!0)};return Vr.forEach(Object.keys(Be(Be({},e),t)),function(n){const s=l[n]||a,i=s(e[n],t[n],n);Vr.isUndefined(i)&&s!==o||(r[n]=i)}),r}const Un=e=>{const t=zn({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:s,headers:i,auth:o}=t;if(t.headers=i=kn.from(i),t.url=sn(Fn(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&i.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),Vr.isFormData(r))if(fn.hasStandardBrowserEnv||fn.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(Vr.isFunction(r.getHeaders)){const e=r.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(e=>{let[r,n]=e;t.includes(r.toLowerCase())&&i.set(r,n)})}if(fn.hasStandardBrowserEnv&&(n&&Vr.isFunction(n)&&(n=n(t)),n||!1!==n&&Mn(t.url))){const e=a&&s&&Rn.read(s);e&&i.set(a,e)}return t},qn="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(t,r){const n=Un(e);let a=n.data;const s=kn.from(n.headers).normalize();let i,o,l,c,d,{responseType:u,onUploadProgress:h,onDownloadProgress:m}=n;function p(){c&&c(),d&&d(),n.cancelToken&&n.cancelToken.unsubscribe(i),n.signal&&n.signal.removeEventListener("abort",i)}let f=new XMLHttpRequest;function g(){if(!f)return;const n=kn.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders());Tn(function(e){t(e),p()},function(e){r(e),p()},{data:u&&"text"!==u&&"json"!==u?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:n,config:e,request:f}),f=null}f.open(n.method.toUpperCase(),n.url,!0),f.timeout=n.timeout,"onloadend"in f?f.onloadend=g:f.onreadystatechange=function(){f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))&&setTimeout(g)},f.onabort=function(){f&&(r(new Yr("Request aborted",Yr.ECONNABORTED,e,f)),f=null)},f.onerror=function(t){const n=t&&t.message?t.message:"Network Error",a=new Yr(n,Yr.ERR_NETWORK,e,f);a.event=t||null,r(a),f=null},f.ontimeout=function(){let t=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const a=n.transitional||ln;n.timeoutErrorMessage&&(t=n.timeoutErrorMessage),r(new Yr(t,a.clarifyTimeoutError?Yr.ETIMEDOUT:Yr.ECONNABORTED,e,f)),f=null},void 0===a&&s.setContentType(null),"setRequestHeader"in f&&Vr.forEach(s.toJSON(),function(e,t){f.setRequestHeader(t,e)}),Vr.isUndefined(n.withCredentials)||(f.withCredentials=!!n.withCredentials),u&&"json"!==u&&(f.responseType=n.responseType),m&&([l,d]=Dn(m,!0),f.addEventListener("progress",l)),h&&f.upload&&([o,c]=Dn(h),f.upload.addEventListener("progress",o),f.upload.addEventListener("loadend",c)),(n.cancelToken||n.signal)&&(i=t=>{f&&(r(!t||t.type?new En(null,e,f):t),f.abort(),f=null)},n.cancelToken&&n.cancelToken.subscribe(i),n.signal&&(n.signal.aborted?i():n.signal.addEventListener("abort",i)));const x=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(n.url);x&&-1===fn.protocols.indexOf(x)?r(new Yr("Unsupported protocol "+x+":",Yr.ERR_BAD_REQUEST,e)):f.send(a||null)})},Wn=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r,n=new AbortController;const a=function(e){if(!r){r=!0,i();const t=e instanceof Error?e:this.reason;n.abort(t instanceof Yr?t:new En(t instanceof Error?t.message:t))}};let s=t&&setTimeout(()=>{s=null,a(new Yr("timeout ".concat(t," of ms exceeded"),Yr.ETIMEDOUT))},t);const i=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(a):e.removeEventListener("abort",a)}),e=null)};e.forEach(e=>e.addEventListener("abort",a));const{signal:o}=n;return o.unsubscribe=()=>Vr.asap(i),o}};function Vn(e,t){this.v=e,this.k=t}function Hn(e){return function(){return new Gn(e.apply(this,arguments))}}function Gn(e){var t,r;function n(t,r){try{var s=e[t](r),i=s.value,o=i instanceof Vn;Promise.resolve(o?i.v:i).then(function(r){if(o){var l="return"===t?"return":"next";if(!i.k||r.done)return n(l,r);r=e[l](r).value}a(s.done?"return":"normal",r)},function(e){n("throw",e)})}catch(e){a("throw",e)}}function a(e,a){switch(e){case"return":t.resolve({value:a,done:!0});break;case"throw":t.reject(a);break;default:t.resolve({value:a,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(e,a){return new Promise(function(s,i){var o={key:e,arg:a,resolve:s,reject:i,next:null};r?r=r.next=o:(t=r=o,n(e,a))})},"function"!=typeof e.return&&(this.return=void 0)}function Kn(e){return new Vn(e,0)}function Yn(e){var t={},r=!1;function n(t,n){return r=!0,n=new Promise(function(r){r(e[t](n))}),{done:!1,value:new Vn(n,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return r?(r=!1,e):n("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(r)throw r=!1,e;return n("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return r?(r=!1,e):n("return",e)}),t}function Xn(e){var t,r,n,a=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);a--;){if(r&&null!=(t=e[r]))return t.call(e);if(n&&null!=(t=e[n]))return new Qn(t.call(e));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function Qn(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return Qn=function(e){this.s=e,this.n=e.next},Qn.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new Qn(e)}Gn.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Gn.prototype.next=function(e){return this._invoke("next",e)},Gn.prototype.throw=function(e){return this._invoke("throw",e)},Gn.prototype.return=function(e){return this._invoke("return",e)};const $n=function*(e,t){let r=e.byteLength;if(!t||r<t)return void(yield e);let n,a=0;for(;a<r;)n=a+t,yield e.slice(a,n),a=n},Jn=function(){var e=Hn(function*(e,t){var r,n=!1,a=!1;try{for(var s,i=Xn(Zn(e));n=!(s=yield Kn(i.next())).done;n=!1){const e=s.value;yield*Yn(Xn($n(e,t)))}}catch(o){a=!0,r=o}finally{try{n&&null!=i.return&&(yield Kn(i.return()))}finally{if(a)throw r}}});return function(t,r){return e.apply(this,arguments)}}(),Zn=function(){var e=Hn(function*(e){if(e[Symbol.asyncIterator])return void(yield*Yn(Xn(e)));const t=e.getReader();try{for(;;){const{done:e,value:r}=yield Kn(t.read());if(e)break;yield r}}finally{yield Kn(t.cancel())}});return function(t){return e.apply(this,arguments)}}(),ea=(e,t,r,n)=>{const a=Jn(e,t);let s,i=0,o=e=>{s||(s=!0,n&&n(e))};return new ReadableStream({async pull(e){try{const{done:t,value:n}=await a.next();if(t)return o(),void e.close();let s=n.byteLength;if(r){let e=i+=s;r(e)}e.enqueue(new Uint8Array(n))}catch(t){throw o(t),t}},cancel:e=>(o(e),a.return())},{highWaterMark:2})},{isFunction:ta}=Vr,ra=(e=>{let{Request:t,Response:r}=e;return{Request:t,Response:r}})(Vr.global),{ReadableStream:na,TextEncoder:aa}=Vr.global,sa=function(e){try{for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return!!e(...r)}catch(ze){return!1}},ia=e=>{e=Vr.merge.call({skipUndefined:!0},ra,e);const{fetch:t,Request:r,Response:n}=e,a=t?ta(t):"function"===typeof fetch,s=ta(r),i=ta(n);if(!a)return!1;const o=a&&ta(na),l=a&&("function"===typeof aa?(c=new aa,e=>c.encode(e)):async e=>new Uint8Array(await new r(e).arrayBuffer()));var c;const d=s&&o&&sa(()=>{let e=!1;const t=new r(fn.origin,{body:new na,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),u=i&&o&&sa(()=>Vr.isReadableStream(new n("").body)),h={stream:u&&(e=>e.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!h[e]&&(h[e]=(t,r)=>{let n=t&&t[e];if(n)return n.call(t);throw new Yr("Response type '".concat(e,"' is not supported"),Yr.ERR_NOT_SUPPORT,r)})});const m=async(e,t)=>{const n=Vr.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(Vr.isBlob(e))return e.size;if(Vr.isSpecCompliantForm(e)){const t=new r(fn.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Vr.isArrayBufferView(e)||Vr.isArrayBuffer(e)?e.byteLength:(Vr.isURLSearchParams(e)&&(e+=""),Vr.isString(e)?(await l(e)).byteLength:void 0)})(t):n};return async e=>{let{url:a,method:i,data:o,signal:l,cancelToken:c,timeout:p,onDownloadProgress:f,onUploadProgress:g,responseType:x,headers:y,withCredentials:v="same-origin",fetchOptions:b}=Un(e),j=t||fetch;x=x?(x+"").toLowerCase():"text";let w=Wn([l,c&&c.toAbortSignal()],p),N=null;const _=w&&w.unsubscribe&&(()=>{w.unsubscribe()});let k;try{if(g&&d&&"get"!==i&&"head"!==i&&0!==(k=await m(y,o))){let e,t=new r(a,{method:"POST",body:o,duplex:"half"});if(Vr.isFormData(o)&&(e=t.headers.get("content-type"))&&y.setContentType(e),t.body){const[e,r]=In(k,Dn(Ln(g)));o=ea(t.body,65536,e,r)}}Vr.isString(v)||(v=v?"include":"omit");const t=s&&"credentials"in r.prototype,l=Be(Be({},b),{},{signal:w,method:i.toUpperCase(),headers:y.normalize().toJSON(),body:o,duplex:"half",credentials:t?v:void 0});N=s&&new r(a,l);let c=await(s?j(N,b):j(a,l));const p=u&&("stream"===x||"response"===x);if(u&&(f||p&&_)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=c[t]});const t=Vr.toFiniteNumber(c.headers.get("content-length")),[r,a]=f&&In(t,Dn(Ln(f),!0))||[];c=new n(ea(c.body,65536,r,()=>{a&&a(),_&&_()}),e)}x=x||"text";let S=await h[Vr.findKey(h,x)||"text"](c,e);return!p&&_&&_(),await new Promise((t,r)=>{Tn(t,r,{data:S,headers:kn.from(c.headers),status:c.status,statusText:c.statusText,config:e,request:N})})}catch(S){if(_&&_(),S&&"TypeError"===S.name&&/Load failed|fetch/i.test(S.message))throw Object.assign(new Yr("Network Error",Yr.ERR_NETWORK,e,N),{cause:S.cause||S});throw Yr.from(S,S&&S.code,e,N)}}},oa=new Map,la=e=>{let t=e&&e.env||{};const{fetch:r,Request:n,Response:a}=t,s=[n,a,r];let i,o,l=s.length,c=oa;for(;l--;)i=s[l],o=c.get(i),void 0===o&&c.set(i,o=l?new Map:ia(t)),c=o;return o},ca=(la(),{http:null,xhr:qn,fetch:{get:la}});Vr.forEach(ca,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(ze){}Object.defineProperty(e,"adapterName",{value:t})}});const da=e=>"- ".concat(e),ua=e=>Vr.isFunction(e)||null===e||!1===e;const ha={getAdapter:function(e,t){e=Vr.isArray(e)?e:[e];const{length:r}=e;let n,a;const s={};for(let i=0;i<r;i++){let r;if(n=e[i],a=n,!ua(n)&&(a=ca[(r=String(n)).toLowerCase()],void 0===a))throw new Yr("Unknown adapter '".concat(r,"'"));if(a&&(Vr.isFunction(a)||(a=a.get(t))))break;s[r||"#"+i]=a}if(!a){const e=Object.entries(s).map(e=>{let[t,r]=e;return"adapter ".concat(t," ")+(!1===r?"is not supported by the environment":"is not available in the build")});let t=r?e.length>1?"since :\n"+e.map(da).join("\n"):" "+da(e[0]):"as no adapter specified";throw new Yr("There is no suitable adapter to dispatch the request "+t,"ERR_NOT_SUPPORT")}return a},adapters:ca};function ma(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new En(null,e)}function pa(e){ma(e),e.headers=kn.from(e.headers),e.data=Sn.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return ha.getAdapter(e.adapter||yn.adapter,e)(e).then(function(t){return ma(e),t.data=Sn.call(e,e.transformResponse,t),t.headers=kn.from(t.headers),t},function(t){return An(t)||(ma(e),t&&t.response&&(t.response.data=Sn.call(e,e.transformResponse,t.response),t.response.headers=kn.from(t.response.headers))),Promise.reject(t)})}const fa="1.13.2",ga={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{ga[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const xa={};ga.transitional=function(e,t,r){function n(e,t){return"[Axios v"+fa+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(r,a,s)=>{if(!1===e)throw new Yr(n(a," has been removed"+(t?" in "+t:"")),Yr.ERR_DEPRECATED);return t&&!xa[a]&&(xa[a]=!0,console.warn(n(a," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,a,s)}},ga.spelling=function(e){return(t,r)=>(console.warn("".concat(r," is likely a misspelling of ").concat(e)),!0)};const ya={assertOptions:function(e,t,r){if("object"!==typeof e)throw new Yr("options must be an object",Yr.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let a=n.length;for(;a-- >0;){const s=n[a],i=t[s];if(i){const t=e[s],r=void 0===t||i(t,s,e);if(!0!==r)throw new Yr("option "+s+" must be "+r,Yr.ERR_BAD_OPTION_VALUE);continue}if(!0!==r)throw new Yr("Unknown option "+s,Yr.ERR_BAD_OPTION)}},validators:ga},va=ya.validators;class ba{constructor(e){this.defaults=e||{},this.interceptors={request:new on,response:new on}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{r.stack?t&&!String(r.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(r.stack+="\n"+t):r.stack=t}catch(ze){}}throw r}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=zn(this.defaults,t);const{transitional:r,paramsSerializer:n,headers:a}=t;void 0!==r&&ya.assertOptions(r,{silentJSONParsing:va.transitional(va.boolean),forcedJSONParsing:va.transitional(va.boolean),clarifyTimeoutError:va.transitional(va.boolean)},!1),null!=n&&(Vr.isFunction(n)?t.paramsSerializer={serialize:n}:ya.assertOptions(n,{encode:va.function,serialize:va.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),ya.assertOptions(t,{baseUrl:va.spelling("baseURL"),withXsrfToken:va.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=a&&Vr.merge(a.common,a[t.method]);a&&Vr.forEach(["delete","get","head","post","put","patch","common"],e=>{delete a[e]}),t.headers=kn.concat(s,a);const i=[];let o=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,i.unshift(e.fulfilled,e.rejected))});const l=[];let c;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let d,u=0;if(!o){const e=[pa.bind(this),void 0];for(e.unshift(...i),e.push(...l),d=e.length,c=Promise.resolve(t);u<d;)c=c.then(e[u++],e[u++]);return c}d=i.length;let h=t;for(;u<d;){const e=i[u++],t=i[u++];try{h=e(h)}catch(m){t.call(this,m);break}}try{c=pa.call(this,h)}catch(m){return Promise.reject(m)}for(u=0,d=l.length;u<d;)c=c.then(l[u++],l[u++]);return c}getUri(e){return sn(Fn((e=zn(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}Vr.forEach(["delete","get","head","options"],function(e){ba.prototype[e]=function(t,r){return this.request(zn(r||{},{method:e,url:t,data:(r||{}).data}))}}),Vr.forEach(["post","put","patch"],function(e){function t(t){return function(r,n,a){return this.request(zn(a||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}ba.prototype[e]=t(),ba.prototype[e+"Form"]=t(!0)});const ja=ba;class wa{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const r=this;this.promise.then(e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null}),this.promise.then=e=>{let t;const n=new Promise(e=>{r.subscribe(e),t=e}).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e(function(e,n,a){r.reason||(r.reason=new En(e,n,a),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;const t=new wa(function(t){e=t});return{token:t,cancel:e}}}const Na=wa;const _a={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(_a).forEach(e=>{let[t,r]=e;_a[r]=t});const ka=_a;const Sa=function e(t){const r=new ja(t),n=ar(ja.prototype.request,r);return Vr.extend(n,ja.prototype,r,{allOwnKeys:!0}),Vr.extend(n,r,null,{allOwnKeys:!0}),n.create=function(r){return e(zn(t,r))},n}(yn);Sa.Axios=ja,Sa.CanceledError=En,Sa.CancelToken=Na,Sa.isCancel=An,Sa.VERSION=fa,Sa.toFormData=Zr,Sa.AxiosError=Yr,Sa.Cancel=Sa.CanceledError,Sa.all=function(e){return Promise.all(e)},Sa.spread=function(e){return function(t){return e.apply(null,t)}},Sa.isAxiosError=function(e){return Vr.isObject(e)&&!0===e.isAxiosError},Sa.mergeConfig=zn,Sa.AxiosHeaders=kn,Sa.formToJSON=e=>gn(Vr.isHTMLForm(e)?new FormData(e):e),Sa.getAdapter=ha.getAdapter,Sa.HttpStatusCode=ka,Sa.default=Sa;const Aa=Sa,Ca=()=>{if("undefined"===typeof window)return!1;const e=window.location.pathname||"";return e.startsWith("/pommaadmin")||e.startsWith("/pommaholidays")},Ea=()=>{if("undefined"===typeof window)return!1;const e=window.location.pathname||"";return e.startsWith("/orchidadmin")||e.startsWith("/orchid")},Ta=()=>{if("undefined"!==typeof window){const e=window.location.hostname||"";if("localhost"===e||"127.0.0.1"===e||e.startsWith("192.168.")||e.startsWith("10."))return"http://".concat(e,":8011")}return"undefined"!==typeof window&&Ea()?"".concat(window.location.origin,"/orchidfiles"):"undefined"!==typeof window&&Ca()?"".concat(window.location.origin,"/pomma"):{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_MEDIA_BASE_URL?{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_MEDIA_BASE_URL:"https://www.teqmates.com"},Pa=()=>{if("undefined"!==typeof window){const e=window.location.hostname||"",t=window.location.port||"";if(console.log("Hostname:",e,"Port:",t,"Pathname:",window.location.pathname),"localhost"===e||"127.0.0.1"===e||e.startsWith("192.168.")||e.startsWith("10.")){const t="http://".concat(e,":8011/api");return console.log("Using dynamic local API URL:",t),t}}if({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL)return console.log("Using REACT_APP_API_BASE_URL:",{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL),{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL;if("undefined"!==typeof window&&Ea()){const e="".concat(window.location.origin,"/orchidapi/api");return console.log("Using Orchid deployment API URL:",e),e}if("undefined"!==typeof window&&Ca()){const e="".concat(window.location.origin,"/pommaapi/api");return console.log("Using Pomma deployment API URL:",e),e}const e="https://www.teqmates.com/orchidapi/api";return console.log("Using default API URL:",e),e},Oa=Pa();console.log("API Base URL:",Oa);const Da=Aa.create({baseURL:Oa,timeout:6e4});Da.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),"get"===e.method&&(e.headers["Cache-Control"]="no-cache, no-store, must-revalidate",e.headers.Pragma="no-cache",e.headers.Expires="0"),console.log("API Request:",e.method,e.url,"Base URL:",e.baseURL),e}),Da.interceptors.response.use(e=>e,e=>{var t,r,n,a,s;return"ECONNABORTED"===e.code||e.message.includes("timeout")?(console.error("Request timeout:",null===(r=e.config)||void 0===r?void 0:r.url),Promise.reject(Be(Be({},e),{},{message:"Request timed out. The server is taking too long to respond.",isTimeout:!0}))):e.response?503===(null===(t=e.response)||void 0===t?void 0:t.status)?(console.error("Service unavailable:",null===(s=e.response)||void 0===s?void 0:s.data),Promise.reject(Be(Be({},e),{},{message:"Service temporarily unavailable. Please try again in a moment.",isServiceUnavailable:!0}))):Promise.reject(e):(console.error("Network error:",e.message),console.error("Request URL:",null===(n=e.config)||void 0===n?void 0:n.url),console.error("Base URL:",null===(a=e.config)||void 0===a?void 0:a.baseURL),console.error("Full error:",e),Promise.reject(Be(Be({},e),{},{message:"Network error. Please check your connection. (".concat(e.message||"Unable to reach server",")"),isNetworkError:!0})))});const Ia=Da,La=r.p+"static/media/orchidlogo.f30f5147bac11ff9932e.png";class Ma extends Error{}function Ra(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function(e){return decodeURIComponent(atob(e).replace(/(.)/g,(e,t)=>{let r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}(t)}catch(r){return atob(t)}}function Fa(e,t){if("string"!==typeof e)throw new Ma("Invalid token specified: must be a string");t||(t={});const r=!0===t.header?0:1,n=e.split(".")[r];if("string"!==typeof n)throw new Ma("Invalid token specified: missing part #".concat(r+1));let a;try{a=Ra(n)}catch(ze){throw new Ma("Invalid token specified: invalid base64 for part #".concat(r+1," (").concat(ze.message,")"))}try{return JSON.parse(a)}catch(ze){throw new Ma("Invalid token specified: invalid json for part #".concat(r+1," (").concat(ze.message,")"))}}function Ba(){const[e,t]=(0,a.useState)(""),[r,n]=(0,a.useState)(""),[s,i]=(0,a.useState)(!1),o=ie();return(0,er.jsxs)("div",{className:"relative min-h-screen flex items-center justify-center overflow-hidden p-4",children:[(0,er.jsx)("div",{className:"absolute inset-0 animate-gradient bg-gradient-to-br from-[#faf8f5] via-[#e8f5e9] to-[#c5e1a5]"}),(0,er.jsx)("div",{className:"absolute inset-0 overflow-hidden",children:[...Array(15)].map((e,t)=>(0,er.jsx)("div",{className:"absolute w-10 h-10 bg-[#8bc34a]/30 rounded-full animate-float",style:{left:"".concat(100*Math.random(),"%"),top:"".concat(100*Math.random(),"%"),animationDelay:"".concat(5*Math.random(),"s"),animationDuration:"".concat(5+10*Math.random(),"s")}},t))}),(0,er.jsxs)("div",{className:"relative z-10 w-full max-w-md bg-white/95 backdrop-blur-lg rounded-2xl shadow-2xl p-6 sm:p-8 space-y-6 border border-[#c5e1a5]/50",children:[(0,er.jsx)("div",{className:"flex justify-center mb-6",children:(0,er.jsxs)("div",{className:"relative",children:[(0,er.jsx)("div",{className:"absolute inset-0 bg-gray-800/30 rounded-full blur-xl"}),(0,er.jsx)("div",{className:"relative bg-gradient-to-br from-gray-800 via-gray-900 to-black p-4 rounded-2xl shadow-lg border-2",style:{borderColor:"rgba(212, 175, 55, 0.3)"},children:(0,er.jsx)("img",{src:La,alt:"Orchid Resort Logo",className:"h-28 md:h-32 w-auto object-contain drop-shadow-md"})})]})}),(0,er.jsx)("p",{className:"text-center text-[#2d5016] text-sm sm:text-base font-medium",children:"Sign in to your account"}),(0,er.jsxs)("form",{className:"space-y-4",onSubmit:async t=>{t.preventDefault(),i(!0);try{const t=await Ia.post("/auth/login",{email:e,password:r});if(t.data&&t.data.access_token){localStorage.setItem("token",t.data.access_token);try{const e=Fa(t.data.access_token),r=e.permissions||[];"admin"===(e.role?e.role.toLowerCase():"guest")||r.includes("/dashboard")?o("/dashboard",{replace:!0}):r.length>0?o(r[0],{replace:!0}):o("/dashboard",{replace:!0})}catch(s){console.error("Token decode error:",s),o("/dashboard",{replace:!0})}}else alert("Login failed: No token received from server.")}catch(l){var n,a;console.error("Login error:",l);const e=(null===(n=l.response)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.detail)||l.message||"Login failed. Please check your credentials.";alert(e)}finally{i(!1)}},children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Email / Username"}),(0,er.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#8bc34a] focus:border-[#8bc34a] focus:outline-none transition-colors",required:!0})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Password"}),(0,er.jsx)("input",{type:"password",value:r,onChange:e=>n(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#8bc34a] focus:border-[#8bc34a] focus:outline-none transition-colors",required:!0})]}),(0,er.jsx)("button",{type:"submit",disabled:s,className:"w-full bg-gradient-to-r from-[#8bc34a] to-[#7cb342] hover:from-[#7cb342] hover:to-[#689f38] text-white font-semibold py-2 px-4 rounded-lg shadow-lg transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98]",children:s?"Signing in...":"Sign In"})]}),(0,er.jsx)("div",{className:"text-center text-sm text-gray-500",children:"\xa9 2025 Your Business. All rights reserved."})]}),(0,er.jsx)("style",{children:"\n          @keyframes gradient-bg {\n            0%,100% { background-position: 0% 50%; }\n            50% { background-position: 100% 50%; }\n          }\n          .animate-gradient {\n            background-size: 200% 200%;\n            animation: gradient-bg 15s ease infinite;\n          }\n\n          @keyframes float {\n            0% { transform: translateY(0) translateX(0) rotate(0deg); opacity:0.5; }\n            50% { transform: translateY(-50px) translateX(20px) rotate(180deg); opacity:0.2; }\n            100% { transform: translateY(0) translateX(0) rotate(360deg); opacity:0.5; }\n          }\n          .animate-float {\n            animation-name: float;\n            animation-timing-function: ease-in-out;\n            animation-iteration-count: infinite;\n          }\n        "})]})}function za(e){if("undefined"===typeof Proxy)return e;const t=new Map;return new Proxy(function(){return e(...arguments)},{get:(r,n)=>"create"===n?e:(t.has(n)||t.set(n,e(n)),t.get(n))})}function Ua(e){return null!==e&&"object"===typeof e&&"function"===typeof e.start}function qa(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}Ma.prototype.name="InvalidTokenError";const Wa=e=>Array.isArray(e);function Va(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function Ha(e){return"string"===typeof e||Array.isArray(e)}function Ga(e){const t=[{},{}];return null===e||void 0===e||e.values.forEach((e,r)=>{t[0][r]=e.get(),t[1][r]=e.getVelocity()}),t}function Ka(e,t,r,n){if("function"===typeof t){const[a,s]=Ga(n);t=t(void 0!==r?r:e.custom,a,s)}if("string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t){const[a,s]=Ga(n);t=t(void 0!==r?r:e.custom,a,s)}return t}function Ya(e,t,r){const n=e.getProps();return Ka(n,t,void 0!==r?r:n.custom,e)}const Xa=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Qa=["initial",...Xa];function $a(e){let t;return()=>(void 0===t&&(t=e()),t)}const Ja=$a(()=>void 0!==window.ScrollTimeline);class Za{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=t}attachTimeline(e,t){const r=this.animations.map(r=>Ja()&&r.attachTimeline?r.attachTimeline(e):"function"===typeof t?t(r):void 0);return()=>{r.forEach((e,t)=>{e&&e(),this.animations[t].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class es extends Za{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function ts(e,t){return e?e[t]||e.default||e:void 0}const rs=2e4;function ns(e){let t=0;let r=e.next(t);for(;!r.done&&t<rs;)t+=50,r=e.next(t);return t>=rs?1/0:t}function as(e){return"function"===typeof e}function ss(e,t){e.timeline=t,e.onfinish=null}const is=e=>Array.isArray(e)&&"number"===typeof e[0],os={linearEasing:void 0};function ls(e,t){const r=$a(e);return()=>{var e;return null!==(e=os[t])&&void 0!==e?e:r()}}const cs=ls(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(ze){return!1}return!0},"linearEasing"),ds=(e,t,r)=>{const n=t-e;return 0===n?1:(r-e)/n},us=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,n="";const a=Math.max(Math.round(t/r),2);for(let s=0;s<a;s++)n+=e(ds(0,a-1,s))+", ";return"linear(".concat(n.substring(0,n.length-2),")")};function hs(e){return Boolean("function"===typeof e&&cs()||!e||"string"===typeof e&&(e in ps||cs())||is(e)||Array.isArray(e)&&e.every(hs))}const ms=e=>{let[t,r,n,a]=e;return"cubic-bezier(".concat(t,", ").concat(r,", ").concat(n,", ").concat(a,")")},ps={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ms([0,.65,.55,1]),circOut:ms([.55,0,1,.45]),backIn:ms([.31,.01,.66,-.59]),backOut:ms([.33,1.53,.69,.99])};function fs(e,t){return e?"function"===typeof e&&cs()?us(e,t):is(e)?ms(e):Array.isArray(e)?e.map(e=>fs(e,t)||ps.easeOut):ps[e]:void 0}const gs={x:!1,y:!1};function xs(){return gs.x||gs.y}function ys(e,t){const r=function(e,t,r){var n;if(e instanceof Element)return[e];if("string"===typeof e){let a=document;t&&(a=t.current);const s=null!==(n=null===r||void 0===r?void 0:r[e])&&void 0!==n?n:a.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}(e),n=new AbortController;return[r,Be(Be({passive:!0},t),{},{signal:n.signal}),()=>n.abort()]}function vs(e){return t=>{"touch"===t.pointerType||xs()||e(t)}}const bs=(e,t)=>!!t&&(e===t||bs(e,t.parentElement)),js=e=>"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary,ws=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const Ns=new WeakSet;function _s(e){return t=>{"Enter"===t.key&&e(t)}}function ks(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function Ss(e){return js(e)&&!xs()}function As(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[n,a,s]=ys(e,r),i=e=>{const n=e.currentTarget;if(!Ss(e)||Ns.has(n))return;Ns.add(n);const s=t(e),i=(e,t)=>{window.removeEventListener("pointerup",o),window.removeEventListener("pointercancel",l),Ss(e)&&Ns.has(n)&&(Ns.delete(n),"function"===typeof s&&s(e,{success:t}))},o=e=>{i(e,r.useGlobalTarget||bs(n,e.target))},l=e=>{i(e,!1)};window.addEventListener("pointerup",o,a),window.addEventListener("pointercancel",l,a)};return n.forEach(e=>{(function(e){return ws.has(e.tagName)||-1!==e.tabIndex})(e)||null!==e.getAttribute("tabindex")||(e.tabIndex=0);(r.useGlobalTarget?window:e).addEventListener("pointerdown",i,a),e.addEventListener("focus",e=>((e,t)=>{const r=e.currentTarget;if(!r)return;const n=_s(()=>{if(Ns.has(r))return;ks(r,"down");const e=_s(()=>{ks(r,"up")});r.addEventListener("keyup",e,t),r.addEventListener("blur",()=>ks(r,"cancel"),t)});r.addEventListener("keydown",n,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),t)})(e,a),a)}),s}const Cs=e=>1e3*e,Es=e=>e/1e3,Ts=e=>e;const Ps=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Os=new Set(Ps),Ds=new Set(["width","height","top","left","right","bottom",...Ps]),Is=e=>Wa(e)?e[e.length-1]||0:e,Ls=!1,Ms=!1;const Rs=["read","resolveKeyframes","update","preRender","render","postRender"];function Fs(e,t){let r=!1,n=!0;const a={delta:0,timestamp:0,isProcessing:!1},s=()=>r=!0,i=Rs.reduce((e,t)=>(e[t]=function(e){let t=new Set,r=new Set,n=!1,a=!1;const s=new WeakSet;let i={delta:0,timestamp:0,isProcessing:!1};function o(t){s.has(t)&&(l.schedule(t),e()),t(i)}const l={schedule:function(e){const a=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&n?t:r;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&s.add(e),a.has(e)||a.add(e),e},cancel:e=>{r.delete(e),s.delete(e)},process:e=>{i=e,n?a=!0:(n=!0,[t,r]=[r,t],t.forEach(o),t.clear(),n=!1,a&&(a=!1,l.process(e)))}};return l}(s),e),{}),{read:o,resolveKeyframes:l,update:c,preRender:d,render:u,postRender:h}=i,m=()=>{const s=Ms?a.timestamp:performance.now();r=!1,a.delta=n?1e3/60:Math.max(Math.min(s-a.timestamp,40),1),a.timestamp=s,a.isProcessing=!0,o.process(a),l.process(a),c.process(a),d.process(a),u.process(a),h.process(a),a.isProcessing=!1,r&&t&&(n=!1,e(m))},p=Rs.reduce((t,s)=>{const o=i[s];return t[s]=function(t){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return r||(r=!0,n=!0,a.isProcessing||e(m)),o.schedule(t,s,i)},t},{});return{schedule:p,cancel:e=>{for(let t=0;t<Rs.length;t++)i[Rs[t]].cancel(e)},state:a,steps:i}}const{schedule:Bs,cancel:zs,state:Us,steps:qs}=Fs("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:Ts,!0);let Ws;function Vs(){Ws=void 0}const Hs={now:()=>(void 0===Ws&&Hs.set(Us.isProcessing||Ms?Us.timestamp:performance.now()),Ws),set:e=>{Ws=e,queueMicrotask(Vs)}};function Gs(e,t){-1===e.indexOf(t)&&e.push(t)}function Ks(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}class Ys{constructor(){this.subscriptions=[]}add(e){return Gs(this.subscriptions,e),()=>Ks(this.subscriptions,e)}notify(e,t,r){const n=this.subscriptions.length;if(n)if(1===n)this.subscriptions[0](e,t,r);else for(let a=0;a<n;a++){const n=this.subscriptions[a];n&&n(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function Xs(e,t){return t?e*(1e3/t):0}const Qs={current:void 0};class $s{constructor(e){var t=this;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=function(e){let r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=Hs.now();t.updatedAt!==n&&t.setPrevFrameValue(),t.prev=t.current,t.setCurrent(e),t.current!==t.prev&&t.events.change&&t.events.change.notify(t.current),r&&t.events.renderRequest&&t.events.renderRequest.notify(t.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=r.owner}setCurrent(e){this.current=e,this.updatedAt=Hs.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(e=>!isNaN(parseFloat(e)))(this.current))}setPrevFrameValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current;this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Ys);const r=this.events[e].add(t);return"change"===e?()=>{r(),Bs.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return Qs.current&&Qs.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=Hs.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return Xs(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Js(e,t){return new $s(e,t)}const Zs=["transitionEnd","transition"];function ei(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,Js(r))}const ti=e=>Boolean(e&&e.getVelocity);function ri(e,t){const r=e.getValue("willChange");if(function(e){return Boolean(ti(e)&&e.add)}(r))return r.add(t)}const ni=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),ai="data-"+ni("framerAppearId");function si(e){return e.props[ai]}const ii=!1,oi=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e;function li(e,t,r,n){if(e===t&&r===n)return Ts;const a=t=>function(e,t,r,n,a){let s,i,o=0;do{i=t+(r-t)/2,s=oi(i,n,a)-e,s>0?r=i:t=i}while(Math.abs(s)>1e-7&&++o<12);return i}(t,0,1,e,r);return e=>0===e||1===e?e:oi(a(e),t,n)}const ci=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,di=e=>t=>1-e(1-t),ui=li(.33,1.53,.69,.99),hi=di(ui),mi=ci(hi),pi=e=>(e*=2)<1?.5*hi(e):.5*(2-Math.pow(2,-10*(e-1))),fi=e=>1-Math.sin(Math.acos(e)),gi=di(fi),xi=ci(fi),yi=e=>/^0(?:[\0-\x08\x0E-\x1F!-\x2D\/-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+$/.test(e);function vi(e){return"number"===typeof e?0===e:null===e||("none"===e||"0"===e||yi(e))}const bi=(e,t,r)=>r>t?t:r<e?e:r,ji={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},wi=Be(Be({},ji),{},{transform:e=>bi(0,1,e)}),Ni=Be(Be({},ji),{},{default:1}),_i=e=>Math.round(1e5*e)/1e5,ki=/-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)/g;const Si=/^(?:#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\))$/i,Ai=(e,t)=>r=>Boolean("string"===typeof r&&Si.test(r)&&r.startsWith(e)||t&&!function(e){return null==e}(r)&&Object.prototype.hasOwnProperty.call(r,t)),Ci=(e,t,r)=>n=>{if("string"!==typeof n)return n;const[a,s,i,o]=n.match(ki);return{[e]:parseFloat(a),[t]:parseFloat(s),[r]:parseFloat(i),alpha:void 0!==o?parseFloat(o):1}},Ei=Be(Be({},ji),{},{transform:e=>Math.round((e=>bi(0,255,e))(e))}),Ti={test:Ai("rgb","red"),parse:Ci("red","green","blue"),transform:e=>{let{red:t,green:r,blue:n,alpha:a=1}=e;return"rgba("+Ei.transform(t)+", "+Ei.transform(r)+", "+Ei.transform(n)+", "+_i(wi.transform(a))+")"}};const Pi={test:Ai("#"),parse:function(e){let t="",r="",n="",a="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),a=e.substring(4,5),t+=t,r+=r,n+=n,a+=a),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:a?parseInt(a,16)/255:1}},transform:Ti.transform},Oi=e=>({test:t=>"string"===typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>"".concat(t).concat(e)}),Di=Oi("deg"),Ii=Oi("%"),Li=Oi("px"),Mi=Oi("vh"),Ri=Oi("vw"),Fi=Be(Be({},Ii),{},{parse:e=>Ii.parse(e)/100,transform:e=>Ii.transform(100*e)}),Bi={test:Ai("hsl","hue"),parse:Ci("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:r,lightness:n,alpha:a=1}=e;return"hsla("+Math.round(t)+", "+Ii.transform(_i(r))+", "+Ii.transform(_i(n))+", "+_i(wi.transform(a))+")"}},zi={test:e=>Ti.test(e)||Pi.test(e)||Bi.test(e),parse:e=>Ti.test(e)?Ti.parse(e):Bi.test(e)?Bi.parse(e):Pi.parse(e),transform:e=>"string"===typeof e?e:e.hasOwnProperty("red")?Ti.transform(e):Bi.transform(e)},Ui=/(?:#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\))/gi;const qi="number",Wi="color",Vi=/var[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*--(?:[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,(?:[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(?![\t-\r \(\)\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\((?:(?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|\((?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])*\))*\))+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)\)|#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\)|-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)/gi;function Hi(e){const t=e.toString(),r=[],n={color:[],number:[],var:[]},a=[];let s=0;const i=t.replace(Vi,e=>(zi.test(e)?(n.color.push(s),a.push(Wi),r.push(zi.parse(e))):e.startsWith("var(")?(n.var.push(s),a.push("var"),r.push(e)):(n.number.push(s),a.push(qi),r.push(parseFloat(e))),++s,"${}")).split("${}");return{values:r,split:i,indexes:n,types:a}}function Gi(e){return Hi(e).values}function Ki(e){const{split:t,types:r}=Hi(e),n=t.length;return e=>{let a="";for(let s=0;s<n;s++)if(a+=t[s],void 0!==e[s]){const t=r[s];a+=t===qi?_i(e[s]):t===Wi?zi.transform(e[s]):e[s]}return a}}const Yi=e=>"number"===typeof e?0:e;const Xi={test:function(e){var t,r;return isNaN(e)&&"string"===typeof e&&((null===(t=e.match(ki))||void 0===t?void 0:t.length)||0)+((null===(r=e.match(Ui))||void 0===r?void 0:r.length)||0)>0},parse:Gi,createTransformer:Ki,getAnimatableNone:function(e){const t=Gi(e);return Ki(e)(t.map(Yi))}},Qi=new Set(["brightness","contrast","saturate","opacity"]);function $i(e){const[t,r]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[n]=r.match(ki)||[];if(!n)return e;const a=r.replace(n,"");let s=Qi.has(t)?1:0;return n!==r&&(s*=100),t+"("+s+a+")"}const Ji=/\b([\x2Da-z]*)\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\)/g,Zi=Be(Be({},Xi),{},{getAnimatableNone:e=>{const t=e.match(Ji);return t?t.map($i).join(" "):e}}),eo={borderWidth:Li,borderTopWidth:Li,borderRightWidth:Li,borderBottomWidth:Li,borderLeftWidth:Li,borderRadius:Li,radius:Li,borderTopLeftRadius:Li,borderTopRightRadius:Li,borderBottomRightRadius:Li,borderBottomLeftRadius:Li,width:Li,maxWidth:Li,height:Li,maxHeight:Li,top:Li,right:Li,bottom:Li,left:Li,padding:Li,paddingTop:Li,paddingRight:Li,paddingBottom:Li,paddingLeft:Li,margin:Li,marginTop:Li,marginRight:Li,marginBottom:Li,marginLeft:Li,backgroundPositionX:Li,backgroundPositionY:Li},to={rotate:Di,rotateX:Di,rotateY:Di,rotateZ:Di,scale:Ni,scaleX:Ni,scaleY:Ni,scaleZ:Ni,skew:Di,skewX:Di,skewY:Di,distance:Li,translateX:Li,translateY:Li,translateZ:Li,x:Li,y:Li,z:Li,perspective:Li,transformPerspective:Li,opacity:wi,originX:Fi,originY:Fi,originZ:Li},ro=Be(Be({},ji),{},{transform:Math.round}),no=Be(Be(Be({},eo),to),{},{zIndex:ro,size:Li,fillOpacity:wi,strokeOpacity:wi,numOctaves:ro}),ao=Be(Be({},no),{},{color:zi,backgroundColor:zi,outlineColor:zi,fill:zi,stroke:zi,borderColor:zi,borderTopColor:zi,borderRightColor:zi,borderBottomColor:zi,borderLeftColor:zi,filter:Zi,WebkitFilter:Zi}),so=e=>ao[e];function io(e,t){let r=so(e);return r!==Zi&&(r=Xi),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const oo=new Set(["auto","none","0"]);const lo=e=>e===ji||e===Li,co=(e,t)=>parseFloat(e.split(", ")[t]),uo=(e,t)=>(r,n)=>{let{transform:a}=n;if("none"===a||!a)return 0;const s=a.match(/^matrix3d\(((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)\)$/);if(s)return co(s[1],t);{const t=a.match(/^matrix\(((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)\)$/);return t?co(t[1],e):0}},ho=new Set(["x","y","z"]),mo=Ps.filter(e=>!ho.has(e));const po={width:(e,t)=>{let{x:r}=e,{paddingLeft:n="0",paddingRight:a="0"}=t;return r.max-r.min-parseFloat(n)-parseFloat(a)},height:(e,t)=>{let{y:r}=e,{paddingTop:n="0",paddingBottom:a="0"}=t;return r.max-r.min-parseFloat(n)-parseFloat(a)},top:(e,t)=>{let{top:r}=t;return parseFloat(r)},left:(e,t)=>{let{left:r}=t;return parseFloat(r)},bottom:(e,t)=>{let{y:r}=e,{top:n}=t;return parseFloat(n)+(r.max-r.min)},right:(e,t)=>{let{x:r}=e,{left:n}=t;return parseFloat(n)+(r.max-r.min)},x:uo(4,13),y:uo(5,14)};po.translateX=po.x,po.translateY=po.y;const fo=new Set;let go=!1,xo=!1;function yo(){if(xo){const e=Array.from(fo).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),r=new Map;t.forEach(e=>{const t=function(e){const t=[];return mo.forEach(r=>{const n=e.getValue(r);void 0!==n&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t}(e);t.length&&(r.set(e,t),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();const t=r.get(e);t&&t.forEach(t=>{let[r,n]=t;var a;null===(a=e.getValue(r))||void 0===a||a.set(n)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}xo=!1,go=!1,fo.forEach(e=>e.complete()),fo.clear()}function vo(){fo.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(xo=!0)})}class bo{constructor(e,t,r,n,a){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=n,this.element=a,this.isAsync=s}scheduleResolve(){this.isScheduled=!0,this.isAsync?(fo.add(this),go||(go=!0,Bs.read(vo),Bs.resolveKeyframes(yo))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:n}=this;for(let a=0;a<e.length;a++)if(null===e[a])if(0===a){const a=null===n||void 0===n?void 0:n.get(),s=e[e.length-1];if(void 0!==a)e[0]=a;else if(r&&t){const n=r.readValue(t,s);void 0!==n&&null!==n&&(e[0]=n)}void 0===e[0]&&(e[0]=s),n&&void 0===a&&n.set(e[0])}else e[a]=e[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),fo.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,fo.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}let jo=Ts,wo=Ts;const No=e=>/^-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)$/.test(e),_o=e=>t=>"string"===typeof t&&t.startsWith(e),ko=_o("--"),So=_o("var(--"),Ao=e=>!!So(e)&&Co.test(e.split("/*")[0].trim()),Co=/var\(--(?:[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,(?:[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(?![\t-\r \(\)\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\((?:(?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|\((?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])*\))*\))+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)\)$/i,Eo=/^var\(--(?:([\x2D0-9A-Z_a-z]+)|([\x2D0-9A-Z_a-z]+), ?([ #%\(\),-\.0-9A-Za-z]+))\)/;function To(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;wo(r<=4,'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.'));const[n,a]=function(e){const t=Eo.exec(e);if(!t)return[,];const[,r,n,a]=t;return["--".concat(null!==r&&void 0!==r?r:n),a]}(e);if(!n)return;const s=window.getComputedStyle(t).getPropertyValue(n);if(s){const e=s.trim();return No(e)?parseFloat(e):e}return Ao(a)?To(a,t,r+1):a}const Po=e=>t=>t.test(e),Oo=[ji,Li,Ii,Di,Ri,Mi,{test:e=>"auto"===e,parse:e=>e}],Do=e=>Oo.find(Po(e));class Io extends bo{constructor(e,t,r,n,a){super(e,t,r,n,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let o=0;o<e.length;o++){let r=e[o];if("string"===typeof r&&(r=r.trim(),Ao(r))){const n=To(r,t.current);void 0!==n&&(e[o]=n),o===e.length-1&&(this.finalKeyframe=r)}}if(this.resolveNoneKeyframes(),!Ds.has(r)||2!==e.length)return;const[n,a]=e,s=Do(n),i=Do(a);if(s!==i)if(lo(s)&&lo(i))for(let o=0;o<e.length;o++){const t=e[o];"string"===typeof t&&(e[o]=parseFloat(t))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let n=0;n<e.length;n++)vi(e[n])&&r.push(n);r.length&&function(e,t,r){let n,a=0;for(;a<e.length&&!n;){const t=e[a];"string"===typeof t&&!oo.has(t)&&Hi(t).values.length&&(n=e[a]),a++}if(n&&r)for(const s of t)e[s]=io(r,n)}(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;"height"===r&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=po[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const n=t[t.length-1];void 0!==n&&e.getValue(r,n).jump(n,!1)}measureEndState(){var e;const{element:t,name:r,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const a=t.getValue(r);a&&a.jump(this.measuredOrigin,!1);const s=n.length-1,i=n[s];n[s]=po[r](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==i&&void 0===this.finalKeyframe&&(this.finalKeyframe=i),(null===(e=this.removedTransforms)||void 0===e?void 0:e.length)&&this.removedTransforms.forEach(e=>{let[r,n]=e;t.getValue(r).set(n)}),this.resolveNoneKeyframes()}}const Lo=(e,t)=>"zIndex"!==t&&(!("number"!==typeof e&&!Array.isArray(e))||!("string"!==typeof e||!Xi.test(e)&&"0"!==e||e.startsWith("url(")));function Mo(e,t,r,n){const a=e[0];if(null===a)return!1;if("display"===t||"visibility"===t)return!0;const s=e[e.length-1],i=Lo(a,t),o=Lo(s,t);return jo(i===o,"You are trying to animate ".concat(t,' from "').concat(a,'" to "').concat(s,'". ').concat(a," is not an animatable value - to enable this animation set ").concat(a," to a value animatable to ").concat(s," via the `style` property.")),!(!i||!o)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}(e)||("spring"===r||as(r))&&n)}const Ro=e=>null!==e;function Fo(e,t,r){let{repeat:n,repeatType:a="loop"}=t;const s=e.filter(Ro),i=n&&"loop"!==a&&n%2===1?0:s.length-1;return i&&void 0!==r?r:s[i]}const Bo=["autoplay","delay","type","repeat","repeatDelay","repeatType"];class zo{constructor(e){let{autoplay:t=!0,delay:r=0,type:n="keyframes",repeat:a=0,repeatDelay:s=0,repeatType:i="loop"}=e,o=qa(e,Bo);this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Hs.now(),this.options=Be({autoplay:t,delay:r,type:n,repeat:a,repeatDelay:s,repeatType:i},o),this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt}get resolved(){return this._resolved||this.hasAttemptedResolve||(vo(),yo()),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=Hs.now(),this.hasAttemptedResolve=!0;const{name:r,type:n,velocity:a,delay:s,onComplete:i,onUpdate:o,isGenerator:l}=this.options;if(!l&&!Mo(e,r,n,a)){if(ii||!s)return o&&o(Fo(e,this.options,t)),i&&i(),void this.resolveFinishedPromise();this.options.duration=0}const c=this.initPlayback(e,t);!1!==c&&(this._resolved=Be({keyframes:e,finalKeyframe:t},c),this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Uo=(e,t,r)=>e+(t-e)*r;function qo(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function Wo(e,t){return r=>r>0?t:e}const Vo=(e,t,r)=>{const n=e*e,a=r*(t*t-n)+n;return a<0?0:Math.sqrt(a)},Ho=[Pi,Ti,Bi];function Go(e){const t=(e=>Ho.find(t=>t.test(e)))(e);if(jo(Boolean(t),"'".concat(e,"' is not an animatable color. Use the equivalent color code instead.")),!Boolean(t))return!1;let r=t.parse(e);return t===Bi&&(r=function(e){let{hue:t,saturation:r,lightness:n,alpha:a}=e;t/=360,r/=100,n/=100;let s=0,i=0,o=0;if(r){const e=n<.5?n*(1+r):n+r-n*r,a=2*n-e;s=qo(a,e,t+1/3),i=qo(a,e,t),o=qo(a,e,t-1/3)}else s=i=o=n;return{red:Math.round(255*s),green:Math.round(255*i),blue:Math.round(255*o),alpha:a}}(r)),r}const Ko=(e,t)=>{const r=Go(e),n=Go(t);if(!r||!n)return Wo(e,t);const a=Be({},r);return e=>(a.red=Vo(r.red,n.red,e),a.green=Vo(r.green,n.green,e),a.blue=Vo(r.blue,n.blue,e),a.alpha=Uo(r.alpha,n.alpha,e),Ti.transform(a))},Yo=(e,t)=>r=>t(e(r)),Xo=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(Yo)},Qo=new Set(["none","hidden"]);function $o(e,t){return r=>Uo(e,t,r)}function Jo(e){return"number"===typeof e?$o:"string"===typeof e?Ao(e)?Wo:zi.test(e)?Ko:tl:Array.isArray(e)?Zo:"object"===typeof e?zi.test(e)?Ko:el:Wo}function Zo(e,t){const r=[...e],n=r.length,a=e.map((e,r)=>Jo(e)(e,t[r]));return e=>{for(let t=0;t<n;t++)r[t]=a[t](e);return r}}function el(e,t){const r=Be(Be({},e),t),n={};for(const a in r)void 0!==e[a]&&void 0!==t[a]&&(n[a]=Jo(e[a])(e[a],t[a]));return e=>{for(const t in n)r[t]=n[t](e);return r}}const tl=(e,t)=>{const r=Xi.createTransformer(t),n=Hi(e),a=Hi(t);return n.indexes.var.length===a.indexes.var.length&&n.indexes.color.length===a.indexes.color.length&&n.indexes.number.length>=a.indexes.number.length?Qo.has(e)&&!a.values.length||Qo.has(t)&&!n.values.length?function(e,t){return Qo.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}(e,t):Xo(Zo(function(e,t){var r;const n=[],a={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const i=t.types[s],o=e.indexes[i][a[i]],l=null!==(r=e.values[o])&&void 0!==r?r:0;n[s]=l,a[i]++}return n}(n,a),a.values),r):(jo(!0,"Complex values '".concat(e,"' and '").concat(t,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.")),Wo(e,t))};function rl(e,t,r){if("number"===typeof e&&"number"===typeof t&&"number"===typeof r)return Uo(e,t,r);return Jo(e)(e,t)}function nl(e,t,r){const n=Math.max(t-5,0);return Xs(r-e(n),t-n)}const al={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},sl=.001;function il(e){let t,r,{duration:n=al.duration,bounce:a=al.bounce,velocity:s=al.velocity,mass:i=al.mass}=e;jo(n<=Cs(al.maxDuration),"Spring duration must be 10 seconds or less");let o=1-a;o=bi(al.minDamping,al.maxDamping,o),n=bi(al.minDuration,al.maxDuration,Es(n)),o<1?(t=e=>{const t=e*o,r=t*n,a=t-s,i=ll(e,o),l=Math.exp(-r);return sl-a/i*l},r=e=>{const r=e*o*n,a=r*s+s,i=Math.pow(o,2)*Math.pow(e,2)*n,l=Math.exp(-r),c=ll(Math.pow(e,2),o);return(-t(e)+sl>0?-1:1)*((a-i)*l)/c}):(t=e=>Math.exp(-e*n)*((e-s)*n+1)-.001,r=e=>Math.exp(-e*n)*(n*n*(s-e)));const l=function(e,t,r){let n=r;for(let a=1;a<ol;a++)n-=e(n)/t(n);return n}(t,r,5/n);if(n=Cs(n),isNaN(l))return{stiffness:al.stiffness,damping:al.damping,duration:n};{const e=Math.pow(l,2)*i;return{stiffness:e,damping:2*o*Math.sqrt(i*e),duration:n}}}const ol=12;function ll(e,t){return e*Math.sqrt(1-t*t)}const cl=["duration","bounce"],dl=["stiffness","damping","mass"];function ul(e,t){return t.some(t=>void 0!==e[t])}function hl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:al.visualDuration,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:al.bounce;const r="object"!==typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:a}=r;const s=r.keyframes[0],i=r.keyframes[r.keyframes.length-1],o={done:!1,value:s},{stiffness:l,damping:c,mass:d,duration:u,velocity:h,isResolvedFromDuration:m}=function(e){let t=Be({velocity:al.velocity,stiffness:al.stiffness,damping:al.damping,mass:al.mass,isResolvedFromDuration:!1},e);if(!ul(e,dl)&&ul(e,cl))if(e.visualDuration){const r=e.visualDuration,n=2*Math.PI/(1.2*r),a=n*n,s=2*bi(.05,1,1-(e.bounce||0))*Math.sqrt(a);t=Be(Be({},t),{},{mass:al.mass,stiffness:a,damping:s})}else{const r=il(e);t=Be(Be(Be({},t),r),{},{mass:al.mass}),t.isResolvedFromDuration=!0}return t}(Be(Be({},r),{},{velocity:-Es(r.velocity||0)})),p=h||0,f=c/(2*Math.sqrt(l*d)),g=i-s,x=Es(Math.sqrt(l/d)),y=Math.abs(g)<5;let v;if(n||(n=y?al.restSpeed.granular:al.restSpeed.default),a||(a=y?al.restDelta.granular:al.restDelta.default),f<1){const e=ll(x,f);v=t=>{const r=Math.exp(-f*x*t);return i-r*((p+f*x*g)/e*Math.sin(e*t)+g*Math.cos(e*t))}}else if(1===f)v=e=>i-Math.exp(-x*e)*(g+(p+x*g)*e);else{const e=x*Math.sqrt(f*f-1);v=t=>{const r=Math.exp(-f*x*t),n=Math.min(e*t,300);return i-r*((p+f*x*g)*Math.sinh(n)+e*g*Math.cosh(n))/e}}const b={calculatedDuration:m&&u||null,next:e=>{const t=v(e);if(m)o.done=e>=u;else{let r=0;f<1&&(r=0===e?Cs(p):nl(v,e,t));const s=Math.abs(r)<=n,l=Math.abs(i-t)<=a;o.done=s&&l}return o.value=o.done?i:t,o},toString:()=>{const e=Math.min(ns(b),rs),t=us(t=>b.next(e*t).value,e,30);return e+"ms "+t}};return b}function ml(e){let{keyframes:t,velocity:r=0,power:n=.8,timeConstant:a=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:u}=e;const h=t[0],m={done:!1,value:h},p=e=>void 0===l?c:void 0===c||Math.abs(l-e)<Math.abs(c-e)?l:c;let f=n*r;const g=h+f,x=void 0===o?g:o(g);x!==g&&(f=x-h);const y=e=>-f*Math.exp(-e/a),v=e=>x+y(e),b=e=>{const t=y(e),r=v(e);m.done=Math.abs(t)<=d,m.value=m.done?x:r};let j,w;const N=e=>{(e=>void 0!==l&&e<l||void 0!==c&&e>c)(m.value)&&(j=e,w=hl({keyframes:[m.value,p(m.value)],velocity:nl(v,e,m.value),damping:s,stiffness:i,restDelta:d,restSpeed:u}))};return N(0),{calculatedDuration:null,next:e=>{let t=!1;return w||void 0!==j||(t=!0,b(e),N(e)),void 0!==j&&e>=j?w.next(e-j):(!t&&b(e),m)}}}const pl=li(.42,0,1,1),fl=li(0,0,.58,1),gl=li(.42,0,.58,1),xl={linear:Ts,easeIn:pl,easeInOut:gl,easeOut:fl,circIn:fi,circInOut:xi,circOut:gi,backIn:hi,backInOut:mi,backOut:ui,anticipate:pi},yl=e=>{if(is(e)){wo(4===e.length,"Cubic bezier arrays must contain four numerical values.");const[t,r,n,a]=e;return li(t,r,n,a)}return"string"===typeof e?(wo(void 0!==xl[e],"Invalid easing type '".concat(e,"'")),xl[e]):e};function vl(e,t){let{clamp:r=!0,ease:n,mixer:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=e.length;if(wo(s===t.length,"Both input and output ranges must be the same length"),1===s)return()=>t[0];if(2===s&&t[0]===t[1])return()=>t[1];const i=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=function(e,t,r){const n=[],a=r||rl,s=e.length-1;for(let i=0;i<s;i++){let r=a(e[i],e[i+1]);if(t){const e=Array.isArray(t)?t[i]||Ts:t;r=Xo(e,r)}n.push(r)}return n}(t,n,a),l=o.length,c=r=>{if(i&&r<e[0])return t[0];let n=0;if(l>1)for(;n<e.length-2&&!(r<e[n+1]);n++);const a=ds(e[n],e[n+1],r);return o[n](a)};return r?t=>c(bi(e[0],e[s-1],t)):c}function bl(e){const t=[0];return function(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const a=ds(0,t,n);e.push(Uo(r,1,a))}}(t,e.length-1),t}function jl(e){let{duration:t=300,keyframes:r,times:n,ease:a="easeInOut"}=e;const s=(e=>Array.isArray(e)&&"number"!==typeof e[0])(a)?a.map(yl):yl(a),i={done:!1,value:r[0]},o=function(e,t){return e.map(e=>e*t)}(n&&n.length===r.length?n:bl(r),t),l=vl(o,r,{ease:Array.isArray(s)?s:(c=r,d=s,c.map(()=>d||gl).splice(0,c.length-1))});var c,d;return{calculatedDuration:t,next:e=>(i.value=l(e),i.done=e>=t,i)}}const wl=e=>{const t=t=>{let{timestamp:r}=t;return e(r)};return{start:()=>Bs.update(t,!0),stop:()=>zs(t),now:()=>Us.isProcessing?Us.timestamp:Hs.now()}},Nl={decay:ml,inertia:ml,tween:jl,keyframes:jl,spring:hl},_l=e=>e/100;class kl extends zo{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.teardown();const{onStop:e}=this.options;e&&e()};const{name:t,motionValue:r,element:n,keyframes:a}=this.options,s=(null===n||void 0===n?void 0:n.KeyframeResolver)||bo;this.resolver=new s(a,(e,t)=>this.onKeyframesResolved(e,t),t,r,n),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:r=0,repeatDelay:n=0,repeatType:a,velocity:s=0}=this.options,i=as(t)?t:Nl[t]||jl;let o,l;i!==jl&&"number"!==typeof e[0]&&(o=Xo(_l,rl(e[0],e[1])),e=[0,100]);const c=i(Be(Be({},this.options),{},{keyframes:e}));"mirror"===a&&(l=i(Be(Be({},this.options),{},{keyframes:[...e].reverse(),velocity:-s}))),null===c.calculatedDuration&&(c.calculatedDuration=ns(c));const{calculatedDuration:d}=c,u=d+n;return{generator:c,mirroredGenerator:l,mapPercentToKeyframes:o,calculatedDuration:d,resolvedDuration:u,totalDuration:u*(r+1)-n}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),"paused"!==this.pendingPlayState&&e?this.state=this.pendingPlayState:this.pause()}tick(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{resolved:r}=this;if(!r){const{keyframes:e}=this.options;return{done:!0,value:e[e.length-1]}}const{finalKeyframe:n,generator:a,mirroredGenerator:s,mapPercentToKeyframes:i,keyframes:o,calculatedDuration:l,totalDuration:c,resolvedDuration:d}=r;if(null===this.startTime)return a.next(0);const{delay:u,repeat:h,repeatType:m,repeatDelay:p,onUpdate:f}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-c/this.speed,this.startTime)),t?this.currentTime=e:null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const g=this.currentTime-u*(this.speed>=0?1:-1),x=this.speed>=0?g<0:g>c;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=c);let y=this.currentTime,v=a;if(h){const e=Math.min(this.currentTime,c)/d;let t=Math.floor(e),r=e%1;!r&&e>=1&&(r=1),1===r&&t--,t=Math.min(t,h+1);Boolean(t%2)&&("reverse"===m?(r=1-r,p&&(r-=p/d)):"mirror"===m&&(v=s)),y=bi(0,1,r)*d}const b=x?{done:!1,value:o[0]}:v.next(y);i&&(b.value=i(b.value));let{done:j}=b;x||null===l||(j=this.speed>=0?this.currentTime>=c:this.currentTime<=0);const w=null===this.holdTime&&("finished"===this.state||"running"===this.state&&j);return w&&void 0!==n&&(b.value=Fo(o,this.options,n)),f&&f(b.value),w&&this.finish(),b}get duration(){const{resolved:e}=this;return e?Es(e.calculatedDuration):0}get time(){return Es(this.currentTime)}set time(e){e=Cs(e),this.currentTime=e,null!==this.holdTime||0===this.speed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Es(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved)return void(this.pendingPlayState="running");if(this.isStopped)return;const{driver:e=wl,onPlay:t,startTime:r}=this.options;this.driver||(this.driver=e(e=>this.tick(e))),t&&t();const n=this.driver.now();null!==this.holdTime?this.startTime=n-this.holdTime:this.startTime?"finished"===this.state&&(this.startTime=n):this.startTime=null!==r&&void 0!==r?r:this.calcStartTime(),"finished"===this.state&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;this._resolved?(this.state="paused",this.holdTime=null!==(e=this.currentTime)&&void 0!==e?e:0):this.pendingPlayState="paused"}complete(){"running"!==this.state&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){null!==this.cancelTime&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const Sl=new Set(["opacity","clipPath","filter","transform"]);const Al=$a(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Cl=["onComplete","onUpdate","motionValue","element"],El=["motionValue","onUpdate","onComplete","element"];const Tl={anticipate:pi,backInOut:mi,circInOut:xi};class Pl extends zo{constructor(e){super(e);const{name:t,motionValue:r,element:n,keyframes:a}=this.options;this.resolver=new Io(a,(e,t)=>this.onKeyframesResolved(e,t),t,r,n),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:r=300,times:n,ease:a,type:s,motionValue:i,name:o,startTime:l}=this.options;if(!i.owner||!i.owner.current)return!1;var c;if("string"===typeof a&&cs()&&a in Tl&&(a=Tl[a]),as((c=this.options).type)||"spring"===c.type||!hs(c.ease)){const t=this.options,{onComplete:i,onUpdate:o,motionValue:l,element:c}=t,d=qa(t,Cl),u=function(e,t){const r=new kl(Be(Be({},t),{},{keyframes:e,repeat:0,delay:0,isGenerator:!0}));let n={done:!1,value:e[0]};const a=[];let s=0;for(;!n.done&&s<2e4;)n=r.sample(s),a.push(n.value),s+=10;return{times:void 0,keyframes:a,duration:s-10,ease:"linear"}}(e,d);1===(e=u.keyframes).length&&(e[1]=e[0]),r=u.duration,n=u.times,a=u.ease,s="keyframes"}const d=function(e,t,r){let{delay:n=0,duration:a=300,repeat:s=0,repeatType:i="loop",ease:o="easeInOut",times:l}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const c={[t]:r};l&&(c.offset=l);const d=fs(o,a);return Array.isArray(d)&&(c.easing=d),e.animate(c,{delay:n,duration:a,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:"reverse"===i?"alternate":"normal"})}(i.owner.current,o,e,Be(Be({},this.options),{},{duration:r,times:n,ease:a}));return d.startTime=null!==l&&void 0!==l?l:this.calcStartTime(),this.pendingTimeline?(ss(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:r}=this.options;i.set(Fo(e,this.options,t)),r&&r(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:r,times:n,type:s,ease:a,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return Es(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return Es(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.currentTime=Cs(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(this._resolved){const{resolved:t}=this;if(!t)return Ts;const{animation:r}=t;ss(r,e)}else this.pendingTimeline=e;return Ts}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;"finished"===t.playState&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:r,duration:n,type:a,ease:s,times:i}=e;if("idle"===t.playState||"finished"===t.playState)return;if(this.time){const e=this.options,{motionValue:t,onUpdate:o,onComplete:l,element:c}=e,d=qa(e,El),u=new kl(Be(Be({},d),{},{keyframes:r,duration:n,type:a,ease:s,times:i,isGenerator:!0})),h=Cs(this.time);t.setWithVelocity(u.sample(h-10).value,u.sample(h).value,10)}const{onStop:o}=this.options;o&&o(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:r,repeatDelay:n,repeatType:a,damping:s,type:i}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:o,transformTemplate:l}=t.owner.getProps();return Al()&&r&&Sl.has(r)&&!o&&!l&&!n&&"mirror"!==a&&0!==s&&"inertia"!==i}}const Ol={type:"spring",stiffness:500,damping:25,restSpeed:10},Dl={type:"keyframes",duration:.8},Il={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Ll=(e,t)=>{let{keyframes:r}=t;return r.length>2?Dl:Os.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===r[1]?2*Math.sqrt(550):30,restSpeed:10}:Ol:Il},Ml=["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","elapsed"];const Rl=function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0;return i=>{const o=ts(n,e)||{},l=o.delay||n.delay||0;let{elapsed:c=0}=n;c-=Cs(l);let d=Be(Be({keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity()},o),{},{delay:-c,onUpdate:e=>{t.set(e),o.onUpdate&&o.onUpdate(e)},onComplete:()=>{i(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:s?void 0:a});(function(e){let{when:t,delay:r,delayChildren:n,staggerChildren:a,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:d}=e,u=qa(e,Ml);return!!Object.keys(u).length})(o)||(d=Be(Be({},d),Ll(e,d))),d.duration&&(d.duration=Cs(d.duration)),d.repeatDelay&&(d.repeatDelay=Cs(d.repeatDelay)),void 0!==d.from&&(d.keyframes[0]=d.from);let u=!1;if((!1===d.type||0===d.duration&&!d.repeatDelay)&&(d.duration=0,0===d.delay&&(u=!0)),(ii||Ls)&&(u=!0,d.duration=0,d.delay=0),u&&!s&&void 0!==t.get()){const e=Fo(d.keyframes,o);if(void 0!==e)return Bs.update(()=>{d.onUpdate(e),d.onComplete()}),new es([])}return!s&&Pl.supports(d)?new Pl(d):new kl(d)}},Fl=["transition","transitionEnd"];function Bl(e,t){let{protectedKeys:r,needsAnimating:n}=e;const a=r.hasOwnProperty(t)&&!0!==n[t];return n[t]=!1,a}function zl(e,t){let{delay:r=0,transitionOverride:n,type:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var s;let{transition:i=e.getDefaultTransition(),transitionEnd:o}=t,l=qa(t,Fl);n&&(i=n);const c=[],d=a&&e.animationState&&e.animationState.getState()[a];for(const u in l){const t=e.getValue(u,null!==(s=e.latestValues[u])&&void 0!==s?s:null),n=l[u];if(void 0===n||d&&Bl(d,u))continue;const a=Be({delay:r},ts(i||{},u));let o=!1;if(window.MotionHandoffAnimation){const t=si(e);if(t){const e=window.MotionHandoffAnimation(t,u,Bs);null!==e&&(a.startTime=e,o=!0)}}ri(e,u),t.start(Rl(u,t,n,e.shouldReduceMotion&&Ds.has(u)?{type:!1}:a,e,o));const h=t.animation;h&&c.push(h)}return o&&Promise.all(c).then(()=>{Bs.update(()=>{o&&function(e,t){let r=Ya(e,t)||{},{transitionEnd:n={},transition:a={}}=r,s=qa(r,Zs);s=Be(Be({},s),n);for(const i in s)ei(e,i,Is(s[i]))}(e,o)})}),c}function Ul(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var n;const a=Ya(e,t,"exit"===r.type?null===(n=e.presenceContext)||void 0===n?void 0:n.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=a||{};r.transitionOverride&&(s=r.transitionOverride);const i=a?()=>Promise.all(zl(e,a,r)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:a=0,staggerChildren:i,staggerDirection:o}=s;return function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments.length>5?arguments[5]:void 0;const i=[],o=(e.variantChildren.size-1)*n,l=1===a?function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*n}:function(){return o-(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*n};return Array.from(e.variantChildren).sort(ql).forEach((e,n)=>{e.notify("AnimationStart",t),i.push(Ul(e,t,Be(Be({},s),{},{delay:r+l(n)})).then(()=>e.notify("AnimationComplete",t)))}),Promise.all(i)}(e,t,a+n,i,o,r)}:()=>Promise.resolve(),{when:l}=s;if(l){const[e,t]="beforeChildren"===l?[i,o]:[o,i];return e().then(()=>t())}return Promise.all([i(),o(r.delay)])}function ql(e,t){return e.sortNodePosition(t)}const Wl=Qa.length;function Vl(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&Vl(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let r=0;r<Wl;r++){const n=Qa[r],a=e.props[n];(Ha(a)||!1===a)&&(t[n]=a)}return t}const Hl=["transition","transitionEnd"],Gl=[...Xa].reverse(),Kl=Xa.length;function Yl(e){return t=>Promise.all(t.map(t=>{let{animation:r,options:n}=t;return function(e,t){let r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){const a=t.map(t=>Ul(e,t,n));r=Promise.all(a)}else if("string"===typeof t)r=Ul(e,t,n);else{const a="function"===typeof t?Ya(e,t,n.custom):t;r=Promise.all(zl(e,a,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}(e,r,n)}))}function Xl(e){let t=Yl(e),r=Jl(),n=!0;const a=t=>(r,n)=>{var a;const s=Ya(e,n,"exit"===t?null===(a=e.presenceContext)||void 0===a?void 0:a.custom:void 0);if(s){const{transition:e,transitionEnd:t}=s,n=qa(s,Hl);r=Be(Be(Be({},r),n),t)}return r};function s(s){const{props:i}=e,o=Vl(e.parent)||{},l=[],c=new Set;let d={},u=1/0;for(let t=0;t<Kl;t++){const h=Gl[t],m=r[h],p=void 0!==i[h]?i[h]:o[h],f=Ha(p),g=h===s?m.isActive:null;!1===g&&(u=t);let x=p===o[h]&&p!==i[h]&&f;if(x&&n&&e.manuallyAnimateOnMount&&(x=!1),m.protectedKeys=Be({},d),!m.isActive&&null===g||!p&&!m.prevProp||Ua(p)||"boolean"===typeof p)continue;const y=Ql(m.prevProp,p);let v=y||h===s&&m.isActive&&!x&&f||t>u&&f,b=!1;const j=Array.isArray(p)?p:[p];let w=j.reduce(a(h),{});!1===g&&(w={});const{prevResolvedValues:N={}}=m,_=Be(Be({},N),w),k=t=>{v=!0,c.has(t)&&(b=!0,c.delete(t)),m.needsAnimating[t]=!0;const r=e.getValue(t);r&&(r.liveStyle=!1)};for(const e in _){const t=w[e],r=N[e];if(d.hasOwnProperty(e))continue;let n=!1;n=Wa(t)&&Wa(r)?!Va(t,r):t!==r,n?void 0!==t&&null!==t?k(e):c.add(e):void 0!==t&&c.has(e)?k(e):m.protectedKeys[e]=!0}m.prevProp=p,m.prevResolvedValues=w,m.isActive&&(d=Be(Be({},d),w)),n&&e.blockInitialAnimation&&(v=!1);v&&(!(x&&y)||b)&&l.push(...j.map(e=>({animation:e,options:{type:h}})))}if(c.size){const t={};c.forEach(r=>{const n=e.getBaseTarget(r),a=e.getValue(r);a&&(a.liveStyle=!0),t[r]=null!==n&&void 0!==n?n:null}),l.push({animation:t})}let h=Boolean(l.length);return!n||!1!==i.initial&&i.initial!==i.animate||e.manuallyAnimateOnMount||(h=!1),n=!1,h?t(l):Promise.resolve()}return{animateChanges:s,setActive:function(t,n){var a;if(r[t].isActive===n)return Promise.resolve();null===(a=e.variantChildren)||void 0===a||a.forEach(e=>{var r;return null===(r=e.animationState)||void 0===r?void 0:r.setActive(t,n)}),r[t].isActive=n;const i=s(t);for(const e in r)r[e].protectedKeys={};return i},setAnimateFunction:function(r){t=r(e)},getState:()=>r,reset:()=>{r=Jl(),n=!0}}}function Ql(e,t){return"string"===typeof t?t!==e:!!Array.isArray(t)&&!Va(t,e)}function $l(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Jl(){return{animate:$l(!0),whileInView:$l(),whileHover:$l(),whileTap:$l(),whileDrag:$l(),whileFocus:$l(),exit:$l()}}class Zl{constructor(e){this.isMounted=!1,this.node=e}update(){}}let ec=0;const tc={animation:{Feature:class extends Zl{constructor(e){super(e),e.animationState||(e.animationState=Xl(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Ua(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null===(e=this.unmountControls)||void 0===e||e.call(this)}}},exit:{Feature:class extends Zl{constructor(){super(...arguments),this.id=ec++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const n=this.node.animationState.setActive("exit",!e);t&&!e&&n.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}}};function rc(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}function nc(e){return{point:{x:e.pageX,y:e.pageY}}}function ac(e,t,r,n){return rc(e,t,(e=>t=>js(t)&&e(t,nc(t)))(r),n)}const sc=(e,t)=>Math.abs(e-t);class ic{constructor(e,t){let{transformPagePoint:r,contextWindow:n,dragSnapToOrigin:a=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=cc(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,r=function(e,t){const r=sc(e.x,t.x),n=sc(e.y,t.y);return Math.sqrt(r**2+n**2)}(e.offset,{x:0,y:0})>=3;if(!t&&!r)return;const{point:n}=e,{timestamp:a}=Us;this.history.push(Be(Be({},n),{},{timestamp:a}));const{onStart:s,onMove:i}=this.handlers;t||(s&&s(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),i&&i(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=oc(t,this.transformPagePoint),Bs.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:r,onSessionEnd:n,resumeAnimation:a}=this.handlers;if(this.dragSnapToOrigin&&a&&a(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const s=cc("pointercancel"===e.type?this.lastMoveEventInfo:oc(t,this.transformPagePoint),this.history);this.startEvent&&r&&r(e,s),n&&n(e,s)},!js(e))return;this.dragSnapToOrigin=a,this.handlers=t,this.transformPagePoint=r,this.contextWindow=n||window;const s=oc(nc(e),this.transformPagePoint),{point:i}=s,{timestamp:o}=Us;this.history=[Be(Be({},i),{},{timestamp:o})];const{onSessionStart:l}=t;l&&l(e,cc(s,this.history)),this.removeListeners=Xo(ac(this.contextWindow,"pointermove",this.handlePointerMove),ac(this.contextWindow,"pointerup",this.handlePointerUp),ac(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),zs(this.updatePoint)}}function oc(e,t){return t?{point:t(e.point)}:e}function lc(e,t){return{x:e.x-t.x,y:e.y-t.y}}function cc(e,t){let{point:r}=e;return{point:r,delta:lc(r,uc(t)),offset:lc(r,dc(t)),velocity:hc(t,.1)}}function dc(e){return e[0]}function uc(e){return e[e.length-1]}function hc(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const a=uc(e);for(;r>=0&&(n=e[r],!(a.timestamp-n.timestamp>Cs(t)));)r--;if(!n)return{x:0,y:0};const s=Es(a.timestamp-n.timestamp);if(0===s)return{x:0,y:0};const i={x:(a.x-n.x)/s,y:(a.y-n.y)/s};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function mc(e){return e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function pc(e){return e.max-e.min}function fc(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=n,e.originPoint=Uo(t.min,t.max,e.origin),e.scale=pc(r)/pc(t),e.translate=Uo(r.min,r.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function gc(e,t,r,n){fc(e.x,t.x,r.x,n?n.originX:void 0),fc(e.y,t.y,r.y,n?n.originY:void 0)}function xc(e,t,r){e.min=r.min+t.min,e.max=e.min+pc(t)}function yc(e,t,r){e.min=t.min-r.min,e.max=e.min+pc(t)}function vc(e,t,r){yc(e.x,t.x,r.x),yc(e.y,t.y,r.y)}function bc(e,t,r){return{min:void 0!==t?e.min+t:void 0,max:void 0!==r?e.max+r-(e.max-e.min):void 0}}function jc(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}const wc=.35;function Nc(e,t,r){return{min:_c(e,t),max:_c(e,r)}}function _c(e,t){return"number"===typeof e?e:e[t]||0}const kc=()=>({x:{min:0,max:0},y:{min:0,max:0}});function Sc(e){return[e("x"),e("y")]}function Ac(e){let{top:t,left:r,right:n,bottom:a}=e;return{x:{min:r,max:n},y:{min:t,max:a}}}function Cc(e){return void 0===e||1===e}function Ec(e){let{scale:t,scaleX:r,scaleY:n}=e;return!Cc(t)||!Cc(r)||!Cc(n)}function Tc(e){return Ec(e)||Pc(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Pc(e){return Oc(e.x)||Oc(e.y)}function Oc(e){return e&&"0%"!==e}function Dc(e,t,r){return r+t*(e-r)}function Ic(e,t,r,n,a){return void 0!==a&&(e=Dc(e,a,n)),Dc(e,r,n)+t}function Lc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;e.min=Ic(e.min,t,r,n,a),e.max=Ic(e.max,t,r,n,a)}function Mc(e,t){let{x:r,y:n}=t;Lc(e.x,r.translate,r.scale,r.originPoint),Lc(e.y,n.translate,n.scale,n.originPoint)}const Rc=.999999999999,Fc=1.0000000000001;function Bc(e,t){e.min=e.min+t,e.max=e.max+t}function zc(e,t,r,n){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;Lc(e,t,r,Uo(e.min,e.max,a),n)}function Uc(e,t){zc(e.x,t.x,t.scaleX,t.scale,t.originX),zc(e.y,t.y,t.scaleY,t.scale,t.originY)}function qc(e,t){return Ac(function(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}(e.getBoundingClientRect(),t))}const Wc=e=>{let{current:t}=e;return t?t.ownerDocument.defaultView:null},Vc=new WeakMap;class Hc{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=e}start(e){let{snapToCursor:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:r}=this.visualElement;if(r&&!1===r.isPresent)return;const{dragSnapToOrigin:n}=this.getProps();this.panSession=new ic(e,{onSessionStart:e=>{const{dragSnapToOrigin:r}=this.getProps();r?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(nc(e).point)},onStart:(e,t)=>{const{drag:r,dragPropagation:n,onDragStart:a}=this.getProps();if(r&&!n&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(s=r)||"y"===s?gs[s]?null:(gs[s]=!0,()=>{gs[s]=!1}):gs.x||gs.y?null:(gs.x=gs.y=!0,()=>{gs.x=gs.y=!1}),!this.openDragLock))return;var s;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Sc(e=>{let t=this.getAxisMotionValue(e).get()||0;if(Ii.test(t)){const{projection:r}=this.visualElement;if(r&&r.layout){const n=r.layout.layoutBox[e];if(n){t=pc(n)*(parseFloat(t)/100)}}}this.originPoint[e]=t}),a&&Bs.postRender(()=>a(e,t)),ri(this.visualElement,"transform");const{animationState:i}=this.visualElement;i&&i.setActive("whileDrag",!0)},onMove:(e,t)=>{const{dragPropagation:r,dragDirectionLock:n,onDirectionLock:a,onDrag:s}=this.getProps();if(!r&&!this.openDragLock)return;const{offset:i}=t;if(n&&null===this.currentDirection)return this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=null;Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x");return r}(i),void(null!==this.currentDirection&&a&&a(this.currentDirection));this.updateAxis("x",t.point,i),this.updateAxis("y",t.point,i),this.visualElement.render(),s&&s(e,t)},onSessionEnd:(e,t)=>this.stop(e,t),resumeAnimation:()=>Sc(e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:n,contextWindow:Wc(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:n}=t;this.startAnimation(n);const{onDragEnd:a}=this.getProps();a&&Bs.postRender(()=>a(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:n}=this.getProps();if(!r||!Gc(e,n,this.currentDirection))return;const a=this.getAxisMotionValue(e);let s=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(s=function(e,t,r){let{min:n,max:a}=t;return void 0!==n&&e<n?e=r?Uo(n,e,r.min):Math.max(e,n):void 0!==a&&e>a&&(e=r?Uo(a,e,r.max):Math.min(e,a)),e}(s,this.constraints[e],this.elastic[e])),a.set(s)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,a=this.constraints;t&&mc(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!n)&&function(e,t){let{top:r,left:n,bottom:a,right:s}=t;return{x:bc(e.x,n,s),y:bc(e.y,r,a)}}(n.layoutBox,t),this.elastic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wc;return!1===e?e=0:!0===e&&(e=wc),{x:Nc(e,"left","right"),y:Nc(e,"top","bottom")}}(r),a!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Sc(e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const r={};return void 0!==t.min&&(r.min=t.min-e.min),void 0!==t.max&&(r.max=t.max-e.min),r}(n.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!mc(e))return!1;const r=e.current;wo(null!==r,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");const{projection:n}=this.visualElement;if(!n||!n.layout)return!1;const a=function(e,t,r){const n=qc(e,r),{scroll:a}=t;return a&&(Bc(n.x,a.offset.x),Bc(n.y,a.offset.y)),n}(r,n.root,this.visualElement.getTransformPagePoint());let s=function(e,t){return{x:jc(e.x,t.x),y:jc(e.y,t.y)}}(n.layout.layoutBox,a);if(t){const e=t(function(e){let{x:t,y:r}=e;return{top:r.min,right:t.max,bottom:r.max,left:t.min}}(s));this.hasMutatedConstraints=!!e,e&&(s=Ac(e))}return s}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:n,dragTransition:a,dragSnapToOrigin:s,onDragTransitionEnd:i}=this.getProps(),o=this.constraints||{},l=Sc(i=>{if(!Gc(i,t,this.currentDirection))return;let l=o&&o[i]||{};s&&(l={min:0,max:0});const c=n?200:1e6,d=n?40:1e7,u=Be(Be({type:"inertia",velocity:r?e[i]:0,bounceStiffness:c,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10},a),l);return this.startAxisValueAnimation(i,u)});return Promise.all(l).then(i)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return ri(this.visualElement,e),r.start(Rl(e,r,0,t,this.visualElement,!1))}stopAnimation(){Sc(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Sc(e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()})}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){const t="_drag".concat(e.toUpperCase()),r=this.visualElement.getProps(),n=r[t];return n||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Sc(t=>{const{drag:r}=this.getProps();if(!Gc(t,r,this.currentDirection))return;const{projection:n}=this.visualElement,a=this.getAxisMotionValue(t);if(n&&n.layout){const{min:r,max:s}=n.layout.layoutBox[t];a.set(e[t]-Uo(r,s,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!mc(t)||!r||!this.constraints)return;this.stopAnimation();const n={x:0,y:0};Sc(e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const r=t.get();n[e]=function(e,t){let r=.5;const n=pc(e),a=pc(t);return a>n?r=ds(t.min,t.max-n,e.min):n>a&&(r=ds(e.min,e.max-a,t.min)),bi(0,1,r)}({min:r,max:r},this.constraints[e])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Sc(t=>{if(!Gc(t,e,null))return;const r=this.getAxisMotionValue(t),{min:a,max:s}=this.constraints[t];r.set(Uo(a,s,n[t]))})}addListeners(){if(!this.visualElement.current)return;Vc.set(this.visualElement,this);const e=ac(this.visualElement.current,"pointerdown",e=>{const{drag:t,dragListener:r=!0}=this.getProps();t&&r&&this.start(e)}),t=()=>{const{dragConstraints:e}=this.getProps();mc(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,n=r.addEventListener("measure",t);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Bs.read(t);const a=rc(window,"resize",()=>this.scalePositionWithinConstraints()),s=r.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:r}=e;this.isDragging&&r&&(Sc(e=>{const r=this.getAxisMotionValue(e);r&&(this.originPoint[e]+=t[e].translate,r.set(r.get()+t[e].translate))}),this.visualElement.render())});return()=>{a(),e(),n(),s&&s()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:n=!1,dragConstraints:a=!1,dragElastic:s=wc,dragMomentum:i=!0}=e;return Be(Be({},e),{},{drag:t,dragDirectionLock:r,dragPropagation:n,dragConstraints:a,dragElastic:s,dragMomentum:i})}}function Gc(e,t,r){return(!0===t||t===e)&&(null===r||r===e)}const Kc=e=>(t,r)=>{e&&Bs.postRender(()=>e(t,r))};const Yc=(0,a.createContext)(null);function Xc(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=(0,a.useContext)(Yc);if(null===t)return[!0,null];const{isPresent:r,onExitComplete:n,register:s}=t,i=(0,a.useId)();(0,a.useEffect)(()=>{e&&s(i)},[e]);const o=(0,a.useCallback)(()=>e&&n&&n(i),[i,n,e]);return!r&&n?[!1,o]:[!0]}const Qc=(0,a.createContext)({}),$c=(0,a.createContext)({}),Jc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Zc(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const ed={correct:(e,t)=>{if(!t.target)return e;if("string"===typeof e){if(!Li.test(e))return e;e=parseFloat(e)}const r=Zc(e,t.target.x),n=Zc(e,t.target.y);return"".concat(r,"% ").concat(n,"%")}},td={correct:(e,t)=>{let{treeScale:r,projectionDelta:n}=t;const a=e,s=Xi.parse(e);if(s.length>5)return a;const i=Xi.createTransformer(e),o="number"!==typeof s[0]?1:0,l=n.x.scale*r.x,c=n.y.scale*r.y;s[0+o]/=l,s[1+o]/=c;const d=Uo(l,c,.5);return"number"===typeof s[2+o]&&(s[2+o]/=d),"number"===typeof s[3+o]&&(s[3+o]/=d),i(s)}},rd={};const{schedule:nd,cancel:ad}=Fs(queueMicrotask,!1);class sd extends a.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:n}=this.props,{projection:a}=e;var s;s=od,Object.assign(rd,s),a&&(t.group&&t.group.add(a),r&&r.register&&n&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions(Be(Be({},a.options),{},{onExitComplete:()=>this.safeToRemove()}))),Jc.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:n,isPresent:a}=this.props,s=r.projection;return s?(s.isPresent=a,n||e.layoutDependency!==t||void 0===t?s.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?s.promote():s.relegate()||Bs.postRender(()=>{const e=s.getStack();e&&e.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),nd.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:n}=e;n&&(n.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(n),r&&r.deregister&&r.deregister(n))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function id(e){const[t,r]=Xc(),n=(0,a.useContext)(Qc);return(0,er.jsx)(sd,Be(Be({},e),{},{layoutGroup:n,switchLayoutGroup:(0,a.useContext)($c),isPresent:t,safeToRemove:r}))}const od={borderRadius:Be(Be({},ed),{},{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:ed,borderTopRightRadius:ed,borderBottomLeftRadius:ed,borderBottomRightRadius:ed,boxShadow:td};const ld=(e,t)=>e.depth-t.depth;class cd{constructor(){this.children=[],this.isDirty=!1}add(e){Gs(this.children,e),this.isDirty=!0}remove(e){Ks(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(ld),this.isDirty=!1,this.children.forEach(e)}}function dd(e,t){const r=Hs.now(),n=a=>{let{timestamp:s}=a;const i=s-r;i>=t&&(zs(n),e(i-t))};return Bs.read(n,!0),()=>zs(n)}function ud(e){const t=ti(e)?e.get():e;return(e=>Boolean(e&&"object"===typeof e&&e.mix&&e.toValue))(t)?t.toValue():t}const hd=["TopLeft","TopRight","BottomLeft","BottomRight"],md=hd.length,pd=e=>"string"===typeof e?parseFloat(e):e,fd=e=>"number"===typeof e||Li.test(e);function gd(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const xd=vd(0,.5,gi),yd=vd(.5,.95,Ts);function vd(e,t,r){return n=>n<e?0:n>t?1:r(ds(e,t,n))}function bd(e,t){e.min=t.min,e.max=t.max}function jd(e,t){bd(e.x,t.x),bd(e.y,t.y)}function wd(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Nd(e,t,r,n,a){return e=Dc(e-=t,1/r,n),void 0!==a&&(e=Dc(e,1/a,n)),e}function _d(e,t,r,n,a){let[s,i,o]=r;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;Ii.test(t)&&(t=parseFloat(t),t=Uo(i.min,i.max,t/100)-i.min);if("number"!==typeof t)return;let o=Uo(s.min,s.max,n);e===s&&(o-=t),e.min=Nd(e.min,t,r,o,a),e.max=Nd(e.max,t,r,o,a)}(e,t[s],t[i],t[o],t.scale,n,a)}const kd=["x","scaleX","originX"],Sd=["y","scaleY","originY"];function Ad(e,t,r,n){_d(e.x,t,kd,r?r.x:void 0,n?n.x:void 0),_d(e.y,t,Sd,r?r.y:void 0,n?n.y:void 0)}function Cd(e){return 0===e.translate&&1===e.scale}function Ed(e){return Cd(e.x)&&Cd(e.y)}function Td(e,t){return e.min===t.min&&e.max===t.max}function Pd(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Od(e,t){return Pd(e.x,t.x)&&Pd(e.y,t.y)}function Dd(e){return pc(e.x)/pc(e.y)}function Id(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class Ld{constructor(){this.members=[]}add(e){Gs(this.members,e),e.scheduleRender()}remove(e){if(Ks(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex(t=>e===t);if(0===t)return!1;let r;for(let n=t;n>=0;n--){const e=this.members[n];if(!1!==e.isPresent){r=e;break}}return!!r&&(this.promote(r),!0)}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:n}=e.options;!1===n&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Md={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Rd="undefined"!==typeof window&&void 0!==window.MotionDebug,Fd=["","X","Y","Z"],Bd={visibility:"hidden"};let zd=0;function Ud(e,t,r,n){const{latestValues:a}=t;a[e]&&(r[e]=a[e],t.setStaticValue(e,0),n&&(n[e]=0))}function qd(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=si(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:t,layoutId:n}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",Bs,!(t||n))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&qd(n)}function Wd(e){let{attachResizeListener:t,defaultParent:r,measureScroll:n,checkIsScrollRoot:a,resetTransform:s}=e;return class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===r||void 0===r?void 0:r();this.id=zd++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Rd&&(Md.totalNodes=Md.resolvedTargetDeltas=Md.recalculatedProjection=0),this.nodes.forEach(Gd),this.nodes.forEach(Zd),this.nodes.forEach(eu),this.nodes.forEach(Kd),Rd&&window.MotionDebug.record(Md)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let r=0;r<this.path.length;r++)this.path[r].shouldResetTransform=!0;this.root===this&&(this.nodes=new cd)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new Ys),this.eventHandlers.get(e).add(t)}notifyListeners(e){const t=this.eventHandlers.get(e);for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];t&&t.notify(...n)}hasListeners(e){return this.eventHandlers.has(e)}mount(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root.hasTreeAnimated;if(this.instance)return;var n;this.isSVG=(n=e)instanceof SVGElement&&"svg"!==n.tagName,this.instance=e;const{layoutId:a,layout:s,visualElement:i}=this.options;if(i&&!i.current&&i.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),r&&(s||a)&&(this.isLayoutDirty=!0),t){let r;const n=()=>this.root.updateBlockedByResize=!1;t(e,()=>{this.root.updateBlockedByResize=!0,r&&r(),r=dd(n,250),Jc.hasAnimatedSinceResize&&(Jc.hasAnimatedSinceResize=!1,this.nodes.forEach(Jd))})}a&&this.root.registerSharedNode(a,this),!1!==this.options.animate&&i&&(a||s)&&this.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:r,hasRelativeTargetChanged:n,layout:a}=e;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const s=this.options.transition||i.getDefaultTransition()||iu,{onLayoutAnimationStart:o,onLayoutAnimationComplete:l}=i.getProps(),c=!this.targetLayout||!Od(this.targetLayout,a)||n,d=!r&&n;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||d||r&&(c||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(t,d);const e=Be(Be({},ts(s,"layout")),{},{onPlay:o,onComplete:l});(i.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e)}else r||Jd(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=a})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,zs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(tu),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&qd(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let a=0;a<this.path.length;a++){const e=this.path[a];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:r}=this.options;if(void 0===t&&!r)return;const n=this.getTransformTemplate();this.prevTransformTemplateValue=n?n(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(Xd);this.isUpdating||this.nodes.forEach(Qd),this.isUpdating=!1,this.nodes.forEach($d),this.nodes.forEach(Vd),this.nodes.forEach(Hd),this.clearAllSnapshots();const e=Hs.now();Us.delta=bi(0,1e3/60,e-Us.timestamp),Us.timestamp=e,Us.isProcessing=!0,qs.update.process(Us),qs.preRender.process(Us),qs.render.process(Us),Us.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,nd.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Yd),this.sharedNodes.forEach(ru)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Bs.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Bs.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let r=0;r<this.path.length;r++){this.path[r].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t){const t=a(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!s)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!Ed(this.projectionDelta),r=this.getTransformTemplate(),n=r?r(this.latestValues,""):void 0,a=n!==this.prevTransformTemplateValue;e&&(t||Tc(this.latestValues)||a)&&(s(this.instance,n),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.measurePageBox();let r=this.removeElementScroll(t);var n;return e&&(r=this.removeTransform(r)),cu((n=r).x),cu(n.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:r,latestValues:{},source:this.id}}measurePageBox(){var e;const{visualElement:t}=this.options;if(!t)return{x:{min:0,max:0},y:{min:0,max:0}};const r=t.measureViewportBox();if(!((null===(e=this.scroll)||void 0===e?void 0:e.wasRoot)||this.path.some(uu))){const{scroll:e}=this.root;e&&(Bc(r.x,e.offset.x),Bc(r.y,e.offset.y))}return r}removeElementScroll(e){var t;const r={x:{min:0,max:0},y:{min:0,max:0}};if(jd(r,e),null===(t=this.scroll)||void 0===t?void 0:t.wasRoot)return r;for(let n=0;n<this.path.length;n++){const t=this.path[n],{scroll:a,options:s}=t;t!==this.root&&a&&s.layoutScroll&&(a.wasRoot&&jd(r,e),Bc(r.x,a.offset.x),Bc(r.y,a.offset.y))}return r}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r={x:{min:0,max:0},y:{min:0,max:0}};jd(r,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&Uc(r,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),Tc(e.latestValues)&&Uc(r,e.latestValues)}return Tc(this.latestValues)&&Uc(r,this.latestValues),r}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};jd(t,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];if(!e.instance)continue;if(!Tc(e.latestValues))continue;Ec(e.latestValues)&&e.updateSnapshot();const n=kc();jd(n,e.measurePageBox()),Ad(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,n)}return Tc(this.latestValues)&&Ad(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options=Be(Be(Be({},this.options),e),{},{crossfade:void 0===e.crossfade||e.crossfade})}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Us.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t;const r=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=r.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=r.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=r.isSharedProjectionDirty);const n=Boolean(this.resumingFrom)||this!==r;if(!(e||n&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:a,layoutId:s}=this.options;if(this.layout&&(a||s)){if(this.resolvedRelativeTargetAt=Us.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},vc(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),jd(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var i,o,l;if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),i=this.target,o=this.relativeTarget,l=this.relativeParent.target,xc(i.x,o.x,l.x),xc(i.y,o.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):jd(this.target,this.layout.layoutBox),Mc(this.target,this.targetDelta)):jd(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},vc(this.relativeTargetOrigin,this.target,e.target),jd(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Rd&&Md.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!Ec(this.parent.latestValues)&&!Pc(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),r=Boolean(this.resumingFrom)||this!==t;let n=!0;if((this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty))&&(n=!1),r&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(n=!1),this.resolvedRelativeTargetAt===Us.timestamp&&(n=!1),n)return;const{layout:a,layoutId:s}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!a&&!s)return;jd(this.layoutCorrected,this.layout.layoutBox);const i=this.treeScale.x,o=this.treeScale.y;!function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=r.length;if(!a)return;let s,i;t.x=t.y=1;for(let o=0;o<a;o++){s=r[o],i=s.projectionDelta;const{visualElement:a}=s.options;a&&a.props.style&&"contents"===a.props.style.display||(n&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Uc(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,Mc(e,i)),n&&Tc(s.latestValues)&&Uc(e,s.latestValues))}t.x<Fc&&t.x>Rc&&(t.x=1),t.y<Fc&&t.y>Rc&&(t.y=1)}(this.layoutCorrected,this.treeScale,this.path,r),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox,t.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:l}=t;l?(this.projectionDelta&&this.prevProjectionDelta?(wd(this.prevProjectionDelta.x,this.projectionDelta.x),wd(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),gc(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.treeScale.x===i&&this.treeScale.y===o&&Id(this.projectionDelta.x,this.prevProjectionDelta.x)&&Id(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),Rd&&Md.recalculatedProjection++):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];var t;if(null===(t=this.options.visualElement)||void 0===t||t.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=this.snapshot,n=r?r.latestValues:{},a=Be({},this.latestValues),s={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const i={x:{min:0,max:0},y:{min:0,max:0}},o=(r?r.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,d=Boolean(o&&!c&&!0===this.options.crossfade&&!this.path.some(su));let u;this.animationProgress=0,this.mixTargetDelta=t=>{const r=t/1e3;nu(s.x,e.x,r),nu(s.y,e.y,r),this.setTargetDelta(s),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(vc(i,this.layout.layoutBox,this.relativeParent.layout.layoutBox),function(e,t,r,n){au(e.x,t.x,r.x,n),au(e.y,t.y,r.y,n)}(this.relativeTarget,this.relativeTargetOrigin,i,r),u&&function(e,t){return Td(e.x,t.x)&&Td(e.y,t.y)}(this.relativeTarget,u)&&(this.isProjectionDirty=!1),u||(u={x:{min:0,max:0},y:{min:0,max:0}}),jd(u,this.relativeTarget)),o&&(this.animationValues=a,function(e,t,r,n,a,s){a?(e.opacity=Uo(0,void 0!==r.opacity?r.opacity:1,xd(n)),e.opacityExit=Uo(void 0!==t.opacity?t.opacity:1,0,yd(n))):s&&(e.opacity=Uo(void 0!==t.opacity?t.opacity:1,void 0!==r.opacity?r.opacity:1,n));for(let i=0;i<md;i++){const a="border".concat(hd[i],"Radius");let s=gd(t,a),o=gd(r,a);void 0===s&&void 0===o||(s||(s=0),o||(o=0),0===s||0===o||fd(s)===fd(o)?(e[a]=Math.max(Uo(pd(s),pd(o),n),0),(Ii.test(o)||Ii.test(s))&&(e[a]+="%")):e[a]=o)}(t.rotate||r.rotate)&&(e.rotate=Uo(t.rotate||0,r.rotate||0,n))}(a,n,this.latestValues,r,d,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=r},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(zs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Bs.update(()=>{Jc.hasAnimatedSinceResize=!0,this.currentAnimation=function(e,t,r){const n=ti(e)?e:Js(e);return n.start(Rl("",n,t,r)),n.animation}(0,1e3,Be(Be({},e),{},{onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}})),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:r,layout:n,latestValues:a}=e;if(t&&r&&n){if(this!==e&&this.layout&&n&&du(this.options.animationType,this.layout.layoutBox,n.layoutBox)){r=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=pc(this.layout.layoutBox.x);r.x.min=e.target.x.min,r.x.max=r.x.min+t;const n=pc(this.layout.layoutBox.y);r.y.min=e.target.y.min,r.y.max=r.y.min+n}jd(t,r),Uc(t,a),gc(this.projectionDeltaWithTransform,this.layoutCorrected,t,a)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new Ld);this.sharedNodes.get(e).add(t);const r=t.options.initialPromotionConfig;t.promote({transition:r?r.transition:void 0,preserveFollowOpacity:r&&r.shouldPreserveFollowOpacity?r.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this.getStack();n&&n.promote(this,r),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:r}=e;if((r.z||r.rotate||r.rotateX||r.rotateY||r.rotateZ||r.skewX||r.skewY)&&(t=!0),!t)return;const n={};r.z&&Ud("z",e,n,this.animationValues);for(let a=0;a<Fd.length;a++)Ud("rotate".concat(Fd[a]),e,n,this.animationValues),Ud("skew".concat(Fd[a]),e,n,this.animationValues);e.render();for(const a in n)e.setStaticValue(a,n[a]),this.animationValues&&(this.animationValues[a]=n[a]);e.scheduleRender()}getProjectionStyles(e){var t,r;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Bd;const n={visibility:""},a=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,n.opacity="",n.pointerEvents=ud(null===e||void 0===e?void 0:e.pointerEvents)||"",n.transform=a?a(this.latestValues,""):"none",n;const s=this.getLead();if(!this.projectionDelta||!this.layout||!s.target){const t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=ud(null===e||void 0===e?void 0:e.pointerEvents)||""),this.hasProjected&&!Tc(this.latestValues)&&(t.transform=a?a({},""):"none",this.hasProjected=!1),t}const i=s.animationValues||s.latestValues;this.applyTransformsToTarget(),n.transform=function(e,t,r){let n="";const a=e.x.translate/t.x,s=e.y.translate/t.y,i=(null===r||void 0===r?void 0:r.z)||0;if((a||s||i)&&(n="translate3d(".concat(a,"px, ").concat(s,"px, ").concat(i,"px) ")),1===t.x&&1===t.y||(n+="scale(".concat(1/t.x,", ").concat(1/t.y,") ")),r){const{transformPerspective:e,rotate:t,rotateX:a,rotateY:s,skewX:i,skewY:o}=r;e&&(n="perspective(".concat(e,"px) ").concat(n)),t&&(n+="rotate(".concat(t,"deg) ")),a&&(n+="rotateX(".concat(a,"deg) ")),s&&(n+="rotateY(".concat(s,"deg) ")),i&&(n+="skewX(".concat(i,"deg) ")),o&&(n+="skewY(".concat(o,"deg) "))}const o=e.x.scale*t.x,l=e.y.scale*t.y;return 1===o&&1===l||(n+="scale(".concat(o,", ").concat(l,")")),n||"none"}(this.projectionDeltaWithTransform,this.treeScale,i),a&&(n.transform=a(i,n.transform));const{x:o,y:l}=this.projectionDelta;n.transformOrigin="".concat(100*o.origin,"% ").concat(100*l.origin,"% 0"),s.animationValues?n.opacity=s===this?null!==(r=null!==(t=i.opacity)&&void 0!==t?t:this.latestValues.opacity)&&void 0!==r?r:1:this.preserveOpacity?this.latestValues.opacity:i.opacityExit:n.opacity=s===this?void 0!==i.opacity?i.opacity:"":void 0!==i.opacityExit?i.opacityExit:0;for(const c in rd){if(void 0===i[c])continue;const{correct:e,applyTo:t}=rd[c],r="none"===n.transform?i[c]:e(i[c],s);if(t){const e=t.length;for(let a=0;a<e;a++)n[t[a]]=r}else n[c]=r}return this.options.layoutId&&(n.pointerEvents=s===this?ud(null===e||void 0===e?void 0:e.pointerEvents)||"":"none"),n}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()}),this.root.nodes.forEach(Xd),this.root.sharedNodes.clear()}}}function Vd(e){e.updateLayout()}function Hd(e){var t;const r=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:n}=e.layout,{animationType:a}=e.options,s=r.source!==e.layout.source;"size"===a?Sc(e=>{const n=s?r.measuredBox[e]:r.layoutBox[e],a=pc(n);n.min=t[e].min,n.max=n.min+a}):du(a,r.layoutBox,t)&&Sc(n=>{const a=s?r.measuredBox[n]:r.layoutBox[n],i=pc(t[n]);a.max=a.min+i,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[n].max=e.relativeTarget[n].min+i)});const i={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};gc(i,t,r.layoutBox);const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};s?gc(o,e.applyTransform(n,!0),r.measuredBox):gc(o,t,r.layoutBox);const l=!Ed(i);let c=!1;if(!e.resumeFrom){const n=e.getClosestProjectingParent();if(n&&!n.resumeFrom){const{snapshot:a,layout:s}=n;if(a&&s){const i={x:{min:0,max:0},y:{min:0,max:0}};vc(i,r.layoutBox,a.layoutBox);const o={x:{min:0,max:0},y:{min:0,max:0}};vc(o,t,s.layoutBox),Od(i,o)||(c=!0),n.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=i,e.relativeParent=n)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:r,delta:o,layoutDelta:i,hasLayoutChanged:l,hasRelativeTargetChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function Gd(e){Rd&&Md.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Kd(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Yd(e){e.clearSnapshot()}function Xd(e){e.clearMeasurements()}function Qd(e){e.isLayoutDirty=!1}function $d(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Jd(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Zd(e){e.resolveTargetDelta()}function eu(e){e.calcProjection()}function tu(e){e.resetSkewAndRotation()}function ru(e){e.removeLeadSnapshot()}function nu(e,t,r){e.translate=Uo(t.translate,0,r),e.scale=Uo(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function au(e,t,r,n){e.min=Uo(t.min,r.min,n),e.max=Uo(t.max,r.max,n)}function su(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const iu={duration:.45,ease:[.4,0,.1,1]},ou=e=>"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),lu=ou("applewebkit/")&&!ou("chrome/")?Math.round:Ts;function cu(e){e.min=lu(e.min),e.max=lu(e.max)}function du(e,t,r){return"position"===e||"preserve-aspect"===e&&!function(e,t,r){return Math.abs(e-t)<=r}(Dd(t),Dd(r),.2)}function uu(e){var t;return e!==e.root&&(null===(t=e.scroll)||void 0===t?void 0:t.wasRoot)}const hu=Wd({attachResizeListener:(e,t)=>rc(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),mu={current:void 0},pu=Wd({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!mu.current){const e=new hu({});e.mount(window),e.setOptions({layoutScroll:!0}),mu.current=e}return mu.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),fu={pan:{Feature:class extends Zl{constructor(){super(...arguments),this.removePointerDownListener=Ts}onPointerDown(e){this.session=new ic(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Wc(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:n}=this.node.getProps();return{onSessionStart:Kc(e),onStart:Kc(t),onMove:r,onEnd:(e,t)=>{delete this.session,n&&Bs.postRender(()=>n(e,t))}}}mount(){this.removePointerDownListener=ac(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends Zl{constructor(e){super(e),this.removeGroupControls=Ts,this.removeListeners=Ts,this.controls=new Hc(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ts}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:pu,MeasureLayout:id}};function gu(e,t,r){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover","Start"===r);const a=n["onHover"+r];a&&Bs.postRender(()=>a(t,nc(t)))}function xu(e,t,r){const{props:n}=e;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap","Start"===r);const a=n["onTap"+("End"===r?"":r)];a&&Bs.postRender(()=>a(t,nc(t)))}const yu=["root"],vu=new WeakMap,bu=new WeakMap,ju=e=>{const t=vu.get(e.target);t&&t(e)},wu=e=>{e.forEach(ju)};function Nu(e,t,r){const n=function(e){let{root:t}=e,r=qa(e,yu);const n=t||document;bu.has(n)||bu.set(n,{});const a=bu.get(n),s=JSON.stringify(r);return a[s]||(a[s]=new IntersectionObserver(wu,Be({root:t},r))),a[s]}(t);return vu.set(e,r),n.observe(e),()=>{vu.delete(e),n.unobserve(e)}}const _u={some:0,all:1};const ku={inView:{Feature:class extends Zl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:n="some",once:a}=e,s={root:t?t.current:void 0,rootMargin:r,threshold:"number"===typeof n?n:_u[n]};return Nu(this.node.current,s,e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,a&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:r,onViewportLeave:n}=this.node.getProps(),s=t?r:n;s&&s(e)})}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node,r=["amount","margin","root"].some(function(e){let{viewport:t={}}=e,{viewport:r={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=>t[e]!==r[e]}(e,t));r&&this.startObserver()}unmount(){}}},tap:{Feature:class extends Zl{mount(){const{current:e}=this.node;e&&(this.unmount=As(e,e=>(xu(this.node,e,"Start"),(e,t)=>{let{success:r}=t;return xu(this.node,e,r?"End":"Cancel")}),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends Zl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(ze){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Xo(rc(this.node.current,"focus",()=>this.onFocus()),rc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends Zl{mount(){const{current:e}=this.node;e&&(this.unmount=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[n,a,s]=ys(e,r),i=vs(e=>{const{target:r}=e,n=t(e);if("function"!==typeof n||!r)return;const s=vs(e=>{n(e),r.removeEventListener("pointerleave",s)});r.addEventListener("pointerleave",s,a)});return n.forEach(e=>{e.addEventListener("pointerenter",i,a)}),s}(e,e=>(gu(this.node,e,"Start"),e=>gu(this.node,e,"End"))))}unmount(){}}}},Su={layout:{ProjectionNode:pu,MeasureLayout:id}},Au=(0,a.createContext)({strict:!1}),Cu=(0,a.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Eu=(0,a.createContext)({});function Tu(e){return Ua(e.animate)||Qa.some(t=>Ha(e[t]))}function Pu(e){return Boolean(Tu(e)||e.variants)}function Ou(e){const{initial:t,animate:r}=function(e,t){if(Tu(e)){const{initial:t,animate:r}=e;return{initial:!1===t||Ha(t)?t:void 0,animate:Ha(r)?r:void 0}}return!1!==e.inherit?t:{}}(e,(0,a.useContext)(Eu));return(0,a.useMemo)(()=>({initial:t,animate:r}),[Du(t),Du(r)])}function Du(e){return Array.isArray(e)?e.join(" "):e}const Iu="undefined"!==typeof window,Lu={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Mu={};for(const r in Lu)Mu[r]={isEnabled:e=>Lu[r].some(t=>!!e[t])};const Ru=Symbol.for("motionComponentSymbol");function Fu(e,t,r){return(0,a.useCallback)(n=>{n&&e.onMount&&e.onMount(n),t&&(n?t.mount(n):t.unmount()),r&&("function"===typeof r?r(n):mc(r)&&(r.current=n))},[t])}const Bu=Iu?a.useLayoutEffect:a.useEffect;function zu(e,t,r,n,s){var i,o;const{visualElement:l}=(0,a.useContext)(Eu),c=(0,a.useContext)(Au),d=(0,a.useContext)(Yc),u=(0,a.useContext)(Cu).reducedMotion,h=(0,a.useRef)(null);n=n||c.renderer,!h.current&&n&&(h.current=n(e,{visualState:t,parent:l,props:r,presenceContext:d,blockInitialAnimation:!!d&&!1===d.initial,reducedMotionConfig:u}));const m=h.current,p=(0,a.useContext)($c);!m||m.projection||!s||"html"!==m.type&&"svg"!==m.type||function(e,t,r,n){const{layoutId:a,layout:s,drag:i,dragConstraints:o,layoutScroll:l,layoutRoot:c}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:Uu(e.parent)),e.projection.setOptions({layoutId:a,layout:s,alwaysMeasureLayout:Boolean(i)||o&&mc(o),visualElement:e,animationType:"string"===typeof s?s:"both",initialPromotionConfig:n,layoutScroll:l,layoutRoot:c})}(h.current,r,s,p);const f=(0,a.useRef)(!1);(0,a.useInsertionEffect)(()=>{m&&f.current&&m.update(r,d)});const g=r[ai],x=(0,a.useRef)(Boolean(g)&&!(null===(i=window.MotionHandoffIsComplete)||void 0===i?void 0:i.call(window,g))&&(null===(o=window.MotionHasOptimisedAnimation)||void 0===o?void 0:o.call(window,g)));return Bu(()=>{m&&(f.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),nd.render(m.render),x.current&&m.animationState&&m.animationState.animateChanges())}),(0,a.useEffect)(()=>{m&&(!x.current&&m.animationState&&m.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var e;null===(e=window.MotionHandoffMarkAsComplete)||void 0===e||e.call(window,g)}),x.current=!1))}),m}function Uu(e){if(e)return!1!==e.options.allowProjection?e.projection:Uu(e.parent)}function qu(e){let{preloadedFeatures:t,createVisualElement:r,useRender:n,useVisualState:s,Component:i}=e;var o,l;function c(e,t){let o;const l=Be(Be(Be({},(0,a.useContext)(Cu)),e),{},{layoutId:Wu(e)}),{isStatic:c}=l,d=Ou(e),u=s(e,c);if(!c&&Iu){!function(){(0,a.useContext)(Au).strict;0}();const e=function(e){const{drag:t,layout:r}=Mu;if(!t&&!r)return{};const n=Be(Be({},t),r);return{MeasureLayout:(null===t||void 0===t?void 0:t.isEnabled(e))||(null===r||void 0===r?void 0:r.isEnabled(e))?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}(l);o=e.MeasureLayout,d.visualElement=zu(i,u,l,r,e.ProjectionNode)}return(0,er.jsxs)(Eu.Provider,{value:d,children:[o&&d.visualElement?(0,er.jsx)(o,Be({visualElement:d.visualElement},l)):null,n(i,e,Fu(u,d.visualElement,t),u,c,d.visualElement)]})}t&&function(e){for(const t in e)Mu[t]=Be(Be({},Mu[t]),e[t])}(t),c.displayName="motion.".concat("string"===typeof i?i:"create(".concat(null!==(l=null!==(o=i.displayName)&&void 0!==o?o:i.name)&&void 0!==l?l:"",")"));const d=(0,a.forwardRef)(c);return d[Ru]=i,d}function Wu(e){let{layoutId:t}=e;const r=(0,a.useContext)(Qc).id;return r&&void 0!==t?r+"-"+t:t}const Vu=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Hu(e){return"string"===typeof e&&!e.includes("-")&&!!(Vu.indexOf(e)>-1||/[A-Z]/.test(e))}function Gu(e){const t=(0,a.useRef)(null);return null===t.current&&(t.current=e()),t.current}const Ku=["transitionEnd","transition"];const Yu=e=>(t,r)=>{const n=(0,a.useContext)(Eu),s=(0,a.useContext)(Yc),i=()=>function(e,t,r,n){let{scrapeMotionValuesFromProps:a,createRenderState:s,onUpdate:i}=e;const o={latestValues:Xu(t,r,n,a),renderState:s()};return i&&(o.onMount=e=>i(Be({props:t,current:e},o)),o.onUpdate=e=>i(e)),o}(e,t,n,s);return r?i():Gu(i)};function Xu(e,t,r,n){const a={},s=n(e,{});for(const h in s)a[h]=ud(s[h]);let{initial:i,animate:o}=e;const l=Tu(e),c=Pu(e);t&&c&&!l&&!1!==e.inherit&&(void 0===i&&(i=t.initial),void 0===o&&(o=t.animate));let d=!!r&&!1===r.initial;d=d||!1===i;const u=d?o:i;if(u&&"boolean"!==typeof u&&!Ua(u)){const t=Array.isArray(u)?u:[u];for(let r=0;r<t.length;r++){const n=Ka(e,t[r]);if(n){const{transitionEnd:e,transition:t}=n,r=qa(n,Ku);for(const n in r){let e=r[n];if(Array.isArray(e)){e=e[d?e.length-1:0]}null!==e&&(a[n]=e)}for(const n in e)a[n]=e[n]}}}return a}const Qu=(e,t)=>t&&"number"===typeof e?t.transform(e):e,$u={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Ju=Ps.length;function Zu(e,t,r){const{style:n,vars:a,transformOrigin:s}=e;let i=!1,o=!1;for(const l in t){const e=t[l];if(Os.has(l))i=!0;else if(ko(l))a[l]=e;else{const t=Qu(e,no[l]);l.startsWith("origin")?(o=!0,s[l]=t):n[l]=t}}if(t.transform||(i||r?n.transform=function(e,t,r){let n="",a=!0;for(let s=0;s<Ju;s++){const i=Ps[s],o=e[i];if(void 0===o)continue;let l=!0;if(l="number"===typeof o?o===(i.startsWith("scale")?1:0):0===parseFloat(o),!l||r){const e=Qu(o,no[i]);l||(a=!1,n+="".concat($u[i]||i,"(").concat(e,") ")),r&&(t[i]=e)}}return n=n.trim(),r?n=r(t,a?"":n):a&&(n="none"),n}(t,e.transform,r):n.transform&&(n.transform="none")),o){const{originX:e="50%",originY:t="50%",originZ:r=0}=s;n.transformOrigin="".concat(e," ").concat(t," ").concat(r)}}const eh={offset:"stroke-dashoffset",array:"stroke-dasharray"},th={offset:"strokeDashoffset",array:"strokeDasharray"};function rh(e,t,r){return"string"===typeof e?e:Li.transform(t+r*e)}const nh=["attrX","attrY","attrScale","originX","originY","pathLength","pathSpacing","pathOffset"];function ah(e,t,r,n){let{attrX:a,attrY:s,attrScale:i,originX:o,originY:l,pathLength:c,pathSpacing:d=1,pathOffset:u=0}=t;if(Zu(e,qa(t,nh),n),r)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:h,style:m,dimensions:p}=e;h.transform&&(p&&(m.transform=h.transform),delete h.transform),p&&(void 0!==o||void 0!==l||m.transform)&&(m.transformOrigin=function(e,t,r){const n=rh(t,e.x,e.width),a=rh(r,e.y,e.height);return"".concat(n," ").concat(a)}(p,void 0!==o?o:.5,void 0!==l?l:.5)),void 0!==a&&(h.x=a),void 0!==s&&(h.y=s),void 0!==i&&(h.scale=i),void 0!==c&&function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;const s=a?eh:th;e[s.offset]=Li.transform(-n);const i=Li.transform(t),o=Li.transform(r);e[s.array]="".concat(i," ").concat(o)}(h,c,d,u,!1)}const sh=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),ih=()=>Be(Be({},{style:{},transform:{},transformOrigin:{},vars:{}}),{},{attrs:{}}),oh=e=>"string"===typeof e&&"svg"===e.toLowerCase();function lh(e,t,r,n){let{style:a,vars:s}=t;Object.assign(e.style,a,n&&n.getProjectionStyles(r));for(const i in s)e.style.setProperty(i,s[i])}const ch=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function dh(e,t,r,n){lh(e,t,void 0,n);for(const a in t.attrs)e.setAttribute(ch.has(a)?a:ni(a),t.attrs[a])}function uh(e,t){let{layout:r,layoutId:n}=t;return Os.has(e)||e.startsWith("origin")||(r||void 0!==n)&&(!!rd[e]||"opacity"===e)}function hh(e,t,r){var n;const{style:a}=e,s={};for(const i in a)(ti(a[i])||t.style&&ti(t.style[i])||uh(i,e)||void 0!==(null===(n=null===r||void 0===r?void 0:r.getValue(i))||void 0===n?void 0:n.liveStyle))&&(s[i]=a[i]);return s}function mh(e,t,r){const n=hh(e,t,r);for(const a in e)if(ti(e[a])||ti(t[a])){n[-1!==Ps.indexOf(a)?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a]=e[a]}return n}const ph=["x","y","width","height","cx","cy","r"],fh={useVisualState:Yu({scrapeMotionValuesFromProps:mh,createRenderState:ih,onUpdate:e=>{let{props:t,prevProps:r,current:n,renderState:a,latestValues:s}=e;if(!n)return;let i=!!t.drag;if(!i)for(const l in s)if(Os.has(l)){i=!0;break}if(!i)return;let o=!r;if(r)for(let l=0;l<ph.length;l++){const e=ph[l];t[e]!==r[e]&&(o=!0)}o&&Bs.read(()=>{!function(e,t){try{t.dimensions="function"===typeof e.getBBox?e.getBBox():e.getBoundingClientRect()}catch(ze){t.dimensions={x:0,y:0,width:0,height:0}}}(n,a),Bs.render(()=>{ah(a,s,oh(n.tagName),t.transformTemplate),dh(n,a)})})}})},gh={useVisualState:Yu({scrapeMotionValuesFromProps:hh,createRenderState:sh})};function xh(e,t,r){for(const n in t)ti(t[n])||uh(n,r)||(e[n]=t[n])}function yh(e,t){const r={};return xh(r,e.style||{},e),Object.assign(r,function(e,t){let{transformTemplate:r}=e;return(0,a.useMemo)(()=>{const e={style:{},transform:{},transformOrigin:{},vars:{}};return Zu(e,t,r),Object.assign({},e.vars,e.style)},[t])}(e,t)),r}function vh(e,t){const r={},n=yh(e,t);return e.drag&&!1!==e.dragListener&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=n,r}const bh=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function jh(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||bh.has(e)}let wh=e=>!jh(e);try{(Nh=require("@emotion/is-prop-valid").default)&&(wh=e=>e.startsWith("on")?!jh(e):Nh(e))}catch(Y7){}var Nh;function _h(e,t,r,n){const s=(0,a.useMemo)(()=>{const r=ih();return ah(r,t,oh(n),e.transformTemplate),Be(Be({},r.attrs),{},{style:Be({},r.style)})},[t]);if(e.style){const t={};xh(t,e.style,e),s.style=Be(Be({},t),s.style)}return s}function kh(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(t,r,n,s,i)=>{let{latestValues:o}=s;const l=(Hu(t)?_h:vh)(r,o,i,t),c=function(e,t,r){const n={};for(const a in e)"values"===a&&"object"===typeof e.values||(wh(a)||!0===r&&jh(a)||!t&&!jh(a)||e.draggable&&a.startsWith("onDrag"))&&(n[a]=e[a]);return n}(r,"string"===typeof t,e),d=t!==a.Fragment?Be(Be(Be({},c),l),{},{ref:n}):{},{children:u}=r,h=(0,a.useMemo)(()=>ti(u)?u.get():u,[u]);return(0,a.createElement)(t,Be(Be({},d),{},{children:h}))}}function Sh(e,t){return function(r){let{forwardMotionProps:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{forwardMotionProps:!1};return qu(Be(Be({},Hu(r)?fh:gh),{},{preloadedFeatures:e,useRender:kh(n),createVisualElement:t,Component:r}))}}const Ah={current:null},Ch={current:!1};const Eh=[...Oo,zi,Xi],Th=new WeakMap;const Ph=["willChange"],Oh=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Dh{scrapeMotionValuesFromProps(e,t,r){return{}}constructor(e){let{parent:t,props:r,presenceContext:n,reducedMotionConfig:a,blockInitialAnimation:s,visualState:i}=e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=bo,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=Hs.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,Bs.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:d}=i;this.onUpdate=d,this.latestValues=l,this.baseTarget=Be({},l),this.initialValues=r.initial?Be({},l):{},this.renderState=c,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=o,this.blockInitialAnimation=Boolean(s),this.isControllingVariants=Tu(r),this.isVariantNode=Pu(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const u=this.scrapeMotionValuesFromProps(r,{},this),{willChange:h}=u,m=qa(u,Ph);for(const p in m){const e=m[p];void 0!==l[p]&&ti(e)&&e.set(l[p],!1)}}mount(e){this.current=e,Th.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),Ch.current||function(){if(Ch.current=!0,Iu)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Ah.current=e.matches;e.addListener(t),t()}else Ah.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||Ah.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Th.delete(this.current),this.projection&&this.projection.unmount(),zs(this.notifyUpdate),zs(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Os.has(e),n=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&Bs.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=t.on("renderRequest",this.scheduleRender);let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{n(),a(),s&&s(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in Mu){const t=Mu[e];if(!t)continue;const{isEnabled:r,Feature:n}=t;if(!this.features[e]&&n&&r(this.props)&&(this.features[e]=new n(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<Oh.length;r++){const t=Oh[r];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const n=e["on"+t];n&&(this.propEventSubscriptions[t]=this.on(t,n))}this.prevMotionValues=function(e,t,r){for(const n in t){const a=t[n],s=r[n];if(ti(a))e.addValue(n,a);else if(ti(s))e.addValue(n,Js(a,{owner:e}));else if(s!==a)if(e.hasValue(n)){const t=e.getValue(n);!0===t.liveStyle?t.jump(a):t.hasAnimated||t.set(a)}else{const t=e.getStaticValue(n);e.addValue(n,Js(void 0!==t?t:a,{owner:e}))}}for(const n in r)void 0===t[n]&&e.removeValue(n);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return void 0===r&&void 0!==t&&(r=Js(null===t?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){var r;let n=void 0===this.latestValues[e]&&this.current?null!==(r=this.getBaseTargetFromProps(this.props,e))&&void 0!==r?r:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];return void 0!==n&&null!==n&&("string"===typeof n&&(No(n)||yi(n))?n=parseFloat(n):!(e=>Eh.find(Po(e)))(n)&&Xi.test(t)&&(n=io(e,t)),this.setBaseTarget(e,ti(n)?n.get():n)),ti(n)?n.get():n}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props;let n;if("string"===typeof r||"object"===typeof r){const a=Ka(this.props,r,null===(t=this.presenceContext)||void 0===t?void 0:t.custom);a&&(n=a[e])}if(r&&void 0!==n)return n;const a=this.getBaseTargetFromProps(this.props,e);return void 0===a||ti(a)?void 0!==this.initialValues[e]&&void 0===n?void 0:this.baseTarget[e]:a}on(e,t){return this.events[e]||(this.events[e]=new Ys),this.events[e].add(t)}notify(e){if(this.events[e]){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this.events[e].notify(...r)}}}class Ih extends Dh{constructor(){super(...arguments),this.KeyframeResolver=Io}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,t){let{vars:r,style:n}=t;delete r[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ti(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent="".concat(e))}))}}class Lh extends Ih{constructor(){super(...arguments),this.type="html",this.renderInstance=lh}readValueFromInstance(e,t){if(Os.has(t)){const e=so(t);return e&&e.default||0}{const n=(r=e,window.getComputedStyle(r)),a=(ko(t)?n.getPropertyValue(t):n[t])||0;return"string"===typeof a?a.trim():a}var r}measureInstanceViewportBox(e,t){let{transformPagePoint:r}=t;return qc(e,r)}build(e,t,r){Zu(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return hh(e,t,r)}}class Mh extends Ih{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=kc}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Os.has(t)){const e=so(t);return e&&e.default||0}return t=ch.has(t)?t:ni(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return mh(e,t,r)}build(e,t,r){ah(e,t,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,r,n){dh(e,t,0,n)}mount(e){this.isSVGTag=oh(e.tagName),super.mount(e)}}const Rh=(e,t)=>Hu(e)?new Mh(t):new Lh(t,{allowProjection:e!==a.Fragment}),Fh=za(Sh(Be(Be(Be(Be({},tc),ku),fu),Su),Rh));class Bh extends a.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function zh(e){let{children:t,isPresent:r}=e;const n=(0,a.useId)(),s=(0,a.useRef)(null),i=(0,a.useRef)({width:0,height:0,top:0,left:0}),{nonce:o}=(0,a.useContext)(Cu);return(0,a.useInsertionEffect)(()=>{const{width:e,height:t,top:a,left:l}=i.current;if(r||!s.current||!e||!t)return;s.current.dataset.motionPopId=n;const c=document.createElement("style");return o&&(c.nonce=o),document.head.appendChild(c),c.sheet&&c.sheet.insertRule('\n          [data-motion-pop-id="'.concat(n,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            top: ").concat(a,"px !important;\n            left: ").concat(l,"px !important;\n          }\n        ")),()=>{document.head.removeChild(c)}},[r]),(0,er.jsx)(Bh,{isPresent:r,childRef:s,sizeRef:i,children:a.cloneElement(t,{ref:s})})}const Uh=e=>{let{children:t,initial:r,isPresent:n,onExitComplete:s,custom:i,presenceAffectsLayout:o,mode:l}=e;const c=Gu(qh),d=(0,a.useId)(),u=(0,a.useCallback)(e=>{c.set(e,!0);for(const t of c.values())if(!t)return;s&&s()},[c,s]),h=(0,a.useMemo)(()=>({id:d,initial:r,isPresent:n,custom:i,onExitComplete:u,register:e=>(c.set(e,!1),()=>c.delete(e))}),o?[Math.random(),u]:[n,u]);return(0,a.useMemo)(()=>{c.forEach((e,t)=>c.set(t,!1))},[n]),a.useEffect(()=>{!n&&!c.size&&s&&s()},[n]),"popLayout"===l&&(t=(0,er.jsx)(zh,{isPresent:n,children:t})),(0,er.jsx)(Yc.Provider,{value:h,children:t})};function qh(){return new Map}const Wh=e=>e.key||"";function Vh(e){const t=[];return a.Children.forEach(e,e=>{(0,a.isValidElement)(e)&&t.push(e)}),t}const Hh=e=>{let{children:t,custom:r,initial:n=!0,onExitComplete:s,presenceAffectsLayout:i=!0,mode:o="sync",propagate:l=!1}=e;const[c,d]=Xc(l),u=(0,a.useMemo)(()=>Vh(t),[t]),h=l&&!c?[]:u.map(Wh),m=(0,a.useRef)(!0),p=(0,a.useRef)(u),f=Gu(()=>new Map),[g,x]=(0,a.useState)(u),[y,v]=(0,a.useState)(u);Bu(()=>{m.current=!1,p.current=u;for(let e=0;e<y.length;e++){const t=Wh(y[e]);h.includes(t)?f.delete(t):!0!==f.get(t)&&f.set(t,!1)}},[y,h.length,h.join("-")]);const b=[];if(u!==g){let e=[...u];for(let t=0;t<y.length;t++){const r=y[t],n=Wh(r);h.includes(n)||(e.splice(t,0,r),b.push(r))}return"wait"===o&&b.length&&(e=b),v(Vh(e)),void x(u)}const{forceRender:j}=(0,a.useContext)(Qc);return(0,er.jsx)(er.Fragment,{children:y.map(e=>{const t=Wh(e),a=!(l&&!c)&&(u===y||h.includes(t));return(0,er.jsx)(Uh,{isPresent:a,initial:!(m.current&&!n)&&void 0,custom:a?void 0:r,presenceAffectsLayout:i,mode:o,onExitComplete:a?void 0:()=>{if(!f.has(t))return;f.set(t,!0);let e=!0;f.forEach(t=>{t||(e=!1)}),e&&(null===j||void 0===j||j(),v(p.current),l&&(null===d||void 0===d||d()),s&&s())},children:e},t)})})};var Gh={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Kh=["color","size","strokeWidth","absoluteStrokeWidth","className","children"],Yh=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Xh=(e,t)=>{const r=(0,a.forwardRef)((r,n)=>{let{color:s="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:c="",children:d}=r,u=qa(r,Kh);return(0,a.createElement)("svg",Be(Be({ref:n},Gh),{},{width:i,height:i,stroke:s,strokeWidth:l?24*Number(o)/Number(i):o,className:["lucide","lucide-".concat(Yh(e)),c].join(" ")},u),[...t.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(d)?d:[d]])});return r.displayName="".concat(e),r},Qh=Xh("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),$h=Xh("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]),Jh=Xh("CalendarCheck2",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 14V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"bce9hv"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m16 20 2 2 4-4",key:"13tcca"}]]),Zh=Xh("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),em=Xh("ConciergeBell",[["path",{d:"M2 18a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v2H2v-2Z",key:"1co3i8"}],["path",{d:"M20 16a8 8 0 1 0-16 0",key:"1pa543"}],["path",{d:"M12 4v4",key:"1bq03y"}],["path",{d:"M10 4h4",key:"1xpv9s"}]]),tm=Xh("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),rm=Xh("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2h0V5z",key:"uf6l00"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h0",key:"k2aug8"}]]),nm=Xh("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),am=Xh("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]),sm=Xh("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),im=Xh("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),om=Xh("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),lm=Xh("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),cm=Xh("Warehouse",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]]),dm=Xh("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),um=Xh("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),hm=Xh("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),mm={"eco-friendly":{"--bg-primary":"#f0f7f4","--bg-secondary":"#ffffff","--text-primary":"#1a4d3a","--text-secondary":"#5a7c6a","--accent-bg":"#c8e6d5","--accent-text":"#2d6a4f","--bubble-color":"rgba(76, 175, 80, 0.3)","--primary-button":"#22c55e","--primary-button-hover":"#16a34a","--border-color":"#a7d4b8"},platinum:{"--bg-primary":"#f4f7f9","--bg-secondary":"#ffffff","--text-primary":"#2c3e50","--text-secondary":"#7f8c8d","--accent-bg":"#e7edf1","--accent-text":"#34495e","--bubble-color":"rgba(175, 215, 255, 0.4)","--primary-button":"#6366f1","--primary-button-hover":"#4f46e5","--border-color":"#e2e8f0"},onyx:{"--bg-primary":"#1c1c1c","--bg-secondary":"#2b2b2b","--text-primary":"#ecf0f1","--text-secondary":"#bdc3c7","--accent-bg":"#34495e","--accent-text":"#f1c40f","--bubble-color":"rgba(255, 223, 186, 0.2)","--primary-button":"#f1c40f","--primary-button-hover":"#f39c12","--border-color":"#34495e"},"gilded-age":{"--bg-primary":"#fdf8f0","--bg-secondary":"#ffffff","--text-primary":"#4a4a4a","--text-secondary":"#8b7c6c","--accent-bg":"#f5ecde","--accent-text":"#4a4a4a","--bubble-color":"rgba(212, 172, 97, 0.3)","--primary-button":"#d4ac61","--primary-button-hover":"#b8945f","--border-color":"#e8dcc6"},orchid:{"--bg-primary":"#faf8f5","--bg-secondary":"#ffffff","--text-primary":"#2d3748","--text-secondary":"#718096","--accent-bg":"#e8f5e9","--accent-text":"#2d5016","--bubble-color":"rgba(139, 195, 74, 0.25)","--primary-button":"#8bc34a","--primary-button-hover":"#7cb342","--border-color":"#c5e1a5"}},pm=e=>{const t=mm[e];t&&(Object.keys(t).forEach(e=>{document.documentElement.style.setProperty(e,t[e])}),document.documentElement.setAttribute("data-theme",e),localStorage.setItem("dashboard-theme",e))},fm=()=>{const e=localStorage.getItem("token");if(!e)return{role:"guest",permissions:[],user:null};try{const t=Fa(e);return{role:null!==t&&void 0!==t&&t.role?t.role.toLowerCase():"guest",permissions:(null===t||void 0===t?void 0:t.permissions)||[],user:t}}catch(t){return console.error("Invalid token",t),{role:"guest",permissions:[],user:null}}},gm=e=>{let{children:t,requiredPermission:r}=e;const{role:n,permissions:a}=fm();return"admin"===n||a.includes(r)?t?(0,er.jsx)(er.Fragment,{children:t}):null:a.length>0?(0,er.jsx)(je,{to:a[0],replace:!0}):(0,er.jsx)("div",{className:"flex items-center justify-center h-screen text-red-600 font-bold text-xl",children:"Access Denied: No permissions assigned."})};function xm(e){let{children:t}=e;const[r,n]=(0,a.useState)(!1),s=ae(),[i,o]=(0,a.useState)("orchid"),l=(0,a.useRef)(null),[c,d]=(0,a.useState)(0);(0,a.useEffect)(()=>{const e=localStorage.getItem("dashboard-theme");e&&mm[e]?(o(e),pm(e)):(o("orchid"),pm("orchid"))},[]),(0,a.useEffect)(()=>{l.current&&(l.current.scrollTop=c)},[s.pathname,c]),(0,a.useEffect)(()=>{const e=document.getElementById("bubble-background");if(!e)return;e.innerHTML="";const t=()=>{const t=document.createElement("span"),r=60*Math.random()+20,n=10*Math.random()+10,a=5*Math.random(),s=100*Math.random();t.style.width="".concat(r,"px"),t.style.height="".concat(r,"px"),t.style.left="".concat(s,"%"),t.style.animationDuration="".concat(n,"s"),t.style.animationDelay="".concat(a,"s"),t.style.backgroundColor="var(--bubble-color)",t.classList.add("bubble"),e.appendChild(t)};for(let r=0;r<30;r++)t()},[i]);const{role:u,permissions:h,user:m}=fm(),p=[{label:"Dashboard",icon:(0,er.jsx)(Qh,{size:18}),to:"/dashboard"},{label:"Account",icon:(0,er.jsx)($h,{size:18}),to:"/account",roles:["admin"]},{label:"Bookings",icon:(0,er.jsx)(Jh,{size:18}),to:"/bookings"},{label:"Packages",icon:(0,er.jsx)(Zh,{size:18}),to:"/packages"},{label:"Services",icon:(0,er.jsx)(em,{size:18}),to:"/services"},{label:"Role",icon:(0,er.jsx)(tm,{size:18}),to:"/roles",roles:["admin"]},{label:"Expenses",icon:(0,er.jsx)(rm,{size:18}),to:"/expenses"},{label:"Food Management",icon:(0,er.jsx)(nm,{size:18}),to:"/food-orders",roles:["admin","manager","fnb"]},{label:"Billing",icon:(0,er.jsx)(am,{size:18}),to:"/billing",roles:["admin","manager","fnb"]},{label:"WEB Management",icon:(0,er.jsx)(sm,{size:18}),to:"/Userfrontend_data",roles:["admin","manager","fnb"]},{label:"Reports",icon:(0,er.jsx)(im,{size:18}),to:"/report",roles:["admin","manager","fnb"]},{label:"GuestProfiles",icon:(0,er.jsx)(im,{size:18}),to:"/guestprofiles",roles:["admin","manager","fnb"]},{label:"User History",icon:(0,er.jsx)(om,{size:18}),to:"/user-history",roles:["admin","manager"]},{label:"Employee Mgt",icon:(0,er.jsx)(lm,{size:18}),to:"/employee-management",roles:["admin","manager"]},{label:"Inventory",icon:(0,er.jsx)(cm,{size:18}),to:"/inventory",roles:["admin","manager"]},{label:"Settings",icon:(0,er.jsx)(dm,{size:18}),to:"/settings",roles:["admin"]}].filter(e=>"admin"===u||h.includes(e.to));return(0,er.jsxs)("div",{className:"flex h-screen overflow-hidden transition-colors duration-300 font-sans",style:{backgroundColor:"var(--bg-primary)",color:"var(--text-primary)"},children:[!r&&(0,er.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>n(!0)}),(0,er.jsx)("style",{children:"\n        @keyframes moveBubbles {\n          0% { transform: translateY(0) rotate(0deg); opacity: 0; border-radius: 0; }\n          50% { opacity: 1; border-radius: 50%; }\n          100% { transform: translateY(-100vh) rotate(720deg); opacity: 0; }\n        }\n\n        .bubble {\n          position: absolute;\n          bottom: -150px;\n          animation: moveBubbles infinite ease-in;\n          filter: blur(2px);\n          border-radius: 50%;\n        }\n\n        @media (max-width: 1024px) {\n          .bubble {\n            display: none; /* Hide bubbles on mobile for better performance */\n          }\n        }\n        "}),(0,er.jsx)("div",{id:"bubble-background",className:"absolute top-0 left-0 w-full h-full pointer-events-none overflow-hidden z-0"}),(0,er.jsxs)("div",{className:"flex h-full w-full relative z-10",children:[(0,er.jsxs)("div",{className:"shadow-xl transition-all duration-300 ".concat(r?"w-16 lg:w-20":"w-72"," flex flex-col flex-shrink-0 z-50 rounded-r-2xl overflow-hidden fixed lg:relative h-full ").concat(r?"-translate-x-full lg:translate-x-0":"translate-x-0"),style:{backgroundColor:"var(--bg-secondary)"},children:[(0,er.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",style:{borderColor:"var(--accent-bg)"},children:[(0,er.jsx)("div",{className:"flex items-center gap-4",children:(0,er.jsx)("div",{className:"p-4 rounded-xl flex items-center justify-center shadow-lg border-2 bg-gradient-to-br from-gray-800 via-gray-900 to-black",style:{borderColor:"var(--accent-bg)"},children:(0,er.jsx)("img",{src:La,className:"h-20 w-auto object-contain drop-shadow-md",alt:"Orchid Resort Logo"})})}),(0,er.jsxs)("div",{className:"flex items-center gap-2",children:[!r&&(0,er.jsx)(nr,{}),(0,er.jsx)("button",{onClick:()=>n(!r),className:"p-2 rounded-full transition-colors duration-200",style:{color:"var(--text-secondary)"},children:(0,er.jsx)(um,{size:20})})]})]}),(0,er.jsxs)("div",{className:"p-4 transition-all duration-300 flex justify-center gap-2 border-b",style:{borderColor:"var(--accent-bg)"},children:[(0,er.jsx)(Fh.button,{animate:{scale:"orchid"===i?1.15:1,y:"orchid"===i?-2:0},whileHover:{scale:1.2,y:-2},whileTap:{scale:1.1},transition:{type:"spring",stiffness:300},className:"w-8 h-8 rounded-full overflow-hidden ".concat("orchid"===i?"shadow-lg border-2 border-[#8bc34a]":""),onClick:()=>{o("orchid"),pm("orchid")},title:"Orchid",children:(0,er.jsx)("img",{src:La,alt:"Orchid Theme",className:"w-full h-full object-cover"})}),(0,er.jsx)(Fh.button,{animate:{scale:"eco-friendly"===i?1.15:1,y:"eco-friendly"===i?-2:0},whileHover:{scale:1.2,y:-2},whileTap:{scale:1.1},transition:{type:"spring",stiffness:300},className:"w-8 h-8 rounded-full overflow-hidden ".concat("eco-friendly"===i?"shadow-lg border-2 border-green-500":""),onClick:()=>{o("eco-friendly"),pm("eco-friendly")},title:"Eco-Friendly",children:(0,er.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-green-400 to-emerald-600 flex items-center justify-center text-white font-bold text-xs",children:"\ud83c\udf3f"})}),(0,er.jsx)(Fh.button,{animate:{scale:"platinum"===i?1.15:1,y:"platinum"===i?-2:0},whileHover:{scale:1.2,y:-2},whileTap:{scale:1.1},transition:{type:"spring",stiffness:300},className:"w-8 h-8 rounded-full overflow-hidden ".concat("platinum"===i?"shadow-lg border-2 border-gray-400":""),onClick:()=>{o("platinum"),pm("platinum")},title:"Platinum",children:(0,er.jsx)("img",{src:"https://placehold.co/32x32/f4f7f9/2c3e50?text=P",alt:"Platinum Theme",className:"w-full h-full object-cover"})}),(0,er.jsx)(Fh.button,{animate:{scale:"onyx"===i?1.15:1,y:"onyx"===i?-2:0},whileHover:{scale:1.2,y:-2},whileTap:{scale:1.1},transition:{type:"spring",stiffness:300},className:"w-8 h-8 rounded-full overflow-hidden ".concat("onyx"===i?"shadow-lg border-2 border-yellow-600":""),onClick:()=>{o("onyx"),pm("onyx")},title:"Onyx",children:(0,er.jsx)("img",{src:"https://placehold.co/32x32/1c1c1c/f1c40f?text=O",alt:"Onyx Theme",className:"w-full h-full object-cover"})}),(0,er.jsx)(Fh.button,{animate:{scale:"gilded-age"===i?1.15:1,y:"gilded-age"===i?-2:0},whileHover:{scale:1.2,y:-2},whileTap:{scale:1.1},transition:{type:"spring",stiffness:300},className:"w-8 h-8 rounded-full overflow-hidden ".concat("gilded-age"===i?"shadow-lg border-2 border-yellow-800":""),onClick:()=>{o("gilded-age"),pm("gilded-age")},title:"Gilded Age",children:(0,er.jsx)("img",{src:"https://placehold.co/32x32/fdf8f0/d4ac61?text=G",alt:"Gilded Age Theme",className:"w-full h-full object-cover"})})]}),(0,er.jsx)("nav",{ref:l,className:"flex-1 p-4 space-y-2 z-30 overflow-y-auto",onScroll:()=>{l.current&&d(l.current.scrollTop)},children:p.map((e,t)=>{const n=s.pathname===e.to,a="/dashboard"!==e.to&&s.pathname.startsWith(e.to),i=n||a;return(0,er.jsxs)(De,{to:e.to,className:"\n                    group block flex items-center gap-4 p-3 rounded-xl\n                    transition-all duration-200 cursor-pointer\n                    ".concat(i?"font-semibold":"","\n                  "),style:{backgroundColor:i?"var(--accent-bg)":"transparent",color:i?"var(--accent-text)":"var(--text-secondary)",boxShadow:i?"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)":"none"},children:[(0,er.jsx)(Fh.span,{whileHover:{scale:i?1:1.1,rotate:i?0:-5},className:"transition-transform duration-200",children:e.icon}),!r&&(0,er.jsx)(Fh.span,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},className:"transition-opacity duration-200",children:e.label})]},t)})}),(0,er.jsx)("div",{className:"p-4 border-t",style:{borderColor:"var(--accent-bg)"},children:(0,er.jsxs)(De,{to:"/",className:"group block flex items-center gap-4 p-3 rounded-xl transition-all duration-200 cursor-pointer hover:opacity-75",style:{backgroundColor:"transparent",color:"var(--text-secondary)"},children:[(0,er.jsx)("span",{className:"group-hover:scale-110 transition-transform duration-200",children:(0,er.jsx)(hm,{size:18})}),!r&&(0,er.jsx)("span",{className:"transition-opacity duration-200",children:"Log Out"})]})}),(0,er.jsx)("div",{className:"p-6 border-t z-20",style:{borderColor:"var(--accent-bg)"},children:!r&&(0,er.jsx)("div",{className:"text-sm mb-2",style:{color:"var(--text-secondary)"},children:m?"Logged in as: ".concat(m.name||m.email||u):"Not logged in"})})]}),(0,er.jsx)("button",{onClick:()=>n(!r),className:"lg:hidden fixed top-4 left-4 z-[60] p-3 rounded-xl shadow-lg transition-all duration-200 hover:scale-110",style:{backgroundColor:"var(--accent-bg)",color:"var(--accent-text)"},children:(0,er.jsx)(um,{size:24})}),(0,er.jsx)("main",{className:"flex-1 overflow-y-auto p-2 sm:p-4 md:p-6 lg:p-8 z-10 lg:ml-0 ml-0",style:{backgroundColor:"var(--bg-primary)",color:"var(--text-primary)"},children:(0,er.jsx)(Hh,{mode:"wait",initial:!1,children:(0,er.jsx)(Fh.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},exit:{opacity:0,y:15},transition:{duration:.2,ease:"easeInOut"},children:t},s.pathname)})})]})]})}const ym=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const n="string"===typeof e?parseFloat(e)||0:e||0,a=new Intl.NumberFormat("en-IN",{minimumFractionDigits:r,maximumFractionDigits:r}).format(n);return t?"\u20b9".concat(a):a},vm=e=>{const t=Number(e);return isNaN(t)?"\u20b90":t>=1e7?"\u20b9".concat((t/1e7).toFixed(2)," Cr"):t>=1e5?"\u20b9".concat((t/1e5).toFixed(2)," L"):ym(t)};function bm(e){var t,r,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=bm(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function jm(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=bm(e))&&(n&&(n+=" "),n+=t);return n}const wm=jm;var Nm=r(7820),_m=r.n(Nm),km=r(7770),Sm=r.n(km),Am=e=>0===e?0:e>0?1:-1,Cm=e=>"number"==typeof e&&e!=+e,Em=e=>"string"===typeof e&&e.indexOf("%")===e.length-1,Tm=e=>("number"===typeof e||e instanceof Number)&&!Cm(e),Pm=e=>Tm(e)||"string"===typeof e,Om=0,Dm=e=>{var t=++Om;return"".concat(e||"").concat(t)},Im=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!Tm(e)&&"string"!==typeof e)return n;if(Em(e)){if(null==t)return n;var s=e.indexOf("%");r=t*parseFloat(e.slice(0,s))/100}else r=+e;return Cm(r)&&(r=n),a&&null!=t&&r>t&&(r=t),r},Lm=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++){if(r[e[n]])return!0;r[e[n]]=!0}return!1};function Mm(e,t,r){return Tm(e)&&Tm(t)?e+r*(t-e):t}function Rm(e,t,r){if(e&&e.length)return e.find(e=>e&&("function"===typeof t?t(e):Sm()(e,t))===r)}var Fm=e=>null===e||"undefined"===typeof e,Bm=e=>Fm(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function zm(e){return null!=e}function Um(){}var qm=function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];if("undefined"!==typeof console&&console.warn&&(void 0===t&&console.warn("LogUtils requires an error message argument"),!e))if(void 0===t)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=0;console.warn(t.replace(/%s/g,()=>n[s++]))}},Wm=(e,t,r)=>{var{width:n="100%",height:a="100%",aspect:s,maxHeight:i}=r,o=Em(n)?e:Number(n),l=Em(a)?t:Number(a);return s&&s>0&&(o?l=o/s:l&&(o=l*s),i&&null!=l&&l>i&&(l=i)),{calculatedWidth:o,calculatedHeight:l}},Vm={width:0,height:0,overflow:"visible"},Hm={width:0,overflowX:"visible"},Gm={height:0,overflowY:"visible"},Km={},Ym=e=>{var{width:t,height:r}=e,n=Em(t),a=Em(r);return n&&a?Vm:n?Hm:a?Gm:Km};function Xm(e){return Number.isFinite(e)}function Qm(e){return"number"===typeof e&&e>0&&Number.isFinite(e)}function $m(){return $m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$m.apply(null,arguments)}function Jm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Zm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jm(Object(r),!0).forEach(function(t){ep(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jm(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ep(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var tp=(0,a.createContext)({width:-1,height:-1});function rp(e){var{children:t,width:r,height:n}=e,s=(0,a.useMemo)(()=>({width:r,height:n}),[r,n]);return function(e){return Qm(e.width)&&Qm(e.height)}(s)?a.createElement(tp.Provider,{value:s},t):null}var np=()=>(0,a.useContext)(tp),ap=(0,a.forwardRef)((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:s,height:i,minWidth:o=0,minHeight:l,maxHeight:c,children:d,debounce:u=0,id:h,className:m,onResize:p,style:f={}}=e,g=(0,a.useRef)(null),x=(0,a.useRef)();x.current=p,(0,a.useImperativeHandle)(t,()=>g.current);var[y,v]=(0,a.useState)({containerWidth:n.width,containerHeight:n.height}),b=(0,a.useCallback)((e,t)=>{v(r=>{var n=Math.round(e),a=Math.round(t);return r.containerWidth===n&&r.containerHeight===a?r:{containerWidth:n,containerHeight:a}})},[]);(0,a.useEffect)(()=>{if(null==g.current||"undefined"===typeof ResizeObserver)return Um;var e=e=>{var t,{width:r,height:n}=e[0].contentRect;b(r,n),null===(t=x.current)||void 0===t||t.call(x,r,n)};u>0&&(e=_m()(e,u,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),{width:r,height:n}=g.current.getBoundingClientRect();return b(r,n),t.observe(g.current),()=>{t.disconnect()}},[b,u]);var{containerWidth:j,containerHeight:w}=y;qm(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:N,calculatedHeight:_}=Wm(j,w,{width:s,height:i,aspect:r,maxHeight:c});return qm(null!=N&&N>0||null!=_&&_>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",N,_,s,i,o,l,r),a.createElement("div",{id:h?"".concat(h):void 0,className:jm("recharts-responsive-container",m),style:Zm(Zm({},f),{},{width:s,height:i,minWidth:o,minHeight:l,maxHeight:c}),ref:g},a.createElement("div",{style:Ym({width:s,height:i})},a.createElement(rp,{width:N,height:_},d)))}),sp=(0,a.forwardRef)((e,t)=>{var r=np();if(Qm(r.width)&&Qm(r.height))return e.children;var{width:n,height:s}=function(e){var{width:t,height:r,aspect:n}=e,a=t,s=r;return void 0===a&&void 0===s?(a="100%",s="100%"):void 0===a?a=n&&n>0?void 0:"100%":void 0===s&&(s=n&&n>0?void 0:"100%"),{width:a,height:s}}({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:i,calculatedHeight:o}=Wm(void 0,void 0,{width:n,height:s,aspect:e.aspect,maxHeight:e.maxHeight});return Tm(i)&&Tm(o)?a.createElement(rp,{width:i,height:o},e.children):a.createElement(ap,$m({},e,{width:n,height:s,ref:t}))}),ip=Symbol.for("immer-nothing"),op=Symbol.for("immer-draftable"),lp=Symbol.for("immer-state");function cp(e){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var dp=Object,up=dp.getPrototypeOf,hp="constructor",mp="prototype",pp="configurable",fp="enumerable",gp="writable",xp="value",yp=e=>!!e&&!!e[lp];function vp(e){var t;return!!e&&(wp(e)||Cp(e)||!!e[op]||!(null===(t=e[hp])||void 0===t||!t[op])||Ep(e)||Tp(e))}var bp=dp[mp][hp].toString(),jp=new WeakMap;function wp(e){if(!e||!Pp(e))return!1;const t=up(e);if(null===t||t===dp[mp])return!0;const r=dp.hasOwnProperty.call(t,hp)&&t[hp];if(r===Object)return!0;if(!Op(r))return!1;let n=jp.get(r);return void 0===n&&(n=Function.toString.call(r),jp.set(r,n)),n===bp}function Np(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===_p(e)){(r?Reflect.ownKeys(e):dp.keys(e)).forEach(r=>{t(r,e[r],e)})}else e.forEach((r,n)=>t(n,r,e))}function _p(e){const t=e[lp];return t?t.type_:Cp(e)?1:Ep(e)?2:Tp(e)?3:0}var kp=function(e,t){return 2===(arguments.length>2&&void 0!==arguments[2]?arguments[2]:_p(e))?e.has(t):dp[mp].hasOwnProperty.call(e,t)},Sp=function(e,t){return 2===(arguments.length>2&&void 0!==arguments[2]?arguments[2]:_p(e))?e.get(t):e[t]},Ap=function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:_p(e);2===n?e.set(t,r):3===n?e.add(r):e[t]=r};var Cp=Array.isArray,Ep=e=>e instanceof Map,Tp=e=>e instanceof Set,Pp=e=>"object"===typeof e,Op=e=>"function"===typeof e,Dp=e=>"boolean"===typeof e,Ip=e=>e.copy_||e.base_,Lp=e=>e.modified_?e.copy_:e.base_;function Mp(e,t){if(Ep(e))return new Map(e);if(Tp(e))return new Set(e);if(Cp(e))return Array[mp].slice.call(e);const r=wp(e);if(!0===t||"class_only"===t&&!r){const t=dp.getOwnPropertyDescriptors(e);delete t[lp];let r=Reflect.ownKeys(t);for(let n=0;n<r.length;n++){const a=r[n],s=t[a];!1===s[gp]&&(s[gp]=!0,s[pp]=!0),(s.get||s.set)&&(t[a]={[pp]:!0,[gp]:!0,[fp]:s[fp],[xp]:e[a]})}return dp.create(up(e),t)}{const t=up(e);if(null!==t&&r)return Be({},e);const n=dp.create(t);return dp.assign(n,e)}}function Rp(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Bp(e)||yp(e)||(_p(e)>1&&dp.defineProperties(e,{set:Fp,add:Fp,clear:Fp,delete:Fp}),dp.freeze(e),t&&Np(e,(e,t)=>{Rp(t,!0)},!1)),e}var Fp={[xp]:function(){cp(2)}};function Bp(e){return null===e||!Pp(e)||dp.isFrozen(e)}var zp="MapSet",Up="Patches",qp={};function Wp(e){const t=qp[e];return t||cp(0),t}var Vp;var Hp=()=>Vp;function Gp(e,t){t&&(e.patchPlugin_=Wp(Up),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Kp(e){Yp(e),e.drafts_.forEach(Qp),e.drafts_=null}function Yp(e){e===Vp&&(Vp=e.parent_)}var Xp=e=>Vp=((e,t)=>{return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:(r=zp,qp[r]?Wp(zp):void 0)};var r})(Vp,e);function Qp(e){const t=e[lp];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function $p(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];if(void 0!==e&&e!==r){r[lp].modified_&&(Kp(t),cp(4)),vp(e)&&(e=Jp(t,e));const{patchPlugin_:n}=t;n&&n.generateReplacementPatches_(r[lp].base_,e,t)}else e=Jp(t,r);return function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Rp(t,r)}(t,e,!0),Kp(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==ip?e:void 0}function Jp(e,t){if(Bp(t))return t;const r=t[lp];if(!r){return af(t,e.handledSet_,e)}if(!ef(r,e))return t;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:t}=r;if(t)for(;t.length>0;){t.pop()(e)}nf(r,e)}return r.copy_}function Zp(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var ef=(e,t)=>e.scope_===t,tf=[];function rf(e,t,r,n){var a;const s=Ip(e),i=e.type_;if(void 0!==n){if(Sp(s,n,i)===t)return void Ap(s,n,r,i)}if(!e.draftLocations_){const t=e.draftLocations_=new Map;Np(s,(e,r)=>{if(yp(r)){const n=t.get(r)||[];n.push(e),t.set(r,n)}})}const o=null!==(a=e.draftLocations_.get(t))&&void 0!==a?a:tf;for(const l of o)Ap(s,l,r,i)}function nf(e,t){var r,n;if(e.modified_&&!e.finalized_&&(3===e.type_||(null!==(r=null===(n=e.assigned_)||void 0===n?void 0:n.size)&&void 0!==r?r:0)>0)){const{patchPlugin_:r}=t;if(r){const n=r.getPath(e);n&&r.generatePatches_(e,n,t)}Zp(e)}}function af(e,t,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||yp(e)||t.has(e)||!vp(e)||Bp(e)||(t.add(e),Np(e,(n,a)=>{if(yp(a)){const t=a[lp];if(ef(t,r)){const r=Lp(t);Ap(e,n,r,e.type_),Zp(t)}}else vp(a)&&af(a,t,r)})),e}var sf={get(e,t){if(t===lp)return e;const r=Ip(e);if(!kp(r,t,e.type_))return function(e,t,r){var n;const a=cf(t,r);return a?xp in a?a[xp]:null===(n=a.get)||void 0===n?void 0:n.call(e.draft_):void 0}(e,r,t);const n=r[t];if(e.finalized_||!vp(n))return n;if(n===lf(e.base_,t)){uf(e);const r=1===e.type_?+t:t,a=hf(e.scope_,n,e,r);return e.copy_[r]=a}return n},has:(e,t)=>t in Ip(e),ownKeys:e=>Reflect.ownKeys(Ip(e)),set(e,t,r){const n=cf(Ip(e),t);if(null!==n&&void 0!==n&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const n=lf(Ip(e),t),i=null===n||void 0===n?void 0:n[lp];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_.set(t,!1),!0;if(((a=r)===(s=n)?0!==a||1/a===1/s:a!==a&&s!==s)&&(void 0!==r||kp(e.base_,t,e.type_)))return!0;uf(e),df(e)}var a,s;return e.copy_[t]===r&&(void 0!==r||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_.set(t,!0),function(e,t,r){const{scope_:n}=e;if(yp(r)){const a=r[lp];ef(a,n)&&a.callbacks_.push(function(){uf(e);const n=Lp(a);rf(e,r,n,t)})}else vp(r)&&e.callbacks_.push(function(){const a=Ip(e);var s;Sp(a,t,e.type_)===r&&n.drafts_.length>1&&!0===(null!==(s=e.assigned_.get(t))&&void 0!==s&&s)&&e.copy_&&af(Sp(e.copy_,t,e.type_),n.handledSet_,n)})}(e,t,r)),!0},deleteProperty:(e,t)=>(uf(e),void 0!==lf(e.base_,t)||t in e.base_?(e.assigned_.set(t,!1),df(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const r=Ip(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{[gp]:!0,[pp]:1!==e.type_||"length"!==t,[fp]:n[fp],[xp]:r[t]}:n},defineProperty(){cp(11)},getPrototypeOf:e=>up(e.base_),setPrototypeOf(){cp(12)}},of={};function lf(e,t){const r=e[lp];return(r?Ip(r):e)[t]}function cf(e,t){if(!(t in e))return;let r=up(e);for(;r;){const e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=up(r)}}function df(e){e.modified_||(e.modified_=!0,e.parent_&&df(e.parent_))}function uf(e){e.copy_||(e.assigned_=new Map,e.copy_=Mp(e.base_,e.scope_.immer_.useStrictShallowCopy_))}Np(sf,(e,t)=>{of[e]=function(){const e=arguments;return e[0]=e[0][0],t.apply(this,e)}}),of.deleteProperty=function(e,t){return of.set.call(this,e,t,void 0)},of.set=function(e,t,r){return sf.set.call(this,e[0],t,r,e[0])};function hf(e,t,r,n){var a,s;const[i,o]=Ep(t)?Wp(zp).proxyMap_(t,r):Tp(t)?Wp(zp).proxySet_(t,r):function(e,t){const r=Cp(e),n={type_:r?1:0,scope_:t?t.scope_:Hp(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let a=n,s=sf;r&&(a=[n],s=of);const{revoke:i,proxy:o}=Proxy.revocable(a,s);return n.draft_=o,n.revoke_=i,[o,n]}(t,r);return(null!==(a=null===r||void 0===r?void 0:r.scope_)&&void 0!==a?a:Hp()).drafts_.push(i),o.callbacks_=null!==(s=null===r||void 0===r?void 0:r.callbacks_)&&void 0!==s?s:[],o.key_=n,r&&void 0!==n?function(e,t,r){e.callbacks_.push(function(n){var a,s;const i=t;if(!i||!ef(i,n))return;null===(a=n.mapSetPlugin_)||void 0===a||a.fixSetContents(i);const o=Lp(i);rf(e,null!==(s=i.draft_)&&void 0!==s?s:i,o,r),nf(i,n)})}(r,o,n):o.callbacks_.push(function(e){var t;null===(t=e.mapSetPlugin_)||void 0===t||t.fixSetContents(o);const{patchPlugin_:r}=e;o.modified_&&r&&r.generatePatches_(o,[],e)}),i}function mf(e){return yp(e)||cp(10),pf(e)}function pf(e){if(!vp(e)||Bp(e))return e;const t=e[lp];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Mp(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=Mp(e,!0);return Np(r,(e,t)=>{Ap(r,e,pf(t))},n),t&&(t.finalized_=!1),r}var ff=new class{constructor(e){var t=this;this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(e,t,r)=>{if(Op(e)&&!Op(t)){const r=t;t=e;const n=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;for(var a=arguments.length,s=new Array(a>1?a-1:0),i=1;i<a;i++)s[i-1]=arguments[i];return n.produce(e,e=>t.call(this,e,...s))}}let n;if(Op(t)||cp(6),void 0===r||Op(r)||cp(7),vp(e)){const a=Xp(this),s=hf(a,e,void 0);let i=!0;try{n=t(s),i=!1}finally{i?Kp(a):Yp(a)}return Gp(a,r),$p(n,a)}if(!e||!Pp(e)){if(n=t(e),void 0===n&&(n=e),n===ip&&(n=void 0),this.autoFreeze_&&Rp(n,!0),r){const t=[],a=[];Wp(Up).generateReplacementPatches_(e,n,{patches_:t,inversePatches_:a}),r(t,a)}return n}cp(1)},this.produceWithPatches=(e,r)=>{if(Op(e))return function(r){for(var n=arguments.length,a=new Array(n>1?n-1:0),s=1;s<n;s++)a[s-1]=arguments[s];return t.produceWithPatches(r,t=>e(t,...a))};let n,a;const s=this.produce(e,r,(e,t)=>{n=e,a=t});return[s,n,a]},Dp(null===e||void 0===e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),Dp(null===e||void 0===e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),Dp(null===e||void 0===e?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){vp(e)||cp(8),yp(e)&&(e=mf(e));const t=Xp(this),r=hf(t,e,void 0);return r[lp].isManual_=!0,Yp(t),r}finishDraft(e,t){const r=e&&e[lp];r&&r.isManual_||cp(9);const{scope_:n}=r;return Gp(n,t),$p(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));const n=Wp(Up).applyPatches_;return yp(e)?n(e,t):this.produce(e,e=>n(e,t))}},gf=ff.produce;function xf(e){return"Minified Redux error #".concat(e,"; visit https://redux.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}var yf=(()=>"function"===typeof Symbol&&Symbol.observable||"@@observable")(),vf=()=>Math.random().toString(36).substring(7).split("").join("."),bf={INIT:"@@redux/INIT".concat(vf()),REPLACE:"@@redux/REPLACE".concat(vf()),PROBE_UNKNOWN_ACTION:()=>"@@redux/PROBE_UNKNOWN_ACTION".concat(vf())};function jf(e){if("object"!==typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function wf(e,t,r){if("function"!==typeof e)throw new Error(xf(2));if("function"===typeof t&&"function"===typeof r||"function"===typeof r&&"function"===typeof arguments[3])throw new Error(xf(0));if("function"===typeof t&&"undefined"===typeof r&&(r=t,t=void 0),"undefined"!==typeof r){if("function"!==typeof r)throw new Error(xf(1));return r(wf)(e,t)}let n=e,a=t,s=new Map,i=s,o=0,l=!1;function c(){i===s&&(i=new Map,s.forEach((e,t)=>{i.set(t,e)}))}function d(){if(l)throw new Error(xf(3));return a}function u(e){if("function"!==typeof e)throw new Error(xf(4));if(l)throw new Error(xf(5));let t=!0;c();const r=o++;return i.set(r,e),function(){if(t){if(l)throw new Error(xf(6));t=!1,c(),i.delete(r),s=null}}}function h(e){if(!jf(e))throw new Error(xf(7));if("undefined"===typeof e.type)throw new Error(xf(8));if("string"!==typeof e.type)throw new Error(xf(17));if(l)throw new Error(xf(9));try{l=!0,a=n(a,e)}finally{l=!1}return(s=i).forEach(e=>{e()}),e}h({type:bf.INIT});return{dispatch:h,subscribe:u,getState:d,replaceReducer:function(e){if("function"!==typeof e)throw new Error(xf(10));n=e,h({type:bf.REPLACE})},[yf]:function(){const e=u;return{subscribe(t){if("object"!==typeof t||null===t)throw new Error(xf(11));function r(){const e=t;e.next&&e.next(d())}r();return{unsubscribe:e(r)}},[yf](){return this}}}}}function Nf(e){const t=Object.keys(e),r={};for(let s=0;s<t.length;s++){const n=t[s];0,"function"===typeof e[n]&&(r[n]=e[n])}const n=Object.keys(r);let a;try{!function(e){Object.keys(e).forEach(t=>{const r=e[t];if("undefined"===typeof r(void 0,{type:bf.INIT}))throw new Error(xf(12));if("undefined"===typeof r(void 0,{type:bf.PROBE_UNKNOWN_ACTION()}))throw new Error(xf(13))})}(r)}catch(ze){a=ze}return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(a)throw a;let s=!1;const i={};for(let a=0;a<n.length;a++){const o=n[a],l=r[o],c=e[o],d=l(c,t);if("undefined"===typeof d){t&&t.type;throw new Error(xf(14))}i[o]=d,s=s||d!==c}return s=s||n.length!==Object.keys(e).length,s?i:e}}function _f(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?e=>e:1===t.length?t[0]:t.reduce((e,t)=>function(){return e(t(...arguments))})}function kf(e){return jf(e)&&"type"in e&&"string"===typeof e.type}function Sf(e){return t=>{let{dispatch:r,getState:n}=t;return t=>a=>"function"===typeof a?a(r,n,e):t(a)}}var Af=Sf(),Cf=Sf;const Ef=["reducerPath"];var Tf="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?_f:_f.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function Pf(e,t){function r(){if(t){let r=t(...arguments);if(!r)throw new Error(Sg(0));return Be(Be({type:e,payload:r.payload},"meta"in r&&{meta:r.meta}),"error"in r&&{error:r.error})}return{type:e,payload:arguments.length<=0?void 0:arguments[0]}}return r.toString=()=>"".concat(e),r.type=e,r.match=t=>kf(t)&&t.type===e,r}var Of=class e extends Array{constructor(){super(...arguments),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return super.concat.apply(this,t)}prepend(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return 1===r.length&&Array.isArray(r[0])?new e(...r[0].concat(this)):new e(...r.concat(this))}};function Df(e){return vp(e)?gf(e,()=>{}):e}function If(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}var Lf="RTK_autoBatch",Mf=()=>e=>({payload:e,meta:{[Lf]:!0}}),Rf=e=>t=>{setTimeout(t,e)},Ff=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"raf"};return t=>function(){const r=t(...arguments);let n=!0,a=!1,s=!1;const i=new Set,o="tick"===e.type?queueMicrotask:"raf"===e.type?"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:Rf(10):"callback"===e.type?e.queueNotification:Rf(e.timeout),l=()=>{s=!1,a&&(a=!1,i.forEach(e=>e()))};return Object.assign({},r,{subscribe(e){const t=r.subscribe(()=>n&&e());return i.add(e),()=>{t(),i.delete(e)}},dispatch(e){try{var t;return n=!(null!==e&&void 0!==e&&null!==(t=e.meta)&&void 0!==t&&t[Lf]),a=!n,a&&(s||(s=!0,o(l))),r.dispatch(e)}finally{n=!0}}})}};function Bf(e){const t=function(e){const{thunk:t=!0,immutableCheck:r=!0,serializableCheck:n=!0,actionCreatorCheck:a=!0}=null!==e&&void 0!==e?e:{};let s=new Of;return t&&("boolean"===typeof t?s.push(Af):s.push(Cf(t.extraArgument))),s},{reducer:r,middleware:n,devTools:a=!0,duplicateMiddlewareCheck:s=!0,preloadedState:i,enhancers:o}=e||{};let l,c;if("function"===typeof r)l=r;else{if(!jf(r))throw new Error(Sg(1));l=Nf(r)}c="function"===typeof n?n(t):t();let d=_f;a&&(d=Tf(Be({trace:!1},"object"===typeof a&&a)));const u=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>(r,n)=>{const a=e(r,n);let s=()=>{throw new Error(xf(15))};const i={getState:a.getState,dispatch:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return s(e,...r)}},o=t.map(e=>e(i));return s=_f(...o)(a.dispatch),Be(Be({},a),{},{dispatch:s})}}(...c),h=(e=>function(t){const{autoBatch:r=!0}=null!==t&&void 0!==t?t:{};let n=new Of(e);return r&&n.push(Ff("object"===typeof r?r:void 0)),n})(u);return wf(l,i,d(..."function"===typeof o?o(h):h()))}function zf(e){const t={},r=[];let n;const a={addCase(e,r){const n="string"===typeof e?e:e.type;if(!n)throw new Error(Sg(28));if(n in t)throw new Error(Sg(29));return t[n]=r,a},addAsyncThunk:(e,n)=>(n.pending&&(t[e.pending.type]=n.pending),n.rejected&&(t[e.rejected.type]=n.rejected),n.fulfilled&&(t[e.fulfilled.type]=n.fulfilled),n.settled&&r.push({matcher:e.settled,reducer:n.settled}),a),addMatcher:(e,t)=>(r.push({matcher:e,reducer:t}),a),addDefaultCase:e=>(n=e,a)};return e(a),[t,r,n]}var Uf=function(){let e="",t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;for(;t--;)e+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return e};var qf=Symbol.for("rtk-slice-createasyncthunk");function Wf(e,t){return"".concat(e,"/").concat(t)}function Vf(){var e;let{creators:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=null===t||void 0===t||null===(e=t.asyncThunk)||void 0===e?void 0:e[qf];return function(e){const{name:t,reducerPath:n=t}=e;if(!t)throw new Error(Sg(11));const a=("function"===typeof e.reducers?e.reducers(function(){function e(e,t){return Be({_reducerDefinitionType:"asyncThunk",payloadCreator:e},t)}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name](){return e(...arguments)}}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},s=Object.keys(a),i={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},o={addCase(e,t){const r="string"===typeof e?e:e.type;if(!r)throw new Error(Sg(12));if(r in i.sliceCaseReducersByType)throw new Error(Sg(13));return i.sliceCaseReducersByType[r]=t,o},addMatcher:(e,t)=>(i.sliceMatchers.push({matcher:e,reducer:t}),o),exposeAction:(e,t)=>(i.actionCreators[e]=t,o),exposeCaseReducer:(e,t)=>(i.sliceCaseReducersByName[e]=t,o)};function l(){const[t={},r=[],n]="function"===typeof e.extraReducers?zf(e.extraReducers):[e.extraReducers],a=Be(Be({},t),i.sliceCaseReducersByType);return function(e,t){let r,[n,a,s]=zf(t);if("function"===typeof e)r=()=>Df(e());else{const t=Df(e);r=()=>t}function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r(),t=arguments.length>1?arguments[1]:void 0,i=[n[t.type],...a.filter(e=>{let{matcher:r}=e;return r(t)}).map(e=>{let{reducer:t}=e;return t})];return 0===i.filter(e=>!!e).length&&(i=[s]),i.reduce((e,r)=>{if(r){if(yp(e)){const n=r(e,t);return void 0===n?e:n}if(vp(e))return gf(e,e=>r(e,t));{const n=r(e,t);if(void 0===n){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return n}}return e},e)}return i.getInitialState=r,i}(e.initialState,e=>{for(let t in a)e.addCase(t,a[t]);for(let t of i.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of r)e.addMatcher(t.matcher,t.reducer);n&&e.addDefaultCase(n)})}s.forEach(n=>{const s=a[n],i={reducerName:n,type:Wf(t,n),createNotation:"function"===typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(s)?function(e,t,r){let n,a,{type:s,reducerName:i,createNotation:o}=e;if("reducer"in t){if(o&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(t))throw new Error(Sg(17));n=t.reducer,a=t.prepare}else n=t;r.addCase(s,n).exposeCaseReducer(i,n).exposeAction(i,a?Pf(s,a):Pf(s))}(i,s,o):function(e,t,r,n){let{type:a,reducerName:s}=e;if(!n)throw new Error(Sg(18));const{payloadCreator:i,fulfilled:o,pending:l,rejected:c,settled:d,options:u}=t,h=n(a,i,u);r.exposeAction(s,h),o&&r.addCase(h.fulfilled,o);l&&r.addCase(h.pending,l);c&&r.addCase(h.rejected,c);d&&r.addMatcher(h.settled,d);r.exposeCaseReducer(s,{fulfilled:o||Kf,pending:l||Kf,rejected:c||Kf,settled:d||Kf})}(i,s,o,r)});const c=e=>e,d=new Map,u=new WeakMap;let h;function m(e,t){return h||(h=l()),h(e,t)}function p(){return h||(h=l()),h.getInitialState()}function f(t){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(e){let a=e[t];return"undefined"===typeof a&&r&&(a=If(u,n,p)),a}function a(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;const n=If(d,r,()=>new WeakMap);return If(n,t,()=>{const n={};for(const[s,i]of Object.entries(null!==(a=e.selectors)&&void 0!==a?a:{})){var a;n[s]=Hf(i,t,()=>If(u,t,p),r)}return n})}return{reducerPath:t,getSelectors:a,get selectors(){return a(n)},selectSlice:n}}const g=Be(Be({name:t,reducer:m,actions:i.actionCreators,caseReducers:i.sliceCaseReducersByName,getInitialState:p},f(n)),{},{injectInto(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reducerPath:r}=t,a=qa(t,Ef);const s=null!==r&&void 0!==r?r:n;return e.inject({reducerPath:s,reducer:m},a),Be(Be({},g),f(s,!0))}});return g}}function Hf(e,t,r,n){function a(a){let s=t(a);"undefined"===typeof s&&n&&(s=r());for(var i=arguments.length,o=new Array(i>1?i-1:0),l=1;l<i;l++)o[l-1]=arguments[l];return e(s,...o)}return a.unwrapped=e,a}var Gf=Vf();function Kf(){}var Yf="listener",Xf="completed",Qf="cancelled",$f="task-".concat(Qf),Jf="task-".concat(Xf),Zf="".concat(Yf,"-").concat(Qf),eg="".concat(Yf,"-").concat(Xf),tg=class{constructor(e){(0,Re.A)(this,"name","TaskAbortError"),(0,Re.A)(this,"message",void 0),this.code=e,this.message="".concat("task"," ").concat(Qf," (reason: ").concat(e,")")}},rg=(e,t)=>{if("function"!==typeof e)throw new TypeError(Sg(32))},ng=()=>{},ag=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ng;return e.catch(t),e},sg=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),ig=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},og=e=>{if(e.aborted){const{reason:t}=e;throw new tg(t)}};function lg(e,t){let r=ng;return new Promise((n,a)=>{const s=()=>a(new tg(e.reason));e.aborted?s():(r=sg(e,s),t.finally(()=>r()).then(n,a))}).finally(()=>{r=ng})}var cg=e=>t=>ag(lg(e,t).then(t=>(og(e),t))),dg=e=>{const t=cg(e);return e=>t(new Promise(t=>setTimeout(t,e)))},{assign:ug}=Object,hg={},mg="listenerMiddleware",pg=(e,t)=>(r,n)=>{rg(r);const a=new AbortController;var s;s=a,sg(e,()=>ig(s,e.reason));const i=(async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof tg?"cancelled":"rejected",error:r}}finally{null===t||void 0===t||t()}})(async()=>{og(e),og(a.signal);const t=await r({pause:cg(a.signal),delay:dg(a.signal),signal:a.signal});return og(a.signal),t},()=>ig(a,Jf));return null!==n&&void 0!==n&&n.autoJoin&&t.push(i.catch(ng)),{result:cg(e)(i),cancel(){ig(a,$f)}}},fg=(e,t)=>(r,n)=>ag((async(r,n)=>{og(t);let a=()=>{};const s=new Promise((t,n)=>{let s=e({predicate:r,effect:(e,r)=>{r.unsubscribe(),t([e,r.getState(),r.getOriginalState()])}});a=()=>{s(),n()}}),i=[s];null!=n&&i.push(new Promise(e=>setTimeout(e,n,null)));try{const e=await lg(t,Promise.race(i));return og(t),e}finally{a()}})(r,n)),gg=e=>{let{type:t,actionCreator:r,matcher:n,predicate:a,effect:s}=e;if(t)a=Pf(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(Sg(21));return rg(s),{predicate:a,type:t,effect:s}},xg=ug(e=>{const{type:t,predicate:r,effect:n}=gg(e);return{id:Uf(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Sg(22))}}},{withTypes:()=>xg}),yg=(e,t)=>{const{type:r,effect:n,predicate:a}=gg(t);return Array.from(e.values()).find(e=>("string"===typeof r?e.type===r:e.predicate===a)&&e.effect===n)},vg=e=>{e.pending.forEach(e=>{ig(e,Zf)})},bg=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},jg=ug(Pf("".concat(mg,"/add")),{withTypes:()=>jg}),wg=Pf("".concat(mg,"/removeAll")),Ng=ug(Pf("".concat(mg,"/remove")),{withTypes:()=>Ng}),_g=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];console.error("".concat(mg,"/error"),...t)},kg=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new Map,r=new Map,{extra:n,onError:a=_g}=e;rg(a);const s=e=>{var r;return(e=>(e.unsubscribe=()=>t.delete(e.id),t.set(e.id,e),t=>{e.unsubscribe(),null!==t&&void 0!==t&&t.cancelActive&&vg(e)}))(null!==(r=yg(t,e))&&void 0!==r?r:xg(e))};ug(s,{withTypes:()=>s});const i=e=>{const r=yg(t,e);return r&&(r.unsubscribe(),e.cancelActive&&vg(r)),!!r};ug(i,{withTypes:()=>i});const o=async(e,i,o,l)=>{const c=new AbortController,d=fg(s,c.signal),u=[];try{e.pending.add(c),(e=>{var t;const n=null!==(t=r.get(e))&&void 0!==t?t:0;r.set(e,n+1)})(e),await Promise.resolve(e.effect(i,ug({},o,{getOriginalState:l,condition:(e,t)=>d(e,t).then(Boolean),take:d,delay:dg(c.signal),pause:cg(c.signal),extra:n,signal:c.signal,fork:pg(c.signal,u),unsubscribe:e.unsubscribe,subscribe:()=>{t.set(e.id,e)},cancelActiveListeners:()=>{e.pending.forEach((e,t,r)=>{e!==c&&(ig(e,Zf),r.delete(e))})},cancel:()=>{ig(c,Zf),e.pending.delete(c)},throwIfCancelled:()=>{og(c.signal)}})))}catch(h){h instanceof tg||bg(a,h,{raisedBy:"effect"})}finally{await Promise.all(u),ig(c,eg),(e=>{var t;const n=null!==(t=r.get(e))&&void 0!==t?t:1;1===n?r.delete(e):r.set(e,n-1)})(e),e.pending.delete(c)}},l=((e,t)=>()=>{for(const e of t.keys())vg(e);e.clear()})(t,r);return{middleware:e=>r=>n=>{if(!kf(n))return r(n);if(jg.match(n))return s(n.payload);if(wg.match(n))return void l();if(Ng.match(n))return i(n.payload);let c=e.getState();const d=()=>{if(c===hg)throw new Error(Sg(23));return c};let u;try{if(u=r(n),t.size>0){const r=e.getState(),s=Array.from(t.values());for(const t of s){let s=!1;try{s=t.predicate(n,r,c)}catch(h){s=!1,bg(a,h,{raisedBy:"predicate"})}s&&o(t,n,e,d)}}}finally{c=hg}return u},startListening:s,stopListening:i,clearListeners:l}};Symbol.for("rtk-state-proxy-original");function Sg(e){return"Minified Redux Toolkit error #".concat(e,"; visit https://redux-toolkit.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}function Ag(e,t){if(t){var r=Number.parseInt(t,10);if(!Cm(r))return null===e||void 0===e?void 0:e[r]}}var Cg=Gf({name:"options",initialState:{chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},reducers:{createEventEmitter:e=>{null==e.eventEmitter&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Eg=Cg.reducer,{createEventEmitter:Tg}=Cg.actions;r(7237);function Pg(e){e()}var Og={notify(){},get:()=>[]};function Dg(e,t){let r,n=Og,a=0,s=!1;function i(){c.onStateChange&&c.onStateChange()}function o(){a++,r||(r=t?t.addNestedSub(i):e.subscribe(i),n=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Pg(()=>{let t=e;for(;t;)t.callback(),t=t.next})},get(){const t=[];let r=e;for(;r;)t.push(r),r=r.next;return t},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){n&&null!==e&&(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}())}function l(){a--,r&&0===a&&(r(),r=void 0,n.clear(),n=Og)}const c={addNestedSub:function(e){o();const t=n.subscribe(e);let r=!1;return()=>{r||(r=!0,t(),l())}},notifyNestedSubs:function(){n.notify()},handleChangeWrapper:i,isSubscribed:function(){return s},trySubscribe:function(){s||(s=!0,o())},tryUnsubscribe:function(){s&&(s=!1,l())},getListeners:()=>n};return c}var Ig=(()=>!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement))(),Lg=(()=>"undefined"!==typeof navigator&&"ReactNative"===navigator.product)(),Mg=(()=>Ig||Lg?a.useLayoutEffect:a.useEffect)();function Rg(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function Fg(e,t){if(Rg(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(t,r[a])||!Rg(e[r[a]],t[r[a]]))return!1;return!0}Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var Bg=Symbol.for("react-redux-context"),zg="undefined"!==typeof globalThis?globalThis:{};function Ug(){var e;if(!a.createContext)return{};const t=null!==(e=zg[Bg])&&void 0!==e?e:zg[Bg]=new Map;let r=t.get(a.createContext);return r||(r=a.createContext(null),t.set(a.createContext,r)),r}var qg=Ug();var Wg=function(e){const{children:t,context:r,serverState:n,store:s}=e,i=a.useMemo(()=>{const e=Dg(s);return{store:s,subscription:e,getServerState:n?()=>n:void 0}},[s,n]),o=a.useMemo(()=>s.getState(),[s]);Mg(()=>{const{subscription:e}=i;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),o!==s.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}},[i,o]);const l=r||qg;return a.createElement(l.Provider,{value:i},t)};var Vg=Symbol.for("immer-nothing"),Hg=Symbol.for("immer-draftable"),Gg=Symbol.for("immer-state");function Kg(e){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var Yg=Object.getPrototypeOf;function Xg(e){return!!e&&!!e[Gg]}function Qg(e){var t;return!!e&&(Zg(e)||Array.isArray(e)||!!e[Hg]||!(null===(t=e.constructor)||void 0===t||!t[Hg])||ax(e)||sx(e))}var $g=Object.prototype.constructor.toString(),Jg=new WeakMap;function Zg(e){if(!e||"object"!==typeof e)return!1;const t=Object.getPrototypeOf(e);if(null===t||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if("function"!==typeof r)return!1;let n=Jg.get(r);return void 0===n&&(n=Function.toString.call(r),Jg.set(r,n)),n===$g}function ex(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===tx(e)){(r?Reflect.ownKeys(e):Object.keys(e)).forEach(r=>{t(r,e[r],e)})}else e.forEach((r,n)=>t(n,r,e))}function tx(e){const t=e[Gg];return t?t.type_:Array.isArray(e)?1:ax(e)?2:sx(e)?3:0}function rx(e,t){return 2===tx(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function nx(e,t,r){const n=tx(e);2===n?e.set(t,r):3===n?e.add(r):e[t]=r}function ax(e){return e instanceof Map}function sx(e){return e instanceof Set}function ix(e){return e.copy_||e.base_}function ox(e,t){if(ax(e))return new Map(e);if(sx(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=Zg(e);if(!0===t||"class_only"===t&&!r){const t=Object.getOwnPropertyDescriptors(e);delete t[Gg];let r=Reflect.ownKeys(t);for(let n=0;n<r.length;n++){const a=r[n],s=t[a];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[a]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[a]})}return Object.create(Yg(e),t)}{const t=Yg(e);if(null!==t&&r)return Be({},e);const n=Object.create(t);return Object.assign(n,e)}}function lx(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return dx(e)||Xg(e)||!Qg(e)||(tx(e)>1&&Object.defineProperties(e,{set:cx,add:cx,clear:cx,delete:cx}),Object.freeze(e),t&&Object.values(e).forEach(e=>lx(e,!0))),e}var cx={value:function(){Kg(2)}};function dx(e){return null===e||"object"!==typeof e||Object.isFrozen(e)}var ux,hx={};function mx(e){const t=hx[e];return t||Kg(0),t}function px(){return ux}function fx(e,t){t&&(mx("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function gx(e){xx(e),e.drafts_.forEach(vx),e.drafts_=null}function xx(e){e===ux&&(ux=e.parent_)}function yx(e){return ux={drafts_:[],parent_:ux,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function vx(e){const t=e[Gg];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function bx(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return void 0!==e&&e!==r?(r[Gg].modified_&&(gx(t),Kg(4)),Qg(e)&&(e=jx(t,e),t.parent_||Nx(t,e)),t.patches_&&mx("Patches").generateReplacementPatches_(r[Gg].base_,e,t.patches_,t.inversePatches_)):e=jx(t,r,[]),gx(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Vg?e:void 0}function jx(e,t,r){if(dx(t))return t;const n=e.immer_.shouldUseStrictIteration(),a=t[Gg];if(!a)return ex(t,(n,s)=>wx(e,a,t,n,s,r),n),t;if(a.scope_!==e)return t;if(!a.modified_)return Nx(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const t=a.copy_;let s=t,i=!1;3===a.type_&&(s=new Set(t),t.clear(),i=!0),ex(s,(n,s)=>wx(e,a,t,n,s,r,i),n),Nx(e,t,!1),r&&e.patches_&&mx("Patches").generatePatches_(a,r,e.patches_,e.inversePatches_)}return a.copy_}function wx(e,t,r,n,a,s,i){if(null==a)return;if("object"!==typeof a&&!i)return;const o=dx(a);if(!o||i){if(Xg(a)){const i=jx(e,a,s&&t&&3!==t.type_&&!rx(t.assigned_,n)?s.concat(n):void 0);if(nx(r,n,i),!Xg(i))return;e.canAutoFreeze_=!1}else i&&r.add(a);if(Qg(a)&&!o){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;if(t&&t.base_&&t.base_[n]===a&&o)return;jx(e,a),t&&t.scope_.parent_||"symbol"===typeof n||!(ax(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))||Nx(e,a)}}}function Nx(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&lx(t,r)}var _x={get(e,t){if(t===Gg)return e;const r=ix(e);if(!rx(r,t))return function(e,t,r){var n;const a=Ax(t,r);return a?"value"in a?a.value:null===(n=a.get)||void 0===n?void 0:n.call(e.draft_):void 0}(e,r,t);const n=r[t];return e.finalized_||!Qg(n)?n:n===Sx(e.base_,t)?(Ex(e),e.copy_[t]=Tx(n,e)):n},has:(e,t)=>t in ix(e),ownKeys:e=>Reflect.ownKeys(ix(e)),set(e,t,r){const n=Ax(ix(e),t);if(null!==n&&void 0!==n&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const n=Sx(ix(e),t),i=null===n||void 0===n?void 0:n[Gg];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(((a=r)===(s=n)?0!==a||1/a===1/s:a!==a&&s!==s)&&(void 0!==r||rx(e.base_,t)))return!0;Ex(e),Cx(e)}var a,s;return e.copy_[t]===r&&(void 0!==r||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==Sx(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,Ex(e),Cx(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const r=ix(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty(){Kg(11)},getPrototypeOf:e=>Yg(e.base_),setPrototypeOf(){Kg(12)}},kx={};function Sx(e,t){const r=e[Gg];return(r?ix(r):e)[t]}function Ax(e,t){if(!(t in e))return;let r=Yg(e);for(;r;){const e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=Yg(r)}}function Cx(e){e.modified_||(e.modified_=!0,e.parent_&&Cx(e.parent_))}function Ex(e){e.copy_||(e.copy_=ox(e.base_,e.scope_.immer_.useStrictShallowCopy_))}ex(_x,(e,t)=>{kx[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),kx.deleteProperty=function(e,t){return kx.set.call(this,e,t,void 0)},kx.set=function(e,t,r){return _x.set.call(this,e[0],t,r,e[0])};function Tx(e,t){const r=ax(e)?mx("MapSet").proxyMap_(e,t):sx(e)?mx("MapSet").proxySet_(e,t):function(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:px(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=_x;r&&(a=[n],s=kx);const{revoke:i,proxy:o}=Proxy.revocable(a,s);return n.draft_=o,n.revoke_=i,o}(e,t);return(t?t.scope_:px()).drafts_.push(r),r}function Px(e){if(!Qg(e)||dx(e))return e;const t=e[Gg];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=ox(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=ox(e,!0);return ex(r,(e,t)=>{nx(r,e,Px(t))},n),t&&(t.finalized_=!1),r}var Ox=new class{constructor(e){var t=this;this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,t,r)=>{if("function"===typeof e&&"function"!==typeof t){const r=t;t=e;const n=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;for(var a=arguments.length,s=new Array(a>1?a-1:0),i=1;i<a;i++)s[i-1]=arguments[i];return n.produce(e,e=>t.call(this,e,...s))}}let n;if("function"!==typeof t&&Kg(6),void 0!==r&&"function"!==typeof r&&Kg(7),Qg(e)){const a=yx(this),s=Tx(e,void 0);let i=!0;try{n=t(s),i=!1}finally{i?gx(a):xx(a)}return fx(a,r),bx(n,a)}if(!e||"object"!==typeof e){if(n=t(e),void 0===n&&(n=e),n===Vg&&(n=void 0),this.autoFreeze_&&lx(n,!0),r){const t=[],a=[];mx("Patches").generateReplacementPatches_(e,n,t,a),r(t,a)}return n}Kg(1)},this.produceWithPatches=(e,r)=>{if("function"===typeof e)return function(r){for(var n=arguments.length,a=new Array(n>1?n-1:0),s=1;s<n;s++)a[s-1]=arguments[s];return t.produceWithPatches(r,t=>e(t,...a))};let n,a;const s=this.produce(e,r,(e,t)=>{n=e,a=t});return[s,n,a]},"boolean"===typeof(null===e||void 0===e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"===typeof(null===e||void 0===e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),"boolean"===typeof(null===e||void 0===e?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Qg(e)||Kg(8),Xg(e)&&(e=function(e){Xg(e)||Kg(10);return Px(e)}(e));const t=yx(this),r=Tx(e,void 0);return r[Gg].isManual_=!0,xx(t),r}finishDraft(e,t){const r=e&&e[Gg];r&&r.isManual_||Kg(9);const{scope_:n}=r;return fx(n,t),bx(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));const n=mx("Patches").applyPatches_;return Xg(e)?n(e,t):this.produce(e,e=>n(e,t))}};Ox.produce;var Dx={active:!1,index:null,dataKey:void 0,coordinate:void 0},Ix=Gf({name:"tooltip",initialState:{itemInteraction:{click:Dx,hover:Dx},axisInteraction:{click:Dx,hover:Dx},keyboardInteraction:Dx,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Mf()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:r,next:n}=t.payload,a=mf(e).tooltipItemPayloads.indexOf(r);a>-1&&(e.tooltipItemPayloads[a]=n)},prepare:Mf()},removeTooltipEntrySettings:{reducer(e,t){var r=mf(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:Mf()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:Lx,replaceTooltipEntrySettings:Mx,removeTooltipEntrySettings:Rx,setTooltipSettingsState:Fx,setActiveMouseOverItemIndex:Bx,mouseLeaveItem:zx,mouseLeaveChart:Ux,setActiveClickItemIndex:qx,setMouseOverAxisIndex:Wx,setMouseClickAxisIndex:Vx,setSyncInteraction:Hx,setKeyboardInteraction:Gx}=Ix.actions,Kx=Ix.reducer,Yx=Gf({name:"chartData",initialState:{chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},reducers:{setChartData(e,t){if(e.chartData=t.payload,null==t.payload)return e.dataStartIndex=0,void(e.dataEndIndex=0);t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;null!=r&&(e.dataStartIndex=r),null!=n&&(e.dataEndIndex=n)}}}),{setChartData:Xx,setDataStartEndIndexes:Qx,setComputedData:$x}=Yx.actions,Jx=Yx.reducer,Zx=Gf({name:"chartLayout",initialState:{layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,a,s;e.margin.top=null!==(r=t.payload.top)&&void 0!==r?r:0,e.margin.right=null!==(n=t.payload.right)&&void 0!==n?n:0,e.margin.bottom=null!==(a=t.payload.bottom)&&void 0!==a?a:0,e.margin.left=null!==(s=t.payload.left)&&void 0!==s?s:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:ey,setLayout:ty,setChartSize:ry,setScale:ny}=Zx.actions,ay=Zx.reducer;function sy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected a function, instead received ".concat(typeof e);if("function"!==typeof e)throw new TypeError(t)}var iy=e=>Array.isArray(e)?e:[e];function oy(e){const t=Array.isArray(e[0])?e[0]:e;return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected all items to be functions, instead received the following types: ";if(!e.every(e=>"function"===typeof e)){const r=e.map(e=>"function"===typeof e?"function ".concat(e.name||"unnamed","()"):typeof e).join(", ");throw new TypeError("".concat(t,"[").concat(r,"]"))}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}Symbol(),Object.getPrototypeOf({});var ly="undefined"!==typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}};function cy(){return{s:0,v:void 0,o:null,p:null}}function dy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={s:0,v:void 0,o:null,p:null};const{resultEqualityCheck:n}=t;let a,s=0;function i(){let t=r;const{length:i}=arguments;for(let e=0,r=i;e<r;e++){const r=arguments[e];if("function"===typeof r||"object"===typeof r&&null!==r){let e=t.o;null===e&&(t.o=e=new WeakMap);const n=e.get(r);void 0===n?(t=cy(),e.set(r,t)):t=n}else{let e=t.p;null===e&&(t.p=e=new Map);const n=e.get(r);void 0===n?(t=cy(),e.set(r,t)):t=n}}const o=t;let l;if(1===t.s)l=t.v;else if(l=e.apply(null,arguments),s++,n){var c,d,u;const e=null!==(c=null===(d=a)||void 0===d||null===(u=d.deref)||void 0===u?void 0:u.call(d))&&void 0!==c?c:a;null!=e&&n(e,l)&&(l=e,0!==s&&s--);a="object"===typeof l&&null!==l||"function"===typeof l?new ly(l):l}return o.s=1,o.v=l,l}return i.clearCache=()=>{r={s:0,v:void 0,o:null,p:null},i.resetResultsCount()},i.resultsCount=()=>s,i.resetResultsCount=()=>{s=0},i}function uy(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];const a="function"===typeof e?{memoize:e,memoizeOptions:r}:e,s=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let n,s=0,i=0,o={},l=t.pop();"object"===typeof l&&(o=l,l=t.pop()),sy(l,"createSelector expects an output function after the inputs, but received: [".concat(typeof l,"]"));const c=Be(Be({},a),o),{memoize:d,memoizeOptions:u=[],argsMemoize:h=dy,argsMemoizeOptions:m=[],devModeChecks:p={}}=c,f=iy(u),g=iy(m),x=oy(t),y=d(function(){return s++,l.apply(null,arguments)},...f);const v=h(function(){i++;const e=function(e,t){const r=[],{length:n}=e;for(let a=0;a<n;a++)r.push(e[a].apply(null,t));return r}(x,arguments);return n=y.apply(null,e),n},...g);return Object.assign(v,{resultFunc:l,memoizedResultFunc:y,dependencies:x,dependencyRecomputations:()=>i,resetDependencyRecomputations:()=>{i=0},lastResult:()=>n,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:d,argsMemoize:h})};return Object.assign(s,{withTypes:()=>s}),s}var hy=uy(dy),my=Object.assign(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hy;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected an object, instead received ".concat(typeof e);if("object"!==typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ".concat(typeof e));const r=Object.keys(e),n=t(r.map(t=>e[t]),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((e,t,n)=>(e[r[n]]=t,e),{})});return n},{withTypes:()=>my}),py=r(8443),fy=(0,a.createContext)(null),gy=e=>e,xy=()=>{var e=(0,a.useContext)(fy);return e?e.store.dispatch:gy},yy=()=>{},vy=()=>yy,by=(e,t)=>e===t;function jy(e){var t=(0,a.useContext)(fy);return(0,py.useSyncExternalStoreWithSelector)(t?t.subscription.addNestedSub:vy,t?t.store.getState:yy,t?t.store.getState:yy,t?e:yy,by)}var wy=r(3821),Ny=r.n(wy),_y=e=>e.legend.settings,ky=hy([e=>e.legend.payload,_y],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?Ny()(n,r):n});function Sy(e,t){if((a=e.length)>1)for(var r,n,a,s=1,i=e[t[0]],o=i.length;s<a;++s)for(n=i,i=e[t[s]],r=0;r<o;++r)i[r][1]+=i[r][0]=isNaN(n[r][1])?n[r][0]:n[r][1]}Array.prototype.slice;function Ay(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function Cy(e){return function(){return e}}function Ey(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function Ty(e,t){return e[t]}function Py(e){const t=[];return t.key=e,t}function Oy(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function Dy(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Iy(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Dy(Object(r),!0).forEach(function(t){Ly(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dy(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Ly(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function My(e,t,r){return Fm(e)||Fm(t)?r:Pm(t)?Sm()(e,t,r):"function"===typeof t?t(e):r}var Ry=(e,t)=>"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t,Fy=(e,t,r,n)=>{if(n)return e.map(e=>e.coordinate);var a,s,i=e.map(e=>(e.coordinate===t&&(a=!0),e.coordinate===r&&(s=!0),e.coordinate));return a||i.push(t),s||i.push(r),i},By=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:a,range:s,scale:i,realScaleType:o,isCategorical:l,categoricalDomain:c,tickCount:d,ticks:u,niceTicks:h,axisType:m}=e;if(!i)return null;var p="scaleBand"===o&&i.bandwidth?i.bandwidth()/2:2,f=(t||r)&&"category"===a&&i.bandwidth?i.bandwidth()/p:0;if(f="angleAxis"===m&&s&&s.length>=2?2*Am(s[0]-s[1])*f:f,t&&(u||h)){var g=(u||h||[]).map((e,t)=>{var r=n?n.indexOf(e):e;return{coordinate:i(r)+f,value:e,offset:f,index:t}});return g.filter(e=>!Cm(e.coordinate))}return l&&c?c.map((e,t)=>({coordinate:i(e)+f,value:e,index:t,offset:f})):i.ticks&&!r&&null!=d?i.ticks(d).map((e,t)=>({coordinate:i(e)+f,value:e,offset:f,index:t})):i.domain().map((e,t)=>({coordinate:i(e)+f,value:n?n[e]:e,index:t,offset:f}))},zy=1e-4,Uy={sign:e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0,i=0;i<t;++i){var o=Cm(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=a,e[i][r][1]=a+o,a=e[i][r][1]):(e[i][r][0]=s,e[i][r][1]=s+o,s=e[i][r][1])}},expand:function(e,t){if((n=e.length)>0){for(var r,n,a,s=0,i=e[0].length;s<i;++s){for(a=r=0;r<n;++r)a+=e[r][s][1]||0;if(a)for(r=0;r<n;++r)e[r][s][1]/=a}Sy(e,t)}},none:Sy,silhouette:function(e,t){if((r=e.length)>0){for(var r,n=0,a=e[t[0]],s=a.length;n<s;++n){for(var i=0,o=0;i<r;++i)o+=e[i][n][1]||0;a[n][1]+=a[n][0]=-o/2}Sy(e,t)}},wiggle:function(e,t){if((a=e.length)>0&&(n=(r=e[t[0]]).length)>0){for(var r,n,a,s=0,i=1;i<n;++i){for(var o=0,l=0,c=0;o<a;++o){for(var d=e[t[o]],u=d[i][1]||0,h=(u-(d[i-1][1]||0))/2,m=0;m<o;++m){var p=e[t[m]];h+=(p[i][1]||0)-(p[i-1][1]||0)}l+=u,c+=h*u}r[i-1][1]+=r[i-1][0]=s,l&&(s-=c/l)}r[i-1][1]+=r[i-1][0]=s,Sy(e,t)}},positive:e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0;s<t;++s){var i=Cm(e[s][r][1])?e[s][r][0]:e[s][r][1];i>=0?(e[s][r][0]=a,e[s][r][1]=a+i,a=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}}},qy=(e,t,r)=>{var n=Uy[r],a=function(){var e=Cy([]),t=Ey,r=Sy,n=Ty;function a(a){var s,i,o=Array.from(e.apply(this,arguments),Py),l=o.length,c=-1;for(const e of a)for(s=0,++c;s<l;++s)(o[s][c]=[0,+n(e,o[s].key,c,a)]).data=e;for(s=0,i=Ay(t(o));s<l;++s)o[i[s]].index=s;return r(o,i),o}return a.keys=function(t){return arguments.length?(e="function"===typeof t?t:Cy(Array.from(t)),a):e},a.value=function(e){return arguments.length?(n="function"===typeof e?e:Cy(+e),a):n},a.order=function(e){return arguments.length?(t=null==e?Ey:"function"===typeof e?e:Cy(Array.from(e)),a):t},a.offset=function(e){return arguments.length?(r=null==e?Sy:e,a):r},a}().keys(t).value((e,t)=>Number(My(e,t,0))).order(Ey).offset(n);return a(e)};function Wy(e){return null==e?void 0:String(e)}function Vy(e){var{axis:t,ticks:r,bandSize:n,entry:a,index:s,dataKey:i}=e;if("category"===t.type){if(!t.allowDuplicatedCategory&&t.dataKey&&!Fm(a[t.dataKey])){var o=Rm(r,"value",a[t.dataKey]);if(o)return o.coordinate+n/2}return r[s]?r[s].coordinate+n/2:null}var l=My(a,Fm(i)?t.dataKey:i);return Fm(l)?null:t.scale(l)}var Hy=e=>{var{axis:t,ticks:r,offset:n,bandSize:a,entry:s,index:i}=e;if("category"===t.type)return r[i]?r[i].coordinate+n:null;var o=My(s,t.dataKey,t.scale.domain()[i]);return Fm(o)?null:t.scale(o)-a/2+n},Gy=(e,t,r)=>{var n;if(null!=e)return n=Object.keys(e).reduce((n,a)=>{var s=e[a],{stackedData:i}=s,o=i.reduce((e,n)=>{var a=(e=>{var t=e.flat(2).filter(Tm);return[Math.min(...t),Math.max(...t)]})(Oy(n,t,r));return[Math.min(e[0],a[0]),Math.max(e[1],a[1])]},[1/0,-1/0]);return[Math.min(o[0],n[0]),Math.max(o[1],n[1])]},[1/0,-1/0]),[n[0]===1/0?0:n[0],n[1]===-1/0?0:n[1]]},Ky=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Yy=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Xy=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=Ny()(t,e=>e.coordinate),s=1/0,i=1,o=a.length;i<o;i++){var l=a[i],c=a[i-1];s=Math.min((l.coordinate||0)-(c.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0};function Qy(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:a,name:s}=e;return Iy(Iy({},t),{},{dataKey:r,payload:n,value:a,name:s})}function $y(e,t){return e?String(e):"string"===typeof t?t:void 0}var Jy=e=>e.layout.width,Zy=e=>e.layout.height,ev=e=>e.layout.scale,tv=e=>e.layout.margin,rv=hy(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),nv=hy(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),av="data-recharts-item-index",sv="data-recharts-item-data-key";function iv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ov(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?iv(Object(r),!0).forEach(function(t){lv(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iv(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function lv(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var cv=hy([Jy,Zy,tv,e=>e.brush.height,function(e){return nv(e).reduce((e,t)=>"left"!==t.orientation||t.mirror||t.hide?e:e+("number"===typeof t.width?t.width:60),0)},function(e){return nv(e).reduce((e,t)=>"right"!==t.orientation||t.mirror||t.hide?e:e+("number"===typeof t.width?t.width:60),0)},function(e){return rv(e).reduce((e,t)=>"top"!==t.orientation||t.mirror||t.hide?e:e+t.height,0)},function(e){return rv(e).reduce((e,t)=>"bottom"!==t.orientation||t.mirror||t.hide?e:e+t.height,0)},_y,e=>e.legend.size],(e,t,r,n,a,s,i,o,l,c)=>{var d={left:(r.left||0)+a,right:(r.right||0)+s},u=ov(ov({},{top:(r.top||0)+i,bottom:(r.bottom||0)+o}),d),h=u.bottom;u.bottom+=n,u=((e,t,r)=>{if(t&&r){var{width:n,height:a}=r,{align:s,verticalAlign:i,layout:o}=t;if(("vertical"===o||"horizontal"===o&&"middle"===i)&&"center"!==s&&Tm(e[s]))return Iy(Iy({},e),{},{[s]:e[s]+(n||0)});if(("horizontal"===o||"vertical"===o&&"center"===s)&&"middle"!==i&&Tm(e[i]))return Iy(Iy({},e),{},{[i]:e[i]+(a||0)})}return e})(u,l,c);var m=e-u.left-u.right,p=t-u.top-u.bottom;return ov(ov({brushBottom:h},u),{},{width:Math.max(m,0),height:Math.max(p,0)})}),dv=hy(cv,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),uv=hy(Jy,Zy,(e,t)=>({x:0,y:0,width:e,height:t})),hv=(0,a.createContext)(null),mv=()=>null!=(0,a.useContext)(hv),pv=e=>e.brush,fv=hy([pv,cv,tv],(e,t,r)=>({height:e.height,x:Tm(e.x)?e.x:t.left,y:Tm(e.y)?e.y:t.top+t.height+t.brushBottom-((null===r||void 0===r?void 0:r.bottom)||0),width:Tm(e.width)?e.width:t.width}));function gv(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var xv=()=>{var e,t=mv(),r=jy(dv),n=jy(fv),a=null===(e=jy(pv))||void 0===e?void 0:e.padding;return t&&n&&a?{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}:r},yv={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},vv=()=>{var e;return null!==(e=jy(cv))&&void 0!==e?e:yv},bv=()=>jy(Jy),jv=()=>jy(Zy),wv=e=>e.layout.layoutType,Nv=()=>jy(wv),_v=e=>{var t=xy(),r=mv(),{width:n,height:s}=e,i=np(),o=n,l=s;return i&&(o=i.width>0?i.width:n,l=i.height>0?i.height:s),(0,a.useEffect)(()=>{!r&&Qm(o)&&Qm(l)&&t(ry({width:o,height:l}))},[t,r,o,l]),null},kv=r(9859),Sv=r.n(kv);function Av(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function Cv(e,t){switch(arguments.length){case 0:break;case 1:"function"===typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"===typeof t?this.interpolator(t):this.range(t)}return this}class Ev extends Map{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Dv;if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[r,n]of e)this.set(r,n)}get(e){return super.get(Tv(this,e))}has(e){return super.has(Tv(this,e))}set(e,t){return super.set(Pv(this,e),t)}delete(e){return super.delete(Ov(this,e))}}Set;function Tv(e,t){let{_intern:r,_key:n}=e;const a=n(t);return r.has(a)?r.get(a):t}function Pv(e,t){let{_intern:r,_key:n}=e;const a=n(t);return r.has(a)?r.get(a):(r.set(a,t),t)}function Ov(e,t){let{_intern:r,_key:n}=e;const a=n(t);return r.has(a)&&(t=r.get(a),r.delete(a)),t}function Dv(e){return null!==e&&"object"===typeof e?e.valueOf():e}const Iv=Symbol("implicit");function Lv(){var e=new Ev,t=[],r=[],n=Iv;function a(a){let s=e.get(a);if(void 0===s){if(n!==Iv)return n;e.set(a,s=t.push(a)-1)}return r[s%r.length]}return a.domain=function(r){if(!arguments.length)return t.slice();t=[],e=new Ev;for(const n of r)e.has(n)||e.set(n,t.push(n)-1);return a},a.range=function(e){return arguments.length?(r=Array.from(e),a):r.slice()},a.unknown=function(e){return arguments.length?(n=e,a):n},a.copy=function(){return Lv(t,r).unknown(n)},Av.apply(a,arguments),a}function Mv(){var e,t,r=Lv().unknown(void 0),n=r.domain,a=r.range,s=0,i=1,o=!1,l=0,c=0,d=.5;function u(){var r=n().length,u=i<s,h=u?i:s,m=u?s:i;e=(m-h)/Math.max(1,r-l+2*c),o&&(e=Math.floor(e)),h+=(m-h-e*(r-l))*d,t=e*(1-l),o&&(h=Math.round(h),t=Math.round(t));var p=function(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=0|Math.max(0,Math.ceil((t-e)/r)),s=new Array(a);++n<a;)s[n]=e+n*r;return s}(r).map(function(t){return h+e*t});return a(u?p.reverse():p)}return delete r.unknown,r.domain=function(e){return arguments.length?(n(e),u()):n()},r.range=function(e){return arguments.length?([s,i]=e,s=+s,i=+i,u()):[s,i]},r.rangeRound=function(e){return[s,i]=e,s=+s,i=+i,o=!0,u()},r.bandwidth=function(){return t},r.step=function(){return e},r.round=function(e){return arguments.length?(o=!!e,u()):o},r.padding=function(e){return arguments.length?(l=Math.min(1,c=+e),u()):l},r.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),u()):l},r.paddingOuter=function(e){return arguments.length?(c=+e,u()):c},r.align=function(e){return arguments.length?(d=Math.max(0,Math.min(1,e)),u()):d},r.copy=function(){return Mv(n(),[s,i]).round(o).paddingInner(l).paddingOuter(c).align(d)},Av.apply(u(),arguments)}function Rv(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Rv(t())},e}function Fv(){return Rv(Mv.apply(null,arguments).paddingInner(1))}const Bv=Math.sqrt(50),zv=Math.sqrt(10),Uv=Math.sqrt(2);function qv(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),i=s>=Bv?10:s>=zv?5:s>=Uv?2:1;let o,l,c;return a<0?(c=Math.pow(10,-a)/i,o=Math.round(e*c),l=Math.round(t*c),o/c<e&&++o,l/c>t&&--l,c=-c):(c=Math.pow(10,a)*i,o=Math.round(e/c),l=Math.round(t/c),o*c<e&&++o,l*c>t&&--l),l<o&&.5<=r&&r<2?qv(e,t,2*r):[o,l,c]}function Wv(e,t,r){if(!((r=+r)>0))return[];if((e=+e)===(t=+t))return[e];const n=t<e,[a,s,i]=n?qv(t,e,r):qv(e,t,r);if(!(s>=a))return[];const o=s-a+1,l=new Array(o);if(n)if(i<0)for(let c=0;c<o;++c)l[c]=(s-c)/-i;else for(let c=0;c<o;++c)l[c]=(s-c)*i;else if(i<0)for(let c=0;c<o;++c)l[c]=(a+c)/-i;else for(let c=0;c<o;++c)l[c]=(a+c)*i;return l}function Vv(e,t,r){return qv(e=+e,t=+t,r=+r)[2]}function Hv(e,t,r){r=+r;const n=(t=+t)<(e=+e),a=n?Vv(t,e,r):Vv(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function Gv(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Kv(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Yv(e){let t,r,n;function a(e,n){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<s){if(0!==t(n,n))return s;do{const t=a+s>>>1;r(e[t],n)<0?a=t+1:s=t}while(a<s)}return a}return 2!==e.length?(t=Gv,r=(t,r)=>Gv(e(t),r),n=(t,r)=>e(t)-r):(t=e===Gv||e===Kv?e:Xv,r=e,n=e),{left:a,center:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const s=a(e,t,r,(arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length)-1);return s>r&&n(e[s-1],t)>-n(e[s],t)?s-1:s},right:function(e,n){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<s){if(0!==t(n,n))return s;do{const t=a+s>>>1;r(e[t],n)<=0?a=t+1:s=t}while(a<s)}return a}}}function Xv(){return 0}function Qv(e){return null===e?NaN:+e}const $v=Yv(Gv),Jv=$v.right,Zv=($v.left,Yv(Qv).center,Jv);function eb(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function tb(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function rb(){}var nb=.7,ab=1/nb,sb="\\s*([+-]?\\d+)\\s*",ib="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ob="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",lb=/^#([0-9a-f]{3,8})$/,cb=new RegExp("^rgb\\(".concat(sb,",").concat(sb,",").concat(sb,"\\)$")),db=new RegExp("^rgb\\(".concat(ob,",").concat(ob,",").concat(ob,"\\)$")),ub=new RegExp("^rgba\\(".concat(sb,",").concat(sb,",").concat(sb,",").concat(ib,"\\)$")),hb=new RegExp("^rgba\\(".concat(ob,",").concat(ob,",").concat(ob,",").concat(ib,"\\)$")),mb=new RegExp("^hsl\\(".concat(ib,",").concat(ob,",").concat(ob,"\\)$")),pb=new RegExp("^hsla\\(".concat(ib,",").concat(ob,",").concat(ob,",").concat(ib,"\\)$")),fb={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function gb(){return this.rgb().formatHex()}function xb(){return this.rgb().formatRgb()}function yb(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=lb.exec(e))?(r=t[1].length,t=parseInt(t[1],16),6===r?vb(t):3===r?new wb(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===r?bb(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===r?bb(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=cb.exec(e))?new wb(t[1],t[2],t[3],1):(t=db.exec(e))?new wb(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=ub.exec(e))?bb(t[1],t[2],t[3],t[4]):(t=hb.exec(e))?bb(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=mb.exec(e))?Cb(t[1],t[2]/100,t[3]/100,1):(t=pb.exec(e))?Cb(t[1],t[2]/100,t[3]/100,t[4]):fb.hasOwnProperty(e)?vb(fb[e]):"transparent"===e?new wb(NaN,NaN,NaN,0):null}function vb(e){return new wb(e>>16&255,e>>8&255,255&e,1)}function bb(e,t,r,n){return n<=0&&(e=t=r=NaN),new wb(e,t,r,n)}function jb(e,t,r,n){return 1===arguments.length?function(e){return e instanceof rb||(e=yb(e)),e?new wb((e=e.rgb()).r,e.g,e.b,e.opacity):new wb}(e):new wb(e,t,r,null==n?1:n)}function wb(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}function Nb(){return"#".concat(Ab(this.r)).concat(Ab(this.g)).concat(Ab(this.b))}function _b(){const e=kb(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(Sb(this.r),", ").concat(Sb(this.g),", ").concat(Sb(this.b)).concat(1===e?")":", ".concat(e,")"))}function kb(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Sb(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ab(e){return((e=Sb(e))<16?"0":"")+e.toString(16)}function Cb(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Tb(e,t,r,n)}function Eb(e){if(e instanceof Tb)return new Tb(e.h,e.s,e.l,e.opacity);if(e instanceof rb||(e=yb(e)),!e)return new Tb;if(e instanceof Tb)return e;var t=(e=e.rgb()).r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),s=Math.max(t,r,n),i=NaN,o=s-a,l=(s+a)/2;return o?(i=t===s?(r-n)/o+6*(r<n):r===s?(n-t)/o+2:(t-r)/o+4,o/=l<.5?s+a:2-s-a,i*=60):o=l>0&&l<1?0:i,new Tb(i,o,l,e.opacity)}function Tb(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}function Pb(e){return(e=(e||0)%360)<0?e+360:e}function Ob(e){return Math.max(0,Math.min(1,e||0))}function Db(e,t,r){return 255*(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)}function Ib(e,t,r,n,a){var s=e*e,i=s*e;return((1-3*e+3*s-i)*t+(4-6*s+3*i)*r+(1+3*e+3*s-3*i)*n+i*a)/6}eb(rb,yb,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:gb,formatHex:gb,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Eb(this).formatHsl()},formatRgb:xb,toString:xb}),eb(wb,jb,tb(rb,{brighter(e){return e=null==e?ab:Math.pow(ab,e),new wb(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?nb:Math.pow(nb,e),new wb(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new wb(Sb(this.r),Sb(this.g),Sb(this.b),kb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Nb,formatHex:Nb,formatHex8:function(){return"#".concat(Ab(this.r)).concat(Ab(this.g)).concat(Ab(this.b)).concat(Ab(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:_b,toString:_b})),eb(Tb,function(e,t,r,n){return 1===arguments.length?Eb(e):new Tb(e,t,r,null==n?1:n)},tb(rb,{brighter(e){return e=null==e?ab:Math.pow(ab,e),new Tb(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?nb:Math.pow(nb,e),new Tb(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new wb(Db(e>=240?e-240:e+120,a,n),Db(e,a,n),Db(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new Tb(Pb(this.h),Ob(this.s),Ob(this.l),kb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=kb(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(Pb(this.h),", ").concat(100*Ob(this.s),"%, ").concat(100*Ob(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));const Lb=e=>()=>e;function Mb(e,t){return function(r){return e+r*t}}function Rb(e){return 1===(e=+e)?Fb:function(t,r){return r-t?function(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}(t,r,e):Lb(isNaN(t)?r:t)}}function Fb(e,t){var r=t-e;return r?Mb(e,r):Lb(isNaN(e)?t:e)}const Bb=function e(t){var r=Rb(t);function n(e,t){var n=r((e=jb(e)).r,(t=jb(t)).r),a=r(e.g,t.g),s=r(e.b,t.b),i=Fb(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=a(t),e.b=s(t),e.opacity=i(t),e+""}}return n.gamma=e,n}(1);function zb(e){return function(t){var r,n,a=t.length,s=new Array(a),i=new Array(a),o=new Array(a);for(r=0;r<a;++r)n=jb(t[r]),s[r]=n.r||0,i[r]=n.g||0,o[r]=n.b||0;return s=e(s),i=e(i),o=e(o),n.opacity=1,function(e){return n.r=s(e),n.g=i(e),n.b=o(e),n+""}}}zb(function(e){var t=e.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),a=e[n],s=e[n+1],i=n>0?e[n-1]:2*a-s,o=n<t-1?e[n+2]:2*s-a;return Ib((r-n/t)*t,i,a,s,o)}}),zb(function(e){var t=e.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*t),a=e[(n+t-1)%t],s=e[n%t],i=e[(n+1)%t],o=e[(n+2)%t];return Ib((r-n/t)*t,a,s,i,o)}});function Ub(e,t){var r,n=t?t.length:0,a=e?Math.min(n,e.length):0,s=new Array(a),i=new Array(n);for(r=0;r<a;++r)s[r]=Xb(e[r],t[r]);for(;r<n;++r)i[r]=t[r];return function(e){for(r=0;r<a;++r)i[r]=s[r](e);return i}}function qb(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Wb(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Vb(e,t){var r,n={},a={};for(r in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)r in e?n[r]=Xb(e[r],t[r]):a[r]=t[r];return function(e){for(r in n)a[r]=n[r](e);return a}}var Hb=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Gb=new RegExp(Hb.source,"g");function Kb(e,t){var r,n,a,s=Hb.lastIndex=Gb.lastIndex=0,i=-1,o=[],l=[];for(e+="",t+="";(r=Hb.exec(e))&&(n=Gb.exec(t));)(a=n.index)>s&&(a=t.slice(s,a),o[i]?o[i]+=a:o[++i]=a),(r=r[0])===(n=n[0])?o[i]?o[i]+=n:o[++i]=n:(o[++i]=null,l.push({i:i,x:Wb(r,n)})),s=Gb.lastIndex;return s<t.length&&(a=t.slice(s),o[i]?o[i]+=a:o[++i]=a),o.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var r,n=0;n<t;++n)o[(r=l[n]).i]=r.x(e);return o.join("")})}function Yb(e,t){t||(t=[]);var r,n=e?Math.min(t.length,e.length):0,a=t.slice();return function(s){for(r=0;r<n;++r)a[r]=e[r]*(1-s)+t[r]*s;return a}}function Xb(e,t){var r,n,a=typeof t;return null==t||"boolean"===a?Lb(t):("number"===a?Wb:"string"===a?(r=yb(t))?(t=r,Bb):Kb:t instanceof yb?Bb:t instanceof Date?qb:(n=t,!ArrayBuffer.isView(n)||n instanceof DataView?Array.isArray(t)?Ub:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?Vb:Wb:Yb))(e,t)}function Qb(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function $b(e){return+e}var Jb=[0,1];function Zb(e){return e}function ej(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:(r=isNaN(t)?NaN:.5,function(){return r});var r}function tj(e,t,r){var n=e[0],a=e[1],s=t[0],i=t[1];return a<n?(n=ej(a,n),s=r(i,s)):(n=ej(n,a),s=r(s,i)),function(e){return s(n(e))}}function rj(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),s=new Array(n),i=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<n;)a[i]=ej(e[i],e[i+1]),s[i]=r(t[i],t[i+1]);return function(t){var r=Zv(e,t,1,n)-1;return s[r](a[r](t))}}function nj(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function aj(){var e,t,r,n,a,s,i=Jb,o=Jb,l=Xb,c=Zb;function d(){var e=Math.min(i.length,o.length);return c!==Zb&&(c=function(e,t){var r;return e>t&&(r=e,e=t,t=r),function(r){return Math.max(e,Math.min(t,r))}}(i[0],i[e-1])),n=e>2?rj:tj,a=s=null,u}function u(t){return null==t||isNaN(t=+t)?r:(a||(a=n(i.map(e),o,l)))(e(c(t)))}return u.invert=function(r){return c(t((s||(s=n(o,i.map(e),Wb)))(r)))},u.domain=function(e){return arguments.length?(i=Array.from(e,$b),d()):i.slice()},u.range=function(e){return arguments.length?(o=Array.from(e),d()):o.slice()},u.rangeRound=function(e){return o=Array.from(e),l=Qb,d()},u.clamp=function(e){return arguments.length?(c=!!e||Zb,d()):c!==Zb},u.interpolate=function(e){return arguments.length?(l=e,d()):l},u.unknown=function(e){return arguments.length?(r=e,u):r},function(r,n){return e=r,t=n,d()}}function sj(){return aj()(Zb,Zb)}var ij,oj=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function lj(e){if(!(t=oj.exec(e)))throw new Error("invalid format: "+e);var t;return new cj({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function cj(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function dj(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function uj(e){return(e=dj(Math.abs(e)))?e[1]:NaN}function hj(e,t){var r=dj(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}lj.prototype=cj.prototype,cj.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const mj={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>hj(100*e,t),r:hj,s:function(e,t){var r=dj(e,t);if(!r)return e+"";var n=r[0],a=r[1],s=a-(ij=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,i=n.length;return s===i?n:s>i?n+new Array(s-i+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+dj(e,Math.max(0,t+s-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function pj(e){return e}var fj,gj,xj,yj=Array.prototype.map,vj=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function bj(e){var t,r,n=void 0===e.grouping||void 0===e.thousands?pj:(t=yj.call(e.grouping,Number),r=e.thousands+"",function(e,n){for(var a=e.length,s=[],i=0,o=t[0],l=0;a>0&&o>0&&(l+o+1>n&&(o=Math.max(1,n-l)),s.push(e.substring(a-=o,a+o)),!((l+=o+1)>n));)o=t[i=(i+1)%t.length];return s.reverse().join(r)}),a=void 0===e.currency?"":e.currency[0]+"",s=void 0===e.currency?"":e.currency[1]+"",i=void 0===e.decimal?".":e.decimal+"",o=void 0===e.numerals?pj:function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}(yj.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"\u2212":e.minus+"",d=void 0===e.nan?"NaN":e.nan+"";function u(e){var t=(e=lj(e)).fill,r=e.align,u=e.sign,h=e.symbol,m=e.zero,p=e.width,f=e.comma,g=e.precision,x=e.trim,y=e.type;"n"===y?(f=!0,y="g"):mj[y]||(void 0===g&&(g=12),x=!0,y="g"),(m||"0"===t&&"="===r)&&(m=!0,t="0",r="=");var v="$"===h?a:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",b="$"===h?s:/[%p]/.test(y)?l:"",j=mj[y],w=/[defgprs%]/.test(y);function N(e){var a,s,l,h=v,N=b;if("c"===y)N=j(e)+N,e="";else{var _=(e=+e)<0||1/e<0;if(e=isNaN(e)?d:j(Math.abs(e),g),x&&(e=function(e){e:for(var t,r=e.length,n=1,a=-1;n<r;++n)switch(e[n]){case".":a=t=n;break;case"0":0===a&&(a=n),t=n;break;default:if(!+e[n])break e;a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(t+1):e}(e)),_&&0===+e&&"+"!==u&&(_=!1),h=(_?"("===u?u:c:"-"===u||"("===u?"":u)+h,N=("s"===y?vj[8+ij/3]:"")+N+(_&&"("===u?")":""),w)for(a=-1,s=e.length;++a<s;)if(48>(l=e.charCodeAt(a))||l>57){N=(46===l?i+e.slice(a+1):e.slice(a))+N,e=e.slice(0,a);break}}f&&!m&&(e=n(e,1/0));var k=h.length+e.length+N.length,S=k<p?new Array(p-k+1).join(t):"";switch(f&&m&&(e=n(S+e,S.length?p-N.length:1/0),S=""),r){case"<":e=h+e+N+S;break;case"=":e=h+S+e+N;break;case"^":e=S.slice(0,k=S.length>>1)+h+e+N+S.slice(k);break;default:e=S+h+e+N}return o(e)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),N.toString=function(){return e+""},N}return{format:u,formatPrefix:function(e,t){var r=u(((e=lj(e)).type="f",e)),n=3*Math.max(-8,Math.min(8,Math.floor(uj(t)/3))),a=Math.pow(10,-n),s=vj[8+n/3];return function(e){return r(a*e)+s}}}}function jj(e,t,r,n){var a,s=Hv(e,t,r);switch((n=lj(null==n?",f":n)).type){case"s":var i=Math.max(Math.abs(e),Math.abs(t));return null!=n.precision||isNaN(a=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(uj(t)/3)))-uj(Math.abs(e)))}(s,i))||(n.precision=a),xj(n,i);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(a=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,uj(t)-uj(e))+1}(s,Math.max(Math.abs(e),Math.abs(t))))||(n.precision=a-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(a=function(e){return Math.max(0,-uj(Math.abs(e)))}(s))||(n.precision=a-2*("%"===n.type))}return gj(n)}function wj(e){var t=e.domain;return e.ticks=function(e){var r=t();return Wv(r[0],r[r.length-1],null==e?10:e)},e.tickFormat=function(e,r){var n=t();return jj(n[0],n[n.length-1],null==e?10:e,r)},e.nice=function(r){null==r&&(r=10);var n,a,s=t(),i=0,o=s.length-1,l=s[i],c=s[o],d=10;for(c<l&&(a=l,l=c,c=a,a=i,i=o,o=a);d-- >0;){if((a=Vv(l,c,r))===n)return s[i]=l,s[o]=c,t(s);if(a>0)l=Math.floor(l/a)*a,c=Math.ceil(c/a)*a;else{if(!(a<0))break;l=Math.ceil(l*a)/a,c=Math.floor(c*a)/a}n=a}return e},e}function Nj(){var e=sj();return e.copy=function(){return nj(e,Nj())},Av.apply(e,arguments),wj(e)}function _j(e){var t;function r(e){return null==e||isNaN(e=+e)?t:e}return r.invert=r,r.domain=r.range=function(t){return arguments.length?(e=Array.from(t,$b),r):e.slice()},r.unknown=function(e){return arguments.length?(t=e,r):t},r.copy=function(){return _j(e).unknown(t)},e=arguments.length?Array.from(e,$b):[0,1],wj(r)}function kj(e,t){var r,n=0,a=(e=e.slice()).length-1,s=e[n],i=e[a];return i<s&&(r=n,n=a,a=r,r=s,s=i,i=r),e[n]=t.floor(s),e[a]=t.ceil(i),e}function Sj(e){return Math.log(e)}function Aj(e){return Math.exp(e)}function Cj(e){return-Math.log(-e)}function Ej(e){return-Math.exp(-e)}function Tj(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Pj(e){return(t,r)=>-e(-t,r)}function Oj(e){const t=e(Sj,Aj),r=t.domain;let n,a,s=10;function i(){return n=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(s),a=function(e){return 10===e?Tj:e===Math.E?Math.exp:t=>Math.pow(e,t)}(s),r()[0]<0?(n=Pj(n),a=Pj(a),e(Cj,Ej)):e(Sj,Aj),t}return t.base=function(e){return arguments.length?(s=+e,i()):s},t.domain=function(e){return arguments.length?(r(e),i()):r()},t.ticks=e=>{const t=r();let i=t[0],o=t[t.length-1];const l=o<i;l&&([i,o]=[o,i]);let c,d,u=n(i),h=n(o);const m=null==e?10:+e;let p=[];if(!(s%1)&&h-u<m){if(u=Math.floor(u),h=Math.ceil(h),i>0){for(;u<=h;++u)for(c=1;c<s;++c)if(d=u<0?c/a(-u):c*a(u),!(d<i)){if(d>o)break;p.push(d)}}else for(;u<=h;++u)for(c=s-1;c>=1;--c)if(d=u>0?c/a(-u):c*a(u),!(d<i)){if(d>o)break;p.push(d)}2*p.length<m&&(p=Wv(i,o,m))}else p=Wv(u,h,Math.min(h-u,m)).map(a);return l?p.reverse():p},t.tickFormat=(e,r)=>{if(null==e&&(e=10),null==r&&(r=10===s?"s":","),"function"!==typeof r&&(s%1||null!=(r=lj(r)).precision||(r.trim=!0),r=gj(r)),e===1/0)return r;const i=Math.max(1,s*e/t.ticks().length);return e=>{let t=e/a(Math.round(n(e)));return t*s<s-.5&&(t*=s),t<=i?r(e):""}},t.nice=()=>r(kj(r(),{floor:e=>a(Math.floor(n(e))),ceil:e=>a(Math.ceil(n(e)))})),t}function Dj(){const e=Oj(aj()).domain([1,10]);return e.copy=()=>nj(e,Dj()).base(e.base()),Av.apply(e,arguments),e}function Ij(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Lj(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Mj(e){var t=1,r=e(Ij(t),Lj(t));return r.constant=function(r){return arguments.length?e(Ij(t=+r),Lj(t)):t},wj(r)}function Rj(){var e=Mj(aj());return e.copy=function(){return nj(e,Rj()).constant(e.constant())},Av.apply(e,arguments)}function Fj(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Bj(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function zj(e){return e<0?-e*e:e*e}function Uj(e){var t=e(Zb,Zb),r=1;return t.exponent=function(t){return arguments.length?1===(r=+t)?e(Zb,Zb):.5===r?e(Bj,zj):e(Fj(r),Fj(1/r)):r},wj(t)}function qj(){var e=Uj(aj());return e.copy=function(){return nj(e,qj()).exponent(e.exponent())},Av.apply(e,arguments),e}function Wj(){return qj.apply(null,arguments).exponent(.5)}function Vj(e){return Math.sign(e)*e*e}function Hj(){var e,t=sj(),r=[0,1],n=!1;function a(r){var a=function(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}(t(r));return isNaN(a)?e:n?Math.round(a):a}return a.invert=function(e){return t.invert(Vj(e))},a.domain=function(e){return arguments.length?(t.domain(e),a):t.domain()},a.range=function(e){return arguments.length?(t.range((r=Array.from(e,$b)).map(Vj)),a):r.slice()},a.rangeRound=function(e){return a.range(e).round(!0)},a.round=function(e){return arguments.length?(n=!!e,a):n},a.clamp=function(e){return arguments.length?(t.clamp(e),a):t.clamp()},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return Hj(t.domain(),r).round(n).clamp(t.clamp()).unknown(e)},Av.apply(a,arguments),wj(a)}function Gj(e,t){let r;if(void 0===t)for(const n of e)null!=n&&(r<n||void 0===r&&n>=n)&&(r=n);else{let n=-1;for(let a of e)null!=(a=t(a,++n,e))&&(r<a||void 0===r&&a>=a)&&(r=a)}return r}function Kj(e,t){let r;if(void 0===t)for(const n of e)null!=n&&(r>n||void 0===r&&n>=n)&&(r=n);else{let n=-1;for(let a of e)null!=(a=t(a,++n,e))&&(r>a||void 0===r&&a>=a)&&(r=a)}return r}function Yj(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gv;if(e===Gv)return Xj;if("function"!==typeof e)throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||0===n?n:(0===e(r,r))-(0===e(t,t))}}function Xj(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}function Qj(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,a=arguments.length>4?arguments[4]:void 0;if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=void 0===a?Xj:Yj(a);n>r;){if(n-r>600){const s=n-r+1,i=t-r+1,o=Math.log(s),l=.5*Math.exp(2*o/3),c=.5*Math.sqrt(o*l*(s-l)/s)*(i-s/2<0?-1:1);Qj(e,t,Math.max(r,Math.floor(t-i*l/s+c)),Math.min(n,Math.floor(t+(s-i)*l/s+c)),a)}const s=e[t];let i=r,o=n;for($j(e,r,t),a(e[n],s)>0&&$j(e,r,n);i<o;){for($j(e,i,o),++i,--o;a(e[i],s)<0;)++i;for(;a(e[o],s)>0;)--o}0===a(e[r],s)?$j(e,r,o):(++o,$j(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function $j(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function Jj(e,t,r){if(e=Float64Array.from(function*(e,t){if(void 0===t)for(let r of e)null!=r&&(r=+r)>=r&&(yield r);else{let r=-1;for(let n of e)null!=(n=t(n,++r,e))&&(n=+n)>=n&&(yield n)}}(e,r)),(n=e.length)&&!isNaN(t=+t)){if(t<=0||n<2)return Kj(e);if(t>=1)return Gj(e);var n,a=(n-1)*t,s=Math.floor(a),i=Gj(Qj(e,s).subarray(0,s+1));return i+(Kj(e.subarray(s+1))-i)*(a-s)}}function Zj(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qv;if((n=e.length)&&!isNaN(t=+t)){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,s=Math.floor(a),i=+r(e[s],s,e);return i+(+r(e[s+1],s+1,e)-i)*(a-s)}}function ew(){var e,t=[],r=[],n=[];function a(){var e=0,a=Math.max(1,r.length);for(n=new Array(a-1);++e<a;)n[e-1]=Zj(t,e/a);return s}function s(t){return null==t||isNaN(t=+t)?e:r[Zv(n,t)]}return s.invertExtent=function(e){var a=r.indexOf(e);return a<0?[NaN,NaN]:[a>0?n[a-1]:t[0],a<n.length?n[a]:t[t.length-1]]},s.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let r of e)null==r||isNaN(r=+r)||t.push(r);return t.sort(Gv),a()},s.range=function(e){return arguments.length?(r=Array.from(e),a()):r.slice()},s.unknown=function(t){return arguments.length?(e=t,s):e},s.quantiles=function(){return n.slice()},s.copy=function(){return ew().domain(t).range(r).unknown(e)},Av.apply(s,arguments)}function tw(){var e,t=0,r=1,n=1,a=[.5],s=[0,1];function i(t){return null!=t&&t<=t?s[Zv(a,t,0,n)]:e}function o(){var e=-1;for(a=new Array(n);++e<n;)a[e]=((e+1)*r-(e-n)*t)/(n+1);return i}return i.domain=function(e){return arguments.length?([t,r]=e,t=+t,r=+r,o()):[t,r]},i.range=function(e){return arguments.length?(n=(s=Array.from(e)).length-1,o()):s.slice()},i.invertExtent=function(e){var i=s.indexOf(e);return i<0?[NaN,NaN]:i<1?[t,a[0]]:i>=n?[a[n-1],r]:[a[i-1],a[i]]},i.unknown=function(t){return arguments.length?(e=t,i):i},i.thresholds=function(){return a.slice()},i.copy=function(){return tw().domain([t,r]).range(s).unknown(e)},Av.apply(wj(i),arguments)}function rw(){var e,t=[.5],r=[0,1],n=1;function a(a){return null!=a&&a<=a?r[Zv(t,a,0,n)]:e}return a.domain=function(e){return arguments.length?(t=Array.from(e),n=Math.min(t.length,r.length-1),a):t.slice()},a.range=function(e){return arguments.length?(r=Array.from(e),n=Math.min(t.length,r.length-1),a):r.slice()},a.invertExtent=function(e){var n=r.indexOf(e);return[t[n-1],t[n]]},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return rw().domain(t).range(r).unknown(e)},Av.apply(a,arguments)}fj=bj({thousands:",",grouping:[3],currency:["$",""]}),gj=fj.format,xj=fj.formatPrefix;const nw=1e3,aw=6e4,sw=36e5,iw=864e5,ow=6048e5,lw=2592e6,cw=31536e6,dw=new Date,uw=new Date;function hw(e,t,r,n){function a(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return a.floor=t=>(e(t=new Date(+t)),t),a.ceil=r=>(e(r=new Date(r-1)),t(r,1),e(r),r),a.round=e=>{const t=a(e),r=a.ceil(e);return e-t<r-e?t:r},a.offset=(e,r)=>(t(e=new Date(+e),null==r?1:Math.floor(r)),e),a.range=(r,n,s)=>{const i=[];if(r=a.ceil(r),s=null==s?1:Math.floor(s),!(r<n)||!(s>0))return i;let o;do{i.push(o=new Date(+r)),t(r,s),e(r)}while(o<r&&r<n);return i},a.filter=r=>hw(t=>{if(t>=t)for(;e(t),!r(t);)t.setTime(t-1)},(e,n)=>{if(e>=e)if(n<0)for(;++n<=0;)for(;t(e,-1),!r(e););else for(;--n>=0;)for(;t(e,1),!r(e););}),r&&(a.count=(t,n)=>(dw.setTime(+t),uw.setTime(+n),e(dw),e(uw),Math.floor(r(dw,uw))),a.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?a.filter(n?t=>n(t)%e===0:t=>a.count(0,t)%e===0):a:null)),a}const mw=hw(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);mw.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?hw(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):mw:null);mw.range;const pw=hw(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*nw)},(e,t)=>(t-e)/nw,e=>e.getUTCSeconds()),fw=(pw.range,hw(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*nw)},(e,t)=>{e.setTime(+e+t*aw)},(e,t)=>(t-e)/aw,e=>e.getMinutes())),gw=(fw.range,hw(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*aw)},(e,t)=>(t-e)/aw,e=>e.getUTCMinutes())),xw=(gw.range,hw(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*nw-e.getMinutes()*aw)},(e,t)=>{e.setTime(+e+t*sw)},(e,t)=>(t-e)/sw,e=>e.getHours())),yw=(xw.range,hw(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*sw)},(e,t)=>(t-e)/sw,e=>e.getUTCHours())),vw=(yw.range,hw(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*aw)/iw,e=>e.getDate()-1)),bw=(vw.range,hw(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/iw,e=>e.getUTCDate()-1)),jw=(bw.range,hw(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/iw,e=>Math.floor(e/iw)));jw.range;function ww(e){return hw(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+7*t)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*aw)/ow)}const Nw=ww(0),_w=ww(1),kw=ww(2),Sw=ww(3),Aw=ww(4),Cw=ww(5),Ew=ww(6);Nw.range,_w.range,kw.range,Sw.range,Aw.range,Cw.range,Ew.range;function Tw(e){return hw(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)},(e,t)=>(t-e)/ow)}const Pw=Tw(0),Ow=Tw(1),Dw=Tw(2),Iw=Tw(3),Lw=Tw(4),Mw=Tw(5),Rw=Tw(6),Fw=(Pw.range,Ow.range,Dw.range,Iw.range,Lw.range,Mw.range,Rw.range,hw(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear()),e=>e.getMonth())),Bw=(Fw.range,hw(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear()),e=>e.getUTCMonth())),zw=(Bw.range,hw(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear()));zw.every=e=>isFinite(e=Math.floor(e))&&e>0?hw(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)}):null;zw.range;const Uw=hw(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Uw.every=e=>isFinite(e=Math.floor(e))&&e>0?hw(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)}):null;Uw.range;function qw(e,t,r,n,a,s){const i=[[pw,1,nw],[pw,5,5e3],[pw,15,15e3],[pw,30,3e4],[s,1,aw],[s,5,3e5],[s,15,9e5],[s,30,18e5],[a,1,sw],[a,3,108e5],[a,6,216e5],[a,12,432e5],[n,1,iw],[n,2,1728e5],[r,1,ow],[t,1,lw],[t,3,7776e6],[e,1,cw]];function o(t,r,n){const a=Math.abs(r-t)/n,s=Yv(e=>{let[,,t]=e;return t}).right(i,a);if(s===i.length)return e.every(Hv(t/cw,r/cw,n));if(0===s)return mw.every(Math.max(Hv(t,r,n),1));const[o,l]=i[a/i[s-1][2]<i[s][2]/a?s-1:s];return o.every(l)}return[function(e,t,r){const n=t<e;n&&([e,t]=[t,e]);const a=r&&"function"===typeof r.range?r:o(e,t,r),s=a?a.range(e,+t+1):[];return n?s.reverse():s},o]}const[Ww,Vw]=qw(Uw,Bw,Pw,jw,yw,gw),[Hw,Gw]=qw(zw,Fw,Nw,vw,xw,fw);function Kw(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Yw(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Xw(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}var Qw,$w,Jw,Zw={"-":"",_:" ",0:"0"},eN=/^\s*\d+/,tN=/^%/,rN=/[\\^$*+?|[\]().{}]/g;function nN(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",s=a.length;return n+(s<r?new Array(r-s+1).join(t)+a:a)}function aN(e){return e.replace(rN,"\\$&")}function sN(e){return new RegExp("^(?:"+e.map(aN).join("|")+")","i")}function iN(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function oN(e,t,r){var n=eN.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function lN(e,t,r){var n=eN.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function cN(e,t,r){var n=eN.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function dN(e,t,r){var n=eN.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function uN(e,t,r){var n=eN.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function hN(e,t,r){var n=eN.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function mN(e,t,r){var n=eN.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function pN(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function fN(e,t,r){var n=eN.exec(t.slice(r,r+1));return n?(e.q=3*n[0]-3,r+n[0].length):-1}function gN(e,t,r){var n=eN.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function xN(e,t,r){var n=eN.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function yN(e,t,r){var n=eN.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function vN(e,t,r){var n=eN.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function bN(e,t,r){var n=eN.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function jN(e,t,r){var n=eN.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function wN(e,t,r){var n=eN.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function NN(e,t,r){var n=eN.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function _N(e,t,r){var n=tN.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function kN(e,t,r){var n=eN.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function SN(e,t,r){var n=eN.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function AN(e,t){return nN(e.getDate(),t,2)}function CN(e,t){return nN(e.getHours(),t,2)}function EN(e,t){return nN(e.getHours()%12||12,t,2)}function TN(e,t){return nN(1+vw.count(zw(e),e),t,3)}function PN(e,t){return nN(e.getMilliseconds(),t,3)}function ON(e,t){return PN(e,t)+"000"}function DN(e,t){return nN(e.getMonth()+1,t,2)}function IN(e,t){return nN(e.getMinutes(),t,2)}function LN(e,t){return nN(e.getSeconds(),t,2)}function MN(e){var t=e.getDay();return 0===t?7:t}function RN(e,t){return nN(Nw.count(zw(e)-1,e),t,2)}function FN(e){var t=e.getDay();return t>=4||0===t?Aw(e):Aw.ceil(e)}function BN(e,t){return e=FN(e),nN(Aw.count(zw(e),e)+(4===zw(e).getDay()),t,2)}function zN(e){return e.getDay()}function UN(e,t){return nN(_w.count(zw(e)-1,e),t,2)}function qN(e,t){return nN(e.getFullYear()%100,t,2)}function WN(e,t){return nN((e=FN(e)).getFullYear()%100,t,2)}function VN(e,t){return nN(e.getFullYear()%1e4,t,4)}function HN(e,t){var r=e.getDay();return nN((e=r>=4||0===r?Aw(e):Aw.ceil(e)).getFullYear()%1e4,t,4)}function GN(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+nN(t/60|0,"0",2)+nN(t%60,"0",2)}function KN(e,t){return nN(e.getUTCDate(),t,2)}function YN(e,t){return nN(e.getUTCHours(),t,2)}function XN(e,t){return nN(e.getUTCHours()%12||12,t,2)}function QN(e,t){return nN(1+bw.count(Uw(e),e),t,3)}function $N(e,t){return nN(e.getUTCMilliseconds(),t,3)}function JN(e,t){return $N(e,t)+"000"}function ZN(e,t){return nN(e.getUTCMonth()+1,t,2)}function e_(e,t){return nN(e.getUTCMinutes(),t,2)}function t_(e,t){return nN(e.getUTCSeconds(),t,2)}function r_(e){var t=e.getUTCDay();return 0===t?7:t}function n_(e,t){return nN(Pw.count(Uw(e)-1,e),t,2)}function a_(e){var t=e.getUTCDay();return t>=4||0===t?Lw(e):Lw.ceil(e)}function s_(e,t){return e=a_(e),nN(Lw.count(Uw(e),e)+(4===Uw(e).getUTCDay()),t,2)}function i_(e){return e.getUTCDay()}function o_(e,t){return nN(Ow.count(Uw(e)-1,e),t,2)}function l_(e,t){return nN(e.getUTCFullYear()%100,t,2)}function c_(e,t){return nN((e=a_(e)).getUTCFullYear()%100,t,2)}function d_(e,t){return nN(e.getUTCFullYear()%1e4,t,4)}function u_(e,t){var r=e.getUTCDay();return nN((e=r>=4||0===r?Lw(e):Lw.ceil(e)).getUTCFullYear()%1e4,t,4)}function h_(){return"+0000"}function m_(){return"%"}function p_(e){return+e}function f_(e){return Math.floor(+e/1e3)}function g_(e){return new Date(e)}function x_(e){return e instanceof Date?+e:+new Date(+e)}function y_(e,t,r,n,a,s,i,o,l,c){var d=sj(),u=d.invert,h=d.domain,m=c(".%L"),p=c(":%S"),f=c("%I:%M"),g=c("%I %p"),x=c("%a %d"),y=c("%b %d"),v=c("%B"),b=c("%Y");function j(e){return(l(e)<e?m:o(e)<e?p:i(e)<e?f:s(e)<e?g:n(e)<e?a(e)<e?x:y:r(e)<e?v:b)(e)}return d.invert=function(e){return new Date(u(e))},d.domain=function(e){return arguments.length?h(Array.from(e,x_)):h().map(g_)},d.ticks=function(t){var r=h();return e(r[0],r[r.length-1],null==t?10:t)},d.tickFormat=function(e,t){return null==t?j:c(t)},d.nice=function(e){var r=h();return e&&"function"===typeof e.range||(e=t(r[0],r[r.length-1],null==e?10:e)),e?h(kj(r,e)):d},d.copy=function(){return nj(d,y_(e,t,r,n,a,s,i,o,l,c))},d}function v_(){return Av.apply(y_(Hw,Gw,zw,Fw,Nw,vw,xw,fw,pw,$w).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function b_(){return Av.apply(y_(Ww,Vw,Uw,Bw,Pw,bw,yw,gw,pw,Jw).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function j_(){var e,t,r,n,a,s=0,i=1,o=Zb,l=!1;function c(t){return null==t||isNaN(t=+t)?a:o(0===r?.5:(t=(n(t)-e)*r,l?Math.max(0,Math.min(1,t)):t))}function d(e){return function(t){var r,n;return arguments.length?([r,n]=t,o=e(r,n),c):[o(0),o(1)]}}return c.domain=function(a){return arguments.length?([s,i]=a,e=n(s=+s),t=n(i=+i),r=e===t?0:1/(t-e),c):[s,i]},c.clamp=function(e){return arguments.length?(l=!!e,c):l},c.interpolator=function(e){return arguments.length?(o=e,c):o},c.range=d(Xb),c.rangeRound=d(Qb),c.unknown=function(e){return arguments.length?(a=e,c):a},function(a){return n=a,e=a(s),t=a(i),r=e===t?0:1/(t-e),c}}function w_(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function N_(){var e=wj(j_()(Zb));return e.copy=function(){return w_(e,N_())},Cv.apply(e,arguments)}function __(){var e=Oj(j_()).domain([1,10]);return e.copy=function(){return w_(e,__()).base(e.base())},Cv.apply(e,arguments)}function k_(){var e=Mj(j_());return e.copy=function(){return w_(e,k_()).constant(e.constant())},Cv.apply(e,arguments)}function S_(){var e=Uj(j_());return e.copy=function(){return w_(e,S_()).exponent(e.exponent())},Cv.apply(e,arguments)}function A_(){return S_.apply(null,arguments).exponent(.5)}function C_(){var e=[],t=Zb;function r(r){if(null!=r&&!isNaN(r=+r))return t((Zv(e,r,1)-1)/(e.length-1))}return r.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let r of t)null==r||isNaN(r=+r)||e.push(r);return e.sort(Gv),r},r.interpolator=function(e){return arguments.length?(t=e,r):t},r.range=function(){return e.map((r,n)=>t(n/(e.length-1)))},r.quantiles=function(t){return Array.from({length:t+1},(r,n)=>Jj(e,n/t))},r.copy=function(){return C_(t).domain(e)},Cv.apply(r,arguments)}function E_(){var e,t,r,n,a,s,i,o=0,l=.5,c=1,d=1,u=Zb,h=!1;function m(e){return isNaN(e=+e)?i:(e=.5+((e=+s(e))-t)*(d*e<d*t?n:a),u(h?Math.max(0,Math.min(1,e)):e))}function p(e){return function(t){var r,n,a;return arguments.length?([r,n,a]=t,u=function(e,t){void 0===t&&(t=e,e=Xb);for(var r=0,n=t.length-1,a=t[0],s=new Array(n<0?0:n);r<n;)s[r]=e(a,a=t[++r]);return function(e){var t=Math.max(0,Math.min(n-1,Math.floor(e*=n)));return s[t](e-t)}}(e,[r,n,a]),m):[u(0),u(.5),u(1)]}}return m.domain=function(i){return arguments.length?([o,l,c]=i,e=s(o=+o),t=s(l=+l),r=s(c=+c),n=e===t?0:.5/(t-e),a=t===r?0:.5/(r-t),d=t<e?-1:1,m):[o,l,c]},m.clamp=function(e){return arguments.length?(h=!!e,m):h},m.interpolator=function(e){return arguments.length?(u=e,m):u},m.range=p(Xb),m.rangeRound=p(Qb),m.unknown=function(e){return arguments.length?(i=e,m):i},function(i){return s=i,e=i(o),t=i(l),r=i(c),n=e===t?0:.5/(t-e),a=t===r?0:.5/(r-t),d=t<e?-1:1,m}}function T_(){var e=wj(E_()(Zb));return e.copy=function(){return w_(e,T_())},Cv.apply(e,arguments)}function P_(){var e=Oj(E_()).domain([.1,1,10]);return e.copy=function(){return w_(e,P_()).base(e.base())},Cv.apply(e,arguments)}function O_(){var e=Mj(E_());return e.copy=function(){return w_(e,O_()).constant(e.constant())},Cv.apply(e,arguments)}function D_(){var e=Uj(E_());return e.copy=function(){return w_(e,D_()).exponent(e.exponent())},Cv.apply(e,arguments)}function I_(){return D_.apply(null,arguments).exponent(.5)}!function(e){Qw=function(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,s=e.days,i=e.shortDays,o=e.months,l=e.shortMonths,c=sN(a),d=iN(a),u=sN(s),h=iN(s),m=sN(i),p=iN(i),f=sN(o),g=iN(o),x=sN(l),y=iN(l),v={a:function(e){return i[e.getDay()]},A:function(e){return s[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return o[e.getMonth()]},c:null,d:AN,e:AN,f:ON,g:WN,G:HN,H:CN,I:EN,j:TN,L:PN,m:DN,M:IN,p:function(e){return a[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:p_,s:f_,S:LN,u:MN,U:RN,V:BN,w:zN,W:UN,x:null,X:null,y:qN,Y:VN,Z:GN,"%":m_},b={a:function(e){return i[e.getUTCDay()]},A:function(e){return s[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return o[e.getUTCMonth()]},c:null,d:KN,e:KN,f:JN,g:c_,G:u_,H:YN,I:XN,j:QN,L:$N,m:ZN,M:e_,p:function(e){return a[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:p_,s:f_,S:t_,u:r_,U:n_,V:s_,w:i_,W:o_,x:null,X:null,y:l_,Y:d_,Z:h_,"%":m_},j={a:function(e,t,r){var n=m.exec(t.slice(r));return n?(e.w=p.get(n[0].toLowerCase()),r+n[0].length):-1},A:function(e,t,r){var n=u.exec(t.slice(r));return n?(e.w=h.get(n[0].toLowerCase()),r+n[0].length):-1},b:function(e,t,r){var n=x.exec(t.slice(r));return n?(e.m=y.get(n[0].toLowerCase()),r+n[0].length):-1},B:function(e,t,r){var n=f.exec(t.slice(r));return n?(e.m=g.get(n[0].toLowerCase()),r+n[0].length):-1},c:function(e,r,n){return _(e,t,r,n)},d:xN,e:xN,f:NN,g:mN,G:hN,H:vN,I:vN,j:yN,L:wN,m:gN,M:bN,p:function(e,t,r){var n=c.exec(t.slice(r));return n?(e.p=d.get(n[0].toLowerCase()),r+n[0].length):-1},q:fN,Q:kN,s:SN,S:jN,u:lN,U:cN,V:dN,w:oN,W:uN,x:function(e,t,n){return _(e,r,t,n)},X:function(e,t,r){return _(e,n,t,r)},y:mN,Y:hN,Z:pN,"%":_N};function w(e,t){return function(r){var n,a,s,i=[],o=-1,l=0,c=e.length;for(r instanceof Date||(r=new Date(+r));++o<c;)37===e.charCodeAt(o)&&(i.push(e.slice(l,o)),null!=(a=Zw[n=e.charAt(++o)])?n=e.charAt(++o):a="e"===n?" ":"0",(s=t[n])&&(n=s(r,a)),i.push(n),l=o+1);return i.push(e.slice(l,o)),i.join("")}}function N(e,t){return function(r){var n,a,s=Xw(1900,void 0,1);if(_(s,e,r+="",0)!=r.length)return null;if("Q"in s)return new Date(s.Q);if("s"in s)return new Date(1e3*s.s+("L"in s?s.L:0));if(t&&!("Z"in s)&&(s.Z=0),"p"in s&&(s.H=s.H%12+12*s.p),void 0===s.m&&(s.m="q"in s?s.q:0),"V"in s){if(s.V<1||s.V>53)return null;"w"in s||(s.w=1),"Z"in s?(a=(n=Yw(Xw(s.y,0,1))).getUTCDay(),n=a>4||0===a?Ow.ceil(n):Ow(n),n=bw.offset(n,7*(s.V-1)),s.y=n.getUTCFullYear(),s.m=n.getUTCMonth(),s.d=n.getUTCDate()+(s.w+6)%7):(a=(n=Kw(Xw(s.y,0,1))).getDay(),n=a>4||0===a?_w.ceil(n):_w(n),n=vw.offset(n,7*(s.V-1)),s.y=n.getFullYear(),s.m=n.getMonth(),s.d=n.getDate()+(s.w+6)%7)}else("W"in s||"U"in s)&&("w"in s||(s.w="u"in s?s.u%7:"W"in s?1:0),a="Z"in s?Yw(Xw(s.y,0,1)).getUTCDay():Kw(Xw(s.y,0,1)).getDay(),s.m=0,s.d="W"in s?(s.w+6)%7+7*s.W-(a+5)%7:s.w+7*s.U-(a+6)%7);return"Z"in s?(s.H+=s.Z/100|0,s.M+=s.Z%100,Yw(s)):Kw(s)}}function _(e,t,r,n){for(var a,s,i=0,o=t.length,l=r.length;i<o;){if(n>=l)return-1;if(37===(a=t.charCodeAt(i++))){if(a=t.charAt(i++),!(s=j[a in Zw?t.charAt(i++):a])||(n=s(e,r,n))<0)return-1}else if(a!=r.charCodeAt(n++))return-1}return n}return v.x=w(r,v),v.X=w(n,v),v.c=w(t,v),b.x=w(r,b),b.X=w(n,b),b.c=w(t,b),{format:function(e){var t=w(e+="",v);return t.toString=function(){return e},t},parse:function(e){var t=N(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=w(e+="",b);return t.toString=function(){return e},t},utcParse:function(e){var t=N(e+="",!0);return t.toString=function(){return e},t}}}(e),$w=Qw.format,Qw.parse,Jw=Qw.utcFormat,Qw.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var L_=e=>e.chartData,M_=hy([L_],e=>{var t=null!=e.chartData?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),R_=(e,t,r,n)=>n?M_(e):L_(e);function F_(e){if(Array.isArray(e)&&2===e.length){var[t,r]=e;if(Xm(t)&&Xm(r))return!0}return!1}function B_(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function z_(e,t){if(t&&"function"!==typeof e&&Array.isArray(e)&&2===e.length){var r,n,[a,s]=e;if(Xm(a))r=a;else if("function"===typeof a)return;if(Xm(s))n=s;else if("function"===typeof s)return;var i=[r,n];if(F_(i))return i}}var U_,q_=r(8210),W_=r.n(q_),V_=e=>e,H_={"@@functional/placeholder":!0},G_=e=>e===H_,K_=e=>function t(){return 0===arguments.length||1===arguments.length&&G_(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},Y_=(e,t)=>1===e?t:K_(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var s=n.filter(e=>e!==H_).length;return s>=e?t(...n):Y_(e-s,K_(function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];var s=n.map(e=>G_(e)?r.shift():e);return t(...s,...r)}))}),X_=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},Q_=Y_((U_=(e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(e=>t[e]).map(e)).length,U_),$_=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join("");function J_(e){return 0===e?1:Math.floor(new(W_())(e).abs().log(10).toNumber())+1}function Z_(e,t,r){for(var n=new(W_())(e),a=0,s=[];n.lt(t)&&a<1e5;)s.push(n.toNumber()),n=n.add(r),a++;return s}var ek=e=>{var[t,r]=e,[n,a]=[t,r];return t>r&&([n,a]=[r,t]),[n,a]},tk=(e,t,r)=>{if(e.lte(0))return new(W_())(0);var n=J_(e.toNumber()),a=new(W_())(10).pow(n),s=e.div(a),i=1!==n?.05:.1,o=new(W_())(Math.ceil(s.div(i).toNumber())).add(r).mul(i).mul(a);return t?new(W_())(o.toNumber()):new(W_())(Math.ceil(o.toNumber()))},rk=(e,t,r)=>{var n=new(W_())(1),a=new(W_())(e);if(!a.isint()&&r){var s=Math.abs(e);s<1?(n=new(W_())(10).pow(J_(e)-1),a=new(W_())(Math.floor(a.div(n).toNumber())).mul(n)):s>1&&(a=new(W_())(Math.floor(e)))}else 0===e?a=new(W_())(Math.floor((t-1)/2)):r||(a=new(W_())(Math.floor(e)));var i=Math.floor((t-1)/2),o=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.length)return V_;var n=t.reverse(),a=n[0],s=n.slice(1);return function(){return s.reduce((e,t)=>t(e),a(...arguments))}}(Q_(e=>a.add(new(W_())(e-i).mul(n)).toNumber()),X_);return o(0,t)},nk=function(e,t,r,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new(W_())(0),tickMin:new(W_())(0),tickMax:new(W_())(0)};var s,i=tk(new(W_())(t).sub(e).div(r-1),n,a);s=e<=0&&t>=0?new(W_())(0):(s=new(W_())(e).add(t).div(2)).sub(new(W_())(s).mod(i));var o=Math.ceil(s.sub(e).div(i).toNumber()),l=Math.ceil(new(W_())(t).sub(s).div(i).toNumber()),c=o+l+1;return c>r?nk(e,t,r,n,a+1):(c<r&&(l=t>0?l+(r-c):l,o=t>0?o:o+(r-c)),{step:i,tickMin:s.sub(new(W_())(o).mul(i)),tickMax:s.add(new(W_())(l).mul(i))})},ak=e=>e.rootProps.maxBarSize,sk=e=>e.rootProps.barCategoryGap,ik=e=>e.rootProps.stackOffset,ok=e=>e.rootProps.reverseStackOrder,lk=e=>e.options.chartName,ck=e=>e.rootProps.syncId,dk=e=>e.rootProps.syncMethod,uk=e=>e.options.eventEmitter;function hk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function mk(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hk(Object(r),!0).forEach(function(t){pk(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hk(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function pk(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var fk=Math.PI/180,gk=e=>180*e/Math.PI,xk=(e,t,r,n)=>({x:e+Math.cos(-fk*n)*r,y:t+Math.sin(-fk*n)*r}),yk=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{top:0,right:0,bottom:0,left:0,width:0,height:0,brushBottom:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(t-(r.top||0)-(r.bottom||0)))/2},vk=(e,t)=>{var{x:r,y:n}=e,{cx:a,cy:s}=t,i=((e,t)=>{var{x:r,y:n}=e,{x:a,y:s}=t;return Math.sqrt((r-a)**2+(n-s)**2)})({x:r,y:n},{x:a,y:s});if(i<=0)return{radius:i,angle:0};var o=(r-a)/i,l=Math.acos(o);return n>s&&(l=2*Math.PI-l),{radius:i,angle:gk(l),angleInRadian:l}},bk=(e,t)=>{var{startAngle:r,endAngle:n}=t,a=Math.floor(r/360),s=Math.floor(n/360);return e+360*Math.min(a,s)},jk=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:a,angle:s}=vk({x:r,y:n},t),{innerRadius:i,outerRadius:o}=t;if(a<i||a>o)return null;if(0===a)return null;var l,{startAngle:c,endAngle:d}=(e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),a=Math.floor(r/360),s=Math.min(n,a);return{startAngle:t-360*s,endAngle:r-360*s}})(t),u=s;if(c<=d){for(;u>d;)u-=360;for(;u<c;)u+=360;l=u>=c&&u<=d}else{for(;u>c;)u-=360;for(;u<d;)u+=360;l=u>=d&&u<=c}return l?mk(mk({},t),{},{radius:a,angle:bk(u,t)}):null},wk={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Nk=!0,_k=0,kk=!1,Sk="auto",Ak=!0,Ck="category",Ek=(wk.axis,!1),Tk=!0,Pk=0,Ok="auto",Dk=!0,Ik=5,Lk="number",Mk=(wk.axis,(e,t)=>{if(e&&t)return null!==e&&void 0!==e&&e.reversed?[t[1],t[0]]:t}),Rk={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:_k,includeHidden:!1,name:void 0,reversed:kk,scale:Sk,tick:Ak,tickCount:void 0,ticks:void 0,type:Ck,unit:void 0},Fk={allowDataOverflow:Ek,allowDecimals:!1,allowDuplicatedCategory:Tk,dataKey:void 0,domain:void 0,id:Pk,includeHidden:!1,name:void 0,reversed:!1,scale:Ok,tick:Dk,tickCount:Ik,ticks:void 0,type:Lk,unit:void 0},Bk={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Nk,dataKey:void 0,domain:void 0,id:_k,includeHidden:!1,name:void 0,reversed:!1,scale:Sk,tick:Ak,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},zk={allowDataOverflow:Ek,allowDecimals:!1,allowDuplicatedCategory:Tk,dataKey:void 0,domain:void 0,id:Pk,includeHidden:!1,name:void 0,reversed:!1,scale:Ok,tick:Dk,tickCount:Ik,ticks:void 0,type:"category",unit:void 0},Uk=(e,t)=>null!=e.polarAxis.angleAxis[t]?e.polarAxis.angleAxis[t]:"radial"===e.layout.layoutType?Bk:Rk,qk=(e,t)=>null!=e.polarAxis.radiusAxis[t]?e.polarAxis.radiusAxis[t]:"radial"===e.layout.layoutType?zk:Fk,Wk=e=>e.polarOptions,Vk=hy([Jy,Zy,cv],yk),Hk=hy([Wk,Vk],(e,t)=>{if(null!=e)return Im(e.innerRadius,t,0)}),Gk=hy([Wk,Vk],(e,t)=>{if(null!=e)return Im(e.outerRadius,t,.8*t)}),Kk=hy([Wk],e=>{if(null==e)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]}),Yk=(hy([Uk,Kk],Mk),hy([Vk,Hk,Gk],(e,t,r)=>{if(null!=e&&null!=t&&null!=r)return[t,r]})),Xk=(hy([qk,Yk],Mk),hy([wv,Wk,Hk,Gk,Jy,Zy],(e,t,r,n,a,s)=>{if(("centric"===e||"radial"===e)&&null!=t&&null!=r&&null!=n){var{cx:i,cy:o,startAngle:l,endAngle:c}=t;return{cx:Im(i,a,a/2),cy:Im(o,s,s/2),innerRadius:r,outerRadius:n,startAngle:l,endAngle:c,clockWise:!1}}})),Qk=(e,t)=>t,$k=(e,t,r)=>r;function Jk(e){return null===e||void 0===e?void 0:e.id}function Zk(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:a,dataKey:s}=r,i=new Map;return e.forEach(e=>{var t,r=null!==(t=e.data)&&void 0!==t?t:n;if(null!=r&&0!==r.length){var o=Jk(e);r.forEach((t,r)=>{var n,l=null==s||a?r:String(My(t,s,null)),c=My(t,e.dataKey,0);n=i.has(l)?i.get(l):{},Object.assign(n,{[o]:c}),i.set(l,n)})}}),Array.from(i.values())}function eS(e){return null!=e.stackId&&null!=e.dataKey}var tS=(e,t)=>e===t||null!=e&&null!=t&&(e[0]===t[0]&&e[1]===t[1]);function rS(e,t){return!(!Array.isArray(e)||!Array.isArray(t)||0!==e.length||0!==t.length)||e===t}var nS=e=>{var t=wv(e);return"horizontal"===t?"xAxis":"vertical"===t?"yAxis":"centric"===t?"angleAxis":"radiusAxis"},aS=e=>e.tooltip.settings.axisId;function sS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function iS(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sS(Object(r),!0).forEach(function(t){oS(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sS(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function oS(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var lS=[0,"auto"],cS={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},dS=(e,t)=>e.cartesianAxis.xAxis[t],uS=(e,t)=>{var r=dS(e,t);return null==r?cS:r},hS={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:lS,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:60},mS=(e,t)=>e.cartesianAxis.yAxis[t],pS=(e,t)=>{var r=mS(e,t);return null==r?hS:r},fS={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},gS=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return null==r?fS:r},xS=(e,t,r)=>{switch(t){case"xAxis":return uS(e,r);case"yAxis":return pS(e,r);case"zAxis":return gS(e,r);case"angleAxis":return Uk(e,r);case"radiusAxis":return qk(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},yS=(e,t,r)=>{switch(t){case"xAxis":return uS(e,r);case"yAxis":return pS(e,r);case"angleAxis":return Uk(e,r);case"radiusAxis":return qk(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},vS=e=>e.graphicalItems.cartesianItems.some(e=>"bar"===e.type)||e.graphicalItems.polarItems.some(e=>"radialBar"===e.type);function bS(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var jS=e=>e.graphicalItems.cartesianItems,wS=hy([Qk,$k],bS),NS=(e,t,r)=>e.filter(r).filter(e=>!0===(null===t||void 0===t?void 0:t.includeHidden)||!e.hide),_S=hy([jS,xS,wS],NS,{memoizeOptions:{resultEqualityCheck:rS}}),kS=hy([_S],e=>e.filter(e=>"area"===e.type||"bar"===e.type).filter(eS)),SS=e=>e.filter(e=>!("stackId"in e)||void 0===e.stackId),AS=hy([_S],SS),CS=e=>e.map(e=>e.data).filter(Boolean).flat(1),ES=hy([_S],CS,{memoizeOptions:{resultEqualityCheck:rS}}),TS=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=t;return e.length>0?e:r.slice(n,a+1)},PS=hy([ES,R_],TS),OS=(e,t,r)=>null!=(null===t||void 0===t?void 0:t.dataKey)?e.map(e=>({value:My(e,t.dataKey)})):r.length>0?r.map(e=>e.dataKey).flatMap(t=>e.map(e=>({value:My(e,t)}))):e.map(e=>({value:e})),DS=hy([PS,xS,_S],OS);function IS(e,t){switch(e){case"xAxis":return"x"===t.direction;case"yAxis":return"y"===t.direction;default:return!1}}function LS(e){if(Pm(e)||e instanceof Date){var t=Number(e);if(Xm(t))return t}}function MS(e){if(Array.isArray(e)){var t=[LS(e[0]),LS(e[1])];return F_(t)?t:void 0}var r=LS(e);if(null!=r)return[r,r]}function RS(e){return e.map(LS).filter(zm)}var FS=e=>{var t=nS(e),r=aS(e);return yS(e,t,r)},BS=hy([FS],e=>null===e||void 0===e?void 0:e.dataKey),zS=hy([kS,R_,FS],Zk),US=(e,t,r,n)=>{var a=t.reduce((e,t)=>(null==t.stackId||(null==e[t.stackId]&&(e[t.stackId]=[]),e[t.stackId].push(t)),e),{});return Object.fromEntries(Object.entries(a).map(t=>{var[a,s]=t,i=n?[...s].reverse():s,o=i.map(Jk);return[a,{stackedData:qy(e,o,r),graphicalItems:i}]}))},qS=hy([zS,kS,ik,ok],US),WS=(e,t,r,n)=>{var{dataStartIndex:a,dataEndIndex:s}=t;if(null==n&&"zAxis"!==r){var i=Gy(e,a,s);if(null==i||0!==i[0]||0!==i[1])return i}},VS=hy([xS],e=>e.allowDataOverflow),HS=e=>{var t;if(null==e||!("domain"in e))return lS;if(null!=e.domain)return e.domain;if(null!=e.ticks){if("number"===e.type){var r=RS(e.ticks);return[Math.min(...r),Math.max(...r)]}if("category"===e.type)return e.ticks.map(String)}return null!==(t=null===e||void 0===e?void 0:e.domain)&&void 0!==t?t:lS},GS=hy([xS],HS),KS=hy([GS,VS],z_),YS=hy([qS,L_,Qk,KS],WS,{memoizeOptions:{resultEqualityCheck:tS}}),XS=e=>e.errorBars,QS=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.filter(Boolean);if(0!==n.length){var a=n.flat();return[Math.min(...a),Math.max(...a)]}},$S=(e,t,r,n,a)=>{var s,i;if(r.length>0&&e.forEach(e=>{r.forEach(r=>{var o,l,c=null===(o=n[r.id])||void 0===o?void 0:o.filter(e=>IS(a,e)),d=My(e,null!==(l=t.dataKey)&&void 0!==l?l:r.dataKey),u=function(e,t,r){return!r||"number"!==typeof t||Cm(t)?[]:r.length?RS(r.flatMap(r=>{var n,a,s=My(e,r.dataKey);if(Array.isArray(s)?[n,a]=s:n=a=s,Xm(n)&&Xm(a))return[t-n,t+a]})):[]}(e,d,c);if(u.length>=2){var h=Math.min(...u),m=Math.max(...u);(null==s||h<s)&&(s=h),(null==i||m>i)&&(i=m)}var p=MS(d);null!=p&&(s=null==s?p[0]:Math.min(s,p[0]),i=null==i?p[1]:Math.max(i,p[1]))})}),null!=(null===t||void 0===t?void 0:t.dataKey)&&e.forEach(e=>{var r=MS(My(e,t.dataKey));null!=r&&(s=null==s?r[0]:Math.min(s,r[0]),i=null==i?r[1]:Math.max(i,r[1]))}),Xm(s)&&Xm(i))return[s,i]},JS=hy([PS,xS,AS,XS,Qk],$S,{memoizeOptions:{resultEqualityCheck:tS}});function ZS(e){var{value:t}=e;if(Pm(t)||t instanceof Date)return t}var eA=e=>e.referenceElements.dots,tA=(e,t,r)=>e.filter(e=>"extendDomain"===e.ifOverflow).filter(e=>"xAxis"===t?e.xAxisId===r:e.yAxisId===r),rA=hy([eA,Qk,$k],tA),nA=e=>e.referenceElements.areas,aA=hy([nA,Qk,$k],tA),sA=e=>e.referenceElements.lines,iA=hy([sA,Qk,$k],tA),oA=(e,t)=>{var r=RS(e.map(e=>"xAxis"===t?e.x:e.y));if(0!==r.length)return[Math.min(...r),Math.max(...r)]},lA=hy(rA,Qk,oA),cA=(e,t)=>{var r=RS(e.flatMap(e=>["xAxis"===t?e.x1:e.y1,"xAxis"===t?e.x2:e.y2]));if(0!==r.length)return[Math.min(...r),Math.max(...r)]},dA=hy([aA,Qk],cA);var uA=(e,t)=>{var r=e.flatMap(e=>"xAxis"===t?function(e){var t;if(null!=e.x)return RS([e.x]);var r=null===(t=e.segment)||void 0===t?void 0:t.map(e=>e.x);return null==r||0===r.length?[]:RS(r)}(e):function(e){var t;if(null!=e.y)return RS([e.y]);var r=null===(t=e.segment)||void 0===t?void 0:t.map(e=>e.y);return null==r||0===r.length?[]:RS(r)}(e));if(0!==r.length)return[Math.min(...r),Math.max(...r)]},hA=hy([iA,Qk],uA),mA=hy(lA,hA,dA,(e,t,r)=>QS(e,r,t)),pA=(e,t,r,n,a,s,i,o)=>null!=r?r:function(e,t,r){if(r||null!=t){if("function"===typeof e&&null!=t)try{var n=e(t,r);if(F_(n))return B_(n,t,r)}catch(m){}if(Array.isArray(e)&&2===e.length){var a,s,[i,o]=e;if("auto"===i)null!=t&&(a=Math.min(...t));else if(Tm(i))a=i;else if("function"===typeof i)try{null!=t&&(a=i(null===t||void 0===t?void 0:t[0]))}catch(p){}else if("string"===typeof i&&Ky.test(i)){var l=Ky.exec(i);if(null==l||null==t)a=void 0;else{var c=+l[1];a=t[0]-c}}else a=null===t||void 0===t?void 0:t[0];if("auto"===o)null!=t&&(s=Math.max(...t));else if(Tm(o))s=o;else if("function"===typeof o)try{null!=t&&(s=o(null===t||void 0===t?void 0:t[1]))}catch(f){}else if("string"===typeof o&&Yy.test(o)){var d=Yy.exec(o);if(null==d||null==t)s=void 0;else{var u=+d[1];s=t[1]+u}}else s=null===t||void 0===t?void 0:t[1];var h=[a,s];if(F_(h))return null==t?h:B_(h,t,r)}}}(t,"vertical"===i&&"xAxis"===o||"horizontal"===i&&"yAxis"===o?QS(n,s,a):QS(s,a),e.allowDataOverflow),fA=hy([xS,GS,KS,YS,JS,mA,wv,Qk],pA,{memoizeOptions:{resultEqualityCheck:tS}}),gA=[0,1],xA=(e,t,r,n,a,s,i)=>{if(null!=e&&null!=r&&0!==r.length||void 0!==i){var o,{dataKey:l,type:c}=e,d=Ry(t,s);return d&&null==l?Sv()(0,null!==(o=null===r||void 0===r?void 0:r.length)&&void 0!==o?o:0):"category"===c?((e,t,r)=>{var n=e.map(ZS).filter(e=>null!=e);return r&&(null==t.dataKey||t.allowDuplicatedCategory&&Lm(n))?Sv()(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))})(n,e,d):"expand"===a?gA:i}},yA=hy([xS,wv,PS,DS,ik,Qk,fA],xA),vA=(e,r,n,a,s)=>{if(null!=e){var{scale:i,type:o}=e;if("auto"===i)return"radial"===r&&"radiusAxis"===s?"band":"radial"===r&&"angleAxis"===s?"linear":"category"===o&&a&&(a.indexOf("LineChart")>=0||a.indexOf("AreaChart")>=0||a.indexOf("ComposedChart")>=0&&!n)?"point":"category"===o?"band":"linear";if("string"===typeof i){var l="scale".concat(Bm(i));return l in t?l:"point"}}},bA=hy([xS,wv,vS,lk,Qk],vA);function jA(e,r,n,a){if(null!=n&&null!=a){if("function"===typeof e.scale)return e.scale.copy().domain(n).range(a);var s=function(e){if(null!=e){if(e in t)return t[e]();var r="scale".concat(Bm(e));return r in t?t[r]():void 0}}(r);if(null!=s){var i=s.domain(n).range(a);return(e=>{var t=e.domain();if(t&&!(t.length<=2)){var r=t.length,n=e.range(),a=Math.min(n[0],n[1])-zy,s=Math.max(n[0],n[1])+zy,i=e(t[0]),o=e(t[r-1]);(i<a||i>s||o<a||o>s)&&e.domain([t[0],t[r-1]])}})(i),i}}}var wA=(e,t,r)=>{var n=HS(t);if("auto"===r||"linear"===r)return null!=t&&t.tickCount&&Array.isArray(n)&&("auto"===n[0]||"auto"===n[1])&&F_(e)?function(e){var[t,r]=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=Math.max(n,2),[i,o]=ek([t,r]);if(i===-1/0||o===1/0){var l=o===1/0?[i,...X_(0,n-1).map(()=>1/0)]:[...X_(0,n-1).map(()=>-1/0),o];return t>r?$_(l):l}if(i===o)return rk(i,n,a);var{step:c,tickMin:d,tickMax:u}=nk(i,o,s,a,0),h=Z_(d,u.add(new(W_())(.1).mul(c)),c);return t>r?$_(h):h}(e,t.tickCount,t.allowDecimals):null!=t&&t.tickCount&&"number"===t.type&&F_(e)?function(e,t){var[r,n]=e,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],[s,i]=ek([r,n]);if(s===-1/0||i===1/0)return[r,n];if(s===i)return[s];var o=Math.max(t,2),l=tk(new(W_())(i).sub(s).div(o-1),a,0),c=[...Z_(new(W_())(s),new(W_())(i),l),i];return!1===a&&(c=c.map(e=>Math.round(e))),r>n?$_(c):c}(e,t.tickCount,t.allowDecimals):void 0},NA=hy([yA,yS,bA],wA),_A=(e,t,r,n)=>{if("angleAxis"!==n&&"number"===(null===e||void 0===e?void 0:e.type)&&F_(t)&&Array.isArray(r)&&r.length>0){var a=t[0],s=r[0],i=t[1],o=r[r.length-1];return[Math.min(a,s),Math.max(i,o)]}return t},kA=hy([xS,yA,NA,Qk],_A),SA=hy(DS,xS,(e,t)=>{if(t&&"number"===t.type){var r=1/0,n=Array.from(RS(e.map(e=>e.value))).sort((e,t)=>e-t);if(n.length<2)return 1/0;var a=n[n.length-1]-n[0];if(0===a)return 1/0;for(var s=0;s<n.length-1;s++){var i=n[s+1]-n[s];r=Math.min(r,i)}return r/a}}),AA=hy(SA,wv,sk,cv,(e,t,r,n)=>n,(e,t,r,n,a)=>{if(!Xm(e))return 0;var s="vertical"===t?n.height:n.width;if("gap"===a)return e*s/2;if("no-gap"===a){var i=Im(r,e*s),o=e*s/2;return o-i-(o-i)/s*i}return 0}),CA=hy(uS,(e,t)=>{var r=uS(e,t);return null==r||"string"!==typeof r.padding?0:AA(e,"xAxis",t,r.padding)},(e,t)=>{var r,n;if(null==e)return{left:0,right:0};var{padding:a}=e;return"string"===typeof a?{left:t,right:t}:{left:(null!==(r=a.left)&&void 0!==r?r:0)+t,right:(null!==(n=a.right)&&void 0!==n?n:0)+t}}),EA=hy(pS,(e,t)=>{var r=pS(e,t);return null==r||"string"!==typeof r.padding?0:AA(e,"yAxis",t,r.padding)},(e,t)=>{var r,n;if(null==e)return{top:0,bottom:0};var{padding:a}=e;return"string"===typeof a?{top:t,bottom:t}:{top:(null!==(r=a.top)&&void 0!==r?r:0)+t,bottom:(null!==(n=a.bottom)&&void 0!==n?n:0)+t}}),TA=hy([cv,CA,fv,pv,(e,t,r)=>r],(e,t,r,n,a)=>{var{padding:s}=n;return a?[s.left,r.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),PA=hy([cv,wv,EA,fv,pv,(e,t,r)=>r],(e,t,r,n,a,s)=>{var{padding:i}=a;return s?[n.height-i.bottom,i.top]:"horizontal"===t?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),OA=(e,t,r,n)=>{var a;switch(t){case"xAxis":return TA(e,r,n);case"yAxis":return PA(e,r,n);case"zAxis":return null===(a=gS(e,r))||void 0===a?void 0:a.range;case"angleAxis":return Kk(e);case"radiusAxis":return Yk(e,r);default:return}},DA=hy([xS,OA],Mk),IA=hy([xS,bA,kA,DA],jA);hy([_S,XS,Qk],(e,t,r)=>e.flatMap(e=>t[e.id]).filter(Boolean).filter(e=>IS(r,e)));function LA(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var MA=(e,t)=>t,RA=(e,t,r)=>r,FA=hy(rv,MA,RA,(e,t,r)=>e.filter(e=>e.orientation===t).filter(e=>e.mirror===r).sort(LA)),BA=hy(nv,MA,RA,(e,t,r)=>e.filter(e=>e.orientation===t).filter(e=>e.mirror===r).sort(LA)),zA=(e,t)=>({width:e.width,height:t.height}),UA=hy(cv,uS,zA),qA=hy(Zy,cv,FA,MA,RA,(e,t,r,n,a)=>{var s,i={};return r.forEach(r=>{var o=zA(t,r);null==s&&(s=((e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}})(t,n,e));var l="top"===n&&!a||"bottom"===n&&a;i[r.id]=s-Number(l)*o.height,s+=(l?-1:1)*o.height}),i}),WA=hy(Jy,cv,BA,MA,RA,(e,t,r,n,a)=>{var s,i={};return r.forEach(r=>{var o=((e,t)=>({width:"number"===typeof t.width?t.width:60,height:e.height}))(t,r);null==s&&(s=((e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}})(t,n,e));var l="left"===n&&!a||"right"===n&&a;i[r.id]=s-Number(l)*o.width,s+=(l?-1:1)*o.width}),i}),VA=hy([cv,uS,(e,t)=>{var r=uS(e,t);if(null!=r)return qA(e,r.orientation,r.mirror)},(e,t)=>t],(e,t,r,n)=>{if(null!=t){var a=null===r||void 0===r?void 0:r[n];return null==a?{x:e.left,y:0}:{x:e.left,y:a}}}),HA=hy([cv,pS,(e,t)=>{var r=pS(e,t);if(null!=r)return WA(e,r.orientation,r.mirror)},(e,t)=>t],(e,t,r,n)=>{if(null!=t){var a=null===r||void 0===r?void 0:r[n];return null==a?{x:0,y:e.top}:{x:a,y:e.top}}}),GA=hy(cv,pS,(e,t)=>({width:"number"===typeof t.width?t.width:60,height:e.height})),KA=(e,t,r)=>{switch(t){case"xAxis":return UA(e,r).width;case"yAxis":return GA(e,r).height;default:return}},YA=(e,t,r,n)=>{if(null!=r){var{allowDuplicatedCategory:a,type:s,dataKey:i}=r,o=Ry(e,n),l=t.map(e=>e.value);return i&&o&&"category"===s&&a&&Lm(l)?l:void 0}},XA=hy([wv,DS,xS,Qk],YA),QA=(e,t,r,n)=>{if(null!=r&&null!=r.dataKey){var{type:a,scale:s}=r;return!Ry(e,n)||"number"!==a&&"auto"===s?void 0:t.map(e=>e.value)}},$A=hy([wv,DS,yS,Qk],QA),JA=hy([wv,(e,t,r)=>{switch(t){case"xAxis":return uS(e,r);case"yAxis":return pS(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},bA,IA,XA,$A,OA,NA,Qk],(e,t,r,n,a,s,i,o,l)=>{if(null!=t){var c=Ry(e,l);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:l,categoricalDomain:s,duplicateDomain:a,isCategorical:c,niceTicks:o,range:i,realScaleType:r,scale:n}}}),ZA=hy([wv,yS,bA,IA,NA,OA,XA,$A,Qk],(e,t,r,n,a,s,i,o,l)=>{if(null!=t&&null!=n){var c=Ry(e,l),{type:d,ticks:u,tickCount:h}=t,m="scaleBand"===r&&"function"===typeof n.bandwidth?n.bandwidth()/2:2,p="category"===d&&n.bandwidth?n.bandwidth()/m:0;p="angleAxis"===l&&null!=s&&s.length>=2?2*Am(s[0]-s[1])*p:p;var f=u||a;if(f){var g=f.map((e,t)=>{var r=i?i.indexOf(e):e;return{index:t,coordinate:n(r)+p,value:e,offset:p}});return g.filter(e=>Xm(e.coordinate))}return c&&o?o.map((e,t)=>({coordinate:n(e)+p,value:e,index:t,offset:p})).filter(e=>Xm(e.coordinate)):n.ticks?n.ticks(h).map(e=>({coordinate:n(e)+p,value:e,offset:p})):n.domain().map((e,t)=>({coordinate:n(e)+p,value:i?i[e]:e,index:t,offset:p}))}}),eC=hy([wv,yS,IA,OA,XA,$A,Qk],(e,t,r,n,a,s,i)=>{if(null!=t&&null!=r&&null!=n&&n[0]!==n[1]){var o=Ry(e,i),{tickCount:l}=t,c=0;return c="angleAxis"===i&&(null===n||void 0===n?void 0:n.length)>=2?2*Am(n[0]-n[1])*c:c,o&&s?s.map((e,t)=>({coordinate:r(e)+c,value:e,index:t,offset:c})):r.ticks?r.ticks(l).map(e=>({coordinate:r(e)+c,value:e,offset:c})):r.domain().map((e,t)=>({coordinate:r(e)+c,value:a?a[e]:e,index:t,offset:c}))}}),tC=hy(xS,IA,(e,t)=>{if(null!=e&&null!=t)return iS(iS({},e),{},{scale:t})}),rC=hy([xS,bA,yA,DA],jA),nC=(hy((e,t,r)=>gS(e,r),rC,(e,t)=>{if(null!=e&&null!=t)return iS(iS({},e),{},{scale:t})}),hy([wv,rv,nv],(e,t,r)=>{switch(e){case"horizontal":return t.some(e=>e.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(e=>e.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}})),aC=e=>e.options.defaultTooltipEventType,sC=e=>e.options.validateTooltipEventTypes;function iC(e,t,r){if(null==e)return t;var n=e?"axis":"item";return null==r?t:r.includes(n)?n:t}function oC(e,t){return iC(t,aC(e),sC(e))}var lC=(e,t)=>{var r,n=Number(t);if(!Cm(n)&&null!=t)return n>=0?null===e||void 0===e||null===(r=e[n])||void 0===r?void 0:r.value:void 0};function cC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function dC(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?cC(Object(r),!0).forEach(function(t){uC(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cC(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function uC(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var hC=(e,t,r,n)=>{if(null==t)return Dx;var a=function(e,t,r){return"axis"===t?"click"===r?e.axisInteraction.click:e.axisInteraction.hover:"click"===r?e.itemInteraction.click:e.itemInteraction.hover}(e,t,r);if(null==a)return Dx;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&null!=e.syncInteraction.index)return e.syncInteraction;var s=!0===e.settings.active;if(null!=a.index){if(s)return dC(dC({},a),{},{active:!0})}else if(null!=n)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return dC(dC({},Dx),{},{coordinate:a.coordinate})};function mC(e,t){var r=function(e){if("number"===typeof e)return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var r=Number(e);return Number.isFinite(r)?r:void 0}(e),n=t[0],a=t[1];if(void 0===r)return!1;var s=Math.min(n,a),i=Math.max(n,a);return r>=s&&r<=i}var pC=(e,t,r,n)=>{var a=null===e||void 0===e?void 0:e.index;if(null==a)return null;var s=Number(a);if(!Xm(s))return a;var i=1/0;t.length>0&&(i=t.length-1);var o=Math.max(0,Math.min(s,i)),l=t[o];return null==l||function(e,t,r){if(null==r||null==t)return!0;var n=My(e,t);return null==n||!F_(r)||mC(n,r)}(l,r,n)?String(o):null},fC=(e,t,r,n,a,s,i,o)=>{if(null!=s&&null!=o){var l=i[0],c=null==l?void 0:o(l.positions,s);if(null!=c)return c;var d=null===a||void 0===a?void 0:a[Number(s)];if(d)return"horizontal"===r?{x:d.coordinate,y:(n.top+t)/2}:{x:(n.left+e)/2,y:d.coordinate}}},gC=(e,t,r,n)=>{return"axis"===t?e.tooltipItemPayloads:0===e.tooltipItemPayloads.length?[]:null==(a="hover"===r?e.itemInteraction.hover.dataKey:e.itemInteraction.click.dataKey)&&null!=n?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(e=>{var t;return(null===(t=e.settings)||void 0===t?void 0:t.dataKey)===a});var a},xC=e=>e.options.tooltipPayloadSearcher,yC=e=>e.tooltip;function vC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function bC(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vC(Object(r),!0).forEach(function(t){jC(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vC(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function jC(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var wC=(e,t,r,n,a,s,i)=>{if(null!=t&&null!=s){var{chartData:o,computedData:l,dataStartIndex:c,dataEndIndex:d}=r;return e.reduce((e,r)=>{var u,h,m,{dataDefinedOnItem:p,settings:f}=r,g=function(e,t){return null!=e?e:t}(p,o),x=Array.isArray(g)?Oy(g,c,d):g,y=null!==(u=null===f||void 0===f?void 0:f.dataKey)&&void 0!==u?u:n,v=null===f||void 0===f?void 0:f.nameKey;(h=n&&Array.isArray(x)&&!Array.isArray(x[0])&&"axis"===i?Rm(x,n,a):s(x,t,l,v),Array.isArray(h))?h.forEach(t=>{var r=bC(bC({},f),{},{name:t.name,unit:t.unit,color:void 0,fill:void 0});e.push(Qy({tooltipEntrySettings:r,dataKey:t.dataKey,payload:t.payload,value:My(t.payload,t.dataKey),name:t.name}))}):e.push(Qy({tooltipEntrySettings:f,dataKey:y,payload:h,value:My(h,y),name:null!==(m=My(h,v))&&void 0!==m?m:null===f||void 0===f?void 0:f.name}));return e},[])}},NC=hy([FS,wv,vS,lk,nS],vA),_C=hy([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),kC=hy([nS,aS],bS),SC=hy([_C,FS,kC],NS,{memoizeOptions:{resultEqualityCheck:rS}}),AC=hy([SC],e=>e.filter(eS)),CC=hy([SC],CS,{memoizeOptions:{resultEqualityCheck:rS}}),EC=hy([CC,L_],TS),TC=hy([AC,L_,FS],Zk),PC=hy([EC,FS,SC],OS),OC=hy([FS],HS),DC=hy([FS],e=>e.allowDataOverflow),IC=hy([OC,DC],z_),LC=hy([SC],e=>e.filter(eS)),MC=hy([TC,LC,ik,ok],US),RC=hy([MC,L_,nS,IC],WS),FC=hy([SC],SS),BC=hy([EC,FS,FC,XS,nS],$S,{memoizeOptions:{resultEqualityCheck:tS}}),zC=hy([eA,nS,aS],tA),UC=hy([zC,nS],oA),qC=hy([nA,nS,aS],tA),WC=hy([qC,nS],cA),VC=hy([sA,nS,aS],tA),HC=hy([VC,nS],uA),GC=hy([UC,HC,WC],QS),KC=hy([FS,OC,IC,RC,BC,GC,wv,nS],pA),YC=hy([FS,wv,EC,PC,ik,nS,KC],xA),XC=hy([YC,FS,NC],wA),QC=hy([FS,YC,XC,nS],_A),$C=e=>{var t=nS(e),r=aS(e);return OA(e,t,r,!1)},JC=hy([FS,$C],Mk),ZC=hy([FS,NC,QC,JC],jA),eE=hy([wv,PC,FS,nS],YA),tE=hy([wv,PC,FS,nS],QA),rE=hy([wv,FS,NC,ZC,$C,eE,tE,nS],(e,t,r,n,a,s,i,o)=>{if(t){var{type:l}=t,c=Ry(e,o);if(n){var d="scaleBand"===r&&n.bandwidth?n.bandwidth()/2:2,u="category"===l&&n.bandwidth?n.bandwidth()/d:0;return u="angleAxis"===o&&null!=a&&(null===a||void 0===a?void 0:a.length)>=2?2*Am(a[0]-a[1])*u:u,c&&i?i.map((e,t)=>({coordinate:n(e)+u,value:e,index:t,offset:u})):n.domain().map((e,t)=>({coordinate:n(e)+u,value:s?s[e]:e,index:t,offset:u}))}}}),nE=hy([aC,sC,e=>e.tooltip.settings],(e,t,r)=>iC(r.shared,e,t)),aE=e=>e.tooltip.settings.trigger,sE=e=>e.tooltip.settings.defaultIndex,iE=hy([yC,nE,aE,sE],hC),oE=hy([iE,EC,BS,YC],pC),lE=hy([rE,oE],lC),cE=hy([iE],e=>{if(e)return e.dataKey}),dE=hy([yC,nE,aE,sE],gC),uE=hy([Jy,Zy,wv,cv,rE,sE,dE,xC],fC),hE=hy([iE,uE],(e,t)=>null!==e&&void 0!==e&&e.coordinate?e.coordinate:t),mE=hy([iE],e=>e.active),pE=hy([dE,oE,L_,BS,lE,xC,nE],wC),fE=hy([pE],e=>{if(null!=e){var t=e.map(e=>e.payload).filter(e=>null!=e);return Array.from(new Set(t))}});function gE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function xE(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gE(Object(r),!0).forEach(function(t){yE(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gE(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function yE(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var vE=(e,t,r,n,a)=>{var s,i=-1,o=null!==(s=null===t||void 0===t?void 0:t.length)&&void 0!==s?s:0;if(o<=1||null==e)return 0;if("angleAxis"===n&&null!=a&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var l=0;l<o;l++){var c=l>0?r[l-1].coordinate:r[o-1].coordinate,d=r[l].coordinate,u=l>=o-1?r[0].coordinate:r[l+1].coordinate,h=void 0;if(Am(d-c)!==Am(u-d)){var m=[];if(Am(u-d)===Am(a[1]-a[0])){h=u;var p=d+a[1]-a[0];m[0]=Math.min(p,(p+c)/2),m[1]=Math.max(p,(p+c)/2)}else{h=c;var f=u+a[1]-a[0];m[0]=Math.min(d,(f+d)/2),m[1]=Math.max(d,(f+d)/2)}var g=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>g[0]&&e<=g[1]||e>=m[0]&&e<=m[1]){({index:i}=r[l]);break}}else{var x=Math.min(c,u),y=Math.max(c,u);if(e>(x+d)/2&&e<=(y+d)/2){({index:i}=r[l]);break}}}else if(t)for(var v=0;v<o;v++)if(0===v&&e<=(t[v].coordinate+t[v+1].coordinate)/2||v>0&&v<o-1&&e>(t[v].coordinate+t[v-1].coordinate)/2&&e<=(t[v].coordinate+t[v+1].coordinate)/2||v===o-1&&e>(t[v].coordinate+t[v-1].coordinate)/2){({index:i}=t[v]);break}return i},bE=()=>jy(lk),jE=(e,t)=>t,wE=(e,t,r)=>r,NE=(e,t,r,n)=>n,_E=hy(rE,e=>Ny()(e,e=>e.coordinate)),kE=hy([yC,jE,wE,NE],hC),SE=hy([kE,EC,BS,YC],pC),AE=hy([yC,jE,wE,NE],gC),CE=hy([Jy,Zy,wv,cv,rE,NE,AE,xC],fC),EE=hy([kE,CE],(e,t)=>{var r;return null!==(r=e.coordinate)&&void 0!==r?r:t}),TE=hy([rE,SE],lC),PE=hy([AE,SE,L_,BS,TE,xC,jE],wC),OE=hy([kE,SE],(e,t)=>({isActive:e.active&&null!=t,activeIndex:t})),DE=(e,t,r,n,a,s,i)=>{if(e&&n&&a&&s&&r){var o=jk(e,r);if(o){var l=((e,t)=>"centric"===t?e.angle:e.radius)(o,t),c=vE(l,i,s,n,a),d=((e,t,r,n)=>{var a=t.find(e=>e&&e.index===r);if(a){if("centric"===e){var s=a.coordinate,{radius:i}=n;return xE(xE(xE({},n),xk(n.cx,n.cy,i,s)),{},{angle:s,radius:i})}var o=a.coordinate,{angle:l}=n;return xE(xE(xE({},n),xk(n.cx,n.cy,o,l)),{},{angle:l,radius:o})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}})(t,s,c,o);return{activeIndex:String(c),activeCoordinate:d}}}},IE=hy([(e,t)=>t,wv,Xk,nS,JC,rE,_E,cv],(e,t,r,n,a,s,i,o)=>{if(e&&t&&n&&a&&s)return"horizontal"===t||"vertical"===t?((e,t,r,n,a,s,i)=>{if(e&&r&&n&&a&&function(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}(e,i)){var o=((e,t)=>"horizontal"===t?e.chartX:"vertical"===t?e.chartY:void 0)(e,t),l=vE(o,s,a,r,n),c=((e,t,r,n)=>{var a=t.find(e=>e&&e.index===r);if(a){if("horizontal"===e)return{x:a.coordinate,y:n.chartY};if("vertical"===e)return{x:n.chartX,y:a.coordinate}}return{x:0,y:0}})(t,a,l,e);return{activeIndex:String(l),activeCoordinate:c}}})(e,t,n,a,s,i,o):DE(e,t,r,n,a,s,i)}),LE=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},ME=Pf("mouseClick"),RE=kg();RE.startListening({actionCreator:ME,effect:(e,t)=>{var r=e.payload,n=IE(t.getState(),LE(r));null!=(null===n||void 0===n?void 0:n.activeIndex)&&t.dispatch(Vx({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var FE=Pf("mouseMove"),BE=kg(),zE=null;function UE(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":"children"===e&&"object"===typeof t&&null!==t?"<<CHILDREN>>":t}function qE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function WE(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qE(Object(r),!0).forEach(function(t){VE(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qE(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function VE(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}BE.startListening({actionCreator:FE,effect:(e,t)=>{var r=e.payload;null!==zE&&cancelAnimationFrame(zE);var n=LE(r);zE=requestAnimationFrame(()=>{var e=t.getState();if("axis"===oC(e,e.tooltip.settings.shared)){var r=IE(e,n);null!=(null===r||void 0===r?void 0:r.activeIndex)?t.dispatch(Wx({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate})):t.dispatch(Ux())}zE=null})}});var HE=Gf({name:"cartesianAxis",initialState:{xAxis:{},yAxis:{},zAxis:{}},reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Mf()},replaceXAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;void 0!==e.xAxis[r.id]&&(r.id!==n.id&&delete e.xAxis[r.id],e.xAxis[n.id]=n)},prepare:Mf()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Mf()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Mf()},replaceYAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;void 0!==e.yAxis[r.id]&&(r.id!==n.id&&delete e.yAxis[r.id],e.yAxis[n.id]=n)},prepare:Mf()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Mf()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Mf()},replaceZAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;void 0!==e.zAxis[r.id]&&(r.id!==n.id&&delete e.zAxis[r.id],e.zAxis[n.id]=n)},prepare:Mf()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Mf()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,a=e.yAxis[r];if(a){var s=a.widthHistory||[];if(3===s.length&&s[0]===s[2]&&n===s[1]&&n!==a.width&&Math.abs(n-s[0])<=1)return;var i=[...s,n].slice(-3);e.yAxis[r]=WE(WE({},e.yAxis[r]),{},{width:n,widthHistory:i})}}}}),{addXAxis:GE,replaceXAxis:KE,removeXAxis:YE,addYAxis:XE,replaceYAxis:QE,removeYAxis:$E,addZAxis:JE,replaceZAxis:ZE,removeZAxis:eT,updateYAxisWidth:tT}=HE.actions,rT=HE.reducer,nT=Gf({name:"graphicalItems",initialState:{cartesianItems:[],polarItems:[]},reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Mf()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,a=mf(e).cartesianItems.indexOf(r);a>-1&&(e.cartesianItems[a]=n)},prepare:Mf()},removeCartesianGraphicalItem:{reducer(e,t){var r=mf(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:Mf()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Mf()},removePolarGraphicalItem:{reducer(e,t){var r=mf(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:Mf()}}}),{addCartesianGraphicalItem:aT,replaceCartesianGraphicalItem:sT,removeCartesianGraphicalItem:iT,addPolarGraphicalItem:oT,removePolarGraphicalItem:lT}=nT.actions,cT=nT.reducer,dT=Gf({name:"referenceElements",initialState:{dots:[],areas:[],lines:[]},reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=mf(e).dots.findIndex(e=>e===t.payload);-1!==r&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=mf(e).areas.findIndex(e=>e===t.payload);-1!==r&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=mf(e).lines.findIndex(e=>e===t.payload);-1!==r&&e.lines.splice(r,1)}}}),{addDot:uT,removeDot:hT,addArea:mT,removeArea:pT,addLine:fT,removeLine:gT}=dT.actions,xT=dT.reducer,yT={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},vT=Gf({name:"brush",initialState:yT,reducers:{setBrushSettings:(e,t)=>null==t.payload?yT:t.payload}}),{setBrushSettings:bT}=vT.actions,jT=vT.reducer,wT=Gf({name:"legend",initialState:{settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Mf()},replaceLegendPayload:{reducer(e,t){var{prev:r,next:n}=t.payload,a=mf(e).payload.indexOf(r);a>-1&&(e.payload[a]=n)},prepare:Mf()},removeLegendPayload:{reducer(e,t){var r=mf(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:Mf()}}}),{setLegendSize:NT,setLegendSettings:_T,addLegendPayload:kT,replaceLegendPayload:ST,removeLegendPayload:AT}=wT.actions,CT=wT.reducer,ET={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},TT=Gf({name:"rootProps",initialState:ET,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=null!==(r=t.payload.barGap)&&void 0!==r?r:ET.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),PT=TT.reducer,{updateOptions:OT}=TT.actions,DT=Gf({name:"polarAxis",initialState:{radiusAxis:{},angleAxis:{}},reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:IT,removeRadiusAxis:LT,addAngleAxis:MT,removeAngleAxis:RT}=DT.actions,FT=DT.reducer,BT=Gf({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:zT}=BT.actions,UT=BT.reducer,qT=Pf("keyDown"),WT=Pf("focus"),VT=kg();VT.startListening({actionCreator:qT,effect:(e,t)=>{var r=t.getState();if(!1!==r.rootProps.accessibilityLayer){var{keyboardInteraction:n}=r.tooltip,a=e.payload;if("ArrowRight"===a||"ArrowLeft"===a||"Enter"===a){var s=pC(n,EC(r),BS(r),YC(r)),i=null==s?-1:Number(s);if(Number.isFinite(i)&&!(i<0)){var o=rE(r);if("Enter"!==a){var l=i+("ArrowRight"===a?1:-1)*("left-to-right"===nC(r)?1:-1);if(!(null==o||l>=o.length||l<0)){var c=CE(r,"axis","hover",String(l));t.dispatch(Gx({active:!0,activeIndex:l.toString(),activeDataKey:void 0,activeCoordinate:c}))}}else{var d=CE(r,"axis","hover",String(n.index));t.dispatch(Gx({active:!n.active,activeIndex:n.index,activeDataKey:n.dataKey,activeCoordinate:d}))}}}}}}),VT.startListening({actionCreator:WT,effect:(e,t)=>{var r=t.getState();if(!1!==r.rootProps.accessibilityLayer){var{keyboardInteraction:n}=r.tooltip;if(!n.active&&null==n.index){var a=CE(r,"axis","hover",String("0"));t.dispatch(Gx({activeDataKey:void 0,active:!0,activeIndex:"0",activeCoordinate:a}))}}}});var HT=Pf("externalEvent"),GT=kg(),KT=new Map;GT.startListening({actionCreator:HT,effect:(e,t)=>{var{handler:r,reactEvent:n}=e.payload;if(null!=r){n.persist();var a=n.type,s=KT.get(a);void 0!==s&&cancelAnimationFrame(s);var i=requestAnimationFrame(()=>{try{var e=t.getState(),s={activeCoordinate:hE(e),activeDataKey:cE(e),activeIndex:oE(e),activeLabel:lE(e),activeTooltipIndex:oE(e),isTooltipActive:mE(e)};r(s,n)}finally{KT.delete(a)}});KT.set(a,i)}}});var YT=hy([yC],e=>e.tooltipItemPayloads),XT=hy([YT,xC,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var a=e.find(e=>e.settings.dataKey===n);if(null!=a){var{positions:s}=a;if(null!=s)return t(s,r)}}),QT=Pf("touchMove"),$T=kg();$T.startListening({actionCreator:QT,effect:(e,t)=>{var r=e.payload;if(null!=r.touches&&0!==r.touches.length){var n=t.getState(),a=oC(n,n.tooltip.settings.shared);if("axis"===a){var s=IE(n,LE({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));null!=(null===s||void 0===s?void 0:s.activeIndex)&&t.dispatch(Wx({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if("item"===a){var i,o=r.touches[0];if(null==document.elementFromPoint)return;var l=document.elementFromPoint(o.clientX,o.clientY);if(!l||!l.getAttribute)return;var c=l.getAttribute(av),d=null!==(i=l.getAttribute(sv))&&void 0!==i?i:void 0,u=XT(t.getState(),c,d);t.dispatch(Bx({activeDataKey:d,activeIndex:c,activeCoordinate:u}))}}}});var JT=Gf({name:"errorBars",initialState:{},reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:a}=t.payload;e[r]&&(e[r]=e[r].map(e=>e.dataKey===n.dataKey&&e.direction===n.direction?a:e))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(e=>e.dataKey!==n.dataKey||e.direction!==n.direction))}}}),{addErrorBar:ZT,replaceErrorBar:eP,removeErrorBar:tP}=JT.actions,rP=JT.reducer,nP=!1,aP=!("undefined"!==typeof window&&window.document&&Boolean(window.document.createElement)&&window.setTimeout);function sP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function iP(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sP(Object(r),!0).forEach(function(t){oP(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sP(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function oP(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var lP={zIndexMap:Object.values(wk).reduce((e,t)=>iP(iP({},e),{},{[t]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),{})},cP=new Set(Object.values(wk));var dP=Gf({name:"zIndex",initialState:lP,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:Mf()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!function(e){return cP.has(e)}(r)&&delete e.zIndexMap[r])},prepare:Mf()},registerZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r,elementId:n,isPanorama:a}=t.payload;e.zIndexMap[r]?a?e.zIndexMap[r].panoramaElementId=n:e.zIndexMap[r].elementId=n:e.zIndexMap[r]={consumers:0,elementId:a?void 0:n,panoramaElementId:a?n:void 0}},prepare:Mf()},unregisterZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElementId=void 0:e.zIndexMap[r].elementId=void 0)},prepare:Mf()}}}),{registerZIndexPortal:uP,unregisterZIndexPortal:hP,registerZIndexPortalId:mP,unregisterZIndexPortalId:pP}=dP.actions,fP=Nf({brush:jT,cartesianAxis:rT,chartData:Jx,errorBars:rP,graphicalItems:cT,layout:ay,legend:CT,options:Eg,polarAxis:FT,polarOptions:UT,referenceElements:xT,rootProps:PT,tooltip:Kx,zIndex:dP.reducer});function gP(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,s=mv(),i=(0,a.useRef)(null);if(s)return r;null==i.current&&(i.current=function(e){return Bf({reducer:fP,preloadedState:e,middleware:e=>e({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes("es6")}).concat([RE.middleware,BE.middleware,VT.middleware,GT.middleware,$T.middleware]),enhancers:e=>{var t=e;return"function"===typeof e&&(t=e()),t.concat(Ff({type:"raf"}))},devTools:nP&&{serialize:{replacer:UE},name:"recharts-".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Chart")}})}(t,n));var o=fy;return a.createElement(Wg,{context:o,store:i.current},r)}var xP=e=>{var{chartData:t}=e,r=xy(),n=mv();return(0,a.useEffect)(()=>n?()=>{}:(r(Xx(t)),()=>{r(Xx(void 0))}),[t,r,n]),null},yP=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle"]);function vP(e,t){return null==e&&null==t||("number"===typeof e&&"number"===typeof t?e===t||e!==e&&t!==t:e===t)}function bP(e,t){var r=new Set([...Object.keys(e),...Object.keys(t)]);for(var n of r)if(yP.has(n)){if(null==e[n]&&null==t[n])continue;if(!Fg(e[n],t[n]))return!1}else if(!vP(e[n],t[n]))return!1;return!0}function jP(e){var{layout:t,margin:r}=e,n=xy(),s=mv();return(0,a.useEffect)(()=>{s||(n(ty(t)),n(ey(r)))},[n,s,t,r]),null}var wP=(0,a.memo)(jP,bP);function NP(e){var t=xy();return(0,a.useEffect)(()=>{t(OT(e))},[t,e]),null}var _P=()=>{var e;return null===(e=jy(e=>e.rootProps.accessibilityLayer))||void 0===e||e},kP=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function SP(e){return"string"===typeof e&&kP.includes(e)}var AP=new Set(["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"]);function CP(e){return"string"===typeof e&&AP.has(e)}function EP(e){return"string"===typeof e&&e.startsWith("data-")}function TP(e){if("object"!==typeof e||null===e)return{};var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(CP(r)||EP(r))&&(t[r]=e[r]);return t}function PP(e){return null==e?null:(0,a.isValidElement)(e)&&"object"===typeof e.props&&null!==e.props?TP(e.props):"object"!==typeof e||Array.isArray(e)?null:TP(e)}function OP(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(CP(r)||EP(r)||SP(r))&&(t[r]=e[r]);return t}var DP=["children","width","height","viewBox","className","style","title","desc"];function IP(){return IP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},IP.apply(null,arguments)}var LP,MP=(0,a.forwardRef)((e,t)=>{var{children:r,width:n,height:s,viewBox:i,className:o,style:l,title:c,desc:d}=e,u=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,DP),h=i||{width:n,height:s,x:0,y:0},m=jm("recharts-surface",o);return a.createElement("svg",IP({},OP(u),{className:m,width:n,height:s,style:l,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:t}),a.createElement("title",null,c),a.createElement("desc",null,d),r)}),RP=null!==(LP=s["useId".toString()])&&void 0!==LP?LP:()=>{var[e]=a.useState(()=>Dm("uid-"));return e};function FP(e,t){var r=RP();return t||(e?"".concat(e,"-").concat(r):r)}var BP=hy(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(null!=t){var n=e[t];if(null!=n)return r?n.panoramaElementId:n.elementId}}),zP=hy(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(e=>parseInt(e,10)).concat(Object.values(wk));return Array.from(new Set(t)).sort((e,t)=>e-t)},{memoizeOptions:{resultEqualityCheck:function(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}}});function UP(e){var{zIndex:t,isPanorama:r}=e,n=FP("".concat(r?"recharts-zindex-panorama-":"recharts-zindex-").concat(t)),s=xy();return(0,a.useLayoutEffect)(()=>(s(mP({zIndex:t,elementId:n,isPanorama:r})),()=>{s(pP({zIndex:t,isPanorama:r}))}),[s,t,n,r]),a.createElement("g",{id:n})}function qP(e){var{children:t,isPanorama:r}=e,n=jy(zP);if(!n||0===n.length)return t;var s=n.filter(e=>e<0),i=n.filter(e=>e>0);return a.createElement(a.Fragment,null,s.map(e=>a.createElement(UP,{key:e,zIndex:e,isPanorama:r})),t,i.map(e=>a.createElement(UP,{key:e,zIndex:e,isPanorama:r})))}var WP=["children"];function VP(){return VP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},VP.apply(null,arguments)}var HP={width:"100%",height:"100%",display:"block"},GP=(0,a.forwardRef)((e,t)=>{var r=bv(),n=jv(),s=_P();if(!Qm(r)||!Qm(n))return null;var i,o,{children:l,otherAttributes:c,title:d,desc:u}=e;return null!=c&&(i="number"===typeof c.tabIndex?c.tabIndex:s?0:void 0,o="string"===typeof c.role?c.role:s?"application":void 0),a.createElement(MP,VP({},c,{title:d,desc:u,role:o,tabIndex:i,width:r,height:n,style:HP,ref:t}),l)}),KP=e=>{var{children:t}=e,r=jy(fv);if(!r)return null;var{width:n,height:s,y:i,x:o}=r;return a.createElement(MP,{width:n,height:s,x:o,y:i},t)},YP=(0,a.forwardRef)((e,t)=>{var{children:r}=e,n=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,WP);return mv()?a.createElement(KP,null,a.createElement(qP,{isPanorama:!0},r)):a.createElement(GP,VP({ref:t},n),a.createElement(qP,{isPanorama:!1},r))});var XP=new(r(7283)),QP="recharts.syncEvent.tooltip",$P="recharts.syncEvent.brush";function JP(e){return e.tooltip.syncInteraction}var ZP=["x","y"];function eO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eO(Object(r),!0).forEach(function(t){rO(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eO(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function rO(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nO(){var e=jy(ck),t=jy(uk),r=xy(),n=jy(dk),s=jy(rE),i=Nv(),o=xv(),l=jy(e=>e.rootProps.className);(0,a.useEffect)(()=>{if(null==e)return Um;var a=(a,l,c)=>{var d;if(t!==c&&e===a)if("index"!==n){if(null!=s){var u;if("function"===typeof n){var h={activeTooltipIndex:null==l.payload.index?void 0:Number(l.payload.index),isTooltipActive:l.payload.active,activeIndex:null==l.payload.index?void 0:Number(l.payload.index),activeLabel:l.payload.label,activeDataKey:l.payload.dataKey,activeCoordinate:l.payload.coordinate},m=n(s,h);u=s[m]}else"value"===n&&(u=s.find(e=>String(e.value)===l.payload.label));var{coordinate:p}=l.payload;if(null!=u&&!1!==l.payload.active&&null!=p&&null!=o){var{x:f,y:g}=p,x=Math.min(f,o.x+o.width),y=Math.min(g,o.y+o.height),v={x:"horizontal"===i?u.coordinate:x,y:"horizontal"===i?y:u.coordinate},b=Hx({active:l.payload.active,coordinate:v,dataKey:l.payload.dataKey,index:String(u.index),label:l.payload.label,sourceViewBox:l.payload.sourceViewBox});r(b)}else r(Hx({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}))}}else if(o&&null!==l&&void 0!==l&&null!==(d=l.payload)&&void 0!==d&&d.coordinate&&l.payload.sourceViewBox){var j=l.payload.coordinate,{x:w,y:N}=j,_=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(j,ZP),{x:k,y:S,width:A,height:C}=l.payload.sourceViewBox,E=tO(tO({},_),{},{x:o.x+(A?(w-k)/A:0)*o.width,y:o.y+(C?(N-S)/C:0)*o.height});r(tO(tO({},l),{},{payload:tO(tO({},l.payload),{},{coordinate:E})}))}else r(l)};return XP.on(QP,a),()=>{XP.off(QP,a)}},[l,r,t,e,n,s,i,o])}function aO(){var e=xy();(0,a.useEffect)(()=>{e(Tg())},[e]),nO(),function(){var e=jy(ck),t=jy(uk),r=xy();(0,a.useEffect)(()=>{if(null==e)return Um;var n=(n,a,s)=>{t!==s&&e===n&&r(Qx(a))};return XP.on($P,n),()=>{XP.off($P,n)}},[r,t,e])}()}function sO(e,t,r,n,s,i){var o=jy(r=>((e,t,r)=>{if(null!=t){var n=yC(e);return"axis"===t?"hover"===r?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:"hover"===r?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}})(r,e,t)),l=jy(uk),c=jy(ck),d=jy(dk),u=jy(JP),h=null===u||void 0===u?void 0:u.active,m=xv();(0,a.useEffect)(()=>{if(!h&&null!=c&&null!=l){var e=Hx({active:i,coordinate:r,dataKey:o,index:s,label:"number"===typeof n?String(n):n,sourceViewBox:m});XP.emit(QP,c,e,l)}},[h,r,o,s,n,l,c,d,i,m])}var iO=(0,a.createContext)(null),oO=(0,a.createContext)(null);function lO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function cO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lO(Object(r),!0).forEach(function(t){dO(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lO(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function dO(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uO(){return uO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uO.apply(null,arguments)}var hO=()=>(aO(),null);function mO(e){if("number"===typeof e)return e;if("string"===typeof e){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var pO=(0,a.forwardRef)((e,t)=>{var r,n,s=(0,a.useRef)(null),[i,o]=(0,a.useState)({containerWidth:mO(null===(r=e.style)||void 0===r?void 0:r.width),containerHeight:mO(null===(n=e.style)||void 0===n?void 0:n.height)}),l=(0,a.useCallback)((e,t)=>{o(r=>{var n=Math.round(e),a=Math.round(t);return r.containerWidth===n&&r.containerHeight===a?r:{containerWidth:n,containerHeight:a}})},[]),c=(0,a.useCallback)(e=>{if("function"===typeof t&&t(e),null!=e&&"undefined"!==typeof ResizeObserver){var{width:r,height:n}=e.getBoundingClientRect();l(r,n);var a=new ResizeObserver(e=>{var{width:t,height:r}=e[0].contentRect;l(t,r)});a.observe(e),s.current=a}},[t,l]);return(0,a.useEffect)(()=>()=>{var e=s.current;null!=e&&e.disconnect()},[l]),a.createElement(a.Fragment,null,a.createElement(_v,{width:i.containerWidth,height:i.containerHeight}),a.createElement("div",uO({ref:c},e)))}),fO=(0,a.forwardRef)((e,t)=>{var{width:r,height:n}=e,[s,i]=(0,a.useState)({containerWidth:mO(r),containerHeight:mO(n)}),o=(0,a.useCallback)((e,t)=>{i(r=>{var n=Math.round(e),a=Math.round(t);return r.containerWidth===n&&r.containerHeight===a?r:{containerWidth:n,containerHeight:a}})},[]),l=(0,a.useCallback)(e=>{if("function"===typeof t&&t(e),null!=e){var{width:r,height:n}=e.getBoundingClientRect();o(r,n)}},[t,o]);return a.createElement(a.Fragment,null,a.createElement(_v,{width:s.containerWidth,height:s.containerHeight}),a.createElement("div",uO({ref:l},e)))}),gO=(0,a.forwardRef)((e,t)=>{var{width:r,height:n}=e;return a.createElement(a.Fragment,null,a.createElement(_v,{width:r,height:n}),a.createElement("div",uO({ref:t},e)))}),xO=(0,a.forwardRef)((e,t)=>{var{width:r,height:n}=e;return Em(r)||Em(n)?a.createElement(fO,uO({},e,{ref:t})):a.createElement(gO,uO({},e,{ref:t}))});var yO=(0,a.forwardRef)((e,t)=>{var{children:r,className:n,height:s,onClick:i,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:d,onMouseLeave:u,onMouseMove:h,onMouseUp:m,onTouchEnd:p,onTouchMove:f,onTouchStart:g,style:x,width:y,responsive:v,dispatchTouchEvents:b=!0}=e,j=(0,a.useRef)(null),w=xy(),[N,_]=(0,a.useState)(null),[k,S]=(0,a.useState)(null),A=function(){var e=xy(),[t,r]=(0,a.useState)(null),n=jy(ev);return(0,a.useEffect)(()=>{if(null!=t){var r=t.getBoundingClientRect().width/t.offsetWidth;Xm(r)&&r!==n&&e(ny(r))}},[t,e,n]),r}(),C=np(),E=(null===C||void 0===C?void 0:C.width)>0?C.width:y,T=(null===C||void 0===C?void 0:C.height)>0?C.height:s,P=(0,a.useCallback)(e=>{A(e),"function"===typeof t&&t(e),_(e),S(e),null!=e&&(j.current=e)},[A,t,_,S]),O=(0,a.useCallback)(e=>{w(ME(e)),w(HT({handler:i,reactEvent:e}))},[w,i]),D=(0,a.useCallback)(e=>{w(FE(e)),w(HT({handler:d,reactEvent:e}))},[w,d]),I=(0,a.useCallback)(e=>{w(Ux()),w(HT({handler:u,reactEvent:e}))},[w,u]),L=(0,a.useCallback)(e=>{w(FE(e)),w(HT({handler:h,reactEvent:e}))},[w,h]),M=(0,a.useCallback)(()=>{w(WT())},[w]),R=(0,a.useCallback)(e=>{w(qT(e.key))},[w]),F=(0,a.useCallback)(e=>{w(HT({handler:o,reactEvent:e}))},[w,o]),B=(0,a.useCallback)(e=>{w(HT({handler:l,reactEvent:e}))},[w,l]),z=(0,a.useCallback)(e=>{w(HT({handler:c,reactEvent:e}))},[w,c]),U=(0,a.useCallback)(e=>{w(HT({handler:m,reactEvent:e}))},[w,m]),q=(0,a.useCallback)(e=>{w(HT({handler:g,reactEvent:e}))},[w,g]),W=(0,a.useCallback)(e=>{b&&w(QT(e)),w(HT({handler:f,reactEvent:e}))},[w,b,f]),V=(0,a.useCallback)(e=>{w(HT({handler:p,reactEvent:e}))},[w,p]),H=function(e){return!0===e?pO:xO}(v);return a.createElement(iO.Provider,{value:N},a.createElement(oO.Provider,{value:k},a.createElement(H,{width:null!==E&&void 0!==E?E:null===x||void 0===x?void 0:x.width,height:null!==T&&void 0!==T?T:null===x||void 0===x?void 0:x.height,className:jm("recharts-wrapper",n),style:cO({position:"relative",cursor:"default",width:E,height:T},x),onClick:O,onContextMenu:F,onDoubleClick:B,onFocus:M,onKeyDown:R,onMouseDown:z,onMouseEnter:D,onMouseLeave:I,onMouseMove:L,onMouseUp:U,onTouchEnd:V,onTouchMove:W,onTouchStart:q,ref:P},a.createElement(hO,null),r)))}),vO=hy([cv],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),bO=hy([vO,Jy,Zy],(e,t,r)=>{if(e&&null!=t&&null!=r)return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),jO=()=>jy(bO),wO=(0,a.createContext)(void 0),NO=e=>{var{children:t}=e,[r]=(0,a.useState)("".concat(Dm("recharts"),"-clip")),n=jO();if(null==n)return null;var{x:s,y:i,width:o,height:l}=n;return a.createElement(wO.Provider,{value:r},a.createElement("defs",null,a.createElement("clipPath",{id:r},a.createElement("rect",{x:s,y:i,height:l,width:o}))),t)},_O=["width","height","responsive","children","className","style","compact","title","desc"];var kO=(0,a.forwardRef)((e,t)=>{var{width:r,height:n,responsive:s,children:i,className:o,style:l,compact:c,title:d,desc:u}=e,h=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,_O),m=TP(h);return c?a.createElement(a.Fragment,null,a.createElement(_v,{width:r,height:n}),a.createElement(YP,{otherAttributes:m,title:d,desc:u},i)):a.createElement(yO,{className:o,style:l,width:r,height:n,responsive:null!==s&&void 0!==s&&s,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},a.createElement(YP,{otherAttributes:m,title:d,desc:u,ref:t},a.createElement(NO,null,i)))});function SO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function AO(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CO(e,t){var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?SO(Object(r),!0).forEach(function(t){AO(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SO(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e),n=t;return Object.keys(t).reduce((e,t)=>(void 0===e[t]&&void 0!==n[t]&&(e[t]=n[t]),e),r)}function EO(){return EO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},EO.apply(null,arguments)}var TO={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index",responsive:!1},PO=(0,a.forwardRef)(function(e,t){var r,n=CO(e.categoricalChartProps,TO),{chartName:s,defaultTooltipEventType:i,validateTooltipEventTypes:o,tooltipPayloadSearcher:l,categoricalChartProps:c}=e,d={chartName:s,defaultTooltipEventType:i,validateTooltipEventTypes:o,tooltipPayloadSearcher:l,eventEmitter:void 0};return a.createElement(gP,{preloadedState:{options:d},reduxStoreName:null!==(r=c.id)&&void 0!==r?r:s},a.createElement(xP,{chartData:c.data}),a.createElement(wP,{layout:n.layout,margin:n.margin}),a.createElement(NP,{baseValue:n.baseValue,accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className,reverseStackOrder:n.reverseStackOrder}),a.createElement(kO,EO({},n,{ref:t})))}),OO=["axis"],DO=(0,a.forwardRef)((e,t)=>a.createElement(PO,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:OO,tooltipPayloadSearcher:Ag,categoricalChartProps:e,ref:t}));function IO(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function MO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?LO(Object(r),!0).forEach(function(t){RO(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LO(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function RO(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var FO=MO({},{cacheSize:2e3,enableCache:!0}),BO=new class{constructor(e){IO(this,"cache",new Map),this.maxSize=e}get(e){var t=this.cache.get(e);return void 0!==t&&(this.cache.delete(e),this.cache.set(e,t)),t}set(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;null!=r&&this.cache.delete(r)}this.cache.set(e,t)}clear(){this.cache.clear()}size(){return this.cache.size}}(FO.cacheSize),zO={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},UO="recharts_measurement_span";var qO=(e,t)=>{try{var r=document.getElementById(UO);r||((r=document.createElement("span")).setAttribute("id",UO),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,zO,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch(a){return{width:0,height:0}}},WO=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===e||null===e||aP)return{width:0,height:0};if(!FO.enableCache)return qO(e,t);var r=function(e,t){var r=t.fontSize||"",n=t.fontFamily||"",a=t.fontWeight||"",s=t.fontStyle||"",i=t.letterSpacing||"",o=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(s,"|").concat(i,"|").concat(o)}(e,t),n=BO.get(r);if(n)return n;var a=qO(e,t);return BO.set(r,a),a};function VO(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class HO{static create(e){return new HO(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:t,position:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0!==e){if(r)switch(r){case"start":default:return this.scale(e);case"middle":var n=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+n;case"end":var a=this.bandwidth?this.bandwidth():0;return this.scale(e)+a}if(t){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+s}return this.scale(e)}}isInRange(e){var t=this.range(),r=t[0],n=t[t.length-1];return r<=n?e>=r&&e<=n:e>=n&&e<=r}}VO(HO,"EPS",1e-4);function GO(e,t){if(t<1)return[];if(1===t)return e;for(var r=[],n=0;n<e.length;n+=t)r.push(e[n]);return r}function KO(e,t,r){return function(e){var{width:t,height:r}=e,n=function(e){return(e%180+180)%180}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),a=n*Math.PI/180,s=Math.atan(r/t),i=a>s&&a<Math.PI-s?r/Math.sin(a):t/Math.cos(a);return Math.abs(i)}({width:e.width+t.width,height:e.height+t.height},r)}function YO(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var s=r();return e*(t-e*s/2-n)>=0&&e*(t+e*s/2-a)<=0}function XO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function QO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?XO(Object(r),!0).forEach(function(t){$O(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XO(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function $O(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JO(e,t,r){var n,{tick:a,ticks:s,viewBox:i,minTickGap:o,orientation:l,interval:c,tickFormatter:d,unit:u,angle:h}=e;if(!s||!s.length||!a)return[];if(Tm(c)||aP)return null!==(n=function(e,t){return GO(e,t+1)}(s,Tm(c)?c:0))&&void 0!==n?n:[];var m=[],p="top"===l||"bottom"===l?"width":"height",f=u&&"width"===p?WO(u,{fontSize:t,letterSpacing:r}):{width:0,height:0},g=(e,n)=>{var a="function"===typeof d?d(e.value,n):e.value;return"width"===p?KO(WO(a,{fontSize:t,letterSpacing:r}),f,h):WO(a,{fontSize:t,letterSpacing:r})[p]},x=s.length>=2?Am(s[1].coordinate-s[0].coordinate):1,y=function(e,t,r){var n="width"===r,{x:a,y:s,width:i,height:o}=e;return 1===t?{start:n?a:s,end:n?a+i:s+o}:{start:n?a+i:s+o,end:n?a:s}}(i,x,p);return"equidistantPreserveStart"===c?function(e,t,r,n,a){for(var s,i=(n||[]).slice(),{start:o,end:l}=t,c=0,d=1,u=o,h=function(){var t=null===n||void 0===n?void 0:n[c];if(void 0===t)return{v:GO(n,d)};var s,i=c,h=()=>(void 0===s&&(s=r(t,i)),s),m=t.coordinate,p=0===c||YO(e,m,h,u,l);p||(c=0,u=o,d+=1),p&&(u=m+e*(h()/2+a),c+=d)};d<=i.length;)if(s=h())return s.v;return[]}(x,y,g,s,o):(m="preserveStart"===c||"preserveStartEnd"===c?function(e,t,r,n,a,s){var i=(n||[]).slice(),o=i.length,{start:l,end:c}=t;if(s){var d=n[o-1],u=r(d,o-1),h=e*(d.coordinate+e*u/2-c);i[o-1]=d=QO(QO({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate}),null!=d.tickCoord&&YO(e,d.tickCoord,()=>u,l,c)&&(c=d.tickCoord-e*(u/2+a),i[o-1]=QO(QO({},d),{},{isShow:!0}))}for(var m=s?o-1:o,p=function(t){var n,s=i[t],o=()=>(void 0===n&&(n=r(s,t)),n);if(0===t){var d=e*(s.coordinate-e*o()/2-l);i[t]=s=QO(QO({},s),{},{tickCoord:d<0?s.coordinate-d*e:s.coordinate})}else i[t]=s=QO(QO({},s),{},{tickCoord:s.coordinate});null!=s.tickCoord&&YO(e,s.tickCoord,o,l,c)&&(l=s.tickCoord+e*(o()/2+a),i[t]=QO(QO({},s),{},{isShow:!0}))},f=0;f<m;f++)p(f);return i}(x,y,g,s,o,"preserveStartEnd"===c):function(e,t,r,n,a){for(var s=(n||[]).slice(),i=s.length,{start:o}=t,{end:l}=t,c=function(t){var n,c=s[t],d=()=>(void 0===n&&(n=r(c,t)),n);if(t===i-1){var u=e*(c.coordinate+e*d()/2-l);s[t]=c=QO(QO({},c),{},{tickCoord:u>0?c.coordinate-u*e:c.coordinate})}else s[t]=c=QO(QO({},c),{},{tickCoord:c.coordinate});null!=c.tickCoord&&YO(e,c.tickCoord,d,o,l)&&(l=c.tickCoord-e*(d()/2+a),s[t]=QO(QO({},c),{},{isShow:!0}))},d=i-1;d>=0;d--)c(d);return s}(x,y,g,s,o),m.filter(e=>e.isShow))}var ZO=["children","className"];function eD(){return eD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},eD.apply(null,arguments)}var tD=a.forwardRef((e,t)=>{var{children:r,className:n}=e,s=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,ZO),i=jm("recharts-layer",n);return a.createElement("g",eD({className:i},OP(s),{ref:t}),r)}),rD=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,nD=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,aD=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,sD=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,iD={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},oD=Object.keys(iD),lD="NaN";class cD{static parse(e){var t,[,r,n]=null!==(t=sD.exec(e))&&void 0!==t?t:[];return new cD(parseFloat(r),null!==n&&void 0!==n?n:"")}constructor(e,t){this.num=e,this.unit=t,this.num=e,this.unit=t,Cm(e)&&(this.unit=""),""===t||aD.test(t)||(this.num=NaN,this.unit=""),oD.includes(t)&&(this.num=function(e,t){return e*iD[t]}(e,t),this.unit="px")}add(e){return this.unit!==e.unit?new cD(NaN,""):new cD(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new cD(NaN,""):new cD(this.num-e.num,this.unit)}multiply(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new cD(NaN,""):new cD(this.num*e.num,this.unit||e.unit)}divide(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new cD(NaN,""):new cD(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Cm(this.num)}}function dD(e){if(e.includes(lD))return lD;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,a,s]=null!==(r=rD.exec(t))&&void 0!==r?r:[],i=cD.parse(null!==n&&void 0!==n?n:""),o=cD.parse(null!==s&&void 0!==s?s:""),l="*"===a?i.multiply(o):i.divide(o);if(l.isNaN())return lD;t=t.replace(rD,l.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var c,[,d,u,h]=null!==(c=nD.exec(t))&&void 0!==c?c:[],m=cD.parse(null!==d&&void 0!==d?d:""),p=cD.parse(null!==h&&void 0!==h?h:""),f="+"===u?m.add(p):m.subtract(p);if(f.isNaN())return lD;t=t.replace(nD,f.toString())}return t}var uD=/\(([^()]*)\)/;function hD(e){var t=e.replace(/\s+/g,"");return t=function(e){for(var t,r=e;null!=(t=uD.exec(r));){var[,n]=t;r=r.replace(uD,dD(n))}return r}(t),t=dD(t)}function mD(e){var t=function(e){try{return hD(e)}catch(t){return lD}}(e.slice(5,-1));return t===lD?"":t}var pD=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],fD=["dx","dy","angle","className","breakAll"];function gD(){return gD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gD.apply(null,arguments)}function xD(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var yD=/[ \f\n\r\t\v\u2028\u2029]+/,vD=e=>{var{children:t,breakAll:r,style:n}=e;try{var a=[];return Fm(t)||(a=r?t.toString().split(""):t.toString().split(yD)),{wordsWithComputedWidth:a.map(e=>({word:e,width:WO(e,n).width})),spaceWidth:r?0:WO("\xa0",n).width}}catch(s){return null}};function bD(e){return"start"===e||"middle"===e||"end"===e||"inherit"===e}var jD=(e,t,r,n)=>e.reduce((e,a)=>{var{word:s,width:i}=a,o=e[e.length-1];if(o&&null!=i&&(null==t||n||o.width+i+r<Number(t)))o.words.push(s),o.width+=i+r;else{var l={words:[s],width:i};e.push(l)}return e},[]),wD=e=>e.reduce((e,t)=>e.width>t.width?e:t),ND=(e,t,r,n,a,s,i,o)=>{var l=e.slice(0,t),c=vD({breakAll:r,style:n,children:l+"\u2026"});if(!c)return[!1,[]];var d=jD(c.wordsWithComputedWidth,s,i,o);return[d.length>a||wD(d).width>Number(s),d]},_D=e=>[{words:Fm(e)?[]:e.toString().split(yD),width:void 0}],kD=e=>{var{width:t,scaleToFit:r,children:n,style:a,breakAll:s,maxLines:i}=e;if((t||r)&&!aP){var o=vD({breakAll:s,children:n,style:a});if(!o)return _D(n);var{wordsWithComputedWidth:l,spaceWidth:c}=o;return((e,t,r,n,a)=>{var{maxLines:s,children:i,style:o,breakAll:l}=e,c=Tm(s),d=String(i),u=jD(t,n,r,a);if(!c||a)return u;if(!(u.length>s||wD(u).width>Number(n)))return u;for(var h,m=0,p=d.length-1,f=0;m<=p&&f<=d.length-1;){var g=Math.floor((m+p)/2),x=g-1,[y,v]=ND(d,x,l,o,s,n,r,a),[b]=ND(d,g,l,o,s,n,r,a);if(y||b||(m=g+1),y&&b&&(p=g-1),!y&&b){h=v;break}f++}return h||u})({breakAll:s,children:n,maxLines:i,style:a},l,c,t,Boolean(r))}return _D(n)},SD="#808080",AD={angle:0,breakAll:!1,capHeight:"0.71em",fill:SD,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},CD=(0,a.forwardRef)((e,t)=>{var r=CO(e,AD),{x:n,y:s,lineHeight:i,capHeight:o,fill:l,scaleToFit:c,textAnchor:d,verticalAnchor:u}=r,h=xD(r,pD),m=(0,a.useMemo)(()=>kD({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:c,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,c,h.style,h.width]),{dx:p,dy:f,angle:g,className:x,breakAll:y}=h,v=xD(h,fD);if(!Pm(n)||!Pm(s)||0===m.length)return null;var b,j=Number(n)+(Tm(p)?p:0),w=Number(s)+(Tm(f)?f:0);if(!Xm(j)||!Xm(w))return null;switch(u){case"start":b=mD("calc(".concat(o,")"));break;case"middle":b=mD("calc(".concat((m.length-1)/2," * -").concat(i," + (").concat(o," / 2))"));break;default:b=mD("calc(".concat(m.length-1," * -").concat(i,")"))}var N=[];if(c){var _=m[0].width,{width:k}=h;N.push("scale(".concat(Tm(k)&&Tm(_)?k/_:1,")"))}return g&&N.push("rotate(".concat(g,", ").concat(j,", ").concat(w,")")),N.length&&(v.transform=N.join(" ")),a.createElement("text",gD({},OP(v),{ref:t,x:j,y:w,className:jm("recharts-text",x),textAnchor:d,fill:l.includes("url")?SD:l}),m.map((e,t)=>{var r=e.words.join(y?"":" ");return a.createElement("tspan",{x:j,dy:0===t?b:i,key:"".concat(r,"-").concat(t)},r)}))});function ED(e){var{zIndex:t,children:r}=e,n=void 0!==Nv()&&void 0!==t&&0!==t,s=mv(),i=xy();(0,a.useLayoutEffect)(()=>n?(i(uP({zIndex:t})),()=>{i(hP({zIndex:t}))}):Um,[i,t,n]);var l=jy(e=>BP(e,t,s));if(!n)return r;if(!l)return null;var c=document.getElementById(l);return c?(0,o.createPortal)(r,c):null}CD.displayName="Text";var TD=["labelRef"];function PD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function OD(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?PD(Object(r),!0).forEach(function(t){DD(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PD(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function DD(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ID(){return ID=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ID.apply(null,arguments)}var LD=(0,a.createContext)(null),MD=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:s,width:i,height:o,children:l}=e,c=(0,a.useMemo)(()=>({x:t,y:r,upperWidth:n,lowerWidth:s,width:i,height:o}),[t,r,n,s,i,o]);return a.createElement(LD.Provider,{value:c},l)},RD=()=>{var e=(0,a.useContext)(LD),t=xv();return e||gv(t)},FD=(0,a.createContext)(null),BD=()=>{var e=(0,a.useContext)(FD),t=jy(Xk);return e||t},zD=e=>null!=e&&"function"===typeof e,UD=(e,t,r,n,s)=>{var i,o,{offset:l,className:c}=e,{cx:d,cy:u,innerRadius:h,outerRadius:m,startAngle:p,endAngle:f,clockWise:g}=s,x=(h+m)/2,y=((e,t)=>Am(t-e)*Math.min(Math.abs(t-e),360))(p,f),v=y>=0?1:-1;switch(t){case"insideStart":i=p+v*l,o=g;break;case"insideEnd":i=f-v*l,o=!g;break;case"end":i=f+v*l,o=g;break;default:throw new Error("Unsupported position ".concat(t))}o=y<=0?o:!o;var b=xk(d,u,x,i),j=xk(d,u,x,i+359*(o?1:-1)),w="M".concat(b.x,",").concat(b.y,"\n    A").concat(x,",").concat(x,",0,1,").concat(o?0:1,",\n    ").concat(j.x,",").concat(j.y),N=Fm(e.id)?Dm("recharts-radial-line-"):e.id;return a.createElement("text",ID({},n,{dominantBaseline:"central",className:jm("recharts-radial-bar-label",c)}),a.createElement("defs",null,a.createElement("path",{id:N,d:w})),a.createElement("textPath",{xlinkHref:"#".concat(N)},r))},qD=e=>"cx"in e&&Tm(e.cx),WD={angle:0,offset:5,zIndex:wk.label,position:"middle",textBreakAll:!1};function VD(e){var t,r,n,s=CO(e,WD),{viewBox:i,position:o,value:l,children:c,content:d,className:u="",textBreakAll:h,labelRef:m}=s,p=BD(),f=RD();if(!(t=null==i?"center"===o?f:null!==p&&void 0!==p?p:f:qD(i)?i:gv(i))||Fm(l)&&Fm(c)&&!(0,a.isValidElement)(d)&&"function"!==typeof d)return null;var g=OD(OD({},s),{},{viewBox:t});if((0,a.isValidElement)(d)){var{labelRef:x}=g,y=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(g,TD);return(0,a.cloneElement)(d,y)}if("function"===typeof d){if(r=(0,a.createElement)(d,g),(0,a.isValidElement)(r))return r}else r=(e=>{var{value:t,formatter:r}=e,n=Fm(e.children)?t:e.children;return"function"===typeof r?r(n):n})(s);var v=OP(s);if(qD(t)){if("insideStart"===o||"insideEnd"===o||"end"===o)return UD(s,o,r,v,t);n=((e,t,r)=>{var{cx:n,cy:a,innerRadius:s,outerRadius:i,startAngle:o,endAngle:l}=e,c=(o+l)/2;if("outside"===r){var{x:d,y:u}=xk(n,a,i+t,c);return{x:d,y:u,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if("center"===r)return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===r)return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===r)return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var h=(s+i)/2,{x:m,y:p}=xk(n,a,h,c);return{x:m,y:p,textAnchor:"middle",verticalAnchor:"middle"}})(t,s.offset,s.position)}else n=((e,t)=>{var r,{parentViewBox:n,offset:a,position:s}=e;null==n||qD(n)||(r=n);var{x:i,y:o,upperWidth:l,lowerWidth:c,height:d}=t,u=i,h=i+(l-c)/2,m=(u+h)/2,p=(l+c)/2,f=u+l/2,g=d>=0?1:-1,x=g*a,y=g>0?"end":"start",v=g>0?"start":"end",b=l>=0?1:-1,j=b*a,w=b>0?"end":"start",N=b>0?"start":"end";if("top"===s)return OD(OD({},{x:u+l/2,y:o-x,textAnchor:"middle",verticalAnchor:y}),r?{height:Math.max(o-r.y,0),width:l}:{});if("bottom"===s)return OD(OD({},{x:h+c/2,y:o+d+x,textAnchor:"middle",verticalAnchor:v}),r?{height:Math.max(r.y+r.height-(o+d),0),width:c}:{});if("left"===s){var _={x:m-j,y:o+d/2,textAnchor:w,verticalAnchor:"middle"};return OD(OD({},_),r?{width:Math.max(_.x-r.x,0),height:d}:{})}if("right"===s){var k={x:m+p+j,y:o+d/2,textAnchor:N,verticalAnchor:"middle"};return OD(OD({},k),r?{width:Math.max(r.x+r.width-k.x,0),height:d}:{})}var S=r?{width:p,height:d}:{};return"insideLeft"===s?OD({x:m+j,y:o+d/2,textAnchor:N,verticalAnchor:"middle"},S):"insideRight"===s?OD({x:m+p-j,y:o+d/2,textAnchor:w,verticalAnchor:"middle"},S):"insideTop"===s?OD({x:u+l/2,y:o+x,textAnchor:"middle",verticalAnchor:v},S):"insideBottom"===s?OD({x:h+c/2,y:o+d-x,textAnchor:"middle",verticalAnchor:y},S):"insideTopLeft"===s?OD({x:u+j,y:o+x,textAnchor:N,verticalAnchor:v},S):"insideTopRight"===s?OD({x:u+l-j,y:o+x,textAnchor:w,verticalAnchor:v},S):"insideBottomLeft"===s?OD({x:h+j,y:o+d-x,textAnchor:N,verticalAnchor:y},S):"insideBottomRight"===s?OD({x:h+c-j,y:o+d-x,textAnchor:w,verticalAnchor:y},S):s&&"object"===typeof s&&(Tm(s.x)||Em(s.x))&&(Tm(s.y)||Em(s.y))?OD({x:i+Im(s.x,p),y:o+Im(s.y,d),textAnchor:"end",verticalAnchor:"end"},S):OD({x:f,y:o+d/2,textAnchor:"middle",verticalAnchor:"middle"},S)})(s,t);return a.createElement(ED,{zIndex:s.zIndex},a.createElement(CD,ID({ref:m,className:jm("recharts-label",u)},v,n,{textAnchor:bD(v.textAnchor)?v.textAnchor:n.textAnchor,breakAll:h}),r))}VD.displayName="Label";var HD=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return!0===e?a.createElement(VD,ID({key:"label-implicit"},n)):Pm(e)?a.createElement(VD,ID({key:"label-implicit",value:e},n)):(0,a.isValidElement)(e)?e.type===VD?(0,a.cloneElement)(e,OD({key:"label-implicit"},n)):a.createElement(VD,ID({key:"label-implicit",content:e},n)):zD(e)?a.createElement(VD,ID({key:"label-implicit",content:e},n)):e&&"object"===typeof e?a.createElement(VD,ID({},e,{key:"label-implicit"},n)):null};function GD(e){var{label:t,labelRef:r}=e,n=RD();return HD(t,n,r)||null}var KD=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,YD=(e,t)=>{if(!e||"function"===typeof e||"boolean"===typeof e)return null;var r=e;if((0,a.isValidElement)(e)&&(r=e.props),"object"!==typeof r&&"function"!==typeof r)return null;var n={};return Object.keys(r).forEach(e=>{SP(e)&&(n[e]=t||(t=>r[e](r,t)))}),n},XD=(e,t,r)=>{if(null===e||"object"!==typeof e&&"function"!==typeof e)return null;var n=null;return Object.keys(e).forEach(a=>{var s=e[a];SP(a)&&"function"===typeof s&&(n||(n={}),n[a]=((e,t,r)=>n=>(e(t,r,n),null))(s,t,r))}),n},QD=["axisLine","width","height","className","hide","ticks","axisType"];function $D(){return $D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$D.apply(null,arguments)}function JD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ZD(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?JD(Object(r),!0).forEach(function(t){eI(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JD(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function eI(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var tI={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:wk.axis};function rI(e){var{x:t,y:r,width:n,height:s,orientation:i,mirror:o,axisLine:l,otherSvgProps:c}=e;if(!l)return null;var d=ZD(ZD(ZD({},c),TP(l)),{},{fill:"none"});if("top"===i||"bottom"===i){var u=+("top"===i&&!o||"bottom"===i&&o);d=ZD(ZD({},d),{},{x1:t,y1:r+u*s,x2:t+n,y2:r+u*s})}else{var h=+("left"===i&&!o||"right"===i&&o);d=ZD(ZD({},d),{},{x1:t+h*n,y1:r,x2:t+h*n,y2:r+s})}return a.createElement("line",$D({},d,{className:jm("recharts-cartesian-axis-line",Sm()(l,"className"))}))}function nI(e){var t,{option:r,tickProps:n,value:s}=e,i=jm(n.className,"recharts-cartesian-axis-tick-value");if(a.isValidElement(r))t=a.cloneElement(r,ZD(ZD({},n),{},{className:i}));else if("function"===typeof r)t=r(ZD(ZD({},n),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";"boolean"!==typeof r&&(o=jm(o,null===r||void 0===r?void 0:r.className)),t=a.createElement(CD,$D({},n,{className:o}),s)}return t}var aI=(0,a.forwardRef)((e,t)=>{var{ticks:r=[],tick:n,tickLine:s,stroke:i,tickFormatter:o,unit:l,padding:c,tickTextProps:d,orientation:u,mirror:h,x:m,y:p,width:f,height:g,tickSize:x,tickMargin:y,fontSize:v,letterSpacing:b,getTicksConfig:j,events:w,axisType:N}=e,_=JO(ZD(ZD({},j),{},{ticks:r}),v,b),k=function(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}(u,h),S=function(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}(u,h),A=TP(j),C=PP(n),E={};"object"===typeof s&&(E=s);var T=ZD(ZD({},A),{},{fill:"none"},E),P=_.map(e=>ZD({entry:e},function(e,t,r,n,a,s,i,o,l){var c,d,u,h,m,p,f=o?-1:1,g=e.tickSize||i,x=Tm(e.tickCoord)?e.tickCoord:e.coordinate;switch(s){case"top":c=d=e.coordinate,p=(u=(h=r+ +!o*a)-f*g)-f*l,m=x;break;case"left":u=h=e.coordinate,m=(c=(d=t+ +!o*n)-f*g)-f*l,p=x;break;case"right":u=h=e.coordinate,m=(c=(d=t+ +o*n)+f*g)+f*l,p=x;break;default:c=d=e.coordinate,p=(u=(h=r+ +o*a)+f*g)+f*l,m=x}return{line:{x1:c,y1:u,x2:d,y2:h},tick:{x:m,y:p}}}(e,m,p,f,g,u,x,h,y))),O=P.map(e=>{var{entry:t,line:r}=e;return a.createElement(tD,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(t.value,"-").concat(t.coordinate,"-").concat(t.tickCoord)},s&&a.createElement("line",$D({},T,r,{className:jm("recharts-cartesian-axis-tick-line",Sm()(s,"className"))})))}),D=P.map((e,t)=>{var{entry:r,tick:s}=e,u=ZD(ZD(ZD(ZD({textAnchor:k,verticalAnchor:S},A),{},{stroke:"none",fill:i},C),s),{},{index:t,payload:r,visibleTicksCount:_.length,tickFormatter:o,padding:c},d);return a.createElement(tD,$D({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(r.value,"-").concat(r.coordinate,"-").concat(r.tickCoord)},XD(w,r,t)),n&&a.createElement(nI,{option:n,tickProps:u,value:"".concat("function"===typeof o?o(r.value,t):r.value).concat(l||"")}))});return a.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(N,"-ticks")},D.length>0&&a.createElement(ED,{zIndex:wk.label},a.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(N,"-tick-labels"),ref:t},D)),O.length>0&&a.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(N,"-tick-lines")},O))}),sI=(0,a.forwardRef)((e,t)=>{var{axisLine:r,width:n,height:s,className:i,hide:o,ticks:l,axisType:c}=e,d=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,QD),[u,h]=(0,a.useState)(""),[m,p]=(0,a.useState)(""),f=(0,a.useRef)(null);(0,a.useImperativeHandle)(t,()=>({getCalculatedWidth:()=>{var t;return(e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:s=0}=e,i=0;if(t){Array.from(t).forEach(e=>{if(e){var t=e.getBoundingClientRect();t.width>i&&(i=t.width)}});var o=r?r.getBoundingClientRect().width:0,l=i+(a+s)+o+(r?n:0);return Math.round(l)}return 0})({ticks:f.current,label:null===(t=e.labelRef)||void 0===t?void 0:t.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var g=(0,a.useCallback)(e=>{if(e){var t=e.getElementsByClassName("recharts-cartesian-axis-tick-value");f.current=t;var r=t[0];if(r){var n=window.getComputedStyle(r),a=n.fontSize,s=n.letterSpacing;a===u&&s===m||(h(a),p(s))}}},[u,m]);return o||null!=n&&n<=0||null!=s&&s<=0?null:a.createElement(ED,{zIndex:e.zIndex},a.createElement(tD,{className:jm("recharts-cartesian-axis",i)},a.createElement(rI,{x:e.x,y:e.y,width:n,height:s,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:TP(e)}),a.createElement(aI,{ref:g,axisType:c,events:d,fontSize:u,getTicksConfig:e,height:e.height,letterSpacing:m,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:l,unit:e.unit,width:e.width,x:e.x,y:e.y}),a.createElement(MD,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},a.createElement(GD,{label:e.label,labelRef:e.labelRef}),e.children)))}),iI=a.forwardRef((e,t)=>{var r=CO(e,tI);return a.createElement(sI,$D({},r,{ref:t}))});iI.displayName="CartesianAxis";var oI=["x1","y1","x2","y2","key"],lI=["offset"],cI=["xAxisId","yAxisId"],dI=["xAxisId","yAxisId"];function uI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function hI(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?uI(Object(r),!0).forEach(function(t){mI(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uI(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function mI(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pI(){return pI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pI.apply(null,arguments)}function fI(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var gI=e=>{var{fill:t}=e;if(!t||"none"===t)return null;var{fillOpacity:r,x:n,y:s,width:i,height:o,ry:l}=e;return a.createElement("rect",{x:n,y:s,ry:l,width:i,height:o,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function xI(e){var t,{option:r,lineItemProps:n}=e;if(a.isValidElement(r))t=a.cloneElement(r,n);else if("function"===typeof r)t=r(n);else{var s,{x1:i,y1:o,x2:l,y2:c,key:d}=n,u=null!==(s=TP(fI(n,oI)))&&void 0!==s?s:{},{offset:h}=u,m=fI(u,lI);t=a.createElement("line",pI({},m,{x1:i,y1:o,x2:l,y2:c,fill:"none",key:d}))}return t}function yI(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:i,yAxisId:o}=e,l=fI(e,cI),c=s.map((e,s)=>{var i=hI(hI({},l),{},{x1:t,y1:e,x2:t+r,y2:e,key:"line-".concat(s),index:s});return a.createElement(xI,{key:"line-".concat(s),option:n,lineItemProps:i})});return a.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function vI(e){var{y:t,height:r,vertical:n=!0,verticalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:i,yAxisId:o}=e,l=fI(e,dI),c=s.map((e,s)=>{var i=hI(hI({},l),{},{x1:e,y1:t,x2:e,y2:t+r,key:"line-".concat(s),index:s});return a.createElement(xI,{option:n,lineItemProps:i,key:"line-".concat(s)})});return a.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function bI(e){var{horizontalFill:t,fillOpacity:r,x:n,y:s,width:i,height:o,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length||null==l)return null;var d=l.map(e=>Math.round(e+s-s)).sort((e,t)=>e-t);s!==d[0]&&d.unshift(0);var u=d.map((e,l)=>{var c=!d[l+1]?s+o-e:d[l+1]-e;if(c<=0)return null;var u=l%t.length;return a.createElement("rect",{key:"react-".concat(l),y:e,x:n,height:c,width:i,stroke:"none",fill:t[u],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return a.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function jI(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:s,y:i,width:o,height:l,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var d=c.map(e=>Math.round(e+s-s)).sort((e,t)=>e-t);s!==d[0]&&d.unshift(0);var u=d.map((e,t)=>{var c=!d[t+1]?s+o-e:d[t+1]-e;if(c<=0)return null;var u=t%r.length;return a.createElement("rect",{key:"react-".concat(t),x:e,y:i,width:c,height:l,stroke:"none",fill:r[u],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return a.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var wI=(e,t)=>{var{xAxis:r,width:n,height:a,offset:s}=e;return Fy(JO(hI(hI(hI({},tI),r),{},{ticks:By(r,!0),viewBox:{x:0,y:0,width:n,height:a}})),s.left,s.left+s.width,t)},NI=(e,t)=>{var{yAxis:r,width:n,height:a,offset:s}=e;return Fy(JO(hI(hI(hI({},tI),r),{},{ticks:By(r,!0),viewBox:{x:0,y:0,width:n,height:a}})),s.top,s.top+s.height,t)},_I={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:wk.grid};function kI(e){var t=bv(),r=jv(),n=vv(),s=hI(hI({},CO(e,_I)),{},{x:Tm(e.x)?e.x:n.left,y:Tm(e.y)?e.y:n.top,width:Tm(e.width)?e.width:n.width,height:Tm(e.height)?e.height:n.height}),{xAxisId:i,yAxisId:o,x:l,y:c,width:d,height:u,syncWithTicks:h,horizontalValues:m,verticalValues:p}=s,f=mv(),g=jy(e=>JA(e,"xAxis",i,f)),x=jy(e=>JA(e,"yAxis",o,f));if(!Qm(d)||!Qm(u)||!Tm(l)||!Tm(c))return null;var y=s.verticalCoordinatesGenerator||wI,v=s.horizontalCoordinatesGenerator||NI,{horizontalPoints:b,verticalPoints:j}=s;if((!b||!b.length)&&"function"===typeof v){var w=m&&m.length,N=v({yAxis:x?hI(hI({},x),{},{ticks:w?m:x.ticks}):void 0,width:null!==t&&void 0!==t?t:d,height:null!==r&&void 0!==r?r:u,offset:n},!!w||h);qm(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof N,"]")),Array.isArray(N)&&(b=N)}if((!j||!j.length)&&"function"===typeof y){var _=p&&p.length,k=y({xAxis:g?hI(hI({},g),{},{ticks:_?p:g.ticks}):void 0,width:null!==t&&void 0!==t?t:d,height:null!==r&&void 0!==r?r:u,offset:n},!!_||h);qm(Array.isArray(k),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof k,"]")),Array.isArray(k)&&(j=k)}return a.createElement(ED,{zIndex:s.zIndex},a.createElement("g",{className:"recharts-cartesian-grid"},a.createElement(gI,{fill:s.fill,fillOpacity:s.fillOpacity,x:s.x,y:s.y,width:s.width,height:s.height,ry:s.ry}),a.createElement(bI,pI({},s,{horizontalPoints:b})),a.createElement(jI,pI({},s,{verticalPoints:j})),a.createElement(yI,pI({},s,{offset:n,horizontalPoints:b,xAxis:g,yAxis:x})),a.createElement(vI,pI({},s,{offset:n,verticalPoints:j,xAxis:g,yAxis:x}))))}kI.displayName="CartesianGrid";var SI=["domain","range"],AI=["domain","range"];function CI(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function EI(e,t){return e===t||!(!Array.isArray(e)||2!==e.length||!Array.isArray(t)||2!==t.length)&&(e[0]===t[0]&&e[1]===t[1])}function TI(e,t){if(e===t)return!0;var{domain:r,range:n}=e,a=CI(e,SI),{domain:s,range:i}=t,o=CI(t,AI);return!!EI(r,s)&&(!!EI(n,i)&&bP(a,o))}var PI=["dangerouslySetInnerHTML","ticks"],OI=["id"];function DI(){return DI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},DI.apply(null,arguments)}function II(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function LI(e){var t=xy(),r=(0,a.useRef)(null);return(0,a.useLayoutEffect)(()=>{null===r.current?t(GE(e)):r.current!==e&&t(KE({prev:r.current,next:e})),r.current=e},[e,t]),(0,a.useLayoutEffect)(()=>()=>{r.current&&(t(YE(r.current)),r.current=null)},[t]),null}var MI=e=>{var{xAxisId:t,className:r}=e,n=jy(uv),s=mv(),i="xAxis",o=jy(e=>IA(e,i,t,s)),l=jy(e=>ZA(e,i,t,s)),c=jy(e=>UA(e,t)),d=jy(e=>VA(e,t)),u=jy(e=>dS(e,t));if(null==c||null==d||null==u)return null;var{dangerouslySetInnerHTML:h,ticks:m}=e,p=II(e,PI),{id:f}=u,g=II(u,OI);return a.createElement(iI,DI({},p,g,{scale:o,x:d.x,y:d.y,width:c.width,height:c.height,className:jm("recharts-".concat(i," ").concat(i),r),viewBox:n,ticks:l,axisType:i}))},RI={allowDataOverflow:cS.allowDataOverflow,allowDecimals:cS.allowDecimals,allowDuplicatedCategory:cS.allowDuplicatedCategory,angle:cS.angle,axisLine:tI.axisLine,height:cS.height,hide:!1,includeHidden:cS.includeHidden,interval:cS.interval,minTickGap:cS.minTickGap,mirror:cS.mirror,orientation:cS.orientation,padding:cS.padding,reversed:cS.reversed,scale:cS.scale,tick:cS.tick,tickCount:cS.tickCount,tickLine:tI.tickLine,tickSize:tI.tickSize,type:cS.type,xAxisId:0},FI=e=>{var t=CO(e,RI);return a.createElement(a.Fragment,null,a.createElement(LI,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),a.createElement(MI,t))},BI=a.memo(FI,TI);BI.displayName="XAxis";var zI=["dangerouslySetInnerHTML","ticks"],UI=["id"];function qI(){return qI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qI.apply(null,arguments)}function WI(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function VI(e){var t=xy(),r=(0,a.useRef)(null);return(0,a.useLayoutEffect)(()=>{null===r.current?t(XE(e)):r.current!==e&&t(QE({prev:r.current,next:e})),r.current=e},[e,t]),(0,a.useLayoutEffect)(()=>()=>{r.current&&(t($E(r.current)),r.current=null)},[t]),null}var HI=e=>{var{yAxisId:t,className:r,width:n,label:s}=e,i=(0,a.useRef)(null),o=(0,a.useRef)(null),l=jy(uv),c=mv(),d=xy(),u="yAxis",h=jy(e=>IA(e,u,t,c)),m=jy(e=>GA(e,t)),p=jy(e=>HA(e,t)),f=jy(e=>ZA(e,u,t,c)),g=jy(e=>mS(e,t));if((0,a.useLayoutEffect)(()=>{if("auto"===n&&m&&!zD(s)&&!(0,a.isValidElement)(s)&&null!=g){var e=i.current;if(e){var r=e.getCalculatedWidth();Math.round(m.width)!==Math.round(r)&&d(tT({id:t,width:r}))}}},[f,m,d,s,t,n,g]),null==m||null==p||null==g)return null;var{dangerouslySetInnerHTML:x,ticks:y}=e,v=WI(e,zI),{id:b}=g,j=WI(g,UI);return a.createElement(iI,qI({},v,j,{ref:i,labelRef:o,scale:h,x:p.x,y:p.y,tickTextProps:"auto"===n?{width:void 0}:{width:n},width:m.width,height:m.height,className:jm("recharts-".concat(u," ").concat(u),r),viewBox:l,ticks:f,axisType:u}))},GI={allowDataOverflow:hS.allowDataOverflow,allowDecimals:hS.allowDecimals,allowDuplicatedCategory:hS.allowDuplicatedCategory,angle:hS.angle,axisLine:tI.axisLine,hide:!1,includeHidden:hS.includeHidden,interval:hS.interval,minTickGap:hS.minTickGap,mirror:hS.mirror,orientation:hS.orientation,padding:hS.padding,reversed:hS.reversed,scale:hS.scale,tick:hS.tick,tickCount:hS.tickCount,tickLine:tI.tickLine,tickSize:tI.tickSize,type:hS.type,width:hS.width,yAxisId:0},KI=e=>{var t=CO(e,GI);return a.createElement(a.Fragment,null,a.createElement(VI,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),a.createElement(HI,t))},YI=a.memo(KI,TI);function XI(){return XI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},XI.apply(null,arguments)}function QI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function $I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?QI(Object(r),!0).forEach(function(t){JI(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QI(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function JI(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZI(e){return Array.isArray(e)&&Pm(e[0])&&Pm(e[1])?e.join(" ~ "):e}YI.displayName="YAxis";var eL=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:s={},payload:i,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:d,label:u,labelFormatter:h,accessibilityLayer:m=!1}=e,p=$I({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),f=$I({margin:0},s),g=!Fm(u),x=g?u:"",y=jm("recharts-default-tooltip",c),v=jm("recharts-tooltip-label",d);g&&h&&void 0!==i&&null!==i&&(x=h(u,i));var b=m?{role:"status","aria-live":"assertive"}:{};return a.createElement("div",XI({className:y,style:p},b),a.createElement("p",{className:v,style:f},a.isValidElement(x)?x:"".concat(x)),(()=>{if(i&&i.length){var e=(l?Ny()(i,l):i).map((e,r)=>{if("none"===e.type)return null;var s=e.formatter||o||ZI,{value:l,name:c}=e,d=l,u=c;if(s){var h=s(l,c,e,r,i);if(Array.isArray(h))[d,u]=h;else{if(null==h)return null;d=h}}var m=$I({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},n);return a.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(r),style:m},Pm(u)?a.createElement("span",{className:"recharts-tooltip-item-name"},u):null,Pm(u)?a.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,a.createElement("span",{className:"recharts-tooltip-item-value"},d),a.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))});return a.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},e)}return null})())},tL="recharts-tooltip-wrapper",rL={visibility:"hidden"};function nL(e){var{coordinate:t,translateX:r,translateY:n}=e;return jm(tL,{["".concat(tL,"-right")]:Tm(r)&&t&&Tm(t.x)&&r>=t.x,["".concat(tL,"-left")]:Tm(r)&&t&&Tm(t.x)&&r<t.x,["".concat(tL,"-bottom")]:Tm(n)&&t&&Tm(t.y)&&n>=t.y,["".concat(tL,"-top")]:Tm(n)&&t&&Tm(t.y)&&n<t.y})}function aL(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:o,viewBox:l,viewBoxDimension:c}=e;if(s&&Tm(s[n]))return s[n];var d=r[n]-o-(a>0?a:0),u=r[n]+a;if(t[n])return i[n]?d:u;var h=l[n];return null==h?0:i[n]?d<h?Math.max(u,h):Math.max(d,h):null==c?0:u+o>h+c?Math.max(d,h):Math.max(u,h)}function sL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function iL(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sL(Object(r),!0).forEach(function(t){oL(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sL(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function oL(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class lL extends a.PureComponent{constructor(){super(...arguments),oL(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),oL(this,"handleKeyDown",e=>{var t,r,n,a;"Escape"===e.key&&this.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(t=null===(r=this.props.coordinate)||void 0===r?void 0:r.x)&&void 0!==t?t:0,y:null!==(n=null===(a=this.props.coordinate)||void 0===a?void 0:a.y)&&void 0!==n?n:0}})})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,t;this.state.dismissed&&((null===(e=this.props.coordinate)||void 0===e?void 0:e.x)===this.state.dismissedAtCoordinate.x&&(null===(t=this.props.coordinate)||void 0===t?void 0:t.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}render(){var{active:e,allowEscapeViewBox:t,animationDuration:r,animationEasing:n,children:s,coordinate:i,hasPayload:o,isAnimationActive:l,offset:c,position:d,reverseDirection:u,useTranslate3d:h,viewBox:m,wrapperStyle:p,lastBoundingBox:f,innerRef:g,hasPortalFromProps:x}=this.props,{cssClasses:y,cssProperties:v}=function(e){var t,r,n,{allowEscapeViewBox:a,coordinate:s,offsetTopLeft:i,position:o,reverseDirection:l,tooltipBox:c,useTranslate3d:d,viewBox:u}=e;return t=c.height>0&&c.width>0&&s?function(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}({translateX:r=aL({allowEscapeViewBox:a,coordinate:s,key:"x",offsetTopLeft:i,position:o,reverseDirection:l,tooltipDimension:c.width,viewBox:u,viewBoxDimension:u.width}),translateY:n=aL({allowEscapeViewBox:a,coordinate:s,key:"y",offsetTopLeft:i,position:o,reverseDirection:l,tooltipDimension:c.height,viewBox:u,viewBoxDimension:u.height}),useTranslate3d:d}):rL,{cssProperties:t,cssClasses:nL({translateX:r,translateY:n,coordinate:s})}}({allowEscapeViewBox:t,coordinate:i,offsetTopLeft:c,position:d,reverseDirection:u,tooltipBox:{height:f.height,width:f.width},useTranslate3d:h,viewBox:m}),b=x?{}:iL(iL({transition:l&&e?"transform ".concat(r,"ms ").concat(n):void 0},v),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&o?"visible":"hidden",position:"absolute",top:0,left:0}),j=iL(iL({},b),{},{visibility:!this.state.dismissed&&e&&o?"visible":"hidden"},p);return a.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:y,style:j,ref:g},s)}}var cL=r(4332),dL=r.n(cL);function uL(e,t,r){return!0===t?dL()(e,r):"function"===typeof t?dL()(e,t):e}var hL,mL,pL,fL,gL,xL,yL,vL,bL,jL,wL,NL,_L,kL;function SL(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],[t,r]=(0,a.useState)({height:0,left:0,top:0,width:0}),n=(0,a.useCallback)(e=>{if(null!=e){var n=e.getBoundingClientRect(),a={height:n.height,left:n.left,top:n.top,width:n.width};(Math.abs(a.height-t.height)>1||Math.abs(a.left-t.left)>1||Math.abs(a.top-t.top)>1||Math.abs(a.width-t.width)>1)&&r({height:a.height,left:a.left,top:a.top,width:a.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function AL(){}function CL(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function EL(e){this._context=e}function TL(e){this._context=e}function PL(e){this._context=e}EL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:CL(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:CL(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},TL.prototype={areaStart:AL,areaEnd:AL,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:CL(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},PL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:CL(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};class OL{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}function DL(e){this._context=e}function IL(e){this._context=e}function LL(e){return new IL(e)}function ML(e){return e<0?-1:1}function RL(e,t,r){var n=e._x1-e._x0,a=t-e._x1,s=(e._y1-e._y0)/(n||a<0&&-0),i=(r-e._y1)/(a||n<0&&-0),o=(s*a+i*n)/(n+a);return(ML(s)+ML(i))*Math.min(Math.abs(s),Math.abs(i),.5*Math.abs(o))||0}function FL(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function BL(e,t,r){var n=e._x0,a=e._y0,s=e._x1,i=e._y1,o=(s-n)/3;e._context.bezierCurveTo(n+o,a+o*t,s-o,i-o*r,s,i)}function zL(e){this._context=e}function UL(e){this._context=new qL(e)}function qL(e){this._context=e}function WL(e){this._context=e}function VL(e){var t,r,n=e.length-1,a=new Array(n),s=new Array(n),i=new Array(n);for(a[0]=0,s[0]=2,i[0]=e[0]+2*e[1],t=1;t<n-1;++t)a[t]=1,s[t]=4,i[t]=4*e[t]+2*e[t+1];for(a[n-1]=2,s[n-1]=7,i[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=a[t]/s[t-1],s[t]-=r,i[t]-=r*i[t-1];for(a[n-1]=i[n-1]/s[n-1],t=n-2;t>=0;--t)a[t]=(i[t]-a[t+1])/s[t];for(s[n-1]=(e[n]+a[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-a[t+1];return[a,s]}function HL(e,t){this._context=e,this._t=t}DL.prototype={areaStart:AL,areaEnd:AL,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},IL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},zL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:BL(this,this._t0,FL(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,BL(this,FL(this,r=RL(this,e,t)),r);break;default:BL(this,this._t0,r=RL(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}},(UL.prototype=Object.create(zL.prototype)).point=function(e,t){zL.prototype.point.call(this,t,e)},qL.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,s){this._context.bezierCurveTo(t,e,n,r,s,a)}},WL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===r)this._context.lineTo(e[1],t[1]);else for(var n=VL(e),a=VL(t),s=0,i=1;i<r;++s,++i)this._context.bezierCurveTo(n[0][s],a[0][s],n[1][s],a[1][s],e[i],t[i]);(this._line||0!==this._line&&1===r)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},HL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}}this._x=e,this._y=t}};const GL=Math.PI,KL=2*GL,YL=1e-6,XL=KL-YL;function QL(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}class $L{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?QL:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error("invalid digits: ".concat(e));if(t>15)return QL;const r=10**t;return function(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=Math.round(arguments[t]*r)/r+e[t]}}(e)}moveTo(e,t){this._append(hL||(hL=Me(["M",",",""])),this._x0=this._x1=+e,this._y0=this._y1=+t)}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append(mL||(mL=Me(["Z"]))))}lineTo(e,t){this._append(pL||(pL=Me(["L",",",""])),this._x1=+e,this._y1=+t)}quadraticCurveTo(e,t,r,n){this._append(fL||(fL=Me(["Q",",",",",",",""])),+e,+t,this._x1=+r,this._y1=+n)}bezierCurveTo(e,t,r,n,a,s){this._append(gL||(gL=Me(["C",",",",",",",",",",",""])),+e,+t,+r,+n,this._x1=+a,this._y1=+s)}arcTo(e,t,r,n,a){if(e=+e,t=+t,r=+r,n=+n,(a=+a)<0)throw new Error("negative radius: ".concat(a));let s=this._x1,i=this._y1,o=r-e,l=n-t,c=s-e,d=i-t,u=c*c+d*d;if(null===this._x1)this._append(xL||(xL=Me(["M",",",""])),this._x1=e,this._y1=t);else if(u>YL)if(Math.abs(d*o-l*c)>YL&&a){let h=r-s,m=n-i,p=o*o+l*l,f=h*h+m*m,g=Math.sqrt(p),x=Math.sqrt(u),y=a*Math.tan((GL-Math.acos((p+u-f)/(2*g*x)))/2),v=y/x,b=y/g;Math.abs(v-1)>YL&&this._append(vL||(vL=Me(["L",",",""])),e+v*c,t+v*d),this._append(bL||(bL=Me(["A",",",",0,0,",",",",",""])),a,a,+(d*h>c*m),this._x1=e+b*o,this._y1=t+b*l)}else this._append(yL||(yL=Me(["L",",",""])),this._x1=e,this._y1=t);else;}arc(e,t,r,n,a,s){if(e=+e,t=+t,s=!!s,(r=+r)<0)throw new Error("negative radius: ".concat(r));let i=r*Math.cos(n),o=r*Math.sin(n),l=e+i,c=t+o,d=1^s,u=s?n-a:a-n;null===this._x1?this._append(jL||(jL=Me(["M",",",""])),l,c):(Math.abs(this._x1-l)>YL||Math.abs(this._y1-c)>YL)&&this._append(wL||(wL=Me(["L",",",""])),l,c),r&&(u<0&&(u=u%KL+KL),u>XL?this._append(NL||(NL=Me(["A",",",",0,1,",",",",","A",",",",0,1,",",",",",""])),r,r,d,e-i,t-o,r,r,d,this._x1=l,this._y1=c):u>YL&&this._append(_L||(_L=Me(["A",",",",0,",",",",",",",""])),r,r,+(u>=GL),d,this._x1=e+r*Math.cos(a),this._y1=t+r*Math.sin(a)))}rect(e,t,r,n){this._append(kL||(kL=Me(["M",",","h","v","h","Z"])),this._x0=this._x1=+e,this._y0=this._y1=+t,r=+r,+n,-r)}toString(){return this._}}function JL(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(null==r)t=null;else{const e=Math.floor(r);if(!(e>=0))throw new RangeError("invalid digits: ".concat(r));t=e}return e},()=>new $L(t)}function ZL(e){return e[0]}function eM(e){return e[1]}function tM(e,t){var r=Cy(!0),n=null,a=LL,s=null,i=JL(o);function o(o){var l,c,d,u=(o=Ay(o)).length,h=!1;for(null==n&&(s=a(d=i())),l=0;l<=u;++l)!(l<u&&r(c=o[l],l,o))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(c,l,o),+t(c,l,o));if(d)return s=null,d+""||null}return e="function"===typeof e?e:void 0===e?ZL:Cy(e),t="function"===typeof t?t:void 0===t?eM:Cy(t),o.x=function(t){return arguments.length?(e="function"===typeof t?t:Cy(+t),o):e},o.y=function(e){return arguments.length?(t="function"===typeof e?e:Cy(+e),o):t},o.defined=function(e){return arguments.length?(r="function"===typeof e?e:Cy(!!e),o):r},o.curve=function(e){return arguments.length?(a=e,null!=n&&(s=a(n)),o):a},o.context=function(e){return arguments.length?(null==e?n=s=null:s=a(n=e),o):n},o}function rM(e,t,r){var n=null,a=Cy(!0),s=null,i=LL,o=null,l=JL(c);function c(c){var d,u,h,m,p,f=(c=Ay(c)).length,g=!1,x=new Array(f),y=new Array(f);for(null==s&&(o=i(p=l())),d=0;d<=f;++d){if(!(d<f&&a(m=c[d],d,c))===g)if(g=!g)u=d,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),h=d-1;h>=u;--h)o.point(x[h],y[h]);o.lineEnd(),o.areaEnd()}g&&(x[d]=+e(m,d,c),y[d]=+t(m,d,c),o.point(n?+n(m,d,c):x[d],r?+r(m,d,c):y[d]))}if(p)return o=null,p+""||null}function d(){return tM().defined(a).curve(i).context(s)}return e="function"===typeof e?e:void 0===e?ZL:Cy(+e),t="function"===typeof t?t:Cy(void 0===t?0:+t),r="function"===typeof r?r:void 0===r?eM:Cy(+r),c.x=function(t){return arguments.length?(e="function"===typeof t?t:Cy(+t),n=null,c):e},c.x0=function(t){return arguments.length?(e="function"===typeof t?t:Cy(+t),c):e},c.x1=function(e){return arguments.length?(n=null==e?null:"function"===typeof e?e:Cy(+e),c):n},c.y=function(e){return arguments.length?(t="function"===typeof e?e:Cy(+e),r=null,c):t},c.y0=function(e){return arguments.length?(t="function"===typeof e?e:Cy(+e),c):t},c.y1=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:Cy(+e),c):r},c.lineX0=c.lineY0=function(){return d().x(e).y(t)},c.lineY1=function(){return d().x(e).y(r)},c.lineX1=function(){return d().x(n).y(t)},c.defined=function(e){return arguments.length?(a="function"===typeof e?e:Cy(!!e),c):a},c.curve=function(e){return arguments.length?(i=e,null!=s&&(o=i(s)),c):i},c.context=function(e){return arguments.length?(null==e?s=o=null:o=i(s=e),c):s},c}function nM(){return nM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nM.apply(null,arguments)}function aM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function sM(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?aM(Object(r),!0).forEach(function(t){iM(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aM(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function iM(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var oM={curveBasisClosed:function(e){return new TL(e)},curveBasisOpen:function(e){return new PL(e)},curveBasis:function(e){return new EL(e)},curveBumpX:function(e){return new OL(e,!0)},curveBumpY:function(e){return new OL(e,!1)},curveLinearClosed:function(e){return new DL(e)},curveLinear:LL,curveMonotoneX:function(e){return new zL(e)},curveMonotoneY:function(e){return new UL(e)},curveNatural:function(e){return new WL(e)},curveStep:function(e){return new HL(e,.5)},curveStepAfter:function(e){return new HL(e,1)},curveStepBefore:function(e){return new HL(e,0)}},lM=e=>Xm(e.x)&&Xm(e.y),cM=e=>null!=e.base&&lM(e.base)&&lM(e),dM=e=>e.x,uM=e=>e.y,hM=e=>{var t,{type:r="linear",points:n=[],baseLine:a,layout:s,connectNulls:i=!1}=e,o=((e,t)=>{if("function"===typeof e)return e;var r="curve".concat(Bm(e));return"curveMonotone"!==r&&"curveBump"!==r||!t?oM[r]||LL:oM["".concat(r).concat("vertical"===t?"Y":"X")]})(r,s),l=i?n.filter(lM):n;if(Array.isArray(a)){var c=n.map((e,t)=>sM(sM({},e),{},{base:a[t]}));return t="vertical"===s?rM().y(uM).x1(dM).x0(e=>e.base.x):rM().x(dM).y1(uM).y0(e=>e.base.y),t.defined(cM).curve(o)(i?c.filter(cM):c)}return(t="vertical"===s&&Tm(a)?rM().y(uM).x1(dM).x0(a):Tm(a)?rM().x(dM).y1(uM).y0(a):tM().x(dM).y(uM)).defined(lM).curve(o)(l)},mM=e=>{var{className:t,points:r,path:n,pathRef:s}=e;if((!r||!r.length)&&!n)return null;var i=r&&r.length?hM(e):n;return a.createElement("path",nM({},TP(e),YD(e),{className:jm("recharts-curve",t),d:null===i?void 0:i,ref:s}))},pM=["x","y","top","left","width","height","className"];function fM(){return fM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fM.apply(null,arguments)}function gM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function xM(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var yM=(e,t,r,n,a,s)=>"M".concat(e,",").concat(a,"v").concat(n,"M").concat(s,",").concat(t,"h").concat(r),vM=e=>{var{x:t=0,y:r=0,top:n=0,left:s=0,width:i=0,height:o=0,className:l}=e,c=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,pM),d=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gM(Object(r),!0).forEach(function(t){xM(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gM(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({x:t,y:r,top:n,left:s,width:i,height:o},c);return Tm(t)&&Tm(r)&&Tm(i)&&Tm(o)&&Tm(n)&&Tm(s)?a.createElement("path",fM({},OP(d),{className:jm("recharts-cross",l),d:yM(t,r,i,o,n,s)})):null};function bM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function jM(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bM(Object(r),!0).forEach(function(t){wM(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bM(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function wM(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var NM=(e,t,r)=>e.map(e=>{return"".concat((n=e,n.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())))," ").concat(t,"ms ").concat(r);var n}).join(","),_M=(e,t)=>Object.keys(t).reduce((r,n)=>jM(jM({},r),{},{[n]:e(n,t[n])}),{});function kM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function SM(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kM(Object(r),!0).forEach(function(t){AM(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kM(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function AM(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var CM=(e,t,r)=>e+(t-e)*r,EM=e=>{var{from:t,to:r}=e;return t!==r},TM=(e,t,r)=>{var n=_M((t,r)=>{if(EM(r)){var[n,a]=e(r.from,r.to,r.velocity);return SM(SM({},r),{},{from:n,velocity:a})}return r},t);return r<1?_M((e,t)=>EM(t)?SM(SM({},t),{},{velocity:CM(t.velocity,n[e].velocity,r),from:CM(t.from,n[e].from,r)}):t,t):TM(e,n,r-1)};function PM(e,t,r,n,a,s){var i,o=n.reduce((r,n)=>SM(SM({},r),{},{[n]:{from:e[n],velocity:0,to:t[n]}}),{}),l=null,c=n=>{i||(i=n);var d=(n-i)/r.dt;o=TM(r,o,d),a(SM(SM(SM({},e),t),_M((e,t)=>t.from,o))),i=n,Object.values(o).filter(EM).length&&(l=s.setTimeout(c))};return()=>(l=s.setTimeout(c),()=>{var e;null===(e=l)||void 0===e||e()})}const OM=(e,t,r,n,a,s)=>{var i,o,l=(i=e,o=t,[Object.keys(i),Object.keys(o)].reduce((e,t)=>e.filter(e=>t.includes(e))));return null==r?()=>(a(SM(SM({},e),t)),()=>{}):!0===r.isStepper?PM(e,t,r,l,a,s):function(e,t,r,n,a,s,i){var o,l=null,c=a.reduce((r,n)=>SM(SM({},r),{},{[n]:[e[n],t[n]]}),{}),d=a=>{o||(o=a);var u=(a-o)/n,h=_M((e,t)=>CM(...t,r(u)),c);if(s(SM(SM(SM({},e),t),h)),u<1)l=i.setTimeout(d);else{var m=_M((e,t)=>CM(...t,r(1)),c);s(SM(SM(SM({},e),t),m))}};return()=>(l=i.setTimeout(d),()=>{var e;null===(e=l)||void 0===e||e()})}(e,t,r,n,l,a,s)};var DM=1e-4,IM=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],LM=(e,t)=>e.map((e,r)=>e*t**r).reduce((e,t)=>e+t),MM=(e,t)=>r=>{var n=IM(e,t);return LM(n,r)},RM=(e,t,r,n)=>{var a,s,i=MM(e,r),o=MM(t,n),l=(a=e,s=r,e=>{var t=[...IM(a,s).map((e,t)=>e*t).slice(1),0];return LM(t,e)}),c=e=>e>1?1:e<0?0:e,d=e=>{for(var t=e>1?1:e,r=t,n=0;n<8;++n){var a=i(r)-t,s=l(r);if(Math.abs(a-t)<DM||s<DM)return o(r);r=c(r-a/s)}return o(r)};return d.isStepper=!1,d},FM=function(){return RM(...function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(1===t.length)switch(t[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:var n,a=t[0].split("(");if("cubic-bezier"===a[0]&&4===(null===(n=a[1])||void 0===n?void 0:n.split(")")[0].split(",").length)){var s=a[1].split(")")[0].split(",").map(e=>parseFloat(e));return[s[0],s[1],s[2],s[3]]}}return 4===t.length?t:[0,0,1,1]}(...arguments))},BM=e=>{if("string"===typeof e)switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return FM(e);case"spring":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{stiff:t=100,damping:r=8,dt:n=17}=e,a=(e,a,s)=>{var i=s+(-(e-a)*t-s*r)*n/1e3,o=s*n/1e3+e;return Math.abs(o-a)<DM&&Math.abs(i)<DM?[a,0]:[o,i]};return a.isStepper=!0,a.dt=n,a}();default:if("cubic-bezier"===e.split("(")[0])return FM(e)}return"function"===typeof e?e:null};class zM{setTimeout(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=performance.now(),n=null,a=s=>{s-r>=t?e(s):"function"===typeof requestAnimationFrame&&(n=requestAnimationFrame(a))};return n=requestAnimationFrame(a),()=>{null!=n&&cancelAnimationFrame(n)}}}function UM(){return function(e){var t=()=>null,r=!1,n=null,a=s=>{if(!r){if(Array.isArray(s)){if(!s.length)return;var i=s,[o,...l]=i;return"number"===typeof o?void(n=e.setTimeout(a.bind(null,l),o)):(a(o),void(n=e.setTimeout(a.bind(null,l))))}"string"===typeof s&&t(s),"object"===typeof s&&t(s),"function"===typeof s&&s()}};return{stop:()=>{r=!0},start:e=>{r=!1,n&&(n(),n=null),a(e)},subscribe:e=>(t=e,()=>{t=()=>null}),getTimeoutController:()=>e}}(new zM)}var qM=(0,a.createContext)(UM);var WM={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},VM={t:0},HM={t:1};function GM(e){var t=CO(e,WM),{isActive:r,canBegin:n,duration:s,easing:i,begin:o,onAnimationEnd:l,onAnimationStart:c,children:d}=t,u="auto"===r?!aP:r,h=function(e,t){var r=(0,a.useContext)(qM);return(0,a.useMemo)(()=>null!==t&&void 0!==t?t:r(e),[e,t,r])}(t.animationId,t.animationManager),[m,p]=(0,a.useState)(u?VM:HM),f=(0,a.useRef)(null);return(0,a.useEffect)(()=>{u||p(HM)},[u]),(0,a.useEffect)(()=>{if(!u||!n)return Um;var e=OM(VM,HM,BM(i),s,p,h.getTimeoutController());return h.start([c,o,()=>{f.current=e()},s,l]),()=>{h.stop(),f.current&&f.current(),l()}},[u,n,s,i,o,c,l,h]),d(m.t)}function KM(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"animation-",r=(0,a.useRef)(Dm(t)),n=(0,a.useRef)(e);return n.current!==e&&(r.current=Dm(t),n.current=e),r.current}var YM=["radius"],XM=["radius"];function QM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function $M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?QM(Object(r),!0).forEach(function(t){JM(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QM(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function JM(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZM(){return ZM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ZM.apply(null,arguments)}function eR(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var tR=(e,t,r,n,a)=>{var s,i=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,l=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0;if(i>0&&a instanceof Array){for(var d=[0,0,0,0],u=0;u<4;u++)d[u]=a[u]>i?i:a[u];s="M".concat(e,",").concat(t+o*d[0]),d[0]>0&&(s+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(t)),s+="L ".concat(e+r-l*d[1],",").concat(t),d[1]>0&&(s+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,",\n        ").concat(e+r,",").concat(t+o*d[1])),s+="L ".concat(e+r,",").concat(t+n-o*d[2]),d[2]>0&&(s+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,",\n        ").concat(e+r-l*d[2],",").concat(t+n)),s+="L ".concat(e+l*d[3],",").concat(t+n),d[3]>0&&(s+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,",\n        ").concat(e,",").concat(t+n-o*d[3])),s+="Z"}else if(i>0&&a===+a&&a>0){var h=Math.min(i,a);s="M ".concat(e,",").concat(t+o*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+l*h,",").concat(t,"\n            L ").concat(e+r-l*h,",").concat(t,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+r,",").concat(t+o*h,"\n            L ").concat(e+r,",").concat(t+n-o*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+r-l*h,",").concat(t+n,"\n            L ").concat(e+l*h,",").concat(t+n,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e,",").concat(t+n-o*h," Z")}else s="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return s},rR={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},nR=e=>{var t=CO(e,rR),r=(0,a.useRef)(null),[n,s]=(0,a.useState)(-1);(0,a.useEffect)(()=>{if(r.current&&r.current.getTotalLength)try{var e=r.current.getTotalLength();e&&s(e)}catch(t){}},[]);var{x:i,y:o,width:l,height:c,radius:d,className:u}=t,{animationEasing:h,animationDuration:m,animationBegin:p,isAnimationActive:f,isUpdateAnimationActive:g}=t,x=(0,a.useRef)(l),y=(0,a.useRef)(c),v=(0,a.useRef)(i),b=(0,a.useRef)(o),j=KM((0,a.useMemo)(()=>({x:i,y:o,width:l,height:c,radius:d}),[i,o,l,c,d]),"rectangle-");if(i!==+i||o!==+o||l!==+l||c!==+c||0===l||0===c)return null;var w=jm("recharts-rectangle",u);if(!g){var N=OP(t),{radius:_}=N,k=eR(N,YM);return a.createElement("path",ZM({},k,{radius:"number"===typeof d?d:void 0,className:w,d:tR(i,o,l,c,d)}))}var S=x.current,A=y.current,C=v.current,E=b.current,T="0px ".concat(-1===n?1:n,"px"),P="".concat(n,"px 0px"),O=NM(["strokeDasharray"],m,"string"===typeof h?h:rR.animationEasing);return a.createElement(GM,{animationId:j,key:j,canBegin:n>0,duration:m,easing:h,isActive:g,begin:p},e=>{var n,s=Mm(S,l,e),u=Mm(A,c,e),h=Mm(C,i,e),m=Mm(E,o,e);r.current&&(x.current=s,y.current=u,v.current=h,b.current=m),n=f?e>0?{transition:O,strokeDasharray:P}:{strokeDasharray:T}:{strokeDasharray:P};var p=OP(t),{radius:g}=p,j=eR(p,XM);return a.createElement("path",ZM({},j,{radius:"number"===typeof d?d:void 0,className:w,d:tR(h,m,s,u,d),ref:r,style:$M($M({},n),t.style)}))})};function aR(e){var{cx:t,cy:r,radius:n,startAngle:a,endAngle:s}=e;return{points:[xk(t,r,n,a),xk(t,r,n,s)],cx:t,cy:r,radius:n,startAngle:a,endAngle:s}}function sR(){return sR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sR.apply(null,arguments)}var iR=e=>{var{cx:t,cy:r,radius:n,angle:a,sign:s,isExternal:i,cornerRadius:o,cornerIsExternal:l}=e,c=o*(i?1:-1)+n,d=Math.asin(o/c)/fk,u=l?a:a+s*d,h=l?a-s*d:a;return{center:xk(t,r,c,u),circleTangency:xk(t,r,n,u),lineTangency:xk(t,r,c*Math.cos(d*fk),h),theta:d}},oR=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:s,endAngle:i}=e,o=((e,t)=>Am(t-e)*Math.min(Math.abs(t-e),359.999))(s,i),l=s+o,c=xk(t,r,a,s),d=xk(t,r,a,l),u="M ".concat(c.x,",").concat(c.y,"\n    A ").concat(a,",").concat(a,",0,\n    ").concat(+(Math.abs(o)>180),",").concat(+(s>l),",\n    ").concat(d.x,",").concat(d.y,"\n  ");if(n>0){var h=xk(t,r,n,s),m=xk(t,r,n,l);u+="L ".concat(m.x,",").concat(m.y,"\n            A ").concat(n,",").concat(n,",0,\n            ").concat(+(Math.abs(o)>180),",").concat(+(s<=l),",\n            ").concat(h.x,",").concat(h.y," Z")}else u+="L ".concat(t,",").concat(r," Z");return u},lR={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},cR=e=>{var t=CO(e,lR),{cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u,className:h}=t;if(i<s||d===u)return null;var m,p=jm("recharts-sector",h),f=i-s,g=Im(o,f,0,!0);return m=g>0&&Math.abs(d-u)<360?(e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,cornerRadius:s,forceCornerRadius:i,cornerIsExternal:o,startAngle:l,endAngle:c}=e,d=Am(c-l),{circleTangency:u,lineTangency:h,theta:m}=iR({cx:t,cy:r,radius:a,angle:l,sign:d,cornerRadius:s,cornerIsExternal:o}),{circleTangency:p,lineTangency:f,theta:g}=iR({cx:t,cy:r,radius:a,angle:c,sign:-d,cornerRadius:s,cornerIsExternal:o}),x=o?Math.abs(l-c):Math.abs(l-c)-m-g;if(x<0)return i?"M ".concat(h.x,",").concat(h.y,"\n        a").concat(s,",").concat(s,",0,0,1,").concat(2*s,",0\n        a").concat(s,",").concat(s,",0,0,1,").concat(2*-s,",0\n      "):oR({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:l,endAngle:c});var y="M ".concat(h.x,",").concat(h.y,"\n    A").concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(u.x,",").concat(u.y,"\n    A").concat(a,",").concat(a,",0,").concat(+(x>180),",").concat(+(d<0),",").concat(p.x,",").concat(p.y,"\n    A").concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,"\n  ");if(n>0){var{circleTangency:v,lineTangency:b,theta:j}=iR({cx:t,cy:r,radius:n,angle:l,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),{circleTangency:w,lineTangency:N,theta:_}=iR({cx:t,cy:r,radius:n,angle:c,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),k=o?Math.abs(l-c):Math.abs(l-c)-j-_;if(k<0&&0===s)return"".concat(y,"L").concat(t,",").concat(r,"Z");y+="L".concat(N.x,",").concat(N.y,"\n      A").concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(w.x,",").concat(w.y,"\n      A").concat(n,",").concat(n,",0,").concat(+(k>180),",").concat(+(d>0),",").concat(v.x,",").concat(v.y,"\n      A").concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(b.x,",").concat(b.y,"Z")}else y+="L".concat(t,",").concat(r,"Z");return y})({cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:Math.min(g,f/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u}):oR({cx:r,cy:n,innerRadius:s,outerRadius:i,startAngle:d,endAngle:u}),a.createElement("path",sR({},OP(t),{className:p,d:m}))};function dR(e,t,r){if("horizontal"===e)return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if("vertical"===e)return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(KD(t)){if("centric"===e){var{cx:n,cy:a,innerRadius:s,outerRadius:i,angle:o}=t,l=xk(n,a,s,o),c=xk(n,a,i,o);return[{x:l.x,y:l.y},{x:c.x,y:c.y}]}return aR(t)}}function uR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function hR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?uR(Object(r),!0).forEach(function(t){mR(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uR(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function mR(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var pR=()=>{var e=jy(FS),t=jy(rE),r=jy(ZC);return Xy(e&&r?hR(hR({},e),{},{scale:r}):void 0,t)};function fR(){return fR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fR.apply(null,arguments)}function gR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function xR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gR(Object(r),!0).forEach(function(t){yR(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gR(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function yR(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vR(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return(0,a.isValidElement)(t)?(0,a.cloneElement)(t,n):(0,a.createElement)(r,n)}function bR(e){var t,r,n,s,{coordinate:i,payload:o,index:l,offset:c,tooltipAxisBandSize:d,layout:u,cursor:h,tooltipEventType:m,chartName:p}=e,f=i,g=o,x=l;if(!h||!f||"ScatterChart"!==p&&"axis"!==m)return null;if("ScatterChart"===p)r=f,n=vM,s=wk.cursorLine;else if("BarChart"===p)r=function(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?t.x-a:r.left+.5,y:"horizontal"===e?r.top+.5:t.y-a,width:"horizontal"===e?n:r.width-1,height:"horizontal"===e?r.height-1:n}}(u,f,c,d),n=nR,s=wk.cursorRectangle;else if("radial"===u&&KD(f)){var{cx:y,cy:v,radius:b,startAngle:j,endAngle:w}=aR(f);r={cx:y,cy:v,startAngle:j,endAngle:w,innerRadius:b,outerRadius:b},n=cR,s=wk.cursorLine}else r={points:dR(u,f,c)},n=mM,s=wk.cursorLine;var N="object"===typeof h&&"className"in h?h.className:void 0,_=xR(xR(xR(xR({stroke:"#ccc",pointerEvents:"none"},c),r),PP(h)),{},{payload:g,payloadIndex:x,className:jm("recharts-tooltip-cursor",N)});return a.createElement(ED,{zIndex:null!==(t=e.zIndex)&&void 0!==t?t:s},a.createElement(vR,{cursor:h,cursorComp:n,cursorProps:_}))}function jR(e){var t=pR(),r=vv(),n=Nv(),s=bE();return null==t||null==r||null==n||null==s?null:a.createElement(bR,fR({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:s}))}function wR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function NR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wR(Object(r),!0).forEach(function(t){_R(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wR(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _R(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kR(e){return e.dataKey}var SR=[],AR={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!aP,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function CR(e){var t,r,n=CO(e,AR),{active:s,allowEscapeViewBox:i,animationDuration:l,animationEasing:c,content:d,filterNull:u,isAnimationActive:h,offset:m,payloadUniqBy:p,position:f,reverseDirection:g,useTranslate3d:x,wrapperStyle:y,cursor:v,shared:b,trigger:j,defaultIndex:w,portal:N,axisId:_}=n,k=xy(),S="number"===typeof w?String(w):w;(0,a.useEffect)(()=>{k(Fx({shared:b,trigger:j,axisId:_,active:s,defaultIndex:S}))},[k,b,j,_,s,S]);var A=xv(),C=_P(),E=function(e){return jy(t=>oC(t,e))}(b),{activeIndex:T,isActive:P}=null!==(t=jy(e=>OE(e,E,j,S)))&&void 0!==t?t:{},O=jy(e=>PE(e,E,j,S)),D=jy(e=>TE(e,E,j,S)),I=jy(e=>EE(e,E,j,S)),L=O,M=(0,a.useContext)(iO),R=null!==(r=null!==s&&void 0!==s?s:P)&&void 0!==r&&r,[F,B]=SL([L,R]),z="axis"===E?D:void 0;sO(E,j,I,z,T,R);var U=null!==N&&void 0!==N?N:M;if(null==U||null==A||null==E)return null;var q=null!==L&&void 0!==L?L:SR;R||(q=SR),u&&q.length&&(q=uL(q.filter(e=>null!=e.value&&(!0!==e.hide||n.includeHidden)),p,kR));var W=q.length>0,V=a.createElement(lL,{allowEscapeViewBox:i,animationDuration:l,animationEasing:c,isAnimationActive:h,active:R,coordinate:I,hasPayload:W,offset:m,position:f,reverseDirection:g,useTranslate3d:x,viewBox:A,wrapperStyle:y,lastBoundingBox:F,innerRef:B,hasPortalFromProps:Boolean(N)},function(e,t){return a.isValidElement(e)?a.cloneElement(e,t):"function"===typeof e?a.createElement(e,t):a.createElement(eL,t)}(d,NR(NR({},n),{},{payload:q,label:z,active:R,activeIndex:T,coordinate:I,accessibilityLayer:C})));return a.createElement(a.Fragment,null,(0,o.createPortal)(V,U),R&&a.createElement(jR,{cursor:v,tooltipEventType:E,coordinate:I,payload:q,index:T}))}var ER=r(356),TR=r.n(ER),PR=["valueAccessor"],OR=["dataKey","clockWise","id","textBreakAll","zIndex"];function DR(){return DR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},DR.apply(null,arguments)}function IR(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var LR=e=>Array.isArray(e.value)?TR()(e.value):e.value,MR=(0,a.createContext)(void 0),RR=MR.Provider,FR=(0,a.createContext)(void 0),BR=FR.Provider;function zR(e){var{valueAccessor:t=LR}=e,r=IR(e,PR),{dataKey:n,clockWise:s,id:i,textBreakAll:o,zIndex:l}=r,c=IR(r,OR),d=(0,a.useContext)(MR),u=(0,a.useContext)(FR),h=d||u;return h&&h.length?a.createElement(ED,{zIndex:null!==l&&void 0!==l?l:wk.label},a.createElement(tD,{className:"recharts-label-list"},h.map((e,s)=>{var l,d=Fm(n)?t(e,s):My(e&&e.payload,n),u=Fm(i)?{}:{id:"".concat(i,"-").concat(s)};return a.createElement(VD,DR({key:"label-".concat(s)},OP(e),c,u,{fill:null!==(l=r.fill)&&void 0!==l?l:e.fill,parentViewBox:e.parentViewBox,value:d,textBreakAll:o,viewBox:e.viewBox,index:s,zIndex:0}))}))):null}function UR(e){var{label:t}=e;return t?!0===t?a.createElement(zR,{key:"labelList-implicit"}):a.isValidElement(t)||zD(t)?a.createElement(zR,{key:"labelList-implicit",content:t}):"object"===typeof t?a.createElement(zR,DR({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function qR(){return qR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qR.apply(null,arguments)}zR.displayName="LabelList";var WR=e=>{var{cx:t,cy:r,r:n,className:s}=e,i=jm("recharts-dot",s);return Tm(t)&&Tm(r)&&Tm(n)?a.createElement("circle",qR({},TP(e),YD(e),{className:i,cx:t,cy:r,r:n})):null},VR=r(2086),HR=e=>"string"===typeof e?e:e?e.displayName||e.name||"Component":"",GR=null,KR=null,YR=e=>{if(e===GR&&Array.isArray(KR))return KR;var t=[];return a.Children.forEach(e,e=>{Fm(e)||((0,VR.isFragment)(e)?t=t.concat(YR(e.props.children)):t.push(e))}),KR=t,GR=e,t};function XR(e,t){var r=[],n=[];return n=Array.isArray(t)?t.map(e=>HR(e)):[HR(t)],YR(e).forEach(e=>{var t=Sm()(e,"type.displayName")||Sm()(e,"type.name");t&&-1!==n.indexOf(t)&&r.push(e)}),r}var QR=e=>!e||"object"!==typeof e||!("clipDot"in e)||Boolean(e.clipDot),$R=["points"];function JR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ZR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?JR(Object(r),!0).forEach(function(t){eF(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JR(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function eF(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tF(){return tF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tF.apply(null,arguments)}function rF(e){var{option:t,dotProps:r,className:n}=e;if((0,a.isValidElement)(t))return(0,a.cloneElement)(t,r);if("function"===typeof t)return t(r);var s=jm(n,"boolean"!==typeof t?t.className:""),i=null!==r&&void 0!==r?r:{},{points:o}=i,l=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(i,$R);return a.createElement(WR,tF({},l,{className:s}))}function nF(e){var{points:t,dot:r,className:n,dotClassName:s,dataKey:i,baseProps:o,needClip:l,clipPathId:c,zIndex:d=wk.scatter}=e;if(!function(e,t){return null!=e&&(!!t||1===e.length)}(t,r))return null;var u,h=QR(r),m=null==(u=r)?null:(0,a.isValidElement)(u)?OP(u.props):"object"!==typeof u||Array.isArray(u)?null:OP(u),p=t.map((e,n)=>{var l,c,d=ZR(ZR(ZR({r:3},o),m),{},{index:n,cx:null!==(l=e.x)&&void 0!==l?l:void 0,cy:null!==(c=e.y)&&void 0!==c?c:void 0,dataKey:i,value:e.value,payload:e.payload,points:t});return a.createElement(rF,{key:"dot-".concat(n),option:r,dotProps:d,className:s})}),f={};return l&&null!=c&&(f.clipPath="url(#clipPath-".concat(h?"":"dots-").concat(c,")")),a.createElement(ED,{zIndex:d},a.createElement(tD,tF({className:n},f),p))}function aF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function sF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?aF(Object(r),!0).forEach(function(t){iF(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aF(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function iF(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var oF=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:s,dataKey:i,clipPath:o}=e;if(!1===s||null==t.x||null==t.y)return null;var l,c=sF(sF(sF({},{index:r,dataKey:i,cx:t.x,cy:t.y,r:4,fill:null!==n&&void 0!==n?n:"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value}),PP(s)),YD(s));return l=(0,a.isValidElement)(s)?(0,a.cloneElement)(s,c):"function"===typeof s?s(c):a.createElement(WR,c),a.createElement(tD,{className:"recharts-active-dot",clipPath:o},l)};function lF(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:s,clipPath:i,zIndex:o=wk.activeDot}=e,l=jy(oE),c=jy(fE);if(null==t||null==c)return null;var d=t.find(e=>c.includes(e.payload));return Fm(d)?null:a.createElement(ED,{zIndex:o},a.createElement(oF,{point:d,childIndex:Number(l),mainColor:r,dataKey:s,activeDot:n,clipPath:i}))}function cF(e){var{tooltipEntrySettings:t}=e,r=xy(),n=mv(),s=(0,a.useRef)(null);return(0,a.useLayoutEffect)(()=>{n||(null===s.current?r(Lx(t)):s.current!==t&&r(Mx({prev:s.current,next:t})),s.current=t)},[t,r,n]),(0,a.useLayoutEffect)(()=>()=>{s.current&&(r(Rx(s.current)),s.current=null)},[r]),null}function dF(e,t){var r,n,a=jy(t=>uS(t,e)),s=jy(e=>pS(e,t)),i=null!==(r=null===a||void 0===a?void 0:a.allowDataOverflow)&&void 0!==r?r:cS.allowDataOverflow,o=null!==(n=null===s||void 0===s?void 0:s.allowDataOverflow)&&void 0!==n?n:hS.allowDataOverflow;return{needClip:i||o,needClipX:i,needClipY:o}}function uF(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,s=jO(),{needClipX:i,needClipY:o,needClip:l}=dF(t,r);if(!l||!s)return null;var{x:c,y:d,width:u,height:h}=s;return a.createElement("clipPath",{id:"clipPath-".concat(n)},a.createElement("rect",{x:i?c:c-u/2,y:o?d:d-h/2,width:i?u:2*u,height:o?h:2*h}))}var hF=(e,t,r,n)=>tC(e,"xAxis",t,n),mF=(e,t,r,n)=>eC(e,"xAxis",t,n),pF=(e,t,r,n)=>tC(e,"yAxis",r,n),fF=(e,t,r,n)=>eC(e,"yAxis",r,n),gF=hy([wv,hF,pF,mF,fF],(e,t,r,n,a)=>Ry(e,"xAxis")?Xy(t,n,!1):Xy(r,a,!1)),xF=hy([jS,(e,t,r,n,a)=>a],(e,t)=>e.filter(e=>"area"===e.type).find(e=>e.id===t)),yF=hy([wv,hF,pF,mF,fF,(e,t,r,n,a)=>{var s,i=xF(e,t,r,n,a);if(null!=i){var o,l=wv(e);if(null!=(o=Ry(l,"xAxis")?qS(e,"yAxis",r,n):qS(e,"xAxis",t,n))){var{stackId:c}=i,d=Jk(i);if(null!=c&&null!=d){var u=null===(s=o[c])||void 0===s?void 0:s.stackedData;return null===u||void 0===u?void 0:u.find(e=>e.key===d)}}}},R_,gF,xF,e=>e.rootProps.baseValue],(e,t,r,n,a,s,i,o,l,c)=>{var{chartData:d,dataStartIndex:u,dataEndIndex:h}=i;if(null!=l&&("horizontal"===e||"vertical"===e)&&null!=t&&null!=r&&null!=n&&null!=a&&0!==n.length&&0!==a.length&&null!=o){var m,{data:p}=l;if(null!=(m=p&&p.length>0?p:null===d||void 0===d?void 0:d.slice(u,h+1)))return function(e){var t,{areaSettings:{connectNulls:r,baseValue:n,dataKey:a},stackedData:s,layout:i,chartBaseValue:o,xAxis:l,yAxis:c,displayedData:d,dataStartIndex:u,xAxisTicks:h,yAxisTicks:m,bandSize:p}=e,f=s&&s.length,g=YF(i,o,n,l,c),x="horizontal"===i,y=!1,v=d.map((e,t)=>{var n;f?n=s[u+t]:(n=My(e,a),Array.isArray(n)?y=!0:n=[g,n]);var i=null==n[1]||f&&!r&&null==My(e,a);return x?{x:Vy({axis:l,ticks:h,bandSize:p,entry:e,index:t}),y:i?null:c.scale(n[1]),value:n,payload:e}:{x:i?null:l.scale(n[1]),y:Vy({axis:c,ticks:m,bandSize:p,entry:e,index:t}),value:n,payload:e}});t=f||y?v.map(e=>{var t=Array.isArray(e.value)?e.value[0]:null;return x?{x:e.x,y:null!=t&&null!=e.y?c.scale(t):null,payload:e.payload}:{x:null!=t?l.scale(t):null,y:e.y,payload:e.payload}}):x?c.scale(g):l.scale(g);return{points:v,baseLine:t,isRange:y}}({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,dataStartIndex:u,areaSettings:l,stackedData:s,displayedData:m,chartBaseValue:c,bandSize:o})}});function vF(e){var{legendPayload:t}=e,r=xy(),n=mv(),s=(0,a.useRef)(null);return(0,a.useLayoutEffect)(()=>{n||(null===s.current?r(kT(t)):s.current!==t&&r(ST({prev:s.current,next:t})),s.current=t)},[r,n,t]),(0,a.useLayoutEffect)(()=>()=>{s.current&&(r(AT(s.current)),s.current=null)},[r]),null}function bF(e){var{legendPayload:t}=e,r=xy(),n=jy(wv),s=(0,a.useRef)(null);return(0,a.useLayoutEffect)(()=>{"centric"!==n&&"radial"!==n||(null===s.current?r(kT(t)):s.current!==t&&r(ST({prev:s.current,next:t})),s.current=t)},[r,n,t]),(0,a.useLayoutEffect)(()=>()=>{s.current&&(r(AT(s.current)),s.current=null)},[r]),null}var jF=(0,a.createContext)(void 0),wF=e=>{var{id:t,type:r,children:n}=e,s=FP("recharts-".concat(r),t);return a.createElement(jF.Provider,{value:s},n(s))};var NF=e=>{var t=xy(),r=(0,a.useRef)(null);return(0,a.useLayoutEffect)(()=>{null===r.current?t(aT(e)):r.current!==e&&t(sT({prev:r.current,next:e})),r.current=e},[t,e]),(0,a.useLayoutEffect)(()=>()=>{r.current&&(t(iT(r.current)),r.current=null)},[t]),null},_F=(0,a.memo)(NF);function kF(e){var t=xy();return(0,a.useLayoutEffect)(()=>(t(oT(e)),()=>{t(lT(e))}),[t,e]),null}function SF(e){var t=PP(e);if(null!=t){var{r:r,strokeWidth:n}=t,a=Number(r),s=Number(n);return(Number.isNaN(a)||a<0)&&(a=3),(Number.isNaN(s)||s<0)&&(s=2),{r:a,strokeWidth:s}}return{r:3,strokeWidth:2}}var AF=["id"],CF=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function EF(){return EF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},EF.apply(null,arguments)}function TF(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function PF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function OF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?PF(Object(r),!0).forEach(function(t){DF(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PF(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function DF(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IF(e,t){return e&&"none"!==e?e:t}var LF=e=>{var{dataKey:t,name:r,stroke:n,fill:a,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:IF(n,a),value:$y(r,t),payload:e}]},MF=a.memo(e=>{var{dataKey:t,data:r,stroke:n,strokeWidth:s,fill:i,name:o,hide:l,unit:c,tooltipType:d}=e,u={dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:s,fill:i,dataKey:t,nameKey:void 0,name:$y(o,t),hide:l,type:d,color:IF(n,i),unit:c}};return a.createElement(cF,{tooltipEntrySettings:u})});function RF(e){var{clipPathId:t,points:r,props:n}=e,{needClip:s,dot:i,dataKey:o}=n,l=TP(n);return a.createElement(nF,{points:r,dot:i,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:o,baseProps:l,needClip:s,clipPathId:t})}function FF(e){var{showLabels:t,children:r,points:n}=e,s=n.map(e=>{var t,r,n={x:null!==(t=e.x)&&void 0!==t?t:0,y:null!==(r=e.y)&&void 0!==r?r:0,width:0,lowerWidth:0,upperWidth:0,height:0};return OF(OF({},n),{},{value:e.value,payload:e.payload,parentViewBox:void 0,viewBox:n,fill:void 0})});return a.createElement(RR,{value:t?s:void 0},r)}function BF(e){var{points:t,baseLine:r,needClip:n,clipPathId:s,props:i}=e,{layout:o,type:l,stroke:c,connectNulls:d,isRange:u}=i,{id:h}=i,m=TF(i,AF),p=TP(m),f=OP(m);return a.createElement(a.Fragment,null,(null===t||void 0===t?void 0:t.length)>1&&a.createElement(tD,{clipPath:n?"url(#clipPath-".concat(s,")"):void 0},a.createElement(mM,EF({},f,{id:h,points:t,connectNulls:d,type:l,baseLine:r,layout:o,stroke:"none",className:"recharts-area-area"})),"none"!==c&&a.createElement(mM,EF({},p,{className:"recharts-area-curve",layout:o,type:l,connectNulls:d,fill:"none",points:t})),"none"!==c&&u&&a.createElement(mM,EF({},p,{className:"recharts-area-curve",layout:o,type:l,connectNulls:d,fill:"none",points:r}))),a.createElement(RF,{points:t,props:m,clipPathId:s}))}function zF(e){var{alpha:t,baseLine:r,points:n,strokeWidth:s}=e,i=n[0].y,o=n[n.length-1].y;if(!Xm(i)||!Xm(o))return null;var l=t*Math.abs(i-o),c=Math.max(...n.map(e=>e.x||0));return Tm(r)?c=Math.max(r,c):r&&Array.isArray(r)&&r.length&&(c=Math.max(...r.map(e=>e.x||0),c)),Tm(c)?a.createElement("rect",{x:0,y:i<o?i:i-l,width:c+(s?parseInt("".concat(s),10):1),height:Math.floor(l)}):null}function UF(e){var{alpha:t,baseLine:r,points:n,strokeWidth:s}=e,i=n[0].x,o=n[n.length-1].x;if(!Xm(i)||!Xm(o))return null;var l=t*Math.abs(i-o),c=Math.max(...n.map(e=>e.y||0));return Tm(r)?c=Math.max(r,c):r&&Array.isArray(r)&&r.length&&(c=Math.max(...r.map(e=>e.y||0),c)),Tm(c)?a.createElement("rect",{x:i<o?i:i-l,y:0,width:l,height:Math.floor(c+(s?parseInt("".concat(s),10):1))}):null}function qF(e){var{alpha:t,layout:r,points:n,baseLine:s,strokeWidth:i}=e;return"vertical"===r?a.createElement(zF,{alpha:t,points:n,baseLine:s,strokeWidth:i}):a.createElement(UF,{alpha:t,points:n,baseLine:s,strokeWidth:i})}function WF(e){var{needClip:t,clipPathId:r,props:n,previousPointsRef:s,previousBaselineRef:i}=e,{points:o,baseLine:l,isAnimationActive:c,animationBegin:d,animationDuration:u,animationEasing:h,onAnimationStart:m,onAnimationEnd:p}=n,f=KM((0,a.useMemo)(()=>({points:o,baseLine:l}),[o,l]),"recharts-area-"),g=(()=>{var e=Nv();if("horizontal"===e||"vertical"===e)return e})(),[x,y]=(0,a.useState)(!1),v=!x,b=(0,a.useCallback)(()=>{"function"===typeof p&&p(),y(!1)},[p]),j=(0,a.useCallback)(()=>{"function"===typeof m&&m(),y(!0)},[m]);if(null==g)return null;var w=s.current,N=i.current;return a.createElement(FF,{showLabels:v,points:o},n.children,a.createElement(GM,{animationId:f,begin:d,duration:u,isActive:c,easing:h,onAnimationEnd:b,onAnimationStart:j,key:f},e=>{if(w){var d,u=w.length/o.length,h=1===e?o:o.map((t,r)=>{var n=Math.floor(r*u);if(w[n]){var a=w[n];return OF(OF({},t),{},{x:Mm(a.x,t.x,e),y:Mm(a.y,t.y,e)})}return t});return d=Tm(l)?Mm(N,l,e):Fm(l)||Cm(l)?Mm(N,0,e):l.map((t,r)=>{var n=Math.floor(r*u);if(Array.isArray(N)&&N[n]){var a=N[n];return OF(OF({},t),{},{x:Mm(a.x,t.x,e),y:Mm(a.y,t.y,e)})}return t}),e>0&&(s.current=h,i.current=d),a.createElement(BF,{points:h,baseLine:d,needClip:t,clipPathId:r,props:n})}return e>0&&(s.current=o,i.current=l),a.createElement(tD,null,c&&a.createElement("defs",null,a.createElement("clipPath",{id:"animationClipPath-".concat(r)},a.createElement(qF,{alpha:e,points:o,baseLine:l,layout:g,strokeWidth:n.strokeWidth}))),a.createElement(tD,{clipPath:"url(#animationClipPath-".concat(r,")")},a.createElement(BF,{points:o,baseLine:l,needClip:t,clipPathId:r,props:n})))}),a.createElement(UR,{label:n.label}))}function VF(e){var{needClip:t,clipPathId:r,props:n}=e,s=(0,a.useRef)(null),i=(0,a.useRef)();return a.createElement(WF,{needClip:t,clipPathId:r,props:n,previousPointsRef:s,previousBaselineRef:i})}class HF extends a.PureComponent{render(){var{hide:e,dot:t,points:r,className:n,top:s,left:i,needClip:o,xAxisId:l,yAxisId:c,width:d,height:u,id:h,baseLine:m,zIndex:p}=this.props;if(e)return null;var f=jm("recharts-area",n),g=h,{r:x,strokeWidth:y}=SF(t),v=QR(t),b=2*x+y,j=o?"url(#clipPath-".concat(v?"":"dots-").concat(g,")"):void 0;return a.createElement(ED,{zIndex:p},a.createElement(tD,{className:f},o&&a.createElement("defs",null,a.createElement(uF,{clipPathId:g,xAxisId:l,yAxisId:c}),!v&&a.createElement("clipPath",{id:"clipPath-dots-".concat(g)},a.createElement("rect",{x:i-b/2,y:s-b/2,width:d+b,height:u+b}))),a.createElement(VF,{needClip:o,clipPathId:g,props:this.props})),a.createElement(lF,{points:r,mainColor:IF(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:j}),this.props.isRange&&Array.isArray(m)&&a.createElement(lF,{points:m,mainColor:IF(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:j}))}}var GF={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:wk.area};function KF(e){var t,r=CO(e,GF),{activeDot:n,animationBegin:s,animationDuration:i,animationEasing:o,connectNulls:l,dot:c,fill:d,fillOpacity:u,hide:h,isAnimationActive:m,legendType:p,stroke:f,xAxisId:g,yAxisId:x}=r,y=TF(r,CF),v=Nv(),b=bE(),{needClip:j}=dF(g,x),w=mv(),{points:N,isRange:_,baseLine:k}=null!==(t=jy(t=>yF(t,g,x,w,e.id)))&&void 0!==t?t:{},S=jO();if("horizontal"!==v&&"vertical"!==v||null==S)return null;if("AreaChart"!==b&&"ComposedChart"!==b)return null;var{height:A,width:C,x:E,y:T}=S;return N&&N.length?a.createElement(HF,EF({},y,{activeDot:n,animationBegin:s,animationDuration:i,animationEasing:o,baseLine:k,connectNulls:l,dot:c,fill:d,fillOpacity:u,height:A,hide:h,layout:v,isAnimationActive:"auto"===m?!aP:m,isRange:_,legendType:p,needClip:j,points:N,stroke:f,width:C,left:E,top:T,xAxisId:g,yAxisId:x})):null}var YF=(e,t,r,n,a)=>{var s=null!==r&&void 0!==r?r:t;if(Tm(s))return s;var i="horizontal"===e?a:n,o=i.scale.domain();if("number"===i.type){var l=Math.max(o[0],o[1]),c=Math.min(o[0],o[1]);return"dataMin"===s?c:"dataMax"===s||l<0?l:Math.max(Math.min(o[0],o[1]),0)}return"dataMin"===s?o[0]:"dataMax"===s?o[1]:o[0]};function XF(e){var t=CO(e,GF),r=mv();return a.createElement(wF,{id:t.id,type:"area"},e=>a.createElement(a.Fragment,null,a.createElement(vF,{legendPayload:LF(t)}),a.createElement(MF,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType}),a.createElement(_F,{type:"area",id:e,data:t.data,dataKey:t.dataKey,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,stackId:Wy(t.stackId),hide:t.hide,barSize:void 0,baseValue:t.baseValue,isPanorama:r,connectNulls:t.connectNulls}),a.createElement(KF,EF({},t,{id:e}))))}var QF=a.memo(XF,bP);function $F(e){var t=xy();return(0,a.useEffect)(()=>{t(zT(e))},[t,e]),null}QF.displayName="Area";var JF=["layout"];function ZF(){return ZF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ZF.apply(null,arguments)}var eB={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1},tB=(0,a.forwardRef)(function(e,t){var r,n=CO(e.categoricalChartProps,eB),{layout:s}=n,i=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(n,JF),{chartName:o,defaultTooltipEventType:l,validateTooltipEventTypes:c,tooltipPayloadSearcher:d}=e,u={chartName:o,defaultTooltipEventType:l,validateTooltipEventTypes:c,tooltipPayloadSearcher:d,eventEmitter:void 0};return a.createElement(gP,{preloadedState:{options:u},reduxStoreName:null!==(r=n.id)&&void 0!==r?r:o},a.createElement(xP,{chartData:n.data}),a.createElement(wP,{layout:s,margin:n.margin}),a.createElement(NP,{baseValue:void 0,accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className,reverseStackOrder:n.reverseStackOrder}),a.createElement($F,{cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius}),a.createElement(kO,ZF({},i,{ref:t})))}),rB=["item"],nB={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},aB=(0,a.forwardRef)((e,t)=>{var r=CO(e,nB);return a.createElement(tB,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:rB,tooltipPayloadSearcher:Ag,categoricalChartProps:r,ref:t})}),sB=e=>e.graphicalItems.polarItems,iB=hy([Qk,$k],bS),oB=hy([sB,xS,iB],NS),lB=hy([oB],CS),cB=hy([lB,M_],TS),dB=hy([cB,xS,oB],OS),uB=(hy([cB,xS,oB],(e,t,r)=>r.length>0?e.flatMap(e=>r.flatMap(r=>{var n;return{value:My(e,null!==(n=t.dataKey)&&void 0!==n?n:r.dataKey),errorDomain:[]}})).filter(Boolean):null!=(null===t||void 0===t?void 0:t.dataKey)?e.map(e=>({value:My(e,t.dataKey),errorDomain:[]})):e.map(e=>({value:e,errorDomain:[]}))),()=>{}),hB=hy([cB,xS,oB,XS,Qk],$S),mB=hy([xS,GS,KS,uB,hB,uB,wv,Qk],pA),pB=hy([xS,wv,cB,dB,ik,Qk,mB],xA),fB=hy([pB,xS,bA],wA);hy([xS,pB,fB,Qk],_A);function gB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function xB(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gB(Object(r),!0).forEach(function(t){yB(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gB(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function yB(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var vB=hy([sB,(e,t)=>t],(e,t)=>e.filter(e=>"pie"===e.type).find(e=>e.id===t)),bB=[],jB=(e,t,r)=>0===(null===r||void 0===r?void 0:r.length)?bB:r,wB=hy([M_,vB,jB],(e,t,r)=>{var n,{chartData:a}=e;if(null!=t&&((n=null!=(null===t||void 0===t?void 0:t.data)&&t.data.length>0?t.data:a)&&n.length||null==r||(n=r.map(e=>xB(xB({},t.presentationProps),e.props))),null!=n))return n}),NB=hy([wB,vB,jB],(e,t,r)=>{if(null!=e&&null!=t)return e.map((e,n)=>{var a,s,i=My(e,t.nameKey,t.name);return s=null!==r&&void 0!==r&&null!==(a=r[n])&&void 0!==a&&null!==(a=a.props)&&void 0!==a&&a.fill?r[n].props.fill:"object"===typeof e&&null!=e&&"fill"in e?e.fill:t.fill,{value:$y(i,t.dataKey),color:s,payload:e,type:t.legendType}})}),_B=hy([wB,vB,jB,cv],(e,t,r,n)=>{if(null!=t&&null!=e)return function(e){var t,r,n,{pieSettings:a,displayedData:s,cells:i,offset:o}=e,{cornerRadius:l,startAngle:c,endAngle:d,dataKey:u,nameKey:h,tooltipType:m}=a,p=Math.abs(a.minAngle),f=Dz(c,d),g=Math.abs(f),x=s.length<=1?0:null!==(t=a.paddingAngle)&&void 0!==t?t:0,y=s.filter(e=>0!==My(e,u,0)).length,v=g-y*p-(g>=360?y:y-1)*x,b=s.reduce((e,t)=>{var r=My(t,u,0);return e+(Tm(r)?r:0)},0);b>0&&(r=s.map((e,t)=>{var r,s=My(e,u,0),d=My(e,h,t),g=Oz(a,o,e),y=(Tm(s)?s:0)/b,j=Sz(Sz({},e),i&&i[t]&&i[t].props),w=(r=t?n.endAngle+Am(f)*x*(0!==s?1:0):c)+Am(f)*((0!==s?p:0)+y*v),N=(r+w)/2,_=(g.innerRadius+g.outerRadius)/2,k=[{name:d,value:s,payload:j,dataKey:u,type:m}],S=xk(g.cx,g.cy,_,N);return n=Sz(Sz(Sz(Sz({},a.presentationProps),{},{percent:y,cornerRadius:"string"===typeof l?parseFloat(l):l,name:d,tooltipPayload:k,midAngle:N,middleRadius:_,tooltipPosition:S},j),g),{},{value:s,startAngle:r,endAngle:w,payload:j,paddingAngle:Am(f)*x})}));return r}({offset:n,pieSettings:t,displayedData:e,cells:r})}),kB=e=>null;kB.displayName="Cell";var SB=r(9397),AB=r.n(SB);function CB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function EB(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?CB(Object(r),!0).forEach(function(t){TB(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CB(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function TB(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PB(){return PB=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},PB.apply(null,arguments)}var OB=(e,t,r,n,a)=>{var s,i=r-n;return s="M ".concat(e,",").concat(t),s+="L ".concat(e+r,",").concat(t),s+="L ".concat(e+r-i/2,",").concat(t+a),s+="L ".concat(e+r-i/2-n,",").concat(t+a),s+="L ".concat(e,",").concat(t," Z")},DB={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},IB=e=>{var t=CO(e,DB),{x:r,y:n,upperWidth:s,lowerWidth:i,height:o,className:l}=t,{animationEasing:c,animationDuration:d,animationBegin:u,isUpdateAnimationActive:h}=t,m=(0,a.useRef)(null),[p,f]=(0,a.useState)(-1),g=(0,a.useRef)(s),x=(0,a.useRef)(i),y=(0,a.useRef)(o),v=(0,a.useRef)(r),b=(0,a.useRef)(n),j=KM(e,"trapezoid-");if((0,a.useEffect)(()=>{if(m.current&&m.current.getTotalLength)try{var e=m.current.getTotalLength();e&&f(e)}catch(t){}},[]),r!==+r||n!==+n||s!==+s||i!==+i||o!==+o||0===s&&0===i||0===o)return null;var w=jm("recharts-trapezoid",l);if(!h)return a.createElement("g",null,a.createElement("path",PB({},OP(t),{className:w,d:OB(r,n,s,i,o)})));var N=g.current,_=x.current,k=y.current,S=v.current,A=b.current,C="0px ".concat(-1===p?1:p,"px"),E="".concat(p,"px 0px"),T=NM(["strokeDasharray"],d,c);return a.createElement(GM,{animationId:j,key:j,canBegin:p>0,duration:d,easing:c,isActive:h,begin:u},e=>{var l=Mm(N,s,e),c=Mm(_,i,e),d=Mm(k,o,e),u=Mm(S,r,e),h=Mm(A,n,e);m.current&&(g.current=l,x.current=c,y.current=d,v.current=u,b.current=h);var p=e>0?{transition:T,strokeDasharray:E}:{strokeDasharray:C};return a.createElement("path",PB({},OP(t),{className:w,d:OB(u,h,l,c,d),ref:m,style:EB(EB({},p),t.style)}))})};Math.abs,Math.atan2;const LB=Math.cos,MB=(Math.max,Math.min,Math.sin),RB=Math.sqrt,FB=Math.PI,BB=2*FB;const zB={draw(e,t){const r=RB(t/FB);e.moveTo(r,0),e.arc(0,0,r,0,BB)}},UB={draw(e,t){const r=RB(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},qB=RB(1/3),WB=2*qB,VB={draw(e,t){const r=RB(t/WB),n=r*qB;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},HB={draw(e,t){const r=RB(t),n=-r/2;e.rect(n,n,r,r)}},GB=MB(FB/10)/MB(7*FB/10),KB=MB(BB/10)*GB,YB=-LB(BB/10)*GB,XB={draw(e,t){const r=RB(.8908130915292852*t),n=KB*r,a=YB*r;e.moveTo(0,-r),e.lineTo(n,a);for(let s=1;s<5;++s){const t=BB*s/5,i=LB(t),o=MB(t);e.lineTo(o*r,-i*r),e.lineTo(i*n-o*a,o*n+i*a)}e.closePath()}},QB=RB(3),$B={draw(e,t){const r=-RB(t/(3*QB));e.moveTo(0,2*r),e.lineTo(-QB*r,-r),e.lineTo(QB*r,-r),e.closePath()}},JB=-.5,ZB=RB(3)/2,ez=1/RB(12),tz=3*(ez/2+1),rz={draw(e,t){const r=RB(t/tz),n=r/2,a=r*ez,s=n,i=r*ez+r,o=-s,l=i;e.moveTo(n,a),e.lineTo(s,i),e.lineTo(o,l),e.lineTo(JB*n-ZB*a,ZB*n+JB*a),e.lineTo(JB*s-ZB*i,ZB*s+JB*i),e.lineTo(JB*o-ZB*l,ZB*o+JB*l),e.lineTo(JB*n+ZB*a,JB*a-ZB*n),e.lineTo(JB*s+ZB*i,JB*i-ZB*s),e.lineTo(JB*o+ZB*l,JB*l-ZB*o),e.closePath()}};RB(3),RB(3);var nz=["type","size","sizeType"];function az(){return az=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},az.apply(null,arguments)}function sz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function iz(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sz(Object(r),!0).forEach(function(t){oz(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sz(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function oz(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var lz={symbolCircle:zB,symbolCross:UB,symbolDiamond:VB,symbolSquare:HB,symbolStar:XB,symbolTriangle:$B,symbolWye:rz},cz=Math.PI/180,dz=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,s=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,nz),i=iz(iz({},s),{},{type:t,size:r,sizeType:n}),o="circle";"string"===typeof t&&(o=t);var{className:l,cx:c,cy:d}=i,u=OP(i);return Tm(c)&&Tm(d)&&Tm(r)?a.createElement("path",az({},u,{className:jm("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(d,")"),d:(()=>{var e=(e=>{var t="symbol".concat(Bm(e));return lz[t]||zB})(o),t=function(e,t){let r=null,n=JL(a);function a(){let a;if(r||(r=a=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),a)return r=null,a+""||null}return e="function"===typeof e?e:Cy(e||zB),t="function"===typeof t?t:Cy(void 0===t?64:+t),a.type=function(t){return arguments.length?(e="function"===typeof t?t:Cy(t),a):e},a.size=function(e){return arguments.length?(t="function"===typeof e?e:Cy(+e),a):t},a.context=function(e){return arguments.length?(r=null==e?null:e,a):r},a}().type(e).size(((e,t,r)=>{if("area"===t)return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var n=18*cz;return 1.25*e*e*(Math.tan(n)-Math.tan(2*n)*Math.tan(n)**2);case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}})(r,n,o)),a=t();if(null!==a)return a})()})):null};dz.registerSymbol=(e,t)=>{lz["symbol".concat(Bm(e))]=t};var uz=["option","shapeType","propTransformer","activeClassName"];function hz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function mz(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hz(Object(r),!0).forEach(function(t){pz(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hz(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function pz(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fz(e,t){return mz(mz({},t),e)}function gz(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return a.createElement(nR,r);case"trapezoid":return a.createElement(IB,r);case"sector":return a.createElement(cR,r);case"symbols":if(function(e){return"symbols"===e}(t))return a.createElement(dz,r);break;case"curve":return a.createElement(mM,r);default:return null}}function xz(e){var t,{option:r,shapeType:n,propTransformer:s=fz,activeClassName:i="recharts-active-shape"}=e,o=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,uz);if((0,a.isValidElement)(r))t=(0,a.cloneElement)(r,mz(mz({},o),function(e){return(0,a.isValidElement)(e)?e.props:e}(r)));else if("function"===typeof r)t=r(o);else if(AB()(r)&&"boolean"!==typeof r){var l=s(r,o);t=a.createElement(gz,{shapeType:n,elementProps:l})}else{var c=o;t=a.createElement(gz,{shapeType:n,elementProps:c})}return o.isActive?a.createElement(tD,{className:i},t):t}var yz=(e,t)=>{var r=xy();return(n,a)=>s=>{null===e||void 0===e||e(n,a,s),r(Bx({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},vz=e=>{var t=xy();return(r,n)=>a=>{null===e||void 0===e||e(r,n,a),t(zx())}},bz=(e,t)=>{var r=xy();return(n,a)=>s=>{null===e||void 0===e||e(n,a,s),r(qx({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},jz=["key"],wz=["onMouseEnter","onClick","onMouseLeave"],Nz=["id"],_z=["id"];function kz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Sz(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kz(Object(r),!0).forEach(function(t){Az(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kz(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Az(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cz(){return Cz=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cz.apply(null,arguments)}function Ez(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Tz(e){var t=(0,a.useMemo)(()=>XR(e.children,kB),[e.children]),r=jy(r=>NB(r,e.id,t));return null==r?null:a.createElement(bF,{legendPayload:r})}var Pz=a.memo(e=>{var{dataKey:t,nameKey:r,sectors:n,stroke:s,strokeWidth:i,fill:o,name:l,hide:c,tooltipType:d}=e,u={dataDefinedOnItem:n.map(e=>e.tooltipPayload),positions:n.map(e=>e.tooltipPosition),settings:{stroke:s,strokeWidth:i,fill:o,dataKey:t,nameKey:r,name:$y(l,t),hide:c,type:d,color:o,unit:""}};return a.createElement(cF,{tooltipEntrySettings:u})}),Oz=(e,t,r)=>{var{top:n,left:a,width:s,height:i}=t,o=yk(s,i),l=a+Im(e.cx,s,s/2),c=n+Im(e.cy,i,i/2),d=Im(e.innerRadius,o,0),u=((e,t,r)=>Im("function"===typeof t?t(e):t,r,.8*r))(r,e.outerRadius,o);return{cx:l,cy:c,innerRadius:d,outerRadius:u,maxRadius:e.maxRadius||Math.sqrt(s*s+i*i)/2}},Dz=(e,t)=>Am(t-e)*Math.min(Math.abs(t-e),360);function Iz(e){var{sectors:t,props:r,showLabels:n}=e,{label:s,labelLine:i,dataKey:o}=r;if(!n||!s||!t)return null;var l=TP(r),c=PP(s),d=PP(i),u="object"===typeof s&&"offsetRadius"in s&&"number"===typeof s.offsetRadius&&s.offsetRadius||20,h=t.map((e,t)=>{var r,n,h=(e.startAngle+e.endAngle)/2,m=xk(e.cx,e.cy,e.outerRadius+u,h),p=Sz(Sz(Sz(Sz({},l),e),{},{stroke:"none"},c),{},{index:t,textAnchor:(r=m.x,n=e.cx,r>n?"start":r<n?"end":"middle")},m),f=Sz(Sz(Sz(Sz({},l),e),{},{fill:"none",stroke:e.fill},d),{},{index:t,points:[xk(e.cx,e.cy,e.outerRadius,h),m],key:"line"});return a.createElement(ED,{zIndex:wk.label,key:"label-".concat(e.startAngle,"-").concat(e.endAngle,"-").concat(e.midAngle,"-").concat(t)},a.createElement(tD,null,i&&((e,t)=>{if(a.isValidElement(e))return a.cloneElement(e,t);if("function"===typeof e)return e(t);var r=jm("recharts-pie-label-line","boolean"!==typeof e?e.className:""),{key:n}=t,s=Ez(t,jz);return a.createElement(mM,Cz({},s,{type:"linear",className:r}))})(i,f),((e,t,r)=>{if(a.isValidElement(e))return a.cloneElement(e,t);var n=r;if("function"===typeof e&&(n=e(t),a.isValidElement(n)))return n;var s=jm("recharts-pie-label-text",function(e){return e&&"object"===typeof e&&"className"in e&&"string"===typeof e.className?e.className:""}(e));return a.createElement(CD,Cz({},t,{alignmentBaseline:"middle",className:s}),n)})(s,p,My(e,o))))});return a.createElement(tD,{className:"recharts-pie-labels"},h)}function Lz(e){var{sectors:t,props:r,showLabels:n}=e,{label:s}=r;return"object"===typeof s&&null!=s&&"position"in s?a.createElement(UR,{label:s}):a.createElement(Iz,{sectors:t,props:r,showLabels:n})}function Mz(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:s,shape:i}=e,o=jy(oE),{onMouseEnter:l,onClick:c,onMouseLeave:d}=s,u=Ez(s,wz),h=yz(l,s.dataKey),m=vz(d),p=bz(c,s.dataKey);return null==t||0===t.length?null:a.createElement(a.Fragment,null,t.map((e,l)=>{if(0===(null===e||void 0===e?void 0:e.startAngle)&&0===(null===e||void 0===e?void 0:e.endAngle)&&1!==t.length)return null;var c=String(l)===o,d=r&&c?r:o?n:null,f=Sz(Sz({},e),{},{stroke:e.stroke,tabIndex:-1,[av]:l,[sv]:s.dataKey});return a.createElement(tD,Cz({key:"sector-".concat(null===e||void 0===e?void 0:e.startAngle,"-").concat(null===e||void 0===e?void 0:e.endAngle,"-").concat(e.midAngle,"-").concat(l),tabIndex:-1,className:"recharts-pie-sector"},XD(u,e,l),{onMouseEnter:h(e,l),onMouseLeave:m(e,l),onClick:p(e,l)}),a.createElement(xz,Cz({option:null!==i&&void 0!==i?i:d,shapeType:"sector",isActive:c},f)))}))}function Rz(e){var{showLabels:t,sectors:r,children:n}=e,s=(0,a.useMemo)(()=>t&&r?r.map(e=>({value:e.value,payload:e.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:e.cx,cy:e.cy,innerRadius:e.innerRadius,outerRadius:e.outerRadius,startAngle:e.startAngle,endAngle:e.endAngle,clockWise:!1},fill:e.fill})):[],[r,t]);return a.createElement(BR,{value:t?s:void 0},n)}function Fz(e){var{props:t,previousSectorsRef:r}=e,{sectors:n,isAnimationActive:s,animationBegin:i,animationDuration:o,animationEasing:l,activeShape:c,inactiveShape:d,onAnimationStart:u,onAnimationEnd:h}=t,m=KM(t,"recharts-pie-"),p=r.current,[f,g]=(0,a.useState)(!1),x=(0,a.useCallback)(()=>{"function"===typeof h&&h(),g(!1)},[h]),y=(0,a.useCallback)(()=>{"function"===typeof u&&u(),g(!0)},[u]);return a.createElement(Rz,{showLabels:!f,sectors:n},a.createElement(GM,{animationId:m,begin:i,duration:o,isActive:s,easing:l,onAnimationStart:y,onAnimationEnd:x,key:m},e=>{var s=[],i=n&&n[0],o=null===i||void 0===i?void 0:i.startAngle;return null===n||void 0===n||n.forEach((t,r)=>{var n=p&&p[r],a=r>0?Sm()(t,"paddingAngle",0):0;if(n){var i=Mm(n.endAngle-n.startAngle,t.endAngle-t.startAngle,e),l=Sz(Sz({},t),{},{startAngle:o+a,endAngle:o+i+a});s.push(l),o=l.endAngle}else{var{endAngle:c,startAngle:d}=t,u=Mm(0,c-d,e),h=Sz(Sz({},t),{},{startAngle:o+a,endAngle:o+u+a});s.push(h),o=h.endAngle}}),r.current=s,a.createElement(tD,null,a.createElement(Mz,{sectors:s,activeShape:c,inactiveShape:d,allOtherPieProps:t,shape:t.shape}))}),a.createElement(Lz,{showLabels:!f,sectors:n,props:t}),t.children)}var Bz={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!aP,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:wk.area};function zz(e){var{id:t}=e,r=Ez(e,Nz),{hide:n,className:s,rootTabIndex:i}=e,o=(0,a.useMemo)(()=>XR(e.children,kB),[e.children]),l=jy(e=>_B(e,t,o)),c=(0,a.useRef)(null),d=jm("recharts-pie",s);return n||null==l?(c.current=null,a.createElement(tD,{tabIndex:i,className:d})):a.createElement(ED,{zIndex:e.zIndex},a.createElement(Pz,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:l,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType}),a.createElement(tD,{tabIndex:i,className:d},a.createElement(Fz,{props:Sz(Sz({},r),{},{sectors:l}),previousSectorsRef:c})))}function Uz(e){var t=CO(e,Bz),{id:r}=t,n=Ez(t,_z),s=TP(n);return a.createElement(wF,{id:r,type:"pie"},e=>a.createElement(a.Fragment,null,a.createElement(kF,{type:"pie",id:e,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:s,maxRadius:t.maxRadius}),a.createElement(Tz,Cz({},n,{id:e})),a.createElement(zz,Cz({},n,{id:e}))))}function qz(){return qz=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qz.apply(null,arguments)}function Wz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Vz(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Uz.displayName="Pie";var Hz=32,Gz={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function Kz(e){var t,{data:r,iconType:n,inactiveColor:s}=e,i=16,o=Hz/6,l=Hz/3,c=r.inactive?s:r.color,d=null!==n&&void 0!==n?n:r.type;if("none"===d)return null;if("plainline"===d)return a.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:null===(t=r.payload)||void 0===t?void 0:t.strokeDasharray,x1:0,y1:i,x2:Hz,y2:i,className:"recharts-legend-icon"});if("line"===d)return a.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,"\n            A").concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,"\n            H").concat(Hz,"M").concat(2*l,",").concat(i,"\n            A").concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if("rect"===d)return a.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(4,"h").concat(Hz,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(a.isValidElement(r.legendIcon)){var u=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wz(Object(r),!0).forEach(function(t){Vz(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wz(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},r);return delete u.legendIcon,a.cloneElement(r.legendIcon,u)}return a.createElement(dz,{fill:c,cx:i,cy:i,size:Hz,sizeType:"diameter",type:d})}function Yz(e){var{payload:t,iconSize:r,layout:n,formatter:s,inactiveColor:i,iconType:o}=e,l={x:0,y:0,width:Hz,height:Hz},c={display:"horizontal"===n?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((t,n)=>{var u=t.formatter||s,h=jm({"recharts-legend-item":!0,["legend-item-".concat(n)]:!0,inactive:t.inactive});if("none"===t.type)return null;var m=t.inactive?i:t.color,p=u?u(t.value,t,n):t.value;return a.createElement("li",qz({className:h,style:c,key:"legend-item-".concat(n)},XD(e,t,n)),a.createElement(MP,{width:r,height:r,viewBox:l,style:d,"aria-label":"".concat(p," legend icon")},a.createElement(Kz,{data:t,iconType:o,inactiveColor:i})),a.createElement("span",{className:"recharts-legend-item-text",style:{color:m}},p))})}var Xz=e=>{var t=CO(e,Gz),{payload:r,layout:n,align:s}=t;if(!r||!r.length)return null;var i={padding:0,margin:0,textAlign:"horizontal"===n?s:"left"};return a.createElement("ul",{className:"recharts-default-legend",style:i},a.createElement(Yz,qz({},t,{payload:r})))};var Qz=["contextPayload"];function $z(){return $z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$z.apply(null,arguments)}function Jz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Zz(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jz(Object(r),!0).forEach(function(t){eU(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jz(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function eU(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tU(e){return e.value}function rU(e){var{contextPayload:t}=e,r=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,Qz),n=uL(t,e.payloadUniqBy,tU),s=Zz(Zz({},r),{},{payload:n});return a.isValidElement(e.content)?a.cloneElement(e.content,s):"function"===typeof e.content?a.createElement(e.content,s):a.createElement(Xz,s)}function nU(e){var t=xy();return(0,a.useEffect)(()=>{t(_T(e))},[t,e]),null}function aU(e){var t=xy();return(0,a.useEffect)(()=>(t(NT(e)),()=>{t(NT({width:0,height:0}))}),[t,e]),null}var sU={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function iU(e){var t=CO(e,sU),r=jy(ky),n=(0,a.useContext)(oO),s=jy(e=>e.layout.margin),{width:i,height:l,wrapperStyle:c,portal:d}=t,[u,h]=SL([r]),m=bv(),p=jv();if(null==m||null==p)return null;var f=m-((null===s||void 0===s?void 0:s.left)||0)-((null===s||void 0===s?void 0:s.right)||0),g=function(e,t,r,n){return"vertical"===e&&Tm(t)?{height:t}:"horizontal"===e?{width:r||n}:null}(t.layout,l,i,f),x=d?c:Zz(Zz({position:"absolute",width:(null===g||void 0===g?void 0:g.width)||i||"auto",height:(null===g||void 0===g?void 0:g.height)||l||"auto"},function(e,t,r,n,a,s){var i,o,{layout:l,align:c,verticalAlign:d}=t;return e&&(void 0!==e.left&&null!==e.left||void 0!==e.right&&null!==e.right)||(i="center"===c&&"vertical"===l?{left:((n||0)-s.width)/2}:"right"===c?{right:r&&r.right||0}:{left:r&&r.left||0}),e&&(void 0!==e.top&&null!==e.top||void 0!==e.bottom&&null!==e.bottom)||(o="middle"===d?{top:((a||0)-s.height)/2}:"bottom"===d?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),Zz(Zz({},i),o)}(c,t,s,m,p,u)),c),y=null!==d&&void 0!==d?d:n;if(null==y||null==r)return null;var v=a.createElement("div",{className:"recharts-legend-wrapper",style:x,ref:h},a.createElement(nU,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),!d&&a.createElement(aU,{width:u.width,height:u.height}),a.createElement(rU,$z({},t,g,{margin:s,chartWidth:m,chartHeight:p,contextPayload:r})));return(0,o.createPortal)(v,y)}iU.displayName="Legend";var oU=["axis","item"],lU=(0,a.forwardRef)((e,t)=>a.createElement(PO,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:oU,tooltipPayloadSearcher:Ag,categoricalChartProps:e,ref:t})),cU="Invariant failed";var dU=["x","y"];function uU(){return uU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uU.apply(null,arguments)}function hU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function mU(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hU(Object(r),!0).forEach(function(t){pU(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hU(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function pU(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fU(e,t){var{x:r,y:n}=e,a=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,dU),s="".concat(r),i=parseInt(s,10),o="".concat(n),l=parseInt(o,10),c="".concat(t.height||a.height),d=parseInt(c,10),u="".concat(t.width||a.width),h=parseInt(u,10);return mU(mU(mU(mU(mU({},t),a),i?{x:i}:{}),l?{y:l}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function gU(e){return a.createElement(xz,uU({shapeType:"rectangle",propTransformer:fU,activeClassName:"recharts-active-bar"},e))}var xU=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(r,n)=>{if(Tm(e))return e;var a=Tm(r)||Fm(r);return a?e(r,n):(a||function(e){if(!e)throw new Error(cU)}(!1,"minPointSize callback function received a value with type of ".concat(typeof r,". Currently only numbers or null/undefined are supported.")),t)}},yU=["children"];var vU={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},bU=(0,a.createContext)(vU);function jU(e){var{children:t}=e,r=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,yU);return a.createElement(bU.Provider,{value:r},t)}function wU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function NU(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wU(Object(r),!0).forEach(function(t){_U(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wU(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _U(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var kU=hy([jS,(e,t,r,n,a)=>a],(e,t)=>e.filter(e=>"bar"===e.type).find(e=>e.id===t)),SU=hy([kU],e=>null===e||void 0===e?void 0:e.maxBarSize),AU=(e,t,r)=>{var n=null!==r&&void 0!==r?r:e;if(!Fm(n))return Im(n,t,0)},CU=hy([wv,jS,(e,t)=>t,(e,t,r)=>r,(e,t,r,n)=>n],(e,t,r,n,a)=>t.filter(t=>"horizontal"===e?t.xAxisId===r:t.yAxisId===n).filter(e=>e.isPanorama===a).filter(e=>!1===e.hide).filter(e=>"bar"===e.type)),EU=hy([CU,e=>e.rootProps.barSize,(e,t,r)=>"horizontal"===wv(e)?KA(e,"xAxis",t):KA(e,"yAxis",r)],(e,t,r)=>{var n=e.filter(eS),a=e.filter(e=>null==e.stackId),s=n.reduce((e,t)=>(e[t.stackId]||(e[t.stackId]=[]),e[t.stackId].push(t),e),{}),i=Object.entries(s).map(e=>{var[n,a]=e,s=a.map(e=>e.dataKey);return{stackId:n,dataKeys:s,barSize:AU(t,r,a[0].barSize)}}),o=a.map(e=>({stackId:void 0,dataKeys:[e.dataKey].filter(e=>null!=e),barSize:AU(t,r,e.barSize)}));return[...i,...o]}),TU=(e,t,r,n)=>{var a,s;return"horizontal"===wv(e)?(a=tC(e,"xAxis",t,n),s=eC(e,"xAxis",t,n)):(a=tC(e,"yAxis",r,n),s=eC(e,"yAxis",r,n)),Xy(a,s)};var PU=hy([EU,ak,e=>e.rootProps.barGap,sk,(e,t,r,n,a)=>{var s,i,o=kU(e,t,r,n,a);if(null!=o){var l,c,d=wv(e),u=ak(e),{maxBarSize:h}=o,m=Fm(h)?u:h;return"horizontal"===d?(l=tC(e,"xAxis",t,n),c=eC(e,"xAxis",t,n)):(l=tC(e,"yAxis",r,n),c=eC(e,"yAxis",r,n)),null!==(s=null!==(i=Xy(l,c,!0))&&void 0!==i?i:m)&&void 0!==s?s:0}},TU,SU],(e,t,r,n,a,s,i)=>{var o=Fm(i)?t:i,l=function(e,t,r,n,a){var s=n.length;if(!(s<1)){var i,o=Im(e,r,0,!0),l=[];if(Xm(n[0].barSize)){var c=!1,d=r/s,u=n.reduce((e,t)=>e+(t.barSize||0),0);(u+=(s-1)*o)>=r&&(u-=(s-1)*o,o=0),u>=r&&d>0&&(c=!0,u=s*(d*=.9));var h={offset:((r-u)/2|0)-o,size:0};i=n.reduce((e,t)=>{var r,n=[...e,{stackId:t.stackId,dataKeys:t.dataKeys,position:{offset:h.offset+h.size+o,size:c?d:null!==(r=t.barSize)&&void 0!==r?r:0}}];return h=n[n.length-1].position,n},l)}else{var m=Im(t,r,0,!0);r-2*m-(s-1)*o<=0&&(o=0);var p=(r-2*m-(s-1)*o)/s;p>1&&(p>>=0);var f=Xm(a)?Math.min(p,a):p;i=n.reduce((e,t,r)=>[...e,{stackId:t.stackId,dataKeys:t.dataKeys,position:{offset:m+(p+o)*r+(p-f)/2,size:f}}],l)}return i}}(r,n,a!==s?a:s,e,o);return a!==s&&null!=l&&(l=l.map(e=>NU(NU({},e),{},{position:NU(NU({},e.position),{},{offset:e.position.offset-a/2})}))),l}),OU=hy([PU,kU],(e,t)=>{if(null!=e&&null!=t){var r=e.find(e=>e.stackId===t.stackId&&null!=t.dataKey&&e.dataKeys.includes(t.dataKey));if(null!=r)return r.position}}),DU=hy([(e,t,r,n)=>"horizontal"===wv(e)?qS(e,"yAxis",r,n):qS(e,"xAxis",t,n),kU],(e,t)=>{var r=Jk(t);if(e&&null!=r&&null!=t){var{stackId:n}=t;if(null!=n){var a=e[n];if(a){var{stackedData:s}=a;if(s)return s.find(e=>e.key===r)}}}}),IU=hy([cv,uv,(e,t,r,n)=>tC(e,"xAxis",t,n),(e,t,r,n)=>tC(e,"yAxis",r,n),(e,t,r,n)=>eC(e,"xAxis",t,n),(e,t,r,n)=>eC(e,"yAxis",r,n),OU,wv,R_,TU,DU,kU,(e,t,r,n,a,s)=>s],(e,t,r,n,a,s,i,o,l,c,d,u,h)=>{var{chartData:m,dataStartIndex:p,dataEndIndex:f}=l;if(null!=u&&null!=i&&null!=t&&("horizontal"===o||"vertical"===o)&&null!=r&&null!=n&&null!=a&&null!=s&&null!=c){var g,{data:x}=u;if(null!=(g=null!=x&&x.length>0?x:null===m||void 0===m?void 0:m.slice(p,f+1)))return function(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:s,xAxis:i,yAxis:o,xAxisTicks:l,yAxisTicks:c,stackedData:d,displayedData:u,offset:h,cells:m,parentViewBox:p,dataStartIndex:f}=e,g="horizontal"===t?o:i,x=d?g.scale.domain():null,y=(e=>{var{numericAxis:t}=e,r=t.scale.domain();if("number"===t.type){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]})({numericAxis:g}),v=g.scale(y);return u.map((e,u)=>{var g,b,j,w,N,_;d?g=((e,t)=>{if(!t||2!==t.length||!Tm(t[0])||!Tm(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!Tm(e[0])||e[0]<r)&&(a[0]=r),(!Tm(e[1])||e[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a})(d[u+f],x):(g=My(e,r),Array.isArray(g)||(g=[y,g]));var k=xU(n,ZU)(g[1],u);if("horizontal"===t){var S,[A,C]=[o.scale(g[0]),o.scale(g[1])];b=Hy({axis:i,ticks:l,bandSize:s,offset:a.offset,entry:e,index:u}),j=null!==(S=null!==C&&void 0!==C?C:A)&&void 0!==S?S:void 0,w=a.size;var E=A-C;if(N=Cm(E)?0:E,_={x:b,y:h.top,width:w,height:h.height},Math.abs(k)>0&&Math.abs(N)<Math.abs(k)){var T=Am(N||k)*(Math.abs(k)-Math.abs(N));j-=T,N+=T}}else{var[P,O]=[i.scale(g[0]),i.scale(g[1])];if(b=P,j=Hy({axis:o,ticks:c,bandSize:s,offset:a.offset,entry:e,index:u}),w=O-P,N=a.size,_={x:h.left,y:j,width:h.width,height:N},Math.abs(k)>0&&Math.abs(w)<Math.abs(k))w+=Am(w||k)*(Math.abs(k)-Math.abs(w))}return null==b||null==j||null==w||null==N?null:UU(UU({},e),{},{stackedBarStart:v,x:b,y:j,width:w,height:N,value:d?g:g[1],payload:e,background:_,tooltipPosition:{x:b+w/2,y:j+N/2},parentViewBox:p},m&&m[u]&&m[u].props)}).filter(Boolean)}({layout:o,barSettings:u,pos:i,parentViewBox:t,bandSize:c,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:s,stackedData:d,displayedData:g,offset:e,cells:h,dataStartIndex:p})}});var LU=["onMouseEnter","onMouseLeave","onClick"],MU=["value","background","tooltipPosition"],RU=["id"],FU=["onMouseEnter","onClick","onMouseLeave"];function BU(){return BU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},BU.apply(null,arguments)}function zU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function UU(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zU(Object(r),!0).forEach(function(t){qU(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zU(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function qU(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WU(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var VU=e=>{var{dataKey:t,name:r,fill:n,legendType:a,hide:s}=e;return[{inactive:s,dataKey:t,type:a,color:n,value:$y(r,t),payload:e}]},HU=a.memo(e=>{var{dataKey:t,stroke:r,strokeWidth:n,fill:s,name:i,hide:o,unit:l,tooltipType:c}=e,d={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:s,dataKey:t,nameKey:void 0,name:$y(i,t),hide:o,type:c,color:s,unit:l}};return a.createElement(cF,{tooltipEntrySettings:d})});function GU(e){var t=jy(oE),{data:r,dataKey:n,background:s,allOtherBarProps:i}=e,{onMouseEnter:o,onMouseLeave:l,onClick:c}=i,d=WU(i,LU),u=yz(o,n),h=vz(l),m=bz(c,n);if(!s||null==r)return null;var p,f,g=PP(s);return a.createElement(ED,{zIndex:(p=s,f=wk.barBackground,p&&"object"===typeof p&&"zIndex"in p&&"number"===typeof p.zIndex&&Xm(p.zIndex)?p.zIndex:f)},r.map((e,r)=>{var{value:i,background:o,tooltipPosition:l}=e,c=WU(e,MU);if(!o)return null;var p=u(e,r),f=h(e,r),x=m(e,r),y=UU(UU(UU(UU(UU({option:s,isActive:String(r)===t},c),{},{fill:"#eee"},o),g),XD(d,e,r)),{},{onMouseEnter:p,onMouseLeave:f,onClick:x,dataKey:n,index:r,className:"recharts-bar-background-rectangle"});return a.createElement(gU,BU({key:"background-bar-".concat(r)},y))}))}function KU(e){var{showLabels:t,children:r,rects:n}=e,s=null===n||void 0===n?void 0:n.map(e=>{var t={x:e.x,y:e.y,width:e.width,lowerWidth:e.width,upperWidth:e.width,height:e.height};return UU(UU({},t),{},{value:e.value,payload:e.payload,parentViewBox:e.parentViewBox,viewBox:t,fill:e.fill})});return a.createElement(RR,{value:t?s:void 0},r)}function YU(e){var{shape:t,activeBar:r,baseProps:n,entry:s,index:i,dataKey:o}=e,l=jy(oE),c=jy(cE),d=r&&String(i)===l&&(null==c||o===c),u=d?r:t;return d?a.createElement(ED,{zIndex:wk.activeBar},a.createElement(gU,BU({},n,{name:String(n.name)},s,{isActive:d,option:u,index:i,dataKey:o}))):a.createElement(gU,BU({},n,{name:String(n.name)},s,{isActive:d,option:u,index:i,dataKey:o}))}function XU(e){var{shape:t,baseProps:r,entry:n,index:s,dataKey:i}=e;return a.createElement(gU,BU({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:s,dataKey:i}))}function QU(e){var t,{data:r,props:n}=e,s=null!==(t=TP(n))&&void 0!==t?t:{},{id:i}=s,o=WU(s,RU),{shape:l,dataKey:c,activeBar:d}=n,{onMouseEnter:u,onClick:h,onMouseLeave:m}=n,p=WU(n,FU),f=yz(u,c),g=vz(m),x=bz(h,c);return r?a.createElement(a.Fragment,null,r.map((e,t)=>a.createElement(tD,BU({key:"rectangle-".concat(null===e||void 0===e?void 0:e.x,"-").concat(null===e||void 0===e?void 0:e.y,"-").concat(null===e||void 0===e?void 0:e.value,"-").concat(t),className:"recharts-bar-rectangle"},XD(p,e,t),{onMouseEnter:f(e,t),onMouseLeave:g(e,t),onClick:x(e,t)}),d?a.createElement(YU,{shape:l,activeBar:d,baseProps:o,entry:e,index:t,dataKey:c}):a.createElement(XU,{shape:l,baseProps:o,entry:e,index:t,dataKey:c})))):null}function $U(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:s,isAnimationActive:i,animationBegin:o,animationDuration:l,animationEasing:c,onAnimationEnd:d,onAnimationStart:u}=t,h=r.current,m=KM(t,"recharts-bar-"),[p,f]=(0,a.useState)(!1),g=!p,x=(0,a.useCallback)(()=>{"function"===typeof d&&d(),f(!1)},[d]),y=(0,a.useCallback)(()=>{"function"===typeof u&&u(),f(!0)},[u]);return a.createElement(KU,{showLabels:g,rects:n},a.createElement(GM,{animationId:m,begin:o,duration:l,isActive:i,easing:c,onAnimationEnd:x,onAnimationStart:y,key:m},e=>{var i=1===e?n:null===n||void 0===n?void 0:n.map((t,r)=>{var n=h&&h[r];if(n)return UU(UU({},t),{},{x:Mm(n.x,t.x,e),y:Mm(n.y,t.y,e),width:Mm(n.width,t.width,e),height:Mm(n.height,t.height,e)});if("horizontal"===s){var a=Mm(0,t.height,e),i=Mm(t.stackedBarStart,t.y,e);return UU(UU({},t),{},{y:i,height:a})}var o=Mm(0,t.width,e),l=Mm(t.stackedBarStart,t.x,e);return UU(UU({},t),{},{width:o,x:l})});return e>0&&(r.current=null!==i&&void 0!==i?i:null),null==i?null:a.createElement(tD,null,a.createElement(QU,{props:t,data:i}))}),a.createElement(UR,{label:t.label}),t.children)}function JU(e){var t=(0,a.useRef)(null);return a.createElement($U,{previousRectanglesRef:t,props:e})}var ZU=0,eq=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:My(e,t)}};class tq extends a.PureComponent{render(){var{hide:e,data:t,dataKey:r,className:n,xAxisId:s,yAxisId:i,needClip:o,background:l,id:c}=this.props;if(e||null==t)return null;var d=jm("recharts-bar",n),u=c;return a.createElement(tD,{className:d,id:c},o&&a.createElement("defs",null,a.createElement(uF,{clipPathId:u,xAxisId:s,yAxisId:i})),a.createElement(tD,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(u,")"):void 0},a.createElement(GU,{data:t,dataKey:r,background:l,allOtherBarProps:this.props}),a.createElement(JU,this.props)))}}var rq={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:ZU,xAxisId:0,yAxisId:0,zIndex:wk.bar};function nq(e){var t,{xAxisId:r,yAxisId:n,hide:s,legendType:i,minPointSize:o,activeBar:l,animationBegin:c,animationDuration:d,animationEasing:u,isAnimationActive:h}=e,{needClip:m}=dF(r,n),p=Nv(),f=mv(),g=XR(e.children,kB),x=jy(t=>IU(t,r,n,f,e.id,g));if("vertical"!==p&&"horizontal"!==p)return null;var y=null===x||void 0===x?void 0:x[0];return t=null==y||null==y.height||null==y.width?0:"vertical"===p?y.height/2:y.width/2,a.createElement(jU,{xAxisId:r,yAxisId:n,data:x,dataPointFormatter:eq,errorBarOffset:t},a.createElement(tq,BU({},e,{layout:p,needClip:m,data:x,xAxisId:r,yAxisId:n,hide:s,legendType:i,minPointSize:o,activeBar:l,animationBegin:c,animationDuration:d,animationEasing:u,isAnimationActive:h})))}function aq(e){var t=CO(e,rq),r=mv();return a.createElement(wF,{id:t.id,type:"bar"},e=>a.createElement(a.Fragment,null,a.createElement(vF,{legendPayload:VU(t)}),a.createElement(HU,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType}),a.createElement(_F,{type:"bar",id:e,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:Wy(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),a.createElement(ED,{zIndex:t.zIndex},a.createElement(nq,BU({},t,{id:e})))))}var sq=a.memo(aq,bP);sq.displayName="Bar";var iq=["axis"],oq=(0,a.forwardRef)((e,t)=>a.createElement(PO,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:iq,tooltipPayloadSearcher:Ag,categoricalChartProps:e,ref:t})),lq=(e,t,r,n)=>tC(e,"xAxis",t,n),cq=(e,t,r,n)=>eC(e,"xAxis",t,n),dq=(e,t,r,n)=>tC(e,"yAxis",r,n),uq=(e,t,r,n)=>eC(e,"yAxis",r,n),hq=hy([wv,lq,dq,cq,uq],(e,t,r,n,a)=>Ry(e,"xAxis")?Xy(t,n,!1):Xy(r,a,!1));function mq(e){return"line"===e.type}var pq=hy([jS,(e,t,r,n,a)=>a],(e,t)=>e.filter(mq).find(e=>e.id===t)),fq=hy([wv,lq,dq,cq,uq,pq,hq,R_],(e,t,r,n,a,s,i,o)=>{var{chartData:l,dataStartIndex:c,dataEndIndex:d}=o;if(null!=s&&null!=t&&null!=r&&null!=n&&null!=a&&0!==n.length&&0!==a.length&&null!=i&&("horizontal"===e||"vertical"===e)){var u,{dataKey:h,data:m}=s;if(null!=(u=null!=m&&m.length>0?m:null===l||void 0===l?void 0:l.slice(c,d+1)))return function(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:s,dataKey:i,bandSize:o,displayedData:l}=e;return l.map((e,l)=>{var c=My(e,i);if("horizontal"===t)return{x:Vy({axis:r,ticks:a,bandSize:o,entry:e,index:l}),y:Fm(c)?null:n.scale(c),value:c,payload:e};var d=Fm(c)?null:r.scale(c),u=Vy({axis:n,ticks:s,bandSize:o,entry:e,index:l});return null==d||null==u?null:{x:d,y:u,value:c,payload:e}}).filter(Boolean)}({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,dataKey:h,bandSize:i,displayedData:u})}}),gq=["id"],xq=["type","layout","connectNulls","needClip","shape"],yq=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function vq(){return vq=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vq.apply(null,arguments)}function bq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function jq(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bq(Object(r),!0).forEach(function(t){wq(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bq(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function wq(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nq(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var _q=e=>{var{dataKey:t,name:r,stroke:n,legendType:a,hide:s}=e;return[{inactive:s,dataKey:t,type:a,color:n,value:$y(r,t),payload:e}]},kq=a.memo(e=>{var{dataKey:t,data:r,stroke:n,strokeWidth:s,fill:i,name:o,hide:l,unit:c,tooltipType:d}=e,u={dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:s,fill:i,dataKey:t,nameKey:void 0,name:$y(o,t),hide:l,type:d,color:n,unit:c}};return a.createElement(cF,{tooltipEntrySettings:u})}),Sq=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function Aq(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],a=0;a<t;++a)n=[...n,...r];return n}function Cq(e){var{clipPathId:t,points:r,props:n}=e,{dot:s,dataKey:i,needClip:o}=n,{id:l}=n,c=TP(Nq(n,gq));return a.createElement(nF,{points:r,dot:s,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:i,baseProps:c,needClip:o,clipPathId:t})}function Eq(e){var{showLabels:t,children:r,points:n}=e,s=(0,a.useMemo)(()=>null===n||void 0===n?void 0:n.map(e=>{var t,r,n={x:null!==(t=e.x)&&void 0!==t?t:0,y:null!==(r=e.y)&&void 0!==r?r:0,width:0,lowerWidth:0,upperWidth:0,height:0};return jq(jq({},n),{},{value:e.value,payload:e.payload,viewBox:n,parentViewBox:void 0,fill:void 0})}),[n]);return a.createElement(RR,{value:t?s:void 0},r)}function Tq(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:s,props:i}=e,{type:o,layout:l,connectNulls:c,needClip:d,shape:u}=i,h=jq(jq({},OP(Nq(i,xq))),{},{fill:"none",className:"recharts-line-curve",clipPath:d?"url(#clipPath-".concat(t,")"):void 0,points:n,type:o,layout:l,connectNulls:c,strokeDasharray:null!==s&&void 0!==s?s:i.strokeDasharray});return a.createElement(a.Fragment,null,(null===n||void 0===n?void 0:n.length)>1&&a.createElement(xz,vq({shapeType:"curve",option:u},h,{pathRef:r})),a.createElement(Cq,{points:n,clipPathId:t,props:i}))}function Pq(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:s,longestAnimatedLengthRef:i}=e,{points:o,strokeDasharray:l,isAnimationActive:c,animationBegin:d,animationDuration:u,animationEasing:h,animateNewValues:m,width:p,height:f,onAnimationEnd:g,onAnimationStart:x}=r,y=s.current,v=KM(o,"recharts-line-"),b=(0,a.useRef)(v),[j,w]=(0,a.useState)(!1),N=!j,_=(0,a.useCallback)(()=>{"function"===typeof g&&g(),w(!1)},[g]),k=(0,a.useCallback)(()=>{"function"===typeof x&&x(),w(!0)},[x]),S=function(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch(t){return 0}}(n.current),A=(0,a.useRef)(0);b.current!==v&&(A.current=i.current,b.current=v);var C=A.current;return a.createElement(Eq,{points:o,showLabels:N},r.children,a.createElement(GM,{animationId:v,begin:d,duration:u,isActive:c,easing:h,onAnimationEnd:_,onAnimationStart:k,key:v},e=>{var d,u=Mm(C,S+C,e),h=Math.min(u,S);if(c)if(l){var g="".concat(l).split(/[,\s]+/gim).map(e=>parseFloat(e));d=((e,t,r)=>{var n=r.reduce((e,t)=>e+t);if(!n)return Sq(t,e);for(var a=Math.floor(e/n),s=e%n,i=t-e,o=[],l=0,c=0;l<r.length;c+=r[l],++l)if(c+r[l]>s){o=[...r.slice(0,l),s-c];break}var d=o.length%2===0?[0,i]:[i];return[...Aq(r,a),...o,...d].map(e=>"".concat(e,"px")).join(", ")})(h,S,g)}else d=Sq(S,h);else d=null==l?void 0:String(l);if(e>0&&S>0&&(s.current=o,i.current=Math.max(i.current,h)),y){var x=y.length/o.length,v=1===e?o:o.map((t,r)=>{var n=Math.floor(r*x);if(y[n]){var a=y[n];return jq(jq({},t),{},{x:Mm(a.x,t.x,e),y:Mm(a.y,t.y,e)})}return jq(jq({},t),{},m?{x:Mm(2*p,t.x,e),y:Mm(f/2,t.y,e)}:{x:t.x,y:t.y})});return s.current=v,a.createElement(Tq,{props:r,points:v,clipPathId:t,pathRef:n,strokeDasharray:d})}return a.createElement(Tq,{props:r,points:o,clipPathId:t,pathRef:n,strokeDasharray:d})}),a.createElement(UR,{label:r.label}))}function Oq(e){var{clipPathId:t,props:r}=e,n=(0,a.useRef)(null),s=(0,a.useRef)(0),i=(0,a.useRef)(null);return a.createElement(Pq,{props:r,clipPathId:t,previousPointsRef:n,longestAnimatedLengthRef:s,pathRef:i})}var Dq=(e,t)=>{var r,n;return{x:null!==(r=e.x)&&void 0!==r?r:void 0,y:null!==(n=e.y)&&void 0!==n?n:void 0,value:e.value,errorVal:My(e.payload,t)}};class Iq extends a.Component{render(){var{hide:e,dot:t,points:r,className:n,xAxisId:s,yAxisId:i,top:o,left:l,width:c,height:d,id:u,needClip:h,zIndex:m}=this.props;if(e)return null;var p=jm("recharts-line",n),f=u,{r:g,strokeWidth:x}=SF(t),y=QR(t),v=2*g+x,b=h?"url(#clipPath-".concat(y?"":"dots-").concat(f,")"):void 0;return a.createElement(ED,{zIndex:m},a.createElement(tD,{className:p},h&&a.createElement("defs",null,a.createElement(uF,{clipPathId:f,xAxisId:s,yAxisId:i}),!y&&a.createElement("clipPath",{id:"clipPath-dots-".concat(f)},a.createElement("rect",{x:l-v/2,y:o-v/2,width:c+v,height:d+v}))),a.createElement(jU,{xAxisId:s,yAxisId:i,data:r,dataPointFormatter:Dq,errorBarOffset:0},a.createElement(Oq,{props:this.props,clipPathId:f}))),a.createElement(lF,{activeDot:this.props.activeDot,points:r,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:b}))}}var Lq={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:wk.line,type:"linear"};function Mq(e){var t=CO(e,Lq),{activeDot:r,animateNewValues:n,animationBegin:s,animationDuration:i,animationEasing:o,connectNulls:l,dot:c,hide:d,isAnimationActive:u,label:h,legendType:m,xAxisId:p,yAxisId:f,id:g}=t,x=Nq(t,yq),{needClip:y}=dF(p,f),v=jO(),b=Nv(),j=mv(),w=jy(e=>fq(e,p,f,j,g));if("horizontal"!==b&&"vertical"!==b||null==w||null==v)return null;var{height:N,width:_,x:k,y:S}=v;return a.createElement(Iq,vq({},x,{id:g,connectNulls:l,dot:c,activeDot:r,animateNewValues:n,animationBegin:s,animationDuration:i,animationEasing:o,isAnimationActive:u,hide:d,label:h,legendType:m,xAxisId:p,yAxisId:f,points:w,layout:b,height:N,width:_,left:k,top:S,needClip:y}))}function Rq(e){var t=CO(e,Lq),r=mv();return a.createElement(wF,{id:t.id,type:"line"},e=>a.createElement(a.Fragment,null,a.createElement(vF,{legendPayload:_q(t)}),a.createElement(kq,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType}),a.createElement(_F,{type:"line",id:e,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),a.createElement(Mq,vq({},t,{id:e}))))}var Fq=a.memo(Rq,bP);Fq.displayName="Line";const Bq=["#6366F1","#22C55E","#F59E0B","#EF4444","#06B6D4","#A78BFA","#F43F5E","#10B981","#60A5FA","#FBBF24"],zq=(0,a.memo)(e=>{let{label:t,value:r,sub:n}=e;return(0,er.jsxs)("div",{className:"bg-white rounded-xl sm:rounded-2xl shadow-sm border border-gray-100 p-3 sm:p-4",children:[(0,er.jsx)("div",{className:"text-xs uppercase tracking-wide text-gray-500 truncate",children:t}),(0,er.jsx)("div",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-gray-800 mt-1 truncate",children:r}),n&&(0,er.jsx)("div",{className:"text-xs text-gray-400 mt-1 truncate",children:n})]})});zq.displayName="KPICard";const Uq=(0,a.memo)(e=>{let{title:t,children:r}=e;return(0,er.jsxs)("div",{className:"bg-white rounded-xl sm:rounded-2xl shadow-sm border border-gray-100 p-4 sm:p-6",children:[(0,er.jsx)("h2",{className:"text-lg sm:text-xl font-bold text-gray-800 mb-3 sm:mb-4",children:t}),r]})});Uq.displayName="Card";const qq=(0,a.memo)(e=>{let{children:t,className:r=""}=e;return(0,er.jsx)("th",{className:"px-2 sm:px-3 py-2 text-left text-xs sm:text-sm font-semibold ".concat(r),children:t})});qq.displayName="Th";const Wq=(0,a.memo)(e=>{let{children:t,className:r=""}=e;return(0,er.jsx)("td",{className:"px-2 sm:px-3 py-2 text-xs sm:text-sm ".concat(r),children:t})});Wq.displayName="Td";const Vq=()=>{const[e,t]=(0,a.useState)(!0),[r,n]=(0,a.useState)(null),[s,i]=(0,a.useState)([]),[o,l]=(0,a.useState)([]),[c,d]=(0,a.useState)([]),[u,h]=(0,a.useState)([]),[m,p]=(0,a.useState)([]),[f,g]=(0,a.useState)([]),[x,y]=(0,a.useState)([]),[v,b]=(0,a.useState)([]),[j,w]=(0,a.useState)([]),[N,_]=(0,a.useState)([]),[k,S]=(0,a.useState)([]),[A,C]=(0,a.useState)([]),[E,T]=(0,a.useState)([]),P=(0,a.useCallback)(async function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];try{e&&t(!0),n(null);const E=await Promise.allSettled([Ia.get("/bookings?limit=50").catch(e=>({error:e,data:{bookings:[]}})),Ia.get("/packages/bookingsall?limit=50").catch(e=>({error:e,data:[]})),Ia.get("/rooms?limit=100").catch(e=>({error:e,data:[]})),Ia.get("/expenses?limit=50").catch(e=>({error:e,data:[]}))]),P=await Promise.allSettled([Ia.get("/food-orders?limit=50").catch(e=>({error:e,data:[]})),Ia.get("/food-items?limit=100").catch(e=>({error:e,data:[]})),Ia.get("/services/assigned?limit=100").catch(e=>({error:e,data:[]})),Ia.get("/services?limit=100").catch(e=>({error:e,data:[]}))]),O=await Promise.allSettled([Ia.get("/bill/checkouts?limit=50").catch(e=>({error:e,data:[]})),Ia.get("/packages?limit=100").catch(e=>({error:e,data:[]})),Ia.get("/inventory/items?limit=100").catch(e=>({error:e,data:[]})),Ia.get("/inventory/categories?limit=50").catch(e=>({error:e,data:[]})),Ia.get("/employees?limit=100").catch(e=>({error:e,data:[]}))]),D=[...E,...P,...O];var r,a,s,o,c,u,m,f,x,v,j,N,k,A;if("fulfilled"!==D[0].status||D[0].value.error)console.error("Failed to load bookings:",(null===(r=D[0].value)||void 0===r?void 0:r.error)||D[0].reason),i([]);else i(Array.isArray(null===(a=D[0].value.data)||void 0===a?void 0:a.bookings)?D[0].value.data.bookings:[]);if("fulfilled"!==D[1].status||D[1].value.error)console.error("Failed to load package bookings:",(null===(s=D[1].value)||void 0===s?void 0:s.error)||D[1].reason),l([]);else l(Array.isArray(D[1].value.data)?D[1].value.data:[]);if("fulfilled"!==D[2].status||D[2].value.error)console.error("Failed to load rooms:",(null===(o=D[2].value)||void 0===o?void 0:o.error)||D[2].reason),d([]);else d(Array.isArray(D[2].value.data)?D[2].value.data:[]);if("fulfilled"!==D[3].status||D[3].value.error)console.error("Failed to load expenses:",(null===(c=D[3].value)||void 0===c?void 0:c.error)||D[3].reason),h([]);else h(Array.isArray(D[3].value.data)?D[3].value.data:[]);if("fulfilled"!==D[4].status||D[4].value.error)console.error("Failed to load food orders:",(null===(u=D[4].value)||void 0===u?void 0:u.error)||D[4].reason),p([]);else p(Array.isArray(D[4].value.data)?D[4].value.data:[]);if("fulfilled"!==D[5].status||D[5].value.error)console.error("Failed to load food items:",(null===(m=D[5].value)||void 0===m?void 0:m.error)||D[5].reason),g([]);else g(Array.isArray(D[5].value.data)?D[5].value.data:[]);if("fulfilled"!==D[6].status||D[6].value.error)console.error("Failed to load assigned services:",(null===(f=D[6].value)||void 0===f?void 0:f.error)||D[6].reason),y([]);else y(Array.isArray(D[6].value.data)?D[6].value.data:[]);if("fulfilled"!==D[7].status||D[7].value.error)console.error("Failed to load services:",(null===(x=D[7].value)||void 0===x?void 0:x.error)||D[7].reason),b([]);else b(Array.isArray(D[7].value.data)?D[7].value.data:[]);if("fulfilled"!==D[8].status||D[8].value.error)console.error("Failed to load billings:",(null===(v=D[8].value)||void 0===v?void 0:v.error)||D[8].reason),w([]);else w(Array.isArray(D[8].value.data)?D[8].value.data:[]);if("fulfilled"!==D[9].status||D[9].value.error)console.error("Failed to load packages:",(null===(j=D[9].value)||void 0===j?void 0:j.error)||D[9].reason),_([]);else _(Array.isArray(D[9].value.data)?D[9].value.data:[]);if("fulfilled"!==D[10].status||D[10].value.error)console.error("Failed to load inventory items:",(null===(N=D[10].value)||void 0===N?void 0:N.error)||D[10].reason),S([]);else S(Array.isArray(D[10].value.data)?D[10].value.data:[]);if("fulfilled"!==D[11].status||D[11].value.error)console.error("Failed to load inventory categories:",(null===(k=D[11].value)||void 0===k?void 0:k.error)||D[11].reason),C([]);else C(Array.isArray(D[11].value.data)?D[11].value.data:[]);if("fulfilled"!==D[12].status||D[12].value.error)console.error("Failed to load employees:",(null===(A=D[12].value)||void 0===A?void 0:A.error)||D[12].reason),T([]);else T(Array.isArray(D[12].value.data)?D[12].value.data:[]);const I=D.every(e=>{var t;return"rejected"===e.status||"fulfilled"===e.status&&(null===(t=e.value)||void 0===t?void 0:t.error)});I&&n("Failed to load dashboard data. Please check your connection and try again.")}catch(ze){var E,P;console.error("Dashboard fetch error:",ze),n((null===ze||void 0===ze||null===(E=ze.response)||void 0===E||null===(P=E.data)||void 0===P?void 0:P.detail)||"Failed to load dashboard data")}finally{e&&t(!1)}},[]);(0,a.useEffect)(()=>{let e=!0;P(!0);const t=setInterval(()=>{e&&P(!1)},3e5);return()=>{e=!1,clearInterval(t)}},[P]);const O=(0,a.useCallback)(e=>e?new Date(e):null,[]),D=(0,a.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return ym(Number(e||0),!0,t)},[]),I=(0,a.useMemo)(()=>{const e=c.length,t=c.filter(e=>{const t=(e.status||e.current_status||"").toLowerCase();return t.includes("occupied")||t.includes("booked")}).length,r=c.filter(e=>(e.status||"").toLowerCase().includes("avail")).length,n=c.filter(e=>{const t=(e.status||"").toLowerCase();return t.includes("maintenance")||t.includes("maintain")}).length,a=Math.max(0,e-t-r);return{total:e,occupied:t,available:r,maintenance:n>0?n:a}},[c]),L=(0,a.useMemo)(()=>{const e=j.reduce((e,t)=>e+Number(t.grand_total||0),0),t=new Date,r=t.toISOString().slice(0,10),n="".concat(t.getFullYear(),"-").concat(String(t.getMonth()+1).padStart(2,"0"));let a=0,s=0;return j.forEach(e=>{const t=e.checkout_date||e.created_at,i=O(t);if(!i)return;i.toISOString().slice(0,10)===r&&(a+=Number(e.grand_total||0));"".concat(i.getFullYear(),"-").concat(String(i.getMonth()+1).padStart(2,"0"))===n&&(s+=Number(e.grand_total||0))}),{total:e,today:a,month:s}},[j]),M=(0,a.useMemo)(()=>{const e=u.reduce((e,t)=>e+Number(t.amount||t.charges||0),0),t=new Date,r="".concat(t.getFullYear(),"-").concat(String(t.getMonth()+1).padStart(2,"0"));let n=0;return u.forEach(e=>{const t=O(e.created_at);if(!t)return;"".concat(t.getFullYear(),"-").concat(String(t.getMonth()+1).padStart(2,"0"))===r&&(n+=Number(e.amount||e.charges||0))}),{total:e,month:n}},[u]),R=(0,a.useMemo)(()=>{const e=s.length,t=s.filter(e=>(e.status||"").toLowerCase().includes("cancel")).length,r=s.filter(e=>{const t=(e.status||"").toLowerCase();return!t.includes("cancel")&&!t.includes("checked-out")&&!t.includes("checked_out")}).length;return{total:e,active:r,cancelled:t}},[s]),F=(0,a.useMemo)(()=>{const e=new Map;j.forEach(t=>{const r=O(t.created_at);if(!r)return;const n=r.toISOString().slice(0,10);e.set(n,(e.get(n)||0)+Number(t.grand_total||0))});const t=[];for(let r=13;r>=0;r--){const n=new Date;n.setDate(n.getDate()-r);const a=n.toISOString().slice(0,10);t.push({date:a.slice(5),revenue:e.get(a)||0})}return t},[j]),B=(0,a.useMemo)(()=>{const e=new Map;return u.forEach(t=>{const r=t.type||t.category||"Other";e.set(r,(e.get(r)||0)+Number(t.amount||t.charges||0))}),Array.from(e,e=>{let[t,r]=e;return{type:t,amount:r}}).sort((e,t)=>t.amount-e.amount).slice(0,6)},[u]),z=(0,a.useMemo)(()=>{const e=new Map;return j.forEach(t=>{const r=(t.payment_method||"other").replace("_"," ").toUpperCase();e.set(r,(e.get(r)||0)+1)}),Array.from(e,e=>{let[t,r]=e;return{name:t,value:r}})},[j]),U=(0,a.useMemo)(()=>{const e=new Map;return m.forEach(t=>{const r=t.type||t.category||"Other";e.set(r,(e.get(r)||0)+1)}),Array.from(e,e=>{let[t,r]=e;return{name:t,value:r}})},[m]),q=(0,a.useMemo)(()=>[{name:"Occupied",value:I.occupied},{name:"Available",value:I.available},{name:"Maintenance",value:I.maintenance}],[I]),W=(0,a.useMemo)(()=>{const e=new Map;return x.forEach(t=>{const r=(t.status||t.assigned_status||"pending").toUpperCase();e.set(r,(e.get(r)||0)+1)}),Array.from(e,e=>{let[t,r]=e;return{name:t,value:r}})},[x]),V=(0,a.useMemo)(()=>{const e=new Map(N.map(e=>[e.id,e.title])),t=s.reduce((t,r)=>{var n;const a=(null===(n=r.package)||void 0===n?void 0:n.id)||r.package_id,s=e.get(a)||"Unknown";return t[s]=(t[s]||0)+1,t},{});return Object.entries(t).map(e=>{let[t,r]=e;return{name:t,count:r}})},[s,N]),H=(0,a.useMemo)(()=>[...s].sort((e,t)=>new Date(t.created_at||t.check_in)-new Date(e.created_at||e.check_in)).slice(0,10),[s]),G=(0,a.useMemo)(()=>[...j].sort((e,t)=>new Date(t.created_at)-new Date(e.created_at)).slice(0,8),[j]),K=(0,a.useMemo)(()=>[...m].sort((e,t)=>new Date(t.created_at)-new Date(e.created_at)).slice(0,8),[m]),Y=(0,a.useMemo)(()=>[...N].sort((e,t)=>new Date(t.created_at)-new Date(e.created_at)).slice(0,8),[N]),X=(0,a.useMemo)(()=>{const e=m.filter(e=>(e.status||"").toLowerCase().includes("completed")||(e.status||"").toLowerCase().includes("done")),t=e.reduce((e,t)=>e+Number(t.amount||t.total||0),0),r=(new Date).toISOString().slice(0,10),n=e.filter(e=>{const t=O(e.created_at);return t&&t.toISOString().slice(0,10)===r}).reduce((e,t)=>e+Number(t.amount||t.total||0),0);return{total:m.length,completed:e.length,totalRevenue:t,todayRevenue:n,averageOrderValue:e.length>0?t/e.length:0}},[m]),Q=(0,a.useMemo)(()=>{const e=k.reduce((e,t)=>e+Number(t.current_stock||0)*Number(t.unit_price||0),0),t=k.filter(e=>{const t=Number(e.current_stock||0);return t<=Number(e.min_stock_level||0)&&t>0}).length,r=k.filter(e=>Number(e.current_stock||0)<=0).length,n=k.filter(e=>e.is_sellable_to_guest||e.is_sellable).length,a=k.filter(e=>e.is_sellable_to_guest||e.is_sellable).reduce((e,t)=>e+Number(t.current_stock||0)*Number(t.selling_price||t.unit_price||0),0);return{totalItems:k.length,totalValue:e,lowStock:t,outOfStock:r,sellableItems:n,totalSellingValue:a,categories:A.length}},[k,A]),$=(0,a.useMemo)(()=>{const e=x.filter(e=>(e.status||"").toLowerCase().includes("completed")||(e.status||"").toLowerCase().includes("done")).reduce((e,t)=>{var r;return e+Number(t.charges||(null===(r=t.service)||void 0===r?void 0:r.charges)||0)},0),t=x.filter(e=>(e.status||"").toLowerCase().includes("completed")||(e.status||"").toLowerCase().includes("done")).length;return{totalServices:v.length,totalAssigned:x.length,completed:t,totalRevenue:e,averageServiceValue:t>0?e/t:0}},[v,x]),J=(0,a.useMemo)(()=>{const e=E.filter(e=>!1!==e.is_active).length;return{total:E.length,active:e,inactive:E.length-e}},[E]),Z=(0,a.useMemo)(()=>{const e=o.reduce((e,t)=>{var r;return e+Number(t.total_amount||(null===(r=t.package)||void 0===r?void 0:r.price)||0)},0),t=(new Date).toISOString().slice(0,10),r=o.filter(e=>{const r=O(e.created_at||e.booking_date);return r&&r.toISOString().slice(0,10)===t}).reduce((e,t)=>{var r;return e+Number(t.total_amount||(null===(r=t.package)||void 0===r?void 0:r.price)||0)},0);return{total:o.length,totalRevenue:e,todayRevenue:r,averagePackageValue:o.length>0?e/o.length:0}},[o]),ee=(0,a.useMemo)(()=>{const e=new Map;return u.forEach(t=>{const r=t.category||t.type||"Uncategorized",n=Number(t.amount||t.charges||0);e.set(r,(e.get(r)||0)+n)}),Array.from(e,e=>{let[t,r]=e;return{category:t,amount:r}}).sort((e,t)=>t.amount-e.amount)},[u]),te=(0,a.useMemo)(()=>{const e=new Map;return k.forEach(t=>{var r;const n=t.category_name||(null===(r=t.category)||void 0===r?void 0:r.name)||"Uncategorized",a=Number(t.current_stock||0)*Number(t.unit_price||0);e.set(n,(e.get(n)||0)+a)}),Array.from(e,e=>{let[t,r]=e;return{category:t,value:r}}).sort((e,t)=>t.value-e.value).slice(0,10)},[k]),re=(0,a.useMemo)(()=>{const e=new Map,t=m.filter(e=>(e.status||"").toLowerCase().includes("completed")||(e.status||"").toLowerCase().includes("done"));t.forEach(t=>{const r=O(t.created_at);if(!r)return;const n=r.toISOString().slice(0,10);e.set(n,(e.get(n)||0)+Number(t.amount||t.total||0))});const r=[];for(let n=13;n>=0;n--){const t=new Date;t.setDate(t.getDate()-n);const a=t.toISOString().slice(0,10);r.push({date:a.slice(5),revenue:e.get(a)||0})}return r},[m]),ne=(0,a.useMemo)(()=>{const e=new Map,t=x.filter(e=>(e.status||"").toLowerCase().includes("completed")||(e.status||"").toLowerCase().includes("done"));t.forEach(t=>{var r;const n=O(t.created_at||t.assigned_date);if(!n)return;const a=n.toISOString().slice(0,10);e.set(a,(e.get(a)||0)+Number(t.charges||(null===(r=t.service)||void 0===r?void 0:r.charges)||0))});const r=[];for(let n=13;n>=0;n--){const t=new Date;t.setDate(t.getDate()-n);const a=t.toISOString().slice(0,10);r.push({date:a.slice(5),revenue:e.get(a)||0})}return r},[x]),ae=((0,a.useMemo)(()=>k.filter(e=>e.is_sellable_to_guest||e.is_sellable).map(e=>({name:e.name,stock:Number(e.current_stock||0),unitPrice:Number(e.unit_price||0),sellingPrice:Number(e.selling_price||e.unit_price||0),totalValue:Number(e.current_stock||0)*Number(e.selling_price||e.unit_price||0),profitMargin:e.selling_price&&e.unit_price?(e.selling_price-e.unit_price)/e.selling_price*100:0})).sort((e,t)=>t.totalValue-e.totalValue).slice(0,10),[k]),(0,a.useMemo)(()=>{const e=new Map;return f.forEach(t=>{var r;const n=t.category_name||(null===(r=t.category)||void 0===r?void 0:r.name)||"Uncategorized";e.set(n,(e.get(n)||0)+1)}),Array.from(e,e=>{let[t,r]=e;return{category:t,count:r}})},[f])),se=(0,a.useMemo)(()=>{const e=L.total+X.totalRevenue+$.totalRevenue+Z.totalRevenue,t=M.total;return{total:e-t,margin:e>0?(e-t)/e*100:0}},[L,X,$,Z,M]);return e?(0,er.jsx)(xm,{children:(0,er.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-10",children:(0,er.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,er.jsx)("div",{className:"h-8 bg-gray-200 rounded w-56"}),(0,er.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:Array.from({length:4}).map((e,t)=>(0,er.jsx)("div",{className:"h-24 bg-gray-100 rounded-xl"},t))}),(0,er.jsx)("div",{className:"h-64 bg-gray-100 rounded-xl"})]})})}):r?(0,er.jsx)(xm,{children:(0,er.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-10",children:(0,er.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6",children:[(0,er.jsx)("h2",{className:"text-xl font-bold text-red-800 mb-2",children:"Error Loading Dashboard"}),(0,er.jsx)("p",{className:"text-red-600",children:r}),(0,er.jsx)("button",{onClick:()=>{n(null),P()},className:"mt-4 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Retry"})]})})}):(0,er.jsxs)(xm,{children:[(0,er.jsxs)("div",{className:"bubbles-container",children:[(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{})]}),(0,er.jsxs)("div",{className:"relative max-w-[1400px] mx-auto px-2 sm:px-4 py-4 sm:py-6 space-y-4 sm:space-y-6",children:[(0,er.jsxs)("header",{className:"flex items-end justify-between gap-4 flex-wrap",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-800",children:"Orchid Resort Admin Dashboard"}),(0,er.jsx)("p",{className:"text-sm sm:text-base text-gray-500",children:"Overview of bookings, rooms, revenue, expenses & operations"})]}),(0,er.jsxs)("div",{className:"text-xs sm:text-sm text-gray-500",children:["Last updated: ",(new Date).toLocaleString()]})]}),(0,er.jsxs)("section",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-2 sm:gap-4",children:[(0,er.jsx)(zq,{label:"Total Revenue",value:D(L.total+X.totalRevenue+$.totalRevenue+Z.totalRevenue),sub:"All time"}),(0,er.jsx)(zq,{label:"Today Revenue",value:D(L.today+X.todayRevenue+Z.todayRevenue),sub:"Today"}),(0,er.jsx)(zq,{label:"This Month Revenue",value:D(L.month),sub:"Month"}),(0,er.jsx)(zq,{label:"Net Profit",value:D(se.total),sub:"Margin: ".concat(se.margin.toFixed(1),"%")}),(0,er.jsx)(zq,{label:"Total Expenses",value:D(M.total),sub:"All time"}),(0,er.jsx)(zq,{label:"This Month Expenses",value:D(M.month),sub:"Month"})]}),(0,er.jsxs)("section",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-2 sm:gap-4",children:[(0,er.jsx)(zq,{label:"Bookings (Active)",value:"".concat(R.active),sub:"Cancelled: ".concat(R.cancelled)}),(0,er.jsx)(zq,{label:"Package Bookings",value:Z.total,sub:D(Z.totalRevenue)}),(0,er.jsx)(zq,{label:"Total Packages",value:N.length,sub:"Available"}),(0,er.jsx)(zq,{label:"Rooms",value:"".concat(I.occupied,"/").concat(I.total),sub:"Occupied / Total"}),(0,er.jsx)(zq,{label:"Available Rooms",value:I.available,sub:"Ready"}),(0,er.jsx)(zq,{label:"Maintenance Rooms",value:I.maintenance,sub:"Under repair"})]}),(0,er.jsxs)("section",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-2 sm:gap-4",children:[(0,er.jsx)(zq,{label:"Food Orders",value:X.total,sub:"Completed: ".concat(X.completed)}),(0,er.jsx)(zq,{label:"Food Revenue",value:D(X.totalRevenue),sub:"Avg: ".concat(D(X.averageOrderValue))}),(0,er.jsx)(zq,{label:"Food Items",value:f.length,sub:"Menu items"}),(0,er.jsx)(zq,{label:"Services",value:$.totalServices,sub:"Available"}),(0,er.jsx)(zq,{label:"Assigned Services",value:$.totalAssigned,sub:"Completed: ".concat($.completed)}),(0,er.jsx)(zq,{label:"Service Revenue",value:D($.totalRevenue),sub:"Avg: ".concat(D($.averageServiceValue))})]}),(0,er.jsxs)("section",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-2 sm:gap-4",children:[(0,er.jsx)(zq,{label:"Inventory Items",value:Q.totalItems,sub:"Categories: ".concat(Q.categories)}),(0,er.jsx)(zq,{label:"Inventory Value",value:D(Q.totalValue),sub:"Total stock value"}),(0,er.jsx)(zq,{label:"Sellable Items",value:Q.sellableItems,sub:D(Q.totalSellingValue)}),(0,er.jsx)(zq,{label:"Low Stock Items",value:Q.lowStock,sub:"Needs attention"}),(0,er.jsx)(zq,{label:"Out of Stock",value:Q.outOfStock,sub:"Critical"}),(0,er.jsx)(zq,{label:"Employees",value:J.total,sub:"Active: ".concat(J.active)})]}),(0,er.jsxs)("section",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4 sm:gap-6",children:[(0,er.jsx)(Uq,{title:"Revenue (Last 14 days)",children:(0,er.jsx)("div",{className:"h-64",children:(0,er.jsx)(sp,{width:"100%",height:"100%",children:(0,er.jsxs)(DO,{data:F,margin:{top:10,right:10,left:0,bottom:0},children:[(0,er.jsx)("defs",{children:(0,er.jsxs)("linearGradient",{id:"rev",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,er.jsx)("stop",{offset:"5%",stopColor:"#6366F1",stopOpacity:.5}),(0,er.jsx)("stop",{offset:"95%",stopColor:"#6366F1",stopOpacity:.05})]})}),(0,er.jsx)(kI,{strokeDasharray:"3 3"}),(0,er.jsx)(BI,{dataKey:"date"}),(0,er.jsx)(YI,{}),(0,er.jsx)(CR,{}),(0,er.jsx)(QF,{type:"monotone",dataKey:"revenue",stroke:"#6366F1",fillOpacity:1,fill:"url(#rev)"})]})})})}),(0,er.jsx)(Uq,{title:"Payment Methods",children:(0,er.jsx)("div",{className:"h-64",children:(0,er.jsx)(sp,{width:"100%",height:"100%",children:(0,er.jsxs)(aB,{children:[(0,er.jsx)(Uz,{data:z,dataKey:"value",nameKey:"name",outerRadius:90,label:!0,children:z.map((e,t)=>(0,er.jsx)(kB,{fill:Bq[t%Bq.length]},t))}),(0,er.jsx)(CR,{}),(0,er.jsx)(iU,{})]})})})}),(0,er.jsx)(Uq,{title:"Room Occupancy",children:(0,er.jsx)("div",{className:"h-64",children:(0,er.jsx)(sp,{width:"100%",height:"100%",children:(0,er.jsxs)(aB,{children:[(0,er.jsx)(Uz,{data:q,dataKey:"value",nameKey:"name",innerRadius:55,outerRadius:90,label:!0,children:q.map((e,t)=>(0,er.jsx)(kB,{fill:Bq[t%Bq.length]},t))}),(0,er.jsx)(CR,{}),(0,er.jsx)(iU,{})]})})})})]}),(0,er.jsxs)("section",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[(0,er.jsx)(Uq,{title:"Expenses by Type (Top 6)",children:(0,er.jsx)("div",{className:"h-64",children:(0,er.jsx)(sp,{width:"100%",height:"100%",children:(0,er.jsxs)(lU,{data:B,margin:{top:10,right:10,left:0,bottom:0},children:[(0,er.jsx)(kI,{strokeDasharray:"3 3"}),(0,er.jsx)(BI,{dataKey:"type"}),(0,er.jsx)(YI,{}),(0,er.jsx)(CR,{}),(0,er.jsx)(sq,{dataKey:"amount",fill:"#22C55E",radius:[8,8,0,0]})]})})})}),(0,er.jsx)(Uq,{title:"Food Orders by Type",children:(0,er.jsx)("div",{className:"h-64",children:(0,er.jsx)(sp,{width:"100%",height:"100%",children:(0,er.jsxs)(aB,{children:[(0,er.jsx)(Uz,{data:U,dataKey:"value",nameKey:"name",outerRadius:90,label:!0,children:U.map((e,t)=>(0,er.jsx)(kB,{fill:Bq[(t+3)%Bq.length]},t))}),(0,er.jsx)(CR,{}),(0,er.jsx)(iU,{})]})})})}),(0,er.jsx)(Uq,{title:"Service Requests Status",children:(0,er.jsx)("div",{className:"h-64",children:(0,er.jsx)(sp,{width:"100%",height:"100%",children:(0,er.jsxs)(aB,{children:[(0,er.jsx)(Uz,{data:W,dataKey:"value",nameKey:"name",outerRadius:90,label:!0,children:W.map((e,t)=>(0,er.jsx)(kB,{fill:Bq[(t+6)%Bq.length]},t))}),(0,er.jsx)(CR,{}),(0,er.jsx)(iU,{})]})})})})]}),(0,er.jsxs)("section",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:[(0,er.jsx)(Uq,{title:"Food Orders Revenue (Last 14 days)",children:(0,er.jsx)("div",{className:"h-64",children:(0,er.jsx)(sp,{width:"100%",height:"100%",children:(0,er.jsxs)(oq,{data:re,margin:{top:10,right:10,left:0,bottom:0},children:[(0,er.jsx)(kI,{strokeDasharray:"3 3"}),(0,er.jsx)(BI,{dataKey:"date"}),(0,er.jsx)(YI,{}),(0,er.jsx)(CR,{}),(0,er.jsx)(Fq,{type:"monotone",dataKey:"revenue",stroke:"#F59E0B",strokeWidth:2})]})})})}),(0,er.jsx)(Uq,{title:"Services Revenue (Last 14 days)",children:(0,er.jsx)("div",{className:"h-64",children:(0,er.jsx)(sp,{width:"100%",height:"100%",children:(0,er.jsxs)(oq,{data:ne,margin:{top:10,right:10,left:0,bottom:0},children:[(0,er.jsx)(kI,{strokeDasharray:"3 3"}),(0,er.jsx)(BI,{dataKey:"date"}),(0,er.jsx)(YI,{}),(0,er.jsx)(CR,{}),(0,er.jsx)(Fq,{type:"monotone",dataKey:"revenue",stroke:"#10B981",strokeWidth:2})]})})})}),(0,er.jsx)(Uq,{title:"Packages by Booking",children:(0,er.jsx)("div",{className:"h-64",children:(0,er.jsx)(sp,{width:"100%",height:"100%",children:(0,er.jsxs)(lU,{data:V,margin:{top:10,right:10,left:0,bottom:0},children:[(0,er.jsx)(kI,{strokeDasharray:"3 3"}),(0,er.jsx)(BI,{dataKey:"name"}),(0,er.jsx)(YI,{}),(0,er.jsx)(CR,{}),(0,er.jsx)(sq,{dataKey:"count",fill:"#A78BFA",radius:[8,8,0,0]})]})})})})]}),(0,er.jsxs)("section",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:[(0,er.jsx)(Uq,{title:"Expenses by Category",children:(0,er.jsx)("div",{className:"h-64",children:(0,er.jsx)(sp,{width:"100%",height:"100%",children:(0,er.jsxs)(lU,{data:ee.slice(0,8),margin:{top:10,right:10,left:0,bottom:60},children:[(0,er.jsx)(kI,{strokeDasharray:"3 3"}),(0,er.jsx)(BI,{dataKey:"category",angle:-45,textAnchor:"end",height:80}),(0,er.jsx)(YI,{}),(0,er.jsx)(CR,{}),(0,er.jsx)(sq,{dataKey:"amount",fill:"#EF4444",radius:[8,8,0,0]})]})})})}),(0,er.jsx)(Uq,{title:"Inventory Value by Category",children:(0,er.jsx)("div",{className:"h-64",children:(0,er.jsx)(sp,{width:"100%",height:"100%",children:(0,er.jsxs)(lU,{data:te,margin:{top:10,right:10,left:0,bottom:60},children:[(0,er.jsx)(kI,{strokeDasharray:"3 3"}),(0,er.jsx)(BI,{dataKey:"category",angle:-45,textAnchor:"end",height:80}),(0,er.jsx)(YI,{}),(0,er.jsx)(CR,{}),(0,er.jsx)(sq,{dataKey:"value",fill:"#06B6D4",radius:[8,8,0,0]})]})})})}),(0,er.jsx)(Uq,{title:"Food Items by Category",children:(0,er.jsx)("div",{className:"h-64",children:(0,er.jsx)(sp,{width:"100%",height:"100%",children:(0,er.jsxs)(aB,{children:[(0,er.jsx)(Uz,{data:ae,dataKey:"count",nameKey:"category",outerRadius:90,label:!0,children:ae.map((e,t)=>(0,er.jsx)(kB,{fill:Bq[t%Bq.length]},t))}),(0,er.jsx)(CR,{}),(0,er.jsx)(iU,{})]})})})})]}),(0,er.jsxs)("section",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4 sm:gap-6",children:[(0,er.jsx)(Uq,{title:"Latest Bookings",children:(0,er.jsx)("div",{className:"overflow-x-auto w-full -mx-2 sm:mx-0",children:(0,er.jsxs)("table",{className:"min-w-full text-xs sm:text-sm",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"bg-gray-50 text-gray-700",children:[(0,er.jsx)(qq,{children:"Guest"}),(0,er.jsx)(qq,{className:"hidden sm:table-cell",children:"Room"}),(0,er.jsx)(qq,{className:"hidden lg:table-cell",children:"Check-in"}),(0,er.jsx)(qq,{className:"hidden lg:table-cell",children:"Check-out"}),(0,er.jsx)(qq,{children:"Status"})]})}),(0,er.jsx)("tbody",{children:H.map(e=>{var t,r;return(0,er.jsxs)("tr",{className:"border-t hover:bg-gray-50",children:[(0,er.jsx)(Wq,{className:"text-xs sm:text-sm",children:e.guest_name||e.guest||"-"}),(0,er.jsx)(Wq,{className:"text-xs sm:text-sm hidden sm:table-cell",children:null!==(t=e.room)&&void 0!==t&&t.number?"#".concat(e.room.number).concat(null!==(r=e.room)&&void 0!==r&&r.type?" (".concat(e.room.type,")"):""):e.room_number||"-"}),(0,er.jsx)(Wq,{className:"text-xs sm:text-sm hidden lg:table-cell",children:e.check_in}),(0,er.jsx)(Wq,{className:"text-xs sm:text-sm hidden lg:table-cell",children:e.check_out}),(0,er.jsx)(Wq,{children:(0,er.jsx)("span",{className:"px-2 py-1 text-xs rounded font-semibold ".concat(String(e.status||"").toLowerCase().includes("cancel")?"bg-red-100 text-red-600":"bg-green-100 text-green-700"),children:e.status})})]},e.id)})})]})})}),(0,er.jsx)(Uq,{title:"Recent Payments (Billing)",children:(0,er.jsx)("div",{className:"overflow-x-auto w-full -mx-2 sm:mx-0",children:(0,er.jsxs)("table",{className:"min-w-full text-xs sm:text-sm",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"bg-gray-50 text-gray-700",children:[(0,er.jsx)(qq,{children:"Guest"}),(0,er.jsx)(qq,{className:"hidden sm:table-cell",children:"Room"}),(0,er.jsx)(qq,{className:"hidden md:table-cell",children:"Method"}),(0,er.jsx)(qq,{children:"Status"}),(0,er.jsx)(qq,{className:"text-right",children:"Total"}),(0,er.jsx)(qq,{className:"hidden lg:table-cell",children:"Created"})]})}),(0,er.jsx)("tbody",{children:G.map(e=>{var t;return(0,er.jsxs)("tr",{className:"border-t hover:bg-gray-50",children:[(0,er.jsx)(Wq,{className:"text-xs sm:text-sm",children:e.guest_name||"-"}),(0,er.jsx)(Wq,{className:"text-xs sm:text-sm hidden sm:table-cell",children:e.room_number||"-"}),(0,er.jsx)(Wq,{className:"text-xs sm:text-sm capitalize hidden md:table-cell",children:String(e.payment_method||"").replace("_"," ")}),(0,er.jsx)(Wq,{className:"uppercase",children:(0,er.jsx)("span",{className:"px-2 py-1 text-xs rounded font-semibold ".concat("paid"===String(e.payment_status||"").toLowerCase()?"bg-green-100 text-green-700":"pending"===String(e.payment_status||"").toLowerCase()?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"),children:e.payment_status})}),(0,er.jsx)(Wq,{className:"text-right font-medium text-xs sm:text-sm",children:D(e.grand_total)}),(0,er.jsx)(Wq,{className:"text-xs sm:text-sm hidden lg:table-cell",children:(null===(t=O(e.created_at))||void 0===t?void 0:t.toLocaleDateString())||"-"})]},e.id)})})]})})})]}),(0,er.jsxs)("section",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[(0,er.jsx)(Uq,{title:"Latest Packages",children:(0,er.jsx)("div",{className:"overflow-x-auto w-full",children:(0,er.jsxs)("table",{className:"min-w-full text-sm",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"bg-gray-50 text-gray-700",children:[(0,er.jsx)(qq,{children:"Title"}),(0,er.jsx)(qq,{children:"Price"}),(0,er.jsx)(qq,{children:"Images"}),(0,er.jsx)(qq,{children:"Created"})]})}),(0,er.jsx)("tbody",{children:Y.map(e=>{var t,r;return(0,er.jsxs)("tr",{className:"border-t hover:bg-gray-50",children:[(0,er.jsx)(Wq,{children:e.title||"-"}),(0,er.jsx)(Wq,{children:D(e.price)}),(0,er.jsx)(Wq,{children:(null===(t=e.images)||void 0===t?void 0:t.length)||0}),(0,er.jsx)(Wq,{children:(null===(r=O(e.created_at))||void 0===r?void 0:r.toLocaleString())||"-"})]},e.id)})})]})})}),(0,er.jsx)(Uq,{title:"Recent Food Orders",children:(0,er.jsx)("div",{className:"overflow-x-auto w-full",children:(0,er.jsxs)("table",{className:"min-w-full text-sm",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"bg-gray-50 text-gray-700",children:[(0,er.jsx)(qq,{children:"Type"}),(0,er.jsx)(qq,{children:"Items"}),(0,er.jsx)(qq,{children:"Status"}),(0,er.jsx)(qq,{className:"text-right",children:"Amount"}),(0,er.jsx)(qq,{children:"Created"})]})}),(0,er.jsx)("tbody",{children:K.map((e,t)=>{var r;return(0,er.jsxs)("tr",{className:"border-t hover:bg-gray-50",children:[(0,er.jsx)(Wq,{children:e.type||e.category||"-"}),(0,er.jsx)(Wq,{children:Array.isArray(e.items)?e.items.length:e.quantity||"-"}),(0,er.jsx)(Wq,{children:(0,er.jsx)("span",{className:"px-2 py-1 text-xs rounded font-semibold ".concat(String(e.status||"").toLowerCase().includes("cancel")?"bg-red-100 text-red-600":"bg-blue-100 text-blue-700"),children:e.status||"NEW"})}),(0,er.jsx)(Wq,{className:"text-right",children:D(e.amount||e.total||0)}),(0,er.jsx)(Wq,{children:(null===(r=O(e.created_at))||void 0===r?void 0:r.toLocaleString())||"-"})]},e.id||t)})})]})})})]}),(0,er.jsx)("section",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:(0,er.jsx)(Uq,{title:"Quick Expense Peek",children:(0,er.jsx)("div",{className:"overflow-x-auto w-full",children:(0,er.jsxs)("table",{className:"min-w-full text-sm",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"bg-gray-50 text-gray-700",children:[(0,er.jsx)(qq,{children:"Type"}),(0,er.jsx)(qq,{children:"Note"}),(0,er.jsx)(qq,{className:"text-right",children:"Amount"}),(0,er.jsx)(qq,{children:"Created"})]})}),(0,er.jsx)("tbody",{children:[...u].sort((e,t)=>new Date(t.created_at)-new Date(e.created_at)).slice(0,8).map((e,t)=>{var r;return(0,er.jsxs)("tr",{className:"border-t hover:bg-gray-50",children:[(0,er.jsx)(Wq,{children:e.type||e.category||"-"}),(0,er.jsx)(Wq,{className:"truncate max-w-[260px]",title:e.note||e.description||"",children:e.note||e.description||"-"}),(0,er.jsx)(Wq,{className:"text-right",children:D(e.amount||e.charges||0)}),(0,er.jsx)(Wq,{children:(null===(r=O(e.created_at))||void 0===r?void 0:r.toLocaleString())||"-"})]},e.id||t)})})]})})})})]})]})},Hq=Xh("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Gq=Xh("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Kq=Xh("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Yq=Xh("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Xq=Xh("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]),Qq=Xh("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),$q=[{label:"Dashboard",value:"/dashboard"},{label:"Account",value:"/account",tabs:[{label:"Reports Dashboard",value:"/account/reports"},{label:"Chart of Accounts",value:"/account/chart-of-accounts"},{label:"Journal Entries",value:"/account/journal-entries"},{label:"Trial Balance",value:"/account/trial-balance"},{label:"Auto Report",value:"/account/auto-report"},{label:"Comprehensive Report",value:"/account/comprehensive-report"},{label:"GST Reports",value:"/account/gst-reports"}]},{label:"Bookings",value:"/bookings"},{label:"Rooms",value:"/rooms"},{label:"Services",value:"/services",tabs:[{label:"Dashboard",value:"/services/dashboard"},{label:"Create Service",value:"/services/create"},{label:"Assign Service",value:"/services/assign"},{label:"Assigned Services",value:"/services/assigned"},{label:"Service Requests",value:"/services/requests"},{label:"Report",value:"/services/report"}]},{label:"Food Orders",value:"/food-orders",tabs:[{label:"Dashboard",value:"/food-orders/dashboard"},{label:"Orders",value:"/food-orders/orders"},{label:"Requests",value:"/food-orders/requests"},{label:"Management",value:"/food-orders/management"}]},{label:"Employee Management",value:"/employee-management",tabs:[{label:"Overview",value:"/employee-management/overview"},{label:"Directory",value:"/employee-management/directory"},{label:"Attendance",value:"/employee-management/attendance"},{label:"Leave",value:"/employee-management/leave"},{label:"Reports",value:"/employee-management/reports"},{label:"Status",value:"/employee-management/status"},{label:"Activity",value:"/employee-management/activity"}]},{label:"Role",value:"/roles"},{label:"Expenses",value:"/expenses"},{label:"Food Management",value:"/food-categories",tabs:[{label:"Categories",value:"/food-categories"},{label:"Food Items",value:"/food-items"}]},{label:"Billing",value:"/billing",tabs:[{label:"Checkout",value:"/billing/checkout"},{label:"History",value:"/billing/history"}]},{label:"WEB Management",value:"/Userfrontend_data",tabs:[{label:"Banners",value:"/Userfrontend_data/banners"},{label:"Gallery",value:"/Userfrontend_data/gallery"},{label:"Reviews",value:"/Userfrontend_data/reviews"},{label:"Resort Info",value:"/Userfrontend_data/resortInfo"},{label:"Experiences",value:"/Userfrontend_data/signatureExperiences"},{label:"Weddings",value:"/Userfrontend_data/planWeddings"},{label:"Attractions",value:"/Userfrontend_data/nearbyAttractions"},{label:"Attraction Banners",value:"/Userfrontend_data/nearbyAttractionBanners"}]},{label:"Packages",value:"/package"},{label:"Reports",value:"/report"},{label:"GuestProfiles",value:"/guestprofiles"},{label:"Inventory",value:"/inventory",tabs:[{label:"Items",value:"/inventory/items"},{label:"Categories",value:"/inventory/categories"},{label:"Vendors",value:"/inventory/vendors"},{label:"Purchases",value:"/inventory/purchases"},{label:"Transactions",value:"/inventory/transactions"},{label:"Requisitions",value:"/inventory/requisitions"},{label:"Issues",value:"/inventory/issues"},{label:"Waste",value:"/inventory/waste"},{label:"Locations",value:"/inventory/locations"},{label:"Assets",value:"/inventory/assets"},{label:"Location Stock",value:"/inventory/location-stock"},{label:"Recipes",value:"/inventory/recipe"}]},{label:"Settings",value:"/settings",tabs:[{label:"System Settings",value:"/settings/system"},{label:"Legal Documents",value:"/settings/legal"}]}],Jq=["admin"],Zq=()=>{const[e,t]=(0,a.useState)({name:"",permissions:[]}),[r,n]=(0,a.useState)([]),[s,i]=(0,a.useState)(!1),[o,l]=(0,a.useState)(""),[c,d]=(0,a.useState)(""),[u,h]=(0,a.useState)(null),[m,p]=(0,a.useState)(!1),[f,g]=(0,a.useState)(null),[x,y]=(0,a.useState)({}),v=async()=>{try{const e=await Ia.get("/roles");n(e.data)}catch(e){console.error("Failed to fetch roles",e)}};(0,a.useEffect)(()=>{v()},[]);const b=e=>{t(t=>{const r=t.permissions.includes(e)?t.permissions.filter(t=>t!==e):[...t.permissions,e];return Be(Be({},t),{},{permissions:r})})};return(0,er.jsxs)(xm,{children:[(0,er.jsxs)("div",{className:"max-w-6xl mx-auto p-8 bg-gray-50 rounded-2xl shadow-lg space-y-10",children:[(0,er.jsx)("h2",{className:"text-4xl font-extrabold text-blue-900 text-center tracking-tight",children:"Role Management"}),c&&(0,er.jsxs)("div",{className:"flex items-center gap-2 p-4 text-sm font-medium text-green-700 bg-green-100 rounded-lg",children:[(0,er.jsx)(Hq,{size:20}),c]}),o&&(0,er.jsxs)("div",{className:"flex items-center gap-2 p-4 text-sm font-medium text-red-700 bg-red-100 rounded-lg",children:[(0,er.jsx)(Gq,{size:20}),o]}),(0,er.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-md space-y-6",children:[(0,er.jsx)("h3",{className:"text-2xl font-semibold text-blue-800 border-b pb-4",children:u?"Edit Role":"Create New Role"}),(0,er.jsxs)("form",{onSubmit:async r=>{r.preventDefault(),i(!0),l(""),d("");try{const r=Be(Be({},e),{},{permissions:JSON.stringify(e.permissions)});u?(await Ia.put("/roles/".concat(u),r),d("Role updated successfully!")):(await Ia.post("/roles",r),d("Role created successfully!")),t({name:"",permissions:[]}),h(null),await v()}catch(n){u&&n.response&&404===n.response.status?(l("Failed to update role. It may have been deleted by another user."),h(null),t({name:"",permissions:[]}),await v()):l(u?"Failed to update role":"Failed to create role")}i(!1)},className:"space-y-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{htmlFor:"roleName",className:"block text-sm font-semibold text-gray-700 mb-1",children:"Role Name"}),(0,er.jsx)("input",{id:"roleName",type:"text",name:"name",value:e.name,onChange:e=>{const{name:r,value:n}=e.target;t(e=>Be(Be({},e),{},{[r]:n.trimStart()}))},required:!0,placeholder:"e.g., Administrator, Manager, Staff",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Permissions"}),(0,er.jsx)("div",{className:"space-y-2 p-4 border rounded-lg bg-gray-50 max-h-96 overflow-y-auto",children:$q.map(t=>(0,er.jsxs)("div",{className:"space-y-1",children:[(0,er.jsxs)("div",{className:"flex items-center gap-2",children:[t.tabs&&(0,er.jsx)("button",{type:"button",onClick:()=>(e=>{y(t=>Be(Be({},t),{},{[e]:!t[e]}))})(t.value),className:"text-gray-500 hover:text-gray-700",children:x[t.value]?(0,er.jsx)(Kq,{size:16}):(0,er.jsx)(Yq,{size:16})}),(0,er.jsxs)("label",{className:"flex items-center gap-2 text-sm text-gray-800 cursor-pointer font-medium",children:[(0,er.jsx)("input",{type:"checkbox",checked:e.permissions.includes(t.value),onChange:()=>b(t.value),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.label]})]}),t.tabs&&x[t.value]&&(0,er.jsx)("div",{className:"ml-8 space-y-1 border-l-2 border-gray-200 pl-4",children:t.tabs.map(t=>(0,er.jsxs)("label",{className:"flex items-center gap-2 text-sm text-gray-600 cursor-pointer",children:[(0,er.jsx)("input",{type:"checkbox",checked:e.permissions.includes(t.value),onChange:()=>b(t.value),className:"h-3.5 w-3.5 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.label]},t.value))})]},t.value))})]}),(0,er.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,er.jsx)("button",{type:"submit",disabled:s,className:"flex-1 py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-lg shadow-lg transition-transform transform hover:scale-105 disabled:bg-gray-400 disabled:cursor-not-allowed",children:s?"Saving...":u?"Update Role":"Create Role"}),u&&(0,er.jsx)("button",{type:"button",onClick:()=>{h(null),t({name:"",permissions:[]}),d(""),l("")},className:"flex-1 py-3 bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold rounded-lg shadow-lg transition-transform transform hover:scale-105",children:"Cancel"})]})]})]}),(0,er.jsxs)("div",{className:"space-y-4 bg-white p-6 rounded-xl shadow-md",children:[(0,er.jsx)("h3",{className:"text-2xl font-semibold text-blue-800 border-b pb-4",children:"Existing Roles"}),(0,er.jsx)("div",{className:"overflow-x-auto rounded-lg border border-gray-200 shadow-sm",children:(0,er.jsxs)("table",{className:"min-w-full text-sm text-left",children:[(0,er.jsx)("thead",{className:"bg-gray-100 text-gray-700 uppercase tracking-wider",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"px-6 py-3",children:"#"}),(0,er.jsx)("th",{className:"px-6 py-3",children:"Role Name"}),(0,er.jsx)("th",{className:"px-6 py-3 text-right",children:"Actions"})]})}),(0,er.jsx)("tbody",{children:r.length>0?r.map(e=>{const r=Jq.includes(e.name.toLowerCase());return(0,er.jsxs)("tr",{className:"border-t border-gray-200 hover:bg-gray-50 transition-colors group",children:[(0,er.jsx)("td",{className:"px-6 py-4 font-mono text-gray-500",children:e.id}),(0,er.jsx)("td",{className:"px-6 py-4 font-medium text-gray-900",children:e.name}),(0,er.jsx)("td",{className:"px-6 py-4 text-right",children:(0,er.jsxs)("div",{className:"flex items-center justify-end gap-4 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,er.jsx)("button",{onClick:()=>(e=>{h(e.id),t({name:e.name,permissions:e.permissions||[]}),d(""),l(""),window.scrollTo({top:0,behavior:"smooth"})})(e),className:"text-blue-600 hover:text-blue-800 transition-colors",title:"Edit Role",children:(0,er.jsx)(Xq,{size:18})}),(0,er.jsx)("button",{onClick:()=>(e=>{g(e),p(!0)})(e),className:"transition-colors ".concat(r?"text-gray-400 cursor-not-allowed":"text-red-600 hover:text-red-800"),title:r?"This role cannot be deleted":"Delete Role",disabled:r,children:(0,er.jsx)(Qq,{size:18})})]})})]},e.id)}):(0,er.jsx)("tr",{children:(0,er.jsx)("td",{colSpan:"3",className:"text-center text-gray-400 py-6",children:"No roles found"})})})]})})]})]}),m&&(0,er.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-50",children:(0,er.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-2xl max-w-sm text-center space-y-4",children:[(0,er.jsx)("h4",{className:"text-lg font-bold text-gray-800",children:"Confirm Deletion"}),(0,er.jsxs)("p",{className:"text-gray-600",children:['Are you sure you want to delete the role "',(0,er.jsx)("span",{className:"font-semibold",children:null===f||void 0===f?void 0:f.name}),'"? This action cannot be undone.']}),(0,er.jsxs)("div",{className:"flex justify-center gap-4 mt-4",children:[(0,er.jsx)("button",{onClick:()=>{g(null),p(!1)},className:"px-6 py-2 border rounded-lg text-gray-700 hover:bg-gray-100 transition",children:"Cancel"}),(0,er.jsx)("button",{onClick:async()=>{if(f){i(!0),l(""),d(""),p(!1);try{await Ia.delete("/roles/".concat(f.id)),await v(),d("Role deleted successfully!")}catch(e){e.response&&404===e.response.status?l("Failed to delete role. It may have already been deleted."):l("Failed to delete role. Please try again.")}finally{i(!1),g(null)}}},className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition",children:"Delete"})]})]})})]})},eW=["pcs","nos","unit","units","piece","pieces","item","items","box","boxes","bottle","bottles","can","cans","packet","packets","pack","packs"],tW=e=>{if(!e)return!1;const t=String(e).toLowerCase().trim();return eW.includes(t)},rW=(e,t)=>{let r=parseFloat(e)||0;return tW(t)&&(r=Math.round(r)),r};var nW=r(5751);function aW(e){return e+.5|0}const sW=(e,t,r)=>Math.max(Math.min(e,r),t);function iW(e){return sW(aW(2.55*e),0,255)}function oW(e){return sW(aW(255*e),0,255)}function lW(e){return sW(aW(e/2.55)/100,0,1)}function cW(e){return sW(aW(100*e),0,100)}const dW={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},uW=[..."0123456789ABCDEF"],hW=e=>uW[15&e],mW=e=>uW[(240&e)>>4]+uW[15&e],pW=e=>(240&e)>>4===(15&e);function fW(e){var t=(e=>pW(e.r)&&pW(e.g)&&pW(e.b)&&pW(e.a))(e)?hW:mW;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const gW=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function xW(e,t,r){const n=t*Math.min(r,1-r),a=function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return r-n*Math.max(Math.min(a-3,9-a,1),-1)};return[a(0),a(8),a(4)]}function yW(e,t,r){const n=function(n){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(n+e/60)%6;return r-r*t*Math.max(Math.min(a,4-a,1),0)};return[n(5),n(3),n(1)]}function vW(e,t,r){const n=xW(e,1,.5);let a;for(t+r>1&&(a=1/(t+r),t*=a,r*=a),a=0;a<3;a++)n[a]*=1-t-r,n[a]+=t;return n}function bW(e){const t=e.r/255,r=e.g/255,n=e.b/255,a=Math.max(t,r,n),s=Math.min(t,r,n),i=(a+s)/2;let o,l,c;return a!==s&&(c=a-s,l=i>.5?c/(2-a-s):c/(a+s),o=function(e,t,r,n,a){return e===a?(t-r)/n+(t<r?6:0):t===a?(r-e)/n+2:(e-t)/n+4}(t,r,n,c,a),o=60*o+.5),[0|o,l||0,i]}function jW(e,t,r,n){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,r,n)).map(oW)}function wW(e,t,r){return jW(xW,e,t,r)}function NW(e){return(e%360+360)%360}function _W(e){const t=gW.exec(e);let r,n=255;if(!t)return;t[5]!==r&&(n=t[6]?iW(+t[5]):oW(+t[5]));const a=NW(+t[2]),s=+t[3]/100,i=+t[4]/100;return r="hwb"===t[1]?function(e,t,r){return jW(vW,e,t,r)}(a,s,i):"hsv"===t[1]?function(e,t,r){return jW(yW,e,t,r)}(a,s,i):wW(a,s,i),{r:r[0],g:r[1],b:r[2],a:n}}const kW={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},SW={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let AW;function CW(e){AW||(AW=function(){const e={},t=Object.keys(SW),r=Object.keys(kW);let n,a,s,i,o;for(n=0;n<t.length;n++){for(i=o=t[n],a=0;a<r.length;a++)s=r[a],o=o.replace(s,kW[s]);s=parseInt(SW[i],16),e[o]=[s>>16&255,s>>8&255,255&s]}return e}(),AW.transparent=[0,0,0,0]);const t=AW[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const EW=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const TW=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,PW=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function OW(e,t,r){if(e){let n=bW(e);n[t]=Math.max(0,Math.min(n[t]+n[t]*r,0===t?360:1)),n=wW(n),e.r=n[0],e.g=n[1],e.b=n[2]}}function DW(e,t){return e?Object.assign(t||{},e):e}function IW(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=oW(e[3]))):(t=DW(e,{r:0,g:0,b:0,a:1})).a=oW(t.a),t}function LW(e){return"r"===e.charAt(0)?function(e){const t=EW.exec(e);let r,n,a,s=255;if(t){if(t[7]!==r){const e=+t[7];s=t[8]?iW(e):sW(255*e,0,255)}return r=+t[1],n=+t[3],a=+t[5],r=255&(t[2]?iW(r):sW(r,0,255)),n=255&(t[4]?iW(n):sW(n,0,255)),a=255&(t[6]?iW(a):sW(a,0,255)),{r:r,g:n,b:a,a:s}}}(e):_W(e)}class MW{constructor(e){if(e instanceof MW)return e;const t=typeof e;let r;"object"===t?r=IW(e):"string"===t&&(r=function(e){var t,r=e.length;return"#"===e[0]&&(4===r||5===r?t={r:255&17*dW[e[1]],g:255&17*dW[e[2]],b:255&17*dW[e[3]],a:5===r?17*dW[e[4]]:255}:7!==r&&9!==r||(t={r:dW[e[1]]<<4|dW[e[2]],g:dW[e[3]]<<4|dW[e[4]],b:dW[e[5]]<<4|dW[e[6]],a:9===r?dW[e[7]]<<4|dW[e[8]]:255})),t}(e)||CW(e)||LW(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=DW(this._rgb);return e&&(e.a=lW(e.a)),e}set rgb(e){this._rgb=IW(e)}rgbString(){return this._valid?function(e){return e&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(lW(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")"))}(this._rgb):void 0}hexString(){return this._valid?fW(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=bW(e),r=t[0],n=cW(t[1]),a=cW(t[2]);return e.a<255?"hsla(".concat(r,", ").concat(n,"%, ").concat(a,"%, ").concat(lW(e.a),")"):"hsl(".concat(r,", ").concat(n,"%, ").concat(a,"%)")}(this._rgb):void 0}mix(e,t){if(e){const r=this.rgb,n=e.rgb;let a;const s=t===a?.5:t,i=2*s-1,o=r.a-n.a,l=((i*o===-1?i:(i+o)/(1+i*o))+1)/2;a=1-l,r.r=255&l*r.r+a*n.r+.5,r.g=255&l*r.g+a*n.g+.5,r.b=255&l*r.b+a*n.b+.5,r.a=s*r.a+(1-s)*n.a,this.rgb=r}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,r){const n=PW(lW(e.r)),a=PW(lW(e.g)),s=PW(lW(e.b));return{r:oW(TW(n+r*(PW(lW(t.r))-n))),g:oW(TW(a+r*(PW(lW(t.g))-a))),b:oW(TW(s+r*(PW(lW(t.b))-s))),a:e.a+r*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new MW(this.rgb)}alpha(e){return this._rgb.a=oW(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=aW(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return OW(this._rgb,2,e),this}darken(e){return OW(this._rgb,2,-e),this}saturate(e){return OW(this._rgb,1,e),this}desaturate(e){return OW(this._rgb,1,-e),this}rotate(e){return function(e,t){var r=bW(e);r[0]=NW(r[0]+t),r=wW(r),e.r=r[0],e.g=r[1],e.b=r[2]}(this._rgb,e),this}}function RW(){}const FW=(()=>{let e=0;return()=>e++})();function BW(e){return null===e||void 0===e}function zW(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function UW(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function qW(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function WW(e,t){return qW(e)?e:t}function VW(e,t){return"undefined"===typeof e?t:e}const HW=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function GW(e,t,r){if(e&&"function"===typeof e.call)return e.apply(r,t)}function KW(e,t,r,n){let a,s,i;if(zW(e))if(s=e.length,n)for(a=s-1;a>=0;a--)t.call(r,e[a],a);else for(a=0;a<s;a++)t.call(r,e[a],a);else if(UW(e))for(i=Object.keys(e),s=i.length,a=0;a<s;a++)t.call(r,e[i[a]],i[a])}function YW(e,t){let r,n,a,s;if(!e||!t||e.length!==t.length)return!1;for(r=0,n=e.length;r<n;++r)if(a=e[r],s=t[r],a.datasetIndex!==s.datasetIndex||a.index!==s.index)return!1;return!0}function XW(e){if(zW(e))return e.map(XW);if(UW(e)){const t=Object.create(null),r=Object.keys(e),n=r.length;let a=0;for(;a<n;++a)t[r[a]]=XW(e[r[a]]);return t}return e}function QW(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function $W(e,t,r,n){if(!QW(e))return;const a=t[e],s=r[e];UW(a)&&UW(s)?JW(a,s,n):t[e]=XW(s)}function JW(e,t,r){const n=zW(t)?t:[t],a=n.length;if(!UW(e))return e;const s=(r=r||{}).merger||$W;let i;for(let o=0;o<a;++o){if(i=n[o],!UW(i))continue;const t=Object.keys(i);for(let n=0,a=t.length;n<a;++n)s(t[n],e,i,r)}return e}function ZW(e,t){return JW(e,t,{merger:eV})}function eV(e,t,r){if(!QW(e))return;const n=t[e],a=r[e];UW(n)&&UW(a)?ZW(n,a):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=XW(a))}const tV={"":e=>e,x:e=>e.x,y:e=>e.y};function rV(e,t){const r=tV[t]||(tV[t]=function(e){const t=function(e){const t=e.split("."),r=[];let n="";for(const a of t)n+=a,n.endsWith("\\")?n=n.slice(0,-1)+".":(r.push(n),n="");return r}(e);return e=>{for(const r of t){if(""===r)break;e=e&&e[r]}return e}}(t));return r(e)}function nV(e){return e.charAt(0).toUpperCase()+e.slice(1)}const aV=e=>"undefined"!==typeof e,sV=e=>"function"===typeof e,iV=(e,t)=>{if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0};const oV=Math.PI,lV=2*oV,cV=lV+oV,dV=Number.POSITIVE_INFINITY,uV=oV/180,hV=oV/2,mV=oV/4,pV=2*oV/3,fV=Math.log10,gV=Math.sign;function xV(e,t,r){return Math.abs(e-t)<r}function yV(e){const t=Math.round(e);e=xV(e,t,e/1e3)?t:e;const r=Math.pow(10,Math.floor(fV(e))),n=e/r;return(n<=1?1:n<=2?2:n<=5?5:10)*r}function vV(e){return!function(e){return"symbol"===typeof e||"object"===typeof e&&null!==e&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function bV(e,t,r){let n,a,s;for(n=0,a=e.length;n<a;n++)s=e[n][r],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function jV(e){return e*(oV/180)}function wV(e){return e*(180/oV)}function NV(e){if(!qW(e))return;let t=1,r=0;for(;Math.round(e*t)/t!==e;)t*=10,r++;return r}function _V(e,t){const r=t.x-e.x,n=t.y-e.y,a=Math.sqrt(r*r+n*n);let s=Math.atan2(n,r);return s<-.5*oV&&(s+=lV),{angle:s,distance:a}}function kV(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function SV(e,t){return(e-t+cV)%lV-oV}function AV(e){return(e%lV+lV)%lV}function CV(e,t,r,n){const a=AV(e),s=AV(t),i=AV(r),o=AV(s-a),l=AV(i-a),c=AV(a-s),d=AV(a-i);return a===s||a===i||n&&s===i||o>l&&c<d}function EV(e,t,r){return Math.max(t,Math.min(r,e))}function TV(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,r)-n&&e<=Math.max(t,r)+n}function PV(e,t,r){r=r||(r=>e[r]<t);let n,a=e.length-1,s=0;for(;a-s>1;)n=s+a>>1,r(n)?s=n:a=n;return{lo:s,hi:a}}const OV=(e,t,r,n)=>PV(e,r,n?n=>{const a=e[n][t];return a<r||a===r&&e[n+1][t]===r}:n=>e[n][t]<r),DV=(e,t,r)=>PV(e,r,n=>e[n][t]>=r);const IV=["push","pop","shift","splice","unshift"];function LV(e,t){const r=e._chartjs;if(!r)return;const n=r.listeners,a=n.indexOf(t);-1!==a&&n.splice(a,1),n.length>0||(IV.forEach(t=>{delete e[t]}),delete e._chartjs)}function MV(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const RV="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function FV(e,t){let r=[],n=!1;return function(){for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];r=s,n||(n=!0,RV.call(window,()=>{n=!1,e.apply(t,r)}))}}const BV=e=>"start"===e?"left":"end"===e?"right":"center",zV=(e,t,r)=>"start"===e?t:"end"===e?r:(t+r)/2;function UV(e,t,r){const n=t.length;let a=0,s=n;if(e._sorted){const{iScale:i,vScale:o,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,d=i.axis,{min:u,max:h,minDefined:m,maxDefined:p}=i.getUserBounds();if(m){if(a=Math.min(OV(l,d,u).lo,r?n:OV(t,d,i.getPixelForValue(u)).lo),c){const e=l.slice(0,a+1).reverse().findIndex(e=>!BW(e[o.axis]));a-=Math.max(0,e)}a=EV(a,0,n-1)}if(p){let e=Math.max(OV(l,i.axis,h,!0).hi+1,r?0:OV(t,d,i.getPixelForValue(h),!0).hi+1);if(c){const t=l.slice(e-1).findIndex(e=>!BW(e[o.axis]));e+=Math.max(0,t)}s=EV(e,a,n)-a}else s=n-a}return{start:a,count:s}}function qV(e){const{xScale:t,yScale:r,_scaleRanges:n}=e,a={xmin:t.min,xmax:t.max,ymin:r.min,ymax:r.max};if(!n)return e._scaleRanges=a,!0;const s=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==r.min||n.ymax!==r.max;return Object.assign(n,a),s}const WV=e=>0===e||1===e,VV=(e,t,r)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*lV/r),HV=(e,t,r)=>Math.pow(2,-10*e)*Math.sin((e-t)*lV/r)+1,GV={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*hV),easeOutSine:e=>Math.sin(e*hV),easeInOutSine:e=>-.5*(Math.cos(oV*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>WV(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>WV(e)?e:VV(e,.075,.3),easeOutElastic:e=>WV(e)?e:HV(e,.075,.3),easeInOutElastic(e){const t=.1125;return WV(e)?e:e<.5?.5*VV(2*e,t,.45):.5+.5*HV(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-GV.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,r=2.75;return e<1/r?t*e*e:e<2/r?t*(e-=1.5/r)*e+.75:e<2.5/r?t*(e-=2.25/r)*e+.9375:t*(e-=2.625/r)*e+.984375},easeInOutBounce:e=>e<.5?.5*GV.easeInBounce(2*e):.5*GV.easeOutBounce(2*e-1)+.5};function KV(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function YV(e){return KV(e)?e:new MW(e)}function XV(e){return KV(e)?e:new MW(e).saturate(.5).darken(.1).hexString()}const QV=["x","y","borderWidth","radius","tension"],$V=["color","borderColor","backgroundColor"];const JV=new Map;function ZV(e,t,r){return function(e,t){t=t||{};const r=e+JSON.stringify(t);let n=JV.get(r);return n||(n=new Intl.NumberFormat(e,t),JV.set(r,n)),n}(t,r).format(e)}const eH={values:e=>zW(e)?e:""+e,numeric(e,t,r){if(0===e)return"0";const n=this.chart.options.locale;let a,s=e;if(r.length>1){const t=Math.max(Math.abs(r[0].value),Math.abs(r[r.length-1].value));(t<1e-4||t>1e15)&&(a="scientific"),s=function(e,t){let r=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(r)>=1&&e!==Math.floor(e)&&(r=e-Math.floor(e));return r}(e,r)}const i=fV(Math.abs(s)),o=isNaN(i)?1:Math.max(Math.min(-1*Math.floor(i),20),0),l={notation:a,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),ZV(e,n,l)},logarithmic(e,t,r){if(0===e)return"0";const n=r[t].significand||e/Math.pow(10,Math.floor(fV(e)));return[1,2,3,5,10,15].includes(n)||t>.8*r.length?eH.numeric.call(this,e,t,r):""}};var tH={formatters:eH};const rH=Object.create(null),nH=Object.create(null);function aH(e,t){if(!t)return e;const r=t.split(".");for(let n=0,a=r.length;n<a;++n){const t=r[n];e=e[t]||(e[t]=Object.create(null))}return e}function sH(e,t,r){return"string"===typeof t?JW(aH(e,t),r):JW(aH(e,""),t)}class iH{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>XV(t.backgroundColor),this.hoverBorderColor=(e,t)=>XV(t.borderColor),this.hoverColor=(e,t)=>XV(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return sH(this,e,t)}get(e){return aH(this,e)}describe(e,t){return sH(nH,e,t)}override(e,t){return sH(rH,e,t)}route(e,t,r,n){const a=aH(this,e),s=aH(this,r),i="_"+t;Object.defineProperties(a,{[i]:{value:a[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[i],t=s[n];return UW(e)?Object.assign({},t,e):VW(e,t)},set(e){this[i]=e}}})}apply(e){e.forEach(e=>e(this))}}var oH=new iH({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:$V},numbers:{type:"number",properties:QV}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:tH.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function lH(e,t,r,n,a){let s=t[a];return s||(s=t[a]=e.measureText(a).width,r.push(a)),s>n&&(n=s),n}function cH(e,t,r,n){let a=(n=n||{}).data=n.data||{},s=n.garbageCollect=n.garbageCollect||[];n.font!==t&&(a=n.data={},s=n.garbageCollect=[],n.font=t),e.save(),e.font=t;let i=0;const o=r.length;let l,c,d,u,h;for(l=0;l<o;l++)if(u=r[l],void 0===u||null===u||zW(u)){if(zW(u))for(c=0,d=u.length;c<d;c++)h=u[c],void 0===h||null===h||zW(h)||(i=lH(e,a,s,i,h))}else i=lH(e,a,s,i,u);e.restore();const m=s.length/2;if(m>r.length){for(l=0;l<m;l++)delete a[s[l]];s.splice(0,m)}return i}function dH(e,t,r){const n=e.currentDevicePixelRatio,a=0!==r?Math.max(r/2,.5):0;return Math.round((t-a)*n)/n+a}function uH(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function hH(e,t,r,n){mH(e,t,r,n,null)}function mH(e,t,r,n,a){let s,i,o,l,c,d,u,h;const m=t.pointStyle,p=t.rotation,f=t.radius;let g=(p||0)*uV;if(m&&"object"===typeof m&&(s=m.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return e.save(),e.translate(r,n),e.rotate(g),e.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),void e.restore();if(!(isNaN(f)||f<=0)){switch(e.beginPath(),m){default:a?e.ellipse(r,n,a/2,f,0,0,lV):e.arc(r,n,f,0,lV),e.closePath();break;case"triangle":d=a?a/2:f,e.moveTo(r+Math.sin(g)*d,n-Math.cos(g)*f),g+=pV,e.lineTo(r+Math.sin(g)*d,n-Math.cos(g)*f),g+=pV,e.lineTo(r+Math.sin(g)*d,n-Math.cos(g)*f),e.closePath();break;case"rectRounded":c=.516*f,l=f-c,i=Math.cos(g+mV)*l,u=Math.cos(g+mV)*(a?a/2-c:l),o=Math.sin(g+mV)*l,h=Math.sin(g+mV)*(a?a/2-c:l),e.arc(r-u,n-o,c,g-oV,g-hV),e.arc(r+h,n-i,c,g-hV,g),e.arc(r+u,n+o,c,g,g+hV),e.arc(r-h,n+i,c,g+hV,g+oV),e.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*f,d=a?a/2:l,e.rect(r-d,n-l,2*d,2*l);break}g+=mV;case"rectRot":u=Math.cos(g)*(a?a/2:f),i=Math.cos(g)*f,o=Math.sin(g)*f,h=Math.sin(g)*(a?a/2:f),e.moveTo(r-u,n-o),e.lineTo(r+h,n-i),e.lineTo(r+u,n+o),e.lineTo(r-h,n+i),e.closePath();break;case"crossRot":g+=mV;case"cross":u=Math.cos(g)*(a?a/2:f),i=Math.cos(g)*f,o=Math.sin(g)*f,h=Math.sin(g)*(a?a/2:f),e.moveTo(r-u,n-o),e.lineTo(r+u,n+o),e.moveTo(r+h,n-i),e.lineTo(r-h,n+i);break;case"star":u=Math.cos(g)*(a?a/2:f),i=Math.cos(g)*f,o=Math.sin(g)*f,h=Math.sin(g)*(a?a/2:f),e.moveTo(r-u,n-o),e.lineTo(r+u,n+o),e.moveTo(r+h,n-i),e.lineTo(r-h,n+i),g+=mV,u=Math.cos(g)*(a?a/2:f),i=Math.cos(g)*f,o=Math.sin(g)*f,h=Math.sin(g)*(a?a/2:f),e.moveTo(r-u,n-o),e.lineTo(r+u,n+o),e.moveTo(r+h,n-i),e.lineTo(r-h,n+i);break;case"line":i=a?a/2:Math.cos(g)*f,o=Math.sin(g)*f,e.moveTo(r-i,n-o),e.lineTo(r+i,n+o);break;case"dash":e.moveTo(r,n),e.lineTo(r+Math.cos(g)*(a?a/2:f),n+Math.sin(g)*f);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function pH(e,t,r){return r=r||.5,!t||e&&e.x>t.left-r&&e.x<t.right+r&&e.y>t.top-r&&e.y<t.bottom+r}function fH(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function gH(e){e.restore()}function xH(e,t,r,n,a){if(!t)return e.lineTo(r.x,r.y);if("middle"===a){const n=(t.x+r.x)/2;e.lineTo(n,t.y),e.lineTo(n,r.y)}else"after"===a!==!!n?e.lineTo(t.x,r.y):e.lineTo(r.x,t.y);e.lineTo(r.x,r.y)}function yH(e,t,r,n){if(!t)return e.lineTo(r.x,r.y);e.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?r.cp2x:r.cp1x,n?r.cp2y:r.cp1y,r.x,r.y)}function vH(e,t,r,n,a){if(a.strikethrough||a.underline){const s=e.measureText(n),i=t-s.actualBoundingBoxLeft,o=t+s.actualBoundingBoxRight,l=r-s.actualBoundingBoxAscent,c=r+s.actualBoundingBoxDescent,d=a.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=a.decorationWidth||2,e.moveTo(i,d),e.lineTo(o,d),e.stroke()}}function bH(e,t){const r=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=r}function jH(e,t,r,n,a){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const i=zW(t)?t:[t],o=s.strokeWidth>0&&""!==s.strokeColor;let l,c;for(e.save(),e.font=a.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),BW(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,s),l=0;l<i.length;++l)c=i[l],s.backdrop&&bH(e,s.backdrop),o&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),BW(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(c,r,n,s.maxWidth)),e.fillText(c,r,n,s.maxWidth),vH(e,r,n,c,s),n+=Number(a.lineHeight);e.restore()}function wH(e,t){const{x:r,y:n,w:a,h:s,radius:i}=t;e.arc(r+i.topLeft,n+i.topLeft,i.topLeft,1.5*oV,oV,!0),e.lineTo(r,n+s-i.bottomLeft),e.arc(r+i.bottomLeft,n+s-i.bottomLeft,i.bottomLeft,oV,hV,!0),e.lineTo(r+a-i.bottomRight,n+s),e.arc(r+a-i.bottomRight,n+s-i.bottomRight,i.bottomRight,hV,0,!0),e.lineTo(r+a,n+i.topRight),e.arc(r+a-i.topRight,n+i.topRight,i.topRight,0,-hV,!0),e.lineTo(r+i.topLeft,n)}const NH=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,_H=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function kH(e,t){const r=(""+e).match(NH);if(!r||"normal"===r[1])return 1.2*t;switch(e=+r[2],r[3]){case"px":return e;case"%":e/=100}return t*e}const SH=e=>+e||0;function AH(e,t){const r={},n=UW(t),a=n?Object.keys(t):t,s=UW(e)?n?r=>VW(e[r],e[t[r]]):t=>e[t]:()=>e;for(const i of a)r[i]=SH(s(i));return r}function CH(e){return AH(e,{top:"y",right:"x",bottom:"y",left:"x"})}function EH(e){return AH(e,["topLeft","topRight","bottomLeft","bottomRight"])}function TH(e){const t=CH(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function PH(e,t){e=e||{},t=t||oH.font;let r=VW(e.size,t.size);"string"===typeof r&&(r=parseInt(r,10));let n=VW(e.style,t.style);n&&!(""+n).match(_H)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const a={family:VW(e.family,t.family),lineHeight:kH(VW(e.lineHeight,t.lineHeight),r),size:r,style:n,weight:VW(e.weight,t.weight),string:""};return a.string=function(e){return!e||BW(e.size)||BW(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(a),a}function OH(e,t,r,n){let a,s,i,o=!0;for(a=0,s=e.length;a<s;++a)if(i=e[a],void 0!==i&&(void 0!==t&&"function"===typeof i&&(i=i(t),o=!1),void 0!==r&&zW(i)&&(i=i[r%i.length],o=!1),void 0!==i))return n&&!o&&(n.cacheable=!1),i}function DH(e,t){return Object.assign(Object.create(e),t)}function IH(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],r=arguments.length>3?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const a=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof r&&(r=HH("_fallback",e));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:a,_fallback:r,_getTarget:n,override:n=>IH([n,...e],t,a,r)};return new Proxy(s,{deleteProperty:(t,r)=>(delete t[r],delete t._keys,delete e[0][r],!0),get:(r,n)=>BH(r,n,()=>function(e,t,r,n){let a;for(const s of t)if(a=HH(RH(s,e),r),"undefined"!==typeof a)return FH(e,a)?WH(r,n,e,a):a}(n,t,e,r)),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>GH(e).includes(t),ownKeys:e=>GH(e),set(e,t,r){const a=e._storage||(e._storage=n());return e[t]=a[t]=r,delete e._keys,!0}})}function LH(e,t,r,n){const a={_cacheable:!1,_proxy:e,_context:t,_subProxy:r,_stack:new Set,_descriptors:MH(e,n),setContext:t=>LH(e,t,r,n),override:a=>LH(e.override(a),t,r,n)};return new Proxy(a,{deleteProperty:(t,r)=>(delete t[r],delete e[r],!0),get:(e,t,r)=>BH(e,t,()=>function(e,t,r){const{_proxy:n,_context:a,_subProxy:s,_descriptors:i}=e;let o=n[t];sV(o)&&i.isScriptable(t)&&(o=function(e,t,r,n){const{_proxy:a,_context:s,_subProxy:i,_stack:o}=r;if(o.has(e))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+e);o.add(e);let l=t(s,i||n);o.delete(e),FH(e,l)&&(l=WH(a._scopes,a,e,l));return l}(t,o,e,r));zW(o)&&o.length&&(o=function(e,t,r,n){const{_proxy:a,_context:s,_subProxy:i,_descriptors:o}=r;if("undefined"!==typeof s.index&&n(e))return t[s.index%t.length];if(UW(t[0])){const r=t,n=a._scopes.filter(e=>e!==r);t=[];for(const l of r){const r=WH(n,a,e,l);t.push(LH(r,s,i&&i[e],o))}}return t}(t,o,e,i.isIndexable));FH(t,o)&&(o=LH(o,a,s&&s[t],i));return o}(e,t,r)),getOwnPropertyDescriptor:(t,r)=>t._descriptors.allKeys?Reflect.has(e,r)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,r),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,r)=>Reflect.has(e,r),ownKeys:()=>Reflect.ownKeys(e),set:(t,r,n)=>(e[r]=n,delete t[r],!0)})}function MH(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:r=t.scriptable,_indexable:n=t.indexable,_allKeys:a=t.allKeys}=e;return{allKeys:a,scriptable:r,indexable:n,isScriptable:sV(r)?r:()=>r,isIndexable:sV(n)?n:()=>n}}const RH=(e,t)=>e?e+nV(t):t,FH=(e,t)=>UW(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function BH(e,t,r){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const n=r();return e[t]=n,n}function zH(e,t,r){return sV(e)?e(t,r):e}const UH=(e,t)=>!0===e?t:"string"===typeof e?rV(t,e):void 0;function qH(e,t,r,n,a){for(const s of t){const t=UH(r,s);if(t){e.add(t);const s=zH(t._fallback,r,a);if("undefined"!==typeof s&&s!==r&&s!==n)return s}else if(!1===t&&"undefined"!==typeof n&&r!==n)return null}return!1}function WH(e,t,r,n){const a=t._rootScopes,s=zH(t._fallback,r,n),i=[...e,...a],o=new Set;o.add(n);let l=VH(o,i,r,s||r,n);return null!==l&&(("undefined"===typeof s||s===r||(l=VH(o,i,s,l,n),null!==l))&&IH(Array.from(o),[""],a,s,()=>function(e,t,r){const n=e._getTarget();t in n||(n[t]={});const a=n[t];if(zW(a)&&UW(r))return r;return a||{}}(t,r,n)))}function VH(e,t,r,n,a){for(;r;)r=qH(e,t,r,n,a);return r}function HH(e,t){for(const r of t){if(!r)continue;const t=r[e];if("undefined"!==typeof t)return t}}function GH(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const r of e)for(const e of Object.keys(r).filter(e=>!e.startsWith("_")))t.add(e);return Array.from(t)}(e._scopes)),t}function KH(e,t,r,n){const{iScale:a}=e,{key:s="r"}=this._parsing,i=new Array(n);let o,l,c,d;for(o=0,l=n;o<l;++o)c=o+r,d=t[c],i[o]={r:a.parse(rV(d,s),c)};return i}const YH=Number.EPSILON||1e-14,XH=(e,t)=>t<e.length&&!e[t].skip&&e[t],QH=e=>"x"===e?"y":"x";function $H(e,t,r,n){const a=e.skip?t:e,s=t,i=r.skip?t:r,o=kV(s,a),l=kV(i,s);let c=o/(o+l),d=l/(o+l);c=isNaN(c)?0:c,d=isNaN(d)?0:d;const u=n*c,h=n*d;return{previous:{x:s.x-u*(i.x-a.x),y:s.y-u*(i.y-a.y)},next:{x:s.x+h*(i.x-a.x),y:s.y+h*(i.y-a.y)}}}function JH(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const r=QH(t),n=e.length,a=Array(n).fill(0),s=Array(n);let i,o,l,c=XH(e,0);for(i=0;i<n;++i)if(o=l,l=c,c=XH(e,i+1),l){if(c){const e=c[t]-l[t];a[i]=0!==e?(c[r]-l[r])/e:0}s[i]=o?c?gV(a[i-1])!==gV(a[i])?0:(a[i-1]+a[i])/2:a[i-1]:a[i]}!function(e,t,r){const n=e.length;let a,s,i,o,l,c=XH(e,0);for(let d=0;d<n-1;++d)l=c,c=XH(e,d+1),l&&c&&(xV(t[d],0,YH)?r[d]=r[d+1]=0:(a=r[d]/t[d],s=r[d+1]/t[d],o=Math.pow(a,2)+Math.pow(s,2),o<=9||(i=3/Math.sqrt(o),r[d]=a*i*t[d],r[d+1]=s*i*t[d])))}(e,a,s),function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const n=QH(r),a=e.length;let s,i,o,l=XH(e,0);for(let c=0;c<a;++c){if(i=o,o=l,l=XH(e,c+1),!o)continue;const a=o[r],d=o[n];i&&(s=(a-i[r])/3,o["cp1".concat(r)]=a-s,o["cp1".concat(n)]=d-s*t[c]),l&&(s=(l[r]-a)/3,o["cp2".concat(r)]=a+s,o["cp2".concat(n)]=d+s*t[c])}}(e,s,t)}function ZH(e,t,r){return Math.max(Math.min(e,r),t)}function eG(e,t,r,n,a){let s,i,o,l;if(t.spanGaps&&(e=e.filter(e=>!e.skip)),"monotone"===t.cubicInterpolationMode)JH(e,a);else{let r=n?e[e.length-1]:e[0];for(s=0,i=e.length;s<i;++s)o=e[s],l=$H(r,o,e[Math.min(s+1,i-(n?0:1))%i],t.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,r=o}t.capBezierPoints&&function(e,t){let r,n,a,s,i,o=pH(e[0],t);for(r=0,n=e.length;r<n;++r)i=s,s=o,o=r<n-1&&pH(e[r+1],t),s&&(a=e[r],i&&(a.cp1x=ZH(a.cp1x,t.left,t.right),a.cp1y=ZH(a.cp1y,t.top,t.bottom)),o&&(a.cp2x=ZH(a.cp2x,t.left,t.right),a.cp2y=ZH(a.cp2y,t.top,t.bottom)))}(e,r)}function tG(){return"undefined"!==typeof window&&"undefined"!==typeof document}function rG(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function nG(e,t,r){let n;return"string"===typeof e?(n=parseInt(e,10),-1!==e.indexOf("%")&&(n=n/100*t.parentNode[r])):n=e,n}const aG=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const sG=["top","right","bottom","left"];function iG(e,t,r){const n={};r=r?"-"+r:"";for(let a=0;a<4;a++){const s=sG[a];n[s]=parseFloat(e[t+"-"+s+r])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}function oG(e,t){if("native"in e)return e;const{canvas:r,currentDevicePixelRatio:n}=t,a=aG(r),s="border-box"===a.boxSizing,i=iG(a,"padding"),o=iG(a,"border","width"),{x:l,y:c,box:d}=function(e,t){const r=e.touches,n=r&&r.length?r[0]:e,{offsetX:a,offsetY:s}=n;let i,o,l=!1;if(((e,t,r)=>(e>0||t>0)&&(!r||!r.shadowRoot))(a,s,e.target))i=a,o=s;else{const e=t.getBoundingClientRect();i=n.clientX-e.left,o=n.clientY-e.top,l=!0}return{x:i,y:o,box:l}}(e,r),u=i.left+(d&&o.left),h=i.top+(d&&o.top);let{width:m,height:p}=t;return s&&(m-=i.width+o.width,p-=i.height+o.height),{x:Math.round((l-u)/m*r.width/n),y:Math.round((c-h)/p*r.height/n)}}const lG=e=>Math.round(10*e)/10;function cG(e,t,r,n){const a=aG(e),s=iG(a,"margin"),i=nG(a.maxWidth,e,"clientWidth")||dV,o=nG(a.maxHeight,e,"clientHeight")||dV,l=function(e,t,r){let n,a;if(void 0===t||void 0===r){const s=e&&rG(e);if(s){const e=s.getBoundingClientRect(),i=aG(s),o=iG(i,"border","width"),l=iG(i,"padding");t=e.width-l.width-o.width,r=e.height-l.height-o.height,n=nG(i.maxWidth,s,"clientWidth"),a=nG(i.maxHeight,s,"clientHeight")}else t=e.clientWidth,r=e.clientHeight}return{width:t,height:r,maxWidth:n||dV,maxHeight:a||dV}}(e,t,r);let{width:c,height:d}=l;if("content-box"===a.boxSizing){const e=iG(a,"border","width"),t=iG(a,"padding");c-=t.width+e.width,d-=t.height+e.height}c=Math.max(0,c-s.width),d=Math.max(0,n?c/n:d-s.height),c=lG(Math.min(c,i,l.maxWidth)),d=lG(Math.min(d,o,l.maxHeight)),c&&!d&&(d=lG(c/2));return(void 0!==t||void 0!==r)&&n&&l.height&&d>l.height&&(d=l.height,c=lG(Math.floor(d*n))),{width:c,height:d}}function dG(e,t,r){const n=t||1,a=lG(e.height*n),s=lG(e.width*n);e.height=lG(e.height),e.width=lG(e.width);const i=e.canvas;return i.style&&(r||!i.style.height&&!i.style.width)&&(i.style.height="".concat(e.height,"px"),i.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==n||i.height!==a||i.width!==s)&&(e.currentDevicePixelRatio=n,i.height=a,i.width=s,e.ctx.setTransform(n,0,0,n,0,0),!0)}const uG=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};tG()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(ze){}return e}();function hG(e,t){const r=function(e,t){return aG(e).getPropertyValue(t)}(e,t),n=r&&r.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function mG(e,t,r,n){return{x:e.x+r*(t.x-e.x),y:e.y+r*(t.y-e.y)}}function pG(e,t,r,n){return{x:e.x+r*(t.x-e.x),y:"middle"===n?r<.5?e.y:t.y:"after"===n?r<1?e.y:t.y:r>0?t.y:e.y}}function fG(e,t,r,n){const a={x:e.cp2x,y:e.cp2y},s={x:t.cp1x,y:t.cp1y},i=mG(e,a,r),o=mG(a,s,r),l=mG(s,t,r),c=mG(i,o,r),d=mG(o,l,r);return mG(c,d,r)}function gG(e,t,r){return e?function(e,t){return{x:r=>e+e+t-r,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,r):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function xG(e,t){let r,n;"ltr"!==t&&"rtl"!==t||(r=e.canvas.style,n=[r.getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",t,"important"),e.prevTextDirection=n)}function yG(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function vG(e){return"angle"===e?{between:CV,compare:SV,normalize:AV}:{between:TV,compare:(e,t)=>e-t,normalize:e=>e}}function bG(e){let{start:t,end:r,count:n,loop:a,style:s}=e;return{start:t%n,end:r%n,loop:a&&(r-t+1)%n===0,style:s}}function jG(e,t,r){if(!r)return[e];const{property:n,start:a,end:s}=r,i=t.length,{compare:o,between:l,normalize:c}=vG(n),{start:d,end:u,loop:h,style:m}=function(e,t,r){const{property:n,start:a,end:s}=r,{between:i,normalize:o}=vG(n),l=t.length;let c,d,{start:u,end:h,loop:m}=e;if(m){for(u+=l,h+=l,c=0,d=l;c<d&&i(o(t[u%l][n]),a,s);++c)u--,h--;u%=l,h%=l}return h<u&&(h+=l),{start:u,end:h,loop:m,style:e.style}}(e,t,r),p=[];let f,g,x,y=!1,v=null;const b=()=>y||l(a,x,f)&&0!==o(a,x),j=()=>!y||0===o(s,f)||l(s,x,f);for(let w=d,N=d;w<=u;++w)g=t[w%i],g.skip||(f=c(g[n]),f!==x&&(y=l(f,a,s),null===v&&b()&&(v=0===o(f,a)?w:N),null!==v&&j()&&(p.push(bG({start:v,end:w,loop:h,count:i,style:m})),v=null),N=w,x=f));return null!==v&&p.push(bG({start:v,end:u,loop:h,count:i,style:m})),p}function wG(e,t){const r=[],n=e.segments;for(let a=0;a<n.length;a++){const s=jG(n[a],e.points,t);s.length&&r.push(...s)}return r}function NG(e,t,r,n){return n&&n.setContext&&r?function(e,t,r,n){const a=e._chart.getContext(),s=_G(e.options),{_datasetIndex:i,options:{spanGaps:o}}=e,l=r.length,c=[];let d=s,u=t[0].start,h=u;function m(e,t,n,a){const s=o?-1:1;if(e!==t){for(e+=l;r[e%l].skip;)e-=s;for(;r[t%l].skip;)t+=s;e%l!==t%l&&(c.push({start:e%l,end:t%l,loop:n,style:a}),d=a,u=t%l)}}for(const p of t){u=o?u:p.start;let e,t=r[u%l];for(h=u+1;h<=p.end;h++){const s=r[h%l];e=_G(n.setContext(DH(a,{type:"segment",p0:t,p1:s,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:i}))),kG(e,d)&&m(u,h-1,p.loop,d),t=s,d=e}u<h-1&&m(u,h-1,p.loop,d)}return c}(e,t,r,n):t}function _G(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function kG(e,t){if(!t)return!1;const r=[],n=function(e,t){return KV(t)?(r.includes(t)||r.push(t),r.indexOf(t)):t};return JSON.stringify(e,n)!==JSON.stringify(t,n)}function SG(e,t,r){return e.options.clip?e[r]:t[r]}function AG(e,t){const r=t._clip;if(r.disabled)return!1;const n=function(e,t){const{xScale:r,yScale:n}=e;return r&&n?{left:SG(r,t,"left"),right:SG(r,t,"right"),top:SG(n,t,"top"),bottom:SG(n,t,"bottom")}:t}(t,e.chartArea);return{left:!1===r.left?0:n.left-(!0===r.left?0:r.left),right:!1===r.right?e.width:n.right+(!0===r.right?0:r.right),top:!1===r.top?0:n.top-(!0===r.top?0:r.top),bottom:!1===r.bottom?e.height:n.bottom+(!0===r.bottom?0:r.bottom)}}class CG{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,r,n){const a=t.listeners[n],s=t.duration;a.forEach(n=>n({chart:e,initial:t.initial,numSteps:s,currentStep:Math.min(r-t.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=RV.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach((r,n)=>{if(!r.running||!r.items.length)return;const a=r.items;let s,i=a.length-1,o=!1;for(;i>=0;--i)s=a[i],s._active?(s._total>r.duration&&(r.duration=s._total),s.tick(e),o=!0):(a[i]=a[a.length-1],a.pop());o&&(n.draw(),this._notify(n,r,e,"progress")),a.length||(r.running=!1,this._notify(n,r,e,"complete"),r.initial=!1),t+=a.length}),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let r=t.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,r)),r}listen(e,t,r){this._getAnims(e).listeners[t].push(r)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((e,t)=>Math.max(e,t._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const r=t.items;let n=r.length-1;for(;n>=0;--n)r[n].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var EG=new CG;const TG="transparent",PG={boolean:(e,t,r)=>r>.5?t:e,color(e,t,r){const n=YV(e||TG),a=n.valid&&YV(t||TG);return a&&a.valid?a.mix(n,r).hexString():t},number:(e,t,r)=>e+(t-e)*r};class OG{constructor(e,t,r,n){const a=t[r];n=OH([e.to,n,a,e.from]);const s=OH([e.from,a,n]);this._active=!0,this._fn=e.fn||PG[e.type||typeof s],this._easing=GV[e.easing]||GV.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=r,this._from=s,this._to=n,this._promises=void 0}active(){return this._active}update(e,t,r){if(this._active){this._notify(!1);const n=this._target[this._prop],a=r-this._start,s=this._duration-a;this._start=r,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=a,this._loop=!!e.loop,this._to=OH([e.to,t,n,e.from]),this._from=OH([e.from,n,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,r=this._duration,n=this._prop,a=this._from,s=this._loop,i=this._to;let o;if(this._active=a!==i&&(s||t<r),!this._active)return this._target[n]=i,void this._notify(!0);t<0?this._target[n]=a:(o=t/r%2,o=s&&o>1?2-o:o,o=this._easing(Math.min(1,Math.max(0,o))),this._target[n]=this._fn(a,i,o))}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,r)=>{e.push({res:t,rej:r})})}_notify(e){const t=e?"res":"rej",r=this._promises||[];for(let n=0;n<r.length;n++)r[n][t]()}}class DG{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!UW(e))return;const t=Object.keys(oH.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(n=>{const a=e[n];if(!UW(a))return;const s={};for(const e of t)s[e]=a[e];(zW(a.properties)&&a.properties||[n]).forEach(e=>{e!==n&&r.has(e)||r.set(e,s)})})}_animateOptions(e,t){const r=t.options,n=function(e,t){if(!t)return;let r=e.options;if(!r)return void(e.options=t);r.$shared&&(e.options=r=Object.assign({},r,{$shared:!1,$animations:{}}));return r}(e,r);if(!n)return[];const a=this._createAnimations(n,r);return r.$shared&&function(e,t){const r=[],n=Object.keys(t);for(let a=0;a<n.length;a++){const t=e[n[a]];t&&t.active()&&r.push(t.wait())}return Promise.all(r)}(e.options.$animations,r).then(()=>{e.options=r},()=>{}),a}_createAnimations(e,t){const r=this._properties,n=[],a=e.$animations||(e.$animations={}),s=Object.keys(t),i=Date.now();let o;for(o=s.length-1;o>=0;--o){const l=s[o];if("$"===l.charAt(0))continue;if("options"===l){n.push(...this._animateOptions(e,t));continue}const c=t[l];let d=a[l];const u=r.get(l);if(d){if(u&&d.active()){d.update(u,c,i);continue}d.cancel()}u&&u.duration?(a[l]=d=new OG(u,e,l,c),n.push(d)):e[l]=c}return n}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const r=this._createAnimations(e,t);return r.length?(EG.add(this._chart,r),!0):void 0}}function IG(e,t){const r=e&&e.options||{},n=r.reverse,a=void 0===r.min?t:0,s=void 0===r.max?t:0;return{start:n?s:a,end:n?a:s}}function LG(e,t){const r=[],n=e._getSortedDatasetMetas(t);let a,s;for(a=0,s=n.length;a<s;++a)r.push(n[a].index);return r}function MG(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const a=e.keys,s="single"===n.mode;let i,o,l,c;if(null===t)return;let d=!1;for(i=0,o=a.length;i<o;++i){if(l=+a[i],l===r){if(d=!0,n.all)continue;break}c=e.values[l],qW(c)&&(s||0===t||gV(t)===gV(c))&&(t+=c)}return d||n.all?t:0}function RG(e,t){const r=e&&e.options.stacked;return r||void 0===r&&void 0!==t.stack}function FG(e,t,r){const n=e[t]||(e[t]={});return n[r]||(n[r]={})}function BG(e,t,r,n){for(const a of t.getMatchingVisibleMetas(n).reverse()){const t=e[a.index];if(r&&t>0||!r&&t<0)return a.index}return null}function zG(e,t){const{chart:r,_cachedMeta:n}=e,a=r._stacks||(r._stacks={}),{iScale:s,vScale:i,index:o}=n,l=s.axis,c=i.axis,d=function(e,t,r){return"".concat(e.id,".").concat(t.id,".").concat(r.stack||r.type)}(s,i,n),u=t.length;let h;for(let m=0;m<u;++m){const e=t[m],{[l]:r,[c]:s}=e;h=(e._stacks||(e._stacks={}))[c]=FG(a,d,r),h[o]=s,h._top=BG(h,i,!0,n.type),h._bottom=BG(h,i,!1,n.type);(h._visualValues||(h._visualValues={}))[o]=s}}function UG(e,t){const r=e.scales;return Object.keys(r).filter(e=>r[e].axis===t).shift()}function qG(e,t){const r=e.controller.index,n=e.vScale&&e.vScale.axis;if(n){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[n]||void 0===t[n][r])return;delete t[n][r],void 0!==t[n]._visualValues&&void 0!==t[n]._visualValues[r]&&delete t[n]._visualValues[r]}}}const WG=e=>"reset"===e||"none"===e,VG=(e,t)=>t?e:Object.assign({},e);class HG{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=RG(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&qG(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,r=this.getDataset(),n=(e,t,r,n)=>"x"===e?t:"r"===e?n:r,a=t.xAxisID=VW(r.xAxisID,UG(e,"x")),s=t.yAxisID=VW(r.yAxisID,UG(e,"y")),i=t.rAxisID=VW(r.rAxisID,UG(e,"r")),o=t.indexAxis,l=t.iAxisID=n(o,a,s,i),c=t.vAxisID=n(o,s,a,i);t.xScale=this.getScaleForId(a),t.yScale=this.getScaleForId(s),t.rScale=this.getScaleForId(i),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&LV(this._data,this),e._stacked&&qG(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),r=this._data;if(UW(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:r,vScale:n}=t,a="x"===r.axis?"x":"y",s="x"===n.axis?"x":"y",i=Object.keys(e),o=new Array(i.length);let l,c,d;for(l=0,c=i.length;l<c;++l)d=i[l],o[l]={[a]:d,[s]:e[d]};return o}(t,e)}else if(r!==t){if(r){LV(r,this);const e=this._cachedMeta;qG(e),e._parsed=[]}t&&Object.isExtensible(t)&&function(e,t){e._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),IV.forEach(t=>{const r="_onData"+nV(t),n=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];const i=n.apply(this,a);return e._chartjs.listeners.forEach(e=>{"function"===typeof e[r]&&e[r](...a)}),i}})}))}(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,r=this.getDataset();let n=!1;this._dataCheck();const a=t._stacked;t._stacked=RG(t.vScale,t),t.stack!==r.stack&&(n=!0,qG(t),t.stack=r.stack),this._resyncElements(e),(n||a!==t._stacked)&&(zG(this,t._parsed),t._stacked=RG(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:r,_data:n}=this,{iScale:a,_stacked:s}=r,i=a.axis;let o,l,c,d=0===e&&t===n.length||r._sorted,u=e>0&&r._parsed[e-1];if(!1===this._parsing)r._parsed=n,r._sorted=!0,c=n;else{c=zW(n[e])?this.parseArrayData(r,n,e,t):UW(n[e])?this.parseObjectData(r,n,e,t):this.parsePrimitiveData(r,n,e,t);const a=()=>null===l[i]||u&&l[i]<u[i];for(o=0;o<t;++o)r._parsed[o+e]=l=c[o],d&&(a()&&(d=!1),u=l);r._sorted=d}s&&zG(this,c)}parsePrimitiveData(e,t,r,n){const{iScale:a,vScale:s}=e,i=a.axis,o=s.axis,l=a.getLabels(),c=a===s,d=new Array(n);let u,h,m;for(u=0,h=n;u<h;++u)m=u+r,d[u]={[i]:c||a.parse(l[m],m),[o]:s.parse(t[m],m)};return d}parseArrayData(e,t,r,n){const{xScale:a,yScale:s}=e,i=new Array(n);let o,l,c,d;for(o=0,l=n;o<l;++o)c=o+r,d=t[c],i[o]={x:a.parse(d[0],c),y:s.parse(d[1],c)};return i}parseObjectData(e,t,r,n){const{xScale:a,yScale:s}=e,{xAxisKey:i="x",yAxisKey:o="y"}=this._parsing,l=new Array(n);let c,d,u,h;for(c=0,d=n;c<d;++c)u=c+r,h=t[u],l[c]={x:a.parse(rV(h,i),u),y:s.parse(rV(h,o),u)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,r){const n=this.chart,a=this._cachedMeta,s=t[e.axis];return MG({keys:LG(n,!0),values:t._stacks[e.axis]._visualValues},s,a.index,{mode:r})}updateRangeFromParsed(e,t,r,n){const a=r[t.axis];let s=null===a?NaN:a;const i=n&&r._stacks[t.axis];n&&i&&(n.values=i,s=MG(n,a,this._cachedMeta.index)),e.min=Math.min(e.min,s),e.max=Math.max(e.max,s)}getMinMax(e,t){const r=this._cachedMeta,n=r._parsed,a=r._sorted&&e===r.iScale,s=n.length,i=this._getOtherScale(e),o=((e,t,r)=>e&&!t.hidden&&t._stacked&&{keys:LG(r,!0),values:null})(t,r,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:d}=function(e){const{min:t,max:r,minDefined:n,maxDefined:a}=e.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:a?r:Number.POSITIVE_INFINITY}}(i);let u,h;function m(){h=n[u];const t=h[i.axis];return!qW(h[e.axis])||c>t||d<t}for(u=0;u<s&&(m()||(this.updateRangeFromParsed(l,e,h,o),!a));++u);if(a)for(u=s-1;u>=0;--u)if(!m()){this.updateRangeFromParsed(l,e,h,o);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,r=[];let n,a,s;for(n=0,a=t.length;n<a;++n)s=t[n][e.axis],qW(s)&&r.push(s);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,r=t.iScale,n=t.vScale,a=this.getParsed(e);return{label:r?""+r.getLabelForValue(a[r.axis]):"",value:n?""+n.getLabelForValue(a[n.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,r,n,a;return UW(e)?(t=e.top,r=e.right,n=e.bottom,a=e.left):t=r=n=a=e,{top:t,right:r,bottom:n,left:a,disabled:!1===e}}(VW(this.options.clip,function(e,t,r){if(!1===r)return!1;const n=IG(e,r),a=IG(t,r);return{top:a.end,right:n.end,bottom:a.start,left:n.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,r=this._cachedMeta,n=r.data||[],a=t.chartArea,s=[],i=this._drawStart||0,o=this._drawCount||n.length-i,l=this.options.drawActiveElementsOnTop;let c;for(r.dataset&&r.dataset.draw(e,a,i,o),c=i;c<i+o;++c){const t=n[c];t.hidden||(t.active&&l?s.push(t):t.draw(e,a))}for(c=0;c<s.length;++c)s[c].draw(e,a)}getStyle(e,t){const r=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,t,r){const n=this.getDataset();let a;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];a=t.$context||(t.$context=function(e,t,r){return DH(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:r,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),a.parsed=this.getParsed(e),a.raw=n.data[e],a.index=a.dataIndex=e}else a=this.$context||(this.$context=function(e,t){return DH(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),a.dataset=n,a.index=a.datasetIndex=this.index;return a.active=!!t,a.mode=r,a}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",r=arguments.length>2?arguments[2]:void 0;const n="active"===t,a=this._cachedDataOpts,s=e+"-"+t,i=a[s],o=this.enableOptionSharing&&aV(r);if(i)return VG(i,o);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),d=n?["".concat(e,"Hover"),"hover",e,""]:[e,""],u=l.getOptionScopes(this.getDataset(),c),h=Object.keys(oH.elements[e]),m=l.resolveNamedOptions(u,h,()=>this.getContext(r,n,t),d);return m.$shared&&(m.$shared=o,a[s]=Object.freeze(VG(m,o))),m}_resolveAnimations(e,t,r){const n=this.chart,a=this._cachedDataOpts,s="animation-".concat(t),i=a[s];if(i)return i;let o;if(!1!==n.options.animation){const n=this.chart.config,a=n.datasetAnimationScopeKeys(this._type,t),s=n.getOptionScopes(this.getDataset(),a);o=n.createResolver(s,this.getContext(e,r,t))}const l=new DG(n,o&&o.animations);return o&&o._cacheable&&(a[s]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||WG(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const r=this.resolveDataElementOptions(e,t),n=this._sharedOptions,a=this.getSharedOptions(r),s=this.includeOptions(t,a)||a!==n;return this.updateSharedOptions(a,t,r),{sharedOptions:a,includeOptions:s}}updateElement(e,t,r,n){WG(n)?Object.assign(e,r):this._resolveAnimations(t,n).update(e,r)}updateSharedOptions(e,t,r){e&&!WG(t)&&this._resolveAnimations(void 0,t).update(e,r)}_setStyle(e,t,r,n){e.active=n;const a=this.getStyle(t,n);this._resolveAnimations(t,r,n).update(e,{options:!n&&this.getSharedOptions(a)||a})}removeHoverStyle(e,t,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,t,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,r=this._cachedMeta.data;for(const[i,o,l]of this._syncList)this[i](o,l);this._syncList=[];const n=r.length,a=t.length,s=Math.min(a,n);s&&this.parse(0,s),a>n?this._insertElements(n,a-n,e):a<n&&this._removeElements(a,n-a)}_insertElements(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n=this._cachedMeta,a=n.data,s=e+t;let i;const o=e=>{for(e.length+=t,i=e.length-1;i>=s;i--)e[i]=e[i-t]};for(o(a),i=e;i<s;++i)a[i]=new this.dataElementType;this._parsing&&o(n._parsed),this.parse(e,t),r&&this.updateElements(a,e,t,"reset")}updateElements(e,t,r,n){}_removeElements(e,t){const r=this._cachedMeta;if(this._parsing){const n=r._parsed.splice(e,t);r._stacked&&qG(r,n)}r.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,r,n]=e;this[t](r,n)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function GG(e){const t=e.iScale,r=function(e,t){if(!e._cache.$bar){const r=e.getMatchingVisibleMetas(t);let n=[];for(let t=0,a=r.length;t<a;t++)n=n.concat(r[t].controller.getAllParsedValues(e));e._cache.$bar=MV(n.sort((e,t)=>e-t))}return e._cache.$bar}(t,e.type);let n,a,s,i,o=t._length;const l=()=>{32767!==s&&-32768!==s&&(aV(i)&&(o=Math.min(o,Math.abs(s-i)||o)),i=s)};for(n=0,a=r.length;n<a;++n)s=t.getPixelForValue(r[n]),l();for(i=void 0,n=0,a=t.ticks.length;n<a;++n)s=t.getPixelForTick(n),l();return o}function KG(e,t,r,n){return zW(e)?function(e,t,r,n){const a=r.parse(e[0],n),s=r.parse(e[1],n),i=Math.min(a,s),o=Math.max(a,s);let l=i,c=o;Math.abs(i)>Math.abs(o)&&(l=o,c=i),t[r.axis]=c,t._custom={barStart:l,barEnd:c,start:a,end:s,min:i,max:o}}(e,t,r,n):t[r.axis]=r.parse(e,n),t}function YG(e,t,r,n){const a=e.iScale,s=e.vScale,i=a.getLabels(),o=a===s,l=[];let c,d,u,h;for(c=r,d=r+n;c<d;++c)h=t[c],u={},u[a.axis]=o||a.parse(i[c],c),l.push(KG(h,u,s,c));return l}function XG(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function QG(e,t,r,n){let a=t.borderSkipped;const s={};if(!a)return void(e.borderSkipped=s);if(!0===a)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:i,end:o,reverse:l,top:c,bottom:d}=function(e){let t,r,n,a,s;return e.horizontal?(t=e.base>e.x,r="left",n="right"):(t=e.base<e.y,r="bottom",n="top"),t?(a="end",s="start"):(a="start",s="end"),{start:r,end:n,reverse:t,top:a,bottom:s}}(e);"middle"===a&&r&&(e.enableBorderRadius=!0,(r._top||0)===n?a=c:(r._bottom||0)===n?a=d:(s[$G(d,i,o,l)]=!0,a=c)),s[$G(a,i,o,l)]=!0,e.borderSkipped=s}function $G(e,t,r,n){var a,s,i;return n?(i=r,e=JG(e=(a=e)===(s=t)?i:a===i?s:a,r,t)):e=JG(e,t,r),e}function JG(e,t,r){return"start"===e?t:"end"===e?r:e}function ZG(e,t,r){let{inflateAmount:n}=t;e.inflateAmount="auto"===n?1===r?.33:0:n}(0,Re.A)(HG,"defaults",{}),(0,Re.A)(HG,"datasetElementType",null),(0,Re.A)(HG,"dataElementType",null);class eK extends HG{parsePrimitiveData(e,t,r,n){return YG(e,t,r,n)}parseArrayData(e,t,r,n){return YG(e,t,r,n)}parseObjectData(e,t,r,n){const{iScale:a,vScale:s}=e,{xAxisKey:i="x",yAxisKey:o="y"}=this._parsing,l="x"===a.axis?i:o,c="x"===s.axis?i:o,d=[];let u,h,m,p;for(u=r,h=r+n;u<h;++u)p=t[u],m={},m[a.axis]=a.parse(rV(p,l),u),d.push(KG(rV(p,c),m,s,u));return d}updateRangeFromParsed(e,t,r,n){super.updateRangeFromParsed(e,t,r,n);const a=r._custom;a&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,a.min),e.max=Math.max(e.max,a.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:r,vScale:n}=t,a=this.getParsed(e),s=a._custom,i=XG(s)?"["+s.start+", "+s.end+"]":""+n.getLabelForValue(a[n.axis]);return{label:""+r.getLabelForValue(a[r.axis]),value:i}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,r,n){const a="reset"===n,{index:s,_cachedMeta:{vScale:i}}=this,o=i.getBasePixel(),l=i.isHorizontal(),c=this._getRuler(),{sharedOptions:d,includeOptions:u}=this._getSharedOptions(t,n);for(let h=t;h<t+r;h++){const t=this.getParsed(h),r=a||BW(t[i.axis])?{base:o,head:o}:this._calculateBarValuePixels(h),m=this._calculateBarIndexPixels(h,c),p=(t._stacks||{})[i.axis],f={horizontal:l,base:r.base,enableBorderRadius:!p||XG(t._custom)||s===p._top||s===p._bottom,x:l?r.head:m.center,y:l?m.center:r.head,height:l?m.size:Math.abs(r.size),width:l?Math.abs(r.size):m.size};u&&(f.options=d||this.resolveDataElementOptions(h,e[h].active?"active":n));const g=f.options||e[h].options;QG(f,g,p,s),ZG(f,g,c.ratio),this.updateElement(e[h],h,f,n)}}_getStacks(e,t){const{iScale:r}=this._cachedMeta,n=r.getMatchingVisibleMetas(this._type).filter(e=>e.controller.options.grouped),a=r.options.stacked,s=[],i=this._cachedMeta.controller.getParsed(t),o=i&&i[r.axis],l=e=>{const t=e._parsed.find(e=>e[r.axis]===o),n=t&&t[e.vScale.axis];if(BW(n)||isNaN(n))return!0};for(const c of n)if((void 0===t||!l(c))&&((!1===a||-1===s.indexOf(c.stack)||void 0===a&&void 0===c.stack)&&s.push(c.stack),c.index===e))break;return s.length||s.push(void 0),s}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(r=>e[r].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)e[VW("x"===this.chart.options.indexAxis?r.xAxisID:r.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,r){const n=this._getStacks(e,r),a=void 0!==t?n.indexOf(t):-1;return-1===a?n.length-1:a}_getRuler(){const e=this.options,t=this._cachedMeta,r=t.iScale,n=[];let a,s;for(a=0,s=t.data.length;a<s;++a)n.push(r.getPixelForValue(this.getParsed(a)[r.axis],a));const i=e.barThickness;return{min:i||GG(t),pixels:n,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:i?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:r,index:n},options:{base:a,minBarLength:s}}=this,i=a||0,o=this.getParsed(e),l=o._custom,c=XG(l);let d,u,h=o[t.axis],m=0,p=r?this.applyStack(t,o,r):h;p!==h&&(m=p-h,p=h),c&&(h=l.barStart,p=l.barEnd-l.barStart,0!==h&&gV(h)!==gV(l.barEnd)&&(m=0),m+=h);const f=BW(a)||c?m:a;let g=t.getPixelForValue(f);if(d=this.chart.getDataVisibility(e)?t.getPixelForValue(m+p):g,u=d-g,Math.abs(u)<s){u=function(e,t,r){return 0!==e?gV(e):(t.isHorizontal()?1:-1)*(t.min>=r?1:-1)}(u,t,i)*s,h===i&&(g-=u/2);const e=t.getPixelForDecimal(0),a=t.getPixelForDecimal(1),l=Math.min(e,a),m=Math.max(e,a);g=Math.max(Math.min(g,m),l),d=g+u,r&&!c&&(o._stacks[t.axis]._visualValues[n]=t.getValueForPixel(d)-t.getValueForPixel(g))}if(g===t.getPixelForValue(i)){const e=gV(u)*t.getLineWidthForValue(i)/2;g+=e,u-=e}return{size:u,base:g,head:d,center:d+u/2}}_calculateBarIndexPixels(e,t){const r=t.scale,n=this.options,a=n.skipNull,s=VW(n.maxBarThickness,1/0);let i,o;const l=this._getAxisCount();if(t.grouped){const r=a?this._getStackCount(e):t.stackCount,c="flex"===n.barThickness?function(e,t,r,n){const a=t.pixels,s=a[e];let i=e>0?a[e-1]:null,o=e<a.length-1?a[e+1]:null;const l=r.categoryPercentage;null===i&&(i=s-(null===o?t.end-t.start:o-s)),null===o&&(o=s+s-i);const c=s-(s-Math.min(i,o))/2*l;return{chunk:Math.abs(o-i)/2*l/n,ratio:r.barPercentage,start:c}}(e,t,n,r*l):function(e,t,r,n){const a=r.barThickness;let s,i;return BW(a)?(s=t.min*r.categoryPercentage,i=r.barPercentage):(s=a*n,i=1),{chunk:s/n,ratio:i,start:t.pixels[e]-s/2}}(e,t,n,r*l),d="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,u=this._getAxis().indexOf(VW(d,this.getFirstScaleIdForIndexAxis())),h=this._getStackIndex(this.index,this._cachedMeta.stack,a?e:void 0)+u;i=c.start+c.chunk*h+c.chunk/2,o=Math.min(s,c.chunk*c.ratio)}else i=r.getPixelForValue(this.getParsed(e)[r.axis],e),o=Math.min(s,t.min*t.ratio);return{base:i-o/2,head:i+o/2,center:i,size:o}}draw(){const e=this._cachedMeta,t=e.vScale,r=e.data,n=r.length;let a=0;for(;a<n;++a)null===this.getParsed(a)[t.axis]||r[a].hidden||r[a].draw(this._ctx)}}(0,Re.A)(eK,"id","bar"),(0,Re.A)(eK,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),(0,Re.A)(eK,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class tK extends HG{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,r,n){const a=super.parsePrimitiveData(e,t,r,n);for(let s=0;s<a.length;s++)a[s]._custom=this.resolveDataElementOptions(s+r).radius;return a}parseArrayData(e,t,r,n){const a=super.parseArrayData(e,t,r,n);for(let s=0;s<a.length;s++){const e=t[r+s];a[s]._custom=VW(e[2],this.resolveDataElementOptions(s+r).radius)}return a}parseObjectData(e,t,r,n){const a=super.parseObjectData(e,t,r,n);for(let s=0;s<a.length;s++){const e=t[r+s];a[s]._custom=VW(e&&e.r&&+e.r,this.resolveDataElementOptions(s+r).radius)}return a}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let r=e.length-1;r>=0;--r)t=Math.max(t,e[r].size(this.resolveDataElementOptions(r))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,r=this.chart.data.labels||[],{xScale:n,yScale:a}=t,s=this.getParsed(e),i=n.getLabelForValue(s.x),o=a.getLabelForValue(s.y),l=s._custom;return{label:r[e]||"",value:"("+i+", "+o+(l?", "+l:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,r,n){const a="reset"===n,{iScale:s,vScale:i}=this._cachedMeta,{sharedOptions:o,includeOptions:l}=this._getSharedOptions(t,n),c=s.axis,d=i.axis;for(let u=t;u<t+r;u++){const t=e[u],r=!a&&this.getParsed(u),h={},m=h[c]=a?s.getPixelForDecimal(.5):s.getPixelForValue(r[c]),p=h[d]=a?i.getBasePixel():i.getPixelForValue(r[d]);h.skip=isNaN(m)||isNaN(p),l&&(h.options=o||this.resolveDataElementOptions(u,t.active?"active":n),a&&(h.options.radius=0)),this.updateElement(t,u,h,n)}}resolveDataElementOptions(e,t){const r=this.getParsed(e);let n=super.resolveDataElementOptions(e,t);n.$shared&&(n=Object.assign({},n,{$shared:!1}));const a=n.radius;return"active"!==t&&(n.radius=0),n.radius+=VW(r&&r._custom,a),n}}(0,Re.A)(tK,"id","bubble"),(0,Re.A)(tK,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),(0,Re.A)(tK,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class rK extends HG{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const r=this.getDataset().data,n=this._cachedMeta;if(!1===this._parsing)n._parsed=r;else{let a,s,i=e=>+r[e];if(UW(r[e])){const{key:e="value"}=this._parsing;i=t=>+rV(r[t],e)}for(a=e,s=e+t;a<s;++a)n._parsed[a]=i(a)}}_getRotation(){return jV(this.options.rotation-90)}_getCircumference(){return jV(this.options.circumference)}_getRotationExtents(){let e=lV,t=-lV;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const n=this.chart.getDatasetMeta(r).controller,a=n._getRotation(),s=n._getCircumference();e=Math.min(e,a),t=Math.max(t,a+s)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:r}=t,n=this._cachedMeta,a=n.data,s=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,i=Math.max((Math.min(r.width,r.height)-s)/2,0),o=Math.min(((e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100:+e/t)(this.options.cutout,i),1),l=this._getRingWeight(this.index),{circumference:c,rotation:d}=this._getRotationExtents(),{ratioX:u,ratioY:h,offsetX:m,offsetY:p}=function(e,t,r){let n=1,a=1,s=0,i=0;if(t<lV){const o=e,l=o+t,c=Math.cos(o),d=Math.sin(o),u=Math.cos(l),h=Math.sin(l),m=(e,t,n)=>CV(e,o,l,!0)?1:Math.max(t,t*r,n,n*r),p=(e,t,n)=>CV(e,o,l,!0)?-1:Math.min(t,t*r,n,n*r),f=m(0,c,u),g=m(hV,d,h),x=p(oV,c,u),y=p(oV+hV,d,h);n=(f-x)/2,a=(g-y)/2,s=-(f+x)/2,i=-(g+y)/2}return{ratioX:n,ratioY:a,offsetX:s,offsetY:i}}(d,c,o),f=(r.width-s)/u,g=(r.height-s)/h,x=Math.max(Math.min(f,g)/2,0),y=HW(this.options.radius,x),v=(y-Math.max(y*o,0))/this._getVisibleDatasetWeightTotal();this.offsetX=m*y,this.offsetY=p*y,n.total=this.calculateTotal(),this.outerRadius=y-v*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-v*l,0),this.updateElements(a,0,a.length,e)}_circumference(e,t){const r=this.options,n=this._cachedMeta,a=this._getCircumference();return t&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||null===n._parsed[e]||n.data[e].hidden?0:this.calculateCircumference(n._parsed[e]*a/lV)}updateElements(e,t,r,n){const a="reset"===n,s=this.chart,i=s.chartArea,o=s.options.animation,l=(i.left+i.right)/2,c=(i.top+i.bottom)/2,d=a&&o.animateScale,u=d?0:this.innerRadius,h=d?0:this.outerRadius,{sharedOptions:m,includeOptions:p}=this._getSharedOptions(t,n);let f,g=this._getRotation();for(f=0;f<t;++f)g+=this._circumference(f,a);for(f=t;f<t+r;++f){const t=this._circumference(f,a),r=e[f],s={x:l+this.offsetX,y:c+this.offsetY,startAngle:g,endAngle:g+t,circumference:t,outerRadius:h,innerRadius:u};p&&(s.options=m||this.resolveDataElementOptions(f,r.active?"active":n)),g+=t,this.updateElement(r,f,s,n)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let r,n=0;for(r=0;r<t.length;r++){const a=e._parsed[r];null===a||isNaN(a)||!this.chart.getDataVisibility(r)||t[r].hidden||(n+=Math.abs(a))}return n}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?lV*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,r=this.chart,n=r.data.labels||[],a=ZV(t._parsed[e],r.options.locale);return{label:n[e]||"",value:a}}getMaxBorderWidth(e){let t=0;const r=this.chart;let n,a,s,i,o;if(!e)for(n=0,a=r.data.datasets.length;n<a;++n)if(r.isDatasetVisible(n)){s=r.getDatasetMeta(n),e=s.data,i=s.controller;break}if(!e)return 0;for(n=0,a=e.length;n<a;++n)o=i.resolveDataElementOptions(n),"inner"!==o.borderAlign&&(t=Math.max(t,o.borderWidth||0,o.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let r=0,n=e.length;r<n;++r){const e=this.resolveDataElementOptions(r);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(t+=this._getRingWeight(r));return t}_getRingWeight(e){return Math.max(VW(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}(0,Re.A)(rK,"id","doughnut"),(0,Re.A)(rK,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),(0,Re.A)(rK,"descriptors",{_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),(0,Re.A)(rK,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data,{labels:{pointStyle:r,textAlign:n,color:a,useBorderRadius:s,borderRadius:i}}=e.legend.options;return t.labels.length&&t.datasets.length?t.labels.map((t,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:t,fillStyle:l.backgroundColor,fontColor:a,hidden:!e.getDataVisibility(o),lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:l.borderWidth,strokeStyle:l.borderColor,textAlign:n,pointStyle:r,borderRadius:s&&(i||l.borderRadius),index:o}}):[]}},onClick(e,t,r){r.chart.toggleDataVisibility(t.index),r.chart.update()}}}});class nK extends HG{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:r,data:n=[],_dataset:a}=t,s=this.chart._animationsDisabled;let{start:i,count:o}=UV(t,n,s);this._drawStart=i,this._drawCount=o,qV(t)&&(i=0,o=n.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!a._decimated,r.points=n;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(r,void 0,{animated:!s,options:l},e),this.updateElements(n,i,o,e)}updateElements(e,t,r,n){const a="reset"===n,{iScale:s,vScale:i,_stacked:o,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:d}=this._getSharedOptions(t,n),u=s.axis,h=i.axis,{spanGaps:m,segment:p}=this.options,f=vV(m)?m:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||a||"none"===n,x=t+r,y=e.length;let v=t>0&&this.getParsed(t-1);for(let b=0;b<y;++b){const r=e[b],m=g?r:{};if(b<t||b>=x){m.skip=!0;continue}const y=this.getParsed(b),j=BW(y[h]),w=m[u]=s.getPixelForValue(y[u],b),N=m[h]=a||j?i.getBasePixel():i.getPixelForValue(o?this.applyStack(i,y,o):y[h],b);m.skip=isNaN(w)||isNaN(N)||j,m.stop=b>0&&Math.abs(y[u]-v[u])>f,p&&(m.parsed=y,m.raw=l.data[b]),d&&(m.options=c||this.resolveDataElementOptions(b,r.active?"active":n)),g||this.updateElement(r,b,m,n),v=y}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,r=t.options&&t.options.borderWidth||0,n=e.data||[];if(!n.length)return r;const a=n[0].size(this.resolveDataElementOptions(0)),s=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(r,a,s)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}(0,Re.A)(nK,"id","line"),(0,Re.A)(nK,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),(0,Re.A)(nK,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class aK extends HG{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,r=this.chart,n=r.data.labels||[],a=ZV(t._parsed[e].r,r.options.locale);return{label:n[e]||"",value:a}}parseObjectData(e,t,r,n){return KH.bind(this)(e,t,r,n)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((e,r)=>{const n=this.getParsed(r).r;!isNaN(n)&&this.chart.getDataVisibility(r)&&(n<t.min&&(t.min=n),n>t.max&&(t.max=n))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,r=e.options,n=Math.min(t.right-t.left,t.bottom-t.top),a=Math.max(n/2,0),s=(a-Math.max(r.cutoutPercentage?a/100*r.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=a-s*this.index,this.innerRadius=this.outerRadius-s}updateElements(e,t,r,n){const a="reset"===n,s=this.chart,i=s.options.animation,o=this._cachedMeta.rScale,l=o.xCenter,c=o.yCenter,d=o.getIndexAngle(0)-.5*oV;let u,h=d;const m=360/this.countVisibleElements();for(u=0;u<t;++u)h+=this._computeAngle(u,n,m);for(u=t;u<t+r;u++){const t=e[u];let r=h,p=h+this._computeAngle(u,n,m),f=s.getDataVisibility(u)?o.getDistanceFromCenterForValue(this.getParsed(u).r):0;h=p,a&&(i.animateScale&&(f=0),i.animateRotate&&(r=p=d));const g={x:l,y:c,innerRadius:0,outerRadius:f,startAngle:r,endAngle:p,options:this.resolveDataElementOptions(u,t.active?"active":n)};this.updateElement(t,u,g,n)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((e,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&t++}),t}_computeAngle(e,t,r){return this.chart.getDataVisibility(e)?jV(this.resolveDataElementOptions(e,t).angle||r):0}}(0,Re.A)(aK,"id","polarArea"),(0,Re.A)(aK,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),(0,Re.A)(aK,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:r,color:n}}=e.legend.options;return t.labels.map((t,a)=>{const s=e.getDatasetMeta(0).controller.getStyle(a);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:n,lineWidth:s.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,t,r){r.chart.toggleDataVisibility(t.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class sK extends rK{}(0,Re.A)(sK,"id","pie"),(0,Re.A)(sK,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class iK extends HG{getLabelAndValue(e){const t=this._cachedMeta.vScale,r=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(r[t.axis])}}parseObjectData(e,t,r,n){return KH.bind(this)(e,t,r,n)}update(e){const t=this._cachedMeta,r=t.dataset,n=t.data||[],a=t.iScale.getLabels();if(r.points=n,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const s={_loop:!0,_fullLoop:a.length===n.length,options:t};this.updateElement(r,void 0,s,e)}this.updateElements(n,0,n.length,e)}updateElements(e,t,r,n){const a=this._cachedMeta.rScale,s="reset"===n;for(let i=t;i<t+r;i++){const t=e[i],r=this.resolveDataElementOptions(i,t.active?"active":n),o=a.getPointPositionForValue(i,this.getParsed(i).r),l=s?a.xCenter:o.x,c=s?a.yCenter:o.y,d={x:l,y:c,angle:o.angle,skip:isNaN(l)||isNaN(c),options:r};this.updateElement(t,i,d,n)}}}(0,Re.A)(iK,"id","radar"),(0,Re.A)(iK,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),(0,Re.A)(iK,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class oK extends HG{getLabelAndValue(e){const t=this._cachedMeta,r=this.chart.data.labels||[],{xScale:n,yScale:a}=t,s=this.getParsed(e),i=n.getLabelForValue(s.x),o=a.getLabelForValue(s.y);return{label:r[e]||"",value:"("+i+", "+o+")"}}update(e){const t=this._cachedMeta,{data:r=[]}=t,n=this.chart._animationsDisabled;let{start:a,count:s}=UV(t,r,n);if(this._drawStart=a,this._drawCount=s,qV(t)&&(a=0,s=r.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:s}=t;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!s._decimated,a.points=r;const i=this.resolveDatasetElementOptions(e);i.segment=this.options.segment,this.updateElement(a,void 0,{animated:!n,options:i},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(r,a,s,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,r,n){const a="reset"===n,{iScale:s,vScale:i,_stacked:o,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(t,n),d=this.getSharedOptions(c),u=this.includeOptions(n,d),h=s.axis,m=i.axis,{spanGaps:p,segment:f}=this.options,g=vV(p)?p:Number.POSITIVE_INFINITY,x=this.chart._animationsDisabled||a||"none"===n;let y=t>0&&this.getParsed(t-1);for(let v=t;v<t+r;++v){const t=e[v],r=this.getParsed(v),c=x?t:{},p=BW(r[m]),b=c[h]=s.getPixelForValue(r[h],v),j=c[m]=a||p?i.getBasePixel():i.getPixelForValue(o?this.applyStack(i,r,o):r[m],v);c.skip=isNaN(b)||isNaN(j)||p,c.stop=v>0&&Math.abs(r[h]-y[h])>g,f&&(c.parsed=r,c.raw=l.data[v]),u&&(c.options=d||this.resolveDataElementOptions(v,t.active?"active":n)),x||this.updateElement(t,v,c,n),y=r}this.updateSharedOptions(d,n,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let r=t.length-1;r>=0;--r)e=Math.max(e,t[r].size(this.resolveDataElementOptions(r))/2);return e>0&&e}const r=e.dataset,n=r.options&&r.options.borderWidth||0;if(!t.length)return n;const a=t[0].size(this.resolveDataElementOptions(0)),s=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(n,a,s)/2}}(0,Re.A)(oK,"id","scatter"),(0,Re.A)(oK,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),(0,Re.A)(oK,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var lK=Object.freeze({__proto__:null,BarController:eK,BubbleController:tK,DoughnutController:rK,LineController:nK,PieController:sK,PolarAreaController:aK,RadarController:iK,ScatterController:oK});function cK(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class dK{static override(e){Object.assign(dK.prototype,e)}constructor(e){(0,Re.A)(this,"options",void 0),this.options=e||{}}init(){}formats(){return cK()}parse(){return cK()}format(){return cK()}add(){return cK()}diff(){return cK()}startOf(){return cK()}endOf(){return cK()}}var uK=dK;function hK(e,t,r,n){const{controller:a,data:s,_sorted:i}=e,o=a._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(o&&t===o.axis&&"r"!==t&&i&&s.length){const i=o._reversePixels?DV:OV;if(!n){const n=i(s,t,r);if(l){const{vScale:t}=a._cachedMeta,{_parsed:r}=e,s=r.slice(0,n.lo+1).reverse().findIndex(e=>!BW(e[t.axis]));n.lo-=Math.max(0,s);const i=r.slice(n.hi).findIndex(e=>!BW(e[t.axis]));n.hi+=Math.max(0,i)}return n}if(a._sharedOptions){const e=s[0],n="function"===typeof e.getRange&&e.getRange(t);if(n){const e=i(s,t,r-n),a=i(s,t,r+n);return{lo:e.lo,hi:a.hi}}}}return{lo:0,hi:s.length-1}}function mK(e,t,r,n,a){const s=e.getSortedVisibleDatasetMetas(),i=r[t];for(let o=0,l=s.length;o<l;++o){const{index:e,data:r}=s[o],{lo:l,hi:c}=hK(s[o],t,i,a);for(let t=l;t<=c;++t){const a=r[t];a.skip||n(a,e,t)}}}function pK(e,t,r,n,a){const s=[];if(!a&&!e.isPointInArea(t))return s;return mK(e,r,t,function(r,i,o){(a||pH(r,e.chartArea,0))&&r.inRange(t.x,t.y,n)&&s.push({element:r,datasetIndex:i,index:o})},!0),s}function fK(e,t,r,n,a,s){let i=[];const o=function(e){const t=-1!==e.indexOf("x"),r=-1!==e.indexOf("y");return function(e,n){const a=t?Math.abs(e.x-n.x):0,s=r?Math.abs(e.y-n.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(s,2))}}(r);let l=Number.POSITIVE_INFINITY;return mK(e,r,t,function(r,c,d){const u=r.inRange(t.x,t.y,a);if(n&&!u)return;const h=r.getCenterPoint(a);if(!(!!s||e.isPointInArea(h))&&!u)return;const m=o(t,h);m<l?(i=[{element:r,datasetIndex:c,index:d}],l=m):m===l&&i.push({element:r,datasetIndex:c,index:d})}),i}function gK(e,t,r,n,a,s){return s||e.isPointInArea(t)?"r"!==r||n?fK(e,t,r,n,a,s):function(e,t,r,n){let a=[];return mK(e,r,t,function(e,r,s){const{startAngle:i,endAngle:o}=e.getProps(["startAngle","endAngle"],n),{angle:l}=_V(e,{x:t.x,y:t.y});CV(l,i,o)&&a.push({element:e,datasetIndex:r,index:s})}),a}(e,t,r,a):[]}function xK(e,t,r,n,a){const s=[],i="x"===r?"inXRange":"inYRange";let o=!1;return mK(e,r,t,(e,n,l)=>{e[i]&&e[i](t[r],a)&&(s.push({element:e,datasetIndex:n,index:l}),o=o||e.inRange(t.x,t.y,a))}),n&&!o?[]:s}var yK={evaluateInteractionItems:mK,modes:{index(e,t,r,n){const a=oG(t,e),s=r.axis||"x",i=r.includeInvisible||!1,o=r.intersect?pK(e,a,s,n,i):gK(e,a,s,!1,n,i),l=[];return o.length?(e.getSortedVisibleDatasetMetas().forEach(e=>{const t=o[0].index,r=e.data[t];r&&!r.skip&&l.push({element:r,datasetIndex:e.index,index:t})}),l):[]},dataset(e,t,r,n){const a=oG(t,e),s=r.axis||"xy",i=r.includeInvisible||!1;let o=r.intersect?pK(e,a,s,n,i):gK(e,a,s,!1,n,i);if(o.length>0){const t=o[0].datasetIndex,r=e.getDatasetMeta(t).data;o=[];for(let e=0;e<r.length;++e)o.push({element:r[e],datasetIndex:t,index:e})}return o},point:(e,t,r,n)=>pK(e,oG(t,e),r.axis||"xy",n,r.includeInvisible||!1),nearest(e,t,r,n){const a=oG(t,e),s=r.axis||"xy",i=r.includeInvisible||!1;return gK(e,a,s,r.intersect,n,i)},x:(e,t,r,n)=>xK(e,oG(t,e),"x",r.intersect,n),y:(e,t,r,n)=>xK(e,oG(t,e),"y",r.intersect,n)}};const vK=["left","top","right","bottom"];function bK(e,t){return e.filter(e=>e.pos===t)}function jK(e,t){return e.filter(e=>-1===vK.indexOf(e.pos)&&e.box.axis===t)}function wK(e,t){return e.sort((e,r)=>{const n=t?r:e,a=t?e:r;return n.weight===a.weight?n.index-a.index:n.weight-a.weight})}function NK(e,t){const r=function(e){const t={};for(const r of e){const{stack:e,pos:n,stackWeight:a}=r;if(!e||!vK.includes(n))continue;const s=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=a}return t}(e),{vBoxMaxWidth:n,hBoxMaxHeight:a}=t;let s,i,o;for(s=0,i=e.length;s<i;++s){o=e[s];const{fullSize:i}=o.box,l=r[o.stack],c=l&&o.stackWeight/l.weight;o.horizontal?(o.width=c?c*n:i&&t.availableWidth,o.height=a):(o.width=n,o.height=c?c*a:i&&t.availableHeight)}return r}function _K(e,t,r,n){return Math.max(e[r],t[r])+Math.max(e[n],t[n])}function kK(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function SK(e,t,r,n){const{pos:a,box:s}=r,i=e.maxPadding;if(!UW(a)){r.size&&(e[a]-=r.size);const t=n[r.stack]||{size:0,count:1};t.size=Math.max(t.size,r.horizontal?s.height:s.width),r.size=t.size/t.count,e[a]+=r.size}s.getPadding&&kK(i,s.getPadding());const o=Math.max(0,t.outerWidth-_K(i,e,"left","right")),l=Math.max(0,t.outerHeight-_K(i,e,"top","bottom")),c=o!==e.w,d=l!==e.h;return e.w=o,e.h=l,r.horizontal?{same:c,other:d}:{same:d,other:c}}function AK(e,t){const r=t.maxPadding;function n(e){const n={left:0,top:0,right:0,bottom:0};return e.forEach(e=>{n[e]=Math.max(t[e],r[e])}),n}return n(e?["left","right"]:["top","bottom"])}function CK(e,t,r,n){const a=[];let s,i,o,l,c,d;for(s=0,i=e.length,c=0;s<i;++s){o=e[s],l=o.box,l.update(o.width||t.w,o.height||t.h,AK(o.horizontal,t));const{same:i,other:u}=SK(t,r,o,n);c|=i&&a.length,d=d||u,l.fullSize||a.push(o)}return c&&CK(a,t,r,n)||d}function EK(e,t,r,n,a){e.top=r,e.left=t,e.right=t+n,e.bottom=r+a,e.width=n,e.height=a}function TK(e,t,r,n){const a=r.padding;let{x:s,y:i}=t;for(const o of e){const e=o.box,l=n[o.stack]||{count:1,placed:0,weight:1},c=o.stackWeight/l.weight||1;if(o.horizontal){const n=t.w*c,s=l.size||e.height;aV(l.start)&&(i=l.start),e.fullSize?EK(e,a.left,i,r.outerWidth-a.right-a.left,s):EK(e,t.left+l.placed,i,n,s),l.start=i,l.placed+=n,i=e.bottom}else{const n=t.h*c,i=l.size||e.width;aV(l.start)&&(s=l.start),e.fullSize?EK(e,s,a.top,i,r.outerHeight-a.bottom-a.top):EK(e,s,t.top+l.placed,i,n),l.start=s,l.placed+=n,s=e.right}}t.x=s,t.y=i}var PK={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const r=e.boxes?e.boxes.indexOf(t):-1;-1!==r&&e.boxes.splice(r,1)},configure(e,t,r){t.fullSize=r.fullSize,t.position=r.position,t.weight=r.weight},update(e,t,r,n){if(!e)return;const a=TH(e.options.layout.padding),s=Math.max(t-a.width,0),i=Math.max(r-a.height,0),o=function(e){const t=function(e){const t=[];let r,n,a,s,i,o;for(r=0,n=(e||[]).length;r<n;++r)a=e[r],({position:s,options:{stack:i,stackWeight:o=1}}=a),t.push({index:r,box:a,pos:s,horizontal:a.isHorizontal(),weight:a.weight,stack:i&&s+i,stackWeight:o});return t}(e),r=wK(t.filter(e=>e.box.fullSize),!0),n=wK(bK(t,"left"),!0),a=wK(bK(t,"right")),s=wK(bK(t,"top"),!0),i=wK(bK(t,"bottom")),o=jK(t,"x"),l=jK(t,"y");return{fullSize:r,leftAndTop:n.concat(s),rightAndBottom:a.concat(l).concat(i).concat(o),chartArea:bK(t,"chartArea"),vertical:n.concat(a).concat(l),horizontal:s.concat(i).concat(o)}}(e.boxes),l=o.vertical,c=o.horizontal;KW(e.boxes,e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()});const d=l.reduce((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1,0)||1,u=Object.freeze({outerWidth:t,outerHeight:r,padding:a,availableWidth:s,availableHeight:i,vBoxMaxWidth:s/2/d,hBoxMaxHeight:i/2}),h=Object.assign({},a);kK(h,TH(n));const m=Object.assign({maxPadding:h,w:s,h:i,x:a.left,y:a.top},a),p=NK(l.concat(c),u);CK(o.fullSize,m,u,p),CK(l,m,u,p),CK(c,m,u,p)&&CK(l,m,u,p),function(e){const t=e.maxPadding;function r(r){const n=Math.max(t[r]-e[r],0);return e[r]+=n,n}e.y+=r("top"),e.x+=r("left"),r("right"),r("bottom")}(m),TK(o.leftAndTop,m,u,p),m.x+=m.w,m.y+=m.h,TK(o.rightAndBottom,m,u,p),e.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},KW(o.chartArea,t=>{const r=t.box;Object.assign(r,e.chartArea),r.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class OK{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,r){}removeEventListener(e,t,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,r,n){return t=Math.max(0,t||e.width),r=r||e.height,{width:t,height:Math.max(0,n?Math.floor(t/n):r)}}isAttached(e){return!0}updateConfig(e){}}class DK extends OK{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const IK="$chartjs",LK={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},MK=e=>null===e||""===e;const RK=!!uG&&{passive:!0};function FK(e,t,r){e&&e.canvas&&e.canvas.removeEventListener(t,r,RK)}function BK(e,t){for(const r of e)if(r===t||r.contains(t))return!0}function zK(e,t,r){const n=e.canvas,a=new MutationObserver(e=>{let t=!1;for(const r of e)t=t||BK(r.addedNodes,n),t=t&&!BK(r.removedNodes,n);t&&r()});return a.observe(document,{childList:!0,subtree:!0}),a}function UK(e,t,r){const n=e.canvas,a=new MutationObserver(e=>{let t=!1;for(const r of e)t=t||BK(r.removedNodes,n),t=t&&!BK(r.addedNodes,n);t&&r()});return a.observe(document,{childList:!0,subtree:!0}),a}const qK=new Map;let WK=0;function VK(){const e=window.devicePixelRatio;e!==WK&&(WK=e,qK.forEach((t,r)=>{r.currentDevicePixelRatio!==e&&t()}))}function HK(e,t,r){const n=e.canvas,a=n&&rG(n);if(!a)return;const s=FV((e,t)=>{const n=a.clientWidth;r(e,t),n<a.clientWidth&&r()},window),i=new ResizeObserver(e=>{const t=e[0],r=t.contentRect.width,n=t.contentRect.height;0===r&&0===n||s(r,n)});return i.observe(a),function(e,t){qK.size||window.addEventListener("resize",VK),qK.set(e,t)}(e,s),i}function GK(e,t,r){r&&r.disconnect(),"resize"===t&&function(e){qK.delete(e),qK.size||window.removeEventListener("resize",VK)}(e)}function KK(e,t,r){const n=e.canvas,a=FV(t=>{null!==e.ctx&&r(function(e,t){const r=LK[e.type]||e.type,{x:n,y:a}=oG(e,t);return{type:r,chart:t,native:e,x:void 0!==n?n:null,y:void 0!==a?a:null}}(t,e))},e);return function(e,t,r){e&&e.addEventListener(t,r,RK)}(n,t,a),a}class YK extends OK{acquireContext(e,t){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(function(e,t){const r=e.style,n=e.getAttribute("height"),a=e.getAttribute("width");if(e[IK]={initial:{height:n,width:a,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",r.boxSizing=r.boxSizing||"border-box",MK(a)){const t=hG(e,"width");void 0!==t&&(e.width=t)}if(MK(n))if(""===e.style.height)e.height=e.width/(t||2);else{const t=hG(e,"height");void 0!==t&&(e.height=t)}}(e,t),r):null}releaseContext(e){const t=e.canvas;if(!t[IK])return!1;const r=t[IK].initial;["height","width"].forEach(e=>{const n=r[e];BW(n)?t.removeAttribute(e):t.setAttribute(e,n)});const n=r.style||{};return Object.keys(n).forEach(e=>{t.style[e]=n[e]}),t.width=t.width,delete t[IK],!0}addEventListener(e,t,r){this.removeEventListener(e,t);const n=e.$proxies||(e.$proxies={}),a={attach:zK,detach:UK,resize:HK}[t]||KK;n[t]=a(e,t,r)}removeEventListener(e,t){const r=e.$proxies||(e.$proxies={}),n=r[t];if(!n)return;({attach:GK,detach:GK,resize:GK}[t]||FK)(e,t,n),r[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,r,n){return cG(e,t,r,n)}isAttached(e){const t=e&&rG(e);return!(!t||!t.isConnected)}}class XK{constructor(){(0,Re.A)(this,"x",void 0),(0,Re.A)(this,"y",void 0),(0,Re.A)(this,"active",!1),(0,Re.A)(this,"options",void 0),(0,Re.A)(this,"$animations",void 0)}tooltipPosition(e){const{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}hasValue(){return vV(this.x)&&vV(this.y)}getProps(e,t){const r=this.$animations;if(!t||!r)return this;const n={};return e.forEach(e=>{n[e]=r[e]&&r[e].active()?r[e]._to:this[e]}),n}}function QK(e,t){const r=e.options.ticks,n=function(e){const t=e.options.offset,r=e._tickSize(),n=e._length/r+(t?0:1),a=e._maxLength/r;return Math.floor(Math.min(n,a))}(e),a=Math.min(r.maxTicksLimit||n,n),s=r.major.enabled?function(e){const t=[];let r,n;for(r=0,n=e.length;r<n;r++)e[r].major&&t.push(r);return t}(t):[],i=s.length,o=s[0],l=s[i-1],c=[];if(i>a)return function(e,t,r,n){let a,s=0,i=r[0];for(n=Math.ceil(n),a=0;a<e.length;a++)a===i&&(t.push(e[a]),s++,i=r[s*n])}(t,c,s,i/a),c;const d=function(e,t,r){const n=function(e){const t=e.length;let r,n;if(t<2)return!1;for(n=e[0],r=1;r<t;++r)if(e[r]-e[r-1]!==n)return!1;return n}(e),a=t.length/r;if(!n)return Math.max(a,1);const s=function(e){const t=[],r=Math.sqrt(e);let n;for(n=1;n<r;n++)e%n===0&&(t.push(n),t.push(e/n));return r===(0|r)&&t.push(r),t.sort((e,t)=>e-t).pop(),t}(n);for(let i=0,o=s.length-1;i<o;i++){const e=s[i];if(e>a)return e}return Math.max(a,1)}(s,t,a);if(i>0){let e,r;const n=i>1?Math.round((l-o)/(i-1)):null;for($K(t,c,d,BW(n)?0:o-n,o),e=0,r=i-1;e<r;e++)$K(t,c,d,s[e],s[e+1]);return $K(t,c,d,l,BW(n)?t.length:l+n),c}return $K(t,c,d),c}function $K(e,t,r,n,a){const s=VW(n,0),i=Math.min(VW(a,e.length),e.length);let o,l,c,d=0;for(r=Math.ceil(r),a&&(o=a-n,r=o/Math.floor(o/r)),c=s;c<0;)d++,c=Math.round(s+d*r);for(l=Math.max(s,0);l<i;l++)l===c&&(t.push(e[l]),d++,c=Math.round(s+d*r))}(0,Re.A)(XK,"defaults",{}),(0,Re.A)(XK,"defaultRoutes",void 0);const JK=(e,t,r)=>"top"===t||"left"===t?e[t]+r:e[t]-r,ZK=(e,t)=>Math.min(t||e,e);function eY(e,t){const r=[],n=e.length/t,a=e.length;let s=0;for(;s<a;s+=n)r.push(e[Math.floor(s)]);return r}function tY(e,t,r){const n=e.ticks.length,a=Math.min(t,n-1),s=e._startPixel,i=e._endPixel,o=1e-6;let l,c=e.getPixelForTick(a);if(!(r&&(l=1===n?Math.max(c-s,i-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(a-1))/2,c+=a<t?l:-l,c<s-o||c>i+o)))return c}function rY(e){return e.drawTicks?e.tickLength:0}function nY(e,t){if(!e.display)return 0;const r=PH(e.font,t),n=TH(e.padding);return(zW(e.text)?e.text.length:1)*r.lineHeight+n.height}function aY(e,t,r){let n=BV(e);return(r&&"right"!==t||!r&&"right"===t)&&(n=(e=>"left"===e?"right":"right"===e?"left":e)(n)),n}class sY extends XK{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:r,_suggestedMax:n}=this;return e=WW(e,Number.POSITIVE_INFINITY),t=WW(t,Number.NEGATIVE_INFINITY),r=WW(r,Number.POSITIVE_INFINITY),n=WW(n,Number.NEGATIVE_INFINITY),{min:WW(e,r),max:WW(t,n),minDefined:qW(e),maxDefined:qW(t)}}getMinMax(e){let t,{min:r,max:n,minDefined:a,maxDefined:s}=this.getUserBounds();if(a&&s)return{min:r,max:n};const i=this.getMatchingVisibleMetas();for(let o=0,l=i.length;o<l;++o)t=i[o].controller.getMinMax(this,e),a||(r=Math.min(r,t.min)),s||(n=Math.max(n,t.max));return r=s&&r>n?n:r,n=a&&r>n?r:n,{min:WW(r,WW(n,r)),max:WW(n,WW(r,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){GW(this.options.beforeUpdate,[this])}update(e,t,r){const{beginAtZero:n,grace:a,ticks:s}=this.options,i=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,r){const{min:n,max:a}=e,s=HW(t,(a-n)/2),i=(e,t)=>r&&0===e?0:e+t;return{min:i(n,-Math.abs(s)),max:i(a,s)}}(this,a,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const o=i<this.ticks.length;this._convertTicksToLabels(o?eY(this.ticks,i):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=QK(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),o&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,r=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,r=!r),this._startPixel=e,this._endPixel=t,this._reversePixels=r,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){GW(this.options.afterUpdate,[this])}beforeSetDimensions(){GW(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){GW(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),GW(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){GW(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let r,n,a;for(r=0,n=e.length;r<n;r++)a=e[r],a.label=GW(t.callback,[a.value,r,e],this)}afterTickToLabelConversion(){GW(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){GW(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,r=ZK(this.ticks.length,e.ticks.maxTicksLimit),n=t.minRotation||0,a=t.maxRotation;let s,i,o,l=n;if(!this._isVisible()||!t.display||n>=a||r<=1||!this.isHorizontal())return void(this.labelRotation=n);const c=this._getLabelSizes(),d=c.widest.width,u=c.highest.height,h=EV(this.chart.width-d,0,this.maxWidth);s=e.offset?this.maxWidth/r:h/(r-1),d+6>s&&(s=h/(r-(e.offset?.5:1)),i=this.maxHeight-rY(e.grid)-t.padding-nY(e.title,this.chart.options.font),o=Math.sqrt(d*d+u*u),l=wV(Math.min(Math.asin(EV((c.highest.height+6)/s,-1,1)),Math.asin(EV(i/o,-1,1))-Math.asin(EV(u/o,-1,1)))),l=Math.max(n,Math.min(a,l))),this.labelRotation=l}afterCalculateLabelRotation(){GW(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){GW(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:r,title:n,grid:a}}=this,s=this._isVisible(),i=this.isHorizontal();if(s){const s=nY(n,t.options.font);if(i?(e.width=this.maxWidth,e.height=rY(a)+s):(e.height=this.maxHeight,e.width=rY(a)+s),r.display&&this.ticks.length){const{first:t,last:n,widest:a,highest:s}=this._getLabelSizes(),o=2*r.padding,l=jV(this.labelRotation),c=Math.cos(l),d=Math.sin(l);if(i){const t=r.mirror?0:d*a.width+c*s.height;e.height=Math.min(this.maxHeight,e.height+t+o)}else{const t=r.mirror?0:c*a.width+d*s.height;e.width=Math.min(this.maxWidth,e.width+t+o)}this._calculatePadding(t,n,d,c)}}this._handleMargins(),i?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,r,n){const{ticks:{align:a,padding:s},position:i}=this.options,o=0!==this.labelRotation,l="top"!==i&&"x"===this.axis;if(this.isHorizontal()){const i=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,u=0;o?l?(d=n*e.width,u=r*t.height):(d=r*e.height,u=n*t.width):"start"===a?u=t.width:"end"===a?d=e.width:"inner"!==a&&(d=e.width/2,u=t.width/2),this.paddingLeft=Math.max((d-i+s)*this.width/(this.width-i),0),this.paddingRight=Math.max((u-c+s)*this.width/(this.width-c),0)}else{let r=t.height/2,n=e.height/2;"start"===a?(r=0,n=e.height):"end"===a&&(r=t.height,n=0),this.paddingTop=r+s,this.paddingBottom=n+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){GW(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,r;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,r=e.length;t<r;t++)BW(e[t].label)&&(e.splice(t,1),r--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let r=this.ticks;t<r.length&&(r=eY(r,t)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,r){const{ctx:n,_longestTextCache:a}=this,s=[],i=[],o=Math.floor(t/ZK(t,r));let l,c,d,u,h,m,p,f,g,x,y,v=0,b=0;for(l=0;l<t;l+=o){if(u=e[l].label,h=this._resolveTickFontOptions(l),n.font=m=h.string,p=a[m]=a[m]||{data:{},gc:[]},f=h.lineHeight,g=x=0,BW(u)||zW(u)){if(zW(u))for(c=0,d=u.length;c<d;++c)y=u[c],BW(y)||zW(y)||(g=lH(n,p.data,p.gc,g,y),x+=f)}else g=lH(n,p.data,p.gc,g,u),x=f;s.push(g),i.push(x),v=Math.max(g,v),b=Math.max(x,b)}!function(e,t){KW(e,e=>{const r=e.gc,n=r.length/2;let a;if(n>t){for(a=0;a<n;++a)delete e.data[r[a]];r.splice(0,n)}})}(a,t);const j=s.indexOf(v),w=i.indexOf(b),N=e=>({width:s[e]||0,height:i[e]||0});return{first:N(0),last:N(t-1),widest:N(j),highest:N(w),widths:s,heights:i}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return function(e){return EV(e,-32768,32767)}(this._alignToPixels?dH(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const r=t[e];return r.$context||(r.$context=function(e,t,r){return DH(e,{tick:r,index:t,type:"tick"})}(this.getContext(),e,r))}return this.$context||(this.$context=function(e,t){return DH(e,{scale:t,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=jV(this.labelRotation),r=Math.abs(Math.cos(t)),n=Math.abs(Math.sin(t)),a=this._getLabelSizes(),s=e.autoSkipPadding||0,i=a?a.widest.width+s:0,o=a?a.highest.height+s:0;return this.isHorizontal()?o*r>i*n?i/r:o/n:o*n<i*r?o/r:i/n}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,r=this.chart,n=this.options,{grid:a,position:s,border:i}=n,o=a.offset,l=this.isHorizontal(),c=this.ticks.length+(o?1:0),d=rY(a),u=[],h=i.setContext(this.getContext()),m=h.display?h.width:0,p=m/2,f=function(e){return dH(r,e,m)};let g,x,y,v,b,j,w,N,_,k,S,A;if("top"===s)g=f(this.bottom),j=this.bottom-d,N=g-p,k=f(e.top)+p,A=e.bottom;else if("bottom"===s)g=f(this.top),k=e.top,A=f(e.bottom)-p,j=g+p,N=this.top+d;else if("left"===s)g=f(this.right),b=this.right-d,w=g-p,_=f(e.left)+p,S=e.right;else if("right"===s)g=f(this.left),_=e.left,S=f(e.right)-p,b=g+p,w=this.left+d;else if("x"===t){if("center"===s)g=f((e.top+e.bottom)/2+.5);else if(UW(s)){const e=Object.keys(s)[0],t=s[e];g=f(this.chart.scales[e].getPixelForValue(t))}k=e.top,A=e.bottom,j=g+p,N=j+d}else if("y"===t){if("center"===s)g=f((e.left+e.right)/2);else if(UW(s)){const e=Object.keys(s)[0],t=s[e];g=f(this.chart.scales[e].getPixelForValue(t))}b=g-p,w=b-d,_=e.left,S=e.right}const C=VW(n.ticks.maxTicksLimit,c),E=Math.max(1,Math.ceil(c/C));for(x=0;x<c;x+=E){const e=this.getContext(x),t=a.setContext(e),n=i.setContext(e),s=t.lineWidth,c=t.color,d=n.dash||[],h=n.dashOffset,m=t.tickWidth,p=t.tickColor,f=t.tickBorderDash||[],g=t.tickBorderDashOffset;y=tY(this,x,o),void 0!==y&&(v=dH(r,y,s),l?b=w=_=S=v:j=N=k=A=v,u.push({tx1:b,ty1:j,tx2:w,ty2:N,x1:_,y1:k,x2:S,y2:A,width:s,color:c,borderDash:d,borderDashOffset:h,tickWidth:m,tickColor:p,tickBorderDash:f,tickBorderDashOffset:g}))}return this._ticksLength=c,this._borderValue=g,u}_computeLabelItems(e){const t=this.axis,r=this.options,{position:n,ticks:a}=r,s=this.isHorizontal(),i=this.ticks,{align:o,crossAlign:l,padding:c,mirror:d}=a,u=rY(r.grid),h=u+c,m=d?-c:h,p=-jV(this.labelRotation),f=[];let g,x,y,v,b,j,w,N,_,k,S,A,C="middle";if("top"===n)j=this.bottom-m,w=this._getXAxisLabelAlignment();else if("bottom"===n)j=this.top+m,w=this._getXAxisLabelAlignment();else if("left"===n){const e=this._getYAxisLabelAlignment(u);w=e.textAlign,b=e.x}else if("right"===n){const e=this._getYAxisLabelAlignment(u);w=e.textAlign,b=e.x}else if("x"===t){if("center"===n)j=(e.top+e.bottom)/2+h;else if(UW(n)){const e=Object.keys(n)[0],t=n[e];j=this.chart.scales[e].getPixelForValue(t)+h}w=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===n)b=(e.left+e.right)/2-h;else if(UW(n)){const e=Object.keys(n)[0],t=n[e];b=this.chart.scales[e].getPixelForValue(t)}w=this._getYAxisLabelAlignment(u).textAlign}"y"===t&&("start"===o?C="top":"end"===o&&(C="bottom"));const E=this._getLabelSizes();for(g=0,x=i.length;g<x;++g){y=i[g],v=y.label;const e=a.setContext(this.getContext(g));N=this.getPixelForTick(g)+a.labelOffset,_=this._resolveTickFontOptions(g),k=_.lineHeight,S=zW(v)?v.length:1;const t=S/2,r=e.color,o=e.textStrokeColor,c=e.textStrokeWidth;let u,h=w;if(s?(b=N,"inner"===w&&(h=g===x-1?this.options.reverse?"left":"right":0===g?this.options.reverse?"right":"left":"center"),A="top"===n?"near"===l||0!==p?-S*k+k/2:"center"===l?-E.highest.height/2-t*k+k:-E.highest.height+k/2:"near"===l||0!==p?k/2:"center"===l?E.highest.height/2-t*k:E.highest.height-S*k,d&&(A*=-1),0===p||e.showLabelBackdrop||(b+=k/2*Math.sin(p))):(j=N,A=(1-S)*k/2),e.showLabelBackdrop){const t=TH(e.backdropPadding),r=E.heights[g],n=E.widths[g];let a=A-t.top,s=0-t.left;switch(C){case"middle":a-=r/2;break;case"bottom":a-=r}switch(w){case"center":s-=n/2;break;case"right":s-=n;break;case"inner":g===x-1?s-=n:g>0&&(s-=n/2)}u={left:s,top:a,width:n+t.width,height:r+t.height,color:e.backdropColor}}f.push({label:v,font:_,textOffset:A,options:{rotation:p,color:r,strokeColor:o,strokeWidth:c,textAlign:h,textBaseline:C,translation:[b,j],backdrop:u}})}return f}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-jV(this.labelRotation))return"top"===e?"left":"right";let r="center";return"start"===t.align?r="left":"end"===t.align?r="right":"inner"===t.align&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:r,mirror:n,padding:a}}=this.options,s=e+a,i=this._getLabelSizes().widest.width;let o,l;return"left"===t?n?(l=this.right+a,"near"===r?o="left":"center"===r?(o="center",l+=i/2):(o="right",l+=i)):(l=this.right-s,"near"===r?o="right":"center"===r?(o="center",l-=i/2):(o="left",l=this.left)):"right"===t?n?(l=this.left+a,"near"===r?o="right":"center"===r?(o="center",l-=i/2):(o="left",l-=i)):(l=this.left+s,"near"===r?o="left":"center"===r?(o="center",l+=i/2):(o="right",l=this.right)):o="right",{textAlign:o,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:r,top:n,width:a,height:s}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(r,n,a,s),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const r=this.ticks.findIndex(t=>t.value===e);if(r>=0){return t.setContext(this.getContext(r)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,r=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let a,s;const i=(e,t,n)=>{n.width&&n.color&&(r.save(),r.lineWidth=n.width,r.strokeStyle=n.color,r.setLineDash(n.borderDash||[]),r.lineDashOffset=n.borderDashOffset,r.beginPath(),r.moveTo(e.x,e.y),r.lineTo(t.x,t.y),r.stroke(),r.restore())};if(t.display)for(a=0,s=n.length;a<s;++a){const e=n[a];t.drawOnChartArea&&i({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&i({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:r,grid:n}}=this,a=r.setContext(this.getContext()),s=r.display?a.width:0;if(!s)return;const i=n.setContext(this.getContext(0)).lineWidth,o=this._borderValue;let l,c,d,u;this.isHorizontal()?(l=dH(e,this.left,s)-s/2,c=dH(e,this.right,i)+i/2,d=u=o):(d=dH(e,this.top,s)-s/2,u=dH(e,this.bottom,i)+i/2,l=c=o),t.save(),t.lineWidth=a.width,t.strokeStyle=a.color,t.beginPath(),t.moveTo(l,d),t.lineTo(c,u),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,r=this._computeLabelArea();r&&fH(t,r);const n=this.getLabelItems(e);for(const a of n){const e=a.options,r=a.font;jH(t,a.label,0,a.textOffset,r,e)}r&&gH(t)}drawTitle(){const{ctx:e,options:{position:t,title:r,reverse:n}}=this;if(!r.display)return;const a=PH(r.font),s=TH(r.padding),i=r.align;let o=a.lineHeight/2;"bottom"===t||"center"===t||UW(t)?(o+=s.bottom,zW(r.text)&&(o+=a.lineHeight*(r.text.length-1))):o+=s.top;const{titleX:l,titleY:c,maxWidth:d,rotation:u}=function(e,t,r,n){const{top:a,left:s,bottom:i,right:o,chart:l}=e,{chartArea:c,scales:d}=l;let u,h,m,p=0;const f=i-a,g=o-s;if(e.isHorizontal()){if(h=zV(n,s,o),UW(r)){const e=Object.keys(r)[0],n=r[e];m=d[e].getPixelForValue(n)+f-t}else m="center"===r?(c.bottom+c.top)/2+f-t:JK(e,r,t);u=o-s}else{if(UW(r)){const e=Object.keys(r)[0],n=r[e];h=d[e].getPixelForValue(n)-g+t}else h="center"===r?(c.left+c.right)/2-g+t:JK(e,r,t);m=zV(n,i,a),p="left"===r?-hV:hV}return{titleX:h,titleY:m,maxWidth:u,rotation:p}}(this,o,t,i);jH(e,r.text,0,0,a,{color:r.color,maxWidth:d,rotation:u,textAlign:aY(i,t,n),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,r=VW(e.grid&&e.grid.z,-1),n=VW(e.border&&e.border.z,0);return this._isVisible()&&this.draw===sY.prototype.draw?[{z:r,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",n=[];let a,s;for(a=0,s=t.length;a<s;++a){const s=t[a];s[r]!==this.id||e&&s.type!==e||n.push(s)}return n}_resolveTickFontOptions(e){return PH(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class iY{constructor(e,t,r){this.type=e,this.scope=t,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let r;(function(e){return"id"in e&&"defaults"in e})(t)&&(r=this.register(t));const n=this.items,a=e.id,s=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+e);return a in n||(n[a]=e,function(e,t,r){const n=JW(Object.create(null),[r?oH.get(r):{},oH.get(t),e.defaults]);oH.set(t,n),e.defaultRoutes&&function(e,t){Object.keys(t).forEach(r=>{const n=r.split("."),a=n.pop(),s=[e].concat(n).join("."),i=t[r].split("."),o=i.pop(),l=i.join(".");oH.route(s,a,l,o)})}(t,e.defaultRoutes);e.descriptors&&oH.describe(t,e.descriptors)}(e,s,r),this.override&&oH.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){const t=this.items,r=e.id,n=this.scope;r in t&&delete t[r],n&&r in oH[n]&&(delete oH[n][r],this.override&&delete rH[r])}}class oY{constructor(){this.controllers=new iY(HG,"datasets",!0),this.elements=new iY(XK,"elements"),this.plugins=new iY(Object,"plugins"),this.scales=new iY(sY,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("unregister",t,this.scales)}_each(e,t,r){[...t].forEach(t=>{const n=r||this._getRegistryForType(t);r||n.isForType(t)||n===this.plugins&&t.id?this._exec(e,n,t):KW(t,t=>{const n=r||this._getRegistryForType(t);this._exec(e,n,t)})})}_exec(e,t,r){const n=nV(e);GW(r["before"+n],[],r),t[e](r),GW(r["after"+n],[],r)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const r=this._typedRegistries[t];if(r.isForType(e))return r}return this.plugins}_get(e,t,r){const n=t.get(e);if(void 0===n)throw new Error('"'+e+'" is not a registered '+r+".");return n}}var lY=new oY;class cY{constructor(){this._init=void 0}notify(e,t,r,n){if("beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),void 0===this._init)return;const a=n?this._descriptors(e).filter(n):this._descriptors(e),s=this._notify(a,e,t,r);return"afterDestroy"===t&&(this._notify(a,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),s}_notify(e,t,r,n){n=n||{};for(const a of e){const e=a.plugin;if(!1===GW(e[r],[t,n,a.options],e)&&n.cancelable)return!1}return!0}invalidate(){BW(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const r=e&&e.config,n=VW(r.options&&r.options.plugins,{}),a=function(e){const t={},r=[],n=Object.keys(lY.plugins.items);for(let s=0;s<n.length;s++)r.push(lY.getPlugin(n[s]));const a=e.plugins||[];for(let s=0;s<a.length;s++){const e=a[s];-1===r.indexOf(e)&&(r.push(e),t[e.id]=!0)}return{plugins:r,localIds:t}}(r);return!1!==n||t?function(e,t,r,n){let{plugins:a,localIds:s}=t;const i=[],o=e.getContext();for(const l of a){const t=l.id,a=dY(r[t],n);null!==a&&i.push({plugin:l,options:uY(e.config,{plugin:l,local:s[t]},a,o)})}return i}(e,a,n,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],r=this._cache,n=(e,t)=>e.filter(e=>!t.some(t=>e.plugin.id===t.plugin.id));this._notify(n(t,r),e,"stop"),this._notify(n(r,t),e,"start")}}function dY(e,t){return t||!1!==e?!0===e?{}:e:null}function uY(e,t,r,n){let{plugin:a,local:s}=t;const i=e.pluginScopeKeys(a),o=e.getOptionScopes(r,i);return s&&a.defaults&&o.push(a.defaults),e.createResolver(o,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function hY(e,t){const r=oH.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||r.indexAxis||"x"}function mY(e){if("x"===e||"y"===e||"r"===e)return e}function pY(e){return"top"===e||"bottom"===e?"x":"left"===e||"right"===e?"y":void 0}function fY(e){if(mY(e))return e;for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(const a of r){const t=a.axis||pY(a.position)||e.length>1&&mY(e[0].toLowerCase());if(t)return t}throw new Error("Cannot determine type of '".concat(e,"' axis. Please provide 'axis' or 'position' option."))}function gY(e,t,r){if(r[t+"AxisID"]===e)return{axis:t}}function xY(e,t){const r=rH[e.type]||{scales:{}},n=t.scales||{},a=hY(e.type,t),s=Object.create(null);return Object.keys(n).forEach(t=>{const i=n[t];if(!UW(i))return console.error("Invalid scale configuration for scale: ".concat(t));if(i._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(t));const o=fY(t,i,function(e,t){if(t.data&&t.data.datasets){const r=t.data.datasets.filter(t=>t.xAxisID===e||t.yAxisID===e);if(r.length)return gY(e,"x",r[0])||gY(e,"y",r[0])}return{}}(t,e),oH.scales[i.type]),l=function(e,t){return e===t?"_index_":"_value_"}(o,a),c=r.scales||{};s[t]=ZW(Object.create(null),[{axis:o},i,c[o],c[l]])}),e.data.datasets.forEach(r=>{const a=r.type||e.type,i=r.indexAxis||hY(a,t),o=(rH[a]||{}).scales||{};Object.keys(o).forEach(e=>{const t=function(e,t){let r=e;return"_index_"===e?r=t:"_value_"===e&&(r="x"===t?"y":"x"),r}(e,i),a=r[t+"AxisID"]||t;s[a]=s[a]||Object.create(null),ZW(s[a],[{axis:t},n[a],o[e]])})}),Object.keys(s).forEach(e=>{const t=s[e];ZW(t,[oH.scales[t.type],oH.scale])}),s}function yY(e){const t=e.options||(e.options={});t.plugins=VW(t.plugins,{}),t.scales=xY(e,t)}function vY(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const bY=new Map,jY=new Set;function wY(e,t){let r=bY.get(e);return r||(r=t(),bY.set(e,r),jY.add(r)),r}const NY=(e,t,r)=>{const n=rV(t,r);void 0!==n&&e.add(n)};class _Y{constructor(e){this._config=function(e){return(e=e||{}).data=vY(e.data),yY(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=vY(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),yY(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return wY(e,()=>[["datasets.".concat(e),""]])}datasetAnimationScopeKeys(e,t){return wY("".concat(e,".transition.").concat(t),()=>[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]])}datasetElementScopeKeys(e,t){return wY("".concat(e,"-").concat(t),()=>[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]])}pluginScopeKeys(e){const t=e.id,r=this.type;return wY("".concat(r,"-plugin-").concat(t),()=>[["plugins.".concat(t),...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const r=this._scopeCache;let n=r.get(e);return n&&!t||(n=new Map,r.set(e,n)),n}getOptionScopes(e,t,r){const{options:n,type:a}=this,s=this._cachedScopes(e,r),i=s.get(t);if(i)return i;const o=new Set;t.forEach(t=>{e&&(o.add(e),t.forEach(t=>NY(o,e,t))),t.forEach(e=>NY(o,n,e)),t.forEach(e=>NY(o,rH[a]||{},e)),t.forEach(e=>NY(o,oH,e)),t.forEach(e=>NY(o,nH,e))});const l=Array.from(o);return 0===l.length&&l.push(Object.create(null)),jY.has(t)&&s.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,rH[t]||{},oH.datasets[t]||{},{type:t},oH,nH]}resolveNamedOptions(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const a={$shared:!0},{resolver:s,subPrefixes:i}=kY(this._resolverCache,e,n);let o=s;if(function(e,t){const{isScriptable:r,isIndexable:n}=MH(e);for(const a of t){const t=r(a),s=n(a),i=(s||t)&&e[a];if(t&&(sV(i)||SY(i))||s&&zW(i))return!0}return!1}(s,t)){a.$shared=!1;o=LH(s,r=sV(r)?r():r,this.createResolver(e,r,i))}for(const l of t)a[l]=o[l];return a}createResolver(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],n=arguments.length>3?arguments[3]:void 0;const{resolver:a}=kY(this._resolverCache,e,r);return UW(t)?LH(a,t,void 0,n):a}}function kY(e,t,r){let n=e.get(t);n||(n=new Map,e.set(t,n));const a=r.join();let s=n.get(a);if(!s){s={resolver:IH(t,r),subPrefixes:r.filter(e=>!e.toLowerCase().includes("hover"))},n.set(a,s)}return s}const SY=e=>UW(e)&&Object.getOwnPropertyNames(e).some(t=>sV(e[t]));const AY=["top","bottom","left","right","chartArea"];function CY(e,t){return"top"===e||"bottom"===e||-1===AY.indexOf(e)&&"x"===t}function EY(e,t){return function(r,n){return r[e]===n[e]?r[t]-n[t]:r[e]-n[e]}}function TY(e){const t=e.chart,r=t.options.animation;t.notifyPlugins("afterRender"),GW(r&&r.onComplete,[e],t)}function PY(e){const t=e.chart,r=t.options.animation;GW(r&&r.onProgress,[e],t)}function OY(e){return tG()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const DY={},IY=e=>{const t=OY(e);return Object.values(DY).filter(e=>e.canvas===t).pop()};function LY(e,t,r){const n=Object.keys(e);for(const a of n){const n=+a;if(n>=t){const s=e[a];delete e[a],(r>0||n>t)&&(e[n+r]=s)}}}class MY{static register(){lY.add(...arguments),RY()}static unregister(){lY.remove(...arguments),RY()}constructor(e,t){const r=this.config=new _Y(t),n=OY(e),a=IY(n);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const s=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||function(e){return!tG()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?DK:YK}(n)),this.platform.updateConfig(r);const i=this.platform.acquireContext(n,s.aspectRatio),o=i&&i.canvas,l=o&&o.height,c=o&&o.width;this.id=FW(),this.ctx=i,this.canvas=o,this.width=c,this.height=l,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new cY,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let r;return function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t?(clearTimeout(r),r=setTimeout(e,t,a)):e.apply(this,a),t}}(e=>this.update(e),s.resizeDelay||0),this._dataChanges=[],DY[this.id]=this,i&&o?(EG.listen(this,"complete",TY),EG.listen(this,"progress",PY),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:r,height:n,_aspectRatio:a}=this;return BW(e)?t&&a?a:n?r/n:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return lY}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():dG(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return uH(this.canvas,this.ctx),this}stop(){return EG.stop(this),this}resize(e,t){EG.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const r=this.options,n=this.canvas,a=r.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(n,e,t,a),i=r.devicePixelRatio||this.platform.getDevicePixelRatio(),o=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,dG(this,i,!0)&&(this.notifyPlugins("resize",{size:s}),GW(r.onResize,[this,s],this),this.attached&&this._doResize(o)&&this.render())}ensureScalesHaveIDs(){KW(this.options.scales||{},(e,t)=>{e.id=t})}buildOrUpdateScales(){const e=this.options,t=e.scales,r=this.scales,n=Object.keys(r).reduce((e,t)=>(e[t]=!1,e),{});let a=[];t&&(a=a.concat(Object.keys(t).map(e=>{const r=t[e],n=fY(e,r),a="r"===n,s="x"===n;return{options:r,dposition:a?"chartArea":s?"bottom":"left",dtype:a?"radialLinear":s?"category":"linear"}}))),KW(a,t=>{const a=t.options,s=a.id,i=fY(s,a),o=VW(a.type,t.dtype);void 0!==a.position&&CY(a.position,i)===CY(t.dposition)||(a.position=t.dposition),n[s]=!0;let l=null;if(s in r&&r[s].type===o)l=r[s];else{l=new(lY.getScale(o))({id:s,type:o,ctx:this.ctx,chart:this}),r[l.id]=l}l.init(a,e)}),KW(n,(e,t)=>{e||delete r[t]}),KW(r,e=>{PK.configure(this,e,e.options),PK.addBox(this,e)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,r=e.length;if(e.sort((e,t)=>e.index-t.index),r>t){for(let e=t;e<r;++e)this._destroyDatasetMeta(e);e.splice(t,r-t)}this._sortedMetasets=e.slice(0).sort(EY("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((e,r)=>{0===t.filter(t=>t===e._dataset).length&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let r,n;for(this._removeUnreferencedMetasets(),r=0,n=t.length;r<n;r++){const n=t[r];let a=this.getDatasetMeta(r);const s=n.type||this.config.type;if(a.type&&a.type!==s&&(this._destroyDatasetMeta(r),a=this.getDatasetMeta(r)),a.type=s,a.indexAxis=n.indexAxis||hY(s,this.options),a.order=n.order||0,a.index=r,a.label=""+n.label,a.visible=this.isDatasetVisible(r),a.controller)a.controller.updateIndex(r),a.controller.linkScales();else{const t=lY.getController(s),{datasetElementType:n,dataElementType:i}=oH.datasets[s];Object.assign(t,{dataElementType:lY.getElement(i),datasetElementType:n&&lY.getElement(n)}),a.controller=new t(this,r),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){KW(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const r=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!n&&-1===a.indexOf(e);e.buildOrUpdateElements(t),s=Math.max(+e.getMaxOverflow(),s)}s=this._minPadding=r.layout.autoPadding?s:0,this._updateLayout(s),n||KW(a,e=>{e.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(EY("z","_idx"));const{_active:i,_lastEvent:o}=this;o?this._eventHandler(o,!0):i.length&&this._updateHoverStyles(i,i,!0),this.render()}_updateScales(){KW(this.scales,e=>{PK.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),r=new Set(e.events);iV(t,r)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:r,start:n,count:a}of t){LY(e,n,"_removeElements"===r?-a:a)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,r=t=>new Set(e.filter(e=>e[0]===t).map((e,t)=>t+","+e.splice(1).join(","))),n=r(0);for(let a=1;a<t;a++)if(!iV(n,r(a)))return;return Array.from(n).map(e=>e.split(",")).map(e=>({method:e[1],start:+e[2],count:+e[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;PK.update(this,this.width,this.height,e);const t=this.chartArea,r=t.width<=0||t.height<=0;this._layers=[],KW(this.boxes,e=>{r&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))},this),this._layers.forEach((e,t)=>{e._idx=t}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,r=this.data.datasets.length;t<r;++t)this._updateDataset(t,sV(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const r=this.getDatasetMeta(e),n={meta:r,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",n)&&(r.controller._update(t),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(EG.has(this)?this.attached&&!EG.running(this)&&EG.start(this):(this.draw(),TY({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,r=[];let n,a;for(n=0,a=t.length;n<a;++n){const a=t[n];e&&!a.visible||r.push(a)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,r={meta:e,index:e.index,cancelable:!0},n=AG(this,e);!1!==this.notifyPlugins("beforeDatasetDraw",r)&&(n&&fH(t,n),e.controller.draw(),n&&gH(t),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return pH(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,r,n){const a=yK.modes[t];return"function"===typeof a?a(this,e,r,n):[]}getDatasetMeta(e){const t=this.data.datasets[e],r=this._metasets;let n=r.filter(e=>e&&e._dataset===t).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},r.push(n)),n}getContext(){return this.$context||(this.$context=DH(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const r=this.getDatasetMeta(e);return"boolean"===typeof r.hidden?!r.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,r){const n=r?"show":"hide",a=this.getDatasetMeta(e),s=a.controller._resolveAnimations(void 0,n);aV(t)?(a.data[t].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),s.update(a,{visible:r}),this.update(t=>t.datasetIndex===e?n:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),EG.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),uH(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete DY[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,r=(r,n)=>{t.addEventListener(this,r,n),e[r]=n},n=(e,t,r)=>{e.offsetX=t,e.offsetY=r,this._eventHandler(e)};KW(this.options.events,e=>r(e,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,r=(r,n)=>{t.addEventListener(this,r,n),e[r]=n},n=(r,n)=>{e[r]&&(t.removeEventListener(this,r,n),delete e[r])},a=(e,t)=>{this.canvas&&this.resize(e,t)};let s;const i=()=>{n("attach",i),this.attached=!0,this.resize(),r("resize",a),r("detach",s)};s=()=>{this.attached=!1,n("resize",a),this._stop(),this._resize(0,0),r("attach",i)},t.isAttached(this.canvas)?i():s()}unbindEvents(){KW(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},KW(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,r){const n=r?"set":"remove";let a,s,i,o;for("dataset"===t&&(a=this.getDatasetMeta(e[0].datasetIndex),a.controller["_"+n+"DatasetHoverStyle"]()),i=0,o=e.length;i<o;++i){s=e[i];const t=s&&this.getDatasetMeta(s.datasetIndex).controller;t&&t[n+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],r=e.map(e=>{let{datasetIndex:t,index:r}=e;const n=this.getDatasetMeta(t);if(!n)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:n.data[r],index:r}});!YW(r,t)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,t))}notifyPlugins(e,t,r){return this._plugins.notify(this,e,t,r)}isPluginEnabled(e){return 1===this._plugins._cache.filter(t=>t.plugin.id===e).length}_updateHoverStyles(e,t,r){const n=this.options.hover,a=(e,t)=>e.filter(e=>!t.some(t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)),s=a(t,e),i=r?e:a(e,t);s.length&&this.updateHoverStyle(s,n.mode,!1),i.length&&n.mode&&this.updateHoverStyle(i,n.mode,!0)}_eventHandler(e,t){const r={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},n=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",r,n))return;const a=this._handleEvent(e,t,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,n),(a||r.changed)&&this.render(),this}_handleEvent(e,t,r){const{_active:n=[],options:a}=this,s=t,i=this._getActiveElements(e,n,r,s),o=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,r,n){return r&&"mouseout"!==e.type?n?t:e:null}(e,this._lastEvent,r,o);r&&(this._lastEvent=null,GW(a.onHover,[e,i,this],this),o&&GW(a.onClick,[e,i,this],this));const c=!YW(i,n);return(c||t)&&(this._active=i,this._updateHoverStyles(i,n,t)),this._lastEvent=l,c}_getActiveElements(e,t,r,n){if("mouseout"===e.type)return[];if(!r)return t;const a=this.options.hover;return this.getElementsAtEventForMode(e,a.mode,a,n)}}function RY(){return KW(MY.instances,e=>e._plugins.invalidate())}function FY(e,t,r,n){const a=function(e){return AH(e,["outerStart","outerEnd","innerStart","innerEnd"])}(e.options.borderRadius),s=(r-t)/2,i=Math.min(s,n*t/2),o=e=>{const t=(r-Math.min(s,e))*n/2;return EV(e,0,Math.min(s,t))};return{outerStart:o(a.outerStart),outerEnd:o(a.outerEnd),innerStart:EV(a.innerStart,0,i),innerEnd:EV(a.innerEnd,0,i)}}function BY(e,t,r,n){return{x:r+e*Math.cos(t),y:n+e*Math.sin(t)}}function zY(e,t,r,n,a,s){const{x:i,y:o,startAngle:l,pixelMargin:c,innerRadius:d}=t,u=Math.max(t.outerRadius+n+r-c,0),h=d>0?d+n+r+c:0;let m=0;const p=a-l;if(n){const e=((d>0?d-n:0)+(u>0?u-n:0))/2;m=(p-(0!==e?p*e/(e+n):p))/2}const f=(p-Math.max(.001,p*u-r/oV)/u)/2,g=l+f+m,x=a-f-m,{outerStart:y,outerEnd:v,innerStart:b,innerEnd:j}=FY(t,h,u,x-g),w=u-y,N=u-v,_=g+y/w,k=x-v/N,S=h+b,A=h+j,C=g+b/S,E=x-j/A;if(e.beginPath(),s){const t=(_+k)/2;if(e.arc(i,o,u,_,t),e.arc(i,o,u,t,k),v>0){const t=BY(N,k,i,o);e.arc(t.x,t.y,v,k,x+hV)}const r=BY(A,x,i,o);if(e.lineTo(r.x,r.y),j>0){const t=BY(A,E,i,o);e.arc(t.x,t.y,j,x+hV,E+Math.PI)}const n=(x-j/h+(g+b/h))/2;if(e.arc(i,o,h,x-j/h,n,!0),e.arc(i,o,h,n,g+b/h,!0),b>0){const t=BY(S,C,i,o);e.arc(t.x,t.y,b,C+Math.PI,g-hV)}const a=BY(w,g,i,o);if(e.lineTo(a.x,a.y),y>0){const t=BY(w,_,i,o);e.arc(t.x,t.y,y,g-hV,_)}}else{e.moveTo(i,o);const t=Math.cos(_)*u+i,r=Math.sin(_)*u+o;e.lineTo(t,r);const n=Math.cos(k)*u+i,a=Math.sin(k)*u+o;e.lineTo(n,a)}e.closePath()}function UY(e,t,r,n,a){const{fullCircles:s,startAngle:i,circumference:o,options:l}=t,{borderWidth:c,borderJoinStyle:d,borderDash:u,borderDashOffset:h,borderRadius:m}=l,p="inner"===l.borderAlign;if(!c)return;e.setLineDash(u||[]),e.lineDashOffset=h,p?(e.lineWidth=2*c,e.lineJoin=d||"round"):(e.lineWidth=c,e.lineJoin=d||"bevel");let f=t.endAngle;if(s){zY(e,t,r,n,f,a);for(let t=0;t<s;++t)e.stroke();isNaN(o)||(f=i+(o%lV||lV))}p&&function(e,t,r){const{startAngle:n,pixelMargin:a,x:s,y:i,outerRadius:o,innerRadius:l}=t;let c=a/o;e.beginPath(),e.arc(s,i,o,n-c,r+c),l>a?(c=a/l,e.arc(s,i,l,r+c,n-c,!0)):e.arc(s,i,a,r+hV,n-hV),e.closePath(),e.clip()}(e,t,f),l.selfJoin&&f-i>=oV&&0===m&&"miter"!==d&&function(e,t,r){const{startAngle:n,x:a,y:s,outerRadius:i,innerRadius:o,options:l}=t,{borderWidth:c,borderJoinStyle:d}=l,u=Math.min(c/i,AV(n-r));if(e.beginPath(),e.arc(a,s,i-c/2,n+u/2,r-u/2),o>0){const t=Math.min(c/o,AV(n-r));e.arc(a,s,o+c/2,r-t/2,n+t/2,!0)}else{const t=Math.min(c/2,i*AV(n-r));if("round"===d)e.arc(a,s,t,r-oV/2,n+oV/2,!0);else if("bevel"===d){const i=2*t*t,o=-i*Math.cos(r+oV/2)+a,l=-i*Math.sin(r+oV/2)+s,c=i*Math.cos(n+oV/2)+a,d=i*Math.sin(n+oV/2)+s;e.lineTo(o,l),e.lineTo(c,d)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}(e,t,f),s||(zY(e,t,r,n,f,a),e.stroke())}(0,Re.A)(MY,"defaults",oH),(0,Re.A)(MY,"instances",DY),(0,Re.A)(MY,"overrides",rH),(0,Re.A)(MY,"registry",lY),(0,Re.A)(MY,"version","4.5.1"),(0,Re.A)(MY,"getChart",IY);class qY extends XK{constructor(e){super(),(0,Re.A)(this,"circumference",void 0),(0,Re.A)(this,"endAngle",void 0),(0,Re.A)(this,"fullCircles",void 0),(0,Re.A)(this,"innerRadius",void 0),(0,Re.A)(this,"outerRadius",void 0),(0,Re.A)(this,"pixelMargin",void 0),(0,Re.A)(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,r){const n=this.getProps(["x","y"],r),{angle:a,distance:s}=_V(n,{x:e,y:t}),{startAngle:i,endAngle:o,innerRadius:l,outerRadius:c,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),u=(this.options.spacing+this.options.borderWidth)/2,h=VW(d,o-i),m=CV(a,i,o)&&i!==o,p=h>=lV||m,f=TV(s,l+u,c+u);return p&&f}getCenterPoint(e){const{x:t,y:r,startAngle:n,endAngle:a,innerRadius:s,outerRadius:i}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:o,spacing:l}=this.options,c=(n+a)/2,d=(s+i+l+o)/2;return{x:t+Math.cos(c)*d,y:r+Math.sin(c)*d}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:r}=this,n=(t.offset||0)/4,a=(t.spacing||0)/2,s=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=r>lV?Math.floor(r/lV):0,0===r||this.innerRadius<0||this.outerRadius<0)return;e.save();const i=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(i)*n,Math.sin(i)*n);const o=n*(1-Math.sin(Math.min(oV,r||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,r,n,a){const{fullCircles:s,startAngle:i,circumference:o}=t;let l=t.endAngle;if(s){zY(e,t,r,n,l,a);for(let t=0;t<s;++t)e.fill();isNaN(o)||(l=i+(o%lV||lV))}zY(e,t,r,n,l,a),e.fill()}(e,this,o,a,s),UY(e,this,o,a,s),e.restore()}}function WY(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=VW(r.borderCapStyle,t.borderCapStyle),e.setLineDash(VW(r.borderDash,t.borderDash)),e.lineDashOffset=VW(r.borderDashOffset,t.borderDashOffset),e.lineJoin=VW(r.borderJoinStyle,t.borderJoinStyle),e.lineWidth=VW(r.borderWidth,t.borderWidth),e.strokeStyle=VW(r.borderColor,t.borderColor)}function VY(e,t,r){e.lineTo(r.x,r.y)}function HY(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=e.length,{start:a=0,end:s=n-1}=r,{start:i,end:o}=t,l=Math.max(a,i),c=Math.min(s,o),d=a<i&&s<i||a>o&&s>o;return{count:n,start:l,loop:t.loop,ilen:c<l&&!d?n+c-l:c-l}}function GY(e,t,r,n){const{points:a,options:s}=t,{count:i,start:o,loop:l,ilen:c}=HY(a,r,n),d=function(e){return e.stepped?xH:e.tension||"monotone"===e.cubicInterpolationMode?yH:VY}(s);let u,h,m,{move:p=!0,reverse:f}=n||{};for(u=0;u<=c;++u)h=a[(o+(f?c-u:u))%i],h.skip||(p?(e.moveTo(h.x,h.y),p=!1):d(e,m,h,f,s.stepped),m=h);return l&&(h=a[(o+(f?c:0))%i],d(e,m,h,f,s.stepped)),!!l}function KY(e,t,r,n){const a=t.points,{count:s,start:i,ilen:o}=HY(a,r,n),{move:l=!0,reverse:c}=n||{};let d,u,h,m,p,f,g=0,x=0;const y=e=>(i+(c?o-e:e))%s,v=()=>{m!==p&&(e.lineTo(g,p),e.lineTo(g,m),e.lineTo(g,f))};for(l&&(u=a[y(0)],e.moveTo(u.x,u.y)),d=0;d<=o;++d){if(u=a[y(d)],u.skip)continue;const t=u.x,r=u.y,n=0|t;n===h?(r<m?m=r:r>p&&(p=r),g=(x*g+t)/++x):(v(),e.lineTo(t,r),h=n,x=0,m=p=r),f=r}v()}function YY(e){const t=e.options,r=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!r?KY:GY}(0,Re.A)(qY,"id","arc"),(0,Re.A)(qY,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),(0,Re.A)(qY,"defaultRoutes",{backgroundColor:"backgroundColor"}),(0,Re.A)(qY,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e});const XY="function"===typeof Path2D;function QY(e,t,r,n){XY&&!t.options.segment?function(e,t,r,n){let a=t._path;a||(a=t._path=new Path2D,t.path(a,r,n)&&a.closePath()),WY(e,t.options),e.stroke(a)}(e,t,r,n):function(e,t,r,n){const{segments:a,options:s}=t,i=YY(t);for(const o of a)WY(e,s,o.style),e.beginPath(),i(e,t,o,{start:r,end:r+n-1})&&e.closePath(),e.stroke()}(e,t,r,n)}class $Y extends XK{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const r=this.options;if((r.tension||"monotone"===r.cubicInterpolationMode)&&!r.stepped&&!this._pointsUpdated){const n=r.spanGaps?this._loop:this._fullLoop;eG(this._points,r,e,n,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const r=e.points,n=e.options.spanGaps,a=r.length;if(!a)return[];const s=!!e._loop,{start:i,end:o}=function(e,t,r,n){let a=0,s=t-1;if(r&&!n)for(;a<t&&!e[a].skip;)a++;for(;a<t&&e[a].skip;)a++;for(a%=t,r&&(s+=a);s>a&&e[s%t].skip;)s--;return s%=t,{start:a,end:s}}(r,a,s,n);return NG(e,!0===n?[{start:i,end:o,loop:s}]:function(e,t,r,n){const a=e.length,s=[];let i,o=t,l=e[t];for(i=t+1;i<=r;++i){const r=e[i%a];r.skip||r.stop?l.skip||(n=!1,s.push({start:t%a,end:(i-1)%a,loop:n}),t=o=r.stop?i:null):(o=i,l.skip&&(t=i)),l=r}return null!==o&&s.push({start:t%a,end:o%a,loop:n}),s}(r,i,o<i?o+a:o,!!e._fullLoop&&0===i&&o===a-1),r,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,r=e.length;return r&&t[e[r-1].end]}interpolate(e,t){const r=this.options,n=e[t],a=this.points,s=wG(this,{property:t,start:n,end:n});if(!s.length)return;const i=[],o=function(e){return e.stepped?pG:e.tension||"monotone"===e.cubicInterpolationMode?fG:mG}(r);let l,c;for(l=0,c=s.length;l<c;++l){const{start:c,end:d}=s[l],u=a[c],h=a[d];if(u===h){i.push(u);continue}const m=o(u,h,Math.abs((n-u[t])/(h[t]-u[t])),r.stepped);m[t]=e[t],i.push(m)}return 1===i.length?i[0]:i}pathSegment(e,t,r){return YY(this)(e,this,t,r)}path(e,t,r){const n=this.segments,a=YY(this);let s=this._loop;t=t||0,r=r||this.points.length-t;for(const i of n)s&=a(e,this,i,{start:t,end:t+r-1});return!!s}draw(e,t,r,n){const a=this.options||{};(this.points||[]).length&&a.borderWidth&&(e.save(),QY(e,this,r,n),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function JY(e,t,r,n){const a=e.options,{[r]:s}=e.getProps([r],n);return Math.abs(t-s)<a.radius+a.hitRadius}(0,Re.A)($Y,"id","line"),(0,Re.A)($Y,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),(0,Re.A)($Y,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),(0,Re.A)($Y,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e});class ZY extends XK{constructor(e){super(),(0,Re.A)(this,"parsed",void 0),(0,Re.A)(this,"skip",void 0),(0,Re.A)(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,r){const n=this.options,{x:a,y:s}=this.getProps(["x","y"],r);return Math.pow(e-a,2)+Math.pow(t-s,2)<Math.pow(n.hitRadius+n.radius,2)}inXRange(e,t){return JY(this,e,"x",t)}inYRange(e,t){return JY(this,e,"y",t)}getCenterPoint(e){const{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const r=this.options;this.skip||r.radius<.1||!pH(this,t,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,hH(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function eX(e,t){const{x:r,y:n,base:a,width:s,height:i}=e.getProps(["x","y","base","width","height"],t);let o,l,c,d,u;return e.horizontal?(u=i/2,o=Math.min(r,a),l=Math.max(r,a),c=n-u,d=n+u):(u=s/2,o=r-u,l=r+u,c=Math.min(n,a),d=Math.max(n,a)),{left:o,top:c,right:l,bottom:d}}function tX(e,t,r,n){return e?0:EV(t,r,n)}function rX(e){const t=eX(e),r=t.right-t.left,n=t.bottom-t.top,a=function(e,t,r){const n=e.options.borderWidth,a=e.borderSkipped,s=CH(n);return{t:tX(a.top,s.top,0,r),r:tX(a.right,s.right,0,t),b:tX(a.bottom,s.bottom,0,r),l:tX(a.left,s.left,0,t)}}(e,r/2,n/2),s=function(e,t,r){const{enableBorderRadius:n}=e.getProps(["enableBorderRadius"]),a=e.options.borderRadius,s=EH(a),i=Math.min(t,r),o=e.borderSkipped,l=n||UW(a);return{topLeft:tX(!l||o.top||o.left,s.topLeft,0,i),topRight:tX(!l||o.top||o.right,s.topRight,0,i),bottomLeft:tX(!l||o.bottom||o.left,s.bottomLeft,0,i),bottomRight:tX(!l||o.bottom||o.right,s.bottomRight,0,i)}}(e,r/2,n/2);return{outer:{x:t.left,y:t.top,w:r,h:n,radius:s},inner:{x:t.left+a.l,y:t.top+a.t,w:r-a.l-a.r,h:n-a.t-a.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(a.t,a.l)),topRight:Math.max(0,s.topRight-Math.max(a.t,a.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(a.b,a.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(a.b,a.r))}}}}function nX(e,t,r,n){const a=null===t,s=null===r,i=e&&!(a&&s)&&eX(e,n);return i&&(a||TV(t,i.left,i.right))&&(s||TV(r,i.top,i.bottom))}function aX(e,t){e.rect(t.x,t.y,t.w,t.h)}function sX(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=e.x!==r.x?-t:0,a=e.y!==r.y?-t:0,s=(e.x+e.w!==r.x+r.w?t:0)-n,i=(e.y+e.h!==r.y+r.h?t:0)-a;return{x:e.x+n,y:e.y+a,w:e.w+s,h:e.h+i,radius:e.radius}}(0,Re.A)(ZY,"id","point"),(0,Re.A)(ZY,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),(0,Re.A)(ZY,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class iX extends XK{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:r,backgroundColor:n}}=this,{inner:a,outer:s}=rX(this),i=(o=s.radius).topLeft||o.topRight||o.bottomLeft||o.bottomRight?wH:aX;var o;e.save(),s.w===a.w&&s.h===a.h||(e.beginPath(),i(e,sX(s,t,a)),e.clip(),i(e,sX(a,-t,s)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),i(e,sX(a,t)),e.fillStyle=n,e.fill(),e.restore()}inRange(e,t,r){return nX(this,e,t,r)}inXRange(e,t){return nX(this,e,null,t)}inYRange(e,t){return nX(this,null,e,t)}getCenterPoint(e){const{x:t,y:r,base:n,horizontal:a}=this.getProps(["x","y","base","horizontal"],e);return{x:a?(t+n)/2:t,y:a?r:(r+n)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}(0,Re.A)(iX,"id","bar"),(0,Re.A)(iX,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),(0,Re.A)(iX,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var oX=Object.freeze({__proto__:null,ArcElement:qY,BarElement:iX,LineElement:$Y,PointElement:ZY});const lX=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],cX=lX.map(e=>e.replace("rgb(","rgba(").replace(")",", 0.5)"));function dX(e){return lX[e%lX.length]}function uX(e){return cX[e%cX.length]}function hX(e){let t=0;return(r,n)=>{const a=e.getDatasetMeta(n).controller;a instanceof rK?t=function(e,t){return e.backgroundColor=e.data.map(()=>dX(t++)),t}(r,t):a instanceof aK?t=function(e,t){return e.backgroundColor=e.data.map(()=>uX(t++)),t}(r,t):a&&(t=function(e,t){return e.borderColor=dX(t),e.backgroundColor=uX(t),++t}(r,t))}}function mX(e){let t;for(t in e)if(e[t].borderColor||e[t].backgroundColor)return!0;return!1}var pX={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(e,t,r){if(!r.enabled)return;const{data:{datasets:n},options:a}=e.config,{elements:s}=a,i=mX(n)||(o=a)&&(o.borderColor||o.backgroundColor)||s&&mX(s)||"rgba(0,0,0,0.1)"!==oH.borderColor||"rgba(0,0,0,0.1)"!==oH.backgroundColor;var o;if(!r.forceOverride&&i)return;const l=hX(e);n.forEach(l)}};function fX(e){if(e._decimated){const t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function gX(e){e.data.datasets.forEach(e=>{fX(e)})}var xX={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,r)=>{if(!r.enabled)return void gX(e);const n=e.width;e.data.datasets.forEach((t,a)=>{const{_data:s,indexAxis:i}=t,o=e.getDatasetMeta(a),l=s||t.data;if("y"===OH([i,e.options.indexAxis]))return;if(!o.controller.supportsDecimation)return;const c=e.scales[o.xAxisID];if("linear"!==c.type&&"time"!==c.type)return;if(e.options.parsing)return;let{start:d,count:u}=function(e,t){const r=t.length;let n,a=0;const{iScale:s}=e,{min:i,max:o,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(a=EV(OV(t,s.axis,i).lo,0,r-1)),n=c?EV(OV(t,s.axis,o).hi+1,a,r)-a:r-a,{start:a,count:n}}(o,l);if(u<=(r.threshold||4*n))return void fX(t);let h;switch(BW(s)&&(t._data=l,delete t.data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(e){this._data=e}})),r.algorithm){case"lttb":h=function(e,t,r,n,a){const s=a.samples||n;if(s>=r)return e.slice(t,t+r);const i=[],o=(r-2)/(s-2);let l=0;const c=t+r-1;let d,u,h,m,p,f=t;for(i[l++]=e[f],d=0;d<s-2;d++){let n,a=0,s=0;const c=Math.floor((d+1)*o)+1+t,g=Math.min(Math.floor((d+2)*o)+1,r)+t,x=g-c;for(n=c;n<g;n++)a+=e[n].x,s+=e[n].y;a/=x,s/=x;const y=Math.floor(d*o)+1+t,v=Math.min(Math.floor((d+1)*o)+1,r)+t,{x:b,y:j}=e[f];for(h=m=-1,n=y;n<v;n++)m=.5*Math.abs((b-a)*(e[n].y-j)-(b-e[n].x)*(s-j)),m>h&&(h=m,u=e[n],p=n);i[l++]=u,f=p}return i[l++]=e[c],i}(l,d,u,n,r);break;case"min-max":h=function(e,t,r,n){let a,s,i,o,l,c,d,u,h,m,p=0,f=0;const g=[],x=t+r-1,y=e[t].x,v=e[x].x-y;for(a=t;a<t+r;++a){s=e[a],i=(s.x-y)/v*n,o=s.y;const t=0|i;if(t===l)o<h?(h=o,c=a):o>m&&(m=o,d=a),p=(f*p+s.x)/++f;else{const r=a-1;if(!BW(c)&&!BW(d)){const t=Math.min(c,d),n=Math.max(c,d);t!==u&&t!==r&&g.push(Be(Be({},e[t]),{},{x:p})),n!==u&&n!==r&&g.push(Be(Be({},e[n]),{},{x:p}))}a>0&&r!==u&&g.push(e[r]),g.push(s),l=t,f=0,h=m=o,c=d=u=a}}return g}(l,d,u,n);break;default:throw new Error("Unsupported decimation algorithm '".concat(r.algorithm,"'"))}t._decimated=h})},destroy(e){gX(e)}};function yX(e,t,r,n){if(n)return;let a=t[e],s=r[e];return"angle"===e&&(a=AV(a),s=AV(s)),{property:e,start:a,end:s}}function vX(e,t,r){for(;t>e;t--){const e=r[t];if(!isNaN(e.x)&&!isNaN(e.y))break}return t}function bX(e,t,r,n){return e&&t?n(e[r],t[r]):e?e[r]:t?t[r]:0}function jX(e,t){let r=[],n=!1;return zW(e)?(n=!0,r=e):r=function(e,t){const{x:r=null,y:n=null}=e||{},a=t.points,s=[];return t.segments.forEach(e=>{let{start:t,end:i}=e;i=vX(t,i,a);const o=a[t],l=a[i];null!==n?(s.push({x:o.x,y:n}),s.push({x:l.x,y:n})):null!==r&&(s.push({x:r,y:o.y}),s.push({x:r,y:l.y}))}),s}(e,t),r.length?new $Y({points:r,options:{tension:0},_loop:n,_fullLoop:n}):null}function wX(e){return e&&!1!==e.fill}function NX(e,t,r){let n=e[t].fill;const a=[t];let s;if(!r)return n;for(;!1!==n&&-1===a.indexOf(n);){if(!qW(n))return n;if(s=e[n],!s)return!1;if(s.visible)return n;a.push(n),n=s.fill}return!1}function _X(e,t,r){const n=function(e){const t=e.options,r=t.fill;let n=VW(r&&r.target,r);void 0===n&&(n=!!t.backgroundColor);if(!1===n||null===n)return!1;if(!0===n)return"origin";return n}(e);if(UW(n))return!isNaN(n.value)&&n;let a=parseFloat(n);return qW(a)&&Math.floor(a)===a?function(e,t,r,n){"-"!==e&&"+"!==e||(r=t+r);if(r===t||r<0||r>=n)return!1;return r}(n[0],t,a,r):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function kX(e,t,r){const n=[];for(let a=0;a<r.length;a++){const s=r[a],{first:i,last:o,point:l}=SX(s,t,"x");if(!(!l||i&&o))if(i)n.unshift(l);else if(e.push(l),!o)break}e.push(...n)}function SX(e,t,r){const n=e.interpolate(t,r);if(!n)return{};const a=n[r],s=e.segments,i=e.points;let o=!1,l=!1;for(let c=0;c<s.length;c++){const e=s[c],t=i[e.start][r],n=i[e.end][r];if(TV(a,t,n)){o=a===t,l=a===n;break}}return{first:o,last:l,point:n}}class AX{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,r){const{x:n,y:a,radius:s}=this;return t=t||{start:0,end:lV},e.arc(n,a,s,t.end,t.start,!0),!r.bounds}interpolate(e){const{x:t,y:r,radius:n}=this,a=e.angle;return{x:t+Math.cos(a)*n,y:r+Math.sin(a)*n,angle:a}}}function CX(e){const{chart:t,fill:r,line:n}=e;if(qW(r))return function(e,t){const r=e.getDatasetMeta(t),n=r&&e.isDatasetVisible(t);return n?r.dataset:null}(t,r);if("stack"===r)return function(e){const{scale:t,index:r,line:n}=e,a=[],s=n.segments,i=n.points,o=function(e,t){const r=[],n=e.getMatchingVisibleMetas("line");for(let a=0;a<n.length;a++){const e=n[a];if(e.index===t)break;e.hidden||r.unshift(e.dataset)}return r}(t,r);o.push(jX({x:null,y:t.bottom},n));for(let l=0;l<s.length;l++){const e=s[l];for(let t=e.start;t<=e.end;t++)kX(a,i[t],o)}return new $Y({points:a,options:{}})}(e);if("shape"===r)return!0;const a=function(e){const t=e.scale||{};if(t.getPointPositionForValue)return function(e){const{scale:t,fill:r}=e,n=t.options,a=t.getLabels().length,s=n.reverse?t.max:t.min,i=function(e,t,r){let n;return n="start"===e?r:"end"===e?t.options.reverse?t.min:t.max:UW(e)?e.value:t.getBaseValue(),n}(r,t,s),o=[];if(n.grid.circular){const e=t.getPointPositionForValue(0,s);return new AX({x:e.x,y:e.y,radius:t.getDistanceFromCenterForValue(i)})}for(let l=0;l<a;++l)o.push(t.getPointPositionForValue(l,i));return o}(e);return function(e){const{scale:t={},fill:r}=e,n=function(e,t){let r=null;return"start"===e?r=t.bottom:"end"===e?r=t.top:UW(e)?r=t.getPixelForValue(e.value):t.getBasePixel&&(r=t.getBasePixel()),r}(r,t);if(qW(n)){const e=t.isHorizontal();return{x:e?n:null,y:e?null:n}}return null}(e)}(e);return a instanceof AX?a:jX(a,n)}function EX(e,t,r){const n=CX(t),{chart:a,index:s,line:i,scale:o,axis:l}=t,c=i.options,d=c.fill,u=c.backgroundColor,{above:h=u,below:m=u}=d||{},p=a.getDatasetMeta(s),f=AG(a,p);n&&i.points.length&&(fH(e,r),function(e,t){const{line:r,target:n,above:a,below:s,area:i,scale:o,clip:l}=t,c=r._loop?"angle":t.axis;e.save();let d=s;s!==a&&("x"===c?(TX(e,n,i.top),OX(e,{line:r,target:n,color:a,scale:o,property:c,clip:l}),e.restore(),e.save(),TX(e,n,i.bottom)):"y"===c&&(PX(e,n,i.left),OX(e,{line:r,target:n,color:s,scale:o,property:c,clip:l}),e.restore(),e.save(),PX(e,n,i.right),d=a));OX(e,{line:r,target:n,color:d,scale:o,property:c,clip:l}),e.restore()}(e,{line:i,target:n,above:h,below:m,area:r,scale:o,axis:l,clip:f}),gH(e))}function TX(e,t,r){const{segments:n,points:a}=t;let s=!0,i=!1;e.beginPath();for(const o of n){const{start:n,end:l}=o,c=a[n],d=a[vX(n,l,a)];s?(e.moveTo(c.x,c.y),s=!1):(e.lineTo(c.x,r),e.lineTo(c.x,c.y)),i=!!t.pathSegment(e,o,{move:i}),i?e.closePath():e.lineTo(d.x,r)}e.lineTo(t.first().x,r),e.closePath(),e.clip()}function PX(e,t,r){const{segments:n,points:a}=t;let s=!0,i=!1;e.beginPath();for(const o of n){const{start:n,end:l}=o,c=a[n],d=a[vX(n,l,a)];s?(e.moveTo(c.x,c.y),s=!1):(e.lineTo(r,c.y),e.lineTo(c.x,c.y)),i=!!t.pathSegment(e,o,{move:i}),i?e.closePath():e.lineTo(r,d.y)}e.lineTo(r,t.first().y),e.closePath(),e.clip()}function OX(e,t){const{line:r,target:n,property:a,color:s,scale:i,clip:o}=t,l=function(e,t,r){const n=e.segments,a=e.points,s=t.points,i=[];for(const o of n){let{start:e,end:n}=o;n=vX(e,n,a);const l=yX(r,a[e],a[n],o.loop);if(!t.segments){i.push({source:o,target:l,start:a[e],end:a[n]});continue}const c=wG(t,l);for(const t of c){const e=yX(r,s[t.start],s[t.end],t.loop),n=jG(o,a,e);for(const a of n)i.push({source:a,target:t,start:{[r]:bX(l,e,"start",Math.max)},end:{[r]:bX(l,e,"end",Math.min)}})}}return i}(r,n,a);for(const{source:c,target:d,start:u,end:h}of l){const{style:{backgroundColor:t=s}={}}=c,l=!0!==n;e.save(),e.fillStyle=t,DX(e,i,o,l&&yX(a,u,h)),e.beginPath();const m=!!r.pathSegment(e,c);let p;if(l){m?e.closePath():IX(e,n,h,a);const t=!!n.pathSegment(e,d,{move:m,reverse:!0});p=m&&t,p||IX(e,n,u,a)}e.closePath(),e.fill(p?"evenodd":"nonzero"),e.restore()}}function DX(e,t,r,n){const a=t.chart.chartArea,{property:s,start:i,end:o}=n||{};if("x"===s||"y"===s){let t,n,l,c;"x"===s?(t=i,n=a.top,l=o,c=a.bottom):(t=a.left,n=i,l=a.right,c=o),e.beginPath(),r&&(t=Math.max(t,r.left),l=Math.min(l,r.right),n=Math.max(n,r.top),c=Math.min(c,r.bottom)),e.rect(t,n,l-t,c-n),e.clip()}}function IX(e,t,r,n){const a=t.interpolate(r,n);a&&e.lineTo(a.x,a.y)}var LX={id:"filler",afterDatasetsUpdate(e,t,r){const n=(e.data.datasets||[]).length,a=[];let s,i,o,l;for(i=0;i<n;++i)s=e.getDatasetMeta(i),o=s.dataset,l=null,o&&o.options&&o instanceof $Y&&(l={visible:e.isDatasetVisible(i),index:i,fill:_X(o,i,n),chart:e,axis:s.controller.options.indexAxis,scale:s.vScale,line:o}),s.$filler=l,a.push(l);for(i=0;i<n;++i)l=a[i],l&&!1!==l.fill&&(l.fill=NX(a,i,r.propagate))},beforeDraw(e,t,r){const n="beforeDraw"===r.drawTime,a=e.getSortedVisibleDatasetMetas(),s=e.chartArea;for(let i=a.length-1;i>=0;--i){const t=a[i].$filler;t&&(t.line.updateControlPoints(s,t.axis),n&&t.fill&&EX(e.ctx,t,s))}},beforeDatasetsDraw(e,t,r){if("beforeDatasetsDraw"!==r.drawTime)return;const n=e.getSortedVisibleDatasetMetas();for(let a=n.length-1;a>=0;--a){const t=n[a].$filler;wX(t)&&EX(e.ctx,t,e.chartArea)}},beforeDatasetDraw(e,t,r){const n=t.meta.$filler;wX(n)&&"beforeDatasetDraw"===r.drawTime&&EX(e.ctx,n,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const MX=(e,t)=>{let{boxHeight:r=t,boxWidth:n=t}=e;return e.usePointStyle&&(r=Math.min(r,t),n=e.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:r,itemHeight:Math.max(t,r)}};class RX extends XK{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,r){this.maxWidth=e,this.maxHeight=t,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=GW(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(t=>e.filter(t,this.chart.data))),e.sort&&(t=t.sort((t,r)=>e.sort(t,r,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const r=e.labels,n=PH(r.font),a=n.size,s=this._computeTitleHeight(),{boxWidth:i,itemHeight:o}=MX(r,a);let l,c;t.font=n.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(s,a,i,o)+10):(c=this.maxHeight,l=this._fitCols(s,n,i,o)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,r,n){const{ctx:a,maxWidth:s,options:{labels:{padding:i}}}=this,o=this.legendHitBoxes=[],l=this.lineWidths=[0],c=n+i;let d=e;a.textAlign="left",a.textBaseline="middle";let u=-1,h=-c;return this.legendItems.forEach((e,m)=>{const p=r+t/2+a.measureText(e.text).width;(0===m||l[l.length-1]+p+2*i>s)&&(d+=c,l[l.length-(m>0?0:1)]=0,h+=c,u++),o[m]={left:0,top:h,row:u,width:p,height:n},l[l.length-1]+=p+i}),d}_fitCols(e,t,r,n){const{ctx:a,maxHeight:s,options:{labels:{padding:i}}}=this,o=this.legendHitBoxes=[],l=this.columnSizes=[],c=s-e;let d=i,u=0,h=0,m=0,p=0;return this.legendItems.forEach((e,s)=>{const{itemWidth:f,itemHeight:g}=function(e,t,r,n,a){const s=function(e,t,r,n){let a=e.text;a&&"string"!==typeof a&&(a=a.reduce((e,t)=>e.length>t.length?e:t));return t+r.size/2+n.measureText(a).width}(n,e,t,r),i=function(e,t,r){let n=e;"string"!==typeof t.text&&(n=FX(t,r));return n}(a,n,t.lineHeight);return{itemWidth:s,itemHeight:i}}(r,t,a,e,n);s>0&&h+g+2*i>c&&(d+=u+i,l.push({width:u,height:h}),m+=u+i,p++,u=h=0),o[s]={left:m,top:h,col:p,width:f,height:g},u=Math.max(u,f),h+=g+i}),d+=u,l.push({width:u,height:h}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:r,labels:{padding:n},rtl:a}}=this,s=gG(a,this.left,this.width);if(this.isHorizontal()){let a=0,i=zV(r,this.left+n,this.right-this.lineWidths[a]);for(const o of t)a!==o.row&&(a=o.row,i=zV(r,this.left+n,this.right-this.lineWidths[a])),o.top+=this.top+e+n,o.left=s.leftForLtr(s.x(i),o.width),i+=o.width+n}else{let a=0,i=zV(r,this.top+e+n,this.bottom-this.columnSizes[a].height);for(const o of t)o.col!==a&&(a=o.col,i=zV(r,this.top+e+n,this.bottom-this.columnSizes[a].height)),o.top=i,o.left+=this.left+n,o.left=s.leftForLtr(s.x(o.left),o.width),i+=o.height+n}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;fH(e,this),this._draw(),gH(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:r,ctx:n}=this,{align:a,labels:s}=e,i=oH.color,o=gG(e.rtl,this.left,this.width),l=PH(s.font),{padding:c}=s,d=l.size,u=d/2;let h;this.drawTitle(),n.textAlign=o.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=l.string;const{boxWidth:m,boxHeight:p,itemHeight:f}=MX(s,d),g=this.isHorizontal(),x=this._computeTitleHeight();h=g?{x:zV(a,this.left+c,this.right-r[0]),y:this.top+c+x,line:0}:{x:this.left+c,y:zV(a,this.top+x+c,this.bottom-t[0].height),line:0},xG(this.ctx,e.textDirection);const y=f+c;this.legendItems.forEach((v,b)=>{n.strokeStyle=v.fontColor,n.fillStyle=v.fontColor;const j=n.measureText(v.text).width,w=o.textAlign(v.textAlign||(v.textAlign=s.textAlign)),N=m+u+j;let _=h.x,k=h.y;o.setWidth(this.width),g?b>0&&_+N+c>this.right&&(k=h.y+=y,h.line++,_=h.x=zV(a,this.left+c,this.right-r[h.line])):b>0&&k+y>this.bottom&&(_=h.x=_+t[h.line].width+c,h.line++,k=h.y=zV(a,this.top+x+c,this.bottom-t[h.line].height));if(function(e,t,r){if(isNaN(m)||m<=0||isNaN(p)||p<0)return;n.save();const a=VW(r.lineWidth,1);if(n.fillStyle=VW(r.fillStyle,i),n.lineCap=VW(r.lineCap,"butt"),n.lineDashOffset=VW(r.lineDashOffset,0),n.lineJoin=VW(r.lineJoin,"miter"),n.lineWidth=a,n.strokeStyle=VW(r.strokeStyle,i),n.setLineDash(VW(r.lineDash,[])),s.usePointStyle){const i={radius:p*Math.SQRT2/2,pointStyle:r.pointStyle,rotation:r.rotation,borderWidth:a},l=o.xPlus(e,m/2);mH(n,i,l,t+u,s.pointStyleWidth&&m)}else{const s=t+Math.max((d-p)/2,0),i=o.leftForLtr(e,m),l=EH(r.borderRadius);n.beginPath(),Object.values(l).some(e=>0!==e)?wH(n,{x:i,y:s,w:m,h:p,radius:l}):n.rect(i,s,m,p),n.fill(),0!==a&&n.stroke()}n.restore()}(o.x(_),k,v),_=((e,t,r,n)=>e===(n?"left":"right")?r:"center"===e?(t+r)/2:t)(w,_+m+u,g?_+N:this.right,e.rtl),function(e,t,r){jH(n,r.text,e,t+f/2,l,{strikethrough:r.hidden,textAlign:o.textAlign(r.textAlign)})}(o.x(_),k,v),g)h.x+=N+c;else if("string"!==typeof v.text){const e=l.lineHeight;h.y+=FX(v,e)+c}else h.y+=y}),yG(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,r=PH(t.font),n=TH(t.padding);if(!t.display)return;const a=gG(e.rtl,this.left,this.width),s=this.ctx,i=t.position,o=r.size/2,l=n.top+o;let c,d=this.left,u=this.width;if(this.isHorizontal())u=Math.max(...this.lineWidths),c=this.top+l,d=zV(e.align,d,this.right-u);else{const t=this.columnSizes.reduce((e,t)=>Math.max(e,t.height),0);c=l+zV(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const h=zV(i,d,d+u);s.textAlign=a.textAlign(BV(i)),s.textBaseline="middle",s.strokeStyle=t.color,s.fillStyle=t.color,s.font=r.string,jH(s,t.text,h,c,r)}_computeTitleHeight(){const e=this.options.title,t=PH(e.font),r=TH(e.padding);return e.display?t.lineHeight+r.height:0}_getLegendItemAt(e,t){let r,n,a;if(TV(e,this.left,this.right)&&TV(t,this.top,this.bottom))for(a=this.legendHitBoxes,r=0;r<a.length;++r)if(n=a[r],TV(e,n.left,n.left+n.width)&&TV(t,n.top,n.top+n.height))return this.legendItems[r];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const r=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const n=this._hoveredItem,a=((e,t)=>null!==e&&null!==t&&e.datasetIndex===t.datasetIndex&&e.index===t.index)(n,r);n&&!a&&GW(t.onLeave,[e,n,this],this),this._hoveredItem=r,r&&!a&&GW(t.onHover,[e,r,this],this)}else r&&GW(t.onClick,[e,r,this],this)}}function FX(e,t){return t*(e.text?e.text.length:0)}var BX={id:"legend",_element:RX,start(e,t,r){const n=e.legend=new RX({ctx:e.ctx,options:r,chart:e});PK.configure(e,n,r),PK.addBox(e,n)},stop(e){PK.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,r){const n=e.legend;PK.configure(e,n,r),n.options=r},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,r){const n=t.datasetIndex,a=r.chart;a.isDatasetVisible(n)?(a.hide(n),t.hidden=!0):(a.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:r,pointStyle:n,textAlign:a,color:s,useBorderRadius:i,borderRadius:o}}=e.legend.options;return e._getSortedDatasetMetas().map(e=>{const l=e.controller.getStyle(r?0:void 0),c=TH(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:n||l.pointStyle,rotation:l.rotation,textAlign:a||l.textAlign,borderRadius:i&&(o||l.borderRadius),datasetIndex:e.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class zX extends XK{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const r=this.options;if(this.left=0,this.top=0,!r.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const n=zW(r.text)?r.text.length:1;this._padding=TH(r.padding);const a=n*PH(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:r,bottom:n,right:a,options:s}=this,i=s.align;let o,l,c,d=0;return this.isHorizontal()?(l=zV(i,r,a),c=t+e,o=a-r):("left"===s.position?(l=r+e,c=zV(i,n,t),d=-.5*oV):(l=a-e,c=zV(i,t,n),d=.5*oV),o=n-t),{titleX:l,titleY:c,maxWidth:o,rotation:d}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const r=PH(t.font),n=r.lineHeight/2+this._padding.top,{titleX:a,titleY:s,maxWidth:i,rotation:o}=this._drawArgs(n);jH(e,t.text,0,0,r,{color:t.color,maxWidth:i,rotation:o,textAlign:BV(t.align),textBaseline:"middle",translation:[a,s]})}}var UX={id:"title",_element:zX,start(e,t,r){!function(e,t){const r=new zX({ctx:e.ctx,options:t,chart:e});PK.configure(e,r,t),PK.addBox(e,r),e.titleBlock=r}(e,r)},stop(e){const t=e.titleBlock;PK.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,r){const n=e.titleBlock;PK.configure(e,n,r),n.options=r},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const qX=new WeakMap;var WX={id:"subtitle",start(e,t,r){const n=new zX({ctx:e.ctx,options:r,chart:e});PK.configure(e,n,r),PK.addBox(e,n),qX.set(e,n)},stop(e){PK.removeBox(e,qX.get(e)),qX.delete(e)},beforeUpdate(e,t,r){const n=qX.get(e);PK.configure(e,n,r),n.options=r},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const VX={average(e){if(!e.length)return!1;let t,r,n=new Set,a=0,s=0;for(t=0,r=e.length;t<r;++t){const r=e[t].element;if(r&&r.hasValue()){const e=r.tooltipPosition();n.add(e.x),a+=e.y,++s}}if(0===s||0===n.size)return!1;const i=[...n].reduce((e,t)=>e+t)/n.size;return{x:i,y:a/s}},nearest(e,t){if(!e.length)return!1;let r,n,a,s=t.x,i=t.y,o=Number.POSITIVE_INFINITY;for(r=0,n=e.length;r<n;++r){const n=e[r].element;if(n&&n.hasValue()){const e=kV(t,n.getCenterPoint());e<o&&(o=e,a=n)}}if(a){const e=a.tooltipPosition();s=e.x,i=e.y}return{x:s,y:i}}};function HX(e,t){return t&&(zW(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function GX(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function KX(e,t){const{element:r,datasetIndex:n,index:a}=t,s=e.getDatasetMeta(n).controller,{label:i,value:o}=s.getLabelAndValue(a);return{chart:e,label:i,parsed:s.getParsed(a),raw:e.data.datasets[n].data[a],formattedValue:o,dataset:s.getDataset(),dataIndex:a,datasetIndex:n,element:r}}function YX(e,t){const r=e.chart.ctx,{body:n,footer:a,title:s}=e,{boxWidth:i,boxHeight:o}=t,l=PH(t.bodyFont),c=PH(t.titleFont),d=PH(t.footerFont),u=s.length,h=a.length,m=n.length,p=TH(t.padding);let f=p.height,g=0,x=n.reduce((e,t)=>e+t.before.length+t.lines.length+t.after.length,0);if(x+=e.beforeBody.length+e.afterBody.length,u&&(f+=u*c.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),x){f+=m*(t.displayColors?Math.max(o,l.lineHeight):l.lineHeight)+(x-m)*l.lineHeight+(x-1)*t.bodySpacing}h&&(f+=t.footerMarginTop+h*d.lineHeight+(h-1)*t.footerSpacing);let y=0;const v=function(e){g=Math.max(g,r.measureText(e).width+y)};return r.save(),r.font=c.string,KW(e.title,v),r.font=l.string,KW(e.beforeBody.concat(e.afterBody),v),y=t.displayColors?i+2+t.boxPadding:0,KW(n,e=>{KW(e.before,v),KW(e.lines,v),KW(e.after,v)}),y=0,r.font=d.string,KW(e.footer,v),r.restore(),g+=p.width,{width:g,height:f}}function XX(e,t,r,n){const{x:a,width:s}=r,{width:i,chartArea:{left:o,right:l}}=e;let c="center";return"center"===n?c=a<=(o+l)/2?"left":"right":a<=s/2?c="left":a>=i-s/2&&(c="right"),function(e,t,r,n){const{x:a,width:s}=n,i=r.caretSize+r.caretPadding;return"left"===e&&a+s+i>t.width||"right"===e&&a-s-i<0||void 0}(c,e,t,r)&&(c="center"),c}function QX(e,t,r){const n=r.yAlign||t.yAlign||function(e,t){const{y:r,height:n}=t;return r<n/2?"top":r>e.height-n/2?"bottom":"center"}(e,r);return{xAlign:r.xAlign||t.xAlign||XX(e,t,r,n),yAlign:n}}function $X(e,t,r,n){const{caretSize:a,caretPadding:s,cornerRadius:i}=e,{xAlign:o,yAlign:l}=r,c=a+s,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:m}=EH(i);let p=function(e,t){let{x:r,width:n}=e;return"right"===t?r-=n:"center"===t&&(r-=n/2),r}(t,o);const f=function(e,t,r){let{y:n,height:a}=e;return"top"===t?n+=r:n-="bottom"===t?a+r:a/2,n}(t,l,c);return"center"===l?"left"===o?p+=c:"right"===o&&(p-=c):"left"===o?p-=Math.max(d,h)+a:"right"===o&&(p+=Math.max(u,m)+a),{x:EV(p,0,n.width-t.width),y:EV(f,0,n.height-t.height)}}function JX(e,t,r){const n=TH(r.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-n.right:e.x+n.left}function ZX(e){return HX([],GX(e))}function eQ(e,t){const r=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return r?e.override(r):e}const tQ={beforeTitle:RW,title(e){if(e.length>0){const t=e[0],r=t.chart.data.labels,n=r?r.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return r[t.dataIndex]}return""},afterTitle:RW,beforeBody:RW,beforeLabel:RW,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const r=e.formattedValue;return BW(r)||(t+=r),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:RW,afterBody:RW,beforeFooter:RW,footer:RW,afterFooter:RW};function rQ(e,t,r,n){const a=e[t].call(r,n);return"undefined"===typeof a?tQ[t].call(r,n):a}class nQ extends XK{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,r=this.options.setContext(this.getContext()),n=r.enabled&&t.options.animation&&r.animations,a=new DG(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,r=this._tooltipItems,DH(e,{tooltip:t,tooltipItems:r,type:"tooltip"})));var e,t,r}getTitle(e,t){const{callbacks:r}=t,n=rQ(r,"beforeTitle",this,e),a=rQ(r,"title",this,e),s=rQ(r,"afterTitle",this,e);let i=[];return i=HX(i,GX(n)),i=HX(i,GX(a)),i=HX(i,GX(s)),i}getBeforeBody(e,t){return ZX(rQ(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:r}=t,n=[];return KW(e,e=>{const t={before:[],lines:[],after:[]},a=eQ(r,e);HX(t.before,GX(rQ(a,"beforeLabel",this,e))),HX(t.lines,rQ(a,"label",this,e)),HX(t.after,GX(rQ(a,"afterLabel",this,e))),n.push(t)}),n}getAfterBody(e,t){return ZX(rQ(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:r}=t,n=rQ(r,"beforeFooter",this,e),a=rQ(r,"footer",this,e),s=rQ(r,"afterFooter",this,e);let i=[];return i=HX(i,GX(n)),i=HX(i,GX(a)),i=HX(i,GX(s)),i}_createItems(e){const t=this._active,r=this.chart.data,n=[],a=[],s=[];let i,o,l=[];for(i=0,o=t.length;i<o;++i)l.push(KX(this.chart,t[i]));return e.filter&&(l=l.filter((t,n,a)=>e.filter(t,n,a,r))),e.itemSort&&(l=l.sort((t,n)=>e.itemSort(t,n,r))),KW(l,t=>{const r=eQ(e.callbacks,t);n.push(rQ(r,"labelColor",this,t)),a.push(rQ(r,"labelPointStyle",this,t)),s.push(rQ(r,"labelTextColor",this,t))}),this.labelColors=n,this.labelPointStyles=a,this.labelTextColors=s,this.dataPoints=l,l}update(e,t){const r=this.options.setContext(this.getContext()),n=this._active;let a,s=[];if(n.length){const e=VX[r.position].call(this,n,this._eventPosition);s=this._createItems(r),this.title=this.getTitle(s,r),this.beforeBody=this.getBeforeBody(s,r),this.body=this.getBody(s,r),this.afterBody=this.getAfterBody(s,r),this.footer=this.getFooter(s,r);const t=this._size=YX(this,r),i=Object.assign({},e,t),o=QX(this.chart,r,i),l=$X(r,i,o,this.chart);this.xAlign=o.xAlign,this.yAlign=o.yAlign,a={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(a={opacity:0});this._tooltipItems=s,this.$context=void 0,a&&this._resolveAnimations().update(this,a),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,r,n){const a=this.getCaretPosition(e,r,n);t.lineTo(a.x1,a.y1),t.lineTo(a.x2,a.y2),t.lineTo(a.x3,a.y3)}getCaretPosition(e,t,r){const{xAlign:n,yAlign:a}=this,{caretSize:s,cornerRadius:i}=r,{topLeft:o,topRight:l,bottomLeft:c,bottomRight:d}=EH(i),{x:u,y:h}=e,{width:m,height:p}=t;let f,g,x,y,v,b;return"center"===a?(v=h+p/2,"left"===n?(f=u,g=f-s,y=v+s,b=v-s):(f=u+m,g=f+s,y=v-s,b=v+s),x=f):(g="left"===n?u+Math.max(o,c)+s:"right"===n?u+m-Math.max(l,d)-s:this.caretX,"top"===a?(y=h,v=y-s,f=g-s,x=g+s):(y=h+p,v=y+s,f=g+s,x=g-s),b=y),{x1:f,x2:g,x3:x,y1:y,y2:v,y3:b}}drawTitle(e,t,r){const n=this.title,a=n.length;let s,i,o;if(a){const l=gG(r.rtl,this.x,this.width);for(e.x=JX(this,r.titleAlign,r),t.textAlign=l.textAlign(r.titleAlign),t.textBaseline="middle",s=PH(r.titleFont),i=r.titleSpacing,t.fillStyle=r.titleColor,t.font=s.string,o=0;o<a;++o)t.fillText(n[o],l.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+i,o+1===a&&(e.y+=r.titleMarginBottom-i)}}_drawColorBox(e,t,r,n,a){const s=this.labelColors[r],i=this.labelPointStyles[r],{boxHeight:o,boxWidth:l}=a,c=PH(a.bodyFont),d=JX(this,"left",a),u=n.x(d),h=o<c.lineHeight?(c.lineHeight-o)/2:0,m=t.y+h;if(a.usePointStyle){const t={radius:Math.min(l,o)/2,pointStyle:i.pointStyle,rotation:i.rotation,borderWidth:1},r=n.leftForLtr(u,l)+l/2,c=m+o/2;e.strokeStyle=a.multiKeyBackground,e.fillStyle=a.multiKeyBackground,hH(e,t,r,c),e.strokeStyle=s.borderColor,e.fillStyle=s.backgroundColor,hH(e,t,r,c)}else{e.lineWidth=UW(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,e.strokeStyle=s.borderColor,e.setLineDash(s.borderDash||[]),e.lineDashOffset=s.borderDashOffset||0;const t=n.leftForLtr(u,l),r=n.leftForLtr(n.xPlus(u,1),l-2),i=EH(s.borderRadius);Object.values(i).some(e=>0!==e)?(e.beginPath(),e.fillStyle=a.multiKeyBackground,wH(e,{x:t,y:m,w:l,h:o,radius:i}),e.fill(),e.stroke(),e.fillStyle=s.backgroundColor,e.beginPath(),wH(e,{x:r,y:m+1,w:l-2,h:o-2,radius:i}),e.fill()):(e.fillStyle=a.multiKeyBackground,e.fillRect(t,m,l,o),e.strokeRect(t,m,l,o),e.fillStyle=s.backgroundColor,e.fillRect(r,m+1,l-2,o-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,t,r){const{body:n}=this,{bodySpacing:a,bodyAlign:s,displayColors:i,boxHeight:o,boxWidth:l,boxPadding:c}=r,d=PH(r.bodyFont);let u=d.lineHeight,h=0;const m=gG(r.rtl,this.x,this.width),p=function(r){t.fillText(r,m.x(e.x+h),e.y+u/2),e.y+=u+a},f=m.textAlign(s);let g,x,y,v,b,j,w;for(t.textAlign=s,t.textBaseline="middle",t.font=d.string,e.x=JX(this,f,r),t.fillStyle=r.bodyColor,KW(this.beforeBody,p),h=i&&"right"!==f?"center"===s?l/2+c:l+2+c:0,v=0,j=n.length;v<j;++v){for(g=n[v],x=this.labelTextColors[v],t.fillStyle=x,KW(g.before,p),y=g.lines,i&&y.length&&(this._drawColorBox(t,e,v,m,r),u=Math.max(d.lineHeight,o)),b=0,w=y.length;b<w;++b)p(y[b]),u=d.lineHeight;KW(g.after,p)}h=0,u=d.lineHeight,KW(this.afterBody,p),e.y-=a}drawFooter(e,t,r){const n=this.footer,a=n.length;let s,i;if(a){const o=gG(r.rtl,this.x,this.width);for(e.x=JX(this,r.footerAlign,r),e.y+=r.footerMarginTop,t.textAlign=o.textAlign(r.footerAlign),t.textBaseline="middle",s=PH(r.footerFont),t.fillStyle=r.footerColor,t.font=s.string,i=0;i<a;++i)t.fillText(n[i],o.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+r.footerSpacing}}drawBackground(e,t,r,n){const{xAlign:a,yAlign:s}=this,{x:i,y:o}=e,{width:l,height:c}=r,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:m}=EH(n.cornerRadius);t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.beginPath(),t.moveTo(i+d,o),"top"===s&&this.drawCaret(e,t,r,n),t.lineTo(i+l-u,o),t.quadraticCurveTo(i+l,o,i+l,o+u),"center"===s&&"right"===a&&this.drawCaret(e,t,r,n),t.lineTo(i+l,o+c-m),t.quadraticCurveTo(i+l,o+c,i+l-m,o+c),"bottom"===s&&this.drawCaret(e,t,r,n),t.lineTo(i+h,o+c),t.quadraticCurveTo(i,o+c,i,o+c-h),"center"===s&&"left"===a&&this.drawCaret(e,t,r,n),t.lineTo(i,o+d),t.quadraticCurveTo(i,o,i+d,o),t.closePath(),t.fill(),n.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,r=this.$animations,n=r&&r.x,a=r&&r.y;if(n||a){const r=VX[e.position].call(this,this._active,this._eventPosition);if(!r)return;const s=this._size=YX(this,e),i=Object.assign({},r,this._size),o=QX(t,e,i),l=$X(e,i,o,t);n._to===l.x&&a._to===l.y||(this.xAlign=o.xAlign,this.yAlign=o.yAlign,this.width=s.width,this.height=s.height,this.caretX=r.x,this.caretY=r.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(t);const n={width:this.width,height:this.height},a={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const s=TH(t.padding),i=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&i&&(e.save(),e.globalAlpha=r,this.drawBackground(a,e,n,t),xG(e,t.textDirection),a.y+=s.top,this.drawTitle(a,e,t),this.drawBody(a,e,t),this.drawFooter(a,e,t),yG(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const r=this._active,n=e.map(e=>{let{datasetIndex:t,index:r}=e;const n=this.chart.getDatasetMeta(t);if(!n)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:n.data[r],index:r}}),a=!YW(r,n),s=this._positionChanged(n,t);(a||s)&&(this._active=n,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,a=this._active||[],s=this._getActiveElements(e,a,t,r),i=this._positionChanged(s,e),o=t||!YW(s,a)||i;return o&&(this._active=s,(n.enabled||n.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),o}_getActiveElements(e,t,r,n){const a=this.options;if("mouseout"===e.type)return[];if(!n)return t.filter(e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index));const s=this.chart.getElementsAtEventForMode(e,a.mode,a,r);return a.reverse&&s.reverse(),s}_positionChanged(e,t){const{caretX:r,caretY:n,options:a}=this,s=VX[a.position].call(this,e,t);return!1!==s&&(r!==s.x||n!==s.y)}}(0,Re.A)(nQ,"positioners",VX);var aQ={id:"tooltip",_element:nQ,positioners:VX,afterInit(e,t,r){r&&(e.tooltip=new nQ({chart:e,options:r}))},beforeUpdate(e,t,r){e.tooltip&&e.tooltip.initialize(r)},reset(e,t,r){e.tooltip&&e.tooltip.initialize(r)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const r={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",Be(Be({},r),{},{cancelable:!0})))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",r)}},afterEvent(e,t){if(e.tooltip){const r=t.replay;e.tooltip.handleEvent(t.event,r,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:tQ},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},sQ=Object.freeze({__proto__:null,Colors:pX,Decimation:xX,Filler:LX,Legend:BX,SubTitle:WX,Title:UX,Tooltip:aQ});function iQ(e,t,r,n){const a=e.indexOf(t);if(-1===a)return((e,t,r,n)=>("string"===typeof t?(r=e.push(t)-1,n.unshift({index:r,label:t})):isNaN(t)&&(r=null),r))(e,t,r,n);return a!==e.lastIndexOf(t)?r:a}function oQ(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class lQ extends sY{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:r,label:n}of t)e[r]===n&&e.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(BW(e))return null;const r=this.getLabels();return((e,t)=>null===e?null:EV(Math.round(e),0,t))(t=isFinite(t)&&r[t]===e?t:iQ(r,e,VW(t,e),this._addedLabels),r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:r,max:n}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(r=0),t||(n=this.getLabels().length-1)),this.min=r,this.max=n}buildTicks(){const e=this.min,t=this.max,r=this.options.offset,n=[];let a=this.getLabels();a=0===e&&t===a.length-1?a:a.slice(e,t+1),this._valueRange=Math.max(a.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let s=e;s<=t;s++)n.push({value:s});return n}getLabelForValue(e){return oQ.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function cQ(e,t){const r=[],{bounds:n,step:a,min:s,max:i,precision:o,count:l,maxTicks:c,maxDigits:d,includeBounds:u}=e,h=a||1,m=c-1,{min:p,max:f}=t,g=!BW(s),x=!BW(i),y=!BW(l),v=(f-p)/(d+1);let b,j,w,N,_=yV((f-p)/m/h)*h;if(_<1e-14&&!g&&!x)return[{value:p},{value:f}];N=Math.ceil(f/_)-Math.floor(p/_),N>m&&(_=yV(N*_/m/h)*h),BW(o)||(b=Math.pow(10,o),_=Math.ceil(_*b)/b),"ticks"===n?(j=Math.floor(p/_)*_,w=Math.ceil(f/_)*_):(j=p,w=f),g&&x&&a&&function(e,t){const r=Math.round(e);return r-t<=e&&r+t>=e}((i-s)/a,_/1e3)?(N=Math.round(Math.min((i-s)/_,c)),_=(i-s)/N,j=s,w=i):y?(j=g?s:j,w=x?i:w,N=l-1,_=(w-j)/N):(N=(w-j)/_,N=xV(N,Math.round(N),_/1e3)?Math.round(N):Math.ceil(N));const k=Math.max(NV(_),NV(j));b=Math.pow(10,BW(o)?k:o),j=Math.round(j*b)/b,w=Math.round(w*b)/b;let S=0;for(g&&(u&&j!==s?(r.push({value:s}),j<s&&S++,xV(Math.round((j+S*_)*b)/b,s,dQ(s,v,e))&&S++):j<s&&S++);S<N;++S){const e=Math.round((j+S*_)*b)/b;if(x&&e>i)break;r.push({value:e})}return x&&u&&w!==i?r.length&&xV(r[r.length-1].value,i,dQ(i,v,e))?r[r.length-1].value=i:r.push({value:i}):x&&w!==i||r.push({value:w}),r}function dQ(e,t,r){let{horizontal:n,minRotation:a}=r;const s=jV(a),i=(n?Math.sin(s):Math.cos(s))||.001,o=.75*t*(""+e).length;return Math.min(t/i,o)}(0,Re.A)(lQ,"id","category"),(0,Re.A)(lQ,"defaults",{ticks:{callback:oQ}});class uQ extends sY{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return BW(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:r}=this.getUserBounds();let{min:n,max:a}=this;const s=e=>n=t?n:e,i=e=>a=r?a:e;if(e){const e=gV(n),t=gV(a);e<0&&t<0?i(0):e>0&&t>0&&s(0)}if(n===a){let t=0===a?1:Math.abs(.05*a);i(a+t),e||s(n-t)}this.min=n,this.max=a}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:r,stepSize:n}=e;return n?(t=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,t>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(n," would result generating up to ").concat(t," ticks. Limiting to 1000.")),t=1e3)):(t=this.computeTickLimit(),r=r||11),r&&(t=Math.min(r,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const n=cQ({maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&bV(n,this,"value"),e.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}configure(){const e=this.ticks;let t=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const n=(r-t)/Math.max(e.length-1,1)/2;t-=n,r+=n}this._startValue=t,this._endValue=r,this._valueRange=r-t}getLabelForValue(e){return ZV(e,this.chart.options.locale,this.options.ticks.format)}}class hQ extends uQ{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=qW(e)?e:0,this.max=qW(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,r=jV(this.options.ticks.minRotation),n=(e?Math.sin(r):Math.cos(r))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,a.lineHeight/n))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}(0,Re.A)(hQ,"id","linear"),(0,Re.A)(hQ,"defaults",{ticks:{callback:tH.formatters.numeric}});const mQ=e=>Math.floor(fV(e)),pQ=(e,t)=>Math.pow(10,mQ(e)+t);function fQ(e){return 1===e/Math.pow(10,mQ(e))}function gQ(e,t,r){const n=Math.pow(10,r),a=Math.floor(e/n);return Math.ceil(t/n)-a}function xQ(e,t){let{min:r,max:n}=t;r=WW(e.min,r);const a=[],s=mQ(r);let i=function(e,t){let r=mQ(t-e);for(;gQ(e,t,r)>10;)r++;for(;gQ(e,t,r)<10;)r--;return Math.min(r,mQ(e))}(r,n),o=i<0?Math.pow(10,Math.abs(i)):1;const l=Math.pow(10,i),c=s>i?Math.pow(10,s):0,d=Math.round((r-c)*o)/o,u=Math.floor((r-c)/l/10)*l*10;let h=Math.floor((d-u)/Math.pow(10,i)),m=WW(e.min,Math.round((c+u+h*Math.pow(10,i))*o)/o);for(;m<n;)a.push({value:m,major:fQ(m),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(i++,h=2,o=i>=0?1:o),m=Math.round((c+u+h*Math.pow(10,i))*o)/o;const p=WW(e.max,m);return a.push({value:p,major:fQ(p),significand:h}),a}class yQ extends sY{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const r=uQ.prototype.parse.apply(this,[e,t]);if(0!==r)return qW(r)&&r>0?r:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=qW(e)?Math.max(0,e):null,this.max=qW(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!qW(this._userMin)&&(this.min=e===pQ(this.min,0)?pQ(this.min,-1):pQ(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let r=this.min,n=this.max;const a=t=>r=e?r:t,s=e=>n=t?n:e;r===n&&(r<=0?(a(1),s(10)):(a(pQ(r,-1)),s(pQ(n,1)))),r<=0&&a(pQ(n,-1)),n<=0&&s(pQ(r,1)),this.min=r,this.max=n}buildTicks(){const e=this.options,t=xQ({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&bV(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":ZV(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=fV(e),this._valueRange=fV(this.max)-fV(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(fV(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function vQ(e){const t=e.ticks;if(t.display&&e.display){const e=TH(t.backdropPadding);return VW(t.font&&t.font.size,oH.font.size)+e.height}return 0}function bQ(e,t,r){return r=zW(r)?r:[r],{w:cH(e,t.string,r),h:r.length*t.lineHeight}}function jQ(e,t,r,n,a){return e===n||e===a?{start:t-r/2,end:t+r/2}:e<n||e>a?{start:t-r,end:t}:{start:t,end:t+r}}function wQ(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},r=Object.assign({},t),n=[],a=[],s=e._pointLabels.length,i=e.options.pointLabels,o=i.centerPointLabels?oV/s:0;for(let l=0;l<s;l++){const s=i.setContext(e.getPointLabelContext(l));a[l]=s.padding;const c=e.getPointPosition(l,e.drawingArea+a[l],o),d=PH(s.font),u=bQ(e.ctx,d,e._pointLabels[l]);n[l]=u;const h=AV(e.getIndexAngle(l)+o),m=Math.round(wV(h));NQ(r,t,h,jQ(m,c.x,u.w,0,180),jQ(m,c.y,u.h,90,270))}e.setCenterPoint(t.l-r.l,r.r-t.r,t.t-r.t,r.b-t.b),e._pointLabelItems=function(e,t,r){const n=[],a=e._pointLabels.length,s=e.options,{centerPointLabels:i,display:o}=s.pointLabels,l={extra:vQ(s)/2,additionalAngle:i?oV/a:0};let c;for(let d=0;d<a;d++){l.padding=r[d],l.size=t[d];const a=_Q(e,d,l);n.push(a),"auto"===o&&(a.visible=kQ(a,c),a.visible&&(c=a))}return n}(e,n,a)}function NQ(e,t,r,n,a){const s=Math.abs(Math.sin(r)),i=Math.abs(Math.cos(r));let o=0,l=0;n.start<t.l?(o=(t.l-n.start)/s,e.l=Math.min(e.l,t.l-o)):n.end>t.r&&(o=(n.end-t.r)/s,e.r=Math.max(e.r,t.r+o)),a.start<t.t?(l=(t.t-a.start)/i,e.t=Math.min(e.t,t.t-l)):a.end>t.b&&(l=(a.end-t.b)/i,e.b=Math.max(e.b,t.b+l))}function _Q(e,t,r){const n=e.drawingArea,{extra:a,additionalAngle:s,padding:i,size:o}=r,l=e.getPointPosition(t,n+a+i,s),c=Math.round(wV(AV(l.angle+hV))),d=function(e,t,r){90===r||270===r?e-=t/2:(r>270||r<90)&&(e-=t);return e}(l.y,o.h,c),u=function(e){if(0===e||180===e)return"center";if(e<180)return"left";return"right"}(c),h=function(e,t,r){"right"===r?e-=t:"center"===r&&(e-=t/2);return e}(l.x,o.w,u);return{visible:!0,x:l.x,y:d,textAlign:u,left:h,top:d,right:h+o.w,bottom:d+o.h}}function kQ(e,t){if(!t)return!0;const{left:r,top:n,right:a,bottom:s}=e;return!(pH({x:r,y:n},t)||pH({x:r,y:s},t)||pH({x:a,y:n},t)||pH({x:a,y:s},t))}function SQ(e,t,r){const{left:n,top:a,right:s,bottom:i}=r,{backdropColor:o}=t;if(!BW(o)){const r=EH(t.borderRadius),l=TH(t.backdropPadding);e.fillStyle=o;const c=n-l.left,d=a-l.top,u=s-n+l.width,h=i-a+l.height;Object.values(r).some(e=>0!==e)?(e.beginPath(),wH(e,{x:c,y:d,w:u,h:h,radius:r}),e.fill()):e.fillRect(c,d,u,h)}}function AQ(e,t,r,n){const{ctx:a}=e;if(r)a.arc(e.xCenter,e.yCenter,t,0,lV);else{let r=e.getPointPosition(0,t);a.moveTo(r.x,r.y);for(let s=1;s<n;s++)r=e.getPointPosition(s,t),a.lineTo(r.x,r.y)}}(0,Re.A)(yQ,"id","logarithmic"),(0,Re.A)(yQ,"defaults",{ticks:{callback:tH.formatters.logarithmic,major:{enabled:!0}}});class CQ extends uQ{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=TH(vQ(this.options)/2),t=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(t,r)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=qW(e)&&!isNaN(e)?e:0,this.max=qW(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/vQ(this.options))}generateTickLabels(e){uQ.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((e,t)=>{const r=GW(this.options.pointLabels.callback,[e,t],this);return r||0===r?r:""}).filter((e,t)=>this.chart.getDataVisibility(t))}fit(){const e=this.options;e.display&&e.pointLabels.display?wQ(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,r,n){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((r-n)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,r,n))}getIndexAngle(e){return AV(e*(lV/(this._pointLabels.length||1))+jV(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(BW(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(BW(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const r=t[e];return function(e,t,r){return DH(e,{label:r,index:t,type:"pointLabel"})}(this.getContext(),e,r)}}getPointPosition(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=this.getIndexAngle(e)-hV+r;return{x:Math.cos(n)*t+this.xCenter,y:Math.sin(n)*t+this.yCenter,angle:n}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:r,right:n,bottom:a}=this._pointLabelItems[e];return{left:t,top:r,right:n,bottom:a}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),AQ(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:r,grid:n,border:a}=t,s=this._pointLabels.length;let i,o,l;if(t.pointLabels.display&&function(e,t){const{ctx:r,options:{pointLabels:n}}=e;for(let a=t-1;a>=0;a--){const t=e._pointLabelItems[a];if(!t.visible)continue;const s=n.setContext(e.getPointLabelContext(a));SQ(r,s,t);const i=PH(s.font),{x:o,y:l,textAlign:c}=t;jH(r,e._pointLabels[a],o,l+i.lineHeight/2,i,{color:s.color,textAlign:c,textBaseline:"middle"})}}(this,s),n.display&&this.ticks.forEach((e,t)=>{if(0!==t||0===t&&this.min<0){o=this.getDistanceFromCenterForValue(e.value);const r=this.getContext(t),i=n.setContext(r),l=a.setContext(r);!function(e,t,r,n,a){const s=e.ctx,i=t.circular,{color:o,lineWidth:l}=t;!i&&!n||!o||!l||r<0||(s.save(),s.strokeStyle=o,s.lineWidth=l,s.setLineDash(a.dash||[]),s.lineDashOffset=a.dashOffset,s.beginPath(),AQ(e,r,i,n),s.closePath(),s.stroke(),s.restore())}(this,i,o,s,l)}}),r.display){for(e.save(),i=s-1;i>=0;i--){const n=r.setContext(this.getPointLabelContext(i)),{color:a,lineWidth:s}=n;s&&a&&(e.lineWidth=s,e.strokeStyle=a,e.setLineDash(n.borderDash),e.lineDashOffset=n.borderDashOffset,o=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(i,o),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,r=t.ticks;if(!r.display)return;const n=this.getIndexAngle(0);let a,s;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(n),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((n,i)=>{if(0===i&&this.min>=0&&!t.reverse)return;const o=r.setContext(this.getContext(i)),l=PH(o.font);if(a=this.getDistanceFromCenterForValue(this.ticks[i].value),o.showLabelBackdrop){e.font=l.string,s=e.measureText(n.label).width,e.fillStyle=o.backdropColor;const t=TH(o.backdropPadding);e.fillRect(-s/2-t.left,-a-l.size/2-t.top,s+t.width,l.size+t.height)}jH(e,n.label,0,-a,l,{color:o.color,strokeColor:o.textStrokeColor,strokeWidth:o.textStrokeWidth})}),e.restore()}drawTitle(){}}(0,Re.A)(CQ,"id","radialLinear"),(0,Re.A)(CQ,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:tH.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}}),(0,Re.A)(CQ,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),(0,Re.A)(CQ,"descriptors",{angleLines:{_fallback:"grid"}});const EQ={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},TQ=Object.keys(EQ);function PQ(e,t){return e-t}function OQ(e,t){if(BW(t))return null;const r=e._adapter,{parser:n,round:a,isoWeekday:s}=e._parseOpts;let i=t;return"function"===typeof n&&(i=n(i)),qW(i)||(i="string"===typeof n?r.parse(i,n):r.parse(i)),null===i?null:(a&&(i="week"!==a||!vV(s)&&!0!==s?r.startOf(i,a):r.startOf(i,"isoWeek",s)),+i)}function DQ(e,t,r,n){const a=TQ.length;for(let s=TQ.indexOf(e);s<a-1;++s){const e=EQ[TQ[s]],a=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((r-t)/(a*e.size))<=n)return TQ[s]}return TQ[a-1]}function IQ(e,t,r){if(r){if(r.length){const{lo:n,hi:a}=PV(r,t);e[r[n]>=t?r[n]:r[a]]=!0}}else e[t]=!0}function LQ(e,t,r){const n=[],a={},s=t.length;let i,o;for(i=0;i<s;++i)o=t[i],a[o]=i,n.push({value:o,major:!1});return 0!==s&&r?function(e,t,r,n){const a=e._adapter,s=+a.startOf(t[0].value,n),i=t[t.length-1].value;let o,l;for(o=s;o<=i;o=+a.add(o,1,n))l=r[o],l>=0&&(t[l].major=!0);return t}(e,n,a,r):n}class MQ extends sY{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=e.time||(e.time={}),n=this._adapter=new uK(e.adapters.date);n.init(t),ZW(r.displayFormats,n.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:OQ(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,r=e.time.unit||"day";let{min:n,max:a,minDefined:s,maxDefined:i}=this.getUserBounds();function o(e){s||isNaN(e.min)||(n=Math.min(n,e.min)),i||isNaN(e.max)||(a=Math.max(a,e.max))}s&&i||(o(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||o(this.getMinMax(!1))),n=qW(n)&&!isNaN(n)?n:+t.startOf(Date.now(),r),a=qW(a)&&!isNaN(a)?a:+t.endOf(Date.now(),r)+1,this.min=Math.min(n,a-1),this.max=Math.max(n+1,a)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],r=e[e.length-1]),{min:t,max:r}}buildTicks(){const e=this.options,t=e.time,r=e.ticks,n="labels"===r.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const a=this.min,s=function(e,t,r){let n=0,a=e.length;for(;n<a&&e[n]<t;)n++;for(;a>n&&e[a-1]>r;)a--;return n>0||a<e.length?e.slice(n,a):e}(n,a,this.max);return this._unit=t.unit||(r.autoSkip?DQ(t.minUnit,this.min,this.max,this._getLabelCapacity(a)):function(e,t,r,n,a){for(let s=TQ.length-1;s>=TQ.indexOf(r);s--){const r=TQ[s];if(EQ[r].common&&e._adapter.diff(a,n,r)>=t-1)return r}return TQ[r?TQ.indexOf(r):0]}(this,s.length,t.minUnit,this.min,this.max)),this._majorUnit=r.major.enabled&&"year"!==this._unit?function(e){for(let t=TQ.indexOf(e)+1,r=TQ.length;t<r;++t)if(EQ[TQ[t]].common)return TQ[t]}(this._unit):void 0,this.initOffsets(n),e.reverse&&s.reverse(),LQ(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(){let e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=0,a=0;this.options.offset&&r.length&&(e=this.getDecimalForValue(r[0]),n=1===r.length?1-e:(this.getDecimalForValue(r[1])-e)/2,t=this.getDecimalForValue(r[r.length-1]),a=1===r.length?t:(t-this.getDecimalForValue(r[r.length-2]))/2);const s=r.length<3?.5:.25;n=EV(n,0,s),a=EV(a,0,s),this._offsets={start:n,end:a,factor:1/(n+1+a)}}_generate(){const e=this._adapter,t=this.min,r=this.max,n=this.options,a=n.time,s=a.unit||DQ(a.minUnit,t,r,this._getLabelCapacity(t)),i=VW(n.ticks.stepSize,1),o="week"===s&&a.isoWeekday,l=vV(o)||!0===o,c={};let d,u,h=t;if(l&&(h=+e.startOf(h,"isoWeek",o)),h=+e.startOf(h,l?"day":s),e.diff(r,t,s)>1e5*i)throw new Error(t+" and "+r+" are too far apart with stepSize of "+i+" "+s);const m="data"===n.ticks.source&&this.getDataTimestamps();for(d=h,u=0;d<r;d=+e.add(d,i,s),u++)IQ(c,d,m);return d!==r&&"ticks"!==n.bounds&&1!==u||IQ(c,d,m),Object.keys(c).sort(PQ).map(e=>+e)}getLabelForValue(e){const t=this._adapter,r=this.options.time;return r.tooltipFormat?t.format(e,r.tooltipFormat):t.format(e,r.displayFormats.datetime)}format(e,t){const r=this.options.time.displayFormats,n=this._unit,a=t||r[n];return this._adapter.format(e,a)}_tickFormatFunction(e,t,r,n){const a=this.options,s=a.ticks.callback;if(s)return GW(s,[e,t,r],this);const i=a.time.displayFormats,o=this._unit,l=this._majorUnit,c=o&&i[o],d=l&&i[l],u=r[t],h=l&&d&&u&&u.major;return this._adapter.format(e,n||(h?d:c))}generateTickLabels(e){let t,r,n;for(t=0,r=e.length;t<r;++t)n=e[t],n.label=this._tickFormatFunction(n.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+r)*t.factor)}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,r=this.ctx.measureText(e).width,n=jV(this.isHorizontal()?t.maxRotation:t.minRotation),a=Math.cos(n),s=Math.sin(n),i=this._resolveTickFontOptions(0).size;return{w:r*a+i*s,h:r*s+i*a}}_getLabelCapacity(e){const t=this.options.time,r=t.displayFormats,n=r[t.unit]||r.millisecond,a=this._tickFormatFunction(e,0,LQ(this,[e],this._majorUnit),n),s=this._getLabelSize(a),i=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return i>0?i:1}getDataTimestamps(){let e,t,r=this._cache.data||[];if(r.length)return r;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(e=0,t=n.length;e<t;++e)r=r.concat(n[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(r)}getLabelTimestamps(){const e=this._cache.labels||[];let t,r;if(e.length)return e;const n=this.getLabels();for(t=0,r=n.length;t<r;++t)e.push(OQ(this,n[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return MV(e.sort(PQ))}}function RQ(e,t,r){let n,a,s,i,o=0,l=e.length-1;r?(t>=e[o].pos&&t<=e[l].pos&&({lo:o,hi:l}=OV(e,"pos",t)),({pos:n,time:s}=e[o]),({pos:a,time:i}=e[l])):(t>=e[o].time&&t<=e[l].time&&({lo:o,hi:l}=OV(e,"time",t)),({time:n,pos:s}=e[o]),({time:a,pos:i}=e[l]));const c=a-n;return c?s+(i-s)*(t-n)/c:s}(0,Re.A)(MQ,"id","time"),(0,Re.A)(MQ,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class FQ extends MQ{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=RQ(t,this.min),this._tableRange=RQ(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:r}=this,n=[],a=[];let s,i,o,l,c;for(s=0,i=e.length;s<i;++s)l=e[s],l>=t&&l<=r&&n.push(l);if(n.length<2)return[{time:t,pos:0},{time:r,pos:1}];for(s=0,i=n.length;s<i;++s)c=n[s+1],o=n[s-1],l=n[s],Math.round((c+o)/2)!==l&&a.push({time:l,pos:s/(i-1)});return a}_generate(){const e=this.min,t=this.max;let r=super.getDataTimestamps();return r.includes(e)&&r.length||r.splice(0,0,e),r.includes(t)&&1!==r.length||r.push(t),r.sort((e,t)=>e-t)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),r=this.getLabelTimestamps();return e=t.length&&r.length?this.normalize(t.concat(r)):t.length?t:r,e=this._cache.all=e,e}getDecimalForValue(e){return(RQ(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return RQ(this._table,r*this._tableRange+this._minPos,!0)}}(0,Re.A)(FQ,"id","timeseries"),(0,Re.A)(FQ,"defaults",MQ.defaults);const BQ=[lK,oX,sQ,Object.freeze({__proto__:null,CategoryScale:lQ,LinearScale:hQ,LogarithmicScale:yQ,RadialLinearScale:CQ,TimeScale:MQ,TimeSeriesScale:FQ})],zQ=["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"],UQ="label";function qQ(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function WQ(e,t){e.labels=t}function VQ(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:UQ;const n=[];e.datasets=t.map(t=>{const a=e.datasets.find(e=>e[r]===t[r]);return a&&t.data&&!n.includes(a)?(n.push(a),Object.assign(a,t),a):Be({},t)})}function HQ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:UQ;const r={labels:[],datasets:[]};return WQ(r,e.labels),VQ(r,e.datasets,t),r}function GQ(e,t){const{height:r=150,width:n=300,redraw:s=!1,datasetIdKey:i,type:o,data:l,options:c,plugins:d=[],fallbackContent:u,updateMode:h}=e,m=qa(e,zQ),p=(0,a.useRef)(null),f=(0,a.useRef)(null),g=()=>{p.current&&(f.current=new MY(p.current,{type:o,data:HQ(l,i),options:c&&Be({},c),plugins:d}),qQ(t,f.current))},x=()=>{qQ(t,null),f.current&&(f.current.destroy(),f.current=null)};return(0,a.useEffect)(()=>{!s&&f.current&&c&&function(e,t){const r=e.options;r&&t&&Object.assign(r,t)}(f.current,c)},[s,c]),(0,a.useEffect)(()=>{!s&&f.current&&WQ(f.current.config.data,l.labels)},[s,l.labels]),(0,a.useEffect)(()=>{!s&&f.current&&l.datasets&&VQ(f.current.config.data,l.datasets,i)},[s,l.datasets]),(0,a.useEffect)(()=>{f.current&&(s?(x(),setTimeout(g)):f.current.update(h))},[s,c,l.labels,l.datasets,h]),(0,a.useEffect)(()=>{f.current&&(x(),setTimeout(g))},[o]),(0,a.useEffect)(()=>(g(),()=>x()),[]),(0,er.jsx)("canvas",Be(Be({ref:p,role:"img",height:r,width:n},m),{},{children:u}))}const KQ=(0,a.forwardRef)(GQ);function YQ(e,t){return MY.register(t),(0,a.forwardRef)((t,r)=>(0,er.jsx)(KQ,Be(Be({},t),{},{ref:r,type:e})))}const XQ=YQ("line",nK),QQ=YQ("bar",eK),$Q=YQ("pie",sK),JQ=(e,t,r)=>{const n=(0,a.useRef)(null),s=(0,a.useRef)(!1),i=(0,a.useCallback)(n=>{const a=n[0];a.isIntersecting&&t&&!r&&!s.current?(s.current=!0,e(),setTimeout(()=>{s.current=!1},100)):a.isIntersecting||(s.current=!1)},[e,t,r]);return(0,a.useEffect)(()=>{const e=new IntersectionObserver(i,{threshold:.01,rootMargin:"100px"});return n.current&&e.observe(n.current),()=>e.disconnect()},[i]),(0,a.useEffect)(()=>{r||(s.current=!1)},[r]),n},ZQ=Xh("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),e$=e=>{let{message:t,onClose:r,autoDismiss:n=!0,duration:s=5e3}=e;if((0,a.useEffect)(()=>{if(n&&t.text){const e=setTimeout(()=>{r()},s);return()=>clearTimeout(e)}},[t.text,n,s,r]),!t.text)return null;const i="success"===t.type,o=i?"bg-green-600":"bg-red-600",l=i?"\u2705":"\u274c";return(0,er.jsx)("div",{className:"fixed top-4 right-4 z-50 ".concat(o," text-white shadow-xl rounded-lg max-w-sm"),children:(0,er.jsx)("div",{className:"px-4 py-3",children:(0,er.jsxs)("div",{className:"flex items-center justify-between",children:[(0,er.jsxs)("div",{className:"flex items-center",children:[(0,er.jsx)("span",{className:"mr-2 text-sm",children:l}),(0,er.jsx)("span",{className:"text-sm font-medium",children:t.text})]}),(0,er.jsx)("button",{onClick:r,className:"ml-3 p-1 rounded-full hover:bg-white hover:bg-opacity-20 transition-colors",children:(0,er.jsx)(ZQ,{className:"w-3 h-3"})})]})})})},t$=Xh("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),r$=Xh("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),n$=Xh("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),a$=Xh("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),s$=Xh("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),i$=Xh("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),o$=Xh("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),l$=e=>{if(!e)return"https://placehold.co/400x300/e2e8f0/a0aec0?text=No+Image";if(e.startsWith("http"))return e;const t=Ta(),r=e.startsWith("/")?e:"/".concat(e);return"".concat(t).concat(r)},c$=e=>{let{title:t,value:r,icon:n,color:a}=e;return(0,er.jsxs)("div",{className:"p-6 rounded-2xl text-white shadow-lg flex items-center justify-between transition-transform duration-300 transform hover:scale-105 ".concat(a),children:[(0,er.jsxs)("div",{className:"flex-1",children:[(0,er.jsx)("h4",{className:"text-lg font-medium",children:t}),(0,er.jsx)("p",{className:"text-3xl font-bold mt-1",children:r})]}),(0,er.jsx)("div",{className:"text-4xl opacity-80",children:n})]})},d$=e=>{let{children:t,title:r,className:n=""}=e;return(0,er.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-200 transition-shadow duration-300 hover:shadow-xl ".concat(n),children:[r&&(0,er.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-6",children:r}),t]})},u$=e=>{let{noLayout:t=!1}=e;const[r,n]=(0,a.useState)("list"),[s,i]=(0,a.useState)([]),[o,l]=(0,a.useState)([]),[c,d]=(0,a.useState)([]),[u,h]=(0,a.useState)(!0),[m,p]=(0,a.useState)(1),[f,g]=(0,a.useState)({title:"",description:"",price:0,booking_type:"room_type",selected_room_types:[],theme:"",default_adults:2,default_children:0,max_stay_days:null,food_included:[],food_timing:{},images:[]}),[x,y]=(0,a.useState)([]),[v,b]=(0,a.useState)([]),[j,w]=(0,a.useState)(null),N=async()=>{try{const[e,t,r]=await Promise.all([Ia.get("/packages/?_t=".concat(Date.now())),Ia.get("/rooms/"),Ia.get("/packages/bookingsall")]);i(e.data||[]),l(t.data||[]),d(r.data||[])}catch(e){Tt.error("Failed to load data."),console.error(e)}finally{h(!1)}};(0,a.useEffect)(()=>{N()},[]);const _=(e,t)=>{g(r=>Be(Be({},r),{},{[e]:t}))},k=e=>{const t=Array.from(e.target.files);y(e=>[...e,...t]),b(e=>[...e,...t.map(e=>URL.createObjectURL(e))])},S=(0,er.jsxs)(er.Fragment,{children:[j&&(0,er.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",onClick:()=>w(null),children:(0,er.jsx)(Fh.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-auto",onClick:e=>e.stopPropagation(),children:(0,er.jsxs)("div",{className:"p-6",children:[(0,er.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,er.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:j.title}),(0,er.jsx)("button",{onClick:()=>w(null),className:"text-gray-500 hover:text-gray-800",children:(0,er.jsx)(ZQ,{className:"w-6 h-6"})})]}),(0,er.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:j.images.map((e,t)=>(0,er.jsx)("img",{src:l$(e.image_url),alt:"",className:"w-full h-64 object-cover rounded-lg"},t))})]})})}),"list"===r?(0,er.jsxs)(er.Fragment,{children:[(0,er.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,er.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Package Management"}),(0,er.jsxs)("button",{onClick:()=>{n("create"),g({title:"",description:"",price:0,booking_type:"room_type",selected_room_types:[],theme:"",default_adults:2,default_children:0,max_stay_days:null,food_included:[],images:[]}),y([]),b([])},className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center gap-2 shadow-sm",children:[(0,er.jsx)(r$,{className:"w-5 h-5"})," Create Package"]})]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[(0,er.jsx)(c$,{title:"Total Packages",value:s.length,color:"bg-gradient-to-r from-blue-500 to-blue-700",icon:(0,er.jsx)(Zh,{})}),(0,er.jsx)(c$,{title:"Total Bookings",value:c.length,color:"bg-gradient-to-r from-green-500 to-green-700",icon:(0,er.jsx)(n$,{})}),(0,er.jsx)(c$,{title:"Total Revenue",value:"\u20b9".concat(c.reduce((e,t)=>{var r;return e+((null===(r=t.package)||void 0===r?void 0:r.price)||0)},0).toLocaleString()),color:"bg-gradient-to-r from-purple-500 to-purple-700",icon:(0,er.jsx)(a$,{})})]}),(0,er.jsx)(d$,{title:"Available Packages",children:(0,er.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:s.map(e=>(0,er.jsxs)(Fh.div,{whileHover:{y:-5},className:"bg-gray-50 rounded-xl shadow-md overflow-hidden border border-gray-200 hover:shadow-lg transition-all duration-300 flex flex-col",children:[e.images&&e.images.length>0?(0,er.jsx)("img",{className:"h-48 w-full object-cover cursor-pointer",src:l$(e.images[0].image_url),alt:e.title,onClick:()=>w(e)}):(0,er.jsx)("div",{className:"h-48 w-full bg-gray-200 flex items-center justify-center",children:(0,er.jsx)("span",{className:"text-gray-500",children:"No Image"})}),(0,er.jsxs)("div",{className:"p-6 flex flex-col flex-grow",children:[(0,er.jsx)("h4",{className:"font-bold text-xl mb-2 text-gray-800",children:e.title}),(0,er.jsx)("p",{className:"text-gray-600 text-base mb-3 flex-grow",children:e.description}),(0,er.jsxs)("div",{className:"text-sm text-gray-500 mb-3",children:[e.theme&&(0,er.jsxs)("div",{children:[(0,er.jsx)("span",{className:"font-medium",children:"Theme:"})," ",e.theme]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("span",{className:"font-medium",children:"Type:"})," ","whole_property"===e.booking_type?"Whole Property":"Room Type"]}),e.room_types&&(0,er.jsxs)("div",{children:[(0,er.jsx)("span",{className:"font-medium",children:"Rooms:"})," ",e.room_types]}),e.food_included&&(0,er.jsxs)("div",{children:[(0,er.jsx)("span",{className:"font-medium",children:"Food:"})," ",e.food_included]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("span",{className:"font-medium",children:"Guests:"})," ",e.default_adults||2," Adults, ",e.default_children||0," Children"]}),e.max_stay_days&&(0,er.jsxs)("div",{children:[(0,er.jsx)("span",{className:"font-medium",children:"Max Stay:"})," ",e.max_stay_days," days"]})]}),(0,er.jsxs)("div",{className:"flex justify-between items-center mt-auto pt-4 border-t border-gray-200",children:[(0,er.jsxs)("p",{className:"text-green-600 font-bold text-2xl",children:["\u20b9",e.price.toLocaleString()]}),(0,er.jsxs)("div",{className:"flex gap-2",children:[(0,er.jsx)("button",{onClick:()=>{let t={};try{t=e.food_timing?JSON.parse(e.food_timing):{}}catch(ze){console.error("Error parsing timing",ze)}n("edit"),g(Be(Be({},e),{},{selected_room_types:e.room_types?e.room_types.split(","):[],food_included:e.food_included?e.food_included.split(","):[],food_timing:t,theme:e.theme||"",default_adults:e.default_adults||2,default_children:e.default_children||0,max_stay_days:e.max_stay_days||null})),y([]),b([])},className:"text-blue-500 hover:text-blue-700 font-semibold",children:"Edit"}),(0,er.jsx)("button",{onClick:()=>{window.confirm("Delete this package?")&&Ia.delete("/packages/".concat(e.id)).then(N)},className:"text-red-500 hover:text-red-700 font-semibold",children:"Delete"})]})]})]})]},e.id))})}),(0,er.jsx)(d$,{title:"All Package Bookings",className:"mt-8",children:(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full table-auto",children:[(0,er.jsx)("thead",{className:"bg-gray-100",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Guest"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Package"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Check-in"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Check-out"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),(0,er.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map(e=>{var t;return(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{className:"px-4 py-3",children:e.guest_name}),(0,er.jsx)("td",{className:"px-4 py-3",children:null===(t=e.package)||void 0===t?void 0:t.title}),(0,er.jsx)("td",{className:"px-4 py-3",children:e.check_in}),(0,er.jsx)("td",{className:"px-4 py-3",children:e.check_out}),(0,er.jsx)("td",{className:"px-4 py-3 capitalize",children:e.status})]},e.id)})})]})})})]}):(0,er.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,er.jsxs)("div",{className:"mb-8",children:[(0,er.jsxs)("button",{onClick:()=>{n("list"),y([]),b([])},className:"text-gray-500 hover:text-gray-700 flex items-center gap-1 mb-4",children:[(0,er.jsx)(s$,{className:"w-4 h-4"})," Back"]}),(0,er.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"create"===r?"Create New Package":"Edit Package"}),(0,er.jsxs)("div",{className:"mt-6 flex items-center justify-between relative",children:[(0,er.jsx)("div",{className:"absolute left-0 top-1/2 transform -translate-y-1/2 w-full h-1 bg-gray-200 -z-10"}),[{num:1,label:"Details",icon:Xq},{num:2,label:"Pricing & Images",icon:a$}].map(e=>(0,er.jsxs)("div",{className:"flex flex-col items-center bg-white px-2",children:[(0,er.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center border-2 transition-colors ".concat(m>=e.num?"bg-indigo-600 border-indigo-600 text-white":"bg-white border-gray-300 text-gray-400"),children:(0,er.jsx)(e.icon,{className:"w-5 h-5"})}),(0,er.jsx)("span",{className:"text-xs font-medium mt-2 ".concat(m>=e.num?"text-indigo-600":"text-gray-400"),children:e.label})]},e.num))]})]}),(0,er.jsxs)("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-8 min-h-[400px]",children:[1===m&&(0,er.jsx)("div",{className:"space-y-6 animate-fadeIn",children:(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,er.jsxs)("div",{className:"md:col-span-2",children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Package Name *"}),(0,er.jsx)("input",{type:"text",value:f.title,onChange:e=>_("title",e.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"e.g. Honeymoon Package"})]}),(0,er.jsxs)("div",{className:"md:col-span-2",children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,er.jsx)("textarea",{value:f.description,onChange:e=>_("description",e.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500",rows:"3",placeholder:"Describe what's included in this package..."})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Theme"}),(0,er.jsxs)("select",{value:f.theme,onChange:e=>_("theme",e.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500",children:[(0,er.jsx)("option",{value:"",children:"Select Theme (Optional)"}),(0,er.jsx)("option",{value:"Romance",children:"Romance"}),(0,er.jsx)("option",{value:"Wellness",children:"Wellness"}),(0,er.jsx)("option",{value:"Adventure",children:"Adventure"}),(0,er.jsx)("option",{value:"Family",children:"Family"}),(0,er.jsx)("option",{value:"Business",children:"Business"}),(0,er.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Booking Type"}),(0,er.jsxs)("select",{value:f.booking_type,onChange:e=>_("booking_type",e.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500",children:[(0,er.jsx)("option",{value:"room_type",children:"Selected Room Types"}),(0,er.jsx)("option",{value:"whole_property",children:"Whole Property"})]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Adults"}),(0,er.jsx)("input",{type:"number",min:"1",value:f.default_adults,onChange:e=>_("default_adults",parseInt(e.target.value)||1),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500"}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Suggested number of adults"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Children"}),(0,er.jsx)("input",{type:"number",min:"0",value:f.default_children,onChange:e=>_("default_children",parseInt(e.target.value)||0),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500"}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Suggested number of children"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Maximum Stay (Days)"}),(0,er.jsx)("input",{type:"number",min:"1",value:f.max_stay_days||"",onChange:e=>_("max_stay_days",e.target.value?parseInt(e.target.value):null),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"Leave empty for unlimited"}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Maximum booking duration"})]}),(0,er.jsxs)("div",{className:"md:col-span-2",children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Food Included"}),(0,er.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:["Breakfast","Lunch","Dinner","Snacks"].map(e=>{var t;return(0,er.jsxs)("div",{className:"flex flex-col gap-2 p-2 border rounded-lg hover:bg-gray-50 transition-colors",children:[(0,er.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,er.jsx)("input",{type:"checkbox",checked:f.food_included.includes(e),onChange:t=>{var r;const n=t.target.checked?[...f.food_included,e]:f.food_included.filter(t=>t!==e);if(_("food_included",n),t.target.checked&&(null===(r=f.food_timing)||void 0===r||!r[e])){const t={Breakfast:"08:00",Lunch:"13:00",Dinner:"20:00",Snacks:"16:00"};_("food_timing",Be(Be({},f.food_timing),{},{[e]:t[e]||"08:00"}))}},className:"rounded text-indigo-600 focus:ring-indigo-500"}),(0,er.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e})]}),f.food_included.includes(e)&&(0,er.jsxs)("div",{className:"pl-6 animate-fadeIn",children:[(0,er.jsx)("label",{className:"text-xs text-gray-500 block mb-1",children:"Schedule Time"}),(0,er.jsx)("input",{type:"time",value:(null===(t=f.food_timing)||void 0===t?void 0:t[e])||"",onChange:t=>_("food_timing",Be(Be({},f.food_timing),{},{[e]:t.target.value})),className:"w-full text-sm border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500"})]})]},e)})}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Select meals included in this package"})]}),"room_type"===f.booking_type&&(0,er.jsxs)("div",{className:"md:col-span-2",children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Room Types *"}),(0,er.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 p-3 bg-gray-50 rounded-lg border",children:Array.from(new Set(o.map(e=>e.type))).map(e=>(0,er.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,er.jsx)("input",{type:"checkbox",checked:f.selected_room_types.includes(e),onChange:t=>{const r=t.target.checked?[...f.selected_room_types,e]:f.selected_room_types.filter(t=>t!==e);_("selected_room_types",r)},className:"rounded text-indigo-600"}),(0,er.jsx)("span",{className:"text-sm",children:e})]},e))})]})]})}),2===m&&(0,er.jsx)("div",{className:"space-y-6 animate-fadeIn",children:(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,er.jsxs)("div",{className:"md:col-span-2",children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Package Price (\u20b9) *"}),(0,er.jsx)("input",{type:"number",value:f.price,onChange:e=>_("price",parseFloat(e.target.value)),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"Enter package price"}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"whole_property"===f.booking_type?"Total price for the entire property":"Price per room per night"}),(0,er.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Tax will be calculated during billing"})]}),(0,er.jsxs)("div",{className:"md:col-span-2",children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Package Images * ","edit"===r&&"(Upload new images to add more)"]}),(0,er.jsx)("input",{type:"file",multiple:!0,accept:"image/*",onChange:k,className:"w-full mb-4"}),(0,er.jsxs)("div",{className:"flex gap-4 flex-wrap",children:["edit"===r&&f.images&&f.images.map((e,t)=>(0,er.jsx)("div",{className:"relative w-24 h-24 group",children:(0,er.jsx)("img",{src:l$(e.image_url),alt:"Existing",className:"w-full h-full object-cover rounded-lg border border-gray-200"})},"existing-".concat(t))),v.map((e,t)=>(0,er.jsxs)("div",{className:"relative w-24 h-24 group",children:[(0,er.jsx)("img",{src:e,alt:"Preview",className:"w-full h-full object-cover rounded-lg border border-indigo-200 shadow-sm"}),(0,er.jsx)("button",{onClick:()=>(e=>{y(t=>t.filter((t,r)=>r!==e)),b(t=>t.filter((t,r)=>r!==e))})(t),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs shadow-md hover:bg-red-600 transition-colors",children:(0,er.jsx)(Qq,{className:"w-3 h-3"})})]},"new-".concat(t)))]}),0===x.length&&(!f.images||0===f.images.length)&&(0,er.jsxs)("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-start gap-2",children:[(0,er.jsx)(t$,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),(0,er.jsx)("p",{className:"text-sm text-yellow-800",children:"Please upload at least one image for the package"})]})]})]})})]}),(0,er.jsxs)("div",{className:"mt-6 flex justify-between",children:[(0,er.jsx)("button",{onClick:()=>p(e=>Math.max(1,e-1)),disabled:1===m,className:"px-6 py-2 rounded-lg font-medium ".concat(1===m?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"),children:"Previous"}),m<2?(0,er.jsxs)("button",{onClick:()=>p(e=>Math.min(2,e+1)),className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium flex items-center gap-2",children:["Next ",(0,er.jsx)(i$,{className:"w-4 h-4"})]}):(0,er.jsxs)("button",{onClick:async()=>{try{const e=new FormData;if(e.append("title",f.title),e.append("description",f.description),e.append("price",f.price),e.append("booking_type",f.booking_type),"create"===r&&0===x.length&&(!f.images||0===f.images.length))return void Tt.error("Please upload at least one image for the package.");if("room_type"===f.booking_type){if(!f.selected_room_types||0===f.selected_room_types.length)return void Tt.error("Please select at least one room type");e.append("room_types",f.selected_room_types.join(","))}f.theme&&e.append("theme",f.theme),e.append("default_adults",f.default_adults||2),e.append("default_children",f.default_children||0),f.max_stay_days&&e.append("max_stay_days",f.max_stay_days),f.food_included&&f.food_included.length>0&&(e.append("food_included",f.food_included.join(",")),e.append("food_timing",JSON.stringify(f.food_timing))),x.forEach(t=>e.append("images",t)),"edit"===r&&f.id?(await Ia.put("/packages/".concat(f.id),e),Tt.success("Package updated successfully!")):(await Ia.post("/packages/",e),Tt.success("Package created successfully!")),n("list"),p(1),y([]),b([]),N()}catch(a){var e,t;console.error(a),Tt.error((null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"Failed to save package")}},className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium flex items-center gap-2",children:[(0,er.jsx)(o$,{className:"w-4 h-4"})," ","create"===r?"Create":"Update"," Package"]})]})]})]});return t?S:(0,er.jsx)(xm,{children:S})},h$=e=>{if(!e)return"https://placehold.co/400x300/e2e8f0/a0aec0?text=No+Image";if(e.startsWith("http"))return e;const t=Ta(),r=e.startsWith("/")?e:"/".concat(e);return"".concat(t).concat(r)},m$=e=>{let{title:t,value:r,icon:n,color:a}=e;return(0,er.jsxs)("div",{className:"p-4 sm:p-6 rounded-xl sm:rounded-2xl text-white shadow-lg flex items-center justify-between transition-transform duration-300 transform hover:scale-105 ".concat(a),children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("h4",{className:"text-sm sm:text-base md:text-lg font-medium",children:t}),(0,er.jsx)("p",{className:"text-xl sm:text-2xl md:text-3xl font-bold mt-1",children:r})]}),(0,er.jsx)("div",{className:"text-2xl sm:text-3xl md:text-4xl opacity-80",children:n})]})},p$=e=>{let{onClose:t,roomNumber:r,bookings:n,filter:a,setFilter:s,checkinFilter:i,setCheckinFilter:o,checkoutFilter:l,setCheckoutFilter:c}=e;const d=n.filter(e=>{const t="all"===a||e.status===a,r=!i||e.check_in===i,n=!l||e.check_out===l;return t&&r&&n});return(0,er.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-2 sm:p-4",children:(0,er.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-xl sm:rounded-2xl shadow-lg relative max-w-5xl w-full max-h-[90vh] sm:max-h-[80vh] overflow-hidden",children:[(0,er.jsx)("button",{onClick:t,className:"absolute top-2 sm:top-4 right-2 sm:right-4 text-gray-500 hover:text-gray-800 text-2xl font-bold z-10 w-8 h-8 flex items-center justify-center",children:"\xd7"}),(0,er.jsxs)("div",{className:"pr-10 sm:pr-12 mb-3 sm:mb-4",children:[(0,er.jsxs)("h3",{className:"text-lg sm:text-xl md:text-2xl font-bold mb-3 sm:mb-4",children:["Booking History for Room ",r]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-2 sm:gap-3",children:[(0,er.jsxs)("div",{className:"flex flex-col",children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-700 mb-1",children:"Filter by Status:"}),(0,er.jsxs)("select",{value:a,onChange:e=>s(e.target.value),className:"px-3 py-2 text-sm border border-gray-300 rounded-lg focus:border-indigo-500 focus:ring focus:ring-indigo-200 transition-all",children:[(0,er.jsx)("option",{value:"all",children:"All"}),(0,er.jsx)("option",{value:"booked",children:"Booked"}),(0,er.jsx)("option",{value:"checked-in",children:"Checked In"}),(0,er.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]}),(0,er.jsxs)("div",{className:"flex flex-col",children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-700 mb-1",children:"Check-in Date:"}),(0,er.jsx)("input",{type:"date",value:i,onChange:e=>o(e.target.value),className:"px-3 py-2 text-sm border border-gray-300 rounded-lg focus:border-indigo-500 focus:ring focus:ring-indigo-200 transition-all"})]}),(0,er.jsxs)("div",{className:"flex flex-col",children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-700 mb-1",children:"Check-out Date:"}),(0,er.jsx)("input",{type:"date",value:l,onChange:e=>c(e.target.value),className:"px-3 py-2 text-sm border border-gray-300 rounded-lg focus:border-indigo-500 focus:ring focus:ring-indigo-200 transition-all"})]})]})]}),d.length>0?(0,er.jsx)("div",{className:"overflow-x-auto overflow-y-auto max-h-[60vh] -mx-2 sm:mx-0",children:(0,er.jsxs)("table",{className:"w-full border-collapse border border-gray-300 text-xs sm:text-sm",children:[(0,er.jsx)("thead",{className:"bg-gray-50 sticky top-0",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"border border-gray-300 px-2 sm:px-4 py-2 text-left text-xs sm:text-sm font-semibold",children:"ID"}),(0,er.jsx)("th",{className:"border border-gray-300 px-2 sm:px-4 py-2 text-left text-xs sm:text-sm font-semibold hidden sm:table-cell",children:"Guest"}),(0,er.jsx)("th",{className:"border border-gray-300 px-2 sm:px-4 py-2 text-left text-xs sm:text-sm font-semibold hidden lg:table-cell",children:"Check-in"}),(0,er.jsx)("th",{className:"border border-gray-300 px-2 sm:px-4 py-2 text-left text-xs sm:text-sm font-semibold",children:"Check-out"}),(0,er.jsx)("th",{className:"border border-gray-300 px-2 sm:px-4 py-2 text-left text-xs sm:text-sm font-semibold hidden md:table-cell",children:"Guests"}),(0,er.jsx)("th",{className:"border border-gray-300 px-2 sm:px-4 py-2 text-left text-xs sm:text-sm font-semibold",children:"Status"}),(0,er.jsx)("th",{className:"border border-gray-300 px-2 sm:px-4 py-2 text-left text-xs sm:text-sm font-semibold hidden lg:table-cell",children:"Mobile"}),(0,er.jsx)("th",{className:"border border-gray-300 px-2 sm:px-4 py-2 text-left text-xs sm:text-sm font-semibold hidden lg:table-cell",children:"Email"})]})}),(0,er.jsx)("tbody",{children:d.map((e,t)=>(0,er.jsxs)("tr",{className:t%2===0?"bg-white":"bg-gray-50",children:[(0,er.jsx)("td",{className:"border border-gray-300 px-2 sm:px-4 py-2 text-xs sm:text-sm",children:e.id}),(0,er.jsx)("td",{className:"border border-gray-300 px-2 sm:px-4 py-2 text-xs sm:text-sm font-medium hidden sm:table-cell",children:e.guest_name}),(0,er.jsx)("td",{className:"border border-gray-300 px-2 sm:px-4 py-2 text-xs sm:text-sm hidden lg:table-cell",children:e.check_in}),(0,er.jsx)("td",{className:"border border-gray-300 px-2 sm:px-4 py-2 text-xs sm:text-sm",children:e.check_out}),(0,er.jsxs)("td",{className:"border border-gray-300 px-2 sm:px-4 py-2 text-xs sm:text-sm hidden md:table-cell",children:[e.adults,"A, ",e.children,"C"]}),(0,er.jsx)("td",{className:"border border-gray-300 px-2 sm:px-4 py-2 text-xs sm:text-sm",children:(0,er.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold ".concat("booked"===e.status?"bg-blue-100 text-blue-800":"checked-in"===e.status?"bg-green-100 text-green-800":"cancelled"===e.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:e.status||"Pending"})}),(0,er.jsx)("td",{className:"border border-gray-300 px-2 sm:px-4 py-2 text-xs sm:text-sm hidden lg:table-cell",children:e.guest_mobile}),(0,er.jsx)("td",{className:"border border-gray-300 px-2 sm:px-4 py-2 text-xs sm:text-sm hidden lg:table-cell truncate max-w-[150px]",children:e.guest_email})]},e.id||t))})]})}):(0,er.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,er.jsx)("div",{className:"text-4xl mb-4",children:"\ud83d\udcc5"}),(0,er.jsxs)("p",{className:"text-lg font-medium",children:["No ","all"!==a?a:""," bookings found for Room ",r]}),(0,er.jsx)("p",{className:"text-sm mt-2",children:"Try changing the filter or this room has no booking history"})]})]})})},f$=e=>{let{imageUrl:t,onClose:r}=e;return t?(0,er.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex justify-center items-center z-50",children:(0,er.jsxs)("div",{className:"relative max-w-3xl w-full mx-4",children:[(0,er.jsx)("button",{onClick:r,className:"absolute top-2 right-2 text-white text-3xl font-bold hover:text-gray-300",children:"\xd7"}),(0,er.jsx)("img",{src:h$(t),alt:"Room",className:"w-full h-auto rounded-2xl shadow-lg"})]})}):null},g$=e=>{let{noLayout:t=!1}=e;const[r,n]=(0,a.useState)([]),[s,i]=(0,a.useState)({number:"",type:"",price:"",status:"Available",adults:2,children:0,image:null,air_conditioning:!1,wifi:!1,bathroom:!1,living_area:!1,terrace:!1,parking:!1,kitchen:!1,family_room:!1,bbq:!1,garden:!1,dining:!1,breakfast:!1}),[o,l]=(0,a.useState)(null),[c,d]=(0,a.useState)({type:null,text:""}),[u,h]=(0,a.useState)([]),[m,p]=(0,a.useState)(!1),[f,g]=(0,a.useState)(null),[x,y]=(0,a.useState)(!1),[v,b]=(0,a.useState)(null),[j,w]=(0,a.useState)(null),[N,_]=(0,a.useState)(!0),[k,S]=(0,a.useState)(!1),[A,C]=(0,a.useState)(1),[E,T]=(0,a.useState)({type:"all",status:"all"}),[P,O]=(0,a.useState)("booked"),[D,I]=(0,a.useState)(""),[L,M]=(0,a.useState)(""),R=(e,t)=>{d({type:e,text:t})};(0,a.useEffect)(()=>{F()},[]);const F=async()=>{try{const e=await Ia.get("/rooms/test?skip=0&limit=20&_t=".concat(Date.now())),t=e.data.map(e=>Be(Be({},e),{},{trend:e.trend||Array.from({length:7},()=>Math.floor(1e3*Math.random()))}));n(t||[]),_(20===e.data.length),C(1)}catch(e){console.error("Error fetching rooms:",e),R("error","Error fetching rooms")}},B=e=>{const{name:t,value:r,files:n,type:a,checked:s}=e.target;if("image"===t){const e=n[0];if(e){const t=5242880;if(e.size>t)return void R("error","Image file is too large. Please select an image smaller than 5MB.");if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(e.type))return void R("error","Please select a valid image file (JPEG, PNG, or WebP).")}i(t=>Be(Be({},t),{},{image:e})),l(e?URL.createObjectURL(e):null)}else i("checkbox"===a?e=>Be(Be({},e),{},{[t]:s}):e=>Be(Be({},e),{},{[t]:r}))},z=r.length,U=r.filter(e=>"Available"===e.status).length,q=r.filter(e=>"Booked"===e.status).length,W=r.filter(e=>"Maintenance"===e.status).length,V=z>0?(q/z*100).toFixed(1):0,H=r.filter(e=>{const t="all"===E.type||e.type===E.type,r="all"===E.status||e.status===E.status;return t&&r}),G=(0,er.jsxs)(er.Fragment,{children:[(0,er.jsx)(e$,{message:c,onClose:()=>{d({type:null,text:""})},autoDismiss:!0,duration:5e3}),(0,er.jsx)("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold mb-4 sm:mb-6 text-gray-800",children:"Room Management"}),(0,er.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-3 sm:gap-4 md:gap-6 mb-6 sm:mb-8",children:[(0,er.jsx)(m$,{title:"Total Rooms",value:z,color:"bg-gradient-to-r from-blue-500 to-blue-700",icon:(0,er.jsx)("i",{className:"fas fa-door-closed"})}),(0,er.jsx)(m$,{title:"Available",value:U,color:"bg-gradient-to-r from-green-500 to-green-700",icon:(0,er.jsx)("i",{className:"fas fa-check-circle"})}),(0,er.jsx)(m$,{title:"Occupied",value:q,color:"bg-gradient-to-r from-red-500 to-red-700",icon:(0,er.jsx)("i",{className:"fas fa-bed"})}),(0,er.jsx)(m$,{title:"Maintenance",value:W,color:"bg-gradient-to-r from-yellow-500 to-yellow-600",icon:(0,er.jsx)("i",{className:"fas fa-tools"})}),(0,er.jsx)(m$,{title:"Occupancy Rate",value:"".concat(V,"%"),color:"bg-gradient-to-r from-purple-500 to-purple-700",icon:(0,er.jsx)("i",{className:"fas fa-chart-pie"})})]}),(0,er.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=new FormData;t.append("number",s.number),t.append("type",s.type),t.append("price",s.price),t.append("status",s.status),t.append("adults",s.adults),t.append("children",s.children),s.image&&t.append("image",s.image),t.append("air_conditioning",s.air_conditioning),t.append("wifi",s.wifi),t.append("bathroom",s.bathroom),t.append("living_area",s.living_area),t.append("terrace",s.terrace),t.append("parking",s.parking),t.append("kitchen",s.kitchen),t.append("family_room",s.family_room),t.append("bbq",s.bbq),t.append("garden",s.garden),t.append("dining",s.dining),t.append("breakfast",s.breakfast);try{m?(await Ia.put("/rooms/".concat(f),t),p(!1),g(null),R("success","Room updated successfully!")):(await Ia.post("/rooms/test",t),R("success","Room created successfully!")),await F(),i({number:"",type:"",price:"",status:"Available",adults:2,children:0,image:null,air_conditioning:!1,wifi:!1,bathroom:!1,living_area:!1,terrace:!1,parking:!1,kitchen:!1,family_room:!1,bbq:!1,garden:!1,dining:!1,breakfast:!1}),l(null)}catch(r){console.error("API error:",r),R("error","Error ".concat(m?"updating":"creating"," room"))}},className:"bg-white p-4 sm:p-6 md:p-8 rounded-xl sm:rounded-2xl shadow-lg mb-6 sm:mb-8",children:[(0,er.jsx)("h2",{className:"text-xl sm:text-2xl font-bold mb-4 sm:mb-6 text-gray-800",children:m?"Edit Room":"Add New Room"}),(0,er.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Room Number"}),(0,er.jsx)("input",{type:"text",name:"number",placeholder:"e.g., 101",value:s.number,onChange:B,className:"w-full p-3 rounded-lg border border-gray-300 focus:border-indigo-500 focus:ring focus:ring-indigo-200 transition-all",required:!0,disabled:m})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Room Type"}),(0,er.jsx)("input",{type:"text",name:"type",placeholder:"e.g., Deluxe",value:s.type,onChange:B,className:"w-full p-3 rounded-lg border border-gray-300 focus:border-indigo-500 focus:ring focus:ring-indigo-200 transition-all",required:!0})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price (\u20b9)"}),(0,er.jsx)("input",{type:"number",name:"price",placeholder:"e.g., 5000",value:s.price,onChange:B,className:"w-full p-3 rounded-lg border border-gray-300 focus:border-indigo-500 focus:ring focus:ring-indigo-200 transition-all",required:!0})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Adults Capacity"}),(0,er.jsx)("input",{type:"number",name:"adults",placeholder:"e.g., 2",value:s.adults,onChange:B,className:"w-full p-3 rounded-lg border border-gray-300 focus:border-indigo-500 focus:ring focus:ring-indigo-200 transition-all",min:"1"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Children Capacity"}),(0,er.jsx)("input",{type:"number",name:"children",placeholder:"e.g., 1",value:s.children,onChange:B,className:"w-full p-3 rounded-lg border border-gray-300 focus:border-indigo-500 focus:ring focus:ring-indigo-200 transition-all",min:"0"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,er.jsxs)("select",{name:"status",value:s.status,onChange:B,className:"w-full p-3 rounded-lg border border-gray-300 focus:border-indigo-500 focus:ring focus:ring-indigo-200 transition-all",children:[(0,er.jsx)("option",{children:"Available"}),(0,er.jsx)("option",{children:"Maintenance"})]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Room Image"}),(0,er.jsx)("input",{type:"file",name:"image",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:B,className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100 transition-all"}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Max file size: 5MB. Supported formats: JPEG, PNG, WebP"})]}),o&&(0,er.jsx)("img",{src:o,alt:"Preview",className:"w-full h-32 object-cover rounded-lg border-2 border-gray-200"}),(0,er.jsxs)("div",{className:"md:col-span-2 lg:col-span-3",children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Room Features & Amenities"}),(0,er.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[(0,er.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,er.jsx)("input",{type:"checkbox",name:"air_conditioning",checked:s.air_conditioning,onChange:B,className:"w-5 h-5 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),(0,er.jsx)("span",{className:"text-sm text-gray-700",children:"Air Conditioning"})]}),(0,er.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,er.jsx)("input",{type:"checkbox",name:"wifi",checked:s.wifi,onChange:B,className:"w-5 h-5 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),(0,er.jsx)("span",{className:"text-sm text-gray-700",children:"Free Wifi"})]}),(0,er.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,er.jsx)("input",{type:"checkbox",name:"bathroom",checked:s.bathroom,onChange:B,className:"w-5 h-5 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),(0,er.jsx)("span",{className:"text-sm text-gray-700",children:"Private Bathroom"})]}),(0,er.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,er.jsx)("input",{type:"checkbox",name:"living_area",checked:s.living_area,onChange:B,className:"w-5 h-5 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),(0,er.jsx)("span",{className:"text-sm text-gray-700",children:"Living Room"})]}),(0,er.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,er.jsx)("input",{type:"checkbox",name:"terrace",checked:s.terrace,onChange:B,className:"w-5 h-5 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),(0,er.jsx)("span",{className:"text-sm text-gray-700",children:"Terrace"})]}),(0,er.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,er.jsx)("input",{type:"checkbox",name:"parking",checked:s.parking,onChange:B,className:"w-5 h-5 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),(0,er.jsx)("span",{className:"text-sm text-gray-700",children:"Free Parking"})]}),(0,er.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,er.jsx)("input",{type:"checkbox",name:"kitchen",checked:s.kitchen,onChange:B,className:"w-5 h-5 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),(0,er.jsx)("span",{className:"text-sm text-gray-700",children:"Kitchen"})]}),(0,er.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,er.jsx)("input",{type:"checkbox",name:"family_room",checked:s.family_room,onChange:B,className:"w-5 h-5 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),(0,er.jsx)("span",{className:"text-sm text-gray-700",children:"Family Room"})]}),(0,er.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,er.jsx)("input",{type:"checkbox",name:"bbq",checked:s.bbq,onChange:B,className:"w-5 h-5 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),(0,er.jsx)("span",{className:"text-sm text-gray-700",children:"BBQ"})]}),(0,er.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,er.jsx)("input",{type:"checkbox",name:"garden",checked:s.garden,onChange:B,className:"w-5 h-5 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),(0,er.jsx)("span",{className:"text-sm text-gray-700",children:"Garden"})]}),(0,er.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,er.jsx)("input",{type:"checkbox",name:"dining",checked:s.dining,onChange:B,className:"w-5 h-5 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),(0,er.jsx)("span",{className:"text-sm text-gray-700",children:"Dining Area"})]}),(0,er.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,er.jsx)("input",{type:"checkbox",name:"breakfast",checked:s.breakfast,onChange:B,className:"w-5 h-5 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),(0,er.jsx)("span",{className:"text-sm text-gray-700",children:"Breakfast"})]})]})]}),(0,er.jsxs)("div",{className:"md:col-span-2 lg:col-span-3 flex items-center gap-4",children:[(0,er.jsx)("button",{type:"submit",className:"w-full bg-indigo-600 text-white font-semibold py-3 px-6 rounded-lg shadow-md hover:bg-indigo-700 transition-transform transform hover:-translate-y-1",children:m?"Update Room":"Add Room"}),m&&(0,er.jsx)("button",{type:"button",onClick:()=>{p(!1),g(null),i({number:"",type:"",price:"",status:"Available",adults:2,children:0,image:null,air_conditioning:!1,wifi:!1,bathroom:!1,living_area:!1,terrace:!1,parking:!1,kitchen:!1,family_room:!1,bbq:!1,garden:!1,dining:!1,breakfast:!1}),l(null),d({type:null,text:""})},className:"w-full bg-gray-500 text-white font-semibold py-3 px-6 rounded-lg hover:bg-gray-600 transition",children:"Cancel Edit"})]})]})]}),(0,er.jsxs)("div",{className:"bg-white p-4 sm:p-6 md:p-8 rounded-xl sm:rounded-2xl shadow-lg",children:[(0,er.jsxs)("div",{className:"flex flex-col sm:flex-row flex-wrap gap-3 sm:gap-4 justify-between items-start sm:items-center mb-4 sm:mb-6",children:[(0,er.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 w-full sm:w-auto",children:"All Rooms"}),(0,er.jsxs)("div",{className:"flex flex-col sm:flex-row flex-wrap gap-2 sm:gap-4 w-full sm:w-auto",children:[(0,er.jsxs)("select",{onChange:e=>T(t=>Be(Be({},t),{},{type:e.target.value})),className:"p-2 text-sm border border-gray-300 rounded-lg w-full sm:w-auto",children:[(0,er.jsx)("option",{value:"all",children:"All Types"}),[...new Set(r.map(e=>e.type))].map(e=>(0,er.jsx)("option",{value:e,children:e},e))]}),(0,er.jsxs)("select",{onChange:e=>T(t=>Be(Be({},t),{},{status:e.target.value})),className:"p-2 text-sm border border-gray-300 rounded-lg w-full sm:w-auto",children:[(0,er.jsx)("option",{value:"all",children:"All Statuses"}),(0,er.jsx)("option",{value:"Available",children:"Available"}),(0,er.jsx)("option",{value:"Booked",children:"Booked"}),(0,er.jsx)("option",{value:"Maintenance",children:"Maintenance"})]})]})]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6",children:[H.map(e=>(0,er.jsxs)(Fh.div,{className:"bg-gray-50 rounded-2xl shadow-md overflow-hidden border border-gray-200 hover:shadow-xl transition-all duration-300 flex flex-col",whileHover:{y:-5},children:[(0,er.jsxs)("div",{className:"relative",children:[(0,er.jsx)("img",{src:h$(e.image_url),alt:"Room ".concat(e.number),className:"h-48 w-full object-cover cursor-pointer",onClick:()=>w(e.image_url)}),(0,er.jsx)("span",{className:"absolute top-2 right-2 px-3 py-1 text-xs font-semibold text-white rounded-full ".concat("Available"===e.status?"bg-green-500":"Booked"===e.status?"bg-red-500":"bg-yellow-500"),children:e.status})]}),(0,er.jsxs)("div",{className:"p-5 flex flex-col flex-grow",children:[(0,er.jsxs)("div",{className:"flex justify-between items-start",children:[(0,er.jsxs)("div",{children:[(0,er.jsxs)("h4",{className:"font-bold text-lg text-gray-800",children:["Room ",e.number]}),(0,er.jsx)("p",{className:"text-sm text-gray-500",children:e.type})]}),(0,er.jsx)("p",{className:"text-indigo-600 font-bold text-xl",children:ym(e.price)})]}),(0,er.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:["Capacity: ",e.adults," Adults, ",e.children," Children"]}),(e.air_conditioning||e.wifi||e.bathroom||e.living_area||e.terrace||e.parking||e.kitchen||e.family_room||e.bbq||e.garden||e.dining||e.breakfast)&&(0,er.jsxs)("div",{className:"mt-3 flex flex-wrap gap-1",children:[e.air_conditioning&&(0,er.jsx)("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded-full",children:"AC"}),e.wifi&&(0,er.jsx)("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-700 rounded-full",children:"WiFi"}),e.bathroom&&(0,er.jsx)("span",{className:"px-2 py-1 text-xs bg-purple-100 text-purple-700 rounded-full",children:"Bathroom"}),e.living_area&&(0,er.jsx)("span",{className:"px-2 py-1 text-xs bg-orange-100 text-orange-700 rounded-full",children:"Living"}),e.terrace&&(0,er.jsx)("span",{className:"px-2 py-1 text-xs bg-yellow-100 text-yellow-700 rounded-full",children:"Terrace"}),e.parking&&(0,er.jsx)("span",{className:"px-2 py-1 text-xs bg-indigo-100 text-indigo-700 rounded-full",children:"Parking"}),e.kitchen&&(0,er.jsx)("span",{className:"px-2 py-1 text-xs bg-pink-100 text-pink-700 rounded-full",children:"Kitchen"}),e.family_room&&(0,er.jsx)("span",{className:"px-2 py-1 text-xs bg-teal-100 text-teal-700 rounded-full",children:"Family"}),e.bbq&&(0,er.jsx)("span",{className:"px-2 py-1 text-xs bg-red-100 text-red-700 rounded-full",children:"BBQ"}),e.garden&&(0,er.jsx)("span",{className:"px-2 py-1 text-xs bg-emerald-100 text-emerald-700 rounded-full",children:"Garden"}),e.dining&&(0,er.jsx)("span",{className:"px-2 py-1 text-xs bg-amber-100 text-amber-700 rounded-full",children:"Dining"}),e.breakfast&&(0,er.jsx)("span",{className:"px-2 py-1 text-xs bg-cyan-100 text-cyan-700 rounded-full",children:"Breakfast"})]}),(0,er.jsx)("div",{className:"h-16 mt-4",children:(0,er.jsx)(sp,{width:"100%",height:"100%",children:(0,er.jsxs)(oq,{data:(e.trend||[]).map((e,t)=>({day:t+1,value:e})),children:[(0,er.jsx)(CR,{contentStyle:{fontSize:"12px",padding:"2px 5px"}}),(0,er.jsx)(Fq,{type:"monotone",dataKey:"value",stroke:"#4f46e5",strokeWidth:2,dot:!1})]})})}),(0,er.jsxs)("div",{className:"mt-auto pt-4 border-t border-gray-200 flex flex-col gap-2",children:[(0,er.jsxs)("div",{className:"flex justify-between gap-2",children:[(0,er.jsx)("button",{onClick:()=>(e=>{p(!0),g(e.id),i({number:e.number,type:e.type,price:e.price,status:e.status,adults:e.adults,children:e.children,image:null,air_conditioning:e.air_conditioning||!1,wifi:e.wifi||!1,bathroom:e.bathroom||!1,living_area:e.living_area||!1,terrace:e.terrace||!1,parking:e.parking||!1,kitchen:e.kitchen||!1,family_room:e.family_room||!1,bbq:e.bbq||!1,garden:e.garden||!1,dining:e.dining||!1,breakfast:e.breakfast||!1}),l(h$(e.image_url)),d({type:null,text:""}),window.scrollTo({top:0,behavior:"smooth"})})(e),className:"w-1/2 bg-green-100 text-green-700 text-sm font-semibold py-2 rounded-lg hover:bg-green-200 transition",children:"Edit"}),(0,er.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this room? This action cannot be undone."))try{await Ia.delete("/rooms/test/".concat(e)),R("success","Room deleted successfully!"),F()}catch(t){console.error("Error deleting room:",t),R("error","Error deleting room")}})(e.id),className:"w-1/2 bg-red-100 text-red-700 text-sm font-semibold py-2 rounded-lg hover:bg-red-200 transition",children:"Delete"})]}),(0,er.jsx)("button",{onClick:()=>(async e=>{try{const t=((await Ia.get("/bookings?limit=1000")).data.bookings||[]).filter(t=>t.rooms&&t.rooms.some(t=>t.number===e));h(t),b(e),O("booked"),I(""),M(""),y(!0)}catch(t){console.error("Error fetching bookings:",t),Tt.error("Failed to fetch bookings.")}})(e.number),className:"w-full bg-blue-100 text-blue-700 text-sm font-semibold py-2 rounded-lg hover:bg-blue-200 transition",children:"View Bookings"}),"Booked"!==e.status&&(0,er.jsxs)("select",{value:e.status,onChange:t=>(async(e,t)=>{try{const r=new FormData;r.append("status",t),await Ia.put("/rooms/".concat(e),r),R("success","Room status updated to ".concat(t,"!")),F()}catch(r){console.error("PUT /rooms error:",r),R("error","Error updating room status")}})(e.id,t.target.value),className:"w-full p-2 border border-gray-300 rounded-lg text-sm",children:[(0,er.jsx)("option",{value:"Available",children:"Set Available"}),(0,er.jsx)("option",{value:"Maintenance",children:"Set Maintenance"})]})]})]})]},e.id)),0===H.length&&(0,er.jsx)("p",{className:"col-span-full text-center py-10 text-gray-500",children:"No rooms match the current filters."}),N&&(0,er.jsx)("div",{className:"col-span-full text-center mt-4",children:(0,er.jsx)("button",{onClick:async()=>{if(!k&&N){S(!0);try{const e=A+1,t=(await Ia.get("/rooms?skip=".concat(20*(e-1),"&limit=20"))).data||[],r=t.map(e=>Be(Be({},e),{},{trend:Array.from({length:7},()=>Math.floor(1e3*Math.random()))}));n(e=>[...e,...r]),C(e),_(20===t.length)}catch(e){console.error("Failed to load more rooms:",e)}finally{S(!1)}}},disabled:k,className:"bg-indigo-100 text-indigo-700 font-semibold px-6 py-2 rounded-lg hover:bg-indigo-200 transition-colors disabled:bg-gray-200 disabled:text-gray-500",children:k?"Loading...":"Load More Rooms"})})]})]}),x&&(0,er.jsx)(p$,{onClose:()=>y(!1),roomNumber:v,bookings:u,filter:P,setFilter:O,checkinFilter:D,setCheckinFilter:I,checkoutFilter:L,setCheckoutFilter:M}),j&&(0,er.jsx)(f$,{imageUrl:j,onClose:()=>w(null)})]});return t?G:(0,er.jsx)(xm,{children:G})},x$="Asia/Kolkata",y$=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return"-";const r="string"===typeof e?new Date(e):e;if(isNaN(r.getTime()))return"-";const n=Be({timeZone:x$,day:"2-digit",month:"short",year:"numeric"},t);return new Intl.DateTimeFormat("en-IN",n).format(r)},v$=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return"-";const r="string"===typeof e?new Date(e):e;if(isNaN(r.getTime()))return"-";const n=Be({timeZone:x$,day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0},t);return new Intl.DateTimeFormat("en-IN",n).format(r)},b$=()=>{const e=new Date,t=new Date(e.toLocaleString("en-US",{timeZone:x$})),r=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0");return"".concat(r,"-").concat(n,"-").concat(a)},j$=()=>{const e=new Date;return new Date(e.toLocaleString("en-US",{timeZone:x$})).toISOString()};MY.register(qY,aQ,BX);const w$=a.memo(e=>{let{title:t,value:r,unit:n="",duration:a=1.5}=e;return(0,er.jsxs)(Fh.div,{whileHover:{scale:1.02},className:"bg-white p-6 rounded-2xl shadow-lg flex flex-col items-center transition-transform duration-200 cursor-pointer",children:[(0,er.jsx)("span",{className:"text-gray-500 font-medium text-sm sm:text-base",children:t}),(0,er.jsx)(nW.Ay,{end:r,duration:a,separator:",",className:"text-3xl font-extrabold mt-2 text-indigo-700",suffix:n})]})});w$.displayName="KPI_Card";const N$=a.memo(e=>{let{status:t}=e;const r={booked:"bg-green-100 text-green-700",cancelled:"bg-red-100 text-red-600","checked-in":"bg-blue-100 text-blue-700","checked-out":"bg-gray-200 text-gray-700"}[t.toLowerCase()]||"bg-yellow-100 text-yellow-700";return(0,er.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold uppercase tracking-wider ".concat(r),children:t})});N$.displayName="BookingStatusBadge";const _$=e=>{let{imageUrl:t,onClose:r}=e;return t?(0,er.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex justify-center items-center z-[60]",children:(0,er.jsxs)("div",{className:"relative max-w-3xl w-full mx-4",children:[(0,er.jsx)("button",{onClick:r,className:"absolute -top-8 right-0 text-white text-4xl font-bold hover:text-gray-300",children:"\xd7"}),(0,er.jsx)("img",{src:t,alt:"Full size view",className:"w-full h-auto rounded-2xl shadow-lg"})]})}):null},k$=e=>{let{booking:t,onClose:r,onImageClick:n,roomIdToRoom:a,onAddAllocation:s,inventoryItems:i=[],inventoryLocations:o=[]}=e;if(!t)return null;const l=t.rooms&&t.rooms.length>0&&t.rooms.map(e=>{if(t.is_package){var r;if(null!==e&&void 0!==e&&null!==(r=e.room)&&void 0!==r&&r.number)return"".concat(e.room.number," (").concat(e.room.type,")");if(null!==e&&void 0!==e&&e.room_id&&a&&a[e.room_id]){const t=a[e.room_id];return"".concat(t.number," (").concat(t.type,")")}return"-"}if(null!==e&&void 0!==e&&e.number)return"".concat(e.number," (").concat(e.type,")");if(null!==e&&void 0!==e&&e.room_id&&a&&a[e.room_id]){const t=a[e.room_id];return"".concat(t.number," (").concat(t.type,")")}return"-"}).filter(Boolean).join(", ")||"-",c=t.status&&"checkedin"===t.status.toLowerCase().replace(/[-_]/g,"");return(0,er.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center p-4 z-50 overflow-y-auto",children:(0,er.jsxs)(Fh.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:"bg-white p-8 rounded-xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto my-8",children:[(0,er.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,er.jsx)("h3",{className:"text-2xl font-bold text-gray-800",children:"Booking Details"}),(0,er.jsx)("button",{onClick:r,className:"text-gray-500 hover:text-gray-800 transition-colors",children:(0,er.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,er.jsxs)("div",{className:"space-y-4 text-gray-700",children:[(0,er.jsxs)("p",{children:[(0,er.jsx)("strong",{children:"Guest:"})," ",t.guest_name]}),(0,er.jsxs)("p",{children:[(0,er.jsx)("strong",{children:"Rooms:"})," ",l]}),(0,er.jsxs)("p",{children:[(0,er.jsx)("strong",{children:"Check-in:"})," ",t.check_in]}),(0,er.jsxs)("p",{children:[(0,er.jsx)("strong",{children:"Check-out:"})," ",t.check_out]}),(0,er.jsxs)("p",{children:[(0,er.jsx)("strong",{children:"Mobile:"})," ",t.guest_mobile]}),(0,er.jsxs)("p",{children:[(0,er.jsx)("strong",{children:"Email:"})," ",t.guest_email]}),(0,er.jsxs)("p",{children:[(0,er.jsx)("strong",{children:"Guests:"})," ",t.adults," Adults, ",t.children," ","Children"]}),"checked-in"===t.status&&t.user&&(0,er.jsxs)("p",{children:[(0,er.jsx)("strong",{children:"Checked-in By:"})," ",t.user.name]}),(t.id_card_image_url||t.guest_photo_url)&&(0,er.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,er.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Check-in Documents"}),(0,er.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.id_card_image_url&&(()=>{const e="".concat(Ia.defaults.baseURL.replace(/\/$/,""),"/").concat(t.is_package?"packages/booking/checkin-image":"bookings/checkin-image","/").concat(t.id_card_image_url);return(0,er.jsxs)("div",{className:"text-center",children:[(0,er.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"ID Card"}),(0,er.jsx)("img",{src:e,alt:"ID Card",className:"w-full h-auto rounded-lg border shadow-sm cursor-pointer",onClick:()=>n(e)})]})})(),t.guest_photo_url&&(()=>{const e="".concat(Ia.defaults.baseURL.replace(/\/$/,""),"/").concat(t.is_package?"packages/booking/checkin-image":"bookings/checkin-image","/").concat(t.guest_photo_url);return(0,er.jsxs)("div",{className:"text-center",children:[(0,er.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Guest Photo"}),(0,er.jsx)("img",{src:e,alt:"Guest",className:"w-full h-auto rounded-lg border shadow-sm cursor-pointer",onClick:()=>n(e)})]})})()]})]})]}),(0,er.jsxs)("div",{className:"mt-6 flex gap-2",children:[c&&s&&(0,er.jsx)("button",{onClick:()=>s(t),className:"flex-1 bg-green-600 text-white font-semibold py-2 rounded-md hover:bg-green-700 transition-colors",children:"Add Extra Allocation"}),(0,er.jsx)("button",{onClick:r,className:"".concat(c&&s?"flex-1":"w-full"," bg-indigo-600 text-white font-semibold py-2 rounded-md hover:bg-indigo-700 transition-colors"),children:"Close"})]})]})})},S$=e=>{let{booking:t,onClose:r,inventoryItems:n=[],inventoryLocations:s=[],onSuccess:i,authHeader:o}=e;const[l,c]=(0,a.useState)([{item_id:"",quantity:1,is_payable:!1,manual_override:!1,complimentary_qty:0,payable_qty:0,notes:""}]),[d,u]=(0,a.useState)(!1),[h,m]=(0,a.useState)([]),[p,f]=(0,a.useState)(!1),[g,x]=(0,a.useState)("current"),[y,v]=(0,a.useState)({}),[b,j]=(0,a.useState)({}),[w,N]=(0,a.useState)(!1),[_,k]=(0,a.useState)({}),S=async e=>{if(e&&!(_[e]&&Object.keys(_[e]).length>0))try{const t=await Ia.get("/inventory/items/".concat(e,"/stocks"),o()),r={};t.data&&t.data.forEach(e=>{r[e.location_id]=e.quantity}),k(t=>Be(Be({},t),{},{[e]:r}))}catch(t){console.error("Error fetching stock for item ".concat(e,":"),t),k(t=>Be(Be({},t),{},{[e]:{}}))}},A=async e=>{if(!confirm("Are you sure you want to report damage for ".concat(e.item_name||"this item","? This will remove it from inventory and add a charge to the bill.")))return;const r=parseFloat(e.selling_price||e.unit_price||e.rental_price||0),n=prompt("Enter damage charge amount for ".concat(e.item_name||"Item",":"),r);if(null===n)return;const a=parseFloat(n);if(isNaN(a)||a<0)alert("Invalid amount. Please enter a positive number.");else try{var s,i;const r=t.rooms&&t.rooms[0]?t.rooms[0]:null,n=(null===r||void 0===r?void 0:r.room_id)||(null===r||void 0===r?void 0:r.id),o=(null===r||void 0===r?void 0:r.number)||(null===r||void 0===r||null===(s=r.room)||void 0===s?void 0:s.number);if(!n)return void alert("Could not determine Room ID.");let l=(null===r||void 0===r||null===(i=r.room)||void 0===i?void 0:i.inventory_location_id)||(null===r||void 0===r?void 0:r.inventory_location_id);if(!l)try{const e=(await Ia.get("/inventory/locations?limit=10000")).data.find(e=>e.name==="Room ".concat(o)||e.room_area==="Room ".concat(o));e&&(l=e.id)}catch(ze){console.error("Error resolving location:",ze)}if(l||console.warn("Location ID not found for Room ".concat(o,". Inventory deduction may fail.")),l&&e.item_id)try{const t=new FormData;t.append("item_id",e.item_id),t.append("location_id",l),t.append("quantity",1),t.append("unit",e.unit||"pcs"),t.append("reason_code","Damaged by Guest"),t.append("action_taken","Billed to Guest"),t.append("notes","Damaged by guest in Room ".concat(o,". Billed charge: ").concat(a)),await Ia.post("/inventory/waste-logs",t,{headers:{"Content-Type":"multipart/form-data"}})}catch(c){console.error("Error creating waste log:",c),alert("Warning: Failed to update inventory records. Billing will continue.")}else console.warn("Skipping inventory update: Missing Location ID or Item ID");let u=null;try{const e=(await Ia.get("/services/?limit=1000")).data.find(e=>"Asset Damage"===e.name);if(e)u=e.id;else{const e=new FormData;e.append("name","Asset Damage"),e.append("description","Charges for damaged assets"),e.append("charges",0),e.append("is_visible_to_guest","true");u=(await Ia.post("/services",e,{headers:{"Content-Type":"multipart/form-data"}})).data.id}}catch(d){return console.error("Error creating/finding service:",d),void alert("Failed to initialize damage service.")}let h=null;try{const e=await Ia.get("/employees/?limit=1");e.data&&e.data.length>0&&(h=e.data[0].id)}catch(ze){console.error(ze)}if(!h)return void alert("No employees found to assign service.");const p={service_id:u,employee_id:h,room_id:n,override_charges:a,billing_status:"unbilled"},f=await Ia.post("/services/assign",p);await Ia.patch("/services/assigned/".concat(f.data.id),{status:"completed",billing_status:"unbilled"}),alert("Damage reported: Item removed from inventory and charge added to bill."),m(t=>t.filter(t=>t.item_id!==e.item_id))}catch(u){var o,l;console.error("Damage report error:",u),alert("Failed to report damage: "+((null===(o=u.response)||void 0===o||null===(l=o.data)||void 0===l?void 0:l.detail)||u.message))}},[C,E]=(0,a.useState)(!1),[T,P]=(0,a.useState)(null),[O,D]=(0,a.useState)([]),[I,L]=(0,a.useState)(!1),M=()=>{if(s.length>0){const e=s.find(e=>{const t=String(e.location_type||"").toUpperCase();return!0===e.is_inventory_point&&("CENTRAL_WAREHOUSE"===t||"WAREHOUSE"===t||"BRANCH_STORE"===t)||"CENTRAL_WAREHOUSE"===t||"WAREHOUSE"===t||"BRANCH_STORE"===t});return e?e.id:s[0].id}return""},R=e=>{if(e.display_id)return e.display_id;const t=e.is_package?"PK":"BK",r=String(e.id).padStart(6,"0");return"".concat(t,"-").concat(r)};if(a.useEffect(()=>{console.log("[AddExtraAllocationModal] Props received:"),console.log("- booking:",t),console.log("- inventoryItems:",(null===n||void 0===n?void 0:n.length)||0,"items"),console.log("- inventoryLocations:",(null===s||void 0===s?void 0:s.length)||0,"locations"),console.log("- authHeader:",typeof o)},[t,n,s,o]),!t)return null;(0,a.useEffect)(()=>{t&&t.id&&t.rooms&&t.rooms.length>0&&s&&s.length>0?(async()=>{var e;const r=t.rooms&&t.rooms[0]||null,n=(null===r||void 0===r?void 0:r.number)||(null===r||void 0===r||null===(e=r.room)||void 0===e?void 0:e.number)||null;if(console.log("=== Fetching Current Room Items ==="),console.log("Booking:",t),console.log("Booking ID:",null===t||void 0===t?void 0:t.id),console.log("Booking rooms:",t.rooms),console.log("Room for fetch:",r),console.log("Room number extracted:",n),console.log("Total locations available:",s.length),console.log("GUEST_ROOM locations:",s.filter(e=>"GUEST_ROOM"===String(e.location_type||"").toUpperCase()).map(e=>({id:e.id,name:e.name,room_area:e.room_area,location_type:e.location_type}))),!n)return console.warn("No room number found for booking"),void m([]);let a=null;if(n){const e=String(n).trim(),t=e.replace(/^0+/,"")||e;a=s.find(r=>{if("GUEST_ROOM"!==String(r.location_type||"").toUpperCase())return!1;const n=String(r.room_area||"").trim().toLowerCase(),a=String(r.name||"").trim().toLowerCase(),s=n.replace(/^0+/,"")||n,i=a.replace(/^0+/,"")||a,o=e.toLowerCase(),l=t.toLowerCase();return n===o||s===l||(a===o||i===l||(!(!n.includes(o)&&!s.includes(l))||(!(!a.includes(o)&&!i.includes(l))||!!["room ".concat(o),"room-".concat(o),"room_".concat(o),"room".concat(o),"room ".concat(l),"room-".concat(l),"room_".concat(l),"room".concat(l)].some(e=>n===e||a===e))))})||null}if(console.log("Found destination location:",a),!a)return console.warn("Room location not found for room ".concat(n,". Available GUEST_ROOM locations:"),s.filter(e=>"GUEST_ROOM"===String(e.location_type||"").toUpperCase()).map(e=>({id:e.id,name:e.name,room_area:e.room_area,location_type:e.location_type}))),void m([]);f(!0);try{var i;console.log("Fetching items for location ".concat(a.id," (").concat(a.name||a.room_area,")"));const e=await Ia.get("/inventory/locations/".concat(a.id,"/items"),o());console.log("Location items response:",e.data),m((null===(i=e.data)||void 0===i?void 0:i.items)||[])}catch(c){var l;console.error("Error fetching current room items:",c),console.error("Error details:",null===(l=c.response)||void 0===l?void 0:l.data),m([])}finally{f(!1)}})():(null!==t&&void 0!==t&&t.id?null!==t&&void 0!==t&&t.rooms&&0!==t.rooms.length||console.log("Skipping inventory fetch - booking has no rooms assigned yet"):console.log("Skipping inventory fetch - booking not saved yet (no ID)"),m([]))},[t,s]);const F=(e,t,r)=>{const n=[...l];n[e]=Be(Be({},n[e]),{},{[t]:r}),"item_id"===t&&r&&S(r),c(n)};return(0,er.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,er.jsxs)(Fh.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:"bg-white p-8 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,er.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,er.jsx)("h3",{className:"text-2xl font-bold text-gray-800",children:"Room Allocation Management"}),(0,er.jsx)("button",{onClick:r,className:"text-gray-500 hover:text-gray-800 transition-colors",children:(0,er.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,er.jsxs)("div",{className:"flex gap-2 mb-6 border-b overflow-x-auto",children:[(0,er.jsxs)("button",{type:"button",onClick:()=>x("current"),className:"px-4 py-2 font-medium whitespace-nowrap ".concat("current"===g?"border-b-2 border-indigo-600 text-indigo-600":"text-gray-500 hover:text-gray-700"),children:["Inventory (",h.length,")"]}),(0,er.jsx)("button",{type:"button",onClick:()=>x("food"),className:"px-4 py-2 font-medium whitespace-nowrap ".concat("food"===g?"border-b-2 border-indigo-600 text-indigo-600":"text-gray-500 hover:text-gray-700"),children:"Food Orders"}),(0,er.jsx)("button",{type:"button",onClick:()=>x("services"),className:"px-4 py-2 font-medium whitespace-nowrap ".concat("services"===g?"border-b-2 border-indigo-600 text-indigo-600":"text-gray-500 hover:text-gray-700"),children:"Services"}),(0,er.jsx)("button",{type:"button",onClick:()=>x("add"),className:"px-4 py-2 font-medium whitespace-nowrap ".concat("add"===g?"border-b-2 border-indigo-600 text-indigo-600":"text-gray-500 hover:text-gray-700"),children:"Add items"})]}),"current"===g&&(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,er.jsx)("h4",{className:"text-lg font-semibold text-gray-800",children:"Current Room Items"}),(0,er.jsxs)("button",{type:"button",onClick:async()=>{var e;const r=t.rooms&&t.rooms[0]||null,n=(null===r||void 0===r?void 0:r.number)||(null===r||void 0===r||null===(e=r.room)||void 0===e?void 0:e.number)||null;if(!n)return void alert("Room number not found");const a=e=>String(e||"").trim().toLowerCase().replace(/^0+/,""),i=a(n),l=s.find(e=>{if("GUEST_ROOM"!==String(e.location_type||"").toUpperCase())return!1;const t=a(e.room_area),r=a(e.name);return t===i||r===i||r.includes(i)||t.includes(i)});if(l){f(!0);try{var c;const e=await Ia.get("/inventory/locations/".concat(l.id,"/items"),o());m((null===(c=e.data)||void 0===c?void 0:c.items)||[])}catch(d){console.error("Error refreshing items:",d),alert("Failed to refresh items")}finally{f(!1)}}else alert("Room location not found for room ".concat(n))},className:"px-3 py-1 bg-gray-200 text-gray-700 text-sm rounded-lg hover:bg-gray-300 flex items-center gap-1",disabled:p,children:[(0,er.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),p?"Refreshing...":"Refresh"]})]}),p?(0,er.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Loading current items..."}):(0,er.jsxs)("div",{className:"flex flex-col gap-8",children:[h.filter(e=>"asset"!==e.type).length>0&&(0,er.jsxs)("div",{children:[(0,er.jsx)("h4",{className:"text-sm font-semibold text-gray-700 mb-3 ml-1",children:"Consumables / Minibar"}),(0,er.jsx)("div",{className:"overflow-x-auto border rounded-lg bg-white",children:(0,er.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,er.jsx)("thead",{className:"bg-gray-50",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Item"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Total Qty"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Complimentary"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Payable"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Unit Price"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Total Value"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Paid"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,er.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:h.filter(e=>"asset"!==e.type).map((e,r)=>{const a=e.is_paid||y[e.item_id]||!1,i=parseFloat(e.location_stock||0),l=n.find(t=>t.id===e.item_id),c=(null===l||void 0===l?void 0:l.complimentary_limit)||0,d=parseFloat(e.complimentary_qty||0),u=parseFloat(e.payable_qty||0);let h=d,p=u;return 0===d&&0===u&&i>0&&(h=Math.min(i,c),p=Math.max(0,i-c)),(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsxs)("td",{className:"px-3 py-2 text-sm",children:[(0,er.jsx)("div",{className:"font-medium text-gray-900",children:e.item_name}),c>0&&(0,er.jsxs)("div",{className:"text-xs text-blue-600 mt-1",children:["Limit: ",c," free"]})]}),(0,er.jsxs)("td",{className:"px-3 py-2 text-sm text-gray-600 font-medium",children:[i," ",e.unit]}),(0,er.jsxs)("td",{className:"px-3 py-2 text-sm text-green-700 font-medium",children:[h," ",e.unit]}),(0,er.jsxs)("td",{className:"px-3 py-2 text-sm text-orange-700 font-medium",children:[p," ",e.unit]}),(0,er.jsx)("td",{className:"px-3 py-2 text-sm text-gray-600",children:ym(e.unit_price||0)}),(0,er.jsx)("td",{className:"px-3 py-2 text-sm font-semibold text-gray-900",children:ym((e.unit_price||0)*p)}),(0,er.jsx)("td",{className:"px-3 py-2",children:p>0?(0,er.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,er.jsx)("input",{type:"checkbox",checked:a,onChange:r=>{v(Be(Be({},y),{},{[e.item_id]:r.target.checked})),(async(e,r)=>{if(e.issue_detail_id&&e.issue_id)try{var n;await Ia.patch("/inventory/issues/".concat(e.issue_id,"/details/").concat(e.issue_detail_id),{is_paid:r},o()),v(Be(Be({},y),{},{[e.item_id]:r}));const i=t.rooms&&t.rooms[0]||null,l=(null===i||void 0===i?void 0:i.number)||(null===i||void 0===i||null===(n=i.room)||void 0===n?void 0:n.number)||null;if(l){const e=s.find(e=>"GUEST_ROOM"===String(e.location_type||"").toUpperCase()&&"".concat(e.name||""," ").concat(e.room_area||"").toLowerCase().includes(String(l).toLowerCase()));if(e){var a;const t=await Ia.get("/inventory/locations/".concat(e.id,"/items"),o());m((null===(a=t.data)||void 0===a?void 0:a.items)||[])}}}catch(c){var i,l;console.error("Error updating paid status:",c),alert("Failed to update paid status: "+((null===(i=c.response)||void 0===i||null===(l=i.data)||void 0===l?void 0:l.detail)||c.message))}else alert("Cannot update: Issue detail information missing")})(e,r.target.checked)},className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"}),(0,er.jsx)("span",{className:"text-xs ".concat(a?"text-green-600 font-medium":"text-gray-500"),children:a?"Paid":"Unpaid"})]}):(0,er.jsx)("span",{className:"text-gray-400 text-xs",children:"-"})}),(0,er.jsx)("td",{className:"px-3 py-2",children:p>0?a?(0,er.jsx)("span",{className:"text-xs text-green-600 font-medium",children:"\u2713 Paid"}):(0,er.jsx)("span",{className:"text-xs text-orange-600 font-medium",children:"Payment Pending"}):(0,er.jsx)("span",{className:"text-xs text-gray-400",children:"Complimentary"})})]},r)})})]})})]}),(0,er.jsxs)("div",{className:"mb-8",children:[(0,er.jsx)("h4",{className:"text-sm font-semibold text-gray-700 mb-3 ml-1",children:"Fixed Assets / Room Inventory"}),(0,er.jsx)("div",{className:"overflow-x-auto border rounded-lg bg-white",children:0===h.filter(e=>"asset"===e.type&&!(e.rental_price>0||e.is_rentable)).length?(0,er.jsx)("div",{className:"text-center py-6 text-gray-500 text-sm",children:"No fixed assets assigned."}):(0,er.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,er.jsx)("thead",{className:"bg-gray-50",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Asset Name"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Serial / Tag"}),(0,er.jsx)("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase",children:"Qty"}),(0,er.jsx)("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase",children:"Present"}),(0,er.jsx)("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase",children:"Damaged"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Condition"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Source"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,er.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:h.filter(e=>"asset"===e.type&&!(e.rental_price>0||e.is_rentable)).map((e,t)=>{const r=h.indexOf(e);return(0,er.jsxs)("tr",{className:"hover:bg-gray-50 ".concat(e.is_damaged?"bg-red-50":""),children:[(0,er.jsx)("td",{className:"px-3 py-2 text-sm",children:(0,er.jsx)("span",{className:"font-medium text-gray-900",children:e.item_name})}),(0,er.jsx)("td",{className:"px-3 py-2 text-sm text-gray-600 font-mono",children:e.serial_number||e.asset_tag||"-"}),(0,er.jsx)("td",{className:"px-3 py-2 text-sm text-gray-900 font-medium text-center",children:e.location_stock||1}),(0,er.jsx)("td",{className:"px-3 py-2 text-center",children:(0,er.jsx)("input",{type:"checkbox",checked:!1!==e.is_present,onChange:e=>{const t=[...h];t[r]=Be(Be({},t[r]),{},{is_present:e.target.checked}),m(t)},className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"})}),(0,er.jsx)("td",{className:"px-3 py-2 text-center",children:(0,er.jsx)("input",{type:"checkbox",checked:e.is_damaged||!1,onChange:e=>{const t=[...h];t[r]=Be(Be({},t[r]),{},{is_damaged:e.target.checked}),m(t)},className:"w-4 h-4 text-red-600 border-gray-300 rounded focus:ring-red-500"})}),(0,er.jsx)("td",{className:"px-3 py-2 text-sm",children:e.is_damaged?(0,er.jsx)("input",{type:"text",placeholder:"Damage notes...",value:e.damage_notes||"",onChange:e=>{const t=[...h];t[r]=Be(Be({},t[r]),{},{damage_notes:e.target.value}),m(t)},className:"w-full px-2 py-1 text-xs border border-red-300 rounded bg-red-50 focus:ring-2 focus:ring-red-500 outline-none"}):(0,er.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium ".concat("active"===(e.status||"active").toLowerCase()?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.status||"Active"})}),(0,er.jsx)("td",{className:"px-3 py-2 text-sm",children:(0,er.jsx)("span",{className:"text-gray-500 text-xs",children:e.source||"-"})}),(0,er.jsx)("td",{className:"px-3 py-2 text-sm",children:e.is_damaged?(0,er.jsx)("button",{type:"button",onClick:()=>A(e),className:"bg-red-100 text-red-700 hover:bg-red-200 px-2 py-1 rounded text-xs font-semibold",children:"Charge Damage"}):(0,er.jsx)("span",{className:"text-gray-400 text-xs",children:"-"})})]},t)})})]})})]}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,er.jsx)("h4",{className:"text-sm font-semibold text-blue-700 ml-1",children:"Rentable Assets"}),(0,er.jsxs)("button",{type:"button",onClick:()=>{var e;const t={item_id:null,item_name:"",type:"asset",location_stock:1,is_rentable:!0,is_new:!0,rental_price:0,is_present:!0,is_damaged:!1,damage_notes:"",source_location_id:(null===(e=s.find(e=>e.is_inventory_point||["WAREHOUSE","STORE","CENTRAL_WAREHOUSE"].includes(String(e.location_type).toUpperCase())))||void 0===e?void 0:e.id)||""};m([...h,t])},className:"px-3 py-1.5 bg-blue-600 text-white text-xs rounded-lg hover:bg-blue-700 flex items-center gap-1.5",children:[(0,er.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Rentable Asset"]})]}),(0,er.jsx)("div",{className:"overflow-x-auto border rounded-lg bg-white",children:0===h.filter(e=>"asset"===e.type&&(e.rental_price>0||e.is_rentable)).length?(0,er.jsx)("div",{className:"text-center py-6 text-gray-500 text-sm",children:'No rentable assets assigned. Click "Add Rentable Asset" to add items like laundry or extra beds.'}):(0,er.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,er.jsx)("thead",{className:"bg-blue-50",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-blue-800 uppercase",children:"Asset Name"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-blue-800 uppercase",children:"Serial / Tag"}),(0,er.jsx)("th",{className:"px-3 py-2 text-center text-xs font-medium text-blue-800 uppercase",children:"Qty"}),(0,er.jsx)("th",{className:"px-3 py-2 text-center text-xs font-medium text-blue-800 uppercase",children:"Present"}),(0,er.jsx)("th",{className:"px-3 py-2 text-center text-xs font-medium text-blue-800 uppercase",children:"Damaged"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-blue-800 uppercase",children:"Condition"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-blue-800 uppercase",children:"Rental Price"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-blue-800 uppercase",children:"Source"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-blue-800 uppercase",children:"Actions"})]})}),(0,er.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:h.filter(e=>"asset"===e.type&&(e.rental_price>0||e.is_rentable)).map((e,t)=>{var r;const a=h.indexOf(e);return(0,er.jsxs)("tr",{className:"hover:bg-blue-50 ".concat(e.is_damaged?"bg-red-50":""),children:[(0,er.jsx)("td",{className:"px-3 py-2 text-sm",children:e.is_new?(0,er.jsxs)("select",{value:e.item_id||"",onChange:e=>{const t=parseInt(e.target.value),r=n.find(e=>e.id===t);if(r){const e=[...h];e[a]=Be(Be({},e[a]),{},{item_id:t,item_name:r.name,rental_price:r.selling_price||0}),m(e),S(t)}},className:"w-full px-2 py-1 text-sm border border-indigo-300 rounded focus:ring-2 focus:ring-indigo-500 outline-none",children:[(0,er.jsx)("option",{value:"",children:"Select Rentable Asset..."}),n.filter(e=>e.is_asset_fixed||e.track_laundry_cycle||!e.is_perishable).map(e=>(0,er.jsx)("option",{value:e.id,children:e.name},e.id))]}):(0,er.jsx)("span",{className:"font-medium text-gray-900",children:e.item_name})}),(0,er.jsx)("td",{className:"px-3 py-2 text-sm text-gray-600 font-mono",children:e.serial_number||e.asset_tag||"-"}),(0,er.jsx)("td",{className:"px-3 py-2 text-sm text-gray-900 font-medium text-center",children:e.location_stock||1}),(0,er.jsx)("td",{className:"px-3 py-2 text-center",children:(0,er.jsx)("input",{type:"checkbox",checked:!1!==e.is_present,onChange:e=>{const t=[...h];t[a]=Be(Be({},t[a]),{},{is_present:e.target.checked}),m(t)},className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"})}),(0,er.jsx)("td",{className:"px-3 py-2 text-center",children:(0,er.jsx)("input",{type:"checkbox",checked:e.is_damaged||!1,onChange:e=>{const t=[...h];t[a]=Be(Be({},t[a]),{},{is_damaged:e.target.checked}),m(t)},className:"w-4 h-4 text-red-600 border-gray-300 rounded focus:ring-red-500"})}),(0,er.jsx)("td",{className:"px-3 py-2 text-sm",children:e.is_damaged?(0,er.jsx)("input",{type:"text",placeholder:"Damage notes...",value:e.damage_notes||"",onChange:e=>{const t=[...h];t[a]=Be(Be({},t[a]),{},{damage_notes:e.target.value}),m(t)},className:"w-full px-2 py-1 text-xs border border-red-300 rounded bg-red-50 focus:ring-2 focus:ring-red-500 outline-none"}):(0,er.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium ".concat("active"===(e.status||"active").toLowerCase()?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.status||"Active"})}),(0,er.jsx)("td",{className:"px-3 py-2 text-sm",children:(0,er.jsx)("input",{type:"number",min:"0",step:"0.01",value:e.rental_price||e.selling_price||0,disabled:!e.is_new,onChange:e=>{const t=[...h];t[a]=Be(Be({},t[a]),{},{rental_price:parseFloat(e.target.value)||0}),m(t)},className:"w-24 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500 outline-none ".concat(e.is_new?"":"bg-gray-100 text-gray-500")})}),(0,er.jsx)("td",{className:"px-3 py-2 text-sm",children:e.is_new?(0,er.jsxs)("select",{value:e.source_location_id||"",onChange:t=>{const r=t.target.value;if(e.item_id&&r){var n;const t=null===(n=_[e.item_id])||void 0===n?void 0:n[r],a=e.location_stock||1;if(void 0!==t&&t<a)return void alert("Insufficient stock at selected location!\n\nAvailable: ".concat(t,"\nRequired: ").concat(a,"\n\nPlease select a different location or reduce quantity."))}const s=[...h];s[a]=Be(Be({},s[a]),{},{source_location_id:r}),m(s)},className:"w-48 px-2 py-1 text-sm border rounded focus:ring-2 focus:ring-indigo-500 outline-none ".concat(e.item_id&&e.source_location_id&&((null===(r=_[e.item_id])||void 0===r?void 0:r[e.source_location_id])||0)<(e.location_stock||1)?"border-red-500 bg-red-50":"border-gray-300"),children:[(0,er.jsx)("option",{value:"",children:"Select Source"}),s.filter(e=>!0===e.is_inventory_point||["WAREHOUSE","STORE","BRANCH_STORE","CENTRAL_WAREHOUSE","STORAGE"].includes(String(e.location_type||"").toUpperCase())).map(t=>{var r;const n=e.item_id?null===(r=_[e.item_id])||void 0===r?void 0:r[t.id]:null,a=void 0!==n&&null!==n?" (Stock: ".concat(n,")"):e.item_id?" (Stock: ...)":"";return(0,er.jsxs)("option",{value:t.id,children:[t.name,a]},t.id)})]}):(0,er.jsx)("span",{className:"text-gray-500 text-xs",children:e.source||"-"})}),(0,er.jsx)("td",{className:"px-3 py-2 text-sm",children:e.is_new?(0,er.jsx)("button",{type:"button",onClick:()=>{m(h.filter((e,t)=>t!==a))},className:"text-red-600 hover:text-red-800 text-xs underline",children:"Remove"}):e.is_damaged?(0,er.jsx)("button",{type:"button",onClick:()=>A(e),className:"bg-red-100 text-red-700 hover:bg-red-200 px-2 py-1 rounded text-xs font-semibold",children:"Charge Damage"}):(0,er.jsx)("span",{className:"text-gray-400 text-xs",children:"-"})})]},t)})})]})}),h.some(e=>e.is_new&&"asset"===e.type&&e.is_rentable&&e.item_id)&&(0,er.jsx)("div",{className:"mt-4 flex justify-end",children:(0,er.jsxs)("button",{type:"button",onClick:async()=>{try{var e,r;const n=t.rooms&&t.rooms[0]||null,a=(null===n||void 0===n?void 0:n.number)||(null===n||void 0===n||null===(e=n.room)||void 0===e?void 0:e.number)||null;if(!a)return void alert("Room number not found");const i=e=>String(e||"").trim().toLowerCase().replace(/^0+/,""),l=i(a),c=s.find(e=>{if("GUEST_ROOM"!==String(e.location_type||"").toUpperCase())return!1;const t=i(e.room_area),r=i(e.name);return t===l||r===l||r.includes(l)||t.includes(l)});if(!c)return void alert("Room location not found for room ".concat(a));const d=h.filter(e=>e.is_new&&"asset"===e.type&&e.is_rentable&&e.item_id);if(0===d.length)return void alert("No rentable assets to save");for(const e of d){if(!e.source_location_id)return void alert("Please select a source location for ".concat(e.item_name));const t={source_location_id:e.source_location_id,destination_location_id:c.id,issue_date:(new Date).toISOString(),notes:"Rentable asset: ".concat(e.item_name),details:[{item_id:e.item_id,issued_quantity:1,unit:"pcs",rental_price:e.rental_price,is_payable:!0,notes:"Rental price: \u20b9".concat(e.rental_price||0)}]};await Ia.post("/inventory/issues",t,o())}alert("Successfully saved ".concat(d.length," rentable asset(s)"));const u=await Ia.get("/inventory/locations/".concat(c.id,"/items"),o());m((null===(r=u.data)||void 0===r?void 0:r.items)||[])}catch(i){var n,a;console.error("Error saving rentable assets:",i),alert("Failed to save assets: ".concat((null===(n=i.response)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.detail)||i.message))}},className:"px-4 py-2 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 flex items-center gap-2",children:[(0,er.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Save Rentable Assets"]})})]})]})]}),"food"===g&&(0,er.jsx)(T$,{booking:t,authHeader:o,API:Ia,formatCurrency:ym}),"services"===g&&(0,er.jsx)(P$,{booking:t,authHeader:o,API:Ia,formatCurrency:ym}),"add"===g&&(0,er.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const r=l.filter(e=>e.item_id&&e.quantity>0);if(0!==r.length){u(!0);try{var a;const e=s.find(e=>{const t=String(e.location_type||"").toUpperCase();return!0===e.is_inventory_point&&("CENTRAL_WAREHOUSE"===t||"WAREHOUSE"===t||"BRANCH_STORE"===t)||"CENTRAL_WAREHOUSE"===t||"WAREHOUSE"===t||"BRANCH_STORE"===t});if(!e)return alert("Main warehouse not found. Please create a main warehouse location first."),void u(!1);const l=t.rooms&&t.rooms[0]||null,h=(null===l||void 0===l?void 0:l.number)||(null===l||void 0===l||null===(a=l.room)||void 0===a?void 0:a.number)||null;let p=null;if(h&&(p=s.find(e=>{if("GUEST_ROOM"!==String(e.location_type||"").toUpperCase())return!1;return"".concat(e.name||""," ").concat(e.room_area||"").toLowerCase().includes(String(h).toLowerCase())})||null),!p)return alert("Room location not found for room ".concat(h,". Please ensure the room is synced as a location.")),void u(!1);const g={};r.forEach(t=>{const r=t.source_location_id||e.id;g[r]||(g[r]=[]),g[r].push(t)});const y=Object.keys(g);let v=0;for(const r of y){const e=g[r],a=e.map(e=>{const t=n.find(t=>t.id===parseInt(e.item_id)),r=(null===t||void 0===t?void 0:t.unit)||"pcs";return{item_id:e.item_id,issued_quantity:parseFloat(e.quantity),unit:r,is_payable:!0===e.is_payable,notes:e.notes||""}}),s=a.reduce((e,t)=>e+(t.is_payable?t.issued_quantity:0),0),i=a.reduce((e,t)=>e+(t.is_payable?0:t.issued_quantity),0),l={requisition_id:null,source_location_id:r,destination_location_id:p.id,issue_date:j$(),notes:"Extra allocation for booking ".concat(R(t)," (").concat(s," payable, ").concat(i," comp) - Source: ").concat(r),details:a};await Ia.post("/inventory/issues",l,o()),v+=e.length}if(alert("Successfully added ".concat(v," item(s) to room from ").concat(y.length," source(s)!")),c([{item_id:"",quantity:1,is_payable:!1,manual_override:!1,notes:"",source_location_id:M()}]),p)try{var d;const e=await Ia.get("/inventory/locations/".concat(p.id,"/items"),o());m((null===(d=e.data)||void 0===d?void 0:d.items)||[]),x("current")}catch(f){console.error("Error refreshing items:",f)}i&&i()}catch(f){var h,p;console.error("Error adding extra allocation:",f),alert("Failed to add allocation: "+((null===(h=f.response)||void 0===h||null===(p=h.data)||void 0===p?void 0:p.detail)||f.message))}finally{u(!1)}}else alert("Please add at least one item with a valid quantity")},className:"space-y-4",children:[(0,er.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,er.jsx)("h4",{className:"text-lg font-semibold text-gray-800",children:"Items to Allocate"}),(0,er.jsx)("div",{className:"flex items-center gap-2",children:(0,er.jsxs)("button",{type:"button",onClick:()=>{c([...l,{item_id:"",quantity:1,is_payable:!1,manual_override:!1,notes:"",source_location_id:M()}])},className:"px-3 py-1 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 flex items-center gap-1",children:[(0,er.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Item"]})})]}),(0,er.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:l.map((e,t)=>{var r,a,i;return(0,er.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[(0,er.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,er.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["Item ",t+1]}),l.length>1&&(0,er.jsx)("button",{type:"button",onClick:()=>(e=>{l.length>1&&c(l.filter((t,r)=>r!==e))})(t),className:"text-red-600 hover:text-red-800 text-sm",children:"Remove"})]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Item"}),(0,er.jsxs)("select",{value:e.item_id,onChange:e=>F(t,"item_id",e.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 pr-8",children:[(0,er.jsx)("option",{value:"",children:"Select an item"}),n.filter(e=>!1!==e.is_active&&e.is_sellable_to_guest).map(t=>{var r;return(0,er.jsxs)("option",{value:t.id,children:[t.name," ",t.item_code?"(".concat(t.item_code,")"):""," ","- Avail: ",(null===(r=_[t.id])||void 0===r?void 0:r[e.source_location_id||M()])||0," ",t.unit," (Global: ",t.current_stock,")",t.complimentary_limit?" (First ".concat(t.complimentary_limit," free)"):""]},t.id)})]}),e.item_id&&(0,er.jsx)("button",{type:"button",onClick:()=>{const t=n.find(t=>t.id==e.item_id);t&&(async e=>{P(e),E(!0),L(!0);try{const t=await Ia.get("/inventory/items/".concat(e.id,"/stocks"),o());D(t.data)}catch(t){console.error("Error fetching item stocks:",t),D([])}finally{L(!1)}})(t)},className:"absolute right-2 top-8 text-indigo-600 hover:text-indigo-800",title:"View Stock Locations",children:(0,er.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,er.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Source Location"}),(0,er.jsx)("select",{value:e.source_location_id||M(),onChange:e=>F(t,"source_location_id",parseInt(e.target.value)),className:"w-full px-3 py-2 text-sm border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ".concat(e.item_id&&((null===(r=_[e.item_id])||void 0===r?void 0:r[e.source_location_id||M()])||0)<e.quantity?"border-red-500 bg-red-50 text-red-900":"border-gray-300"),children:s.filter(e=>{const t=String(e.location_type||"").toUpperCase();return!0===e.is_inventory_point||["CENTRAL_WAREHOUSE","WAREHOUSE","BRANCH_STORE","STORE","STORAGE"].includes(t)}).map(t=>{var r;const n=e.item_id?null===(r=_[e.item_id])||void 0===r?void 0:r[t.id]:null,a=void 0!==n&&null!==n?" - Stock: ".concat(n):e.item_id?" - Stock: ...":"";return(0,er.jsxs)("option",{value:t.id,children:[t.name," ",t.building&&t.room_area?"(".concat(t.building," - ").concat(t.room_area,")"):"",a]},t.id)})})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Total Quantity"}),(0,er.jsx)("input",{type:"number",value:e.quantity,onChange:r=>{const a=n.find(t=>t.id==e.item_id),s=rW(r.target.value,null===a||void 0===a?void 0:a.unit);F(t,"quantity",s)},onBlur:r=>{const a=n.find(t=>t.id==e.item_id),s=rW(e.quantity,null===a||void 0===a?void 0:a.unit);s!==e.quantity&&F(t,"quantity",s)},className:"w-full px-3 py-2 text-sm border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ".concat(e.item_id&&((null===(a=_[e.item_id])||void 0===a?void 0:a[e.source_location_id||M()])||0)<e.quantity?"border-red-500 bg-red-50 text-red-900":"border-gray-300")}),e.item_id&&((null===(i=_[e.item_id])||void 0===i?void 0:i[e.source_location_id||M()])||0)<e.quantity&&(0,er.jsx)("p",{className:"text-xs text-red-600 mt-1 font-medium",children:"Insufficient Stock!"})]})]}),(0,er.jsxs)("div",{className:"mt-3",children:[(0,er.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Item Type"}),(0,er.jsxs)("div",{className:"flex gap-4",children:[(0,er.jsxs)("label",{className:"flex items-center cursor-pointer p-2 border rounded-lg hover:bg-gray-50 transition-colors",children:[(0,er.jsx)("input",{type:"radio",name:"is_payable_".concat(t),checked:!e.is_payable,onChange:()=>F(t,"is_payable",!1),className:"w-4 h-4 text-green-600 focus:ring-green-500 border-gray-300 mr-2"}),(0,er.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Complimentary"})]}),(0,er.jsxs)("label",{className:"flex items-center cursor-pointer p-2 border rounded-lg hover:bg-gray-50 transition-colors",children:[(0,er.jsx)("input",{type:"radio",name:"is_payable_".concat(t),checked:!0===e.is_payable,onChange:()=>F(t,"is_payable",!0),className:"w-4 h-4 text-orange-600 focus:ring-orange-500 border-gray-300 mr-2"}),(0,er.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Payable"})]})]})]}),(0,er.jsxs)("div",{className:"mt-2",children:[(0,er.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Notes (Optional)"}),(0,er.jsx)("input",{type:"text",value:e.notes,onChange:e=>F(t,"notes",e.target.value),placeholder:"e.g., Extra bed, Towels, etc.",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]},t)})}),(0,er.jsxs)("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[(0,er.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,er.jsx)("button",{type:"submit",disabled:d,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50",children:d?"Adding...":"Add ".concat(l.filter(e=>e.item_id&&e.quantity>0).length," Item(s)")})]})]}),C&&(0,er.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]",children:(0,er.jsxs)("div",{className:"bg-white rounded-lg w-full max-w-md p-6 m-4 max-h-[90vh] overflow-y-auto",children:[(0,er.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,er.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["Stock Locations: ",null===T||void 0===T?void 0:T.name]}),(0,er.jsx)("button",{type:"button",onClick:()=>E(!1),className:"text-gray-400 hover:text-gray-500",children:(0,er.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),I?(0,er.jsx)("div",{className:"text-center py-4",children:"Loading stocks..."}):0===O.length?(0,er.jsx)("div",{className:"text-center py-4 text-gray-500",children:"No stock found in any location."}):(0,er.jsxs)("div",{className:"space-y-2",children:[(0,er.jsxs)("div",{className:"bg-blue-50 p-2 rounded text-sm text-blue-700 mb-2",children:["Total Global Stock: ",null===T||void 0===T?void 0:T.current_stock]}),(0,er.jsxs)("table",{className:"min-w-full text-sm",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"bg-gray-50 text-left",children:[(0,er.jsx)("th",{className:"px-3 py-2 font-medium text-gray-600",children:"Location"}),(0,er.jsx)("th",{className:"px-3 py-2 font-medium text-gray-600",children:"Type"}),(0,er.jsx)("th",{className:"px-3 py-2 font-medium text-gray-600 text-right",children:"Quantity"})]})}),(0,er.jsx)("tbody",{className:"divide-y divide-gray-100",children:O.map((e,t)=>(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsx)("td",{className:"px-3 py-2 text-gray-800",children:e.location_name}),(0,er.jsx)("td",{className:"px-3 py-2 text-gray-500 text-xs",children:e.location_type}),(0,er.jsx)("td",{className:"px-3 py-2 text-gray-800 text-right font-medium",children:e.quantity})]},t))})]})]}),(0,er.jsx)("div",{className:"mt-6 flex justify-end",children:(0,er.jsx)("button",{type:"button",onClick:()=>E(!1),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:"Close"})})]})})]})})},A$=e=>{let{booking:t,onSave:r,onClose:n,feedback:s,isSubmitting:i}=e;if(!t||!t.check_out||!t.id)return(0,er.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,er.jsxs)("div",{className:"bg-white p-8 rounded-xl shadow-2xl w-full max-w-lg",children:[(0,er.jsx)("p",{className:"text-red-600",children:"Error: Invalid booking data. Please close and try again."}),(0,er.jsx)("button",{onClick:n,className:"mt-4 w-full bg-indigo-600 text-white font-semibold py-2 rounded-md hover:bg-indigo-700 transition-colors",children:"Close"})]})});const[o,l]=(0,a.useState)(t.check_out||""),c=t.check_out||"";return(0,er.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,er.jsxs)(Fh.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:"bg-white p-8 rounded-xl shadow-2xl w-full max-w-lg",children:[(0,er.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,er.jsx)("h3",{className:"text-2xl font-bold text-gray-800",children:"Extend Booking"}),(0,er.jsx)("button",{onClick:n,className:"text-gray-500 hover:text-gray-800 transition-colors",children:(0,er.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,er.jsxs)("div",{className:"space-y-4 text-gray-700",children:[(0,er.jsxs)("p",{children:[(0,er.jsx)("strong",{children:"Current Check-in:"})," ",t.check_in]}),(0,er.jsxs)("p",{children:[(0,er.jsx)("strong",{children:"Current Check-out:"})," ",t.check_out]}),(0,er.jsxs)("div",{className:"flex flex-col",children:[(0,er.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"New Check-out Date"}),(0,er.jsx)("input",{type:"date",value:o||"",onChange:e=>{const t=e.target.value;t&&l(t)},min:c||"",className:"w-full border-gray-300 rounded-lg shadow-sm p-2 transition-colors focus:border-indigo-500 focus:ring-indigo-500"})]})]}),(0,er.jsx)("button",{onClick:()=>{t.id&&o&&r(t.id,o)},disabled:i||!o||!c||o<=c,className:"mt-6 w-full bg-indigo-600 text-white font-semibold py-2 rounded-md hover:bg-indigo-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:i?"Saving...":"Save"})]})})},C$=e=>{let{booking:t,onSave:r,onClose:n,feedback:s,isSubmitting:i,inventoryItems:o=[]}=e;const[l,c]=(0,a.useState)(null),[d,u]=(0,a.useState)(null),[h,m]=(0,a.useState)(null),[p,f]=(0,a.useState)(null),g=(e,t)=>{const r=e.target.files[0];if(!r)return;const n=URL.createObjectURL(r);"id"===t?(c(r),m(n)):(u(r),f(n))},x=()=>{if(t.check_in&&t.check_out){const e=new Date(t.check_in),r=new Date(t.check_out)-e,n=Math.round(r/864e5);return Math.max(n,1)}return 1},y=t.rooms&&t.rooms.length>0?t.rooms.map(e=>{var r;return t.is_package&&null!==e&&void 0!==e&&null!==(r=e.room)&&void 0!==r&&r.number?"".concat(e.room.number," (").concat(e.room.type,")"):null!==e&&void 0!==e&&e.number?"".concat(e.number," (").concat(e.type,")"):"-"}).join(", "):"-";return(0,er.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,er.jsx)(Fh.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:(0,er.jsxs)("div",{className:"p-8",children:[(0,er.jsxs)("h3",{className:"text-2xl font-bold text-gray-800 mb-6 text-center",children:["Check-in Guest: ",t.guest_name]}),t.is_package&&t.package&&(0,er.jsxs)("div",{className:"bg-indigo-50 p-4 rounded-lg mb-6 border border-indigo-100",children:[(0,er.jsxs)("h4",{className:"font-bold text-indigo-900 flex items-center gap-2 mb-2",children:[(0,er.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),"Package: ",t.package.title]}),(0,er.jsxs)("div",{className:"text-sm text-gray-700 space-y-1",children:[(0,er.jsxs)("p",{children:[(0,er.jsx)("strong",{children:"Rooms:"})," ",y]}),(0,er.jsxs)("p",{children:[(0,er.jsx)("strong",{children:"Duration:"})," ",x()," night(s)"]}),(0,er.jsxs)("p",{children:[(0,er.jsx)("strong",{children:"Guests:"})," ",t.adults," Adults, ",t.children," Children"]})]})]}),!t.is_package&&(0,er.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg mb-6 border border-blue-100",children:[(0,er.jsxs)("h4",{className:"font-bold text-blue-900 flex items-center gap-2 mb-2",children:[(0,er.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),"Room Booking"]}),(0,er.jsxs)("div",{className:"text-sm text-gray-700 space-y-1",children:[(0,er.jsxs)("p",{children:[(0,er.jsx)("strong",{children:"Rooms:"})," ",y]}),(0,er.jsxs)("p",{children:[(0,er.jsx)("strong",{children:"Duration:"})," ",x()," night(s)"]}),(0,er.jsxs)("p",{children:[(0,er.jsx)("strong",{children:"Guests:"})," ",t.adults," Adults, ",t.children," Children"]})]})]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[(0,er.jsxs)("div",{className:"flex flex-col items-center",children:[(0,er.jsx)("label",{className:"font-medium text-gray-700 mb-2",children:"ID Card Image"}),(0,er.jsxs)("div",{className:"flex items-center gap-4 w-full",children:[(0,er.jsxs)("label",{className:"flex-shrink-0 px-4 py-2 bg-indigo-50 text-indigo-700 rounded-lg cursor-pointer hover:bg-indigo-100 font-medium transition-colors",children:["Choose File",(0,er.jsx)("input",{type:"file",accept:"image/*",onChange:e=>g(e,"id"),className:"hidden"})]}),(0,er.jsx)("span",{className:"text-sm text-gray-500 truncate",children:l?l.name:"No file chosen"})]}),h&&(0,er.jsx)("img",{src:h,alt:"ID Preview",className:"mt-4 w-full h-48 object-contain rounded-lg border border-gray-200 bg-gray-50"})]}),(0,er.jsxs)("div",{className:"flex flex-col items-center",children:[(0,er.jsx)("label",{className:"font-medium text-gray-700 mb-2",children:"Guest Photo"}),(0,er.jsxs)("div",{className:"flex items-center gap-4 w-full",children:[(0,er.jsxs)("label",{className:"flex-shrink-0 px-4 py-2 bg-indigo-50 text-indigo-700 rounded-lg cursor-pointer hover:bg-indigo-100 font-medium transition-colors",children:["Choose File",(0,er.jsx)("input",{type:"file",accept:"image/*",onChange:e=>g(e,"guest"),className:"hidden"})]}),(0,er.jsx)("span",{className:"text-sm text-gray-500 truncate",children:d?d.name:"No file chosen"})]}),p&&(0,er.jsx)("img",{src:p,alt:"Guest Preview",className:"mt-4 w-full h-48 object-contain rounded-lg border border-gray-200 bg-gray-50"})]})]}),(0,er.jsx)("hr",{className:"border-gray-200 mb-8"}),amenitySummary&&(0,er.jsxs)("div",{className:"mb-8",children:[(0,er.jsx)("h4",{className:"text-lg font-bold text-gray-800 mb-2",children:"Amenity Allocation for this Stay"}),(0,er.jsxs)("p",{className:"text-sm text-gray-500 mb-6",children:["Based on room type ",(0,er.jsx)("span",{className:"font-semibold text-gray-700",children:amenitySummary.roomType})," and ",amenitySummary.nights," night(s). Quantities are defined by the package. You can adjust limits and add extra amenities here."]}),(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full text-sm text-left",children:[(0,er.jsx)("thead",{className:"bg-gray-50 text-gray-500 font-medium border-b border-gray-200",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"px-4 py-3 w-1/3",children:"Item"}),(0,er.jsx)("th",{className:"px-4 py-3 w-32",children:"Type"}),(0,er.jsx)("th",{className:"px-4 py-3",children:"Frequency"}),(0,er.jsx)("th",{className:"px-4 py-3 w-24",children:"Qty / Night"}),(0,er.jsx)("th",{className:"px-4 py-3 w-24",children:"Qty / Stay"}),(0,er.jsx)("th",{className:"px-4 py-3 w-32",children:"Price (if Payable)"}),(0,er.jsx)("th",{className:"px-4 py-3 w-10"})]})}),(0,er.jsx)("tbody",{className:"divide-y divide-gray-100",children:amenityConfig.map((e,t)=>(0,er.jsxs)("tr",{className:"group hover:bg-gray-50 transition-colors",children:[(0,er.jsx)("td",{className:"px-4 py-2",children:(0,er.jsxs)("div",{className:"flex flex-col",children:[e.is_package?(0,er.jsxs)("div",{className:"flex flex-col gap-1.5",children:[(0,er.jsxs)("div",{className:"flex items-center gap-2",children:[(0,er.jsx)("span",{className:"bg-orange-100 text-orange-800 text-[10px] px-2 py-0.5 rounded font-bold uppercase tracking-wider",children:"Package"}),(0,er.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.name})]}),(0,er.jsx)("div",{className:"relative",children:(0,er.jsxs)("select",{value:e.item_id||"",onChange:r=>{const n=r.target.value?Number(r.target.value):null,a=o.find(e=>e.id===n);handleAmenityChange(t,"item_id",n),a&&e.is_payable&&handleAmenityChange(t,"extraPrice",Number(a.selling_price)||0)},className:"w-full text-xs py-1.5 pl-2 pr-8 border rounded-lg bg-gray-50 text-gray-600 hover:bg-white hover:border-gray-400 focus:ring-1 focus:ring-orange-500 outline-none transition-all cursor-pointer ".concat(e.item_id?"border-gray-200":"border-orange-300 bg-orange-50 text-orange-800 font-medium"),children:[(0,er.jsx)("option",{value:"",children:e.item_id?"Change Inventory Link":"Link Inventory Item (Required)"}),(()=>{const e=o.reduce((e,t)=>{var r;const n=(null===(r=t.category)||void 0===r?void 0:r.name)||"Uncategorized";return e[n]||(e[n]=[]),e[n].push(t),e},{});return Object.entries(e).map(e=>{let[t,r]=e;return(0,er.jsx)("optgroup",{label:t,children:r.map(e=>(0,er.jsx)("option",{value:e.id,children:e.name},e.id))},t)})})()]})})]}):(0,er.jsxs)("select",{value:e.item_id||"",onChange:r=>{const n=r.target.value?Number(r.target.value):null,a=o.find(e=>e.id===n);handleAmenityChange(t,"item_id",n),a&&(handleAmenityChange(t,"name",a.name||e.name),e.is_payable&&handleAmenityChange(t,"extraPrice",Number(a.selling_price)||0))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none ".concat(e.item_id?"":"border-indigo-300 bg-indigo-50"),children:[(0,er.jsx)("option",{value:"",children:"Select item from inventory"}),(()=>{const e=o.reduce((e,t)=>{var r;const n=(null===(r=t.category)||void 0===r?void 0:r.name)||"Uncategorized";return e[n]||(e[n]=[]),e[n].push(t),e},{});return Object.entries(e).map(e=>{let[t,r]=e;return(0,er.jsx)("optgroup",{label:t,children:r.map(e=>(0,er.jsx)("option",{value:e.id,children:e.name},e.id))},t)})})()]}),!e.item_id&&e.name&&!e.is_package&&(0,er.jsxs)("span",{className:"text-xs text-orange-600 mt-1 font-medium flex items-center gap-1",children:[(0,er.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:(0,er.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),"Package Item: ",e.name]})]})}),(0,er.jsx)("td",{className:"px-4 py-2",children:(0,er.jsxs)("select",{value:e.is_payable?"payable":"complimentary",onChange:r=>{const n="payable"===r.target.value;if(handleAmenityChange(t,"is_payable",n),n){const r=o.find(t=>t.id===e.item_id);r&&handleAmenityChange(t,"extraPrice",Number(r.selling_price)||0)}else handleAmenityChange(t,"extraPrice",0)},className:"w-full px-3 py-2 border rounded-lg focus:ring-2 outline-none font-medium ".concat(e.is_payable?"border-blue-300 bg-blue-50 text-blue-700 focus:ring-blue-500":"border-green-300 bg-green-50 text-green-700 focus:ring-green-500"),children:[(0,er.jsx)("option",{value:"complimentary",children:"Complimentary"}),(0,er.jsx)("option",{value:"payable",children:"Payable"})]})}),(0,er.jsx)("td",{className:"px-4 py-2",children:(0,er.jsxs)("select",{value:e.frequency,onChange:e=>handleAmenityChange(t,"frequency",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",children:[(0,er.jsx)("option",{value:"PER_NIGHT",children:"Per Night"}),(0,er.jsx)("option",{value:"PER_STAY",children:"Per Stay"})]})}),(0,er.jsx)("td",{className:"px-4 py-2",children:(0,er.jsx)("input",{type:"number",min:"0",value:e.complimentaryPerNight,onChange:e=>handleAmenityChange(t,"complimentaryPerNight",Number(e.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",disabled:"PER_STAY"===e.frequency})}),(0,er.jsx)("td",{className:"px-4 py-2",children:(0,er.jsx)("input",{type:"number",min:"0",value:e.complimentaryPerStay,onChange:e=>handleAmenityChange(t,"complimentaryPerStay",Number(e.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none"})}),(0,er.jsxs)("td",{className:"px-4 py-2 relative",children:[(0,er.jsx)("span",{className:"absolute left-7 top-1/2 -translate-y-1/2 ".concat(e.is_payable?"text-gray-500":"text-gray-400"),children:"\u20b9"}),(0,er.jsx)("input",{type:"number",min:"0",value:e.extraPrice,onChange:e=>handleAmenityChange(t,"extraPrice",Number(e.target.value)||0),className:"w-full pl-6 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none ".concat(e.is_payable?"":"bg-gray-100 text-gray-400 cursor-not-allowed"),disabled:!e.is_payable})]}),(0,er.jsx)("td",{className:"px-4 py-2 text-center",children:(0,er.jsx)("button",{type:"button",onClick:()=>handleRemoveAmenity(t),className:"text-gray-400 hover:text-red-500 transition-colors",children:(0,er.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},e.id))})]})}),(0,er.jsxs)("button",{type:"button",onClick:handleAddAmenity,className:"mt-4 px-4 py-2 border border-dashed border-indigo-300 text-indigo-600 rounded-lg hover:bg-indigo-50 font-medium flex items-center gap-2 transition-colors",children:[(0,er.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Amenity"]}),(0,er.jsx)("p",{className:"mt-4 text-xs text-gray-400 italic",children:"These settings control only the allocation logic; actual stock and charges are handled from the Inventory & Billing modules."})]}),(0,er.jsxs)("div",{className:"flex gap-4 pt-4 border-t border-gray-100",children:[(0,er.jsx)("button",{onClick:n,className:"flex-1 bg-gray-100 text-gray-700 font-semibold py-3 rounded-xl hover:bg-gray-200 transition-colors",children:"Cancel"}),(0,er.jsx)("button",{onClick:()=>{var e;"booked"===(null===(e=t.status)||void 0===e?void 0:e.toLowerCase().replace(/[-_]/g,""))?l&&d?r(t.id,{id_card_image:l,guest_photo:d}):alert("Please upload both ID card and guest photo."):alert("Cannot check in. Booking status is: ".concat(t.status))},disabled:i||!l||!d,className:"flex-1 bg-gray-800 text-white font-semibold py-3 rounded-xl hover:bg-gray-900 transition-colors disabled:bg-gray-400 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:i?"Processing...":"Confirm Check-in"})]})]})})})},E$=a.memo(e=>{let{data:t}=e;const r=(0,a.useMemo)(()=>{const e=t.reduce((e,t)=>(e[t.status]=(e[t.status]||0)+1,e),{});return{labels:Object.keys(e),datasets:[{data:Object.values(e),backgroundColor:["rgba(79, 70, 229, 0.7)","rgba(34, 197, 94, 0.7)","rgba(239, 68, 68, 0.7)","rgba(107, 114, 128, 0.7)"],borderColor:["rgba(79, 70, 229, 1)","rgba(34, 197, 94, 1)","rgba(239, 68, 68, 1)","rgba(107, 114, 128, 1)"],borderWidth:1}]}},[t]);return(0,er.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-lg flex-1",children:[(0,er.jsx)("h3",{className:"text-xl font-bold mb-4 text-gray-800",children:"Bookings by Status"}),(0,er.jsx)("div",{className:"w-full h-64 flex items-center justify-center",children:(0,er.jsx)($Q,{data:r})})]})});E$.displayName="BookingStatusChart";function T$(e){var t;let{booking:r,authHeader:n,API:s,formatCurrency:i}=e;const[o,l]=a.useState([]),[c,d]=a.useState(!1),u=ie();a.useEffect(()=>{h()},[r]);const h=async()=>{d(!0);try{var e;const t=n?n():{},a=(await s.get("/food-orders/?limit=1000",t)).data||[],i=(null===(e=r.rooms)||void 0===e?void 0:e.map(e=>e.id||e.room_id))||[],o=a.filter(e=>!!i.includes(e.room_id));l(o)}catch(t){console.error("Failed to fetch food orders",t)}finally{d(!1)}},m=r.rooms&&r.rooms[0],p=(null===m||void 0===m?void 0:m.number)||(null===m||void 0===m||null===(t=m.room)||void 0===t?void 0:t.number);return(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,er.jsxs)("h4",{className:"text-lg font-semibold text-gray-800",children:["Food Orders for Room ",p]}),(0,er.jsxs)("div",{className:"flex gap-2",children:[(0,er.jsx)("button",{onClick:h,className:"px-3 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200 text-sm",children:"Refresh"}),(0,er.jsx)("button",{onClick:()=>u("/food-management/orders"),className:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 text-sm",children:"Go to Food Orders"})]})]}),c?(0,er.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Loading orders..."}):0===o.length?(0,er.jsxs)("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[(0,er.jsx)("p",{className:"text-gray-500",children:"No food orders found for this room."}),(0,er.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Visit the Food Orders page to create a new order."})]}):(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,er.jsx)("thead",{className:"bg-gray-50",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Order #"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Items"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Payment"})]})}),(0,er.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(e=>{var t;return(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsxs)("td",{className:"px-3 py-2 text-sm font-medium text-gray-900",children:[e.id,(0,er.jsx)("div",{className:"text-xs text-gray-500",children:new Date(e.created_at).toLocaleString()})]}),(0,er.jsx)("td",{className:"px-3 py-2 text-sm",children:(0,er.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold \n                      ".concat("completed"===e.status?"bg-green-100 text-green-800":"pending"===e.status?"bg-yellow-100 text-yellow-800":"cancelled"===e.status?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"),children:e.status})}),(0,er.jsxs)("td",{className:"px-3 py-2 text-sm text-gray-600",children:[(null===(t=e.items)||void 0===t?void 0:t.length)||0," items"]}),(0,er.jsx)("td",{className:"px-3 py-2 text-sm font-semibold text-gray-900",children:i(e.total_amount||e.amount||0)}),(0,er.jsx)("td",{className:"px-3 py-2 text-sm",children:(0,er.jsx)("span",{className:"px-2 py-1 rounded-full text-xs \n                      ".concat("paid"===e.payment_status?"text-green-600":"text-orange-600"),children:"billed"===e.billing_status?"Billed":e.payment_status||"Unpaid"})})]},e.id)})})]})})]})}function P$(e){let{booking:t,authHeader:r,API:n,formatCurrency:s}=e;const[i,o]=a.useState([]),[l,c]=a.useState([]),[d,u]=a.useState([]),[h,m]=a.useState(!1),[p,f]=a.useState({service_id:"",employee_id:""}),[g,x]=a.useState(!1);a.useEffect(()=>{y()},[t]);const y=async()=>{m(!0);try{var e;console.log("[RoomServiceAssignments] === FETCH DATA START ==="),console.log("[RoomServiceAssignments] Booking object:",JSON.stringify(t,null,2)),console.log("[RoomServiceAssignments] Booking.rooms:",t.rooms);const a=(null===(e=t.rooms)||void 0===e?void 0:e.map(e=>{const t=e.id||e.room_id;return console.log("[RoomServiceAssignments] Room object:",e,"=> Extracted ID:",t),t}))||[];console.log("[RoomServiceAssignments] Final extracted room IDs:",a);const s=r?r():{};console.log("[RoomServiceAssignments] Auth config:",s?"\u2713 Present":"\u2717 Missing");const[i,l,d]=await Promise.all([n.get("/services?limit=100",s).catch(e=>{var t;return console.error("[RoomServiceAssignments] Services API error:",(null===(t=e.response)||void 0===t?void 0:t.data)||e.message),{data:[]}}),n.get("/services/assigned?limit=1000",s).catch(e=>{var t;return console.error("[RoomServiceAssignments] Assignments API error:",(null===(t=e.response)||void 0===t?void 0:t.data)||e.message),{data:[]}}),n.get("/employees?limit=100",s).catch(e=>{var t;return console.error("[RoomServiceAssignments] Employees API error:",(null===(t=e.response)||void 0===t?void 0:t.data)||e.message),{data:[]}})]),h=Array.isArray(i.data)?i.data:[],m=Array.isArray(d.data)?d.data:[];console.log("[RoomServiceAssignments] \u2713 Fetched",h.length,"services"),console.log("[RoomServiceAssignments] \u2713 Fetched",m.length,"employees"),h.length>0?console.log("[RoomServiceAssignments] Sample service:",h[0]):console.warn("[RoomServiceAssignments] \u26a0\ufe0f  No services found! Please create services first."),c(h),u(m);const p=l.data||[];console.log("[RoomServiceAssignments] Total assignments from API:",p.length),p.length>0&&console.log("[RoomServiceAssignments] First 3 assignments:",p.slice(0,3));const f=p.filter(e=>{const t=a.includes(e.room_id);return console.log("[RoomServiceAssignments] Assignment ".concat(e.id,": room_id=").concat(e.room_id,", matches=").concat(t)),t});console.log("[RoomServiceAssignments] \u2713 Filtered",f.length,"assignments for current booking (from",p.length,"total)"),o(f),console.log("[RoomServiceAssignments] === FETCH DATA END ===")}catch(a){console.error("[RoomServiceAssignments] \u2717 Fatal error:",a)}finally{m(!1)}};return(0,er.jsxs)("div",{className:"space-y-6",children:[(0,er.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[(0,er.jsx)("h5",{className:"font-semibold text-gray-700 mb-3",children:"Assign New Service"}),console.log("[RoomServiceAssignments RENDER] services:",l,"length:",l.length),(0,er.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!p.service_id||!p.employee_id)return void alert("Please select service and employee");const a=t.rooms&&t.rooms[0];if(a){x(!0);try{const e=r?r():{};await n.post("/services/assign",{service_id:parseInt(p.service_id),employee_id:parseInt(p.employee_id),room_id:a.id||a.room_id},e),alert("Service assigned successfully"),f({service_id:"",employee_id:""}),y()}catch(o){var s,i;console.error("Failed to assign service",o),alert("Failed to assign service: "+((null===(s=o.response)||void 0===s||null===(i=s.data)||void 0===i?void 0:i.detail)||o.message))}finally{x(!1)}}else alert("Room information missing")},className:"flex flex-wrap gap-4 items-end",children:[(0,er.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,er.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Service"}),(0,er.jsxs)("select",{value:p.service_id,onChange:e=>f(Be(Be({},p),{},{service_id:e.target.value})),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 border",children:[(0,er.jsx)("option",{value:"",children:"Select Service"}),l.map(e=>(0,er.jsxs)("option",{value:e.id,children:[e.name," (",s(e.charges),")"]},e.id))]})]}),(0,er.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,er.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Assign To (Employee)"}),(0,er.jsxs)("select",{value:p.employee_id,onChange:e=>f(Be(Be({},p),{},{employee_id:e.target.value})),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 border",children:[(0,er.jsx)("option",{value:"",children:"Select Employee"}),d.map(e=>(0,er.jsxs)("option",{value:e.id,children:[e.name," (",e.role,")"]},e.id))]})]}),(0,er.jsx)("button",{type:"submit",disabled:g,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50",children:g?"Assigning...":"Assign"})]})]}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,er.jsxs)("h4",{className:"text-lg font-semibold text-gray-800",children:["Assigned Services",(0,er.jsxs)("span",{className:"ml-2 text-sm font-normal text-gray-500",children:["(",i.length," total)"]})]}),(0,er.jsx)("button",{onClick:y,className:"px-3 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200 text-sm",children:"Refresh"})]}),h?(0,er.jsx)("div",{className:"text-center py-4 text-gray-500",children:"Loading assignments..."}):0===i.length?(0,er.jsxs)("div",{className:"text-center py-8 text-gray-500 bg-white border rounded-lg",children:[(0,er.jsx)("p",{className:"font-medium",children:"No services assigned yet."}),(0,er.jsx)("p",{className:"text-xs mt-1",children:"Use the form above to assign a service."})]}):(0,er.jsx)("div",{className:"overflow-x-auto bg-white border rounded-lg",children:(0,er.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,er.jsx)("thead",{className:"bg-gray-50",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Service"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Room"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Assigned To"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Assigned At"})]})}),(0,er.jsx)("tbody",{className:"divide-y divide-gray-200",children:i.map(e=>{var t,r,n,a;return(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsxs)("td",{className:"px-3 py-2",children:[(0,er.jsx)("div",{className:"text-sm font-medium text-gray-900",children:(null===(t=e.service)||void 0===t?void 0:t.name)||"Unknown"}),(0,er.jsx)("div",{className:"text-xs text-gray-500",children:s((null===(r=e.service)||void 0===r?void 0:r.charges)||0)})]}),(0,er.jsx)("td",{className:"px-3 py-2 text-sm text-gray-600",children:(null===(n=e.room)||void 0===n?void 0:n.number)||"N/A"}),(0,er.jsx)("td",{className:"px-3 py-2 text-sm text-gray-600",children:(null===(a=e.employee)||void 0===a?void 0:a.name)||"Unassigned"}),(0,er.jsx)("td",{className:"px-3 py-2",children:(0,er.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold\n                                        ".concat("completed"===e.status?"bg-green-100 text-green-800":"in_progress"===e.status?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"),children:e.status||"pending"})}),(0,er.jsx)("td",{className:"px-3 py-2 text-xs text-gray-500",children:e.assigned_at?new Date(e.assigned_at).toLocaleString():"N/A"})]},e.id)})})]})})]})]})}const O$=()=>{const e=ie(),[t,r]=(0,a.useState)("dashboard"),[n,s]=(0,a.useState)({guestName:"",guestMobile:"",guestEmail:"",roomTypes:[],roomNumbers:[],checkIn:"",checkOut:"",adults:1,children:0}),i=b$(),[o,l]=(0,a.useState)([]),[c,d]=(0,a.useState)({package_id:"",guest_name:"",guest_email:"",guest_mobile:"",check_in:"",check_out:"",adults:2,children:0,room_ids:[]}),[u,h]=(0,a.useState)([]),[m,p]=(0,a.useState)([]),[f,g]=(0,a.useState)([]),[x,y]=(0,a.useState)([]),[v,b]=(0,a.useState)([]),[j,w]=(0,a.useState)([]),[N,_]=(0,a.useState)("All"),[k,S]=(0,a.useState)("All"),[A,C]=(0,a.useState)(""),[E,T]=(0,a.useState)(""),[P,O]=(0,a.useState)({message:"",type:""}),[D,I]=(0,a.useState)({type:null,text:""}),[L,M]=(0,a.useState)(!1),R=(e,t)=>{I({type:e,text:t})},[F,B]=(0,a.useState)(!0),[z,U]=(0,a.useState)({activeBookings:0,cancelledBookings:0,availableRooms:0,todaysGuestsCheckin:0,todaysGuestsCheckout:0}),[q,W]=(0,a.useState)(null),[V,H]=(0,a.useState)(null),[G,K]=(0,a.useState)(null),[Y,X]=(0,a.useState)(null),[Q,$]=(0,a.useState)(null),[J,Z]=(0,a.useState)(0),[ee,te]=(0,a.useState)(!1),[re,ne]=(0,a.useState)(0),[ae,se]=(0,a.useState)("room"),oe=(0,a.useMemo)(()=>{const e={};return(f||[]).forEach(t=>{t&&t.id&&(e[t.id]=t)}),e},[f]),le=(0,a.useCallback)(()=>({headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),[]),ce=(0,a.useCallback)(async()=>{B(!0);try{if(!localStorage.getItem("token"))return void e("/login");const[t,r,a,s,i,o]=await Promise.all([Ia.get("/rooms/",le()),Ia.get("/bookings?skip=0&limit=20&order_by=id&order=desc",le()),Ia.get("/packages/bookingsall?skip=0&limit=500",le()),Ia.get("/packages/",le()),Ia.get("/inventory/items?limit=500",le()),Ia.get("/inventory/locations?limit=10000",le())]),c=t.data,{bookings:d,total:u}=r.data,m=a.data||[],f=i.data||[],x=o.data||[],v=b$();console.log("[Bookings fetchData] Inventory items fetched:",(null===f||void 0===f?void 0:f.length)||0),console.log("[Bookings fetchData] Inventory locations fetched:",(null===x||void 0===x?void 0:x.length)||0),b(f),y(x),console.log("[Bookings fetchData] State updated - items:",null===f||void 0===f?void 0:f.length,"locations:",null===x||void 0===x?void 0:x.length);const j=(await Ia.get("/bookings?limit=500&order_by=id&order=desc",le())).data.bookings,N=m.map(e=>Be(Be({},e),{},{is_package:!0,rooms:e.rooms||[]})),_=[...j,...N],k=_.filter(e=>"booked"===e.status||"checked-in"===e.status).length,S=_.filter(e=>"cancelled"===e.status).length,A=c.filter(e=>"Available"===e.status).length,C=_.filter(e=>e.check_in===v&&"cancelled"!==e.status).reduce((e,t)=>e+t.adults+t.children,0),E=_.filter(e=>e.check_out===v&&"cancelled"!==e.status).reduce((e,t)=>e+t.adults+t.children,0);g(c),p(c.filter(e=>"Available"===e.status));let T=c;T=n.checkIn&&n.checkOut?c.filter(e=>{const t=_.some(t=>{var r;const a=null===(r=t.status)||void 0===r?void 0:r.toLowerCase().replace(/_/g,"-");if("booked"!==a&&"checked-in"!==a)return!1;const s=new Date(t.check_in),i=new Date(t.check_out),o=new Date(n.checkIn),l=new Date(n.checkOut),c=t.rooms&&t.rooms.some(t=>t.id===e.id);return!!c&&(o<i&&l>s)});return!t}):c.filter(e=>"Available"===e.status),h(T);const P=new Map;d.forEach(e=>{P.set("regular_".concat(e.id),Be(Be({},e),{},{is_package:!1}))}),m.forEach(e=>{P.set("package_".concat(e.id),Be(Be({},e),{},{is_package:!0,rooms:e.rooms||[]}))});const O=Array.from(P.values()).sort((e,t)=>{var r,n;return(null!==(r=t.id)&&void 0!==r?r:0)-(null!==(n=e.id)&&void 0!==n?n:0)});w(O),l(s.data||[]),Z(u+((null===m||void 0===m?void 0:m.length)||0)),te(d.length<u),ne(d.length),U({activeBookings:k,cancelledBookings:S,availableRooms:A,todaysGuestsCheckin:C,todaysGuestsCheckout:E})}catch(t){console.error("Error fetching dashboard data:",t),R("error","Failed to load dashboard data. Please try again.")}finally{B(!1)}},[le,e]);(0,a.useEffect)(()=>{ce()},[ce]),(0,a.useEffect)(()=>{if(n.checkIn&&n.checkOut&&f.length>0){const e=f.filter(e=>{const t=j.some(t=>{var r;const a=null===(r=t.status)||void 0===r?void 0:r.toLowerCase().replace(/_/g,"-");if("booked"!==a&&"checked-in"!==a)return!1;const s=new Date(t.check_in),i=new Date(t.check_out),o=new Date(n.checkIn),l=new Date(n.checkOut),c=t.rooms&&t.rooms.some(t=>t.id===e.id);return!!c&&(o<i&&l>s)});return!t});h(e)}else n.checkIn&&n.checkOut||h(f.filter(e=>"Available"===e.status))},[n.checkIn,n.checkOut,f,j]),(0,a.useEffect)(()=>{if(c.check_in&&c.check_out&&f.length>0){const e=o.find(e=>e.id===parseInt(c.package_id));let t=f.filter(e=>{const t=j.some(t=>{var r;const n=null===(r=t.status)||void 0===r?void 0:r.toLowerCase().replace(/_/g,"-");if("booked"!==n&&"checked-in"!==n)return!1;const a=new Date(t.check_in),s=new Date(t.check_out),i=new Date(c.check_in),o=new Date(c.check_out),l=t.rooms&&t.rooms.some(t=>{var r;return((null===(r=t.room)||void 0===r?void 0:r.id)||t.id)===e.id});return!!l&&(i<s&&o>a)});return!t});if(e&&"room_type"===e.booking_type&&e.room_types){const r=e.room_types.split(",").map(e=>e.trim().toLowerCase());t=t.filter(e=>{const t=e.type?e.type.trim().toLowerCase():"";return r.includes(t)})}p(t),e&&"whole_property"===e.booking_type&&t.length>0?d(e=>Be(Be({},e),{},{room_ids:t.map(e=>e.id)})):e&&e.booking_type}else c.check_in&&c.check_out||p(f.filter(e=>"Available"===e.status))},[c.check_in,c.check_out,c.package_id,f,j,o]);const de=JQ(async()=>{if(ee){M(!0);try{const e=await Ia.get("/bookings?skip=".concat(re,"&limit=20&order_by=id&order=desc"),le()),{bookings:t,total:r}=e.data;if(!t||0===t.length)return void te(!1);w(e=>{const r=new Map;return e.forEach(e=>{const t=e.is_package?"package_".concat(e.id):"regular_".concat(e.id);r.set(t,e)}),t.forEach(e=>{r.set("regular_".concat(e.id),Be(Be({},e),{},{is_package:!1}))}),Array.from(r.values()).sort((e,t)=>{var r,n;return(null!==(r=t.id)&&void 0!==r?r:0)-(null!==(n=e.id)&&void 0!==n?n:0)})});const n=re+t.length;ne(n),te(n<r)}catch(e){console.error("Failed to load more bookings:",e),R("error","Could not load more bookings.")}finally{M(!1)}}},ee,L),ue=(0,a.useCallback)(e=>{var t;if(!e)return null;const r=e.number;if(void 0!==r&&null!==r&&""!==r)return String(r).trim();const n=null===(t=e.room)||void 0===t?void 0:t.number;return void 0!==n&&null!==n&&""!==n?String(n).trim():null},[]),he=(0,a.useCallback)(e=>{const t=new Map;return e.forEach(e=>{var r;if(!e)return;const n=Be(Be({},e),{},{is_package:Boolean(e.is_package)}),a=n.is_package?"PK":"BK",s=(n.display_id||"".concat(a,"-").concat(String(null!==(r=n.id)&&void 0!==r?r:"").padStart(6,"0"))).toString().trim().toUpperCase(),i="".concat(a,"_").concat(s);if(t.has(i)){const e=t.get(i);t.set(i,Be(Be({},e),n))}else t.set(i,n)}),Array.from(t.values()).sort((e,t)=>{var r,n;return(null!==(r=t.id)&&void 0!==r?r:0)-(null!==(n=e.id)&&void 0!==n?n:0)})},[]),me=(0,a.useMemo)(()=>[...new Set(u.map(e=>e.type))],[u]),pe=(0,a.useMemo)(()=>{const e=new Set;j.forEach(t=>{var r;null===(r=t.rooms)||void 0===r||r.forEach(t=>{const r=ue(t);r&&e.add(r)})});const t=Array.from(e).sort((e,t)=>e.localeCompare(t,void 0,{numeric:!0}));return["All",...t]},[j,ue]),fe=(0,a.useMemo)(()=>u.filter(e=>e.type===n.roomTypes[0]),[u,n.roomTypes]),ge=((0,a.useMemo)(()=>n.roomNumbers.map(e=>u.find(t=>t.number===e&&t.type===n.roomTypes[0])).filter(e=>null!==e),[u,n.roomNumbers,n.roomTypes]),(0,a.useMemo)(()=>parseInt(n.adults)+parseInt(n.children),[n.adults,n.children]),e=>{const{name:t,value:r}=e.target;d(e=>{const n=Be(Be({},e),{},{[t]:r});if("package_id"===t&&r){const e=o.find(e=>e.id===parseInt(r));e&&(e.default_adults&&(n.adults=e.default_adults),void 0!==e.default_children&&null!==e.default_children&&(n.children=e.default_children),("whole_property"===e.booking_type||"room_type"===e.booking_type)&&(n.room_ids=[]))}return n})}),xe=e=>{d(t=>Be(Be({},t),{},{room_ids:t.room_ids.includes(e)?t.room_ids.filter(t=>t!==e):[...t.room_ids,e]}))},ye=(0,a.useMemo)(()=>{const e=n.roomNumbers.map(e=>u.find(t=>t.number===e)).filter(e=>void 0!==e&&null!==e);return{adults:e.reduce((e,t)=>e+((null===t||void 0===t?void 0:t.adults)||0),0),children:e.reduce((e,t)=>e+((null===t||void 0===t?void 0:t.children)||0),0),total:e.reduce((e,t)=>e+(((null===t||void 0===t?void 0:t.adults)||0)+((null===t||void 0===t?void 0:t.children)||0)),0)}},[n.roomNumbers,u]),ve=e=>{if(e.display_id)return e.display_id;const t=e.is_package?"PK":"BK",r=String(e.id).padStart(6,"0");return"".concat(t,"-").concat(r)},be=(0,a.useMemo)(()=>{const e={all:j.length,booked:0,cancelled:0,"checked-in":0,"checked-out":0};return j.forEach(t=>{const r=(t.status||"").toLowerCase().replace(/[-_]/g,"-").trim();"booked"===r?e.booked++:"cancelled"===r?e.cancelled++:"checked-in"===r||"checked_in"===r?e["checked-in"]++:"checked-out"!==r&&"checked_out"!==r||e["checked-out"]++}),e},[j]),je=(0,a.useMemo)(()=>he(j).filter(e=>{var t,r,n;let a=null===(t=e.status)||void 0===t?void 0:t.toLowerCase().trim(),s=null===N||void 0===N?void 0:N.toLowerCase().trim();a=null===(r=a)||void 0===r?void 0:r.replace(/[-_]/g,"-"),s=null===(n=s)||void 0===n?void 0:n.replace(/[-_]/g,"-");const i="All"===N||a===s||"checked-out"===a&&"checked-out"===s||"checked_out"===a&&"checked-out"===s||"checked-in"===a&&"checked-in"===s||"checked_in"===a&&"checked-in"===s,o="All"===k?null:String(k).trim(),l=!o||e.rooms&&e.rooms.some(e=>ue(e)===o);let c=!0;if(A||E){const t=new Date(e.check_in),r=new Date(e.check_out);if(t.setHours(0,0,0,0),r.setHours(0,0,0,0),A&&E){const e=new Date(A),n=new Date(E);e.setHours(0,0,0,0),n.setHours(0,0,0,0),c=t<=n&&r>=e}else if(A){const e=new Date(A);e.setHours(0,0,0,0),c=r>=e}else if(E){const e=new Date(E);e.setHours(0,0,0,0),c=t<=e}}return i&&l&&c}).sort((e,t)=>{var r,n;const a={booked:1,"checked-in":2,checked_in:2,"checked-out":3,checked_out:3,cancelled:4},s=(null===(r=e.status)||void 0===r?void 0:r.toLowerCase().replace(/[-_]/g,"-"))||"",i=(null===(n=t.status)||void 0===n?void 0:n.toLowerCase().replace(/[-_]/g,"-"))||"",o=a[s]||99,l=a[i]||99;return o!==l?o-l:t.id-e.id}),[j,N,k,A,E,ue,he]),we=e=>{const{name:t,value:r}=e.target;s(e=>Be(Be({},e),{},{[t]:r}))},Ne=a.memo(e=>{let{rooms:t,selectedRoomNumbers:r,onRoomToggle:n}=e;return(0,er.jsx)("div",{className:"flex flex-wrap gap-4 p-4 border border-gray-300 rounded-lg bg-gray-50 max-h-64 overflow-y-auto",children:t.length>0?t.map(e=>(0,er.jsxs)(Fh.div,{whileHover:{scale:1.05},className:"\n                p-4 rounded-xl shadow-md cursor-pointer transition-all duration-200\n                ".concat(r.includes(e.number)?"bg-indigo-600 text-white transform scale-105 ring-2 ring-indigo-500":"bg-white text-gray-800 hover:bg-gray-100","\n              "),onClick:()=>n(e.number),children:[(0,er.jsx)("div",{className:"w-full h-24 mb-2 bg-gray-200 rounded-lg flex items-center justify-center text-gray-500",children:(0,er.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 8v-10a1 1 0 011-1h2a1 1 0 011 1v10m-6 0h6"})})}),(0,er.jsxs)("div",{className:"font-semibold text-lg ".concat(r.includes(e.number)?"text-white":"text-indigo-700"),children:["Room ",e.number]}),(0,er.jsxs)("div",{className:"text-sm ".concat(r.includes(e.number)?"text-indigo-200":"text-gray-500"),children:[(0,er.jsxs)("p",{children:["Capacity: ",e.adults," Adults, ",e.children," Children"]}),(0,er.jsxs)("p",{className:"font-medium",children:[ym(e.price),"/night"]})]})]},e.id)):(0,er.jsxs)("div",{className:"w-full text-center py-8 text-gray-500",children:[(0,er.jsx)("div",{className:"text-lg mb-2",children:"\ud83d\udeab"}),(0,er.jsx)("p",{className:"font-medium",children:"No rooms available for the selected dates"}),(0,er.jsx)("p",{className:"text-sm mt-1",children:"Please try different dates or room type"})]})})});return Ne.displayName="RoomSelection",(0,er.jsxs)(xm,{children:[(0,er.jsx)(e$,{message:D,onClose:()=>{I({type:null,text:""})},autoDismiss:!0,duration:5e3}),(0,er.jsxs)("div",{className:"bubbles-container",children:[(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{})]}),(0,er.jsxs)("div",{className:"p-4 sm:p-6 lg:p-8 space-y-8 bg-gray-100 min-h-screen font-sans",children:[(0,er.jsx)("h1",{className:"text-3xl sm:text-4xl font-extrabold text-gray-800 tracking-tight",children:"Booking Management Dashboard"}),(0,er.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 mb-6",children:(0,er.jsxs)("div",{className:"flex border-b border-gray-200",children:[(0,er.jsx)("button",{onClick:()=>r("dashboard"),className:"px-6 py-3 font-medium transition-colors ".concat("dashboard"===t?"text-indigo-600 border-b-2 border-indigo-600":"text-gray-600 hover:text-gray-900"),children:"Dashboard"}),(0,er.jsx)("button",{onClick:()=>r("booking"),className:"px-6 py-3 font-medium transition-colors ".concat("booking"===t?"text-indigo-600 border-b-2 border-indigo-600":"text-gray-600 hover:text-gray-900"),children:"Booking Management"}),(0,er.jsx)("button",{onClick:()=>r("package"),className:"px-6 py-3 font-medium transition-colors ".concat("package"===t?"text-indigo-600 border-b-2 border-indigo-600":"text-gray-600 hover:text-gray-900"),children:"Package Management"}),(0,er.jsx)("button",{onClick:()=>r("room"),className:"px-6 py-3 font-medium transition-colors ".concat("room"===t?"text-indigo-600 border-b-2 border-indigo-600":"text-gray-600 hover:text-gray-900"),children:"Room Management"})]})}),"dashboard"===t&&(0,er.jsxs)(er.Fragment,{children:[(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-6 mb-8",children:[(0,er.jsx)(w$,{title:"Total Bookings",value:z.activeBookings}),(0,er.jsx)(w$,{title:"Cancelled Bookings",value:z.cancelledBookings}),(0,er.jsx)(w$,{title:"Available Rooms",value:z.availableRooms}),(0,er.jsx)(w$,{title:"Guests Today Check-in",value:z.todaysGuestsCheckin}),(0,er.jsx)(w$,{title:"Guests Today Check-out",value:z.todaysGuestsCheckout}),(0,er.jsx)(w$,{title:"Total Packages",value:o.length}),(0,er.jsx)(w$,{title:"Active Guests",value:j.filter(e=>"checked-in"===e.status||"booked"===e.status).length}),(0,er.jsx)(w$,{title:"Package Bookings",value:j.filter(e=>e.is_package).length})]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[(0,er.jsx)(Fh.div,{className:"bg-white p-6 rounded-2xl shadow-lg",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:(0,er.jsx)(E$,{data:j})}),(0,er.jsxs)(Fh.div,{className:"bg-white p-6 rounded-2xl shadow-lg",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:[(0,er.jsx)("h3",{className:"text-xl font-bold mb-4 text-gray-800",children:"Available Packages"}),(0,er.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:o.length>0?o.map(e=>(0,er.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[(0,er.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,er.jsx)("h4",{className:"font-semibold text-gray-800",children:e.title}),(0,er.jsx)("span",{className:"text-indigo-600 font-bold",children:ym(e.price)})]}),(0,er.jsx)("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:e.description}),(0,er.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[(0,er.jsx)("span",{className:"px-2 py-1 rounded ".concat("whole_property"===e.booking_type?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"),children:"whole_property"===e.booking_type?"Whole Property":"Selected Rooms"}),e.room_types&&(0,er.jsxs)("span",{className:"text-gray-600",children:["Types: ",e.room_types]})]})]},e.id)):(0,er.jsx)("p",{className:"text-gray-500 text-center py-8",children:"No packages available"})})]})]}),(0,er.jsxs)(Fh.div,{className:"bg-white p-6 rounded-2xl shadow-lg mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:[(0,er.jsx)("h3",{className:"text-xl font-bold mb-6 text-gray-800",children:"All Packages - Complete Details"}),(0,er.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.length>0?o.map(e=>(0,er.jsxs)("div",{className:"border-2 border-gray-200 rounded-xl p-5 hover:shadow-lg transition-all bg-gradient-to-br from-white to-gray-50",children:[(0,er.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,er.jsx)("h4",{className:"font-bold text-lg text-gray-800",children:e.title}),(0,er.jsx)("span",{className:"text-indigo-600 font-bold text-xl",children:ym(e.price)})]}),(0,er.jsx)("p",{className:"text-sm text-gray-600 mb-4 min-h-[3rem]",children:e.description||"No description available"}),(0,er.jsxs)("div",{className:"space-y-2",children:[(0,er.jsx)("div",{className:"flex items-center gap-2",children:(0,er.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat("whole_property"===e.booking_type?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"),children:"whole_property"===e.booking_type?"Whole Property":"Selected Rooms"})}),e.room_types&&(0,er.jsxs)("div",{className:"text-xs text-gray-600",children:[(0,er.jsx)("span",{className:"font-semibold",children:"Room Types: "}),(0,er.jsx)("span",{children:e.room_types})]}),e.images&&e.images.length>0&&(0,er.jsxs)("div",{className:"text-xs text-gray-500",children:[(0,er.jsx)("span",{className:"font-semibold",children:"Images: "}),(0,er.jsxs)("span",{children:[e.images.length," photo(s)"]})]})]})]},e.id)):(0,er.jsx)("div",{className:"col-span-full text-center py-12 text-gray-500",children:(0,er.jsx)("p",{className:"text-lg",children:"No packages available"})})})]}),(0,er.jsxs)(Fh.div,{className:"bg-white p-6 rounded-2xl shadow-lg mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:[(0,er.jsx)("h3",{className:"text-xl font-bold mb-6 text-gray-800",children:"All Rooms - Complete Details"}),(0,er.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:f.length>0?f.map(e=>(0,er.jsxs)("div",{className:"border-2 border-gray-200 rounded-xl overflow-hidden hover:shadow-lg transition-all bg-white",children:[e.image_url&&(0,er.jsx)("img",{src:(e=>{var t;if(!e)return"https://placehold.co/400x300/e2e8f0/a0aec0?text=No+Image";if(e.startsWith("http"))return e;const r=(null===(t=Ia.defaults.baseURL)||void 0===t?void 0:t.replace(/\/$/,""))||"",n=e.startsWith("/")?e:"/".concat(e);return"".concat(r).concat(n)})(e.image_url),alt:"Room ".concat(e.number),className:"w-full h-48 object-cover"}),(0,er.jsxs)("div",{className:"p-4",children:[(0,er.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,er.jsxs)("div",{children:[(0,er.jsxs)("h4",{className:"font-bold text-lg text-gray-800",children:["Room ",e.number]}),(0,er.jsx)("p",{className:"text-sm text-gray-600",children:e.type})]}),(0,er.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold ".concat("Available"===e.status?"bg-green-100 text-green-700":"Booked"===e.status?"bg-red-100 text-red-700":"Maintenance"===e.status?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"),children:e.status})]}),(0,er.jsxs)("p",{className:"text-indigo-600 font-bold text-lg mb-3",children:[ym(e.price),"/night"]}),(0,er.jsxs)("p",{className:"text-sm text-gray-600 mb-3",children:["Capacity: ",e.adults||0," Adults,"," ",e.children||0," Children"]}),(e.air_conditioning||e.wifi||e.bathroom||e.living_area||e.terrace||e.parking||e.kitchen||e.family_room||e.bbq||e.garden||e.dining||e.breakfast)&&(0,er.jsxs)("div",{className:"flex flex-wrap gap-1 mt-3",children:[e.air_conditioning&&(0,er.jsx)("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded-full",children:"AC"}),e.wifi&&(0,er.jsx)("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-700 rounded-full",children:"WiFi"}),e.bathroom&&(0,er.jsx)("span",{className:"px-2 py-1 text-xs bg-purple-100 text-purple-700 rounded-full",children:"Bathroom"}),e.living_area&&(0,er.jsx)("span",{className:"px-2 py-1 text-xs bg-orange-100 text-orange-700 rounded-full",children:"Living"}),e.terrace&&(0,er.jsx)("span",{className:"px-2 py-1 text-xs bg-yellow-100 text-yellow-700 rounded-full",children:"Terrace"}),e.parking&&(0,er.jsx)("span",{className:"px-2 py-1 text-xs bg-indigo-100 text-indigo-700 rounded-full",children:"Parking"}),e.kitchen&&(0,er.jsx)("span",{className:"px-2 py-1 text-xs bg-pink-100 text-pink-700 rounded-full",children:"Kitchen"}),e.family_room&&(0,er.jsx)("span",{className:"px-2 py-1 text-xs bg-teal-100 text-teal-700 rounded-full",children:"Family"}),e.bbq&&(0,er.jsx)("span",{className:"px-2 py-1 text-xs bg-red-100 text-red-700 rounded-full",children:"BBQ"}),e.garden&&(0,er.jsx)("span",{className:"px-2 py-1 text-xs bg-emerald-100 text-emerald-700 rounded-full",children:"Garden"}),e.dining&&(0,er.jsx)("span",{className:"px-2 py-1 text-xs bg-amber-100 text-amber-700 rounded-full",children:"Dining"}),e.breakfast&&(0,er.jsx)("span",{className:"px-2 py-1 text-xs bg-cyan-100 text-cyan-700 rounded-full",children:"Breakfast"})]})]})]},e.id)):(0,er.jsx)("div",{className:"col-span-full text-center py-12 text-gray-500",children:(0,er.jsx)("p",{className:"text-lg",children:"No rooms available"})})})]}),(0,er.jsxs)(Fh.div,{className:"bg-white p-6 rounded-2xl shadow-lg mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:[(0,er.jsxs)("h3",{className:"text-xl font-bold mb-6 text-gray-800",children:["Available Rooms (",f.filter(e=>"Available"===e.status).length,")"]}),(0,er.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:f.filter(e=>"Available"===e.status).length>0?f.filter(e=>"Available"===e.status).map(e=>(0,er.jsxs)("div",{className:"border-2 border-green-200 rounded-xl overflow-hidden hover:shadow-lg transition-all bg-gradient-to-br from-green-50 to-white",children:[e.image_url&&(0,er.jsx)("img",{src:(e=>{var t;if(!e)return"https://placehold.co/400x300/e2e8f0/a0aec0?text=No+Image";if(e.startsWith("http"))return e;const r=(null===(t=Ia.defaults.baseURL)||void 0===t?void 0:t.replace(/\/$/,""))||"",n=e.startsWith("/")?e:"/".concat(e);return"".concat(r).concat(n)})(e.image_url),alt:"Room ".concat(e.number),className:"w-full h-48 object-cover"}),(0,er.jsxs)("div",{className:"p-4",children:[(0,er.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,er.jsxs)("div",{children:[(0,er.jsxs)("h4",{className:"font-bold text-lg text-gray-800",children:["Room ",e.number]}),(0,er.jsx)("p",{className:"text-sm text-gray-600",children:e.type})]}),(0,er.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-700",children:"Available"})]}),(0,er.jsxs)("p",{className:"text-indigo-600 font-bold text-lg mb-3",children:[ym(e.price),"/night"]}),(0,er.jsxs)("p",{className:"text-sm text-gray-600 mb-3",children:["Capacity: ",e.adults||0," Adults,"," ",e.children||0," Children"]}),(e.air_conditioning||e.wifi||e.bathroom||e.living_area||e.terrace||e.parking||e.kitchen||e.family_room||e.bbq||e.garden||e.dining||e.breakfast)&&(0,er.jsxs)("div",{className:"flex flex-wrap gap-1 mt-3",children:[e.air_conditioning&&(0,er.jsx)("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded-full",children:"AC"}),e.wifi&&(0,er.jsx)("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-700 rounded-full",children:"WiFi"}),e.bathroom&&(0,er.jsx)("span",{className:"px-2 py-1 text-xs bg-purple-100 text-purple-700 rounded-full",children:"Bathroom"}),e.living_area&&(0,er.jsx)("span",{className:"px-2 py-1 text-xs bg-orange-100 text-orange-700 rounded-full",children:"Living"}),e.terrace&&(0,er.jsx)("span",{className:"px-2 py-1 text-xs bg-yellow-100 text-yellow-700 rounded-full",children:"Terrace"}),e.parking&&(0,er.jsx)("span",{className:"px-2 py-1 text-xs bg-indigo-100 text-indigo-700 rounded-full",children:"Parking"}),e.kitchen&&(0,er.jsx)("span",{className:"px-2 py-1 text-xs bg-pink-100 text-pink-700 rounded-full",children:"Kitchen"}),e.family_room&&(0,er.jsx)("span",{className:"px-2 py-1 text-xs bg-teal-100 text-teal-700 rounded-full",children:"Family"}),e.bbq&&(0,er.jsx)("span",{className:"px-2 py-1 text-xs bg-red-100 text-red-700 rounded-full",children:"BBQ"}),e.garden&&(0,er.jsx)("span",{className:"px-2 py-1 text-xs bg-emerald-100 text-emerald-700 rounded-full",children:"Garden"}),e.dining&&(0,er.jsx)("span",{className:"px-2 py-1 text-xs bg-amber-100 text-amber-700 rounded-full",children:"Dining"}),e.breakfast&&(0,er.jsx)("span",{className:"px-2 py-1 text-xs bg-cyan-100 text-cyan-700 rounded-full",children:"Breakfast"})]})]})]},e.id)):(0,er.jsx)("div",{className:"col-span-full text-center py-12 text-gray-500",children:(0,er.jsx)("p",{className:"text-lg",children:"No available rooms"})})})]}),(0,er.jsxs)(Fh.div,{className:"bg-white p-6 rounded-2xl shadow-lg",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5},children:[(0,er.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,er.jsxs)("h3",{className:"text-xl font-bold text-gray-800",children:["All Bookings & Guest Details (",j.length,")"]}),(0,er.jsx)("button",{onClick:()=>r("booking"),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Create New Booking"})]}),(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full text-sm",children:[(0,er.jsx)("thead",{className:"bg-gray-50",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Guest Name"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Contact"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Type"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Rooms"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Check-in"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Check-out"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Status"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Guests"})]})}),(0,er.jsxs)("tbody",{className:"divide-y divide-gray-200",children:[j.map(e=>{const t=e.rooms&&e.rooms.length>0&&e.rooms.map(t=>{var r;return e.is_package?null!==t&&void 0!==t&&null!==(r=t.room)&&void 0!==r&&r.number?t.room.number:null!==t&&void 0!==t&&t.room_id&&oe&&oe[t.room_id]?oe[t.room_id].number:"-":null!==t&&void 0!==t&&t.number?t.number:null!==t&&void 0!==t&&t.room_id&&oe&&oe[t.room_id]?oe[t.room_id].number:"-"}).filter(Boolean).join(", ")||"-";return(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsxs)("td",{className:"px-4 py-3",children:[(0,er.jsx)("div",{className:"font-medium text-gray-900",children:e.guest_name}),e.guest_email&&(0,er.jsx)("div",{className:"text-xs text-gray-500",children:e.guest_email})]}),(0,er.jsx)("td",{className:"px-4 py-3 text-gray-700",children:e.guest_mobile||"-"}),(0,er.jsx)("td",{className:"px-4 py-3",children:(0,er.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold ".concat(e.is_package?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"),children:e.is_package?"Package":"Room"})}),(0,er.jsx)("td",{className:"px-4 py-3 text-gray-700",children:t}),(0,er.jsx)("td",{className:"px-4 py-3 text-gray-700",children:e.check_in}),(0,er.jsx)("td",{className:"px-4 py-3 text-gray-700",children:e.check_out}),(0,er.jsx)("td",{className:"px-4 py-3",children:(0,er.jsx)(N$,{status:e.status})}),(0,er.jsxs)("td",{className:"px-4 py-3 text-gray-700",children:[e.adults||0,"A, ",e.children||0,"C"]})]},"".concat(e.is_package?"pkg":"reg","_").concat(e.id))}),0===j.length&&(0,er.jsx)("tr",{children:(0,er.jsx)("td",{colSpan:"8",className:"px-4 py-8 text-center text-gray-500",children:"No bookings found"})})]})]})})]})]}),"booking"===t&&(0,er.jsxs)(er.Fragment,{children:[(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-6 mb-8",children:[(0,er.jsx)(w$,{title:"Total Bookings",value:z.activeBookings}),(0,er.jsx)(w$,{title:"Cancelled Bookings",value:z.cancelledBookings}),(0,er.jsx)(w$,{title:"Available Rooms",value:z.availableRooms}),(0,er.jsx)(w$,{title:"Guests Today Check-in",value:z.todaysGuestsCheckin}),(0,er.jsx)(w$,{title:"Guests Today Check-out",value:z.todaysGuestsCheckout})]}),(0,er.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:(0,er.jsxs)(Fh.div,{className:"bg-white p-6 sm:p-8 rounded-2xl shadow-lg flex flex-col",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,er.jsxs)("div",{className:"flex border-b border-gray-200 mb-6",children:[(0,er.jsx)("button",{onClick:()=>se("room"),className:"px-6 py-3 font-medium transition-colors ".concat("room"===ae?"text-indigo-600 border-b-2 border-indigo-600":"text-gray-600 hover:text-gray-900"),children:"Room Booking"}),(0,er.jsx)("button",{onClick:()=>se("package"),className:"px-6 py-3 font-medium transition-colors ".concat("package"===ae?"text-indigo-600 border-b-2 border-indigo-600":"text-gray-600 hover:text-gray-900"),children:"Package Booking"})]}),"room"===ae&&(0,er.jsxs)(er.Fragment,{children:[(0,er.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-700",children:"Create Room Booking"}),P.message&&(0,er.jsx)(Fh.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-4 p-4 rounded-lg text-sm font-semibold ".concat("success"===P.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:P.message}),(0,er.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!L){M(!0),O({message:"",type:""});try{if(n.checkIn&&n.checkOut){const e=new Date(n.checkIn),t=new Date(n.checkOut).getTime()-e.getTime();if(t/864e5<1)return R("error","Minimum 1 day booking is mandatory. Check-out date must be at least 1 day after check-in date."),void M(!1)}if(0===n.roomNumbers.length)return R("error","Please select at least one room."),void M(!1);const e=parseInt(n.adults),t=parseInt(n.children);if(e>ye.adults)return R("error","The number of adults (".concat(e,") exceeds the total adult capacity of the selected rooms (").concat(ye.adults," adults max). Please select additional rooms or reduce the number of adults.")),void M(!1);if(t>ye.children)return R("error","The number of children (".concat(t,") exceeds the total children capacity of the selected rooms (").concat(ye.children," children max). Please select additional rooms or reduce the number of children.")),void M(!1);const r=n.roomNumbers.map(e=>{const t=u.find(t=>t.number===e);return t?t.id:null}).filter(e=>null!==e);if(r.length!==n.roomNumbers.length)return R("error","One or more selected rooms are invalid."),void M(!1);const a=new Date(n.checkIn),i=new Date(n.checkOut),o=[];if(r.forEach(e=>{const t=f.find(t=>t.id===e);if(!t)return;const r=j.filter(t=>{var r,n;const s=null===(r=t.status)||void 0===r?void 0:r.toLowerCase().replace(/[-_]/g,"");if("booked"!==s&&"checkedin"!==s)return!1;const o=null===(n=t.rooms)||void 0===n?void 0:n.some(t=>{var r;return((null===(r=t.room)||void 0===r?void 0:r.id)||t.id||t.room_id)===e});if(!o)return!1;const l=new Date(t.check_in),c=new Date(t.check_out);return a<c&&i>l});r.length>0&&o.push({room:t.number,bookings:r.map(e=>({id:e.display_id||"".concat(e.is_package?"PK":"BK","-").concat(String(e.id).padStart(6,"0")),guest:e.guest_name,checkIn:e.check_in,checkOut:e.check_out,status:e.status}))})}),o.length>0){const e=o.map(e=>{const t=e.bookings.map(e=>"".concat(e.id," (").concat(e.guest,", ").concat(e.checkIn," to ").concat(e.checkOut,")")).join(", ");return"Room ".concat(e.room,": ").concat(t)}).join("\n");return R("error","Cannot create booking. The following rooms have conflicting bookings:\n".concat(e)),void M(!1)}const l=await Ia.post("/bookings",{room_ids:r,guest_name:n.guestName,guest_mobile:n.guestMobile,guest_email:n.guestEmail,check_in:n.checkIn,check_out:n.checkOut,adults:parseInt(n.adults),children:parseInt(n.children)},le());R("success","Bookings created successfully!"),s({guestName:"",guestMobile:"",guestEmail:"",roomTypes:[],roomNumbers:[],checkIn:"",checkOut:"",adults:1,children:0});const c=Be(Be({},l.data),{},{is_package:!1});w(e=>he([c,...e]))}catch(a){var t,r;console.error("Booking creation error:",a);const e=(null===(t=a.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"Error creating booking.";R("error",e)}finally{M(!1)}}},className:"flex flex-col h-full",children:[(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 flex-grow",children:[(0,er.jsxs)("div",{className:"flex flex-col",children:[(0,er.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Guest Name"}),(0,er.jsx)("input",{type:"text",name:"guestName",value:n.guestName,onChange:we,placeholder:"Enter guest's full name",className:"w-full border-gray-300 rounded-lg shadow-sm p-2 transition-colors focus:border-indigo-500 focus:ring-indigo-500",required:!0})]}),(0,er.jsxs)("div",{className:"flex flex-col",children:[(0,er.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Mobile Number"}),(0,er.jsx)("input",{type:"text",name:"guestMobile",value:n.guestMobile,onChange:we,placeholder:"e.g., +1234567890",className:"w-full border-gray-300 rounded-lg shadow-sm p-2 transition-colors focus:border-indigo-500 focus:ring-indigo-500",required:!0})]}),(0,er.jsxs)("div",{className:"flex flex-col md:col-span-2",children:[(0,er.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,er.jsx)("input",{type:"email",name:"guestEmail",value:n.guestEmail,onChange:we,placeholder:"email@example.com",className:"w-full border-gray-300 rounded-lg shadow-sm p-2 transition-colors focus:border-indigo-500 focus:ring-indigo-500",required:!0})]}),(0,er.jsxs)("div",{className:"flex flex-col",children:[(0,er.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Check-in Date"}),(0,er.jsx)("input",{type:"date",name:"checkIn",value:n.checkIn,onChange:we,min:i,className:"w-full border-gray-300 rounded-lg shadow-sm p-2 transition-colors focus:border-indigo-500 focus:ring-indigo-500",required:!0})]}),(0,er.jsxs)("div",{className:"flex flex-col",children:[(0,er.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Check-out Date"}),(0,er.jsx)("input",{type:"date",name:"checkOut",value:n.checkOut,onChange:we,min:n.checkIn||i,className:"w-full border-gray-300 rounded-lg shadow-sm p-2 transition-colors focus:border-indigo-500 focus:ring-indigo-500",required:!0})]}),(0,er.jsxs)("div",{className:"flex flex-col",children:[(0,er.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Room Type"}),(0,er.jsxs)("select",{name:"roomTypes",value:n.roomTypes[0]||"",onChange:e=>{const{value:t}=e.target;s(e=>Be(Be({},e),{},{roomTypes:[t],roomNumbers:[]}))},className:"w-full border-gray-300 rounded-lg shadow-sm p-2 transition-colors focus:border-indigo-500 focus:ring-indigo-500",required:!0,children:[(0,er.jsx)("option",{value:"",children:"Select Room Type"}),me.map((e,t)=>(0,er.jsx)("option",{value:e,children:e},t))]})]}),(0,er.jsxs)("div",{className:"flex flex-col",children:[(0,er.jsxs)("label",{className:"text-sm font-medium text-gray-700 mb-1",children:["Available Rooms for Selected Dates",n.checkIn&&n.checkOut&&(0,er.jsxs)("span",{className:"text-xs text-gray-500 ml-2",children:["(",n.checkIn," to ",n.checkOut,")"]})]}),(0,er.jsx)(Hh,{mode:"wait",children:n.roomTypes.length>0&&(0,er.jsx)(Fh.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},children:(0,er.jsx)(Ne,{rooms:fe,selectedRoomNumbers:n.roomNumbers,onRoomToggle:e=>{const t=n.roomNumbers.includes(e);let r;r=t?n.roomNumbers.filter(t=>t!==e):[...n.roomNumbers,e],s(e=>Be(Be({},e),{},{roomNumbers:r}))}})},n.roomTypes[0])}),n.checkIn&&n.checkOut?null:(0,er.jsxs)("div",{className:"text-center py-8 text-gray-500 text-sm",children:[(0,er.jsx)("p",{children:"Please select check-in and check-out dates first"}),(0,er.jsx)("p",{className:"text-xs mt-1",children:"Available rooms will be shown here"})]})]}),(0,er.jsxs)("div",{className:"flex flex-col",children:[(0,er.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Number of Adults"}),(0,er.jsx)("input",{type:"number",name:"adults",value:n.adults,onChange:we,className:"w-full border-gray-300 rounded-lg shadow-sm p-2 transition-colors focus:border-indigo-500 focus:ring-indigo-500",min:"1",required:!0})]}),(0,er.jsxs)("div",{className:"flex flex-col",children:[(0,er.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Number of Children"}),(0,er.jsx)("input",{type:"number",name:"children",value:n.children,onChange:we,className:"w-full border-gray-300 rounded-lg shadow-sm p-2 transition-colors focus:border-indigo-500 focus:ring-indigo-500",min:"0",required:!0})]})]}),(0,er.jsx)("button",{type:"submit",className:"mt-6 w-full bg-indigo-600 text-white font-semibold py-3 rounded-lg hover:bg-indigo-700 transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:L||F,children:L?"Creating...":"Create Booking"})]})]}),"package"===ae&&(0,er.jsxs)(er.Fragment,{children:[(0,er.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-700",children:"Book a Package"}),(0,er.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!L){M(!0),O({message:"",type:""});try{if(c.check_in&&c.check_out){const e=new Date(c.check_in),t=new Date(c.check_out).getTime()-e.getTime();if(t/864e5<1)return R("error","Minimum 1 day booking is mandatory. Check-out date must be at least 1 day after check-in date."),void M(!1)}const e=o.find(e=>e.id===parseInt(c.package_id));if(!e)return R("error","Package not found. Please select a valid package."),void M(!1);const t="whole_property"===e.booking_type;let r=c.room_ids;if(t){const e=m.map(e=>e.id);if(0===e.length)return R("error","No rooms are available for the selected dates."),void M(!1);r=e}else{if(0===c.room_ids.length)return R("error","Please select at least one room for the package."),void M(!1);r=c.room_ids}if(!t){const t=parseInt(c.adults)||0,r=parseInt(c.children)||0,n=parseInt(e.default_adults)||0,a=parseInt(e.default_children)||0;if(t>n)return R("error","The number of adults (".concat(t,") exceeds the package limit (").concat(n," adults max).")),void M(!1);if(r>a)return R("error","The number of children (".concat(r,") exceeds the package limit (").concat(a," children max).")),void M(!1)}const n=new Date(c.check_in),a=new Date(c.check_out),s=[];if(r.forEach(e=>{const t=f.find(t=>t.id===e);if(!t)return;const r=j.filter(t=>{var r,s;const i=null===(r=t.status)||void 0===r?void 0:r.toLowerCase().replace(/[-_]/g,"");if("booked"!==i&&"checkedin"!==i)return!1;const o=null===(s=t.rooms)||void 0===s?void 0:s.some(t=>{var r;return((null===(r=t.room)||void 0===r?void 0:r.id)||t.id||t.room_id)===e});if(!o)return!1;const l=new Date(t.check_in),c=new Date(t.check_out);return n<c&&a>l});r.length>0&&s.push({room:t.number,bookings:r.map(e=>({id:e.display_id||"".concat(e.is_package?"PK":"BK","-").concat(String(e.id).padStart(6,"0")),guest:e.guest_name,checkIn:e.check_in,checkOut:e.check_out,status:e.status}))})}),s.length>0){const e=s.map(e=>{const t=e.bookings.map(e=>"".concat(e.id," (").concat(e.guest,", ").concat(e.checkIn," to ").concat(e.checkOut,")")).join(", ");return"Room ".concat(e.room,": ").concat(t)}).join("\n");return R("error","Cannot create package booking. The following rooms have conflicting bookings:\n".concat(e)),void M(!1)}const i=Be(Be({},c),{},{package_id:parseInt(c.package_id),adults:parseInt(c.adults),children:parseInt(c.children),room_ids:r.map(e=>parseInt(e))}),l=await Ia.post("/packages/book",i,le());R("success","Package booked successfully!"),d({package_id:"",guest_name:"",guest_email:"",guest_mobile:"",check_in:"",check_out:"",adults:2,children:0,room_ids:[]});const u=Be(Be({},l.data),{},{is_package:!0});w(e=>he([u,...e]))}catch(n){var t,r;console.error(n);const e=(null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"Failed to process package booking.";R("error",e)}finally{M(!1)}}},className:"flex flex-col h-full",children:[(0,er.jsxs)("div",{className:"space-y-4 flex-grow",children:[(0,er.jsxs)("select",{name:"package_id",value:c.package_id,onChange:ge,className:"w-full p-3 rounded-lg border border-gray-300 focus:border-indigo-500 focus:ring focus:ring-indigo-200 transition-all",required:!0,children:[(0,er.jsx)("option",{value:"",children:"Select Package"}),o.map(e=>{const t="whole_property"===e.booking_type?" (Whole Property)":"room_type"===e.booking_type?" (Selected Rooms)":"";return(0,er.jsxs)("option",{value:e.id,children:[e.title,t," - ",ym(e.price)]},e.id)})]}),(0,er.jsx)("input",{name:"guest_name",placeholder:"Guest Name",value:c.guest_name,onChange:ge,className:"w-full p-3 rounded-lg border border-gray-300 focus:border-indigo-500 focus:ring focus:ring-indigo-200 transition-all",required:!0}),(0,er.jsx)("input",{type:"email",name:"guest_email",placeholder:"Guest Email",value:c.guest_email,onChange:ge,className:"w-full p-3 rounded-lg border border-gray-300 focus:border-indigo-500 focus:ring focus:ring-indigo-200 transition-all"}),(0,er.jsx)("input",{name:"guest_mobile",placeholder:"Guest Mobile",value:c.guest_mobile,onChange:ge,className:"w-full p-3 rounded-lg border border-gray-300 focus:border-indigo-500 focus:ring focus:ring-indigo-200 transition-all",required:!0}),(0,er.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,er.jsx)("input",{type:"date",name:"check_in",value:c.check_in,min:i,onChange:ge,className:"w-full p-3 rounded-lg border border-gray-300 focus:border-indigo-500 focus:ring focus:ring-indigo-200 transition-all",required:!0}),(0,er.jsx)("input",{type:"date",name:"check_out",value:c.check_out,min:c.check_in||i,onChange:ge,className:"w-full p-3 rounded-lg border border-gray-300 focus:border-indigo-500 focus:ring focus:ring-indigo-200 transition-all",required:!0})]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,er.jsx)("input",{type:"number",name:"adults",min:1,placeholder:"Adults",value:c.adults,onChange:ge,className:"w-full p-3 rounded-lg border border-gray-300 focus:border-indigo-500 focus:ring focus:ring-indigo-200 transition-all",required:!0}),(0,er.jsx)("input",{type:"number",name:"children",min:0,placeholder:"Children",value:c.children,onChange:ge,className:"w-full p-3 rounded-lg border border-gray-300 focus:border-indigo-500 focus:ring focus:ring-indigo-200 transition-all"})]}),(()=>{const e=o.find(e=>e.id===parseInt(c.package_id));if(!e)return null;const t=e.room_types&&e.room_types.trim().length>0,r="whole_property"===e.booking_type||"whole property"===e.booking_type||!e.booking_type&&!t;if(r)return(0,er.jsxs)("div",{className:"bg-indigo-50 border-2 border-indigo-300 rounded-lg p-4",children:[(0,er.jsx)("p",{className:"text-sm font-semibold text-indigo-800",children:"Whole Property Package"}),(0,er.jsxs)("p",{className:"text-xs text-indigo-600 mt-1",children:["All available rooms (",m.length," ","room",1!==m.length?"s":"",") will be booked automatically for the selected dates."]})]});const n="room_type"===e.booking_type||"whole_property"!==e.booking_type&&t;return r||n||e.booking_type?n?(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-gray-600 font-medium mb-2",children:["Select Rooms for Package",e.room_types&&(0,er.jsxs)("span",{className:"text-xs text-indigo-600 ml-2",children:["(Filtered by: ",e.room_types,")"]}),c.check_in&&c.check_out&&(0,er.jsxs)("span",{className:"text-xs text-gray-500 ml-2",children:["(",c.check_in," to"," ",c.check_out,")"]})]}),c.check_in&&c.check_out?(0,er.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4 max-h-48 overflow-y-auto p-2 bg-gray-50 rounded-lg border",children:(()=>{let t=m;if("room_type"===e.booking_type&&e.room_types){const r=e.room_types.split(",").map(e=>e.trim().toLowerCase());t=m.filter(e=>{const t=e.type?e.type.trim().toLowerCase():"";return r.includes(t)})}return t.length>0?t.map(e=>(0,er.jsxs)("div",{onClick:()=>xe(e.id),className:"p-4 rounded-lg border-2 cursor-pointer transition-all duration-200\n                                                     ".concat(c.room_ids.includes(e.id)?"bg-indigo-500 text-white border-indigo-600":"bg-white border-gray-300 hover:border-indigo-500","\n                                "),children:[(0,er.jsxs)("p",{className:"font-semibold",children:["Room ",e.number]}),(0,er.jsx)("p",{className:"text-sm ".concat(c.room_ids.includes(e.id)?"text-indigo-200":"text-gray-600"),children:e.type}),(0,er.jsxs)("p",{className:"text-xs ".concat(c.room_ids.includes(e.id)?"text-indigo-200":"text-gray-500"),children:[ym(e.price),"/night"]})]},e.id)):(0,er.jsxs)("div",{className:"col-span-full text-center py-4 text-gray-500",children:[(0,er.jsx)("p",{className:"font-medium",children:"No rooms available for the selected dates"}),e.room_types&&(0,er.jsxs)("p",{className:"text-sm mt-1",children:["No rooms match the selected room types: ",e.room_types]}),!e.room_types&&(0,er.jsx)("p",{className:"text-sm mt-1",children:"Please try different dates"})]})})()}):(0,er.jsxs)("div",{className:"text-center py-8 text-gray-500 text-sm bg-gray-50 rounded-lg border",children:[(0,er.jsx)("p",{children:"Please select check-in and check-out dates first"}),(0,er.jsx)("p",{className:"text-xs mt-1",children:"Available rooms will be shown here"})]})]}):null:(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-gray-600 font-medium mb-2",children:["Select Rooms for Package",c.check_in&&c.check_out&&(0,er.jsxs)("span",{className:"text-xs text-gray-500 ml-2",children:["(",c.check_in," to"," ",c.check_out,")"]})]}),c.check_in&&c.check_out?(0,er.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4 max-h-48 overflow-y-auto p-2 bg-gray-50 rounded-lg border",children:m.length>0?m.map(e=>(0,er.jsxs)("div",{onClick:()=>xe(e.id),className:"p-4 rounded-lg border-2 cursor-pointer transition-all duration-200\n                                                     ".concat(c.room_ids.includes(e.id)?"bg-indigo-500 text-white border-indigo-600":"bg-white border-gray-300 hover:border-indigo-500","\n                                "),children:[(0,er.jsxs)("p",{className:"font-semibold",children:["Room ",e.number]}),(0,er.jsx)("p",{className:"text-sm ".concat(c.room_ids.includes(e.id)?"text-indigo-200":"text-gray-600"),children:e.type}),(0,er.jsxs)("p",{className:"text-xs ".concat(c.room_ids.includes(e.id)?"text-indigo-200":"text-gray-500"),children:[ym(e.price),"/night"]})]},e.id)):(0,er.jsxs)("div",{className:"col-span-full text-center py-4 text-gray-500",children:[(0,er.jsx)("p",{className:"font-medium",children:"No rooms available for the selected dates"}),(0,er.jsx)("p",{className:"text-sm mt-1",children:"Please try different dates"})]})}):(0,er.jsxs)("div",{className:"text-center py-8 text-gray-500 text-sm bg-gray-50 rounded-lg border",children:[(0,er.jsx)("p",{children:"Please select check-in and check-out dates first"}),(0,er.jsx)("p",{className:"text-xs mt-1",children:"Available rooms will be shown here"})]})]})})()]}),(0,er.jsx)("button",{type:"submit",className:"mt-auto w-full bg-purple-600 hover:bg-purple-700 text-white font-semibold py-3 rounded-lg shadow-md transition-transform transform hover:-translate-y-1 disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:L||F,children:L?"Booking...":"Book Package \u2705"})]})]})]})}),(0,er.jsxs)("div",{className:"bg-white p-3 sm:p-6 md:p-8 rounded-xl sm:rounded-2xl shadow-lg overflow-x-auto -mx-2 sm:mx-0",children:[(0,er.jsxs)("div",{className:"flex flex-col sm:flex-row flex-wrap gap-3 sm:gap-4 justify-between items-start sm:items-center mb-4 sm:mb-6",children:[(0,er.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2",children:[(0,er.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-700",children:"All Bookings"}),(0,er.jsxs)("span",{className:"text-sm text-gray-500 bg-gray-100 px-3 py-1 rounded-full",children:["Showing ",je.length," of ",be.all," ","bookings"]})]}),(0,er.jsxs)("div",{className:"flex flex-col sm:flex-row flex-wrap gap-2 sm:gap-3 items-stretch sm:items-center w-full sm:w-auto",children:[(0,er.jsxs)("div",{className:"flex flex-col w-full sm:w-auto",children:[(0,er.jsx)("label",{className:"text-xs text-gray-600 mb-1 font-medium",children:"Filter by Status:"}),(0,er.jsxs)("select",{value:N,onChange:e=>_(e.target.value),className:"border-gray-300 rounded-lg p-2 shadow-sm text-sm w-full sm:w-auto bg-white hover:border-blue-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-colors",children:[(0,er.jsxs)("option",{value:"All",children:["All Statuses (",be.all,")"]}),(0,er.jsxs)("option",{value:"booked",children:["\ud83d\udcc5 Booked (",be.booked,")"]}),(0,er.jsxs)("option",{value:"checked-in",children:["\u2705 Checked-in (",be["checked-in"],")"]}),(0,er.jsxs)("option",{value:"checked-out",children:["\ud83d\udeaa Checked-out (",be["checked-out"],")"]}),(0,er.jsxs)("option",{value:"cancelled",children:["\u274c Cancelled (",be.cancelled,")"]})]})]}),(0,er.jsxs)("div",{className:"flex flex-col w-full sm:w-auto",children:[(0,er.jsx)("label",{className:"text-xs text-gray-600 mb-1 font-medium",children:"Filter by Room:"}),(0,er.jsx)("select",{value:k,onChange:e=>S(e.target.value),className:"border-gray-300 rounded-lg p-2 shadow-sm text-sm w-full sm:w-auto bg-white hover:border-blue-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-colors",children:pe.map(e=>(0,er.jsx)("option",{value:e,children:"All"===e?"All Rooms":"Room ".concat(e)},e))})]}),(0,er.jsxs)("div",{className:"flex flex-col w-full sm:w-auto",children:[(0,er.jsx)("label",{className:"text-xs text-gray-600 mb-1 font-medium",children:"From Date:"}),(0,er.jsx)("input",{type:"date",value:A,onChange:e=>C(e.target.value),className:"border-gray-300 rounded-lg p-2 shadow-sm text-sm w-full sm:w-auto bg-white hover:border-blue-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-colors"})]}),(0,er.jsxs)("div",{className:"flex flex-col w-full sm:w-auto",children:[(0,er.jsx)("label",{className:"text-xs text-gray-600 mb-1 font-medium",children:"To Date:"}),(0,er.jsx)("input",{type:"date",value:E,onChange:e=>T(e.target.value),className:"border-gray-300 rounded-lg p-2 shadow-sm text-sm w-full sm:w-auto bg-white hover:border-blue-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-colors"})]}),("All"!==N||"All"!==k||A||E)&&(0,er.jsx)("button",{onClick:()=>{_("All"),S("All"),C(""),T("")},className:"text-xs text-blue-600 hover:text-blue-700 font-medium px-3 py-2 border border-blue-300 rounded-lg hover:bg-blue-50 transition-colors self-end sm:self-center",title:"Clear all filters",children:"Clear Filters"})]})]}),(0,er.jsx)("div",{className:"overflow-x-auto -mx-2 sm:mx-0",children:(0,er.jsxs)("table",{className:"min-w-full text-xs sm:text-sm border-collapse rounded-xl",children:[(0,er.jsx)("thead",{className:"bg-gray-100",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"p-2 sm:p-4 border-b border-gray-200 text-left text-xs font-semibold uppercase tracking-wider text-gray-800",children:"ID"}),(0,er.jsx)("th",{className:"p-2 sm:p-4 border-b border-gray-200 text-left text-xs font-semibold uppercase tracking-wider text-gray-800",children:"Guest"}),(0,er.jsx)("th",{className:"p-2 sm:p-4 border-b border-gray-200 text-left text-xs font-semibold uppercase tracking-wider text-gray-800 hidden md:table-cell",children:"Type"}),(0,er.jsx)("th",{className:"p-2 sm:p-4 border-b border-gray-200 text-left text-xs font-semibold uppercase tracking-wider text-gray-800",children:"Rooms"}),(0,er.jsx)("th",{className:"p-2 sm:p-4 border-b border-gray-200 text-left text-xs font-semibold uppercase tracking-wider text-gray-800 hidden lg:table-cell",children:"Check-in"}),(0,er.jsx)("th",{className:"p-2 sm:p-4 border-b border-gray-200 text-left text-xs font-semibold uppercase tracking-wider text-gray-800 hidden lg:table-cell",children:"Check-out"}),(0,er.jsx)("th",{className:"p-2 sm:p-4 border-b border-gray-200 text-left text-xs font-semibold uppercase tracking-wider text-gray-800 hidden sm:table-cell",children:"Guests"}),(0,er.jsx)("th",{className:"p-2 sm:p-4 border-b border-gray-200 text-left text-xs font-semibold uppercase tracking-wider text-gray-800",children:"Status"}),(0,er.jsx)("th",{className:"p-2 sm:p-4 border-b border-gray-200 text-center text-xs font-semibold uppercase tracking-wider text-gray-800",children:"Actions"})]})}),(0,er.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:je.length>0?je.map((e,t)=>{var r;return(0,er.jsxs)(Fh.tr,{className:"hover:bg-gray-50 transition-colors",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.05*t},children:[(0,er.jsx)("td",{className:"p-2 sm:p-4",children:(0,er.jsx)("div",{className:"font-mono text-xs sm:text-sm font-semibold text-gray-900",children:ve(e)})}),(0,er.jsx)("td",{className:"p-2 sm:p-4 font-medium text-gray-900 text-xs sm:text-sm",children:e.guest_name}),(0,er.jsx)("td",{className:"p-2 sm:p-4 hidden md:table-cell",children:e.is_package?(0,er.jsx)("span",{className:"bg-purple-100 text-purple-700 px-2 py-0.5 rounded-full text-xs font-semibold",children:(null===(r=e.package)||void 0===r?void 0:r.title)||"Package"}):(0,er.jsx)("span",{className:"bg-gray-100 text-gray-700 px-2 py-0.5 rounded-full text-xs font-semibold",children:"Room"})}),(0,er.jsx)("td",{className:"p-2 sm:p-4 text-xs sm:text-sm",children:e.rooms&&e.rooms.length>0&&e.rooms.map(t=>e.is_package?t.room?"".concat(t.room.number).concat(t.room.type?" (".concat(t.room.type,")"):""):"-":"".concat(t.number).concat(t.type?" (".concat(t.type,")"):"")).filter(Boolean).join(", ")||"-"}),(0,er.jsx)("td",{className:"p-2 sm:p-4 text-gray-800 text-xs hidden lg:table-cell",children:e.check_in}),(0,er.jsx)("td",{className:"p-2 sm:p-4 text-gray-800 text-xs hidden lg:table-cell",children:e.check_out}),(0,er.jsxs)("td",{className:"p-2 sm:p-4 text-gray-800 text-xs hidden sm:table-cell",children:[e.adults," A, ",e.children," C"]}),(0,er.jsx)("td",{className:"p-2 sm:p-4",children:(0,er.jsx)(N$,{status:e.status||"Pending"})}),(0,er.jsx)("td",{className:"p-2 sm:p-4 text-center",children:(0,er.jsxs)("div",{className:"flex flex-wrap gap-1 sm:gap-2 justify-center",children:[(0,er.jsx)("button",{onClick:()=>(async(e,t)=>{const r=j.find(r=>r.id===e&&r.is_package===t);W(r||{guest_name:"Loading..."});try{const n=r?ve(r):t?"PK-".concat(String(e).padStart(6,"0")):"BK-".concat(String(e).padStart(6,"0")),a=await Ia.get("/bookings/details/".concat(n,"?is_package=").concat(t),le());W(a.data)}catch(n){console.error("Failed to fetch booking details:",n),R("error","Could not load booking details."),W(null)}})(e.id,e.is_package),className:"bg-blue-600 text-white px-2 sm:px-3 py-1 rounded-full text-xs font-semibold hover:bg-blue-700 transition-colors",children:"View"}),e.status&&"checkedin"===e.status.toLowerCase().replace(/[-_]/g,"")&&(0,er.jsx)("button",{onClick:async()=>{try{const t=ve(e),r=await Ia.get("/bookings/details/".concat(t,"?is_package=").concat(e.is_package),le());$(Be(Be({},e),r.data))}catch(ze){$(e)}},className:"bg-green-600 text-white px-2 sm:px-3 py-1 rounded-full text-xs font-semibold hover:bg-green-700 transition-colors",title:"Add Extra Allocation",children:"Add Items"}),(0,er.jsx)("button",{onClick:async()=>{try{const t=ve(e),r=await Ia.get("/bookings/details/".concat(t,"?is_package=").concat(e.is_package),le());K(Be(Be({},e),r.data))}catch(ze){K(e)}},className:"bg-yellow-500 text-white px-2 sm:px-3 py-1 rounded-full text-xs font-semibold hover:bg-yellow-600 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:e.status&&"booked"!==e.status.toLowerCase().replace(/[-_]/g,""),children:"Check-in"}),(0,er.jsx)("button",{onClick:()=>{var t;if(!e||!e.id||!e.check_out)return void R("error","Invalid booking data. Please refresh the page.");const r=(null===(t=e.status)||void 0===t?void 0:t.toLowerCase().trim())||"",n=r.replace(/[-_]/g,"-");n.includes("out")&&n.startsWith("checked-")&&n.endsWith("-out")||["checked_out","checked-out","checked out"].includes(r)?R("error","Cannot extend checkout for booking with status '".concat(e.status,"'. The guest has already checked out.")):H(e)},className:"bg-green-600 text-white px-2 sm:px-3 py-1 rounded-full text-xs font-semibold hover:bg-green-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:(()=>{if(!e||!e.status)return!0;const t=e.status.toLowerCase().trim(),r=t.replace(/[-_]/g,"-");if(r.includes("out")&&r.startsWith("checked-")&&r.endsWith("-out")||["checked_out","checked-out","checked out"].includes(t))return!0;return!("booked"===r||"checked-in"===r)})(),children:"Extend"}),(0,er.jsx)("button",{onClick:()=>(async(e,t)=>{if(window.confirm("Are you sure you want to cancel this booking?"))try{const n=j.find(r=>r.id===e&&r.is_package===t),a=n?ve(n):t?"PK-".concat(String(e).padStart(6,"0")):"BK-".concat(String(e).padStart(6,"0"));try{var r;const n=await Ia.get("/bookings/details/".concat(a,"?is_package=").concat(t),le());if(null!==n&&void 0!==n&&null!==(r=n.data)&&void 0!==r&&r.status&&n.data.status.toLowerCase().includes("cancel"))return w(r=>r.map(r=>r.id===e&&r.is_package===t?Be(Be({},r),n.data):r)),void R("success","Booking is already cancelled.")}catch(St){}const s=t?"/packages/booking/".concat(a,"/cancel"):"/bookings/".concat(a,"/cancel"),i=await Ia.put(s,{},le());R("success","Booking cancelled successfully."),w(r=>r.map(r=>r.id===e&&r.is_package===t?Be(Be({},r),i.data):r))}catch(s){var n;if(404===(null===s||void 0===s||null===(n=s.response)||void 0===n?void 0:n.status))try{const r=j.find(r=>r.id===e&&r.is_package===t),n=r?ve(r):t?"PK-".concat(String(e).padStart(6,"0")):"BK-".concat(String(e).padStart(6,"0")),s=await Ia.get("/bookings/details/".concat(n,"?is_package=").concat(t),le());var a;if(null!==s&&void 0!==s&&s.data)if(w(r=>r.map(r=>r.id===e&&r.is_package===t?Be(Be({},r),s.data):r)),((null===(a=s.data.status)||void 0===a?void 0:a.toLowerCase())||"").includes("cancel"))return void R("success","Booking status synced to Cancelled.")}catch(St){}console.error("Failed to cancel booking:",s),R("error","Failed to cancel booking.")}})(e.id,e.is_package),className:"bg-red-600 text-white px-2 sm:px-3 py-1 rounded-full text-xs font-semibold hover:bg-red-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:e.status&&"booked"!==e.status.toLowerCase().replace(/[-_]/g,""),children:"Cancel"}),e.guest_email&&(0,er.jsx)("button",{onClick:()=>(e=>{const t=ve(e),r=e.rooms&&e.rooms.length>0?e.rooms.map(t=>e.is_package?t.room?"Room ".concat(t.room.number," (").concat(t.room.type,")"):"-":"Room ".concat(t.number," (").concat(t.type,")")).filter(Boolean).join(", "):"N/A",n=encodeURIComponent("Booking Confirmation - ".concat(t)),a=encodeURIComponent("Dear ".concat(e.guest_name,",\n\n")+"Your booking has been confirmed!\n\n"+"Booking ID: ".concat(t,"\n")+"Booking Type: ".concat(e.is_package?"Package":"Room","\n")+"Rooms: ".concat(r,"\n")+"Check-in: ".concat(e.check_in,"\n")+"Check-out: ".concat(e.check_out,"\n")+"Guests: ".concat(e.adults," Adults, ").concat(e.children," Children\n")+"Status: ".concat(e.status,"\n\n")+"Thank you for choosing our resort!\n\nBest regards,\nResort Team");window.location.href="mailto:".concat(e.guest_email,"?subject=").concat(n,"&body=").concat(a)})(e),className:"bg-purple-600 text-white px-2 sm:px-3 py-1 rounded-full text-xs font-semibold hover:bg-purple-700 transition-colors",title:"Share Booking ID: ".concat(ve(e)," via Email"),children:"\ud83d\udce7"}),e.guest_mobile&&(0,er.jsx)("button",{onClick:()=>(e=>{var t;const r=ve(e),n=(null===(t=e.guest_mobile)||void 0===t?void 0:t.replace(/[^\d]/g,""))||"";if(!n)return void R("error","Mobile number not available for this booking.");const a=e.rooms&&e.rooms.length>0?e.rooms.map(t=>e.is_package?t.room?"Room ".concat(t.room.number," (").concat(t.room.type,")"):"-":"Room ".concat(t.number," (").concat(t.type,")")).filter(Boolean).join(", "):"N/A",s=encodeURIComponent("Dear ".concat(e.guest_name,",\n\n")+"Your booking has been confirmed!\n\n"+"Booking ID: ".concat(r,"\n")+"Booking Type: ".concat(e.is_package?"Package":"Room","\n")+"Rooms: ".concat(a,"\n")+"Check-in: ".concat(e.check_in,"\n")+"Check-out: ".concat(e.check_out,"\n")+"Guests: ".concat(e.adults," Adults, ").concat(e.children," Children\n")+"Status: ".concat(e.status,"\n\n")+"Thank you for choosing our resort!");window.open("https://wa.me/".concat(n,"?text=").concat(s),"_blank")})(e),className:"bg-green-600 text-white px-2 sm:px-3 py-1 rounded-full text-xs font-semibold hover:bg-green-700 transition-colors",title:"Share Booking ID: ".concat(ve(e)," via WhatsApp"),children:"\ud83d\udcac"})]})})]},e.id)}):(0,er.jsx)("tr",{children:(0,er.jsx)("td",{colSpan:"9",className:"text-center py-6 text-gray-500 italic text-sm sm:text-base",children:"No bookings found."})})})]})}),je.length>0&&ee&&(0,er.jsx)("div",{ref:de,className:"text-center p-4",children:L&&(0,er.jsx)("span",{className:"text-indigo-600",children:"Loading more bookings..."})})]})]}),"package"===t&&(0,er.jsx)(u$,{noLayout:!0}),"room"===t&&(0,er.jsx)(g$,{noLayout:!0})]}),(0,er.jsxs)(Hh,{children:[q&&(0,er.jsx)(k$,{booking:q,onClose:()=>W(null),onImageClick:e=>X(e),roomIdToRoom:oe,onAddAllocation:e=>{W(null),$(e)},inventoryItems:v,inventoryLocations:x,authHeader:le}),Q&&(0,er.jsx)(S$,{booking:Q,onClose:()=>$(null),inventoryItems:v,inventoryLocations:x,authHeader:le,onSuccess:()=>{window.dispatchEvent(new CustomEvent("inventory-refresh"))}}),V&&(0,er.jsx)(A$,{booking:V,onClose:()=>H(null),onSave:async(e,t)=>{O({message:"",type:""}),M(!0);try{const r=j.find(t=>t.id===e);if(!r||!r.id)return R("error","Booking not found. Please refresh the page."),M(!1),void H(null);const n=r.is_package||!1,a=ve(r);if(!a)return R("error","Invalid booking ID. Please refresh the page."),M(!1),void H(null);let s=r;try{const e=await Ia.get("/bookings/details/".concat(a,"?is_package=").concat(n),le());e.data&&(s=Be(Be(Be({},r),e.data),{},{is_package:n}))}catch(i){console.warn("Could not fetch fresh booking details, using cached data:",i)}if(!s.status)return R("error","Booking status is missing. Please refresh the page."),M(!1),void H(null);const o=s.status.toLowerCase().trim(),l=o.replace(/[-_]/g,"-");console.log("Extend booking - Booking ID:",e,"Display ID:",a,"Original status:",s.status,"Raw lower:",o,"Normalized:",l,"Is Package:",n);const c="booked"===l||"checked-in"===l||"checked_in"===o||"checked-in"===o||"checked in"===o,d=l.includes("out")&&l.startsWith("checked-")&&l.endsWith("-out")||["checked_out","checked-out","checked out"].includes(o);if(d)return R("error","Cannot extend checkout for booking with status '".concat(s.status,"'. The guest has already checked out.")),console.error("Booking already checked out:",{bookingId:e,displayId:a,originalStatus:s.status,normalizedStatus:l,rawStatusLower:o,isCheckedOut:d,isPackage:n}),M(!1),void H(null);if(!c){const t=s.status||"unknown";return R("error","Cannot extend checkout for booking with status '".concat(t,"'. Only 'booked' or 'checked-in' bookings can be extended.")),console.error("Invalid status for extension:",{bookingId:e,displayId:a,originalStatus:s.status,rawStatusLower:o,normalizedStatus:l,isValidStatus:c,isPackage:n}),M(!1),void H(null)}const u=n?"/packages/booking/".concat(a,"/extend?new_checkout=").concat(t):"/bookings/".concat(a,"/extend?new_checkout=").concat(t);console.log("Extending booking:",{bookingId:e,displayId:a,isPackage:n,url:u,status:s.status,newCheckoutDate:t}),await Ia.put(u,{},le()),R("success","Booking checkout extended successfully!"),H(null),ce()}catch(i){var r,n,a,s;console.error("Booking extension error:",i);const e=(null===(r=i.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.detail)||(null===(a=i.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||i.message||"Failed to extend booking.";R("error",e)}finally{M(!1)}},feedback:P,isSubmitting:L}),G&&(0,er.jsx)(C$,{booking:G,onClose:()=>K(null),onSave:async(e,t)=>{var r;O({message:"",type:""}),M(!0);const n=j.find(t=>t.id===e&&t.is_package===((null===G||void 0===G?void 0:G.is_package)||!1)),a=null===n||void 0===n||null===(r=n.status)||void 0===r?void 0:r.toLowerCase().replace(/[-_]/g,"");if("booked"!==a)return console.error("Check-in blocked: Invalid booking status",{bookingId:e,status:null===n||void 0===n?void 0:n.status,normalizedStatus:a}),R("error","Cannot check in. Booking status is: ".concat((null===n||void 0===n?void 0:n.status)||"unknown")),K(null),void M(!1);const s=new FormData;s.append("id_card_image",t.id_card_image),s.append("guest_photo",t.guest_photo);const i=ve(n||G),o=null!==n&&void 0!==n&&n.is_package?"/packages/booking/".concat(i,"/check-in"):"/bookings/".concat(i,"/check-in");try{var l;const r=await Ia.put(o,s,{headers:Be(Be({},le().headers),{},{"Content-Type":"multipart/form-data"})});if(w(t=>t.map(t=>t.id===e&&t.is_package===n.is_package?Be(Be({},t),r.data):t)),t.amenityAllocation&&null!==(l=t.amenityAllocation.items)&&void 0!==l&&l.length)try{const e=t.amenityAllocation,r=e.nights||1;let a=x.find(e=>{const t=String(e.location_type||"").toUpperCase();return!0===e.is_inventory_point&&("CENTRAL_WAREHOUSE"===t||"WAREHOUSE"===t||"BRANCH_STORE"===t)});if(a||(a=x.find(e=>{const t=String(e.location_type||"").toUpperCase();return"CENTRAL_WAREHOUSE"===t||"WAREHOUSE"===t||"BRANCH_STORE"===t})||null),a){var c;console.log("\u2705 Found main warehouse:",a);const t=n.rooms&&n.rooms[0]||null,s=(null===t||void 0===t?void 0:t.number)||(null===t||void 0===t||null===(c=t.room)||void 0===c?void 0:c.number)||null;let i=null;if(s&&(i=x.find(e=>{if("GUEST_ROOM"!==String(e.location_type||"").toUpperCase())return!1;return"".concat(e.name||""," ").concat(e.room_area||"").toLowerCase().includes(String(s).toLowerCase())})||null),i){console.log("\u2705 Found destination location:",i);const t=e.items.map(e=>{var t;let n=null;if(e.item_id&&(n=v.find(t=>t.id===e.item_id)),!n&&e.name){const t=String(e.name).trim().toLowerCase();n=v.find(e=>String(e.name||"").trim().toLowerCase()===t)||v.find(e=>String(e.name||"").toLowerCase().includes(t))||v.find(e=>t.includes(String(e.name||"").toLowerCase()))||null}if(!n)return null;const a="PER_NIGHT"===e.frequency?(e.complimentaryPerNight||0)*r:e.complimentaryPerStay||0;return!a||a<=0?null:{item_id:n.id,issued_quantity:a,unit:(null===(t=n)||void 0===t?void 0:t.unit)||"pcs",batch_lot_number:null,cost:null,is_payable:Boolean(e.is_payable),notes:e.is_payable?"Payable amenity allocation on check-in (Price: ".concat(e.extraPrice,")"):"Complimentary amenity allocation on check-in"}}).filter(Boolean);if(t.length>0){console.log("=== STOCK ISSUE CREATION DEBUG ==="),console.log("Main Warehouse:",a),console.log("Destination Location:",i),console.log("Issue Details:",t),console.log("Inventory Items:",v.filter(e=>t.some(t=>t.item_id===e.id)));try{const e=await Ia.post("/inventory/issues",{requisition_id:null,source_location_id:a.id,destination_location_id:i.id,issue_date:j$(),notes:"Auto amenity allocation for booking ".concat(ve(n||G)),details:t},le());console.log("\u2705 Stock issue created successfully:",e.data),R("success","Stock issue created: ".concat(t.length," item(s) allocated to room."))}catch(f){var d,u,h;console.error("\u274c Stock issue creation failed:",f),console.error("Error response:",null===(d=f.response)||void 0===d?void 0:d.data),R("error","Failed to create stock issue: ".concat((null===(u=f.response)||void 0===u||null===(h=u.data)||void 0===h?void 0:h.detail)||f.message))}}else console.warn("No issue details to create - all items filtered out")}else console.warn("No matching room location found for amenity allocation; skipping stock issue."),console.log("Room number searched:",s),console.log("Available locations:",x.filter(e=>"GUEST_ROOM"===String(e.location_type||"").toUpperCase()).map(e=>({id:e.id,name:e.name,room_area:e.room_area,location_type:e.location_type})))}else console.warn("\u274c No main warehouse inventory point found; skipping amenity stock issue."),console.log("Available locations:",x.map(e=>({id:e.id,name:e.name,location_type:e.location_type,is_inventory_point:e.is_inventory_point})))}catch(g){console.error("Failed to create amenity stock issue on check-in:",g)}R("success","Guest checked in successfully!"),K(null),window.dispatchEvent(new CustomEvent("inventory-refresh"))}catch(y){var m,p;console.error("Check-in error:",y);const e=(null===(m=y.response)||void 0===m||null===(p=m.data)||void 0===p?void 0:p.detail)||"Failed to check in guest.";R("error",e)}finally{M(!1)}},feedback:P,isSubmitting:L,inventoryItems:v}),Y&&(0,er.jsx)(_$,{imageUrl:Y,onClose:()=>X(null)})]})]})},D$=()=>{var e;const[t,r]=(0,a.useState)(null),[n,s]=(0,a.useState)(!1),[i,o]=(0,a.useState)(!1),[l,c]=(0,a.useState)([]),[d,u]=(0,a.useState)([]),[h,m]=(0,a.useState)(""),[p,f]=(0,a.useState)({type:null,text:""}),[g,x]=(0,a.useState)(!0),y=(e,t)=>{f({type:e,text:t})},[v,b]=(0,a.useState)(!1),[j,w]=(0,a.useState)(1),[N,_]=(0,a.useState)({name:"",email:"",password:"",phone:"",role_id:""});(0,a.useEffect)(()=>{k(),S()},[]);const k=async()=>{try{const e=await Ia.get("/users?skip=0&limit=20",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});c(e.data),x(10===e.data.length),w(1)}catch(e){console.error("Error fetching users:",e),y("error","Failed to load users.")}},S=async()=>{try{const e=await Ia.get("/roles",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});u(e.data)}catch(e){console.error("Error fetching roles:",e),y("error","Failed to load roles.")}},A=e=>{_(Be(Be({},N),{},{[e.target.name]:e.target.value}))};return(0,er.jsxs)(xm,{children:[(0,er.jsx)(e$,{message:p,onClose:()=>{f({type:null,text:""})},autoDismiss:!0,duration:5e3}),n&&t&&(0,er.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-30 z-50",children:(0,er.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg w-[400px]",children:[(0,er.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-800 border-b pb-2",children:"User Details"}),(0,er.jsxs)("div",{className:"space-y-2 text-gray-700 text-sm",children:[(0,er.jsxs)("p",{children:[(0,er.jsx)("strong",{children:"Name:"})," ",t.name]}),(0,er.jsxs)("p",{children:[(0,er.jsx)("strong",{children:"Email:"})," ",t.email]}),(0,er.jsxs)("p",{children:[(0,er.jsx)("strong",{children:"Phone:"})," ",t.phone||"-"]}),(0,er.jsxs)("p",{children:[(0,er.jsx)("strong",{children:"Role:"})," ",null===(e=t.role)||void 0===e?void 0:e.name]}),(0,er.jsxs)("p",{children:[(0,er.jsx)("strong",{children:"Status:"}),(0,er.jsx)("span",{className:"ml-1 font-medium ".concat(t.is_active?"text-green-600":"text-red-600"),children:t.is_active?"Active":"Inactive"})]})]}),(0,er.jsx)("div",{className:"mt-6 text-right",children:(0,er.jsx)("button",{onClick:()=>s(!1),className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"Close"})})]})}),(0,er.jsxs)("div",{className:"p-6 bg-white rounded-xl shadow",children:[(0,er.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Users"}),(0,er.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await Ia.post("/users",N,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});y("success","User created successfully!"),_({name:"",email:"",password:"",phone:"",role_id:""}),k()}catch(t){console.error("Create user error:",t),y("error","Failed to create user.")}},className:"mb-6 space-y-4 bg-gray-50 p-4 rounded shadow-sm",children:[(0,er.jsx)("h2",{className:"text-xl font-semibold",children:"\u2795 Create New User"}),(0,er.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,er.jsx)("input",{type:"text",name:"name",placeholder:"Name",value:N.name,onChange:A,className:"border px-3 py-2 rounded w-full",required:!0}),(0,er.jsx)("input",{type:"email",name:"email",placeholder:"Email",value:N.email,onChange:A,className:"border px-3 py-2 rounded w-full",required:!0}),(0,er.jsx)("input",{type:"password",name:"password",placeholder:"Password",value:N.password,onChange:A,className:"border px-3 py-2 rounded w-full",required:!0}),(0,er.jsx)("input",{type:"text",name:"phone",placeholder:"Phone",value:N.phone,onChange:A,className:"border px-3 py-2 rounded w-full"}),(0,er.jsxs)("select",{name:"role_id",value:N.role_id,onChange:A,className:"border px-3 py-2 rounded w-full",required:!0,children:[(0,er.jsx)("option",{value:"",children:"Select Role"}),d.map(e=>(0,er.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,er.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded",children:"Create User"})]}),(0,er.jsxs)("table",{className:"w-full text-sm border",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"bg-gray-100",children:[(0,er.jsx)("th",{className:"p-2 border",children:"#"}),(0,er.jsx)("th",{className:"p-2 border",children:"Username"}),(0,er.jsx)("th",{className:"p-2 border",children:"Email"}),(0,er.jsx)("th",{className:"p-2 border",children:"Role"}),(0,er.jsx)("th",{className:"p-2 border",children:"Phone"}),(0,er.jsx)("th",{className:"p-2 border",children:"Status"}),(0,er.jsx)("th",{className:"p-2 border",children:"Actions"})]})}),(0,er.jsxs)("tbody",{children:[l.map((e,t)=>{var n;return(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{className:"p-2 border text-center",children:t+1}),(0,er.jsx)("td",{className:"p-2 border",children:e.name}),(0,er.jsx)("td",{className:"p-2 border",children:e.email}),(0,er.jsx)("td",{className:"p-2 border",children:(null===(n=e.role)||void 0===n?void 0:n.name)||"-"}),(0,er.jsx)("td",{className:"p-2 border",children:e.phone||"-"}),(0,er.jsx)("td",{className:"p-2 border text-center",children:(0,er.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat(e.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-600"),children:e.is_active?"Active":"Inactive"})}),(0,er.jsx)("td",{className:"p-2 border text-center",children:(0,er.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,er.jsx)("button",{onClick:()=>(e=>{r(e),s(!0)})(e),className:"bg-blue-500 text-white px-3 py-1 rounded text-sm",children:"View"}),(0,er.jsx)("button",{onClick:()=>(e=>{var t;r(e),_({name:e.name,email:e.email,phone:e.phone||"",password:"",role_id:(null===(t=e.role)||void 0===t?void 0:t.id)||""}),o(!0)})(e),className:"bg-yellow-500 text-white px-3 py-1 rounded text-sm",children:"Edit"})]})})]},e.id)}),0===l.length&&(0,er.jsx)("tr",{children:(0,er.jsx)("td",{colSpan:"7",className:"text-center py-4 text-gray-500",children:"No users found."})})]})]}),g&&(0,er.jsx)("div",{className:"text-center mt-4",children:(0,er.jsx)("button",{onClick:async()=>{if(v||!g)return;b(!0);const e=j+1;try{const t=(await Ia.get("/users?skip=".concat(20*(e-1),"&limit=20"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}})).data||[];c(e=>[...e,...t]),w(e),x(10===t.length)}catch(t){console.error("Failed to load more users:",t)}finally{b(!1)}},disabled:v,className:"bg-indigo-100 text-indigo-700 font-semibold px-6 py-2 rounded-lg hover:bg-indigo-200 transition-colors disabled:bg-gray-200 disabled:text-gray-500",children:v?"Loading...":"Load More Users"})})]})]})},I$=Xh("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),L$=e=>{let{title:t,className:r="",children:n}=e;const a=r.includes("gradient");return(0,er.jsxs)("div",{className:"".concat(a?"":"bg-white"," rounded-2xl shadow-lg ").concat(a?"":"border border-gray-200"," p-6 ").concat(r),children:[t&&(0,er.jsx)("h2",{className:"text-xl font-bold mb-4 ".concat(a?"text-white":"text-gray-800"),children:t}),n]})},M$=["#4F46E5","#6366F1","#A78BFA","#F472B6"],R$=()=>{var e,t,r,n,s,i,o,l,c;const[d,u]=(0,a.useState)([]),[h,m]=(0,a.useState)([]),[p,f]=(0,a.useState)({name:"",description:"",charges:"",is_visible_to_guest:!1,average_completion_time:""}),[g,x]=(0,a.useState)([]),[y,v]=(0,a.useState)([]),[b,j]=(0,a.useState)([]),[w,N]=(0,a.useState)([]),[_,k]=(0,a.useState)([]),[S,A]=(0,a.useState)([]),[C,E]=(0,a.useState)({service_id:"",employee_id:"",room_id:"",status:"pending"}),[T,P]=(0,a.useState)([]),[O,D]=(0,a.useState)(null),[I,L]=(0,a.useState)([]),[M,R]=(0,a.useState)([]),[F,B]=(0,a.useState)([]),[z,U]=(0,a.useState)([]),[q,W]=(0,a.useState)({room:"",employee:"",status:"",from:"",to:""}),[V,H]=(0,a.useState)({search:"",visible:"",hasInventory:"",hasImages:""}),[G,K]=(0,a.useState)({search:"",service:"",category:""}),[Y,X]=(0,a.useState)(!0),[Q,$]=(0,a.useState)(!0),[J,Z]=(0,a.useState)(1),[ee,te]=(0,a.useState)(!1),[re,ne]=(0,a.useState)(null),[ae,se]=(0,a.useState)(null),[ie,oe]=(0,a.useState)(null),[le,ce]=(0,a.useState)([]),[de,ue]=(0,a.useState)({}),[he,me]=(0,a.useState)({}),[pe,fe]=(0,a.useState)(null),[ge,xe]=(0,a.useState)({}),[ye,ve]=(0,a.useState)([]),[be,je]=(0,a.useState)([]),[we,Ne]=(0,a.useState)(!1),[_e,ke]=(0,a.useState)(null),[Se,Ae]=(0,a.useState)(null),[Ce,Ee]=(0,a.useState)(!1),[Te,Pe]=(0,a.useState)({from_date:"",to_date:"",room_number:"",guest_name:"",location_id:""}),[Oe,De]=(0,a.useState)("dashboard"),[Ie,Le]=(0,a.useState)([]),[Me,Re]=(0,a.useState)(null),[Fe,Ue]=(0,a.useState)(null),qe=async()=>{try{const e=await Ia.get("/service-requests?limit=50");Le(e.data||[])}catch(e){console.error("Failed to fetch service requests:",e),Le([])}},We=async function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&X(!0);try{var t;const[e,r,n,a,s,i,o,l,c]=await Promise.all([Ia.get("/services?limit=50").catch(()=>({data:[]})),Ia.get("/services/assigned?skip=0&limit=50").catch(()=>({data:[]})),Ia.get("/rooms?limit=50").catch(()=>({data:[]})),Ia.get("/employees?limit=50").catch(()=>({data:[]})),Ia.get("/bookings?limit=50").catch(()=>({data:{bookings:[]}})),Ia.get("/packages/bookingsall?limit=50").catch(()=>({data:[]})),Ia.get("/inventory/items?limit=50").catch(()=>({data:[]})),Ia.get("/service-requests?limit=50").catch(()=>({data:[]})),Ia.get("/inventory/locations?limit=100").catch(()=>({data:[]}))]);u((null===e||void 0===e?void 0:e.data)||[]),m(((null===r||void 0===r?void 0:r.data)||[]).sort((e,t)=>new Date(t.assigned_at)-new Date(e.assigned_at))),R((null===n||void 0===n?void 0:n.data)||[]),U((null===a||void 0===a?void 0:a.data)||[]),k((null===o||void 0===o?void 0:o.data)||[]),Le((null===l||void 0===l?void 0:l.data)||[]),ve((null===c||void 0===c?void 0:c.data)||[]),"requests"===Oe&&qe();const d=(null===(t=s.data)||void 0===t?void 0:t.bookings)||[],h=(i.data||[]).map(e=>Be(Be({},e),{},{is_package:!0}));B([...d,...h]);const p=new Date;p.setHours(0,0,0,0);const f=new Set,g=e=>e?e.toLowerCase().replace(/[-_\s]/g,""):"",x=e=>"checkedin"===g(e);d.forEach(e=>{if(console.log("Checking regular booking ".concat(e.id,", status: ").concat(e.status,", rooms:"),e.rooms),x(e.status)){const t=new Date(e.check_in),r=new Date(e.check_out);t.setHours(0,0,0,0),r.setHours(0,0,0,0),t<=p&&r>=p?e.rooms&&Array.isArray(e.rooms)?e.rooms.forEach(t=>{t&&t.id?(f.add(t.id),console.log("Added checked-in room: ".concat(t.number," (ID: ").concat(t.id,") from booking ").concat(e.id,", status: ").concat(e.status))):console.log("Booking ".concat(e.id," room missing id:"),t)}):console.log("Booking ".concat(e.id," has checked-in status but no rooms array or rooms is not an array")):console.log("Booking ".concat(e.id," is checked-in but dates don't match: check_in=").concat(t,", check_out=").concat(r,", today=").concat(p))}else console.log("Regular booking ".concat(e.id," status '").concat(e.status,"' is not checked-in (normalized: '").concat(g(e.status),"')"))}),h.forEach(e=>{if(console.log("Checking package booking ".concat(e.id,", status: ").concat(e.status,", rooms:"),e.rooms),x(e.status)){const t=new Date(e.check_in),r=new Date(e.check_out);t.setHours(0,0,0,0),r.setHours(0,0,0,0),t<=p&&r>=p?e.rooms&&Array.isArray(e.rooms)?e.rooms.forEach(t=>{const r=t.room||t;r&&r.id?(f.add(r.id),console.log("Added checked-in package room: ".concat(r.number," (ID: ").concat(r.id,") from booking ").concat(e.id,", status: ").concat(e.status))):console.log("Package booking ".concat(e.id," room link missing room data:"),t)}):console.log("Package booking ".concat(e.id," has checked-in status but no rooms array")):console.log("Package booking ".concat(e.id," is checked-in but dates don't match: check_in=").concat(t,", check_out=").concat(r,", today=").concat(p))}else console.log("Package booking ".concat(e.id," status '").concat(e.status,"' is not checked-in (normalized: '").concat(g(e.status),"')"))}),n.data.forEach(e=>{"checkedin"===g(e.status)&&(f.add(e.id),console.log("Added checked-in room from room status: ".concat(e.number," (ID: ").concat(e.id,"), status: ").concat(e.status)))}),console.log("Total checked-in room IDs: ".concat(f.size),Array.from(f));const y=((null===n||void 0===n?void 0:n.data)||[]).filter(e=>f.has(e.id));console.log("Filtered checked-in rooms: ".concat(y.length),y.map(e=>"".concat(e.number," (status: ").concat(e.status,")"))),L(y)}catch(r){$(!1),Z(1),u([]),m([]),L([]),U([]),B([]),k([]),console.error("Error fetching data:",r),alert("Failed to load services data. Please refresh the page.")}finally{e&&X(!1)}};(0,a.useEffect)(()=>{We()},[]),(0,a.useEffect)(()=>{"requests"===Oe&&qe()},[Oe]);const[Ve,He]=(0,a.useState)({}),[Ge,Ke]=(0,a.useState)({}),[Ye,Xe]=(0,a.useState)(!1),Qe=async e=>{if(!e||0===e.length)return;Xe(!0);const t=[...new Set(e.map(e=>e.id||e.inventory_item_id))],r={};try{await Promise.all(t.map(async e=>{try{const t=await Ia.get("/inventory/items/".concat(e,"/stocks"));r[e]=t.data||[]}catch(ze){console.warn("Failed to fetch stock for item ".concat(e),ze),r[e]=[]}})),He(e=>Be(Be({},e),r));const e=Be({},Ge);t.forEach(t=>{const n=r[t]||[];if(n.length>0){const r=[...n].sort((e,t)=>t.quantity-e.quantity);!e[t]&&r[0].quantity>0&&(e[t]=r[0].location_id)}}),Ke(e)}catch(n){console.error("Error fetching stocks",n)}finally{Xe(!1)}},$e=e=>{if(!e)return"";if(e.startsWith("http"))return e;const t=Ta(),r=e.startsWith("/")?e:"/".concat(e);return"".concat(t).concat(r)},Je=(e,t,r)=>{const n=[...S];n[e]=Be(Be({},n[e]),{},{[t]:"quantity"===t?parseFloat(r)||0:r}),A(n)},Ze=()=>{f({name:"",description:"",charges:"",is_visible_to_guest:!1,average_completion_time:""}),x([]),v([]),j([]),N([]),A([]),ne(null)},et=()=>{Ze()},tt=(e,t,r)=>{const n=[...T];if(n[e]=Be(Be({},n[e]),{},{[t]:"quantity"===t?parseFloat(r)||0:r}),P(n),"inventory_item_id"===t){const t=parseInt(r);t&&(Qe([{id:t}]),n[e].source_location_id="",P(n))}},[rt,nt]=(0,a.useState)({}),at=h.filter(e=>{const t=new Date(e.assigned_at),r=q.from?new Date(q.from):null,n=q.to?new Date(q.to):null;return(!q.room||e.room_id===parseInt(q.room))&&(!q.employee||e.employee_id===parseInt(q.employee))&&(!q.status||e.status===q.status)&&(!r||t>=r)&&(!n||t<=n)}),st=(()=>{const e=d.map(e=>{const t=h.filter(t=>{var r;return(t.service_id||(null===(r=t.service)||void 0===r?void 0:r.id))===e.id}),r=t.filter(e=>"completed"===e.status).length,n=t.filter(e=>"pending"===e.status).length,a=t.filter(e=>"in_progress"===e.status).length,s={},i=e.inventory_items||[];return t.forEach(e=>{var t;(i.length>0?i:(null===(t=e.service)||void 0===t?void 0:t.inventory_items)||[]).forEach(e=>{const t=e.id||e.inventory_item_id;s[t]||(s[t]={name:e.name,item_code:e.item_code,unit:e.unit||"pcs",quantity_used:0,total_cost:0,assignments:0});const r=e.quantity||1;s[t].quantity_used+=r,s[t].total_cost+=(e.unit_price||0)*r,s[t].assignments+=1})}),{service_id:e.id,service_name:e.name,service_charges:e.charges,total_assignments:t.length,completed:r,pending:n,in_progress:a,total_revenue:r*e.charges,inventory_items:Object.values(s),inventory_count:Object.keys(s).length}}),t={};h.forEach(e=>{var r,n;const a=e.service_id||(null===(r=e.service)||void 0===r?void 0:r.id),s=d.find(e=>e.id===a);((null===s||void 0===s?void 0:s.inventory_items)||(null===(n=e.service)||void 0===n?void 0:n.inventory_items)||[]).forEach(e=>{const r=e.id||e.inventory_item_id;t[r]||(t[r]={id:r,name:e.name,item_code:e.item_code,unit:e.unit||"pcs",unit_price:e.unit_price||0,quantity_used:0,total_cost:0,services_used_in:new Set,assignments_count:0});const n=e.quantity||1;t[r].quantity_used+=n,t[r].total_cost+=(e.unit_price||0)*n,t[r].services_used_in.add(a),t[r].assignments_count+=1})}),Object.values(t).forEach(e=>{e.services_count=e.services_used_in.size,e.services_used_in=Array.from(e.services_used_in)});const r={};h.forEach(e=>{if(e.employee_id&&e.employee){const t=e.employee_id;r[t]||(r[t]={employee_id:t,employee_name:e.employee.name,total_assignments:0,completed:0,in_progress:0,pending:0}),r[t].total_assignments+=1,"completed"===e.status?r[t].completed+=1:"in_progress"===e.status?r[t].in_progress+=1:r[t].pending+=1}});const n={};return h.forEach(e=>{if(e.room_id&&e.room){var t;const s=e.room_id;var r;if(n[s]||(n[s]={room_id:s,room_number:e.room.number,total_services:0,total_revenue:0,services:[]}),n[s].total_services+=1,"completed"===e.status)n[s].total_revenue+=(null===(r=e.service)||void 0===r?void 0:r.charges)||0;const i=e.service_id||(null===(t=e.service)||void 0===t?void 0:t.id);var a;if(!n[s].services.find(e=>e.id===i))n[s].services.push({id:i,name:null===(a=e.service)||void 0===a?void 0:a.name})}}),{serviceStats:e,overallInventoryUsage:Object.values(t).sort((e,t)=>t.quantity_used-e.quantity_used),employeeStats:Object.values(r).sort((e,t)=>t.total_assignments-e.total_assignments),roomStats:Object.values(n).sort((e,t)=>t.total_services-e.total_services)}})(),it=d.length,ot=h.length,lt=h.filter(e=>"completed"===e.status).length,ct=h.filter(e=>"pending"===e.status).length,dt=[{name:"Pending",value:ct},{name:"Completed",value:lt},{name:"In Progress",value:ot-ct-lt}],ut=d.map(e=>({name:e.name,assigned:h.filter(t=>{var r;return(t.service_id||(null===(r=t.service)||void 0===r?void 0:r.id))===e.id}).length})),ht=async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("completed"===t&&null===r){const r=Ie.find(t=>t.id===e);if(r&&r.food_order_id)return void Re({requestId:e,newStatus:t})}Le(r=>r.map(r=>r.id===e?Be(Be({},r),{},{status:t}):r));try{const n={status:t};r&&(n.billing_status=r),await Ia.put("/service-requests/".concat(e),n),await qe(),Re(null)}catch(s){var n,a;console.error("Failed to update request status:",s);const e=(null===(n=s.response)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.detail)||s.message||"Unknown error";alert("Failed to update request status: ".concat(e)),await qe()}},mt=async(e,t)=>{try{if(e>1e6){const r=e-1e6;await Ia.put("/bill/checkout-request/".concat(r,"/assign?employee_id=").concat(t))}else await Ia.put("/service-requests/".concat(e),{employee_id:t});qe()}catch(a){var r,n;console.error("Failed to assign employee:",a);const e=(null===(r=a.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.detail)||a.message||"Unknown error";alert("Failed to assign employee: ".concat(e))}},[pt,ft]=(0,a.useState)(null),[gt,xt]=(0,a.useState)(null),yt=async e=>{try{const t=(await Ia.get("/bill/checkout-request/".concat(e,"/inventory-details"))).data;if(t.room_number)try{const e=await Ia.get("/bill/pre-checkout/".concat(t.room_number,"/verification-data"));e.data&&(e.data.consumables&&(t.items=e.data.consumables.map(e=>Be(Be({},e),{},{total_assigned:e.current_stock,current_stock:e.current_stock,available_stock:e.current_stock,used_qty:0,missing_qty:0}))),e.data.assets&&(t.fixed_assets=e.data.assets.map(e=>Be(Be({},e),{},{is_damaged:!1,damage_notes:"",current_stock:1,available_stock:1}))))}catch(ze){console.error("Failed to fetch inventory verification data:",ze)}xt(t),ft(e)}catch(n){var t,r;console.error("Failed to fetch inventory details:",n),alert("Failed to load inventory details: ".concat((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||n.message))}},vt=(e,t,r)=>{const n=[...gt.items],a=parseFloat(r)||0;if(n[e][t]=a,"available_stock"===t){const t=(n[e].current_stock||0)-a;n[e].used_qty=Math.max(0,t),n[e].missing_qty=0}xt(Be(Be({},gt),{},{items:n}))},bt=(e,t,r)=>{const n=[...gt.fixed_assets||[]];n[e][t]=r,xt(Be(Be({},gt),{},{fixed_assets:n}))},jt=async e=>{0!==z.length?ke({request:e,employeeId:e.employee_id?e.employee_id.toString():""}):alert("No employees available. Please add employees first.")};return(0,er.jsxs)(xm,{children:[(0,er.jsxs)("div",{className:"p-6 space-y-6",children:[(0,er.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,er.jsx)("h2",{className:"text-3xl font-bold text-gray-800",children:"Service Management Dashboard"})}),(0,er.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 mb-6",children:(0,er.jsx)("div",{className:"flex border-b border-gray-200",children:[{id:"dashboard",label:"Dashboard"},{id:"create",label:"Services"},{id:"assign",label:"Assign & Manage"},{id:"items",label:"Items Used"},{id:"requests",label:"Service Requests"}].map(e=>(0,er.jsx)("button",{onClick:()=>De(e.id),className:"px-6 py-3 font-medium transition-colors ".concat(Oe===e.id?"text-indigo-600 border-b-2 border-indigo-600":"text-gray-600 hover:text-gray-900"),children:e.label},e.id))})}),"dashboard"===Oe&&(0,er.jsxs)("div",{className:"space-y-6",children:[(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,er.jsxs)(L$,{title:"Total Services",className:"bg-gradient-to-br from-blue-500 to-blue-700 text-white",children:[(0,er.jsx)("div",{className:"text-4xl font-bold",children:it}),(0,er.jsx)("p",{className:"text-sm opacity-90 mt-2",children:"Active services available"})]}),(0,er.jsxs)(L$,{title:"Total Assignments",className:"bg-gradient-to-br from-green-500 to-green-700 text-white",children:[(0,er.jsx)("div",{className:"text-4xl font-bold",children:ot}),(0,er.jsxs)("p",{className:"text-sm opacity-90 mt-2",children:[lt," completed, ",ct," pending"]})]}),(0,er.jsxs)(L$,{title:"Total Revenue",className:"bg-gradient-to-br from-purple-500 to-purple-700 text-white",children:[(0,er.jsxs)("div",{className:"text-4xl font-bold",children:["\u20b9",st.serviceStats.reduce((e,t)=>e+t.total_revenue,0).toFixed(2)]}),(0,er.jsx)("p",{className:"text-sm opacity-90 mt-2",children:"From completed services"})]}),(0,er.jsxs)(L$,{title:"Inventory Items Used",className:"bg-gradient-to-br from-orange-500 to-orange-700 text-white",children:[(0,er.jsx)("div",{className:"text-4xl font-bold",children:st.overallInventoryUsage.length}),(0,er.jsx)("p",{className:"text-sm opacity-90 mt-2",children:"Unique items consumed"})]})]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,er.jsx)(L$,{title:"Service Status Distribution",children:(0,er.jsx)(sp,{width:"100%",height:250,children:(0,er.jsxs)(aB,{children:[(0,er.jsx)(Uz,{data:dt,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:!0,children:dt.map((e,t)=>(0,er.jsx)(kB,{fill:M$[t%M$.length]},t))}),(0,er.jsx)(CR,{}),(0,er.jsx)(iU,{})]})})}),(0,er.jsx)(L$,{title:"Service Assignments",children:(0,er.jsx)(sp,{width:"100%",height:250,children:(0,er.jsxs)(lU,{data:ut,children:[(0,er.jsx)(kI,{strokeDasharray:"3 3"}),(0,er.jsx)(BI,{dataKey:"name",angle:-45,textAnchor:"end",height:80}),(0,er.jsx)(YI,{allowDecimals:!1}),(0,er.jsx)(CR,{}),(0,er.jsx)(iU,{}),(0,er.jsx)(sq,{dataKey:"assigned",fill:"#4F46E5"})]})})})]}),(0,er.jsx)(L$,{title:"Service-Wise Performance & Inventory Usage",children:(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full border border-gray-200 rounded-lg",children:[(0,er.jsx)("thead",{className:"bg-gray-100 text-gray-700 uppercase tracking-wider",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Service Name"}),(0,er.jsx)("th",{className:"py-3 px-4 text-center",children:"Total Assignments"}),(0,er.jsx)("th",{className:"py-3 px-4 text-center",children:"Completed"}),(0,er.jsx)("th",{className:"py-3 px-4 text-center",children:"In Progress"}),(0,er.jsx)("th",{className:"py-3 px-4 text-center",children:"Pending"}),(0,er.jsx)("th",{className:"py-3 px-4 text-right",children:"Revenue (\u20b9)"}),(0,er.jsx)("th",{className:"py-3 px-4 text-center",children:"Inventory Items"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Details"})]})}),(0,er.jsx)("tbody",{children:0===st.serviceStats.length?(0,er.jsx)("tr",{children:(0,er.jsx)("td",{colSpan:"8",className:"py-8 text-center text-gray-500",children:"No service data available"})}):st.serviceStats.map((e,t)=>(0,er.jsxs)("tr",{className:"".concat(t%2===0?"bg-white":"bg-gray-50"," hover:bg-gray-100 transition-colors"),children:[(0,er.jsx)("td",{className:"py-3 px-4 font-semibold",children:e.service_name}),(0,er.jsx)("td",{className:"py-3 px-4 text-center",children:(0,er.jsx)("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:e.total_assignments})}),(0,er.jsx)("td",{className:"py-3 px-4 text-center",children:(0,er.jsx)("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium",children:e.completed})}),(0,er.jsx)("td",{className:"py-3 px-4 text-center",children:(0,er.jsx)("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium",children:e.in_progress})}),(0,er.jsx)("td",{className:"py-3 px-4 text-center",children:(0,er.jsx)("span",{className:"px-3 py-1 bg-gray-100 text-gray-800 rounded-full text-sm font-medium",children:e.pending})}),(0,er.jsxs)("td",{className:"py-3 px-4 text-right font-semibold text-green-600",children:["\u20b9",e.total_revenue.toFixed(2)]}),(0,er.jsx)("td",{className:"py-3 px-4 text-center",children:(0,er.jsxs)("span",{className:"px-3 py-1 bg-indigo-100 text-indigo-800 rounded-full text-sm font-medium",children:[e.inventory_count," items"]})}),(0,er.jsx)("td",{className:"py-3 px-4",children:e.inventory_items.length>0?(0,er.jsxs)("details",{className:"cursor-pointer",children:[(0,er.jsxs)("summary",{className:"text-sm text-indigo-600 hover:text-indigo-800 font-medium",children:["View Inventory (",e.inventory_items.length,")"]}),(0,er.jsx)("div",{className:"mt-2 p-3 bg-gray-50 rounded-lg space-y-2",children:e.inventory_items.map((e,t)=>(0,er.jsxs)("div",{className:"flex justify-between items-center text-sm border-b pb-2 last:border-0",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("span",{className:"font-medium",children:e.name}),e.item_code&&(0,er.jsxs)("span",{className:"text-gray-500 ml-2",children:["(",e.item_code,")"]})]}),(0,er.jsxs)("div",{className:"text-right",children:[(0,er.jsxs)("div",{className:"font-semibold",children:[e.quantity_used.toFixed(2)," ",e.unit]}),(0,er.jsxs)("div",{className:"text-xs text-gray-500",children:["\u20b9",e.total_cost.toFixed(2)]})]})]},t))})]}):(0,er.jsx)("span",{className:"text-sm text-gray-400",children:"No inventory"})})]},e.service_id))})]})})}),(0,er.jsx)(L$,{title:"Overall Inventory Usage (Item-Wise)",children:(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full border border-gray-200 rounded-lg",children:[(0,er.jsx)("thead",{className:"bg-gray-100 text-gray-700 uppercase tracking-wider",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Item Name"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Item Code"}),(0,er.jsx)("th",{className:"py-3 px-4 text-center",children:"Total Quantity Used"}),(0,er.jsx)("th",{className:"py-3 px-4 text-center",children:"Unit"}),(0,er.jsx)("th",{className:"py-3 px-4 text-center",children:"Unit Price"}),(0,er.jsx)("th",{className:"py-3 px-4 text-right",children:"Total Cost (\u20b9)"}),(0,er.jsx)("th",{className:"py-3 px-4 text-center",children:"Used In Services"}),(0,er.jsx)("th",{className:"py-3 px-4 text-center",children:"Assignments"})]})}),(0,er.jsx)("tbody",{children:0===st.overallInventoryUsage.length?(0,er.jsx)("tr",{children:(0,er.jsx)("td",{colSpan:"8",className:"py-8 text-center text-gray-500",children:"No inventory items used"})}):st.overallInventoryUsage.map((e,t)=>(0,er.jsxs)("tr",{className:"".concat(t%2===0?"bg-white":"bg-gray-50"," hover:bg-gray-100 transition-colors"),children:[(0,er.jsx)("td",{className:"py-3 px-4 font-semibold",children:e.name}),(0,er.jsx)("td",{className:"py-3 px-4 text-gray-600",children:e.item_code||"-"}),(0,er.jsx)("td",{className:"py-3 px-4 text-center font-semibold text-blue-600",children:e.quantity_used.toFixed(2)}),(0,er.jsx)("td",{className:"py-3 px-4 text-center text-gray-600",children:e.unit}),(0,er.jsxs)("td",{className:"py-3 px-4 text-center",children:["\u20b9",e.unit_price.toFixed(2)]}),(0,er.jsxs)("td",{className:"py-3 px-4 text-right font-semibold text-green-600",children:["\u20b9",e.total_cost.toFixed(2)]}),(0,er.jsx)("td",{className:"py-3 px-4 text-center",children:(0,er.jsxs)("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm font-medium",children:[e.services_count," services"]})}),(0,er.jsx)("td",{className:"py-3 px-4 text-center",children:(0,er.jsx)("span",{className:"px-3 py-1 bg-indigo-100 text-indigo-800 rounded-full text-sm font-medium",children:e.assignments_count})})]},e.id))})]})})}),st.employeeStats.length>0&&(0,er.jsx)(L$,{title:"Employee Performance",children:(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full border border-gray-200 rounded-lg",children:[(0,er.jsx)("thead",{className:"bg-gray-100 text-gray-700 uppercase tracking-wider",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Employee Name"}),(0,er.jsx)("th",{className:"py-3 px-4 text-center",children:"Total Assignments"}),(0,er.jsx)("th",{className:"py-3 px-4 text-center",children:"Completed"}),(0,er.jsx)("th",{className:"py-3 px-4 text-center",children:"In Progress"}),(0,er.jsx)("th",{className:"py-3 px-4 text-center",children:"Pending"}),(0,er.jsx)("th",{className:"py-3 px-4 text-center",children:"Completion Rate"})]})}),(0,er.jsx)("tbody",{children:st.employeeStats.map((e,t)=>{const r=e.total_assignments>0?(e.completed/e.total_assignments*100).toFixed(1):0;return(0,er.jsxs)("tr",{className:"".concat(t%2===0?"bg-white":"bg-gray-50"," hover:bg-gray-100 transition-colors"),children:[(0,er.jsx)("td",{className:"py-3 px-4 font-semibold",children:e.employee_name}),(0,er.jsx)("td",{className:"py-3 px-4 text-center",children:(0,er.jsx)("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:e.total_assignments})}),(0,er.jsx)("td",{className:"py-3 px-4 text-center",children:(0,er.jsx)("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium",children:e.completed})}),(0,er.jsx)("td",{className:"py-3 px-4 text-center",children:(0,er.jsx)("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium",children:e.in_progress})}),(0,er.jsx)("td",{className:"py-3 px-4 text-center",children:(0,er.jsx)("span",{className:"px-3 py-1 bg-gray-100 text-gray-800 rounded-full text-sm font-medium",children:e.pending})}),(0,er.jsx)("td",{className:"py-3 px-4 text-center",children:(0,er.jsxs)("div",{className:"flex items-center justify-center",children:[(0,er.jsx)("div",{className:"w-24 bg-gray-200 rounded-full h-2.5 mr-2",children:(0,er.jsx)("div",{className:"bg-green-600 h-2.5 rounded-full",style:{width:"".concat(r,"%")}})}),(0,er.jsxs)("span",{className:"text-sm font-semibold",children:[r,"%"]})]})})]},e.employee_id)})})]})})}),st.roomStats.length>0&&(0,er.jsx)(L$,{title:"Room-Wise Service Statistics",children:(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full border border-gray-200 rounded-lg",children:[(0,er.jsx)("thead",{className:"bg-gray-100 text-gray-700 uppercase tracking-wider",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Room Number"}),(0,er.jsx)("th",{className:"py-3 px-4 text-center",children:"Total Services"}),(0,er.jsx)("th",{className:"py-3 px-4 text-right",children:"Revenue (\u20b9)"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Services Used"})]})}),(0,er.jsx)("tbody",{children:st.roomStats.map((e,t)=>(0,er.jsxs)("tr",{className:"".concat(t%2===0?"bg-white":"bg-gray-50"," hover:bg-gray-100 transition-colors"),children:[(0,er.jsxs)("td",{className:"py-3 px-4 font-semibold",children:["Room ",e.room_number]}),(0,er.jsx)("td",{className:"py-3 px-4 text-center",children:(0,er.jsx)("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:e.total_services})}),(0,er.jsxs)("td",{className:"py-3 px-4 text-right font-semibold text-green-600",children:["\u20b9",e.total_revenue.toFixed(2)]}),(0,er.jsx)("td",{className:"py-3 px-4",children:(0,er.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.services.slice(0,3).map(e=>(0,er.jsx)("span",{className:"px-2 py-1 bg-indigo-100 text-indigo-800 rounded text-xs",children:e.name},e.id)),e.services.length>3&&(0,er.jsxs)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded text-xs",children:["+",e.services.length-3," more"]})]})})]},e.room_id))})]})})}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,er.jsx)(L$,{title:"Top Performing Service",children:st.serviceStats.length>0?(()=>{const e=st.serviceStats.sort((e,t)=>t.total_assignments-e.total_assignments)[0];return(0,er.jsxs)("div",{className:"space-y-2",children:[(0,er.jsx)("div",{className:"text-2xl font-bold text-indigo-600",children:e.service_name}),(0,er.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,er.jsxs)("div",{children:["Assignments: ",(0,er.jsx)("span",{className:"font-semibold",children:e.total_assignments})]}),(0,er.jsxs)("div",{children:["Revenue: ",(0,er.jsxs)("span",{className:"font-semibold text-green-600",children:["\u20b9",e.total_revenue.toFixed(2)]})]}),(0,er.jsxs)("div",{children:["Inventory Items: ",(0,er.jsx)("span",{className:"font-semibold",children:e.inventory_count})]})]})]})})():(0,er.jsx)("p",{className:"text-gray-500",children:"No data available"})}),(0,er.jsx)(L$,{title:"Most Used Inventory Item",children:st.overallInventoryUsage.length>0?(()=>{const e=st.overallInventoryUsage[0];return(0,er.jsxs)("div",{className:"space-y-2",children:[(0,er.jsx)("div",{className:"text-lg font-bold text-indigo-600",children:e.name}),(0,er.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,er.jsxs)("div",{children:["Quantity: ",(0,er.jsxs)("span",{className:"font-semibold",children:[e.quantity_used.toFixed(2)," ",e.unit]})]}),(0,er.jsxs)("div",{children:["Total Cost: ",(0,er.jsxs)("span",{className:"font-semibold text-red-600",children:["\u20b9",e.total_cost.toFixed(2)]})]}),(0,er.jsxs)("div",{children:["Used in: ",(0,er.jsxs)("span",{className:"font-semibold",children:[e.services_count," services"]})]})]})]})})():(0,er.jsx)("p",{className:"text-gray-500",children:"No data available"})}),(0,er.jsx)(L$,{title:"Total Inventory Cost",children:(0,er.jsxs)("div",{className:"space-y-2",children:[(0,er.jsxs)("div",{className:"text-3xl font-bold text-red-600",children:["\u20b9",st.overallInventoryUsage.reduce((e,t)=>e+t.total_cost,0).toFixed(2)]}),(0,er.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,er.jsxs)("div",{children:["Items: ",(0,er.jsx)("span",{className:"font-semibold",children:st.overallInventoryUsage.length})]}),(0,er.jsxs)("div",{children:["Total Quantity: ",(0,er.jsx)("span",{className:"font-semibold",children:st.overallInventoryUsage.reduce((e,t)=>e+t.quantity_used,0).toFixed(2)})]})]})]})})]}),(0,er.jsx)(L$,{title:"Recent Service Activity (Assigned & Requests)",children:(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full border border-gray-200 rounded-lg",children:[(0,er.jsx)("thead",{className:"bg-gray-100 text-gray-700 uppercase tracking-wider",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Type"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Service / Description"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Room"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Employee"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Status"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Date"})]})}),(0,er.jsxs)("tbody",{children:[[...h.map(e=>{var t,r,n;return{id:"as-".concat(e.id),type:"Assigned",name:(null===(t=e.service)||void 0===t?void 0:t.name)||e.service_name||"Service",room:(null===(r=e.room)||void 0===r?void 0:r.number)||e.room_number||"-",employee:(null===(n=e.employee)||void 0===n?void 0:n.name)||e.employee_name||"-",status:e.status,date:e.assigned_at,isRequest:!1,original:e}}),...Ie.map(e=>({id:"req-".concat(e.id),type:"cleaning"===e.request_type?"Cleaning":"refill"===e.request_type?"Refill":"Request",name:e.description||e.request_type,room:e.room_number||"-",employee:e.employee_name||"-",status:e.status,date:e.created_at,isRequest:!0,original:e}))].sort((e,t)=>new Date(t.date||0)-new Date(e.date||0)).slice(0,50).map((e,t)=>(0,er.jsxs)("tr",{className:"".concat(t%2===0?"bg-white":"bg-gray-50"," hover:bg-gray-100 transition-colors cursor-pointer"),onClick:()=>Ue(e),children:[(0,er.jsx)("td",{className:"py-3 px-4",children:(0,er.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat("Assigned"===e.type?"bg-blue-100 text-blue-800":"Cleaning"===e.type?"bg-orange-100 text-orange-800":"bg-purple-100 text-purple-800"),children:e.type})}),(0,er.jsx)("td",{className:"py-3 px-4",children:(0,er.jsx)("div",{className:"max-w-xs truncate",title:e.name,children:e.name})}),(0,er.jsxs)("td",{className:"py-3 px-4 font-medium",children:["Room ",e.room]}),(0,er.jsx)("td",{className:"py-3 px-4 text-gray-600",children:e.employee}),(0,er.jsx)("td",{className:"py-3 px-4",children:(0,er.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat("completed"===e.status?"bg-green-100 text-green-800":"in_progress"===e.status?"bg-yellow-100 text-yellow-800":"cancelled"===e.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:e.status})}),(0,er.jsx)("td",{className:"py-3 px-4 text-sm text-gray-500",children:e.date?new Date(e.date).toLocaleString():"-"})]},e.id)),0===[...h,...Ie].length&&(0,er.jsx)("tr",{children:(0,er.jsx)("td",{colSpan:"6",className:"py-8 text-center text-gray-500",children:"No recent activity found"})})]})]})})}),(0,er.jsxs)(L$,{title:"Service Requests (".concat(Ie.length,")"),children:[(0,er.jsxs)("div",{className:"mb-4 flex justify-between items-center",children:[(0,er.jsxs)("div",{className:"flex gap-2",children:[(0,er.jsxs)("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800",children:["Pending: ",Ie.filter(e=>"pending"===e.status).length]}),(0,er.jsxs)("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:["In Progress: ",Ie.filter(e=>"in_progress"===e.status).length]}),(0,er.jsxs)("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-purple-100 text-purple-800",children:["Inventory Checked: ",Ie.filter(e=>"inventory_checked"===e.status).length]}),(0,er.jsxs)("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800",children:["Completed: ",Ie.filter(e=>"completed"===e.status).length]}),(0,er.jsxs)("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-orange-100 text-orange-800",children:["Checkout Requests: ",Ie.filter(e=>e.is_checkout_request||e.id>1e6).length]})]}),(0,er.jsx)("button",{onClick:()=>De("requests"),className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-medium",children:"View All Requests"})]}),Y?(0,er.jsx)("div",{className:"flex justify-center items-center h-48",children:(0,er.jsx)(I$,{size:48,className:"animate-spin text-indigo-500"})}):0===Ie.length?(0,er.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No service requests found"}):(0,er.jsxs)("div",{className:"overflow-x-auto",children:[(0,er.jsxs)("table",{className:"min-w-full border border-gray-200 rounded-lg",children:[(0,er.jsx)("thead",{className:"bg-gray-100 text-gray-700 uppercase tracking-wider",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"ID"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Room"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Food Order"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Request Type"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Description"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Employee"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Status"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Avg. Completion Time"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Created At"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Completed At"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Actions"})]})}),(0,er.jsx)("tbody",{children:Ie.sort((e,t)=>{var r,n;const a={pending:0,in_progress:1,inventory_checked:2,completed:3,cancelled:4},s=null!==(r=a[e.status])&&void 0!==r?r:5,i=null!==(n=a[t.status])&&void 0!==n?n:5;return s!==i?s-i:new Date(t.created_at||0)-new Date(e.created_at||0)}).map((e,t)=>{var r;const n=e.is_checkout_request||e.id>1e6,a=n?e.checkout_request_id||e.id-1e6:null;return(0,er.jsxs)("tr",{className:"".concat(t%2===0?"bg-white":"bg-gray-50"," hover:bg-gray-100 transition-colors ").concat(n?"bg-yellow-50":""),children:[(0,er.jsxs)("td",{className:"p-3 border-t border-gray-200",children:["#",n?a:e.id,n&&(0,er.jsx)("span",{className:"ml-2 text-xs text-yellow-600",children:"(Checkout)"})]}),(0,er.jsxs)("td",{className:"p-3 border-t border-gray-200",children:[e.room_number?"Room ".concat(e.room_number):"Room ID: ".concat(e.room_id),n&&e.guest_name&&(0,er.jsxs)("div",{className:"text-xs text-gray-600 mt-1",children:["Guest: ",e.guest_name]})]}),(0,er.jsx)("td",{className:"p-3 border-t border-gray-200",children:"cleaning"===e.request_type?(0,er.jsx)("span",{className:"text-sm text-orange-600 font-medium",children:"\ud83e\uddf9 Cleaning Service"}):"refill"===e.request_type?(0,er.jsx)("span",{className:"text-sm text-purple-600 font-medium",children:"\ud83d\udd04 Refill Service"}):n?(0,er.jsx)("span",{className:"text-sm text-gray-600",children:"Checkout Verification"}):(0,er.jsx)("div",{className:"text-sm",children:e.food_order_id?(0,er.jsxs)(er.Fragment,{children:[(0,er.jsxs)("div",{children:["Order #",e.food_order_id]}),e.food_order_amount&&(0,er.jsxs)("div",{className:"text-gray-600",children:["\u20b9",e.food_order_amount.toFixed(2)]}),e.food_order_status&&(0,er.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat("completed"===e.food_order_status?"bg-green-100 text-green-800":"in_progress"===e.food_order_status?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:e.food_order_status})]}):(0,er.jsx)("span",{className:"text-gray-400 text-xs",children:"No food order"})})}),(0,er.jsx)("td",{className:"p-3 border-t border-gray-200",children:(0,er.jsx)("span",{className:"px-2 py-1 rounded text-xs capitalize ".concat("cleaning"===e.request_type?"bg-orange-100 text-orange-800":"refill"===e.request_type?"bg-purple-100 text-purple-800":n?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"),children:"cleaning"===e.request_type?"\ud83e\uddf9 cleaning":"refill"===e.request_type?"\ud83d\udd04 refill":n?"checkout_verification":e.request_type||"delivery"})}),(0,er.jsx)("td",{className:"p-3 border-t border-gray-200",children:(0,er.jsx)("div",{className:"max-w-xs truncate",title:e.description,children:e.description||"-"})}),(0,er.jsx)("td",{className:"p-3 border-t border-gray-200",children:e.employee_name||e.employee_id?(0,er.jsx)("span",{className:"text-sm",children:e.employee_name||"Employee #".concat(e.employee_id)}):(0,er.jsx)("span",{className:"text-gray-400 text-sm",children:"Not assigned"})}),(0,er.jsx)("td",{className:"p-3 border-t border-gray-200",children:n?(0,er.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat("completed"===e.status?"bg-green-100 text-green-800":"in_progress"===e.status?"bg-blue-100 text-blue-800":"pending"===e.status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:e.status||"pending"}):(0,er.jsxs)("select",{value:e.status,onChange:t=>ht(e.id,t.target.value),className:"border p-2 rounded-lg bg-white text-sm ".concat("completed"===e.status?"bg-green-50":"in_progress"===e.status?"bg-yellow-50":"cancelled"===e.status?"bg-red-50":"bg-gray-50"),children:[(0,er.jsx)("option",{value:"pending",children:"Pending"}),(0,er.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,er.jsx)("option",{value:"completed",children:"Completed"}),(0,er.jsx)("option",{value:"cancelled",children:"Cancelled"})]})}),(0,er.jsx)("td",{className:"p-3 border-t border-gray-200 text-sm",children:null!==(r=e.service)&&void 0!==r&&r.average_completion_time?(0,er.jsx)("span",{className:"text-indigo-600 font-medium",children:e.service.average_completion_time}):(0,er.jsx)("span",{className:"text-gray-400 italic",children:"-"})}),(0,er.jsx)("td",{className:"p-3 border-t border-gray-200 text-sm",children:e.created_at?new Date(e.created_at).toLocaleString():"-"}),(0,er.jsx)("td",{className:"p-3 border-t border-gray-200 text-sm",children:e.completed_at?(0,er.jsx)("span",{className:"text-green-600",children:new Date(e.completed_at).toLocaleString()}):(0,er.jsx)("span",{className:"text-gray-400",children:"-"})}),(0,er.jsx)("td",{className:"p-3 border-t border-gray-200",children:(0,er.jsx)("div",{className:"flex gap-2",children:n?(0,er.jsxs)(er.Fragment,{children:[!e.employee_id&&!e.employee_name&&"pending"===e.status&&(0,er.jsx)("button",{onClick:()=>jt(e),className:"px-3 py-1 rounded text-sm font-medium bg-green-500 hover:bg-green-600 text-white",title:"Assign employee to checkout verification",children:"Assign Employee"}),"pending"===e.status||"in_progress"===e.status||"inventory_checked"===e.status?(0,er.jsx)("button",{onClick:()=>yt(a),className:"px-4 py-2 rounded-lg text-sm font-semibold bg-blue-600 hover:bg-blue-700 text-white shadow-md hover:shadow-lg transition-all duration-200",title:"View inventory details and verify",children:"\u2713 Verify Inventory"}):"completed"===e.status?(0,er.jsx)("span",{className:"px-3 py-1 rounded text-sm font-medium bg-green-100 text-green-800",children:"\u2713 Completed"}):null]}):(0,er.jsxs)(er.Fragment,{children:["pending"===e.status&&!e.employee_id&&!e.employee_name&&(0,er.jsx)("button",{onClick:()=>jt(e),className:"px-3 py-1 rounded text-sm font-medium bg-green-500 hover:bg-green-600 text-white",title:"Quick assign service to this room",children:"Assign Service"}),e.employee_id||e.employee_name?(0,er.jsx)("span",{className:"text-sm text-gray-600",children:e.employee_name||"Employee #".concat(e.employee_id)}):null]})})})]},e.id)})})]}),Ie.length>10&&(0,er.jsx)("div",{className:"mt-4 text-center",children:(0,er.jsxs)("button",{onClick:()=>De("requests"),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg text-sm font-medium",children:["View All ",Ie.length," Requests \u2192"]})})]})]})]}),we&&(0,er.jsx)(L$,{title:"\ud83d\udcca Detailed Service Usage Report",className:"mb-6",children:(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-4",children:[(0,er.jsx)("input",{type:"date",value:Te.from_date,onChange:e=>Pe(Be(Be({},Te),{},{from_date:e.target.value})),placeholder:"From Date",className:"border p-2 rounded-lg"}),(0,er.jsx)("input",{type:"date",value:Te.to_date,onChange:e=>Pe(Be(Be({},Te),{},{to_date:e.target.value})),placeholder:"To Date",className:"border p-2 rounded-lg"}),(0,er.jsx)("input",{type:"text",value:Te.room_number,onChange:e=>Pe(Be(Be({},Te),{},{room_number:e.target.value})),placeholder:"Room Number",className:"border p-2 rounded-lg"}),(0,er.jsx)("input",{type:"text",value:Te.guest_name,onChange:e=>Pe(Be(Be({},Te),{},{guest_name:e.target.value})),placeholder:"Guest Name",className:"border p-2 rounded-lg"}),(0,er.jsx)("button",{onClick:async()=>{Ee(!0);try{const e=new URLSearchParams;Te.from_date&&e.append("from_date",Te.from_date),Te.to_date&&e.append("to_date",Te.to_date),Te.room_number&&e.append("room_number",Te.room_number),Te.guest_name&&e.append("guest_name",Te.guest_name),Te.location_id&&e.append("location_id",Te.location_id);const t=await Ia.get("/reports/services/detailed-usage?".concat(e.toString()));Ae(t.data)}catch(r){var e,t;console.error("Failed to fetch service report:",r),alert("Failed to load report: ".concat((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||r.message))}finally{Ee(!1)}},disabled:Ce,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium disabled:opacity-50",children:Ce?"Loading...":"Generate Report"})]}),Se&&(0,er.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("span",{className:"text-sm text-gray-600",children:"Total Services:"}),(0,er.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:Se.total_services})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("span",{className:"text-sm text-gray-600",children:"Total Charges:"}),(0,er.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:["\u20b9",Se.total_charges.toFixed(2)]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("span",{className:"text-sm text-gray-600",children:"Date Range:"}),(0,er.jsxs)("p",{className:"text-lg font-semibold text-gray-800",children:[Se.from_date?new Date(Se.from_date).toLocaleDateString():"All"," -",Se.to_date?new Date(Se.to_date).toLocaleDateString():"All"]})]})]})}),Se&&(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsx)("div",{className:"border-b border-gray-200",children:(0,er.jsx)("div",{className:"flex space-x-4",children:(0,er.jsxs)("button",{className:"px-4 py-2 border-b-2 border-indigo-600 text-indigo-600 font-medium",children:["All Services (",Se.services.length,")"]})})}),(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full border border-gray-200 rounded-lg",children:[(0,er.jsx)("thead",{className:"bg-gray-100 text-gray-700 uppercase tracking-wider",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Service"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Guest"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Room"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Location"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Employee"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Charges"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Status"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Assigned"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Last Used"})]})}),(0,er.jsx)("tbody",{children:Se.services.map((e,t)=>(0,er.jsxs)("tr",{className:"".concat(t%2===0?"bg-white":"bg-gray-50"," hover:bg-gray-100"),children:[(0,er.jsx)("td",{className:"p-3 border-t border-gray-200",children:(0,er.jsxs)("div",{children:[(0,er.jsx)("span",{className:"font-medium",children:e.service_name}),e.service_description&&(0,er.jsx)("p",{className:"text-xs text-gray-500",children:e.service_description})]})}),(0,er.jsx)("td",{className:"p-3 border-t border-gray-200",children:e.guest_name||(0,er.jsx)("span",{className:"text-gray-400 italic",children:"N/A"})}),(0,er.jsxs)("td",{className:"p-3 border-t border-gray-200",children:["Room ",e.room_number]}),(0,er.jsx)("td",{className:"p-3 border-t border-gray-200",children:e.location_name?(0,er.jsxs)("div",{children:[(0,er.jsx)("span",{className:"font-medium",children:e.location_name}),e.location_type&&(0,er.jsx)("p",{className:"text-xs text-gray-500",children:e.location_type})]}):(0,er.jsx)("span",{className:"text-gray-400 italic",children:"N/A"})}),(0,er.jsx)("td",{className:"p-3 border-t border-gray-200",children:e.employee_name}),(0,er.jsxs)("td",{className:"p-3 border-t border-gray-200 font-semibold",children:["\u20b9",e.service_charges]}),(0,er.jsx)("td",{className:"p-3 border-t border-gray-200",children:(0,er.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat("completed"===e.status?"bg-green-100 text-green-800":"in_progress"===e.status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:e.status})}),(0,er.jsx)("td",{className:"p-3 border-t border-gray-200 text-sm",children:new Date(e.assigned_at).toLocaleString()}),(0,er.jsx)("td",{className:"p-3 border-t border-gray-200 text-sm",children:e.last_used_at?(0,er.jsx)("span",{className:"text-green-600 font-medium",children:new Date(e.last_used_at).toLocaleString()}):(0,er.jsx)("span",{className:"text-gray-400 italic",children:"Never"})})]},t))})]})}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6",children:[Object.keys(Se.by_room).length>0&&(0,er.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[(0,er.jsx)("h3",{className:"font-semibold text-lg mb-3",children:"By Room"}),(0,er.jsx)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:Object.entries(Se.by_room).map(e=>{let[t,r]=e;return(0,er.jsxs)("div",{className:"border-b pb-2",children:[(0,er.jsxs)("div",{className:"font-medium text-blue-600",children:["Room ",t]}),(0,er.jsxs)("div",{className:"text-sm text-gray-600",children:[r.length," service(s)"]})]},t)})})]}),Object.keys(Se.by_guest).length>0&&(0,er.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[(0,er.jsx)("h3",{className:"font-semibold text-lg mb-3",children:"By Guest"}),(0,er.jsx)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:Object.entries(Se.by_guest).map(e=>{let[t,r]=e;return(0,er.jsxs)("div",{className:"border-b pb-2",children:[(0,er.jsx)("div",{className:"font-medium text-green-600",children:t}),(0,er.jsxs)("div",{className:"text-sm text-gray-600",children:[r.length," service(s)"]})]},t)})})]}),Object.keys(Se.by_location).length>0&&(0,er.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[(0,er.jsx)("h3",{className:"font-semibold text-lg mb-3",children:"By Location/Store"}),(0,er.jsx)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:Object.entries(Se.by_location).map(e=>{let[t,r]=e;return(0,er.jsxs)("div",{className:"border-b pb-2",children:[(0,er.jsx)("div",{className:"font-medium text-purple-600",children:t}),(0,er.jsxs)("div",{className:"text-sm text-gray-600",children:[r.length," service(s)"]})]},t)})})]})]})]}),!Se&&!Ce&&(0,er.jsx)("div",{className:"text-center py-8 text-gray-500",children:'Click "Generate Report" to view detailed service usage report'})]})}),"create"===Oe&&(0,er.jsxs)("div",{className:"space-y-6",children:[(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,er.jsxs)(L$,{title:"Total Services",className:"bg-gradient-to-br from-blue-500 to-blue-700 text-white",children:[(0,er.jsx)("div",{className:"text-3xl font-bold",children:it}),(0,er.jsx)("p",{className:"text-sm opacity-90 mt-1",children:"Active services"})]}),(0,er.jsxs)(L$,{title:"Visible to Guests",className:"bg-gradient-to-br from-green-500 to-green-700 text-white",children:[(0,er.jsx)("div",{className:"text-3xl font-bold",children:d.filter(e=>e.is_visible_to_guest).length}),(0,er.jsx)("p",{className:"text-sm opacity-90 mt-1",children:"Guest-visible"})]}),(0,er.jsxs)(L$,{title:"With Images",className:"bg-gradient-to-br from-purple-500 to-purple-700 text-white",children:[(0,er.jsx)("div",{className:"text-3xl font-bold",children:d.filter(e=>e.images&&e.images.length>0).length}),(0,er.jsx)("p",{className:"text-sm opacity-90 mt-1",children:"With images"})]}),(0,er.jsxs)(L$,{title:"With Inventory",className:"bg-gradient-to-br from-orange-500 to-orange-700 text-white",children:[(0,er.jsx)("div",{className:"text-3xl font-bold",children:d.filter(e=>e.inventory_items&&e.inventory_items.length>0).length}),(0,er.jsx)("p",{className:"text-sm opacity-90 mt-1",children:"With items"})]})]}),(0,er.jsx)(L$,{title:"Filters",children:(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,er.jsx)("input",{type:"text",placeholder:"Search by name or description...",value:V.search,onChange:e=>H(Be(Be({},V),{},{search:e.target.value})),className:"border p-2 rounded-lg"}),(0,er.jsxs)("select",{value:V.visible,onChange:e=>H(Be(Be({},V),{},{visible:e.target.value})),className:"border p-2 rounded-lg",children:[(0,er.jsx)("option",{value:"",children:"All Visibility"}),(0,er.jsx)("option",{value:"true",children:"Visible to Guests"}),(0,er.jsx)("option",{value:"false",children:"Hidden"})]}),(0,er.jsxs)("select",{value:V.hasInventory,onChange:e=>H(Be(Be({},V),{},{hasInventory:e.target.value})),className:"border p-2 rounded-lg",children:[(0,er.jsx)("option",{value:"",children:"All Services"}),(0,er.jsx)("option",{value:"true",children:"With Inventory"}),(0,er.jsx)("option",{value:"false",children:"Without Inventory"})]}),(0,er.jsxs)("select",{value:V.hasImages,onChange:e=>H(Be(Be({},V),{},{hasImages:e.target.value})),className:"border p-2 rounded-lg",children:[(0,er.jsx)("option",{value:"",children:"All Services"}),(0,er.jsx)("option",{value:"true",children:"With Images"}),(0,er.jsx)("option",{value:"false",children:"Without Images"})]}),(0,er.jsx)("button",{onClick:()=>H({search:"",visible:"",hasInventory:"",hasImages:""}),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg font-medium",children:"Clear Filters"})]})}),(0,er.jsx)(L$,{title:"Create New Service",children:(0,er.jsxs)("div",{className:"space-y-3",children:[re&&(0,er.jsxs)("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg flex flex-col gap-2",children:[(0,er.jsxs)("div",{className:"text-sm text-yellow-800 font-semibold",children:["Editing service ID #",re,'. Update the details below and click "Update Service" to save changes.']}),(0,er.jsx)("button",{type:"button",onClick:et,className:"self-start text-sm text-blue-700 hover:text-blue-900 underline",children:"Cancel editing"})]}),(0,er.jsx)("input",{type:"text",placeholder:"Service Name",value:p.name,onChange:e=>f(Be(Be({},p),{},{name:e.target.value})),className:"w-full border p-3 rounded-lg focus:ring-2 focus:ring-indigo-400"}),(0,er.jsx)("input",{type:"text",placeholder:"Description",value:p.description,onChange:e=>f(Be(Be({},p),{},{description:e.target.value})),className:"w-full border p-3 rounded-lg focus:ring-2 focus:ring-indigo-400"}),(0,er.jsx)("input",{type:"number",placeholder:"Charges",value:p.charges,onChange:e=>f(Be(Be({},p),{},{charges:e.target.value})),className:"w-full border p-3 rounded-lg focus:ring-2 focus:ring-indigo-400"}),(0,er.jsx)("input",{type:"text",placeholder:"Average Completion Time (e.g., 30 minutes, 1 hour)",value:p.average_completion_time,onChange:e=>f(Be(Be({},p),{},{average_completion_time:e.target.value})),className:"w-full border p-3 rounded-lg focus:ring-2 focus:ring-indigo-400"}),(0,er.jsxs)("div",{className:"flex items-center gap-2",children:[(0,er.jsx)("input",{type:"checkbox",id:"is_visible_to_guest",checked:p.is_visible_to_guest,onChange:e=>f(Be(Be({},p),{},{is_visible_to_guest:e.target.checked})),className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),(0,er.jsx)("label",{htmlFor:"is_visible_to_guest",className:"text-sm font-medium text-gray-700",children:"Visible to Guests/Users"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Service Images"}),(0,er.jsx)("input",{type:"file",multiple:!0,accept:"image/*",onChange:e=>{const t=Array.from(e.target.files);x(t);const r=t.map(e=>URL.createObjectURL(e));v(r)},className:"w-full border p-3 rounded-lg focus:ring-2 focus:ring-indigo-400"}),y.length>0&&(0,er.jsx)("div",{className:"grid grid-cols-4 gap-2 mt-2",children:y.map((e,t)=>(0,er.jsx)("img",{src:e,alt:"Preview ".concat(t+1),className:"w-full h-20 object-cover rounded border"},t))}),re&&b.length>0&&(0,er.jsxs)("div",{className:"mt-4",children:[(0,er.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Existing Images"}),(0,er.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:b.map(e=>{const t=w.includes(e.id);return(0,er.jsxs)("div",{className:"border rounded-lg p-2 text-center ".concat(t?"border-red-400 bg-red-50 opacity-70":"border-gray-200"),children:[(0,er.jsx)("img",{src:$e(e.image_url),alt:"Service",className:"w-full h-20 object-cover rounded mb-2"}),(0,er.jsx)("button",{type:"button",onClick:()=>{return t=e.id,void N(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},className:"w-full text-xs font-semibold px-2 py-1 rounded ".concat(t?"bg-gray-200 text-gray-700":"bg-red-500 text-white"),children:t?"Keep Image":"Remove Image"})]},e.id)})})]})]}),(0,er.jsxs)("div",{className:"mt-4",children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Inventory Items (Optional)"}),(0,er.jsx)("button",{type:"button",onClick:()=>{A([...S,{inventory_item_id:"",quantity:1}])},className:"mb-2 text-sm bg-gray-200 hover:bg-gray-300 text-gray-700 px-3 py-1 rounded",children:"+ Add Inventory Item"}),S.map((e,t)=>(0,er.jsxs)("div",{className:"flex gap-2 mb-2 items-end",children:[(0,er.jsxs)("select",{value:e.inventory_item_id,onChange:e=>Je(t,"inventory_item_id",e.target.value),className:"flex-1 border p-2 rounded-lg text-sm",children:[(0,er.jsx)("option",{value:"",children:"Select Item"}),_.map(e=>(0,er.jsxs)("option",{value:e.id,children:[e.name," ",e.item_code?"(".concat(e.item_code,")"):""," - ",e.unit]},e.id))]}),(0,er.jsx)("input",{type:"number",value:e.quantity,onChange:e=>Je(t,"quantity",e.target.value),placeholder:"Qty",className:"w-24 border p-2 rounded-lg text-sm"}),(0,er.jsx)("button",{type:"button",onClick:()=>(e=>{A(S.filter((t,r)=>r!==e))})(t),className:"bg-red-500 hover:bg-red-600 text-white px-3 py-2 rounded text-sm",children:"Remove"})]},t))]}),(0,er.jsx)("button",{onClick:async()=>{if(p.name&&p.description&&p.charges)try{const e=new FormData;e.append("name",p.name),e.append("description",p.description),e.append("charges",parseFloat(p.charges)),e.append("is_visible_to_guest",p.is_visible_to_guest?"true":"false"),p.average_completion_time&&e.append("average_completion_time",p.average_completion_time),g.forEach(t=>{e.append("images",t)});const t=S.filter(e=>e.inventory_item_id&&e.quantity>0);(re||t.length>0)&&e.append("inventory_items",JSON.stringify(t)),re&&w.length>0&&e.append("remove_image_ids",JSON.stringify(w)),re?await Ia.put("/services/".concat(re),e,{headers:{"Content-Type":"multipart/form-data"}}):await Ia.post("/services",e,{headers:{"Content-Type":"multipart/form-data"}}),Ze(),We()}catch(n){var e,t,r;console.error("Failed to save service",n);const a=(null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||n.message||"Unknown error";console.error("Error details:",null===(r=n.response)||void 0===r?void 0:r.data),alert("Failed to save service: ".concat(a))}else alert("All fields are required")},className:"w-full mt-3 bg-indigo-600 hover:bg-indigo-700 text-white p-3 rounded-lg shadow-lg font-semibold",children:re?"Update Service":"Create Service"}),re&&(0,er.jsx)("button",{type:"button",onClick:et,className:"w-full mt-2 bg-gray-200 hover:bg-gray-300 text-gray-800 p-3 rounded-lg font-semibold",children:"Cancel Edit"})]})}),(0,er.jsx)(L$,{title:"All Services",children:Y?(0,er.jsx)("div",{className:"flex justify-center items-center h-48",children:(0,er.jsx)(I$,{size:48,className:"animate-spin text-indigo-500"})}):(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full border border-gray-200 rounded-lg",children:[(0,er.jsx)("thead",{className:"bg-gray-100 text-gray-700 uppercase tracking-wider",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Image"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Service Name"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Description"}),(0,er.jsx)("th",{className:"py-3 px-4 text-right",children:"Charges (\u20b9)"}),(0,er.jsx)("th",{className:"py-3 px-4 text-center",children:"Avg. Time"}),(0,er.jsx)("th",{className:"py-3 px-4 text-center",children:"Visible"}),(0,er.jsx)("th",{className:"py-3 px-4 text-center",children:"Inventory"}),(0,er.jsx)("th",{className:"py-3 px-4 text-center",children:"Actions"})]})}),(0,er.jsx)("tbody",{children:(()=>{const e=d.filter(e=>{var t;return!!(!V.search||e.name.toLowerCase().includes(V.search.toLowerCase())||null!==(t=e.description)&&void 0!==t&&t.toLowerCase().includes(V.search.toLowerCase()))&&((""===V.visible||e.is_visible_to_guest===("true"===V.visible))&&((""===V.hasInventory||(e.inventory_items&&e.inventory_items.length>0)===("true"===V.hasInventory))&&(""===V.hasImages||(e.images&&e.images.length>0)===("true"===V.hasImages))))});return 0===e.length?(0,er.jsx)("tr",{children:(0,er.jsx)("td",{colSpan:"8",className:"py-8 text-center text-gray-500",children:"No services found matching filters. Create your first service above."})}):e.map((e,t)=>(0,er.jsxs)("tr",{className:"".concat(t%2===0?"bg-white":"bg-gray-50"," hover:bg-gray-100 transition-colors"),children:[(0,er.jsx)("td",{className:"py-3 px-4",children:e.images&&e.images.length>0?(0,er.jsx)("img",{src:$e(e.images[0].image_url),alt:e.name,className:"w-16 h-16 object-cover rounded border"}):(0,er.jsx)("div",{className:"w-16 h-16 bg-gray-200 rounded border flex items-center justify-center text-xs text-gray-400",children:"No Image"})}),(0,er.jsx)("td",{className:"py-3 px-4 font-semibold",children:e.name}),(0,er.jsx)("td",{className:"py-3 px-4",children:e.description}),(0,er.jsxs)("td",{className:"py-3 px-4 text-right font-semibold",children:["\u20b9",e.charges]}),(0,er.jsx)("td",{className:"py-3 px-4 text-center text-sm",children:e.average_completion_time||(0,er.jsx)("span",{className:"text-gray-400",children:"-"})}),(0,er.jsx)("td",{className:"py-3 px-4 text-center",children:(0,er.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat(e.is_visible_to_guest?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.is_visible_to_guest?"Visible":"Hidden"})}),(0,er.jsx)("td",{className:"py-3 px-4 text-center",children:e.inventory_items&&e.inventory_items.length>0?(0,er.jsxs)("span",{className:"px-2 py-1 rounded text-xs font-semibold bg-indigo-100 text-indigo-800",children:[e.inventory_items.length," items"]}):(0,er.jsx)("span",{className:"text-gray-400 text-sm",children:"-"})}),(0,er.jsx)("td",{className:"py-3 px-4 text-center",children:(0,er.jsxs)("div",{className:"flex flex-wrap gap-2 justify-center",children:[(0,er.jsx)("button",{onClick:()=>{return f({name:(t=e).name||"",description:t.description||"",charges:void 0!==t.charges&&null!==t.charges?t.charges.toString():"",is_visible_to_guest:!!t.is_visible_to_guest,average_completion_time:t.average_completion_time||""}),A((t.inventory_items||[]).map(e=>({inventory_item_id:e.id,quantity:e.quantity||1}))),j(t.images||[]),N([]),x([]),v([]),ne(t.id),void window.scrollTo({top:0,behavior:"smooth"});var t},className:"px-3 py-1 rounded text-sm font-medium bg-blue-500 hover:bg-blue-600 text-white",children:"Edit"}),(0,er.jsx)("button",{onClick:()=>(async(e,t)=>{try{await Ia.patch("/services/".concat(e,"/visibility"),{is_visible_to_guest:!t}),We()}catch(r){console.error("Failed to toggle service visibility",r),alert("Failed to update service visibility. Please try again.")}})(e.id,e.is_visible_to_guest),className:"px-3 py-1 rounded text-sm font-medium transition-colors ".concat(e.is_visible_to_guest?"bg-yellow-500 hover:bg-yellow-600 text-white":"bg-green-500 hover:bg-green-600 text-white"),children:e.is_visible_to_guest?"Hide":"Show"}),(0,er.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this service? It will be marked as inactive."))try{const t=d.find(t=>t.id===e);if(!t)return void alert("Service not found");const r=new FormData;if(r.append("name",t.name),r.append("description",t.description),r.append("charges",t.charges),r.append("is_visible_to_guest",t.is_visible_to_guest?"true":"false"),r.append("is_active","false"),t.average_completion_time&&r.append("average_completion_time",t.average_completion_time),t.inventory_items&&t.inventory_items.length>0){const e=t.inventory_items.map(e=>({inventory_item_id:e.id,quantity:e.quantity||1}));r.append("inventory_items",JSON.stringify(e))}await Ia.put("/services/".concat(e),r,{headers:{"Content-Type":"multipart/form-data"}}),re===e&&Ze(),We(),alert("Service has been marked as inactive.")}catch(n){var t,r;console.error("Failed to delete service",n);const e=(null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||n.message||"Unknown error";alert("Failed to delete service: ".concat(e))}})(e.id),className:"px-3 py-1 rounded text-sm font-medium bg-red-500 hover:bg-red-600 text-white",children:"Delete"})]})})]},e.id))})()})]})})})]}),"items"===Oe&&(0,er.jsxs)("div",{className:"space-y-6",children:[(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,er.jsxs)(L$,{title:"Total Items Used",className:"bg-gradient-to-br from-blue-500 to-blue-700 text-white",children:[(0,er.jsx)("div",{className:"text-3xl font-bold",children:st.overallInventoryUsage.length}),(0,er.jsx)("p",{className:"text-sm opacity-90 mt-1",children:"Unique items"})]}),(0,er.jsxs)(L$,{title:"Total Quantity",className:"bg-gradient-to-br from-green-500 to-green-700 text-white",children:[(0,er.jsx)("div",{className:"text-3xl font-bold",children:st.overallInventoryUsage.reduce((e,t)=>e+t.quantity_used,0).toFixed(1)}),(0,er.jsx)("p",{className:"text-sm opacity-90 mt-1",children:"Total consumed"})]}),(0,er.jsxs)(L$,{title:"Total Cost",className:"bg-gradient-to-br from-purple-500 to-purple-700 text-white",children:[(0,er.jsxs)("div",{className:"text-3xl font-bold",children:["\u20b9",st.overallInventoryUsage.reduce((e,t)=>e+t.total_cost,0).toFixed(2)]}),(0,er.jsx)("p",{className:"text-sm opacity-90 mt-1",children:"Inventory cost"})]}),(0,er.jsxs)(L$,{title:"Services Using Items",className:"bg-gradient-to-br from-orange-500 to-orange-700 text-white",children:[(0,er.jsx)("div",{className:"text-3xl font-bold",children:new Set(st.overallInventoryUsage.flatMap(e=>e.services_used_in||[])).size}),(0,er.jsx)("p",{className:"text-sm opacity-90 mt-1",children:"Active services"})]})]}),(0,er.jsx)(L$,{title:"Filters",children:(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,er.jsx)("input",{type:"text",placeholder:"Search by item name or code...",value:G.search,onChange:e=>K(Be(Be({},G),{},{search:e.target.value})),className:"border p-2 rounded-lg"}),(0,er.jsxs)("select",{value:G.service,onChange:e=>K(Be(Be({},G),{},{service:e.target.value})),className:"border p-2 rounded-lg",children:[(0,er.jsx)("option",{value:"",children:"All Services"}),d.map(e=>(0,er.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,er.jsx)("button",{onClick:()=>K({search:"",service:"",category:""}),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg font-medium",children:"Clear Filters"})]})}),(0,er.jsx)(L$,{title:"Inventory Items Used with Services",children:(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full border border-gray-200 rounded-lg",children:[(0,er.jsx)("thead",{className:"bg-gray-100 text-gray-700 uppercase tracking-wider",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Item Name"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Item Code"}),(0,er.jsx)("th",{className:"py-3 px-4 text-center",children:"Total Quantity"}),(0,er.jsx)("th",{className:"py-3 px-4 text-center",children:"Unit"}),(0,er.jsx)("th",{className:"py-3 px-4 text-center",children:"Unit Price"}),(0,er.jsx)("th",{className:"py-3 px-4 text-right",children:"Total Cost (\u20b9)"}),(0,er.jsx)("th",{className:"py-3 px-4 text-center",children:"Used In"}),(0,er.jsx)("th",{className:"py-3 px-4 text-center",children:"Assignments"})]})}),(0,er.jsx)("tbody",{children:(()=>{const e=st.overallInventoryUsage.filter(e=>{var t;return!!(!G.search||e.name.toLowerCase().includes(G.search.toLowerCase())||null!==(t=e.item_code)&&void 0!==t&&t.toLowerCase().includes(G.search.toLowerCase()))&&!(G.service&&!e.services_used_in.includes(parseInt(G.service)))});return 0===e.length?(0,er.jsx)("tr",{children:(0,er.jsx)("td",{colSpan:"8",className:"py-8 text-center text-gray-500",children:"No items found matching filters"})}):e.map((e,t)=>(0,er.jsxs)("tr",{className:"".concat(t%2===0?"bg-white":"bg-gray-50"," hover:bg-gray-100 transition-colors"),children:[(0,er.jsx)("td",{className:"py-3 px-4 font-semibold",children:e.name}),(0,er.jsx)("td",{className:"py-3 px-4 text-gray-600",children:e.item_code||"-"}),(0,er.jsx)("td",{className:"py-3 px-4 text-center font-semibold text-blue-600",children:e.quantity_used.toFixed(2)}),(0,er.jsx)("td",{className:"py-3 px-4 text-center text-gray-600",children:e.unit}),(0,er.jsxs)("td",{className:"py-3 px-4 text-center",children:["\u20b9",e.unit_price.toFixed(2)]}),(0,er.jsxs)("td",{className:"py-3 px-4 text-right font-semibold text-green-600",children:["\u20b9",e.total_cost.toFixed(2)]}),(0,er.jsx)("td",{className:"py-3 px-4 text-center",children:(0,er.jsxs)("div",{className:"flex flex-wrap gap-1 justify-center",children:[e.services_used_in&&e.services_used_in.length>0?e.services_used_in.slice(0,2).map(e=>{const t=d.find(t=>t.id===e);return t?(0,er.jsx)("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 rounded text-xs",children:t.name},e):null}):null,e.services_count>2&&(0,er.jsxs)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded text-xs",children:["+",e.services_count-2," more"]})]})}),(0,er.jsx)("td",{className:"py-3 px-4 text-center",children:(0,er.jsx)("span",{className:"px-3 py-1 bg-indigo-100 text-indigo-800 rounded-full text-sm font-medium",children:e.assignments_count})})]},e.id))})()})]})})})]}),"assign"===Oe&&(0,er.jsxs)("div",{className:"space-y-6",children:[(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,er.jsxs)(L$,{title:"Total Assigned",className:"bg-gradient-to-br from-blue-500 to-blue-700 text-white",children:[(0,er.jsx)("div",{className:"text-3xl font-bold",children:ot}),(0,er.jsx)("p",{className:"text-sm opacity-90 mt-1",children:"All assignments"})]}),(0,er.jsxs)(L$,{title:"Pending",className:"bg-gradient-to-br from-yellow-400 to-yellow-600 text-white",children:[(0,er.jsx)("div",{className:"text-3xl font-bold",children:ct}),(0,er.jsx)("p",{className:"text-sm opacity-90 mt-1",children:"Awaiting completion"})]}),(0,er.jsxs)(L$,{title:"In Progress",className:"bg-gradient-to-br from-orange-500 to-orange-700 text-white",children:[(0,er.jsx)("div",{className:"text-3xl font-bold",children:ot-ct-lt}),(0,er.jsx)("p",{className:"text-sm opacity-90 mt-1",children:"Currently active"})]}),(0,er.jsxs)(L$,{title:"Completed",className:"bg-gradient-to-br from-green-500 to-green-700 text-white",children:[(0,er.jsx)("div",{className:"text-3xl font-bold",children:lt}),(0,er.jsx)("p",{className:"text-sm opacity-90 mt-1",children:"Finished services"})]})]}),(0,er.jsx)(L$,{title:"Assign New Service",children:(0,er.jsxs)("div",{className:"space-y-3",children:[(0,er.jsxs)("select",{value:C.service_id,onChange:e=>(async e=>{if(!e)return D(null),E(Be(Be({},C),{},{service_id:e})),Ke({}),void He({});try{let t=null;const r=d.find(t=>t.id===parseInt(e));if(r&&r.inventory_items&&r.inventory_items.length>0)t=r;else{const n=((await Ia.get("/services?limit=50")).data||[]).find(t=>t.id===parseInt(e));n?(t=n,u(t=>{const r=[...t],a=r.findIndex(t=>t.id===parseInt(e));return a>=0&&(r[a]=n),r})):r&&(t=r)}D(t),E(Be(Be({},C),{},{service_id:e})),P([]),t&&t.inventory_items&&t.inventory_items.length>0?(Ke({}),Qe(t.inventory_items)):(Ke({}),He({}))}catch(t){console.error("Failed to fetch service details",t);const r=d.find(t=>t.id===parseInt(e));D(r||null),P([]),He({}),Ke({})}})(e.target.value),className:"w-full border p-3 rounded-lg",children:[(0,er.jsx)("option",{value:"",children:"Select Service"}),d.map(e=>(0,er.jsx)("option",{value:e.id,children:e.name},e.id))]}),O&&(0,er.jsxs)("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,er.jsx)("h3",{className:"font-semibold text-lg text-gray-800 mb-3",children:"Service Details"}),(0,er.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("span",{className:"font-medium text-gray-700",children:"Name:"}),(0,er.jsx)("span",{className:"ml-2 text-gray-900",children:O.name})]}),O.description&&(0,er.jsxs)("div",{children:[(0,er.jsx)("span",{className:"font-medium text-gray-700",children:"Description:"}),(0,er.jsx)("p",{className:"ml-2 text-gray-900 mt-1",children:O.description})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("span",{className:"font-medium text-gray-700",children:"Charges:"}),(0,er.jsxs)("span",{className:"ml-2 text-gray-900 font-semibold",children:["\u20b9",O.charges]})]}),O.images&&O.images.length>0&&(0,er.jsxs)("div",{className:"mt-2",children:[(0,er.jsx)("span",{className:"font-medium text-gray-700",children:"Images:"}),(0,er.jsx)("div",{className:"flex gap-2 mt-2",children:O.images.slice(0,3).map((e,t)=>(0,er.jsx)("img",{src:$e(e.image_url),alt:"".concat(O.name," ").concat(t+1),className:"w-20 h-20 object-cover rounded border"},t))})]})]}),O.inventory_items&&O.inventory_items.length>0&&(0,er.jsxs)("div",{className:"mt-4 pt-4 border-t border-blue-300",children:[(0,er.jsx)("h4",{className:"font-semibold text-md text-gray-800 mb-2",children:"Inventory Items Needed:"}),(0,er.jsx)("div",{className:"space-y-2",children:O.inventory_items.map((e,t)=>{var r;return(0,er.jsxs)("div",{className:"flex flex-col p-3 bg-white rounded border border-blue-200",children:[(0,er.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,er.jsxs)("div",{className:"flex-1",children:[(0,er.jsx)("span",{className:"font-medium text-gray-800",children:e.name}),e.item_code&&(0,er.jsxs)("span",{className:"ml-2 text-sm text-gray-600",children:["(",e.item_code,")"]})]}),(0,er.jsxs)("div",{className:"text-right",children:[(0,er.jsxs)("span",{className:"text-sm text-gray-600",children:[e.quantity," ",e.unit]}),e.unit_price>0&&(0,er.jsxs)("span",{className:"ml-2 text-sm text-gray-500",children:["@ \u20b9",e.unit_price,"/",e.unit]})]})]}),(0,er.jsxs)("div",{className:"mt-1",children:[(0,er.jsx)("label",{className:"text-xs text-gray-600 block mb-1",children:"Source Location:"}),(0,er.jsxs)("select",{className:"text-sm border rounded p-1 w-full ".concat(Ge[e.id]?"bg-gray-50 border-gray-300":"border-red-300 bg-red-50"),value:Ge[e.id]||"",onChange:t=>Ke(r=>Be(Be({},r),{},{[e.id]:parseInt(t.target.value)})),children:[(0,er.jsx)("option",{value:"",children:"-- Select Source --"}),(null===(r=Ve[e.id])||void 0===r?void 0:r.length)>0?Ve[e.id].map(e=>(0,er.jsxs)("option",{value:e.location_id,children:[e.location_name," (Avl: ",e.quantity,")"]},e.location_id)):Ye?(0,er.jsx)("option",{value:"",disabled:!0,children:"Loading stocks..."}):(0,er.jsx)("option",{value:"",disabled:!0,children:"No stock available"})]}),!Ge[e.id]&&(0,er.jsx)("p",{className:"text-xs text-red-500 mt-1",children:"Please select a source location"})]})]},t)})})]}),(!O.inventory_items||0===O.inventory_items.length)&&(0,er.jsx)("div",{className:"mt-4 pt-4 border-t border-blue-300",children:(0,er.jsx)("p",{className:"text-sm text-gray-600 italic",children:"No inventory items required for this service."})})]}),(0,er.jsxs)("select",{value:C.employee_id,onChange:e=>E(Be(Be({},C),{},{employee_id:e.target.value})),className:"w-full border p-3 rounded-lg",children:[(0,er.jsx)("option",{value:"",children:"Select Employee"}),z.map(e=>(0,er.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,er.jsxs)("select",{value:C.room_id,onChange:e=>E(Be(Be({},C),{},{room_id:e.target.value})),className:"w-full border p-3 rounded-lg",children:[(0,er.jsx)("option",{value:"",children:"Select Room"}),0===I.length?(0,er.jsx)("option",{value:"",disabled:!0,children:"No checked-in rooms available"}):I.map(e=>(0,er.jsxs)("option",{value:e.id,children:["Room ",e.number]},e.id))]}),(0,er.jsxs)("select",{value:C.status,onChange:e=>E(Be(Be({},C),{},{status:e.target.value})),className:"w-full border p-3 rounded-lg",children:[(0,er.jsx)("option",{value:"pending",children:"Pending"}),(0,er.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,er.jsx)("option",{value:"completed",children:"Completed"})]}),(0,er.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Extra Inventory Items (Optional - Additional items beyond service requirements)"}),(0,er.jsx)("button",{type:"button",onClick:()=>{P([...T,{inventory_item_id:"",quantity:1}])},className:"mb-2 text-sm bg-gray-200 hover:bg-gray-300 text-gray-700 px-3 py-1 rounded",children:"+ Add Extra Inventory Item"}),T.map((e,t)=>{var r;return(0,er.jsxs)("div",{className:"flex flex-col gap-2 mb-2 p-2 border rounded bg-gray-50 border-gray-200",children:[(0,er.jsxs)("div",{className:"flex gap-2 items-end",children:[(0,er.jsxs)("div",{className:"flex-1",children:[(0,er.jsx)("label",{className:"text-xs text-gray-600 block mb-1",children:"Item"}),(0,er.jsxs)("select",{value:e.inventory_item_id,onChange:e=>tt(t,"inventory_item_id",e.target.value),className:"w-full border p-2 rounded-lg text-sm",children:[(0,er.jsx)("option",{value:"",children:"Select Item"}),_.map(e=>(0,er.jsxs)("option",{value:e.id,children:[e.name," ",e.item_code?"(".concat(e.item_code,")"):""," - ",e.unit]},e.id))]})]}),(0,er.jsxs)("div",{className:"w-24",children:[(0,er.jsx)("label",{className:"text-xs text-gray-600 block mb-1",children:"Qty"}),(0,er.jsx)("input",{type:"number",value:e.quantity,onChange:e=>tt(t,"quantity",e.target.value),placeholder:"Qty",className:"w-full border p-2 rounded-lg text-sm"})]}),(0,er.jsx)("button",{type:"button",onClick:()=>(e=>{P(T.filter((t,r)=>r!==e))})(t),className:"bg-red-500 hover:bg-red-600 text-white px-3 py-2 rounded text-sm mb-[2px]",children:"Remove"})]}),e.inventory_item_id&&(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs text-gray-600 block mb-1",children:"Source Location:"}),(0,er.jsxs)("select",{className:"text-sm border rounded p-1 w-full ".concat(e.source_location_id?"bg-white border-gray-300":"border-red-300 bg-red-50"),value:e.source_location_id||"",onChange:e=>tt(t,"source_location_id",e.target.value),children:[(0,er.jsx)("option",{value:"",children:"-- Select Source --"}),(null===(r=Ve[e.inventory_item_id])||void 0===r?void 0:r.length)>0?Ve[e.inventory_item_id].map(e=>(0,er.jsxs)("option",{value:e.location_id,children:[e.location_name," (Avl: ",e.quantity,")"]},e.location_id)):Ye?(0,er.jsx)("option",{value:"",disabled:!0,children:"Loading stocks..."}):(0,er.jsx)("option",{value:"",disabled:!0,children:"No stock available"})]})]})]},t)}),0===T.length&&(0,er.jsx)("p",{className:"text-xs text-gray-500 italic",children:"No extra items added. Service will use only its default inventory items."})]}),(0,er.jsx)("button",{onClick:async()=>{if(C.service_id&&C.employee_id&&C.room_id)try{const e={service_id:parseInt(C.service_id),employee_id:parseInt(C.employee_id),room_id:parseInt(C.room_id)},t=T.filter(e=>e.inventory_item_id&&e.quantity>0);t.length>0&&(e.extra_inventory_items=t.map(e=>({inventory_item_id:parseInt(e.inventory_item_id),quantity:e.quantity})));let r=[];Object.keys(Ge).length>0&&(r=Object.entries(Ge).map(e=>{let[t,r]=e;return{item_id:parseInt(t),location_id:parseInt(r)}})),T.forEach(e=>{e.inventory_item_id&&e.source_location_id&&r.push({item_id:parseInt(e.inventory_item_id),location_id:parseInt(e.source_location_id)})}),r.length>0&&(e.inventory_source_selections=r);const n=await Ia.post("/services/assign",e);alert("Service assigned successfully!"),n.data&&m(e=>[n.data,...e]),E({service_id:"",employee_id:"",room_id:"",status:"pending"}),D(null),P([]),We(!1)}catch(r){var e,t;console.error("Failed to assign service",r),console.error("Error details:",{message:r.message,response:r.response,config:r.config,isNetworkError:r.isNetworkError,isTimeout:r.isTimeout});let n="Failed to assign service. ";r.isNetworkError?n+="Network error - please check if the backend server is running on port 8011.":r.isTimeout?n+="Request timed out - the server is taking too long to respond.":null!==(e=r.response)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.detail?n=r.response.data.detail:r.message&&(n+=r.message),alert("Error: ".concat(n))}else alert("Please select service, employee, and room")},className:"w-full mt-3 bg-green-600 hover:bg-green-700 text-white p-3 rounded-lg shadow-lg font-semibold",children:"Assign Service"})]})}),(0,er.jsxs)(L$,{title:"Assigned Services",children:[(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-4",children:[(0,er.jsxs)("select",{value:q.room,onChange:e=>W(Be(Be({},q),{},{room:e.target.value})),className:"border p-2 rounded-lg",children:[(0,er.jsx)("option",{value:"",children:"All Rooms"}),h.map(e=>{const t=e.room;return t?(0,er.jsxs)("option",{value:t.id,children:["Room ",t.number]},t.id):null}).filter(Boolean)]}),(0,er.jsxs)("select",{value:q.employee,onChange:e=>W(Be(Be({},q),{},{employee:e.target.value})),className:"border p-2 rounded-lg",children:[(0,er.jsx)("option",{value:"",children:"All Employees"}),z.map(e=>(0,er.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,er.jsxs)("select",{value:q.status,onChange:e=>W(Be(Be({},q),{},{status:e.target.value})),className:"border p-2 rounded-lg",children:[(0,er.jsx)("option",{value:"",children:"All Statuses"}),(0,er.jsx)("option",{value:"pending",children:"Pending"}),(0,er.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,er.jsx)("option",{value:"completed",children:"Completed"})]}),(0,er.jsx)("input",{type:"date",value:q.from,onChange:e=>W(Be(Be({},q),{},{from:e.target.value})),className:"border p-2 rounded-lg"}),(0,er.jsx)("input",{type:"date",value:q.to,onChange:e=>W(Be(Be({},q),{},{to:e.target.value})),className:"border p-2 rounded-lg"})]}),Y?(0,er.jsx)("div",{className:"flex justify-center items-center h-48",children:(0,er.jsx)(I$,{size:48,className:"animate-spin text-indigo-500"})}):(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full border border-gray-200 rounded-lg",children:[(0,er.jsx)("thead",{className:"bg-gray-100 text-gray-700 uppercase tracking-wider",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Service"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Employee"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Room"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Status"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Avg. Completion Time"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Assigned At"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Status Changed"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Completed Time"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Actions"})]})}),(0,er.jsx)("tbody",{children:at.map((e,t)=>{var r,n,a,s;return(0,er.jsxs)("tr",{className:"".concat(t%2===0?"bg-white":"bg-gray-50"," hover:bg-gray-100 transition-colors"),children:[(0,er.jsx)("td",{className:"p-3 border-t border-gray-200",children:null===(r=e.service)||void 0===r?void 0:r.name}),(0,er.jsx)("td",{className:"p-3 border-t border-gray-200",children:(0,er.jsxs)("div",{className:"flex items-center gap-2",children:[(0,er.jsx)("span",{children:null===(n=e.employee)||void 0===n?void 0:n.name}),(0,er.jsx)("button",{onClick:()=>{return t=e,void(0!==z.length?ke({assignedService:t,employeeId:t.employee_id?t.employee_id.toString():"",isReassignment:!0}):alert("No employees available. Please add employees first."));var t},className:"text-xs bg-blue-50 text-blue-600 hover:bg-blue-100 px-2 py-1 rounded border border-blue-200 transition-colors",title:"Reassign to different employee",children:"Change"})]})}),(0,er.jsxs)("td",{className:"p-3 border-t border-gray-200",children:["Room ",null===(a=e.room)||void 0===a?void 0:a.number]}),(0,er.jsx)("td",{className:"p-3 border-t border-gray-200",children:(0,er.jsxs)("select",{value:e.status,onChange:t=>(async(e,t)=>{const r=(new Date).toISOString();nt(t=>Be(Be({},t),{},{[e]:r}));try{if("completed"===t)try{const t=h.find(t=>t.id===e);if(t&&t.employee){const r=((await Ia.get("/services/employee-inventory/".concat(t.employee.id,"?status=assigned,in_use,completed"))).data||[]).filter(t=>t.assigned_service_id===e&&t.balance_quantity>0);if(r.length>0){ce(r),oe(e);const t={},n={};return r.forEach(e=>{var r,a,s,i,o,l;t[e.id]=0;let c=null;const d=e.notes?e.notes.match(/\(LocID:\s*(\d+)\)/):null,u=d?parseInt(d[1]):null;if(u&&(c=ye.find(e=>e.id===u)),!c&&(null===(r=e.item)||void 0===r||null===(a=r.stock_locations)||void 0===a?void 0:a.length)>0&&null!==(s=e.item)&&void 0!==s&&s.location){const t=e.item.stock_locations.find(t=>{var r,n;return(null===(r=t.name)||void 0===r?void 0:r.trim().toLowerCase())===(null===(n=e.item.location)||void 0===n?void 0:n.trim().toLowerCase())||t.location_code===e.item.location});t&&(c=ye.find(e=>e.id===t.id))}if(!c&&(null===(i=e.item)||void 0===i||null===(o=i.stock_locations)||void 0===o?void 0:o.length)>0){const t=e.item.stock_locations[0];c=ye.find(e=>e.id===t.id)}!c&&null!==(l=e.item)&&void 0!==l&&l.location&&(c=ye.find(t=>{var r,n;return(null===(r=t.name)||void 0===r?void 0:r.trim().toLowerCase())===(null===(n=e.item.location)||void 0===n?void 0:n.trim().toLowerCase())||t.location_code===e.item.location})),c||(c=ye.find(e=>"WAREHOUSE"===e.location_type||"CENTRAL_WAREHOUSE"===e.location_type||!0===e.is_inventory_point)),c&&(n[e.id]=c.id)}),ue(t),void xe(n)}}}catch(s){console.warn("Could not fetch inventory assignments:",s)}await Ia.patch("/services/assigned/".concat(e),{status:t}),m(r=>r.map(r=>r.id===e?Be(Be({},r),{},{status:t}):r)),We(!1)}catch(i){var n,a;console.error("Failed to update status:",i),alert("Failed to update status: ".concat((null===(n=i.response)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.detail)||i.message))}})(e.id,t.target.value),className:"border p-2 rounded-lg bg-white",children:[(0,er.jsx)("option",{value:"pending",children:"Pending"}),(0,er.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,er.jsx)("option",{value:"completed",children:"Completed"})]})}),(0,er.jsx)("td",{className:"p-3 border-t border-gray-200 text-sm",children:null!==(s=e.service)&&void 0!==s&&s.average_completion_time?(0,er.jsx)("span",{className:"text-indigo-600 font-medium",children:e.service.average_completion_time}):(0,er.jsx)("span",{className:"text-gray-400 italic",children:"Not set"})}),(0,er.jsx)("td",{className:"p-3 border-t border-gray-200",children:e.assigned_at&&new Date(e.assigned_at).toLocaleString()}),(0,er.jsx)("td",{className:"p-3 border-t border-gray-200",children:rt[e.id]?(0,er.jsx)("span",{className:"text-blue-600 font-medium text-sm",children:new Date(rt[e.id]).toLocaleString()}):(0,er.jsx)("span",{className:"text-gray-400 italic text-sm",children:"Not changed"})}),(0,er.jsx)("td",{className:"p-3 border-t border-gray-200",children:e.last_used_at?(0,er.jsx)("span",{className:"text-green-600 font-medium",children:new Date(e.last_used_at).toLocaleString()}):(0,er.jsx)("span",{className:"text-gray-400 italic",children:"Never"})}),(0,er.jsx)("td",{className:"p-3 border-t border-gray-200",children:(0,er.jsxs)("div",{className:"flex gap-2",children:[(0,er.jsx)("button",{onClick:()=>(async e=>{try{var t,r;console.log("[DEBUG] Viewing assigned service:",e),console.log("[DEBUG] Service data:",e.service),console.log("[DEBUG] Inventory items in assigned service:",null===(t=e.service)||void 0===t?void 0:t.inventory_items);const a=(await Ia.get("/services?limit=50")).data||[],s=e.service_id||(null===(r=e.service)||void 0===r?void 0:r.id),i=a.find(e=>e.id===s);console.log("[DEBUG] Found service from API:",i),console.log("[DEBUG] Service inventory items from API:",null===i||void 0===i?void 0:i.inventory_items);let o=[],l=[];if(e.employee&&e.employee.id)try{const t=((await Ia.get("/services/employee-inventory/".concat(e.employee.id))).data||[]).filter(t=>t.assigned_service_id===e.id);o=t.filter(e=>"assigned"===e.status||"in_use"===e.status),l=t.filter(e=>e.quantity_returned>0),console.log("[DEBUG] Found assigned inventory items:",o),console.log("[DEBUG] Found returned items:",l)}catch(n){console.warn("Could not fetch inventory items:",n)}i?(se(Be(Be({},e),{},{service:Be(Be({},i),{},{inventory_items:o.length>0?o.map(e=>{var t;return{id:e.item_id,name:e.item_name,item_code:e.item_code,quantity:e.quantity_assigned,unit:e.unit,unit_price:(null===(t=e.item)||void 0===t?void 0:t.unit_price)||0}}):i.inventory_items})})),je(l)):(console.warn("[WARNING] Service not found, using assigned service data"),se(e),je(l))}catch(a){console.error("Failed to fetch service details:",a),se(e),je([])}})(e),className:"px-3 py-1 rounded text-sm font-medium bg-blue-500 hover:bg-blue-600 text-white",children:"View"}),(0,er.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Remove this assigned service? This cannot be undone."))try{await Ia.delete("/services/assigned/".concat(e)),m(t=>t.filter(t=>t.id!==e)),We(!1)}catch(n){var t,r;console.error("Failed to delete assigned service:",n);const e=(null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||n.message||"Unknown error";alert("Failed to delete assigned service: ".concat(e))}})(e.id),className:"px-3 py-1 rounded text-sm font-medium bg-red-500 hover:bg-red-600 text-white",children:"Delete"})]})})]},e.id)})})]})})]})]}),"requests"===Oe&&(0,er.jsxs)("div",{className:"space-y-6",children:[(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,er.jsxs)(L$,{title:"Total Requests",className:"bg-gradient-to-br from-blue-500 to-blue-700 text-white",children:[(0,er.jsx)("div",{className:"text-3xl font-bold",children:Ie.length}),(0,er.jsx)("p",{className:"text-sm opacity-90 mt-1",children:"All requests"})]}),(0,er.jsxs)(L$,{title:"Pending",className:"bg-gradient-to-br from-yellow-400 to-yellow-600 text-white",children:[(0,er.jsx)("div",{className:"text-3xl font-bold",children:Ie.filter(e=>"pending"===e.status).length}),(0,er.jsx)("p",{className:"text-sm opacity-90 mt-1",children:"Awaiting action"})]}),(0,er.jsxs)(L$,{title:"In Progress",className:"bg-gradient-to-br from-orange-500 to-orange-700 text-white",children:[(0,er.jsx)("div",{className:"text-3xl font-bold",children:Ie.filter(e=>"in_progress"===e.status).length}),(0,er.jsx)("p",{className:"text-sm opacity-90 mt-1",children:"Being processed"})]}),(0,er.jsxs)(L$,{title:"Completed",className:"bg-gradient-to-br from-green-500 to-green-700 text-white",children:[(0,er.jsx)("div",{className:"text-3xl font-bold",children:Ie.filter(e=>"completed"===e.status).length}),(0,er.jsx)("p",{className:"text-sm opacity-90 mt-1",children:"Finished"})]})]}),(0,er.jsx)(L$,{title:"Service Requests",children:Y?(0,er.jsx)("div",{className:"flex justify-center items-center h-48",children:(0,er.jsx)(I$,{size:48,className:"animate-spin text-indigo-500"})}):(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full border border-gray-200 rounded-lg",children:[(0,er.jsx)("thead",{className:"bg-gray-100 text-gray-700 uppercase tracking-wider",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"ID"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Room"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Food Order"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Request Type"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Description"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Employee"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Status"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Avg. Completion Time"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Created At"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Completed At"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Actions"})]})}),(0,er.jsx)("tbody",{children:0===Ie.length?(0,er.jsx)("tr",{children:(0,er.jsx)("td",{colSpan:"11",className:"py-8 text-center text-gray-500",children:"No service requests found"})}):[...Ie].sort((e,t)=>{var r,n;const a={pending:0,in_progress:1,inventory_checked:2,completed:3,cancelled:4},s=null!==(r=a[e.status])&&void 0!==r?r:5,i=null!==(n=a[t.status])&&void 0!==n?n:5;return s!==i?s-i:new Date(t.created_at||0)-new Date(e.created_at||0)}).map((e,t)=>{var r;const n=e.is_checkout_request||e.id>1e6,a=n?e.checkout_request_id||e.id-1e6:null;return(0,er.jsxs)("tr",{className:"".concat(t%2===0?"bg-white":"bg-gray-50"," hover:bg-gray-100 transition-colors ").concat(n?"bg-yellow-50":""),children:[(0,er.jsxs)("td",{className:"p-3 border-t border-gray-200",children:["#",n?a:e.id,n&&(0,er.jsx)("span",{className:"ml-2 text-xs text-yellow-600",children:"(Checkout)"})]}),(0,er.jsxs)("td",{className:"p-3 border-t border-gray-200",children:[e.room_number?"Room ".concat(e.room_number):"Room ID: ".concat(e.room_id),n&&e.guest_name&&(0,er.jsxs)("div",{className:"text-xs text-gray-600 mt-1",children:["Guest: ",e.guest_name]})]}),(0,er.jsx)("td",{className:"p-3 border-t border-gray-200",children:"cleaning"===e.request_type?(0,er.jsx)("span",{className:"text-sm text-orange-600 font-medium",children:"\ud83e\uddf9 Cleaning Service"}):"refill"===e.request_type?(0,er.jsx)("span",{className:"text-sm text-purple-600 font-medium",children:"\ud83d\udd04 Refill Service"}):n?(0,er.jsx)("span",{className:"text-sm text-gray-600",children:"Checkout Verification"}):(0,er.jsx)("div",{className:"text-sm",children:e.food_order_id?(0,er.jsxs)(er.Fragment,{children:[(0,er.jsxs)("div",{children:["Order #",e.food_order_id]}),e.food_order_amount&&(0,er.jsxs)("div",{className:"text-gray-600",children:["\u20b9",e.food_order_amount.toFixed(2)]}),e.food_order_status&&(0,er.jsxs)("div",{className:"flex flex-col gap-1 mt-1",children:[(0,er.jsx)("span",{className:"px-2 py-1 rounded text-xs w-fit ".concat("completed"===e.food_order_status?"bg-green-100 text-green-800":"pending"===e.food_order_status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:e.food_order_status}),"cancelled"!==e.food_order_status&&(0,er.jsx)("button",{onClick:()=>(e=>{Re({orderId:e.food_order_id,amount:e.food_order_amount,paymentMethod:"cash"})})(e),className:"text-xs bg-blue-50 text-blue-600 hover:bg-blue-100 px-2 py-1 rounded border border-blue-200 transition-colors text-left w-fit",children:"Mark as Paid"})]})]}):(0,er.jsx)("span",{className:"text-gray-400 text-xs",children:"No food order"})})}),(0,er.jsx)("td",{className:"p-3 border-t border-gray-200",children:(0,er.jsx)("span",{className:"px-2 py-1 rounded text-xs capitalize ".concat("cleaning"===e.request_type?"bg-orange-100 text-orange-800":"refill"===e.request_type?"bg-purple-100 text-purple-800":n?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"),children:"cleaning"===e.request_type?"\ud83e\uddf9 cleaning":"refill"===e.request_type?"\ud83d\udd04 refill":n?"checkout_verification":e.request_type||"delivery"})}),(0,er.jsx)("td",{className:"p-3 border-t border-gray-200",children:"refill"===e.request_type&&e.refill_data&&e.refill_data.length>0?(0,er.jsxs)("div",{className:"max-w-md",children:[(0,er.jsxs)("div",{className:"text-sm font-medium text-gray-700 mb-2",children:["Room ",e.room_number," - Refill Required"]}),(0,er.jsxs)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-2",children:[(0,er.jsx)("div",{className:"text-xs font-semibold text-purple-800 mb-1",children:"Items to Refill:"}),(0,er.jsxs)("table",{className:"w-full text-xs",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"border-b border-purple-200",children:[(0,er.jsx)("th",{className:"text-left py-1 text-purple-700",children:"Item"}),(0,er.jsx)("th",{className:"text-right py-1 text-purple-700",children:"Consumed"})]})}),(0,er.jsx)("tbody",{children:e.refill_data.map((e,t)=>(0,er.jsxs)("tr",{className:"border-b border-purple-100 last:border-0",children:[(0,er.jsxs)("td",{className:"py-1 text-gray-700",children:[e.item_name,e.item_code&&(0,er.jsxs)("span",{className:"text-gray-500 ml-1",children:["(",e.item_code,")"]})]}),(0,er.jsxs)("td",{className:"text-right py-1 font-medium text-purple-700",children:[e.quantity_to_refill," ",e.unit]})]},t))})]})]})]}):(0,er.jsx)("div",{className:"max-w-xs truncate",title:e.description,children:e.description||"-"})}),(0,er.jsx)("td",{className:"p-3 border-t border-gray-200",children:e.employee_name||e.employee_id?(0,er.jsx)("span",{className:"text-sm",children:e.employee_name||"Employee #".concat(e.employee_id)}):(0,er.jsx)("span",{className:"text-gray-400 text-sm",children:"Not assigned"})}),(0,er.jsx)("td",{className:"p-3 border-t border-gray-200",children:n?(0,er.jsxs)("select",{value:e.status||"pending",onChange:t=>(async(e,t)=>{const r=e>1e6?e-1e6:e;try{"completed"===t?await yt(r):"in_progress"!==t&&"pending"!==t||(await Ia.put("/bill/checkout-request/".concat(r,"/status?status=").concat(t)),alert("Checkout request status updated to ".concat(t)),qe())}catch(s){var n,a;console.error("Failed to update checkout request status:",s);const e=(null===(n=s.response)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.detail)||s.message||"Unknown error";alert("Failed to update status: ".concat(e))}})(e.id,t.target.value),className:"border p-2 rounded-lg bg-white text-sm ".concat("completed"===e.status?"bg-green-50":"in_progress"===e.status?"bg-blue-50":"pending"===e.status?"bg-yellow-50":"bg-gray-50"),children:[(0,er.jsx)("option",{value:"pending",children:"Pending"}),(0,er.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,er.jsx)("option",{value:"completed",children:"Completed"})]}):(0,er.jsxs)("select",{value:e.status,onChange:t=>ht(e.id,t.target.value),className:"border p-2 rounded-lg bg-white text-sm ".concat("completed"===e.status?"bg-green-50":"in_progress"===e.status?"bg-yellow-50":"cancelled"===e.status?"bg-red-50":"bg-gray-50"),children:[(0,er.jsx)("option",{value:"pending",children:"Pending"}),(0,er.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,er.jsx)("option",{value:"completed",children:"Completed"}),(0,er.jsx)("option",{value:"cancelled",children:"Cancelled"})]})}),(0,er.jsx)("td",{className:"p-3 border-t border-gray-200 text-sm",children:null!==(r=e.service)&&void 0!==r&&r.average_completion_time?(0,er.jsx)("span",{className:"text-indigo-600 font-medium",children:e.service.average_completion_time}):(0,er.jsx)("span",{className:"text-gray-400 italic",children:"-"})}),(0,er.jsx)("td",{className:"p-3 border-t border-gray-200 text-sm",children:e.created_at?new Date(e.created_at).toLocaleString():"-"}),(0,er.jsx)("td",{className:"p-3 border-t border-gray-200 text-sm",children:e.completed_at?(0,er.jsx)("span",{className:"text-green-600",children:new Date(e.completed_at).toLocaleString()}):(0,er.jsx)("span",{className:"text-gray-400",children:"-"})}),(0,er.jsx)("td",{className:"p-3 border-t border-gray-200",children:(0,er.jsx)("div",{className:"flex gap-2",children:n?(0,er.jsx)(er.Fragment,{children:"pending"===e.status||"in_progress"===e.status||"inventory_checked"===e.status?(0,er.jsx)(er.Fragment,{children:e.employee_id?(0,er.jsx)("button",{onClick:()=>yt(a),className:"px-4 py-2 rounded-lg text-sm font-semibold bg-blue-600 hover:bg-blue-700 text-white shadow-md hover:shadow-lg transition-all duration-200",title:"View inventory details and verify",children:"\u2713 Verify Inventory"}):(0,er.jsx)("button",{onClick:()=>jt(e),className:"px-4 py-2 rounded-lg text-sm font-semibold bg-orange-500 hover:bg-orange-600 text-white shadow-md hover:shadow-lg transition-all duration-200",title:"Assign employee first before verification",children:"\u26a0 Assign Employee First"})}):"completed"===e.status?(0,er.jsx)("span",{className:"px-3 py-1 rounded text-sm font-medium bg-green-100 text-green-800",children:"\u2713 Completed"}):null}):(0,er.jsxs)(er.Fragment,{children:["pending"===e.status&&!e.employee_id&&(0,er.jsx)("button",{onClick:()=>jt(e),className:"px-3 py-1 rounded text-sm font-medium bg-green-500 hover:bg-green-600 text-white",title:"Quick assign service to this room",children:"Assign Service"}),(0,er.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this service request?"))try{await Ia.delete("/service-requests/".concat(e)),qe()}catch(n){var t,r;console.error("Failed to delete request:",n);const e=(null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||n.message||"Unknown error";alert("Failed to delete request: ".concat(e))}})(e.id),className:"px-3 py-1 rounded text-sm font-medium bg-red-500 hover:bg-red-600 text-white",children:"Delete"})]})})})]},e.id)})})]})})})]}),_e&&(0,er.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,er.jsx)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full",children:(0,er.jsxs)("div",{className:"p-6",children:[(0,er.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,er.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:_e.isReassignment?"Reassign Employee":_e.request&&(_e.request.is_checkout_request||_e.request.id>1e6||"checkout_verification"===_e.request.request_type||"checkout_settlement"===_e.request.request_type)?"Assign Employee to Checkout Verification":"Assign Employee"}),(0,er.jsx)("button",{onClick:()=>ke(null),className:"text-gray-400 hover:text-gray-600 text-2xl font-bold",children:"\xd7"})]}),(0,er.jsxs)("div",{className:"space-y-4",children:[_e.isReassignment?(0,er.jsxs)(er.Fragment,{children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Service"}),(0,er.jsx)("input",{type:"text",value:(null===(e=_e.assignedService)||void 0===e||null===(t=e.service)||void 0===t?void 0:t.name)||"N/A",disabled:!0,className:"w-full border p-3 rounded-lg bg-gray-100 text-gray-600"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Room"}),(0,er.jsx)("input",{type:"text",value:"Room ".concat((null===(r=_e.assignedService)||void 0===r||null===(n=r.room)||void 0===n?void 0:n.number)||"N/A"),disabled:!0,className:"w-full border p-3 rounded-lg bg-gray-100 text-gray-600"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Employee"}),(0,er.jsx)("input",{type:"text",value:(null===(s=_e.assignedService)||void 0===s||null===(i=s.employee)||void 0===i?void 0:i.name)||"N/A",disabled:!0,className:"w-full border p-3 rounded-lg bg-gray-100 text-gray-600"})]})]}):(0,er.jsx)(er.Fragment,{children:(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Room"}),(0,er.jsx)("input",{type:"text",value:"Room ".concat(_e.request.room_number||_e.request.room_id),disabled:!0,className:"w-full border p-3 rounded-lg bg-gray-100 text-gray-600"})]})}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[_e.isReassignment?"New Employee":"Select Employee"," ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsxs)("select",{value:_e.employeeId,onChange:e=>ke(Be(Be({},_e),{},{employeeId:e.target.value})),className:"w-full border p-3 rounded-lg focus:ring-2 focus:ring-indigo-400",children:[(0,er.jsx)("option",{value:"",children:"-- Select Employee --"}),z.map(e=>(0,er.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,er.jsxs)("div",{className:"mt-6 flex justify-end gap-3",children:[(0,er.jsx)("button",{onClick:()=>ke(null),className:"px-6 py-2 rounded-lg text-sm font-medium bg-gray-200 hover:bg-gray-300 text-gray-700",children:"Cancel"}),(0,er.jsx)("button",{onClick:async()=>{if(_e)if(_e.employeeId)try{if(_e.isReassignment&&_e.assignedService){const e=_e.assignedService,t=parseInt(_e.employeeId),r=z.find(e=>e.id===t);return m(n=>n.map(n=>n.id===e.id?Be(Be({},n),{},{employee_id:t,employee:r||n.employee}):n)),alert("Employee reassigned successfully!"),ke(null),void We(!1)}if(_e.request&&(_e.request.is_checkout_request||_e.request.id>1e6||"checkout_verification"===_e.request.request_type||"checkout_settlement"===_e.request.request_type))return _e.request.id&&await mt(_e.request.id,parseInt(_e.employeeId)),alert("Employee assigned to checkout verification successfully!"),ke(null),await qe(),void await We(!1);_e.request.id&&await mt(_e.request.id,parseInt(_e.employeeId)),alert("Employee assigned successfully!"),ke(null),await qe(),await We(!1)}catch(r){var e,t;console.error("Failed to assign service",r);let n="Failed to assign service. ";null!==(e=r.response)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.detail?n=r.response.data.detail:r.message&&(n+=r.message),alert("Error: ".concat(n))}else alert("Please select an employee")},className:"px-6 py-2 rounded-lg text-sm font-medium bg-indigo-600 hover:bg-indigo-700 text-white",children:_e.isReassignment?"Reassign Employee":"Assign Employee"})]})]})})}),ae&&(0,er.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,er.jsx)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:(0,er.jsxs)("div",{className:"p-6",children:[(0,er.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,er.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Assigned Service Details"}),(0,er.jsx)("button",{onClick:()=>se(null),className:"text-gray-500 hover:text-gray-700 text-2xl font-bold",children:"\xd7"})]}),(0,er.jsxs)("div",{className:"space-y-6",children:[ae.service&&(0,er.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,er.jsx)("h3",{className:"font-semibold text-lg text-gray-800 mb-3",children:"Service Information"}),(0,er.jsxs)("div",{className:"space-y-2",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("span",{className:"font-medium text-gray-700",children:"Name:"}),(0,er.jsx)("span",{className:"ml-2 text-gray-900",children:ae.service.name})]}),ae.service.description&&(0,er.jsxs)("div",{children:[(0,er.jsx)("span",{className:"font-medium text-gray-700",children:"Description:"}),(0,er.jsx)("p",{className:"ml-2 text-gray-900 mt-1",children:ae.service.description})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("span",{className:"font-medium text-gray-700",children:"Charges:"}),(0,er.jsxs)("span",{className:"ml-2 text-gray-900 font-semibold",children:["\u20b9",ae.service.charges]})]}),ae.service.images&&ae.service.images.length>0&&(0,er.jsxs)("div",{className:"mt-2",children:[(0,er.jsx)("span",{className:"font-medium text-gray-700",children:"Images:"}),(0,er.jsx)("div",{className:"flex gap-2 mt-2",children:ae.service.images.slice(0,3).map((e,t)=>(0,er.jsx)("img",{src:$e(e.image_url),alt:"".concat(ae.service.name," ").concat(t+1),className:"w-20 h-20 object-cover rounded border",onError:e=>{e.target.src="/placeholder-image.png"}},t))})]})]})]}),(0,er.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[(0,er.jsx)("h3",{className:"font-semibold text-lg text-gray-800 mb-3",children:"Assignment Information"}),(0,er.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("span",{className:"font-medium text-gray-700",children:"Employee:"}),(0,er.jsx)("span",{className:"ml-2 text-gray-900",children:(null===(o=ae.employee)||void 0===o?void 0:o.name)||"N/A"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("span",{className:"font-medium text-gray-700",children:"Room:"}),(0,er.jsxs)("span",{className:"ml-2 text-gray-900",children:["Room ",(null===(l=ae.room)||void 0===l?void 0:l.number)||"N/A"]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("span",{className:"font-medium text-gray-700",children:"Status:"}),(0,er.jsx)("span",{className:"ml-2 text-gray-900 capitalize",children:ae.status||"N/A"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("span",{className:"font-medium text-gray-700",children:"Assigned At:"}),(0,er.jsx)("span",{className:"ml-2 text-gray-900",children:ae.assigned_at?new Date(ae.assigned_at).toLocaleString():"N/A"})]}),ae.last_used_at&&(0,er.jsxs)("div",{children:[(0,er.jsx)("span",{className:"font-medium text-gray-700",children:"Completed Time:"}),(0,er.jsx)("span",{className:"ml-2 text-gray-900 font-semibold text-green-600",children:new Date(ae.last_used_at).toLocaleString()})]})]})]}),(e=>{const t=null===(e=ae.service)||void 0===e?void 0:e.inventory_items;return console.log("[DEBUG Modal] Inventory items check:",{hasService:!!ae.service,hasInventoryItems:!!t,inventoryItemsType:typeof t,inventoryItemsIsArray:Array.isArray(t),inventoryItemsLength:null===t||void 0===t?void 0:t.length,inventoryItemsValue:t}),t&&Array.isArray(t)&&t.length>0?(0,er.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,er.jsx)("h3",{className:"font-semibold text-lg text-gray-800 mb-3",children:"Inventory Items Needed"}),(0,er.jsx)("div",{className:"space-y-2",children:t.map((e,t)=>(0,er.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded border border-green-200",children:[(0,er.jsxs)("div",{className:"flex-1",children:[(0,er.jsx)("span",{className:"font-medium text-gray-800",children:e.name}),e.item_code&&(0,er.jsxs)("span",{className:"ml-2 text-sm text-gray-600",children:["(",e.item_code,")"]})]}),(0,er.jsxs)("div",{className:"text-right",children:[(0,er.jsxs)("span",{className:"text-sm text-gray-600",children:[e.quantity," ",e.unit]}),e.unit_price>0&&(0,er.jsxs)("span",{className:"ml-2 text-sm text-gray-500",children:["@ \u20b9",e.unit_price,"/",e.unit]})]})]},t))})]}):(0,er.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,er.jsxs)("p",{className:"text-sm text-gray-600 italic",children:["No inventory items required for this service.",t&&Array.isArray(t)&&0===t.length&&(0,er.jsx)("span",{className:"block mt-1 text-xs",children:"(Service has empty inventory_items array)"}),!t&&(0,er.jsx)("span",{className:"block mt-1 text-xs",children:"(Service has no inventory_items property)"})]})})})(),be&&be.length>0&&(0,er.jsxs)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[(0,er.jsx)("h3",{className:"font-semibold text-lg text-gray-800 mb-3",children:"Returned Inventory Items"}),(0,er.jsx)("div",{className:"space-y-2",children:be.map((e,t)=>{var r,n,a,s,i,o;return(0,er.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded border border-purple-200",children:[(0,er.jsxs)("div",{className:"flex-1",children:[(0,er.jsx)("span",{className:"font-medium text-gray-800",children:(null===(r=e.item)||void 0===r?void 0:r.name)||e.item_name||"Unknown Item"}),(null===(n=e.item)||void 0===n?void 0:n.item_code)&&(0,er.jsxs)("span",{className:"ml-2 text-sm text-gray-600",children:["(",e.item.item_code,")"]}),"returned"===e.status&&(0,er.jsx)("span",{className:"ml-2 px-2 py-1 text-xs bg-green-100 text-green-800 rounded",children:"Fully Returned"}),"partially_returned"===e.status&&(0,er.jsx)("span",{className:"ml-2 px-2 py-1 text-xs bg-yellow-100 text-yellow-800 rounded",children:"Partially Returned"})]}),(0,er.jsxs)("div",{className:"text-right",children:[(0,er.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,er.jsxs)("div",{children:["Assigned: ",e.quantity_assigned," ",(null===(a=e.item)||void 0===a?void 0:a.unit)||e.unit||"pcs"]}),(0,er.jsxs)("div",{children:["Used: ",e.quantity_used," ",(null===(s=e.item)||void 0===s?void 0:s.unit)||e.unit||"pcs"]}),(0,er.jsxs)("div",{className:"font-semibold text-green-600",children:["Returned: ",e.quantity_returned," ",(null===(i=e.item)||void 0===i?void 0:i.unit)||e.unit||"pcs"]}),e.balance_quantity>0&&(0,er.jsxs)("div",{className:"text-orange-600",children:["Balance: ",e.balance_quantity," ",(null===(o=e.item)||void 0===o?void 0:o.unit)||e.unit||"pcs"]})]}),e.returned_at&&(0,er.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Returned: ",new Date(e.returned_at).toLocaleString()]})]})]},t)})})]}),(!be||0===be.length)&&"completed"===ae.status&&(0,er.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:(0,er.jsx)("p",{className:"text-sm text-gray-600 italic",children:"No inventory items have been returned yet."})})]}),(0,er.jsx)("div",{className:"mt-6 flex justify-end",children:(0,er.jsx)("button",{onClick:()=>{se(null),je([])},className:"px-6 py-2 rounded-lg text-sm font-medium bg-gray-500 hover:bg-gray-600 text-white",children:"Close"})})]})})}),ie&&le.length>0&&(0,er.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,er.jsx)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,er.jsxs)("div",{className:"p-6",children:[(0,er.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,er.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Return Inventory Items"}),(0,er.jsx)("button",{onClick:()=>{oe(null),ce([]),ue({}),me({}),fe(null)},className:"text-gray-500 hover:text-gray-700 text-2xl font-bold",children:"\xd7"})]}),(0,er.jsxs)("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,er.jsx)("p",{className:"text-gray-700 font-semibold mb-2",children:"\ud83d\udce6 Return Balance Inventory Items"}),(0,er.jsx)("p",{className:"text-sm text-gray-600",children:'Update "Used" quantity if items were consumed. Return unused items (balance) to the selected location. Assigned = Used + Returned + Balance.'})]}),(0,er.jsx)("div",{className:"space-y-4 mb-6",children:le.map(e=>{var t,r,n,a,s,i,o,l,c,d,u,h,m,p;const f=e.quantity_assigned||0,g=e.quantity_returned||0,x=Math.max(0,f-g),y=x,v=de[e.id],b=void 0!==v&&""!==v?parseFloat(v):0,j=Math.max(0,f-g-b),w="pcs"===((null===(t=e.item)||void 0===t?void 0:t.unit)||"").toLowerCase(),N=w?Math.round(j):Number(j.toFixed(3));return(0,er.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[(0,er.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,er.jsxs)("div",{className:"flex-1",children:[(0,er.jsx)("h4",{className:"font-semibold text-gray-800",children:(null===(r=e.item)||void 0===r?void 0:r.name)||"Unknown Item"}),(null===(n=e.item)||void 0===n?void 0:n.item_code)&&(0,er.jsxs)("p",{className:"text-sm text-gray-600",children:["Code: ",e.item.item_code]}),(0,er.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Service: ",(null===(a=e.assigned_service)||void 0===a||null===(s=a.service)||void 0===s?void 0:s.name)||e.service_name||"N/A"]})]}),(0,er.jsxs)("div",{className:"text-right",children:[(0,er.jsxs)("p",{className:"text-sm text-gray-600",children:["Assigned: ",(0,er.jsx)("span",{className:"font-semibold",children:f})," ",(null===(i=e.item)||void 0===i?void 0:i.unit)||"pcs"]}),(0,er.jsxs)("p",{className:"text-sm text-gray-600",children:["Already Returned: ",g," ",(null===(o=e.item)||void 0===o?void 0:o.unit)||"pcs"]})]})]}),(0,er.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-3",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Return Quantity:"}),(0,er.jsx)("input",{type:"number",min:"0",max:x,step:w?"1":"0.01",value:void 0!==de[e.id]?de[e.id]:0,onKeyDown:e=>{!w||"."!==e.key&&","!==e.key&&"e"!==e.key||e.preventDefault()},onChange:t=>{const r=t.target.value;if(""===r)return void ue(Be(Be({},de),{},{[e.id]:""}));const n=parseFloat(r);if(isNaN(n))return void ue(Be(Be({},de),{},{[e.id]:r}));let a=n;w&&(a=Math.floor(n));const s=Math.max(0,Math.min(a,x));ue(Be(Be({},de),{},{[e.id]:s}))},onBlur:t=>{const r=parseFloat(t.target.value);if(isNaN(r)||r<0)ue(Be(Be({},de),{},{[e.id]:0}));else{const t=Math.min(r,x);ue(Be(Be({},de),{},{[e.id]:t}))}},className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,er.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Max Returnable: ",x," ",(null===(l=e.item)||void 0===l?void 0:l.unit)||"pcs"]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Used Quantity (Auto):"}),(0,er.jsxs)("div",{className:"w-full bg-gray-100 border border-gray-200 rounded-lg px-3 py-2 text-sm text-gray-700 font-semibold h-[38px] flex items-center",children:[N," ",(null===(c=e.item)||void 0===c?void 0:c.unit)||"pcs"]}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"(Assigned - Returned = Used)"})]})]}),(0,er.jsx)("div",{className:"flex justify-between mt-2 px-1",children:(0,er.jsxs)("p",{className:"text-xs text-gray-500",children:["Available to Return (Balance): ",(0,er.jsx)("span",{className:"font-semibold text-blue-600",children:y})," ",(null===(d=e.item)||void 0===d?void 0:d.unit)||"pcs"]})}),(0,er.jsxs)("div",{className:"mt-4 border-t pt-3",children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Return Location for this Item:"}),null!==(u=e.notes)&&void 0!==u&&u.includes("(LocID:")||(null===(h=e.item)||void 0===h||null===(m=h.stock_locations)||void 0===m?void 0:m.length)>0||null!==(p=e.item)&&void 0!==p&&p.location?(0,er.jsxs)("p",{className:"text-xs text-blue-600 mb-1",children:["Suggested Source: ",((t,r,n)=>{const a=e.notes?e.notes.match(/Assigned from (.*?) \(LocID:/):null;return a?a[1].trim()+" (Assigned)":(null===(t=e.item)||void 0===t||null===(r=t.stock_locations)||void 0===r?void 0:r.length)>0?e.item.stock_locations.map(e=>e.name).join(", "):(null===(n=e.item)||void 0===n?void 0:n.location)||""})()]}):(0,er.jsx)("p",{className:"text-xs text-gray-500 mb-1 italic",children:"Note: Item has no source location set."}),(0,er.jsxs)("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500",value:ge[e.id]||"",onChange:t=>{const r=t.target.value?parseInt(t.target.value):"";xe(Be(Be({},ge),{},{[e.id]:r}))},children:[(0,er.jsx)("option",{value:"",children:"Select Location..."}),ye.map(t=>{var r,n,a,s,i;const o=null===(r=e.item)||void 0===r||null===(n=r.stock_locations)||void 0===n?void 0:n.some(e=>e.id===t.id),l=(null===(a=e.item)||void 0===a?void 0:a.location)&&((null===(s=t.name)||void 0===s?void 0:s.trim().toLowerCase())===(null===(i=e.item.location)||void 0===i?void 0:i.trim().toLowerCase())||t.location_code===e.item.location),c=e.notes?e.notes.match(/\(LocID:\s*(\d+)\)/):null,d=c?parseInt(c[1]):0,u=d&&t.id===d||o||l,h=!u&&("WAREHOUSE"===t.location_type||"CENTRAL_WAREHOUSE"===t.location_type||!0===t.is_inventory_point),m=u||h,p=u?"bg-green-50":h?"bg-gray-50":"";return(0,er.jsxs)("option",{value:t.id,className:m?"font-bold ".concat(p):"",children:[u?"\ud83d\udccd ":h?"\ud83d\udce6 ":"",t.name," ",t.location_type?"(".concat(t.location_type,")"):"",u?"(Source)":h?"(Default)":""]},t.id)})]})]})]},e.id)})}),(0,er.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,er.jsx)("button",{onClick:()=>{oe(null),ce([]),ue({}),me({}),xe({}),fe(null)},className:"px-6 py-2 rounded-lg text-sm font-medium bg-gray-500 hover:bg-gray-600 text-white",children:"Cancel"}),(0,er.jsx)("button",{onClick:async()=>{if(ie)try{await Ia.patch("/services/assigned/".concat(ie),{status:"completed",inventory_returns:null}),oe(null),ce([]),ue({}),me({}),xe({}),fe(null),We(),alert("Service marked as completed without returning inventory items.")}catch(r){var e,t;console.error("Failed to complete service:",r),alert("Failed to complete service: ".concat((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||r.message))}},className:"px-6 py-2 rounded-lg text-sm font-medium bg-blue-600 hover:bg-blue-700 text-white",children:"Complete Without Returns"}),(0,er.jsx)("button",{onClick:async()=>{if(ie&&ie)try{const e=le.map(e=>{const t=de[e.id]||0,r=parseFloat(t),n=e.quantity_assigned||0,a=e.quantity_returned||0,s=isNaN(r)?0:r,i=Math.max(0,n-a-s);return{assignment_id:e.id,quantity_returned:s,quantity_used:i,notes:"Return inventory on service completion",return_location_id:ge[e.id]||pe}}),t=e.filter(e=>{const t=le.find(t=>t.id===e.assignment_id);if(!t)return!0;const r=t.quantity_assigned||0,n=t.quantity_returned||0,a=e.quantity_used,s=Math.max(0,r-a-n);return e.quantity_returned>s});if(t.length>0)return void alert("Error: Return quantities cannot exceed available balance (Assigned - Used - Previously Returned). Please check your quantities.");await Ia.patch("/services/assigned/".concat(ie),{status:"completed",inventory_returns:e,return_location_id:pe}),m(e=>e.map(e=>e.id===ie?Be(Be({},e),{},{status:"completed"}):e)),oe(null),ce([]),ue({}),me({}),xe({}),fe(null),We(!1),alert("Service marked as completed and inventory updated successfully!")}catch(r){var e,t;console.error("Failed to complete service with returns:",r),alert("Failed to complete service: ".concat((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||r.message))}},className:"px-6 py-2 rounded-lg text-sm font-medium text-white bg-green-600 hover:bg-green-700",children:"Complete & Return Items"})]})]})})})]}),pt&&gt&&(0,er.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,er.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,er.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Checkout Inventory Verification"}),(0,er.jsxs)("div",{className:"mb-4",children:[(0,er.jsxs)("p",{children:[(0,er.jsx)("strong",{children:"Room:"})," ",gt.room_number]}),(0,er.jsxs)("p",{children:[(0,er.jsx)("strong",{children:"Guest:"})," ",gt.guest_name]}),gt.location_name&&(0,er.jsxs)("p",{children:[(0,er.jsx)("strong",{children:"Location:"})," ",gt.location_name]})]}),gt.fixed_assets&&gt.fixed_assets.length>0&&(0,er.jsxs)("div",{className:"mb-6",children:[(0,er.jsx)("h3",{className:"text-lg font-semibold mb-3 text-red-700",children:"Fixed Assets Check"}),(0,er.jsx)("div",{className:"bg-red-50 p-4 rounded-lg border border-red-100",children:(0,er.jsxs)("table",{className:"w-full text-sm",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"border-b border-red-200",children:[(0,er.jsx)("th",{className:"text-left py-2 font-medium text-red-800",children:"Asset Name"}),(0,er.jsx)("th",{className:"text-left py-2 font-medium text-red-800",children:"Serial No."}),(0,er.jsx)("th",{className:"text-center py-2 font-medium text-red-800",children:"Current"}),(0,er.jsx)("th",{className:"text-center py-2 font-medium text-red-800",children:"Available"}),(0,er.jsx)("th",{className:"text-right py-2 font-medium text-red-800",children:"Cost"}),(0,er.jsx)("th",{className:"text-center py-2 font-medium text-red-800",children:"Damaged?"}),(0,er.jsx)("th",{className:"text-left py-2 font-medium text-red-800",children:"Notes"})]})}),(0,er.jsx)("tbody",{children:gt.fixed_assets.map((e,t)=>(0,er.jsxs)("tr",{className:"border-b border-red-100 last:border-0 hover:bg-red-50 transition-colors",children:[(0,er.jsxs)("td",{className:"py-2 text-gray-800 font-medium",children:[e.item_name,(0,er.jsx)("div",{className:"text-xs text-gray-500",children:e.asset_tag})]}),(0,er.jsx)("td",{className:"py-2 text-gray-600 border-l border-r border-red-100 px-2 font-mono text-xs",children:e.serial_number||"-"}),(0,er.jsx)("td",{className:"py-2 text-center text-gray-600",children:e.current_stock}),(0,er.jsx)("td",{className:"py-2 text-center",children:(0,er.jsx)("input",{type:"number",min:"0",max:"1",className:"w-12 border rounded p-1 text-center font-bold ".concat(e.available_stock<e.current_stock?"text-red-600 bg-red-50 border-red-300":"text-green-600 border-gray-300"),value:e.available_stock,onChange:e=>bt(t,"available_stock",e.target.value)})}),(0,er.jsxs)("td",{className:"py-2 text-gray-600 text-right",children:["\u20b9",e.replacement_cost]}),(0,er.jsx)("td",{className:"py-2 text-center",children:(0,er.jsx)("input",{type:"checkbox",checked:e.is_damaged||!1,onChange:e=>bt(t,"is_damaged",e.target.checked),className:"w-5 h-5 text-red-600 rounded focus:ring-red-500 border-gray-300"})}),(0,er.jsx)("td",{className:"py-2 px-2",children:(e.is_damaged||e.available_stock<e.current_stock)&&(0,er.jsx)("input",{type:"text",placeholder:"Describe damage...",value:e.damage_notes||"",onChange:e=>bt(t,"damage_notes",e.target.value),className:"w-full border p-1 rounded text-sm focus:ring-1 focus:ring-red-500 outline-none"})})]},t))})]})})]}),(()=>{console.log("[DEBUG RENDER] Processing Checkout Inventory Items:",gt.items);const e=(gt.items||[]).filter(e=>{const t=e.is_fixed_asset,r=["coca","cola","water","chips","juice","biscuit"].some(t=>(e.item_name||"").toLowerCase().includes(t)),n=!r&&(e.is_rentable||e.track_laundry_cycle);return e.item_name.includes("Coca")&&console.log("[DEBUG RENDER] Item ".concat(e.item_name,": isFixed=").concat(t,", isRentable=").concat(e.is_rentable,", laundry=").concat(e.track_laundry_cycle," -> IsRentalFilter=").concat(n)),!t&&!n}),t=(gt.items||[]).filter(e=>{const t=e.is_fixed_asset,r=["coca","cola","water","chips","juice","biscuit"].some(t=>(e.item_name||"").toLowerCase().includes(t));return!r&&(e.is_rentable||e.track_laundry_cycle)&&!t}),r=(gt.items||[]).filter(e=>e.is_fixed_asset);return(0,er.jsxs)(er.Fragment,{children:[e.length>0&&(0,er.jsxs)("div",{className:"mb-6",children:[(0,er.jsx)("h3",{className:"text-lg font-semibold mb-3 text-gray-800",children:"Consumables Inventory Check"}),(0,er.jsx)("div",{className:"mb-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,er.jsxs)("p",{className:"text-sm text-blue-800",children:["\ud83d\udce6 ",(0,er.jsx)("strong",{children:"For Consumables:"}),' Enter the remaining quantity (balance) in the "Available Stock" field. The system will auto-calculate how much was consumed. No damage reporting needed for consumables.']})}),(0,er.jsx)("div",{className:"overflow-x-auto border rounded-lg",children:(0,er.jsxs)("table",{className:"min-w-full text-sm",children:[(0,er.jsx)("thead",{className:"bg-gray-100 uppercase tracking-wider text-gray-700",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Item Name"}),(0,er.jsx)("th",{className:"py-3 px-4 text-center",children:"Current Stock"}),(0,er.jsx)("th",{className:"py-3 px-4 text-center",children:"Available Stock"}),(0,er.jsx)("th",{className:"py-3 px-4 text-center",children:"Consumed Qty"}),(0,er.jsx)("th",{className:"py-3 px-4 text-right",children:"Potential Charge"})]})}),(0,er.jsx)("tbody",{className:"divide-y divide-gray-200",children:e.map((e,t)=>{const r=gt.items.indexOf(e),n=e.charge_per_unit||e.unit_price||0,a="pcs"===(e.unit||"pcs").toLowerCase(),s=a?Math.floor(e.current_stock||0):e.current_stock||0,i=a?Math.floor(e.available_stock||0):e.available_stock||0;let o=Math.max(0,s-i);o=a?Math.round(o):parseFloat(o.toFixed(2));const l=e.complimentary_limit||0,c=Math.max(0,o-l)*n;return(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsxs)("td",{className:"py-3 px-4 font-medium",children:[e.item_name,e.is_payable&&(0,er.jsx)("span",{className:"ml-2 text-xs bg-orange-100 text-orange-800 px-2 py-0.5 rounded",children:"PAYABLE"})]}),(0,er.jsx)("td",{className:"py-3 px-4 text-center text-gray-600 font-semibold",children:a?Math.floor(s):s}),(0,er.jsx)("td",{className:"py-3 px-4 text-center",children:(0,er.jsx)("input",{type:"number",min:"0",max:s,step:a?"1":"0.01",className:"w-20 border rounded p-1.5 text-center font-bold text-green-600 border-gray-300 focus:ring-2 focus:ring-green-500",value:i,onKeyDown:e=>{!a||"."!==e.key&&"e"!==e.key||e.preventDefault()},onChange:e=>{let t=parseFloat(e.target.value);isNaN(t)&&(t=0),a&&(t=Math.floor(t)),t=Math.min(s,Math.max(0,t)),vt(r,"available_stock",t),vt(r,"used_qty",a?Math.round(s-t):parseFloat((s-t).toFixed(2)))},placeholder:"Remaining"})}),(0,er.jsx)("td",{className:"py-3 px-4 text-center",children:(0,er.jsxs)("div",{className:"font-bold text-orange-600",children:[o,l>0&&(0,er.jsxs)("div",{className:"text-xs text-green-600 font-normal",children:["(Free: ",l,")"]})]})}),(0,er.jsx)("td",{className:"py-3 px-4 text-right font-medium text-red-600",children:c>0?"+\u20b9".concat(c.toFixed(2)):"-"})]},t)})})]})})]}),t.length>0&&(0,er.jsxs)("div",{className:"mb-6",children:[(0,er.jsx)("h3",{className:"text-lg font-semibold mb-3 text-purple-700",children:"Rent / Laundry Items Check"}),(0,er.jsx)("div",{className:"mb-3 p-3 bg-purple-50 border border-purple-200 rounded-lg",children:(0,er.jsxs)("p",{className:"text-sm text-purple-800",children:["\ud83e\uddfa ",(0,er.jsx)("strong",{children:"For Rent/Laundry Items:"})," Track good, damaged, and missing items."]})}),(0,er.jsx)("div",{className:"overflow-x-auto border rounded-lg",children:(0,er.jsxs)("table",{className:"min-w-full text-sm",children:[(0,er.jsx)("thead",{className:"bg-purple-50 uppercase tracking-wider text-purple-800",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Item Name"}),(0,er.jsx)("th",{className:"py-3 px-4 text-center",children:"Total Stock"}),(0,er.jsx)("th",{className:"py-3 px-4 text-center",children:"Good"}),(0,er.jsx)("th",{className:"py-3 px-4 text-center",children:"Damaged"}),(0,er.jsx)("th",{className:"py-3 px-4 text-center",children:"Missing"}),(0,er.jsx)("th",{className:"py-3 px-4 text-right",children:"Charge"})]})}),(0,er.jsx)("tbody",{className:"divide-y divide-gray-200",children:t.map((e,t)=>{const r=gt.items.indexOf(e),n=e.charge_per_unit||e.unit_price||0,a=e.cost_per_unit||n,s="pcs"===(e.unit||"pcs").toLowerCase(),i=s?Math.floor(e.current_stock||0):e.current_stock||0,o=s?Math.floor(e.available_stock||0):e.available_stock||0,l=s?Math.floor(e.damage_qty||0):e.damage_qty||0;let c=i-o-l;c<0&&(c=0),c=s?Math.round(c):parseFloat(c.toFixed(2));let d=0;return(e.is_payable||e.payable_qty>0)&&(d+=(e.payable_qty||0)*n),d+=l*a,d+=c*a,(0,er.jsxs)("tr",{className:"hover:bg-purple-50",children:[(0,er.jsxs)("td",{className:"py-3 px-4 font-medium",children:[e.item_name,e.track_laundry_cycle&&(0,er.jsx)("span",{className:"ml-2 text-xs bg-indigo-100 text-indigo-800 px-2 py-0.5 rounded",children:"LAUNDRY"}),e.is_rentable&&(0,er.jsx)("span",{className:"ml-2 text-xs bg-purple-100 text-purple-800 px-2 py-0.5 rounded",children:"RENT"})]}),(0,er.jsx)("td",{className:"py-3 px-4 text-center text-gray-600 font-semibold",children:s?Math.floor(i):i}),(0,er.jsx)("td",{className:"py-3 px-4 text-center",children:(0,er.jsx)("input",{type:"number",min:"0",max:i,step:s?"1":"0.01",className:"w-16 border rounded p-1.5 text-center font-bold text-green-600 border-gray-300 focus:ring-2 focus:ring-green-500",value:o,onKeyDown:e=>{!s||"."!==e.key&&"e"!==e.key||e.preventDefault()},onChange:e=>{let t=parseFloat(e.target.value);isNaN(t)&&(t=0),s&&(t=Math.floor(t)),t=Math.min(i,Math.max(0,t)),vt(r,"available_stock",t)}})}),(0,er.jsx)("td",{className:"py-3 px-4 text-center",children:(0,er.jsx)("input",{type:"number",min:"0",max:i,step:s?"1":"0.01",className:"w-16 border rounded p-1.5 text-center font-bold text-red-600 border-gray-300 focus:ring-2 focus:ring-red-500",value:l,onKeyDown:e=>{!s||"."!==e.key&&"e"!==e.key||e.preventDefault()},onChange:e=>{let t=parseFloat(e.target.value);isNaN(t)&&(t=0),s&&(t=Math.floor(t)),t=Math.min(i,Math.max(0,t)),vt(r,"damage_qty",t),vt(r,"is_damaged",t>0)}})}),(0,er.jsx)("td",{className:"py-3 px-4 text-center",children:(0,er.jsx)("div",{className:"font-bold text-orange-600",children:c>0?c:"-"})}),(0,er.jsx)("td",{className:"py-3 px-4 text-right font-medium text-red-600",children:d>0?"+\u20b9".concat(d.toFixed(2)):"-"})]},t)})})]})})]}),r.length>0&&(0,er.jsxs)("div",{className:"mb-6",children:[(0,er.jsx)("h3",{className:"text-lg font-semibold mb-3 text-red-700",children:"Fixed Assets Check"}),(0,er.jsx)("div",{className:"mb-3 p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,er.jsxs)("p",{className:"text-sm text-red-800",children:["\ud83d\udd27 ",(0,er.jsx)("strong",{children:"For Fixed Assets:"})," Track items that should stay in the room."]})}),(0,er.jsx)("div",{className:"overflow-x-auto border rounded-lg",children:(0,er.jsxs)("table",{className:"min-w-full text-sm",children:[(0,er.jsx)("thead",{className:"bg-red-50 uppercase tracking-wider text-red-800",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Item Name"}),(0,er.jsx)("th",{className:"py-3 px-4 text-center",children:"Total Stock"}),(0,er.jsx)("th",{className:"py-3 px-4 text-center",children:"Good"}),(0,er.jsx)("th",{className:"py-3 px-4 text-center",children:"Damaged"}),(0,er.jsx)("th",{className:"py-3 px-4 text-center",children:"Missing"}),(0,er.jsx)("th",{className:"py-3 px-4 text-right",children:"Potential Charge"})]})}),(0,er.jsx)("tbody",{className:"divide-y divide-gray-200",children:r.map((e,t)=>{const r=gt.items.indexOf(e),n=e.charge_per_unit||e.unit_price||0,a=e.cost_per_unit||n,s="pcs"===(e.unit||"pcs").toLowerCase(),i=s?Math.floor(e.current_stock||0):e.current_stock||0,o=s?Math.floor(e.available_stock||0):e.available_stock||0,l=s?Math.floor(e.damage_qty||0):e.damage_qty||0;let c=i-o-l;c<0&&(c=0),c=s?Math.round(c):parseFloat(c.toFixed(2));let d=l*a+c*a;return(0,er.jsxs)("tr",{className:"hover:bg-red-50",children:[(0,er.jsxs)("td",{className:"py-3 px-4 font-medium",children:[e.item_name,(0,er.jsx)("span",{className:"ml-2 text-xs bg-red-100 text-red-800 px-2 py-0.5 rounded",children:"FIXED"})]}),(0,er.jsx)("td",{className:"py-3 px-4 text-center text-gray-600 font-semibold",children:s?Math.floor(i):i}),(0,er.jsx)("td",{className:"py-3 px-4 text-center",children:(0,er.jsx)("input",{type:"number",min:"0",max:i,step:s?"1":"0.01",className:"w-16 border rounded p-1.5 text-center font-bold text-green-600 border-gray-300 focus:ring-2 focus:ring-green-500",value:o,onKeyDown:e=>{!s||"."!==e.key&&"e"!==e.key||e.preventDefault()},onChange:e=>{let t=parseFloat(e.target.value);isNaN(t)&&(t=0),s&&(t=Math.floor(t)),t=Math.min(i,Math.max(0,t)),vt(r,"available_stock",t)}})}),(0,er.jsx)("td",{className:"py-3 px-4 text-center",children:(0,er.jsx)("input",{type:"number",min:"0",max:i,step:s?"1":"0.01",className:"w-16 border rounded p-1.5 text-center font-bold text-red-600 border-gray-300 focus:ring-2 focus:ring-red-500",value:l,onKeyDown:e=>{!s||"."!==e.key&&"e"!==e.key||e.preventDefault()},onChange:e=>{let t=parseFloat(e.target.value);isNaN(t)&&(t=0),s&&(t=Math.floor(t)),t=Math.min(i,Math.max(0,t)),vt(r,"damage_qty",t),vt(r,"is_damaged",t>0)}})}),(0,er.jsx)("td",{className:"py-3 px-4 text-center",children:(0,er.jsx)("div",{className:"font-bold text-orange-600",children:c>0?c:"-"})}),(0,er.jsx)("td",{className:"py-3 px-4 text-right font-medium text-red-600",children:d>0?"+\u20b9".concat(d.toFixed(2)):"-"})]},t)})})]})})]})]})})(),(!gt.items||0===gt.items.length)&&(0,er.jsx)("div",{className:"mb-4 text-gray-500",children:gt.message||"No inventory items found"}),gt.assets&&gt.assets.length>0&&(0,er.jsxs)("div",{className:"mb-6",children:[(0,er.jsx)("h3",{className:"text-lg font-semibold mb-3 text-gray-800",children:"Fixed Assets / Room Inventory"}),(0,er.jsx)("div",{className:"overflow-x-auto border rounded-lg",children:(0,er.jsxs)("table",{className:"min-w-full text-sm",children:[(0,er.jsx)("thead",{className:"bg-blue-50 uppercase tracking-wider text-blue-800",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Asset Name"}),(0,er.jsx)("th",{className:"py-3 px-4 text-center",children:"Serial / Tag"}),(0,er.jsx)("th",{className:"py-3 px-4 text-center",children:"Quantity"}),(0,er.jsx)("th",{className:"py-3 px-4 text-center",children:"Present"}),(0,er.jsx)("th",{className:"py-3 px-4 text-center",children:"Damaged"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Condition / Notes"})]})}),(0,er.jsx)("tbody",{className:"divide-y divide-gray-200",children:gt.assets.map((e,t)=>(0,er.jsxs)("tr",{className:"hover:bg-blue-50 ".concat(e.is_damaged?"bg-red-50":""),children:[(0,er.jsx)("td",{className:"py-3 px-4 font-medium",children:e.item_name||e.name}),(0,er.jsx)("td",{className:"py-3 px-4 text-center text-gray-600 font-mono text-xs",children:e.serial_number||e.asset_tag||"-"}),(0,er.jsx)("td",{className:"py-3 px-4 text-center font-semibold",children:e.quantity||1}),(0,er.jsx)("td",{className:"py-3 px-4 text-center",children:(0,er.jsx)("input",{type:"checkbox",checked:!1!==e.is_present,onChange:e=>{const r=[...gt.assets];r[t]=Be(Be({},r[t]),{},{is_present:e.target.checked}),xt(Be(Be({},gt),{},{assets:r}))},className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"})}),(0,er.jsx)("td",{className:"py-3 px-4 text-center",children:(0,er.jsx)("input",{type:"checkbox",checked:e.is_damaged||!1,onChange:e=>{const r=[...gt.assets];r[t]=Be(Be({},r[t]),{},{is_damaged:e.target.checked}),xt(Be(Be({},gt),{},{assets:r}))},className:"w-4 h-4 text-red-600 border-gray-300 rounded focus:ring-red-500"})}),(0,er.jsx)("td",{className:"py-3 px-4",children:e.is_damaged?(0,er.jsx)("input",{type:"text",placeholder:"Describe damage...",value:e.damage_notes||"",onChange:e=>{const r=[...gt.assets];r[t]=Be(Be({},r[t]),{},{damage_notes:e.target.value}),xt(Be(Be({},gt),{},{assets:r}))},className:"w-full px-2 py-1 text-xs border border-red-300 rounded bg-red-50 focus:ring-2 focus:ring-red-500 outline-none"}):(0,er.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium ".concat("active"===(e.status||"active").toLowerCase()?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.status||"Active"})})]},t))})]})})]}),(0,er.jsxs)("div",{className:"mb-4",children:[(0,er.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Inventory Verification Notes (Optional):"}),(0,er.jsx)("textarea",{id:"inventory-notes",className:"w-full border p-2 rounded-lg",rows:"3",placeholder:"Add any notes about inventory verification..."})]}),(0,er.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,er.jsx)("button",{onClick:()=>{ft(null),xt(null)},className:"px-4 py-2 bg-gray-300 hover:bg-gray-400 text-gray-700 rounded-lg",children:"Cancel"}),(0,er.jsx)("button",{onClick:()=>{var e;const t=(null===(e=document.getElementById("inventory-notes"))||void 0===e?void 0:e.value)||"";(async(e,t)=>{try{const r=gt.items.map(e=>({item_id:e.item_id||e.id,used_qty:Number(e.used_qty||0),missing_qty:Number(e.missing_qty||0),damage_qty:Number(e.damage_qty||0)})),n=(gt.fixed_assets||[]).filter(e=>e.is_damaged).map(e=>({asset_registry_id:e.asset_registry_id,item_id:e.item_id,item_name:e.item_name,replacement_cost:Number(e.replacement_cost||0),notes:e.damage_notes||""}));await Ia.post("/bill/checkout-request/".concat(e,"/check-inventory"),{inventory_notes:t||"",items:r,asset_damages:n}),alert("Checkout request completed successfully!"),ft(null),xt(null),await qe()}catch(a){var r,n;console.error("Failed to complete checkout request:",a),alert("Failed to complete checkout request: ".concat((null===(r=a.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.detail)||a.message))}})(pt,t)},className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg",children:"Complete Verification"})]})]})}),Me&&(0,er.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,er.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[(0,er.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Complete Service Request"}),(0,er.jsx)("div",{className:"mb-6",children:(0,er.jsx)("p",{className:"text-gray-700 mb-4",children:"This delivery service request has an associated food order. Please select the payment status for the food order:"})}),(0,er.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,er.jsx)("button",{onClick:()=>ht(Me.requestId,Me.newStatus,"paid"),className:"w-full px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors",children:"\u2713 Mark as Paid & Complete"}),(0,er.jsx)("button",{onClick:()=>ht(Me.requestId,Me.newStatus,"unpaid"),className:"w-full px-4 py-3 bg-orange-600 hover:bg-orange-700 text-white rounded-lg font-medium transition-colors",children:"Mark as Unpaid & Complete"}),(0,er.jsx)("button",{onClick:()=>Re(null),className:"w-full px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors",children:"Cancel"})]}),(0,er.jsx)("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:(0,er.jsxs)("p",{className:"text-xs text-blue-800",children:[(0,er.jsx)("strong",{children:"Note:"})," The food order will be marked as completed. If marked as unpaid, you can collect payment later from the billing section."]})})]})}),Fe&&(0,er.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,er.jsx)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto animate-fade-in-up",children:(0,er.jsxs)("div",{className:"p-6",children:[(0,er.jsxs)("div",{className:"flex justify-between items-start mb-6 border-b pb-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:["Assigned"===Fe.type?"Service Assigment Details":"Service Request Details",(0,er.jsx)("span",{className:"px-2 py-1 text-sm rounded-full ".concat("completed"===Fe.status?"bg-green-100 text-green-800":"in_progress"===Fe.status?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"),children:Fe.status})]}),(0,er.jsxs)("p",{className:"text-gray-500 mt-1",children:["ID: ",Fe.id]})]}),(0,er.jsx)("button",{onClick:()=>Ue(null),className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,er.jsx)(ZQ,{size:24})})]}),(0,er.jsxs)("div",{className:"space-y-6",children:[(0,er.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,er.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Service / Description"}),(0,er.jsx)("p",{className:"font-semibold text-lg text-gray-900",children:Fe.name})]}),(0,er.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,er.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Room"}),(0,er.jsx)("p",{className:"font-semibold text-lg text-gray-900",children:Fe.room})]}),(0,er.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,er.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Assigned / Checked By"}),(0,er.jsx)("p",{className:"font-semibold text-lg text-gray-900",children:"-"!==Fe.employee?Fe.employee:(null===(c=Fe.original)||void 0===c?void 0:c.inventory_checked_by)||"System"})]}),(0,er.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,er.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Timestamp"}),(0,er.jsx)("p",{className:"font-semibold text-gray-900",children:new Date(Fe.date).toLocaleString()})]})]}),"Assigned"!==Fe.type&&Fe.original&&(0,er.jsxs)("div",{className:"space-y-4",children:[Fe.original.asset_damages&&Fe.original.asset_damages.length>0&&(0,er.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg border border-red-100",children:[(0,er.jsx)("h3",{className:"text-md font-semibold text-red-800 mb-2",children:"Asset Damages Reported"}),(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full text-sm",children:[(0,er.jsx)("thead",{className:"bg-red-100 text-red-900",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"px-3 py-2 text-left",children:"Item Name"}),(0,er.jsx)("th",{className:"px-3 py-2 text-center",children:"Cost"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left",children:"Notes"})]})}),(0,er.jsx)("tbody",{children:Fe.original.asset_damages.map((e,t)=>(0,er.jsxs)("tr",{className:"border-t border-red-200",children:[(0,er.jsx)("td",{className:"px-3 py-2 font-medium",children:e.item_name}),(0,er.jsxs)("td",{className:"px-3 py-2 text-center",children:["\u20b9",e.replacement_cost]}),(0,er.jsx)("td",{className:"px-3 py-2 text-gray-700",children:e.notes||"-"})]},t))})]})})]}),Fe.original.inventory_data_with_charges&&Fe.original.inventory_data_with_charges.length>0&&(0,er.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[(0,er.jsx)("h3",{className:"text-md font-semibold text-gray-800 mb-2",children:"Inventory Items Consumed"}),(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full text-sm",children:[(0,er.jsx)("thead",{className:"bg-gray-200 text-gray-700",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"px-3 py-2 text-left",children:"Item Name"}),(0,er.jsx)("th",{className:"px-3 py-2 text-center",children:"Used"}),(0,er.jsx)("th",{className:"px-3 py-2 text-center",children:"Missing"}),(0,er.jsx)("th",{className:"px-3 py-2 text-center",children:"Charge"})]})}),(0,er.jsx)("tbody",{children:Fe.original.inventory_data_with_charges.map((e,t)=>{const r=e.missing_item_charge||0;return(0,er.jsxs)("tr",{className:"border-t border-gray-200",children:[(0,er.jsx)("td",{className:"px-3 py-2 font-medium",children:e.item_name}),(0,er.jsx)("td",{className:"px-3 py-2 text-center",children:e.used_qty}),(0,er.jsx)("td",{className:"px-3 py-2 text-center text-red-600",children:e.missing_qty>0?e.missing_qty:"-"}),(0,er.jsx)("td",{className:"px-3 py-2 text-center font-medium",children:r>0?(0,er.jsxs)("span",{className:"text-red-600",children:["\u20b9",r]}):(0,er.jsx)("span",{className:"text-green-600",children:"Free"})})]},t)})})]})})]})]}),(0,er.jsx)("div",{className:"flex justify-end pt-4 border-t",children:(0,er.jsx)("button",{onClick:()=>Ue(null),className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium",children:"Close"})})]})]})})})]})},F$=()=>{const[e,t]=(0,a.useState)([]),[r,n]=(0,a.useState)([]),[s,i]=(0,a.useState)(null),[o,l]=(0,a.useState)(null),[c,d]=(0,a.useState)(!0),[u,h]=(0,a.useState)(!1),[m,p]=(0,a.useState)({employee_id:"",category:"",amount:"",date:"",description:"",department:"",bill_image:null}),f=(0,a.useRef)(null),g=Ta();(0,a.useEffect)(()=>{b(),v()},[]);const x=(0,a.useCallback)(async()=>{if(!u&&c){h(!0);try{const r=(await Ia.get("/expenses?skip=".concat(e.length,"&limit=20"))).data||[],n=r.map(e=>Be(Be({},e),{},{trend:Array.from({length:30},()=>Math.floor(5e3*Math.random()))}));t(e=>[...e,...n]),r.length<20&&d(!1)}catch(r){console.error("Failed to load more expenses:",r)}finally{h(!1)}}},[u,c,e.length]),y=JQ(x,c,u),v=async()=>{try{const e=await Ia.get("/expenses?skip=0&limit=20"),r=e.data.map(e=>Be(Be({},e),{},{trend:Array.from({length:30},()=>Math.floor(5e3*Math.random()))}));t(r),d(20===e.data.length)}catch(e){console.error("Error fetching expenses:",e),alert("Failed to fetch expenses")}},b=async()=>{try{const e=await Ia.get("/employees?limit=1000");n(e.data)}catch(e){console.error("Error fetching employees:",e),alert("Failed to fetch employees")}},j=e.length,w=e.reduce((e,t)=>e+parseFloat(t.amount||0),0),N=j?Math.round(w/j):0,_=[{label:"Total Expenses",value:j,color:"#4f46e5",trend:e.map(e=>parseFloat(e.amount||0))},{label:"Total Amount",value:w,color:"#16a34a",trend:e.map(e=>parseFloat(e.amount||0))},{label:"Avg Expense",value:N,color:"#f59e0b",trend:e.map(e=>parseFloat(e.amount||0))}];return(0,er.jsxs)(xm,{children:[(0,er.jsxs)("div",{className:"bubbles-container",children:[(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{})]}),(0,er.jsx)("h1",{className:"text-3xl font-bold mb-6 text-gray-800",children:"Expense Management"}),(0,er.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:_.map((e,t)=>(0,er.jsxs)("div",{className:"relative bg-white p-5 rounded-xl shadow cursor-pointer hover:shadow-xl transition",onMouseEnter:()=>l(t),onMouseLeave:()=>l(null),children:[(0,er.jsxs)("div",{className:"flex flex-col items-center",children:[(0,er.jsx)("span",{className:"text-gray-500",children:e.label}),(0,er.jsx)("span",{className:"text-2xl font-bold",style:{color:e.color},children:(0,er.jsx)(nW.Ay,{end:e.value,duration:1.5,separator:","})})]}),o===t&&(0,er.jsx)("div",{className:"absolute inset-0 bg-white bg-opacity-95 flex items-center justify-center rounded-xl p-2 shadow-lg",children:(0,er.jsx)(sp,{width:"100%",height:50,children:(0,er.jsxs)(oq,{data:e.trend.map((e,t)=>({day:t+1,value:e})),children:[(0,er.jsx)(Fq,{type:"monotone",dataKey:"value",stroke:e.color,strokeWidth:2,dot:!1}),(0,er.jsx)(CR,{contentStyle:{fontSize:12},formatter:e=>["\u20b9".concat(e),"Amount"]})]})})})]},t))}),(0,er.jsx)("section",{className:"flex justify-center mb-8",children:(0,er.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=new FormData;e.append("employee_id",m.employee_id),e.append("category",m.category),e.append("amount",m.amount),e.append("date",m.date),e.append("description",m.description),m.department&&e.append("department",m.department),m.bill_image&&e.append("image",m.bill_image),await Ia.post("/expenses",e,{headers:{"Content-Type":"multipart/form-data"}}),p({employee_id:"",category:"",amount:"",date:"",description:"",department:"",bill_image:null}),i(null),f.current.value="",v()}catch(t){console.error("Error submitting expense:",t),alert("Failed to submit expense")}},className:"bg-white p-8 rounded-3xl shadow-lg w-full max-w-4xl grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,er.jsxs)("select",{value:m.employee_id,onChange:e=>p(Be(Be({},m),{},{employee_id:e.target.value})),className:"border p-3 rounded-xl focus:ring-2 focus:ring-indigo-500 w-full",required:!0,children:[(0,er.jsx)("option",{value:"",children:"Select Employee"}),r.map(e=>(0,er.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,er.jsx)("input",{type:"text",placeholder:"Category",value:m.category,onChange:e=>p(Be(Be({},m),{},{category:e.target.value})),className:"border p-3 rounded-xl focus:ring-2 focus:ring-indigo-500 w-full",required:!0}),(0,er.jsx)("input",{type:"number",placeholder:"Amount",value:m.amount,onChange:e=>p(Be(Be({},m),{},{amount:e.target.value})),className:"border p-3 rounded-xl focus:ring-2 focus:ring-indigo-500 w-full",required:!0}),(0,er.jsx)("input",{type:"date",value:m.date,onChange:e=>p(Be(Be({},m),{},{date:e.target.value})),className:"border p-3 rounded-xl focus:ring-2 focus:ring-indigo-500 w-full",required:!0}),(0,er.jsxs)("select",{value:m.department,onChange:e=>p(Be(Be({},m),{},{department:e.target.value})),className:"border p-3 rounded-xl focus:ring-2 focus:ring-indigo-500 w-full",children:[(0,er.jsx)("option",{value:"",children:"Select Department"}),["Restaurant","Facility","Hotel","Office","Security","Fire & Safety","Housekeeping"].map(e=>(0,er.jsx)("option",{value:e,children:e},e))]}),(0,er.jsx)("input",{type:"text",placeholder:"Description",value:m.description,onChange:e=>p(Be(Be({},m),{},{description:e.target.value})),className:"border p-3 rounded-xl focus:ring-2 focus:ring-indigo-500 w-full md:col-span-2"}),(0,er.jsx)("input",{type:"file",accept:"image/*",ref:f,onChange:e=>{const t=e.target.files[0];t&&(p(Be(Be({},m),{},{bill_image:t})),i(URL.createObjectURL(t)))},className:"border p-3 rounded-xl focus:ring-2 focus:ring-indigo-500 w-full"}),s&&(0,er.jsx)("div",{className:"md:col-span-4 flex justify-center",children:(0,er.jsx)("img",{src:s,alt:"Preview",className:"h-24 rounded-xl border object-cover mt-2"})}),(0,er.jsx)("div",{className:"md:col-span-4 flex justify-center",children:(0,er.jsx)("button",{type:"submit",className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-3 rounded-2xl hover:scale-105 transform transition shadow-lg",children:"Add Expense"})})]})}),(0,er.jsxs)("section",{className:"bg-white p-6 rounded-2xl shadow",children:[(0,er.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-700",children:"Expense List"}),(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full text-sm text-left border-collapse border border-gray-200",children:[(0,er.jsx)("thead",{className:"bg-gray-100",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"p-3 border",children:"#"}),(0,er.jsx)("th",{className:"p-3 border",children:"Employee"}),(0,er.jsx)("th",{className:"p-3 border",children:"Category"}),(0,er.jsx)("th",{className:"p-3 border",children:"Department"}),(0,er.jsx)("th",{className:"p-3 border",children:"Amount"}),(0,er.jsx)("th",{className:"p-3 border",children:"Date"}),(0,er.jsx)("th",{className:"p-3 border",children:"Description"}),(0,er.jsx)("th",{className:"p-3 border",children:"Bill"}),(0,er.jsx)("th",{className:"p-3 border",children:"Action"})]})}),(0,er.jsx)("tbody",{children:e.length>0?e.map((e,t)=>(0,er.jsxs)("tr",{className:"hover:bg-gray-50 border-b",children:[(0,er.jsx)("td",{className:"p-2",children:t+1}),(0,er.jsx)("td",{className:"p-2",children:e.employee_name||"N/A"}),(0,er.jsx)("td",{className:"p-2",children:e.category}),(0,er.jsx)("td",{className:"p-2",children:e.department?(0,er.jsx)("span",{className:"px-2 py-1 text-xs font-semibold text-indigo-800 bg-indigo-100 rounded-full",children:e.department}):(0,er.jsx)("span",{className:"text-gray-400",children:"-"})}),(0,er.jsxs)("td",{className:"p-2 text-green-600 font-semibold",children:["\u20b9",e.amount]}),(0,er.jsx)("td",{className:"p-2",children:e.date.includes("T")?e.date.split("T")[0]:e.date}),(0,er.jsx)("td",{className:"p-2",children:e.description}),(0,er.jsx)("td",{className:"p-2",children:e.image&&(0,er.jsx)("img",{src:"".concat(g,"/").concat((e.image||"").replace(/\\/g,"/").replace(/^\//,"")),alt:"Bill",className:"h-12 rounded"})}),(0,er.jsx)("td",{className:"p-2",children:(0,er.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this expense?"))try{await Ia.delete("/expenses/".concat(e)),v()}catch(t){console.error("Delete failed:",t),alert("Failed to delete expense")}})(e.id),className:"text-red-500 hover:underline",children:"Delete"})})]},e.id)):(0,er.jsx)("tr",{children:(0,er.jsx)("td",{colSpan:"8",className:"p-4 text-center text-gray-500",children:"No expenses found."})})}),c&&e.length>0&&(0,er.jsx)("tbody",{ref:y,children:(0,er.jsx)("tr",{children:(0,er.jsx)("td",{colSpan:"8",className:"text-center p-4",children:u&&(0,er.jsx)("span",{className:"text-indigo-600",children:"Loading more..."})})})})]})})]})]})};MY.register(...BQ);const B$=Xh("UtensilsCrossed",[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]]),z$=Xh("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]),U$=Xh("ChefHat",[["path",{d:"M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 7.08 0A5.11 5.11 0 0 1 16.59 6 4 4 0 0 1 18 13.87V21H6Z",key:"z3ra2g"}],["line",{x1:"6",x2:"18",y1:"17",y2:"17",key:"12q60k"}]]);function q$(){var e;const t=ae(),[r,n]=(0,a.useState)("dashboard");(0,a.useEffect)(()=>{t.pathname.includes("/food-categories")||t.pathname.includes("/food-items")?n("management"):(t.pathname.includes("/food-orders"),n("dashboard"))},[t.pathname]);const[s,i]=(0,a.useState)([]),[o,l]=(0,a.useState)(null),[c,d]=(0,a.useState)(""),[u,h]=(0,a.useState)({totalRevenue:0,totalOrders:0,completedOrders:0,pendingOrders:0,deliveryOrders:0,dineInOrders:0,totalItemsSold:0,topItems:[],salesByDate:[],ordersByStatus:[],employeePerformance:[],revenueByType:[],itemsUsage:[],totalCOGS:0,totalProfit:0,profitMargin:0,averageOrderValue:0,averageCOGS:0,averageProfit:0,orderCosts:[]}),[m,p]=(0,a.useState)({fromDate:"",toDate:"",orderType:"all"}),[f,g]=(0,a.useState)([]),[x,y]=(0,a.useState)({}),[v,b]=(0,a.useState)([]),[j,w]=(0,a.useState)([]),[N,_]=(0,a.useState)([]),[k,S]=(0,a.useState)([]),[A,C]=(0,a.useState)([]),[E,T]=(0,a.useState)(""),[P,O]=(0,a.useState)(""),[D,I]=(0,a.useState)(0),[L,M]=(0,a.useState)("dine_in"),[R,F]=(0,a.useState)(""),[B,z]=(0,a.useState)(""),[U,q]=(0,a.useState)(""),[W,V]=(0,a.useState)(!0),[H,G]=(0,a.useState)(!1),[K,Y]=(0,a.useState)(1),[X,Q]=(0,a.useState)(null),[$,J]=(0,a.useState)({}),[Z,ee]=(0,a.useState)(!1),[te,re]=(0,a.useState)({}),[ne,se]=(0,a.useState)(null),[ie,oe]=(0,a.useState)(""),[le,ce]=(0,a.useState)(null),[de,ue]=(0,a.useState)("unpaid"),[he,me]=(0,a.useState)(!1),[pe,fe]=(0,a.useState)(null),[ge,xe]=(0,a.useState)(""),[ye,ve]=(0,a.useState)(""),[be,je]=(0,a.useState)(""),[we,Ne]=(0,a.useState)(""),[_e,ke]=(0,a.useState)([]),[Se,Ae]=(0,a.useState)([]),[Ce,Ee]=(0,a.useState)(null),[Te,Pe]=(0,a.useState)(!0),[Oe,De]=(0,a.useState)(!1),[Ie,Le]=(0,a.useState)({search:"",category:"all",availability:"all"}),[Me,Re]=(0,a.useState)(""),[Fe,ze]=(0,a.useState)(null),[Ue,qe]=(0,a.useState)(null),[We,Ve]=(0,a.useState)([]),[He,Ge]=(0,a.useState)(""),[Ke,Ye]=(0,a.useState)(null),[Xe,Qe]=(0,a.useState)([]),[$e,Je]=(0,a.useState)([]),[Ze,et]=(0,a.useState)(""),[tt,rt]=(0,a.useState)(""),[nt,at]=(0,a.useState)([]),st={pending:"bg-yellow-100 text-yellow-800",in_progress:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"},it=localStorage.getItem("token"),ot=e=>{if(!e)return"https://placehold.co/400x300/e2e8f0/a0aec0?text=No+Image";if(e.startsWith("http"))return e;const t=Ta();return e.startsWith("/")?"".concat(t).concat(e):"".concat(t,"/").concat(e)},lt=e=>{let{title:t,value:r,icon:n,color:a}=e;return(0,er.jsxs)("div",{className:"p-6 rounded-2xl text-white shadow-lg flex items-center justify-between transition-transform duration-300 transform hover:scale-105 ".concat(a),children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("h4",{className:"text-lg font-medium",children:t}),(0,er.jsx)("p",{className:"text-3xl font-bold mt-1",children:r})]}),(0,er.jsx)("div",{className:"text-4xl opacity-80",children:n})]})};(0,a.useEffect)(()=>{vt(),"management"===r?(gt(),xt(),ct()):"requests"===r?ft():"dashboard"===r&&ht()},[r]);const ct=async()=>{try{const e=await Ia.get("/inventory/items?limit=1000");Je(e.data||[])}catch(pe){console.error("Failed to fetch inventory items:",pe),Je([])}},dt=(e,t,r)=>{const n=[...Xe];if("quantity"===t){const a=$e.find(t=>t.id===parseInt(n[e].inventory_item_id));n[e][t]=rW(r,null===a||void 0===a?void 0:a.unit)}else n[e][t]=r;Qe(n)},ut=(e,t,r)=>{const n=[...nt];n[e][t]=r,at(n)};(0,a.useEffect)(()=>{"dashboard"===r&&pt()},[r,f,m,x]);const ht=async()=>{try{const[e,t,r,n]=await Promise.all([Ia.get("/food-orders/?limit=10000").catch(e=>(console.error("Error fetching orders:",e),{data:[]})),Ia.get("/food-items/").catch(e=>(console.error("Error fetching food items:",e),{data:[]})),Ia.get("/employees/").catch(e=>(console.error("Error fetching employees:",e),{data:[]})),Ia.get("/inventory/items?limit=10000").catch(e=>(console.error("Error fetching inventory items:",e),{data:[]}))]),a=e.data||[],s=t.data||[],i=r.data||[],o=n.data||[],l={};s.forEach(e=>{l[e.id]=e});const c={};i.forEach(e=>{c[e.id]=e});const d={};o.forEach(e=>{d[e.id]=e}),Je(o);const u=a.map(e=>{const t=Be({},e);return t.items&&Array.isArray(t.items)&&(t.items=t.items.map(e=>{const t=l[e.food_item_id];return Be(Be({},e),{},{food_item:t||{id:e.food_item_id,name:"Item ".concat(e.food_item_id),price:0}})})),t.assigned_employee_id&&(t.assigned_employee=c[t.assigned_employee_id]||{id:t.assigned_employee_id,name:"Employee ".concat(t.assigned_employee_id)}),t});g(u),mt(s)}catch(pe){console.error("Failed to fetch orders for dashboard:",pe),g([])}},mt=async e=>{try{const t=e.map(e=>Ia.get("/recipes?food_item_id=".concat(e.id)).catch(()=>({data:[]}))),r=await Promise.all(t),n={};r.forEach((t,r)=>{const a=t.data||[];a.length>0&&(n[e[r].id]=a[0])}),y(n)}catch(pe){console.error("Failed to fetch recipes:",pe)}},pt=()=>{let e=[...f];m.fromDate&&(e=e.filter(e=>e.created_at&&e.created_at>=m.fromDate)),m.toDate&&(e=e.filter(e=>e.created_at&&e.created_at<="".concat(m.toDate,"T23:59:59"))),"all"!==m.orderType&&(e=e.filter(e=>e.order_type===m.orderType));const t=e.filter(e=>"completed"===e.status).reduce((e,t)=>e+(parseFloat(t.amount)||0),0),r=e.length,n=e.filter(e=>"completed"===e.status).length,a=e.filter(e=>"pending"===e.status).length,s=e.filter(e=>"room_service"===e.order_type).length,i=e.filter(e=>"dine_in"===e.order_type).length,o={};let l=0;e.forEach(e=>{e.items&&Array.isArray(e.items)&&e.items.forEach(t=>{const r=t.food_item_id,n=t.quantity||0;var a;(l+=n,o[r])||(o[r]={food_item_id:r,food_item_name:(null===(a=t.food_item)||void 0===a?void 0:a.name)||"Item ".concat(r),quantity:0,revenue:0});if(o[r].quantity+=n,"completed"===e.status){var s;const e=(null===(s=t.food_item)||void 0===s?void 0:s.price)||0;o[r].revenue+=e*n}})});const c=Object.values(o).sort((e,t)=>t.quantity-e.quantity).slice(0,10),d={};e.filter(e=>"completed"===e.status).forEach(e=>{const t=e.created_at?e.created_at.split("T")[0]:"";t&&(d[t]||(d[t]={date:t,revenue:0,orders:0}),d[t].revenue+=parseFloat(e.amount)||0,d[t].orders+=1)});const u=Object.values(d).sort((e,t)=>new Date(e.date)-new Date(t.date)).slice(-30),p={};e.forEach(e=>{const t=e.status||"unknown";p[t]=(p[t]||0)+1});const g=Object.entries(p).map(e=>{let[t,r]=e;return{name:t.replace("_"," ").toUpperCase(),value:r}}),y={};e.filter(e=>"completed"===e.status&&e.assigned_employee_id).forEach(e=>{const t=e.assigned_employee_id;var r;y[t]||(y[t]={employee_id:t,employee_name:(null===(r=e.assigned_employee)||void 0===r?void 0:r.name)||"Employee ".concat(t),orders:0,revenue:0});y[t].orders+=1,y[t].revenue+=parseFloat(e.amount)||0});const v=Object.values(y).sort((e,t)=>t.revenue-e.revenue).slice(0,10),b=[{name:"Dine In",value:e.filter(e=>"dine_in"===e.order_type&&"completed"===e.status).reduce((e,t)=>e+(parseFloat(t.amount)||0),0)},{name:"Room Service",value:e.filter(e=>"room_service"===e.order_type&&"completed"===e.status).reduce((e,t)=>e+(parseFloat(t.amount)||0),0)}],j={};e.forEach(e=>{e.items&&Array.isArray(e.items)&&e.items.forEach(e=>{const t=e.food_item_id,r=x[t];r&&r.ingredients&&Array.isArray(r.ingredients)&&r.ingredients.forEach(t=>{const r=t.inventory_item_id,n=(parseFloat(t.quantity)||0)*(e.quantity||0);var a,s;j[r]||(j[r]={inventory_item_id:r,inventory_item_name:(null===(a=t.inventory_item)||void 0===a?void 0:a.name)||t.inventory_item_name||"Item ".concat(r),quantity:0,unit:(null===(s=t.inventory_item)||void 0===s?void 0:s.unit)||t.unit||"unit"});j[r].quantity+=n})})});const w=Object.values(j).sort((e,t)=>t.quantity-e.quantity).slice(0,20),N=e.filter(e=>"completed"===e.status);let _=0,k=0;const S=[];N.forEach(e=>{let t=0;e.items&&Array.isArray(e.items)&&e.items.forEach(r=>{var n;const a=r.food_item_id,s=r.quantity||0,i=x[a];if(i&&i.ingredients&&Array.isArray(i.ingredients)){const e=i.servings||1,r=s/e;i.ingredients.forEach(e=>{const n=$e.find(t=>t.id===e.inventory_item_id);if(n&&n.unit_price){const a=(e.quantity||0)*n.unit_price*r;t+=a}})}"room_service"===e.order_type&&null!==(n=r.food_item)&&void 0!==n&&n.extra_inventory_items&&r.food_item.extra_inventory_items.forEach(e=>{const r=$e.find(t=>t.id===e.inventory_item_id);r&&r.unit_price&&(t+=(e.quantity||0)*r.unit_price*s)})});const r=parseFloat(e.amount)||0,n=r-t;_+=t,k+=n,S.push({orderId:e.id,revenue:r,cost:t,profit:n,margin:r>0?n/r*100:0})});const A=t>0?k/t*100:0,C=n>0?t/n:0,E=n>0?_/n:0,T=n>0?k/n:0;Object.keys(o).forEach(e=>{const t=o[e],r=x[e];let n=0;if(r&&r.ingredients&&Array.isArray(r.ingredients)){const e=r.servings||1,a=t.quantity/e;r.ingredients.forEach(e=>{const t=$e.find(t=>t.id===e.inventory_item_id);t&&t.unit_price&&(n+=(e.quantity||0)*t.unit_price*a)})}t.cost=n,t.profit=t.revenue-n,t.margin=t.revenue>0?t.profit/t.revenue*100:0}),h({totalRevenue:t,totalOrders:r,completedOrders:n,pendingOrders:a,deliveryOrders:s,dineInOrders:i,totalItemsSold:l,topItems:c,salesByDate:u,ordersByStatus:g,employeePerformance:v,revenueByType:b,itemsUsage:w,totalCOGS:_,totalProfit:k,profitMargin:A,averageOrderValue:C,averageCOGS:E,averageProfit:T,orderCosts:S})},ft=async()=>{try{const e=((await Ia.get("/service-requests?limit=1000")).data||[]).filter(e=>e.food_order_id);i(e)}catch(pe){console.error("Failed to fetch food order requests:",pe),i([])}},gt=async()=>{try{const e=await Ia.get("/food-categories",{headers:{Authorization:"Bearer ".concat(it)}});Ve(e.data)}catch(e){console.error("Failed to load categories:",e)}},xt=async()=>{try{const e=await Ia.get("/food-items/",{headers:{Authorization:"Bearer ".concat(it)}});S(e.data)}catch(e){console.error("Failed to fetch items",e)}},yt=()=>{xe(""),ve(""),je(""),Ne(""),Ge(""),ke([]),Ae([]),Ee(null),Pe(!0),De(!1),Qe([]),et(""),rt(""),at([])},vt=async()=>{try{var e;const[t,r,n,a,s,i,o]=await Promise.all([Ia.get("/food-orders/?skip=0&limit=20"),Ia.get("/rooms?limit=1000").catch(e=>(console.error("Error fetching rooms:",e),{data:[]})),Ia.get("/employees/").catch(e=>(console.error("Error fetching employees:",e),{data:[]})),Ia.get("/food-items/").catch(e=>(console.error("Error fetching food items:",e),{data:[]})),Ia.get("/bookings?limit=1000").catch(e=>(console.error("Error fetching bookings:",e),{data:{bookings:[]}})),Ia.get("/packages/bookingsall?limit=1000").catch(e=>(console.error("Error fetching package bookings:",e),{data:[]})),Ia.get("/inventory/items?limit=10000").catch(e=>(console.error("Error fetching inventory items:",e),{data:[]}))]);b(t.data),V(20===t.data.length),_(n.data),S(a.data),Je(o.data||[]),a.data&&a.data.length>0&&mt(a.data);const l=r.data,c=(null===(e=s.data)||void 0===e?void 0:e.bookings)||[],d=(i.data||[]).map(e=>Be(Be({},e),{},{is_package:!0})),u=new Date;u.setHours(0,0,0,0);const h=new Set,m=e=>e?e.toLowerCase().replace(/[-_\s]/g,""):"",p=e=>{if(!e)return!1;const t=e.toLowerCase().replace(/[-_\s]/g,"");return("checkedin"===t||"booked"===t)&&"cancelled"!==t&&!t.includes("checkedout")};c.forEach(e=>{if(p(e.status)){const t=new Date(e.check_in),r=new Date(e.check_out);t.setHours(0,0,0,0),r.setHours(0,0,0,0),t<=u&&r>=u?e.rooms&&Array.isArray(e.rooms)?e.rooms.forEach(t=>{t&&t.id?(h.add(t.id),console.log("Added active regular room: ".concat(t.number||t.id," (ID: ").concat(t.id,") from booking ").concat(e.id,", status: ").concat(e.status))):console.log("Regular booking ".concat(e.id," room missing id:"),t)}):console.log("Regular booking ".concat(e.id," has active status but no rooms array or rooms is not an array")):console.log("Regular booking ".concat(e.id," is active but dates don't match: check_in=").concat(t,", check_out=").concat(r,", today=").concat(u))}else console.log("Regular booking ".concat(e.id," status '").concat(e.status,"' is not active (normalized: '").concat(m(e.status),"')"))}),d.forEach(e=>{if(p(e.status)){const t=new Date(e.check_in),r=new Date(e.check_out);t.setHours(0,0,0,0),r.setHours(0,0,0,0),t<=u&&r>=u?e.rooms&&Array.isArray(e.rooms)?e.rooms.forEach(t=>{const r=t.room||t,n=(null===r||void 0===r?void 0:r.id)||t.room_id;n?(h.add(n),console.log("Added active package room: ".concat((null===r||void 0===r?void 0:r.number)||n," (ID: ").concat(n,") from booking ").concat(e.id,", status: ").concat(e.status))):console.log("Package booking ".concat(e.id," room link missing room data:"),t)}):console.log("Package booking ".concat(e.id," has active status but no rooms array")):console.log("Package booking ".concat(e.id," is active but dates don't match: check_in=").concat(t,", check_out=").concat(r,", today=").concat(u))}else console.log("Package booking ".concat(e.id," status '").concat(e.status,"' is not active (normalized: '").concat(m(e.status),"')"))}),l.forEach(e=>{const t=m(e.status);("checkedin"===t||"booked"===t||"occupied"===t||t.includes("checkedin"))&&h.add(e.id)});const f=l.filter(e=>h.has(e.id));console.log("Food Orders - Total checked-in room IDs: ".concat(h.size),Array.from(h)),console.log("Food Orders - Filtered checked-in rooms: ".concat(f.length),f.map(e=>"".concat(e.number||e.id," (status: ").concat(e.status,")"))),console.log("Food Orders - Room Availability Check:",{totalRooms:l.length,checkedInRoomIds:Array.from(h),checkedInRoomsCount:f.length,regularBookingsCount:c.length,packageBookingsCount:d.length,activeRegularBookings:c.filter(e=>p(e.status)).length,activePackageBookings:d.filter(e=>p(e.status)).length,today:u.toISOString(),allRoomStatuses:l.map(e=>({id:e.id,number:e.number,status:e.status}))}),w(f)}catch(pe){console.error("Failed to fetch data:",pe),b([]),w([]),_([]),S([])}},bt=async()=>{try{var e;const t=await Ia.get("/food-orders/?skip=0&limit=20");b(t.data||[]),Y(1),V(20===(null===(e=t.data)||void 0===e?void 0:e.length))}catch(pe){console.error("Failed to fetch orders:",pe),b([])}},jt=(e,t,r)=>{const n=[...A];n[e][t]="quantity"===t?Math.round(parseFloat(r)||0):r,C(n),wt(n)},wt=e=>{let t=0;e.forEach(e=>{const r=k.find(t=>t.id===parseInt(e.food_item_id));r&&(t+=r.price*e.quantity)}),I(t)},Nt=async e=>{ee(!0);try{const t=new Map,r=e.items.map(e=>(async e=>{if(te[e])return te[e];try{const t=(await Ia.get("/recipes?food_item_id=".concat(e))).data||[];return re(r=>Be(Be({},r),{},{[e]:t})),t}catch(pe){return console.error("Failed to fetch recipe for food item ".concat(e,":"),pe),[]}})(e.food_item_id)),n=await Promise.all(r);e.items.forEach((e,r)=>{const a=n[r],s=e.quantity||1;if(a&&a.length>0){var i;const e=a[0],r=s/(e.servings||1);null===(i=e.ingredients)||void 0===i||i.forEach(e=>{const n=e.inventory_item_id,a=(e.quantity||0)*r;if(t.has(n)){t.get(n).totalQuantity+=a}else t.set(n,{name:e.inventory_item_name||"Unknown",code:e.inventory_item_code||"",totalQuantity:a,unit:e.unit||"pcs",notes:e.notes||""})})}});const a=Array.from(t.values()).sort((e,t)=>e.name.localeCompare(t.name));return J(t=>Be(Be({},t),{},{[e.id]:a})),a}catch(pe){return console.error("Failed to calculate ingredients:",pe),[]}finally{ee(!1)}},_t=v.length,kt=v.reduce((e,t)=>e+t.amount,0),St=v.filter(e=>"completed"===e.status).length,At=(Array.from({length:7},(e,t)=>"Day ".concat(t+1)),Array.from({length:7},()=>Math.floor(10*Math.random()+1)),Array.from({length:4},()=>Math.floor(5e3*Math.random()+2e3)),v.filter(e=>{var t;const r=!B||e.status===B,n=!U||(null===(t=e.created_at)||void 0===t?void 0:t.startsWith(U));return r&&n}).sort((e,t)=>new Date(t.created_at)-new Date(e.created_at))),Ct=k.length,Et=We.length,Pt=k.filter(e=>e.available).length,Ot=k.filter(e=>{const t=e.name.toLowerCase().includes(Ie.search.toLowerCase()),r="all"===Ie.category||e.category_id===parseInt(Ie.category),n="all"===Ie.availability||"available"===Ie.availability&&e.available||"unavailable"===Ie.availability&&!e.available;return t&&r&&n});return(0,er.jsx)(xm,{children:(0,er.jsxs)("div",{className:"p-6 space-y-8",children:[(0,er.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,er.jsx)("h2",{className:"text-3xl font-extrabold text-indigo-700",children:"\ud83c\udf7d Food & Beverage Management"})}),(0,er.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 mb-6",children:(0,er.jsx)("div",{className:"flex border-b border-gray-200",children:[{id:"dashboard",label:"Dashboard"},{id:"orders",label:"Food Orders"},{id:"requests",label:"Requested Orders"},{id:"management",label:"Food Management"}].map(e=>(0,er.jsx)("button",{onClick:()=>n(e.id),className:"px-6 py-3 font-medium transition-colors ".concat(r===e.id?"text-indigo-600 border-b-2 border-indigo-600":"text-gray-600 hover:text-gray-900"),children:e.label},e.id))})}),"dashboard"===r&&(0,er.jsxs)("div",{className:"space-y-6",children:[(0,er.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Filters"}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),(0,er.jsx)("input",{type:"date",value:m.fromDate,onChange:e=>p(Be(Be({},m),{},{fromDate:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-indigo-500"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),(0,er.jsx)("input",{type:"date",value:m.toDate,onChange:e=>p(Be(Be({},m),{},{toDate:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-indigo-500"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Type"}),(0,er.jsxs)("select",{value:m.orderType,onChange:e=>p(Be(Be({},m),{},{orderType:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-indigo-500",children:[(0,er.jsx)("option",{value:"all",children:"All Types"}),(0,er.jsx)("option",{value:"dine_in",children:"Dine In"}),(0,er.jsx)("option",{value:"room_service",children:"Room Service"})]})]}),(0,er.jsx)("div",{className:"flex items-end",children:(0,er.jsx)("button",{onClick:()=>p({fromDate:"",toDate:"",orderType:"all"}),className:"w-full bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold py-2 px-4 rounded-lg transition-colors",children:"Clear Filters"})})]})]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,er.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-green-700 rounded-xl shadow-lg p-6 text-white",children:(0,er.jsxs)("div",{className:"flex justify-between items-center",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm font-medium opacity-90",children:"Total Revenue"}),(0,er.jsxs)("p",{className:"text-3xl font-bold mt-1",children:["\u20b9",(u.totalRevenue||0).toLocaleString("en-IN",{maximumFractionDigits:2})]})]}),(0,er.jsx)("div",{className:"text-4xl opacity-80",children:"\ud83d\udcb0"})]})}),(0,er.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-blue-700 rounded-xl shadow-lg p-6 text-white",children:(0,er.jsxs)("div",{className:"flex justify-between items-center",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm font-medium opacity-90",children:"Total Orders"}),(0,er.jsx)("p",{className:"text-3xl font-bold mt-1",children:u.totalOrders})]}),(0,er.jsx)("div",{className:"text-4xl opacity-80",children:"\ud83d\udce6"})]})}),(0,er.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-purple-700 rounded-xl shadow-lg p-6 text-white",children:(0,er.jsxs)("div",{className:"flex justify-between items-center",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm font-medium opacity-90",children:"Completed Orders"}),(0,er.jsx)("p",{className:"text-3xl font-bold mt-1",children:u.completedOrders}),(0,er.jsxs)("p",{className:"text-xs opacity-75 mt-1",children:[u.totalOrders>0?(u.completedOrders/u.totalOrders*100).toFixed(1):0,"% completion rate"]})]}),(0,er.jsx)("div",{className:"text-4xl opacity-80",children:"\u2705"})]})}),(0,er.jsx)("div",{className:"bg-gradient-to-r from-orange-500 to-orange-700 rounded-xl shadow-lg p-6 text-white",children:(0,er.jsxs)("div",{className:"flex justify-between items-center",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm font-medium opacity-90",children:"Items Sold"}),(0,er.jsx)("p",{className:"text-3xl font-bold mt-1",children:u.totalItemsSold})]}),(0,er.jsx)("div",{className:"text-4xl opacity-80",children:"\ud83c\udf7d\ufe0f"})]})})]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,er.jsx)("div",{className:"bg-gradient-to-r from-emerald-500 to-emerald-700 rounded-xl shadow-lg p-6 text-white",children:(0,er.jsxs)("div",{className:"flex justify-between items-center",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm font-medium opacity-90",children:"Total Profit"}),(0,er.jsxs)("p",{className:"text-3xl font-bold mt-1",children:["\u20b9",(u.totalProfit||0).toLocaleString("en-IN",{maximumFractionDigits:2})]}),(0,er.jsxs)("p",{className:"text-xs opacity-75 mt-1",children:[(u.profitMargin||0).toFixed(1),"% margin"]})]}),(0,er.jsx)("div",{className:"text-4xl opacity-80",children:"\ud83d\udcb5"})]})}),(0,er.jsx)("div",{className:"bg-gradient-to-r from-red-500 to-red-700 rounded-xl shadow-lg p-6 text-white",children:(0,er.jsxs)("div",{className:"flex justify-between items-center",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm font-medium opacity-90",children:"Total COGS"}),(0,er.jsxs)("p",{className:"text-3xl font-bold mt-1",children:["\u20b9",(u.totalCOGS||0).toLocaleString("en-IN",{maximumFractionDigits:2})]}),(0,er.jsx)("p",{className:"text-xs opacity-75 mt-1",children:"Cost of goods sold"})]}),(0,er.jsx)("div",{className:"text-4xl opacity-80",children:"\ud83d\udcca"})]})}),(0,er.jsx)("div",{className:"bg-gradient-to-r from-teal-500 to-teal-700 rounded-xl shadow-lg p-6 text-white",children:(0,er.jsxs)("div",{className:"flex justify-between items-center",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm font-medium opacity-90",children:"Avg Order Value"}),(0,er.jsxs)("p",{className:"text-3xl font-bold mt-1",children:["\u20b9",(u.averageOrderValue||0).toLocaleString("en-IN",{maximumFractionDigits:2})]}),(0,er.jsx)("p",{className:"text-xs opacity-75 mt-1",children:"Per completed order"})]}),(0,er.jsx)("div",{className:"text-4xl opacity-80",children:"\ud83d\udcc8"})]})}),(0,er.jsx)("div",{className:"bg-gradient-to-r from-amber-500 to-amber-700 rounded-xl shadow-lg p-6 text-white",children:(0,er.jsxs)("div",{className:"flex justify-between items-center",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm font-medium opacity-90",children:"Avg Profit"}),(0,er.jsxs)("p",{className:"text-3xl font-bold mt-1",children:["\u20b9",(u.averageProfit||0).toLocaleString("en-IN",{maximumFractionDigits:2})]}),(0,er.jsx)("p",{className:"text-xs opacity-75 mt-1",children:"Per order"})]}),(0,er.jsx)("div",{className:"text-4xl opacity-80",children:"\ud83c\udfaf"})]})})]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[(0,er.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:(0,er.jsxs)("div",{className:"flex justify-between items-center",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Pending Orders"}),(0,er.jsx)("p",{className:"text-2xl font-bold text-yellow-600 mt-1",children:u.pendingOrders})]}),(0,er.jsx)("div",{className:"text-3xl",children:"\u23f3"})]})}),(0,er.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:(0,er.jsxs)("div",{className:"flex justify-between items-center",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Dine In Orders"}),(0,er.jsx)("p",{className:"text-2xl font-bold text-blue-600 mt-1",children:u.dineInOrders}),(0,er.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[u.totalOrders>0?(u.dineInOrders/u.totalOrders*100).toFixed(1):0,"% of total"]})]}),(0,er.jsx)("div",{className:"text-3xl",children:"\ud83c\udf74"})]})}),(0,er.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:(0,er.jsxs)("div",{className:"flex justify-between items-center",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Room Service"}),(0,er.jsx)("p",{className:"text-2xl font-bold text-indigo-600 mt-1",children:u.deliveryOrders}),(0,er.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[u.totalOrders>0?(u.deliveryOrders/u.totalOrders*100).toFixed(1):0,"% of total"]})]}),(0,er.jsx)("div",{className:"text-3xl",children:"\ud83d\ude9a"})]})})]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,er.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,er.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Sales Trend"}),(0,er.jsx)("div",{className:"h-64",children:(0,er.jsx)(XQ,{data:{labels:u.salesByDate.map(e=>new Date(e.date).toLocaleDateString("en-IN",{month:"short",day:"numeric"})),datasets:[{label:"Revenue (\u20b9)",data:u.salesByDate.map(e=>e.revenue),borderColor:"rgb(99, 102, 241)",backgroundColor:"rgba(99, 102, 241, 0.1)",tension:.4},{label:"Orders",data:u.salesByDate.map(e=>e.orders),borderColor:"rgb(16, 185, 129)",backgroundColor:"rgba(16, 185, 129, 0.1)",tension:.4,yAxisID:"y1"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0},tooltip:{mode:"index",intersect:!1}},scales:{y:{type:"linear",display:!0,position:"left",title:{display:!0,text:"Revenue (\u20b9)"}},y1:{type:"linear",display:!0,position:"right",title:{display:!0,text:"Orders"},grid:{drawOnChartArea:!1}}}}})})]}),(0,er.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,er.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Order Status Distribution"}),(0,er.jsx)("div",{className:"h-64",children:(0,er.jsx)(QQ,{data:{labels:u.ordersByStatus.map(e=>e.name),datasets:[{label:"Orders",data:u.ordersByStatus.map(e=>e.value),backgroundColor:["rgba(234, 179, 8, 0.8)","rgba(59, 130, 246, 0.8)","rgba(16, 185, 129, 0.8)","rgba(239, 68, 68, 0.8)"]}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{enabled:!0}},scales:{y:{beginAtZero:!0,ticks:{stepSize:1}}}}})})]})]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,er.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,er.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Revenue by Order Type"}),(0,er.jsx)("div",{className:"h-64",children:(0,er.jsx)(QQ,{data:{labels:u.revenueByType.map(e=>e.name),datasets:[{label:"Revenue (\u20b9)",data:u.revenueByType.map(e=>e.value),backgroundColor:["rgba(59, 130, 246, 0.8)","rgba(139, 92, 246, 0.8)"]}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(e){return"\u20b9"+e.parsed.y.toLocaleString("en-IN")}}}},scales:{y:{beginAtZero:!0,ticks:{callback:function(e){return"\u20b9"+e.toLocaleString("en-IN")}}}}}})}),(0,er.jsx)("div",{className:"mt-4 space-y-2",children:u.revenueByType.map((e,t)=>(0,er.jsxs)("div",{className:"flex justify-between items-center",children:[(0,er.jsx)("span",{className:"text-sm text-gray-600",children:e.name}),(0,er.jsxs)("span",{className:"font-semibold text-gray-800",children:["\u20b9",e.value.toLocaleString("en-IN",{maximumFractionDigits:2})]})]},t))})]}),(0,er.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,er.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Top 10 Selling Items (Profitability)"}),(0,er.jsx)("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:0===u.topItems.length?(0,er.jsx)("p",{className:"text-gray-500 text-center py-8",children:"No data available"}):u.topItems.map((e,t)=>(0,er.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,er.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,er.jsxs)("div",{className:"flex items-center gap-3",children:[(0,er.jsx)("div",{className:"w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center text-indigo-600 font-bold text-sm",children:t+1}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"font-medium text-gray-800",children:e.food_item_name}),(0,er.jsxs)("p",{className:"text-xs text-gray-500",children:["Qty: ",e.quantity]})]})]})}),(0,er.jsxs)("div",{className:"grid grid-cols-3 gap-2 mt-2 text-xs",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-gray-500",children:"Revenue"}),(0,er.jsxs)("p",{className:"font-semibold text-green-600",children:["\u20b9",e.revenue.toLocaleString("en-IN",{maximumFractionDigits:0})]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-gray-500",children:"Cost"}),(0,er.jsxs)("p",{className:"font-semibold text-red-600",children:["\u20b9",(e.cost||0).toLocaleString("en-IN",{maximumFractionDigits:0})]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-gray-500",children:"Profit"}),(0,er.jsxs)("p",{className:"font-semibold ".concat((e.profit||0)>=0?"text-emerald-600":"text-red-600"),children:["\u20b9",(e.profit||0).toLocaleString("en-IN",{maximumFractionDigits:0})]}),(0,er.jsxs)("p",{className:"text-gray-400 text-xs",children:[(e.margin||0).toFixed(1),"%"]})]})]})]},t))})]})]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,er.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,er.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Top Employee Performance"}),(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"w-full",children:[(0,er.jsx)("thead",{className:"bg-gray-50",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"py-2 px-4 text-left text-sm font-semibold text-gray-700",children:"Employee"}),(0,er.jsx)("th",{className:"py-2 px-4 text-left text-sm font-semibold text-gray-700",children:"Orders"}),(0,er.jsx)("th",{className:"py-2 px-4 text-left text-sm font-semibold text-gray-700",children:"Revenue"}),(0,er.jsx)("th",{className:"py-2 px-4 text-left text-sm font-semibold text-gray-700",children:"Avg/Order"})]})}),(0,er.jsx)("tbody",{className:"divide-y divide-gray-200",children:0===u.employeePerformance.length?(0,er.jsx)("tr",{children:(0,er.jsx)("td",{colSpan:"4",className:"py-4 text-center text-gray-500",children:"No data available"})}):u.employeePerformance.map((e,t)=>(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsx)("td",{className:"py-2 px-4 text-sm font-medium",children:e.employee_name}),(0,er.jsx)("td",{className:"py-2 px-4 text-sm",children:e.orders}),(0,er.jsxs)("td",{className:"py-2 px-4 text-sm font-semibold text-green-600",children:["\u20b9",e.revenue.toLocaleString("en-IN",{maximumFractionDigits:2})]}),(0,er.jsxs)("td",{className:"py-2 px-4 text-sm text-gray-600",children:["\u20b9",(e.revenue/e.orders||0).toLocaleString("en-IN",{maximumFractionDigits:2})]})]},t))})]})})]}),(0,er.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,er.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Top Inventory Items Used (Cost Analysis)"}),(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"w-full",children:[(0,er.jsx)("thead",{className:"bg-gray-50",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"py-2 px-4 text-left text-sm font-semibold text-gray-700",children:"Item"}),(0,er.jsx)("th",{className:"py-2 px-4 text-left text-sm font-semibold text-gray-700",children:"Quantity"}),(0,er.jsx)("th",{className:"py-2 px-4 text-left text-sm font-semibold text-gray-700",children:"Unit"}),(0,er.jsx)("th",{className:"py-2 px-4 text-left text-sm font-semibold text-gray-700",children:"Total Cost"})]})}),(0,er.jsx)("tbody",{className:"divide-y divide-gray-200",children:0===u.itemsUsage.length?(0,er.jsx)("tr",{children:(0,er.jsx)("td",{colSpan:"4",className:"py-4 text-center text-gray-500",children:"No data available"})}):u.itemsUsage.map((e,t)=>{const r=$e.find(t=>t.id===e.inventory_item_id),n=(e.quantity||0)*((null===r||void 0===r?void 0:r.unit_price)||0);return(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsx)("td",{className:"py-2 px-4 text-sm font-medium",children:e.inventory_item_name}),(0,er.jsx)("td",{className:"py-2 px-4 text-sm",children:e.quantity.toFixed(2)}),(0,er.jsx)("td",{className:"py-2 px-4 text-sm text-gray-500",children:e.unit}),(0,er.jsxs)("td",{className:"py-2 px-4 text-sm font-semibold text-red-600",children:["\u20b9",n.toLocaleString("en-IN",{maximumFractionDigits:2})]})]},t)})})]})})]})]}),(0,er.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,er.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Profitability Analysis"}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,er.jsxs)("div",{className:"text-center p-4 bg-gradient-to-br from-green-50 to-green-100 rounded-lg",children:[(0,er.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Profit Margin"}),(0,er.jsxs)("p",{className:"text-3xl font-bold text-green-600",children:[u.profitMargin.toFixed(1),"%"]}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Overall margin"})]}),(0,er.jsxs)("div",{className:"text-center p-4 bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg",children:[(0,er.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Revenue to Cost Ratio"}),(0,er.jsxs)("p",{className:"text-3xl font-bold text-blue-600",children:[u.totalCOGS>0?(u.totalRevenue/u.totalCOGS).toFixed(2):"0.00","x"]}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"For every \u20b91 cost"})]}),(0,er.jsxs)("div",{className:"text-center p-4 bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg",children:[(0,er.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Avg Cost per Order"}),(0,er.jsxs)("p",{className:"text-3xl font-bold text-purple-600",children:["\u20b9",(u.averageCOGS||0).toLocaleString("en-IN",{maximumFractionDigits:2})]}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Average COGS"})]})]})]})]}),"orders"===r&&(0,er.jsxs)("div",{className:"space-y-6",children:[(0,er.jsxs)("div",{className:"bg-gradient-to-br from-indigo-50 to-blue-50 rounded-xl p-6 border border-indigo-100",children:[(0,er.jsxs)("h3",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[(0,er.jsx)("span",{className:"w-1 h-6 bg-indigo-600 rounded"}),"Order Overview"]}),(0,er.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,er.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-gray-200",children:[(0,er.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Total Orders"}),(0,er.jsx)("p",{className:"text-2xl font-bold text-indigo-600",children:_t})]}),(0,er.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-gray-200",children:[(0,er.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Total Revenue"}),(0,er.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:["\u20b9",kt.toLocaleString("en-IN")]})]}),(0,er.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-gray-200",children:[(0,er.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Completed"}),(0,er.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:St}),(0,er.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:[_t>0?(St/_t*100).toFixed(0):0,"% rate"]})]}),(0,er.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-gray-200",children:[(0,er.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Pending"}),(0,er.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:_t-St}),(0,er.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Needs attention"})]})]})]}),(0,er.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,er.jsxs)("div",{className:"bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-lg p-5 text-white shadow-md",children:[(0,er.jsx)("p",{className:"text-sm font-medium opacity-90 mb-1",children:"Average Order Value"}),(0,er.jsxs)("p",{className:"text-2xl font-bold",children:["\u20b9",_t>0?(kt/_t).toLocaleString("en-IN",{maximumFractionDigits:0}):"0"]}),(0,er.jsx)("p",{className:"text-xs opacity-75 mt-1",children:"Per order"})]}),(0,er.jsxs)("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg p-5 text-white shadow-md",children:[(0,er.jsx)("p",{className:"text-sm font-medium opacity-90 mb-1",children:"Items per Order"}),(0,er.jsx)("p",{className:"text-2xl font-bold",children:(()=>{const e=v.reduce((e,t)=>{var r;return e+((null===(r=t.items)||void 0===r?void 0:r.length)||0)},0);return _t>0?(e/_t).toFixed(1):"0.0"})()}),(0,er.jsx)("p",{className:"text-xs opacity-75 mt-1",children:"Average items"})]}),(0,er.jsxs)("div",{className:"bg-gradient-to-br from-pink-500 to-pink-600 rounded-lg p-5 text-white shadow-md",children:[(0,er.jsx)("p",{className:"text-sm font-medium opacity-90 mb-1",children:"Fulfillment Rate"}),(0,er.jsxs)("p",{className:"text-2xl font-bold",children:[_t>0?(St/_t*100).toFixed(0):0,"%"]}),(0,er.jsx)("p",{className:"text-xs opacity-75 mt-1",children:"Completion rate"})]}),(0,er.jsxs)("div",{className:"bg-gradient-to-br from-cyan-500 to-cyan-600 rounded-lg p-5 text-white shadow-md",children:[(0,er.jsx)("p",{className:"text-sm font-medium opacity-90 mb-1",children:"Revenue/Hour"}),(0,er.jsxs)("p",{className:"text-2xl font-bold",children:["\u20b9",(e=>{const t=Math.max(1,Math.floor((new Date-new Date((null===(e=v[0])||void 0===e?void 0:e.created_at)||Date.now()))/36e5));return(kt/t).toLocaleString("en-IN",{maximumFractionDigits:0})})()]}),(0,er.jsx)("p",{className:"text-xs opacity-75 mt-1",children:"Hourly average"})]})]}),(0,er.jsxs)("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:[(0,er.jsxs)("div",{className:"mb-6",children:[(0,er.jsxs)("h3",{className:"text-xl font-bold text-gray-800 mb-2 flex items-center gap-2",children:[(0,er.jsx)("span",{className:"w-1 h-6 bg-indigo-600 rounded"}),"Create New Food Order"]}),(0,er.jsx)("p",{className:"text-sm text-gray-500",children:"Quickly create orders for checked-in guests"})]}),(0,er.jsxs)("div",{className:"space-y-5",children:[(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Room *"}),(0,er.jsxs)("select",{value:E,onChange:e=>T(e.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition text-black",children:[(0,er.jsx)("option",{value:"",children:"Choose a room..."}),0===j.length?(0,er.jsx)("option",{disabled:!0,children:"No checked-in rooms available"}):j.map(e=>(0,er.jsxs)("option",{value:e.id,children:["Room ",e.number||e.room_number||e.id]},e.id))]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign Employee *"}),(0,er.jsxs)("select",{value:P,onChange:e=>O(e.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition text-black",children:[(0,er.jsx)("option",{value:"",children:"Choose an employee..."}),N.map(e=>(0,er.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Order Type *"}),(0,er.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,er.jsxs)("button",{type:"button",onClick:()=>{M("dine_in"),F("")},className:"flex items-center justify-center gap-2 p-4 border-2 rounded-lg transition-all ".concat("dine_in"===L?"border-indigo-500 bg-indigo-50 text-indigo-700 shadow-sm":"border-gray-300 hover:border-indigo-300 text-gray-700 bg-white"),children:[(0,er.jsx)(B$,{size:20}),(0,er.jsx)("span",{className:"font-semibold",children:"Dine In"})]}),(0,er.jsxs)("button",{type:"button",onClick:()=>M("room_service"),className:"flex items-center justify-center gap-2 p-4 border-2 rounded-lg transition-all ".concat("room_service"===L?"border-indigo-500 bg-indigo-50 text-indigo-700 shadow-sm":"border-gray-300 hover:border-indigo-300 text-gray-700 bg-white"),children:[(0,er.jsx)(Qh,{size:20}),(0,er.jsx)("span",{className:"font-semibold",children:"Room Service"})]})]})]}),"room_service"===L&&(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[(0,er.jsx)(z$,{size:16}),"Delivery Instructions (Optional)"]}),(0,er.jsx)("textarea",{placeholder:"Add delivery instructions, timing preferences, or special notes...",className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition resize-none",rows:"3",value:R,onChange:e=>F(e.target.value)})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Food Items *"}),(0,er.jsxs)("div",{className:"space-y-3",children:[A.map((e,t)=>(0,er.jsxs)("div",{className:"flex gap-3 items-center bg-gray-50 p-3 rounded-lg",children:[(0,er.jsxs)("select",{value:e.food_item_id,onChange:e=>jt(t,"food_item_id",e.target.value),className:"flex-1 border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-black",children:[(0,er.jsx)("option",{value:"",children:"Select food item..."}),k.map(e=>(0,er.jsxs)("option",{value:e.id,children:[e.name," - \u20b9",e.price]},e.id))]}),(0,er.jsx)("input",{type:"number",min:1,value:e.quantity,onChange:e=>jt(t,"quantity",e.target.value),placeholder:"Qty",className:"w-20 border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-center"})]},t)),(0,er.jsx)("button",{onClick:()=>{C([...A,{food_item_id:"",quantity:1}])},type:"button",className:"w-full bg-indigo-100 hover:bg-indigo-200 text-indigo-700 font-medium rounded-lg px-4 py-2.5 transition-colors border border-indigo-300",children:"+ Add Food Item"})]})]}),(0,er.jsxs)("div",{className:"pt-4 border-t border-gray-200",children:[(0,er.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,er.jsx)("span",{className:"text-lg font-semibold text-gray-700",children:"Order Total:"}),(0,er.jsxs)("span",{className:"text-2xl font-bold text-indigo-600",children:["\u20b9",D.toLocaleString("en-IN")]})]}),(0,er.jsx)("button",{onClick:async()=>{if(!E||!P||0===A.length)return void alert("Please select room, employee, and at least one food item.");const e={room_id:parseInt(E),billing_status:"unbilled",assigned_employee_id:parseInt(P),amount:D,order_type:L,delivery_request:"room_service"===L&&R?R:null,items:A.map(e=>({food_item_id:parseInt(e.food_item_id),quantity:e.quantity}))};try{const t=await Ia.post("/food-orders/",e);Tt.success("Order created successfully!"),t.data&&b(e=>[t.data,...e]),bt(),"dashboard"===r&&ht(),C([]),T(""),O(""),I(0),M("dine_in"),F(""),z(""),q(""),setTimeout(()=>{const e=document.getElementById("orders-list-section");e&&e.scrollIntoView({behavior:"smooth",block:"start"})},100)}catch(t){console.error(t),Tt.error("Failed to submit order.")}},disabled:!E||!P||0===A.length,className:"w-full bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-semibold py-3 rounded-lg shadow-md hover:shadow-lg transition-all",children:"Create Order"})]})]})]}),(0,er.jsx)("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-5",children:(0,er.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,er.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Status"}),(0,er.jsxs)("select",{value:B,onChange:e=>z(e.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-black",children:[(0,er.jsx)("option",{value:"",children:"All Status"}),(0,er.jsx)("option",{value:"pending",children:"Pending"}),(0,er.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,er.jsx)("option",{value:"completed",children:"Completed"}),(0,er.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]}),(0,er.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Date"}),(0,er.jsx)("input",{type:"date",value:U,onChange:e=>q(e.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(B||U)&&(0,er.jsx)("div",{className:"flex items-end",children:(0,er.jsx)("button",{onClick:()=>{z(""),q("")},className:"px-4 py-2.5 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors text-sm font-medium",children:"Clear Filters"})})]})}),(0,er.jsxs)("div",{id:"orders-list-section",children:[(0,er.jsx)("div",{className:"mb-4",children:(0,er.jsxs)("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[(0,er.jsx)("span",{className:"w-1 h-6 bg-indigo-600 rounded"}),"All Orders (",At.length,")"]})}),(0,er.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:0===At.length?(0,er.jsxs)("div",{className:"col-span-full text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[(0,er.jsx)("p",{className:"text-gray-500",children:"No orders found"}),(0,er.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Try adjusting your filters"})]}):At.map(e=>{var t,n,a,s;const i=j.find(t=>t.id===e.room_id),o="active"===e.status?"pending":e.status;return(0,er.jsxs)("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-5 hover:shadow-lg transition-all",children:[(0,er.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,er.jsxs)("div",{children:[(0,er.jsxs)("h4",{className:"font-bold text-lg text-gray-800",children:["Room ",(null===i||void 0===i?void 0:i.number)||(null===i||void 0===i?void 0:i.room_number)||e.room_number||e.room_id]}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.created_at?v$(e.created_at):"N/A"})]}),(0,er.jsxs)("div",{className:"flex flex-col gap-2 items-end",children:[(0,er.jsx)("span",{className:"px-2.5 py-1 rounded-full text-xs font-semibold ".concat("room_service"===e.order_type?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"),children:"room_service"===e.order_type?"Room Service":"Dine In"}),(0,er.jsx)("span",{className:"px-2.5 py-1 rounded-full text-xs font-semibold ".concat(st[o]||"bg-gray-100 text-gray-800"),children:o.replace("_"," ")})]})]}),(0,er.jsxs)("div",{className:"space-y-2 mb-3 text-sm",children:[(0,er.jsxs)("div",{className:"flex justify-between",children:[(0,er.jsx)("span",{className:"text-gray-500",children:"Guest:"}),(0,er.jsx)("span",{className:"font-medium text-gray-800",children:e.guest_name||"N/A"})]}),(0,er.jsxs)("div",{className:"flex justify-between",children:[(0,er.jsx)("span",{className:"text-gray-500",children:"Employee:"}),(0,er.jsx)("span",{className:"font-medium text-gray-800",children:e.employee_name||(null===(t=N.find(t=>t.id===e.assigned_employee_id))||void 0===t?void 0:t.name)||"N/A"})]})]}),"room_service"===e.order_type&&e.delivery_request&&(0,er.jsx)("div",{className:"mb-3 p-2 bg-purple-50 border border-purple-200 rounded-lg",children:(0,er.jsxs)("div",{className:"flex items-start gap-2",children:[(0,er.jsx)(z$,{size:14,className:"text-purple-600 mt-0.5 flex-shrink-0"}),(0,er.jsxs)("div",{className:"flex-1",children:[(0,er.jsx)("p",{className:"text-xs font-semibold text-purple-700 mb-1",children:"Delivery Instructions:"}),(0,er.jsx)("p",{className:"text-xs text-purple-600",children:e.delivery_request})]})]})}),(0,er.jsxs)("div",{className:"mb-3",children:[(0,er.jsxs)("p",{className:"text-xs font-semibold text-gray-700 mb-1",children:["Items (",(null===(n=e.items)||void 0===n?void 0:n.length)||0,"):"]}),(0,er.jsxs)("ul",{className:"space-y-1",children:[null===(a=e.items)||void 0===a?void 0:a.slice(0,3).map((e,t)=>(0,er.jsxs)("li",{className:"text-xs text-gray-600 flex justify-between",children:[(0,er.jsx)("span",{children:e.food_item_name}),(0,er.jsxs)("span",{className:"font-medium",children:["\xd7",e.quantity]})]},t)),(null===(s=e.items)||void 0===s?void 0:s.length)>3&&(0,er.jsxs)("li",{className:"text-xs text-gray-400 italic",children:["+",e.items.length-3," more items"]})]})]}),(0,er.jsx)("div",{className:"mb-3 p-2 bg-gray-50 rounded-lg",children:(0,er.jsxs)("div",{className:"flex justify-between items-center",children:[(0,er.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Order Total:"}),(0,er.jsxs)("span",{className:"text-lg font-bold text-indigo-600",children:["\u20b9",parseFloat(e.amount||0).toLocaleString("en-IN")]})]})}),"completed"===e.status&&(t=>{let r=0;null===(t=e.items)||void 0===t||t.forEach(t=>{var n,a;const s=(null===(n=te[t.food_item_id])||void 0===n?void 0:n[0])||x[t.food_item_id];if(s&&s.ingredients){const e=s.servings||1,n=(t.quantity||0)/e;s.ingredients.forEach(e=>{const t=$e.find(t=>t.id===e.inventory_item_id);t&&t.unit_price&&(r+=(e.quantity||0)*t.unit_price*n)})}"room_service"===e.order_type&&null!==(a=t.food_item)&&void 0!==a&&a.extra_inventory_items&&t.food_item.extra_inventory_items.forEach(e=>{const n=$e.find(t=>t.id===e.inventory_item_id);n&&n.unit_price&&(r+=(e.quantity||0)*n.unit_price*(t.quantity||0))})});const n=parseFloat(e.amount)-r,a=parseFloat(e.amount)>0?n/parseFloat(e.amount)*100:0;return(0,er.jsxs)("div",{className:"mb-3 p-2 bg-green-50 border border-green-200 rounded-lg",children:[(0,er.jsx)("p",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Profitability:"}),(0,er.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-gray-500",children:"Cost"}),(0,er.jsxs)("p",{className:"font-semibold text-red-600",children:["\u20b9",r.toFixed(0)]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-gray-500",children:"Profit"}),(0,er.jsxs)("p",{className:"font-semibold ".concat(n>=0?"text-green-600":"text-red-600"),children:["\u20b9",n.toFixed(0)]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-gray-500",children:"Margin"}),(0,er.jsxs)("p",{className:"font-semibold ".concat(a>=0?"text-green-600":"text-red-600"),children:[a.toFixed(0),"%"]})]})]})]})})(),(0,er.jsxs)("div",{className:"space-y-2",children:[(0,er.jsxs)("button",{onClick:()=>(async e=>{Q(e.id),$[e.id]||await Nt(e)})(e),className:"w-full bg-indigo-50 hover:bg-indigo-100 text-indigo-700 text-sm font-medium px-3 py-2 rounded-lg transition-colors flex items-center justify-center gap-2",children:[(0,er.jsx)(U$,{size:16}),"View Ingredients"]}),(0,er.jsxs)("select",{value:o,onChange:t=>(async(e,t)=>{if("completed"===t){const t=v.find(t=>t.id===e);return ce(t),void ue("paid"===t.billing_status?"paid":"unpaid")}b(r=>r.map(r=>r.id===e?Be(Be({},r),{},{status:t}):r));try{await Ia.put("/food-orders/".concat(e),{status:t}),Tt.success("Order status updated successfully!"),bt(),"dashboard"===r&&ht()}catch(pe){console.error("Failed to update status:",pe),Tt.error("Failed to update order status."),bt()}})(e.id,t.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm text-black focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white",children:[(0,er.jsx)("option",{value:"pending",children:"Pending"}),(0,er.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,er.jsx)("option",{value:"completed",children:"Completed"}),(0,er.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]})]},e.id)})})]}),W&&(0,er.jsx)("div",{className:"text-center mt-6",children:(0,er.jsx)("button",{onClick:async()=>{if(H||!W)return;G(!0);const e=K+1;try{const t=(await Ia.get("/food-orders/?skip=".concat(20*(e-1),"&limit=20"))).data||[];b(e=>[...e,...t]),Y(e),V(20===t.length)}catch(t){console.error("Failed to load more orders:",t)}finally{G(!1)}},disabled:H,className:"bg-indigo-100 text-indigo-700 font-semibold px-6 py-2 rounded-lg hover:bg-indigo-200 transition-colors disabled:bg-gray-200 disabled:text-gray-500",children:H?"Loading...":"Load More Orders"})})]}),X&&((e,t)=>{const r=v.find(e=>e.id===X),n=$[X]||[],a=j.find(e=>e.id===(null===r||void 0===r?void 0:r.room_id));return(0,er.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,er.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[(0,er.jsxs)("div",{className:"bg-indigo-600 text-white p-6 flex justify-between items-center",children:[(0,er.jsxs)("div",{children:[(0,er.jsxs)("h3",{className:"text-2xl font-bold flex items-center gap-2",children:[(0,er.jsx)(U$,{size:24}),"Order Ingredients"]}),(0,er.jsxs)("p",{className:"text-indigo-100 mt-1",children:["Room: ",(null===a||void 0===a?void 0:a.number)||(null===a||void 0===a?void 0:a.room_number)||(null===r||void 0===r?void 0:r.room_id)," | Order #",null===r||void 0===r?void 0:r.id," |",(null===r||void 0===r||null===(e=r.items)||void 0===e?void 0:e.length)||0," item(s)"]})]}),(0,er.jsx)("button",{onClick:()=>Q(null),className:"text-white hover:text-gray-200 transition-colors",children:(0,er.jsx)(ZQ,{size:24})})]}),(0,er.jsx)("div",{className:"p-6 overflow-y-auto flex-1",children:Z?(0,er.jsxs)("div",{className:"text-center py-8",children:[(0,er.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),(0,er.jsx)("p",{className:"mt-4 text-gray-600",children:"Calculating ingredients..."})]}):0===n.length?(0,er.jsxs)("div",{className:"text-center py-8",children:[(0,er.jsx)(Zh,{size:48,className:"mx-auto text-gray-400 mb-4"}),(0,er.jsx)("p",{className:"text-gray-600",children:"No recipes found for the items in this order."}),(0,er.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Please add recipes for the food items in the Inventory \u2192 Recipe section."})]}):(0,er.jsxs)(er.Fragment,{children:[(0,er.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,er.jsx)("h4",{className:"font-semibold text-gray-700 mb-2",children:"Order Items:"}),(0,er.jsx)("ul",{className:"space-y-1",children:null===r||void 0===r||null===(t=r.items)||void 0===t?void 0:t.map((e,t)=>(0,er.jsxs)("li",{className:"text-sm text-gray-600",children:["\u2022 ",e.food_item_name," \xd7 ",e.quantity]},t))})]}),(0,er.jsxs)("div",{className:"mb-4",children:[(0,er.jsxs)("h4",{className:"font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[(0,er.jsx)(Zh,{size:20}),"Required Ingredients (Total):"]}),(0,er.jsx)("div",{className:"space-y-2",children:n.map((e,t)=>(0,er.jsxs)("div",{className:"flex items-center justify-between p-3 bg-indigo-50 rounded-lg hover:bg-indigo-100 transition-colors",children:[(0,er.jsxs)("div",{className:"flex-1",children:[(0,er.jsxs)("div",{className:"font-medium text-gray-800",children:[e.name,e.code&&(0,er.jsxs)("span",{className:"text-xs text-gray-500 ml-2",children:["(",e.code,")"]})]}),e.notes&&(0,er.jsx)("div",{className:"text-xs text-gray-600 mt-1",children:e.notes})]}),(0,er.jsx)("div",{className:"text-right",children:(0,er.jsxs)("div",{className:"font-bold text-indigo-700",children:[e.totalQuantity.toFixed(2)," ",e.unit]})})]},t))})]}),(0,er.jsx)("div",{className:"mt-6 p-4 bg-indigo-50 rounded-lg",children:(0,er.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("span",{className:"text-gray-600",children:"Total Ingredients:"}),(0,er.jsx)("span",{className:"font-semibold ml-2",children:n.length})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("span",{className:"text-gray-600",children:"Total Quantity:"}),(0,er.jsx)("span",{className:"font-semibold ml-2",children:n.reduce((e,t)=>e+t.totalQuantity,0).toFixed(2)})]})]})})]})}),(0,er.jsx)("div",{className:"bg-gray-50 p-4 flex justify-end",children:(0,er.jsx)("button",{onClick:()=>Q(null),className:"bg-indigo-600 hover:bg-indigo-700 text-white font-semibold px-6 py-2 rounded-lg transition-colors",children:"Close"})})]})})})(),ne&&(()=>{const e=v.find(e=>e.id===ne),t=j.find(t=>t.id===(null===e||void 0===e?void 0:e.room_id));return(0,er.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,er.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[(0,er.jsxs)("div",{className:"bg-purple-600 text-white p-6 flex justify-between items-center",children:[(0,er.jsxs)("div",{children:[(0,er.jsxs)("h3",{className:"text-2xl font-bold flex items-center gap-2",children:[(0,er.jsx)(z$,{size:24}),"Delivery Request"]}),(0,er.jsxs)("p",{className:"text-purple-100 mt-1",children:["Room: ",(null===t||void 0===t?void 0:t.number)||(null===t||void 0===t?void 0:t.room_number)||(null===e||void 0===e?void 0:e.room_id)," | Order #",null===e||void 0===e?void 0:e.id," | Room Service"]})]}),(0,er.jsx)("button",{onClick:()=>{se(null),oe("")},className:"text-white hover:text-gray-200 transition-colors",children:(0,er.jsx)(ZQ,{size:24})})]}),(0,er.jsx)("div",{className:"p-6 overflow-y-auto flex-1",children:(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Delivery Instructions / Special Requests"}),(0,er.jsx)("textarea",{placeholder:"Enter delivery instructions, timing preferences, special requests, or any notes for the room service delivery...",className:"w-full border rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 transition resize-none",rows:"6",value:ie,onChange:e=>oe(e.target.value)}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Add any special delivery instructions, timing preferences, or notes for the room service order."})]}),(null===e||void 0===e?void 0:e.delivery_request)&&(0,er.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[(0,er.jsx)("p",{className:"text-xs font-semibold text-gray-600 mb-1",children:"Current Request:"}),(0,er.jsx)("p",{className:"text-sm text-gray-700",children:e.delivery_request})]})]})}),(0,er.jsxs)("div",{className:"bg-gray-50 p-4 flex justify-end gap-3",children:[(0,er.jsx)("button",{onClick:()=>{se(null),oe("")},className:"bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold px-6 py-2 rounded-lg transition-colors",children:"Cancel"}),(0,er.jsx)("button",{onClick:()=>(async e=>{try{await Ia.put("/food-orders/".concat(e),{delivery_request:ie}),se(null),oe(""),Tt.success("Delivery request updated successfully!"),bt()}catch(pe){console.error("Failed to update delivery request:",pe),Tt.error("Failed to update delivery request.")}})(ne),className:"bg-purple-600 hover:bg-purple-700 text-white font-semibold px-6 py-2 rounded-lg transition-colors",children:null!==e&&void 0!==e&&e.delivery_request?"Update Request":"Submit Request"})]})]})})})(),le&&(0,er.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,er.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full",children:[(0,er.jsxs)("div",{className:"bg-indigo-600 text-white p-6 rounded-t-2xl",children:[(0,er.jsx)("h3",{className:"text-xl font-bold",children:"Complete Food Order"}),(0,er.jsxs)("p",{className:"text-indigo-100 mt-1",children:["Order #",le.id," | Room: ",(null===(e=j.find(e=>e.id===le.room_id))||void 0===e?void 0:e.number)||le.room_id]})]}),(0,er.jsxs)("div",{className:"p-6 space-y-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Status *"}),(0,er.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,er.jsx)("button",{type:"button",onClick:()=>ue("paid"),className:"p-3 border-2 rounded-xl transition-all ".concat("paid"===de?"border-green-500 bg-green-50 text-green-700":"border-gray-300 hover:border-green-300 text-gray-700"),children:(0,er.jsx)("span",{className:"font-semibold",children:"Paid"})}),(0,er.jsx)("button",{type:"button",onClick:()=>ue("unpaid"),className:"p-3 border-2 rounded-xl transition-all ".concat("unpaid"===de?"border-red-500 bg-red-50 text-red-700":"border-gray-300 hover:border-red-300 text-gray-700"),children:(0,er.jsx)("span",{className:"font-semibold",children:"Unpaid"})})]})]}),"room_service"===le.order_type&&(0,er.jsx)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-3",children:(0,er.jsxs)("p",{className:"text-sm text-purple-700",children:[(0,er.jsx)("strong",{children:"Note:"})," A delivery service request will be automatically created for this room service order."]})}),(0,er.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,er.jsx)("button",{onClick:()=>{ce(null),ue("unpaid")},className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold px-4 py-2 rounded-lg transition-colors",children:"Cancel"}),(0,er.jsx)("button",{onClick:async()=>{if(!le)return;const e=le.id;b(t=>t.map(t=>t.id===e?Be(Be({},t),{},{status:"completed",billing_status:de}):t)),ce(null),ue("unpaid");try{await Ia.put("/food-orders/".concat(e),{status:"completed",billing_status:de}),Tt.success("Order completed successfully!"),bt(),"dashboard"===r&&ht()}catch(pe){console.error("Failed to complete order:",pe),Tt.error("Failed to complete order."),bt()}},className:"flex-1 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold px-4 py-2 rounded-lg transition-colors",children:"Complete Order"})]})]})]})}),"requests"===r&&(0,er.jsxs)("div",{className:"space-y-6",children:[(0,er.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,er.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,er.jsx)("h3",{className:"text-sm font-medium text-gray-600 mb-2",children:"Total Requests"}),(0,er.jsx)("p",{className:"text-3xl font-bold text-indigo-600",children:s.length})]}),(0,er.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,er.jsx)("h3",{className:"text-sm font-medium text-gray-600 mb-2",children:"Pending"}),(0,er.jsx)("p",{className:"text-3xl font-bold text-yellow-600",children:s.filter(e=>"pending"===e.status).length})]}),(0,er.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,er.jsx)("h3",{className:"text-sm font-medium text-gray-600 mb-2",children:"In Progress"}),(0,er.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:s.filter(e=>"in_progress"===e.status).length})]}),(0,er.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,er.jsx)("h3",{className:"text-sm font-medium text-gray-600 mb-2",children:"Completed"}),(0,er.jsx)("p",{className:"text-3xl font-bold text-green-600",children:s.filter(e=>"completed"===e.status).length})]})]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[(0,er.jsxs)("div",{className:"bg-gradient-to-r from-emerald-500 to-emerald-700 rounded-xl shadow-lg p-6 text-white",children:[(0,er.jsx)("h3",{className:"text-sm font-medium opacity-90 mb-2",children:"Avg Fulfillment Time"}),(0,er.jsx)("p",{className:"text-2xl font-bold",children:(()=>{const e=s.filter(e=>"completed"===e.status&&e.created_at&&e.completed_at);if(0===e.length)return"N/A";const t=e.reduce((e,t)=>{const r=new Date(t.created_at);return e+(new Date(t.completed_at)-r)},0)/e.length,r=Math.floor(t/6e4);return r<60?"".concat(r,"m"):"".concat(Math.floor(r/60),"h ").concat(r%60,"m")})()}),(0,er.jsx)("p",{className:"text-xs opacity-75 mt-1",children:"Time to complete"})]}),(0,er.jsxs)("div",{className:"bg-gradient-to-r from-blue-500 to-blue-700 rounded-xl shadow-lg p-6 text-white",children:[(0,er.jsx)("h3",{className:"text-sm font-medium opacity-90 mb-2",children:"Completion Rate"}),(0,er.jsxs)("p",{className:"text-2xl font-bold",children:[s.length>0?(s.filter(e=>"completed"===e.status).length/s.length*100).toFixed(1):0,"%"]}),(0,er.jsx)("p",{className:"text-xs opacity-75 mt-1",children:"Requests completed"})]}),(0,er.jsxs)("div",{className:"bg-gradient-to-r from-purple-500 to-purple-700 rounded-xl shadow-lg p-6 text-white",children:[(0,er.jsx)("h3",{className:"text-sm font-medium opacity-90 mb-2",children:"Assigned Rate"}),(0,er.jsxs)("p",{className:"text-2xl font-bold",children:[s.length>0?(s.filter(e=>e.employee_id).length/s.length*100).toFixed(1):0,"%"]}),(0,er.jsx)("p",{className:"text-xs opacity-75 mt-1",children:"With assigned employee"})]})]}),(0,er.jsxs)("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[(0,er.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,er.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Food Order Requests"})}),(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"w-full",children:[(0,er.jsx)("thead",{className:"bg-gray-50",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"py-3 px-4 text-left text-sm font-semibold text-gray-700",children:"ID"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left text-sm font-semibold text-gray-700",children:"Room"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left text-sm font-semibold text-gray-700",children:"Food Order"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left text-sm font-semibold text-gray-700",children:"Request Type"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left text-sm font-semibold text-gray-700",children:"Description"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left text-sm font-semibold text-gray-700",children:"Employee"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left text-sm font-semibold text-gray-700",children:"Status"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left text-sm font-semibold text-gray-700",children:"Created At"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left text-sm font-semibold text-gray-700",children:"Actions"})]})}),(0,er.jsx)("tbody",{className:"divide-y divide-gray-200",children:0===s.length?(0,er.jsx)("tr",{children:(0,er.jsx)("td",{colSpan:"9",className:"py-8 text-center text-gray-500",children:"No food order requests found"})}):s.map(e=>{var t,r,n;return(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsx)("td",{className:"py-3 px-4 text-sm",children:e.id}),(0,er.jsx)("td",{className:"py-3 px-4 text-sm",children:(null===(t=e.room)||void 0===t?void 0:t.number)||e.room_number||"N/A"}),(0,er.jsx)("td",{className:"py-3 px-4 text-sm",children:e.food_order?(0,er.jsxs)("div",{children:[(0,er.jsxs)("div",{className:"font-medium",children:["Order #",e.food_order.id]}),(0,er.jsxs)("div",{className:"text-gray-500 text-xs",children:["\u20b9",e.food_order.amount||e.food_order_amount||"0"]})]}):"N/A"}),(0,er.jsx)("td",{className:"py-3 px-4 text-sm capitalize",children:e.request_type||"delivery"}),(0,er.jsx)("td",{className:"py-3 px-4 text-sm max-w-xs truncate",children:e.description||"No description"}),(0,er.jsx)("td",{className:"py-3 px-4 text-sm",children:(null===(r=e.employee)||void 0===r?void 0:r.name)||e.employee_name||(0,er.jsx)("span",{className:"text-gray-400",children:"Unassigned"})}),(0,er.jsx)("td",{className:"py-3 px-4",children:(0,er.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("pending"===e.status?"bg-yellow-100 text-yellow-800":"in_progress"===e.status?"bg-blue-100 text-blue-800":"completed"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:(null===(n=e.status)||void 0===n?void 0:n.replace("_"," ").toUpperCase())||"PENDING"})}),(0,er.jsx)("td",{className:"py-3 px-4 text-sm text-gray-600",children:e.created_at?new Date(e.created_at).toLocaleString():"N/A"}),(0,er.jsx)("td",{className:"py-3 px-4",children:(0,er.jsxs)("div",{className:"flex gap-2",children:["pending"===e.status&&(0,er.jsxs)(er.Fragment,{children:[(0,er.jsx)("button",{onClick:()=>(async e=>{try{await Ia.put("/service-requests/".concat(e),{status:"in_progress"}),Tt.success("Request accepted successfully!"),ft(),vt()}catch(pe){console.error("Failed to accept request:",pe),Tt.error("Failed to accept request.")}})(e.id),className:"bg-green-500 hover:bg-green-600 text-white text-xs py-1 px-3 rounded transition-colors",children:"Accept"}),(0,er.jsx)("button",{onClick:()=>l(e.id),className:"bg-blue-500 hover:bg-blue-600 text-white text-xs py-1 px-3 rounded transition-colors",children:"Assign"})]}),"in_progress"===e.status&&(0,er.jsx)("button",{onClick:()=>(async(e,t)=>{try{await Ia.put("/service-requests/".concat(e),{status:t}),Tt.success("Request status updated successfully!"),ft(),vt()}catch(pe){console.error("Failed to update request status:",pe),Tt.error("Failed to update request status.")}})(e.id,"completed"),className:"bg-purple-500 hover:bg-purple-600 text-white text-xs py-1 px-3 rounded transition-colors",children:"Complete"}),!e.employee_id&&"pending"!==e.status&&(0,er.jsx)("button",{onClick:()=>l(e.id),className:"bg-indigo-500 hover:bg-indigo-600 text-white text-xs py-1 px-3 rounded transition-colors",children:"Assign Employee"}),(0,er.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this request?"))try{await Ia.delete("/service-requests/".concat(e)),Tt.success("Request deleted successfully!"),ft()}catch(pe){console.error("Failed to delete request:",pe),Tt.error("Failed to delete request.")}})(e.id),className:"bg-red-500 hover:bg-red-600 text-white text-xs py-1 px-3 rounded transition-colors",children:"Delete"})]})})]},e.id)})})]})})]}),o&&(0,er.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,er.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl p-6 max-w-md w-full mx-4",children:[(0,er.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Assign Employee"}),(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Employee"}),(0,er.jsxs)("select",{value:c,onChange:e=>d(e.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-indigo-500",children:[(0,er.jsx)("option",{value:"",children:"Choose an employee..."}),N.map(e=>(0,er.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,er.jsxs)("div",{className:"flex gap-3",children:[(0,er.jsx)("button",{onClick:()=>{l(null),d("")},className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold py-2 px-4 rounded-lg transition-colors",children:"Cancel"}),(0,er.jsx)("button",{onClick:()=>(async e=>{if(c)try{await Ia.put("/service-requests/".concat(e),{employee_id:parseInt(c),status:"in_progress"}),Tt.success("Employee assigned successfully!"),l(null),d(""),ft(),vt()}catch(pe){console.error("Failed to assign employee:",pe),Tt.error("Failed to assign employee.")}else Tt.error("Please select an employee.")})(o),className:"flex-1 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors",children:"Assign"})]})]})]})})]}),"management"===r&&(0,er.jsxs)("div",{className:"space-y-6",children:[pe&&(0,er.jsx)("div",{className:"p-4 mb-4 text-center text-red-700 bg-red-100 border border-red-200 rounded-lg",children:pe}),(0,er.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,er.jsx)(lt,{title:"Total Food Items",value:Ct,color:"bg-gradient-to-r from-green-500 to-green-700",icon:(0,er.jsx)("i",{className:"fas fa-utensils"})}),(0,er.jsx)(lt,{title:"Item Categories",value:Et,color:"bg-gradient-to-r from-blue-500 to-blue-700",icon:(0,er.jsx)("i",{className:"fas fa-tags"})}),(0,er.jsx)(lt,{title:"Items Available",value:Pt,color:"bg-gradient-to-r from-purple-500 to-purple-700",icon:(0,er.jsx)("i",{className:"fas fa-check-circle"})})]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,er.jsx)("div",{className:"bg-gradient-to-r from-emerald-500 to-emerald-700 rounded-xl shadow-lg p-6 text-white",children:(0,er.jsxs)("div",{className:"flex justify-between items-center",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm font-medium opacity-90",children:"Avg Item Price"}),(0,er.jsxs)("p",{className:"text-3xl font-bold mt-1",children:["\u20b9",Ct>0?(k.reduce((e,t)=>e+(parseFloat(t.price)||0),0)/Ct).toLocaleString("en-IN",{maximumFractionDigits:2}):"0.00"]})]}),(0,er.jsx)("div",{className:"text-4xl opacity-80",children:"\ud83d\udcb0"})]})}),(0,er.jsx)("div",{className:"bg-gradient-to-r from-orange-500 to-orange-700 rounded-xl shadow-lg p-6 text-white",children:(0,er.jsxs)("div",{className:"flex justify-between items-center",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm font-medium opacity-90",children:"Items with Recipes"}),(0,er.jsx)("p",{className:"text-3xl font-bold mt-1",children:Object.keys(x).length}),(0,er.jsxs)("p",{className:"text-xs opacity-75 mt-1",children:[Ct>0?(Object.keys(x).length/Ct*100).toFixed(1):0,"% coverage"]})]}),(0,er.jsx)("div",{className:"text-4xl opacity-80",children:"\ud83d\udccb"})]})}),(0,er.jsx)("div",{className:"bg-gradient-to-r from-pink-500 to-pink-700 rounded-xl shadow-lg p-6 text-white",children:(0,er.jsxs)("div",{className:"flex justify-between items-center",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm font-medium opacity-90",children:"Time-based Pricing"}),(0,er.jsx)("p",{className:"text-3xl font-bold mt-1",children:k.filter(e=>e.time_wise_prices&&e.time_wise_prices.length>0).length}),(0,er.jsx)("p",{className:"text-xs opacity-75 mt-1",children:"Items with time pricing"})]}),(0,er.jsx)("div",{className:"text-4xl opacity-80",children:"\u23f0"})]})}),(0,er.jsx)("div",{className:"bg-gradient-to-r from-cyan-500 to-cyan-700 rounded-xl shadow-lg p-6 text-white",children:(0,er.jsxs)("div",{className:"flex justify-between items-center",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm font-medium opacity-90",children:"Room Service Items"}),(0,er.jsx)("p",{className:"text-3xl font-bold mt-1",children:k.filter(e=>e.room_service_price).length}),(0,er.jsx)("p",{className:"text-xs opacity-75 mt-1",children:"With room service pricing"})]}),(0,er.jsx)("div",{className:"text-4xl opacity-80",children:"\ud83d\ude9a"})]})})]}),(0,er.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg",children:[(0,er.jsxs)("div",{className:"mb-6",children:[(0,er.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"\ud83c\udf7d\ufe0f Food Item Management"}),(0,er.jsx)("p",{className:"text-sm text-gray-500",children:"Create and manage food items for your menu"})]}),(0,er.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),me(!0);const t=new FormData;t.append("name",ge),t.append("description",ye),t.append("price",be),we&&t.append("room_service_price",we),t.append("category_id",He),t.append("available",Te),t.append("always_available",Oe),_e.forEach(e=>t.append("images",e)),Oe||(Ze&&t.append("available_from_time",Ze),tt&&t.append("available_to_time",tt)),Xe.length>0&&t.append("extra_inventory_items",JSON.stringify(Xe.map(e=>({inventory_item_id:parseInt(e.inventory_item_id),quantity:parseFloat(e.quantity)||0,for_room_service:!0})))),nt.length>0&&t.append("time_wise_prices",JSON.stringify(nt.map(e=>({from_time:e.from_time,to_time:e.to_time,price:parseFloat(e.price)||0}))));try{Ce?(await Ia.put("/food-items/".concat(Ce,"/"),t,{headers:{Authorization:"Bearer ".concat(it),"Content-Type":"multipart/form-data"}}),Tt.success("Food item updated successfully!")):(await Ia.post("/food-items/",t,{headers:{Authorization:"Bearer ".concat(it),"Content-Type":"multipart/form-data"}}),Tt.success("Food item added successfully!")),xt(),yt()}catch(r){console.error("Failed to save food item",r),Tt.error("Failed to save food item.")}finally{me(!1)}},className:"space-y-6",children:[(0,er.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-200",children:[(0,er.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[(0,er.jsx)("span",{className:"w-1 h-6 bg-indigo-600 rounded"}),"Basic Information"]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Item Name *"}),(0,er.jsx)("input",{type:"text",placeholder:"Enter food item name",className:"w-full border border-gray-300 rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition",value:ge,onChange:e=>xe(e.target.value),required:!0})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),(0,er.jsxs)("select",{className:"w-full border border-gray-300 rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition",value:He,onChange:e=>Ge(e.target.value),required:!0,children:[(0,er.jsx)("option",{value:"",children:"Select a category"}),We.map(e=>(0,er.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,er.jsxs)("div",{className:"md:col-span-2",children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),(0,er.jsx)("textarea",{placeholder:"Describe the food item...",className:"w-full border border-gray-300 rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition resize-none",rows:"3",value:ye,onChange:e=>ve(e.target.value),required:!0})]})]})]}),(0,er.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-200",children:[(0,er.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[(0,er.jsx)("span",{className:"w-1 h-6 bg-indigo-600 rounded"}),"Pricing"]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dine In Price (\u20b9) *"}),(0,er.jsx)("input",{type:"number",placeholder:"0.00",step:"0.01",min:"0",className:"w-full border border-gray-300 rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition",value:be,onChange:e=>je(e.target.value),required:!0})]}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Room Service / Parcel Price (\u20b9)",(0,er.jsx)("span",{className:"text-xs text-gray-500 ml-1",children:"(Optional)"})]}),(0,er.jsx)("input",{type:"number",placeholder:"0.00",step:"0.01",min:"0",className:"w-full border border-gray-300 rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition",value:we,onChange:e=>Ne(e.target.value)})]})]})]}),(0,er.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-200",children:[(0,er.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[(0,er.jsx)("span",{className:"w-1 h-6 bg-indigo-600 rounded"}),"Availability Settings"]}),(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-white rounded-lg border border-gray-200",children:[(0,er.jsx)("input",{type:"checkbox",id:"available",checked:Te,onChange:e=>Pe(e.target.checked),className:"w-5 h-5 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),(0,er.jsx)("label",{htmlFor:"available",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Make this item available for ordering"})]}),(0,er.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[(0,er.jsx)("input",{type:"checkbox",id:"alwaysAvailable",checked:Oe,onChange:e=>{De(e.target.checked),e.target.checked&&(et(""),rt(""))},className:"w-5 h-5 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),(0,er.jsx)("label",{htmlFor:"alwaysAvailable",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Always Available (24/7)"}),(0,er.jsx)("span",{className:"text-xs text-gray-500 ml-auto",children:"Available at all times"})]}),!Oe&&(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Available From"}),(0,er.jsx)("input",{type:"time",value:Ze,onChange:e=>et(e.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Available Until"}),(0,er.jsx)("input",{type:"time",value:tt,onChange:e=>rt(e.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition"})]})]})]})]}),(0,er.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-200",children:[(0,er.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[(0,er.jsx)("span",{className:"w-1 h-6 bg-indigo-600 rounded"}),"Images",(0,er.jsx)("span",{className:"text-xs font-normal text-gray-500 ml-2",children:"(Optional)"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Images"}),(0,er.jsx)("input",{type:"file",multiple:!0,accept:"image/*",onChange:e=>{const t=Array.from(e.target.files);ke(e=>[...e,...t]);const r=t.map(e=>URL.createObjectURL(e));Ae(e=>[...e,...r])},className:"w-full border border-gray-300 rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100"}),Se.length>0&&(0,er.jsx)("div",{className:"grid grid-cols-4 gap-3 mt-4",children:Se.map((e,t)=>(0,er.jsxs)("div",{className:"relative group",children:[(0,er.jsx)("img",{src:e,alt:"Preview ".concat(t+1),className:"w-full h-24 object-cover rounded-lg border-2 border-gray-200"}),(0,er.jsx)("button",{type:"button",onClick:()=>(e=>{ke(t=>t.filter((t,r)=>r!==e)),Ae(t=>t.filter((t,r)=>r!==e))})(t),className:"absolute -top-2 -right-2 bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:"\xd7"})]},t))})]})]}),(0,er.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-200",children:[(0,er.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[(0,er.jsx)("span",{className:"w-1 h-6 bg-indigo-600 rounded"}),"Extra Items for Room Service/Parcel"]}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Add packaging, condiments, or other items (only for room service/parcel orders)"})]}),(0,er.jsxs)("button",{type:"button",onClick:()=>{Qe([...Xe,{inventory_item_id:"",quantity:1}])},className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2",children:[(0,er.jsx)("span",{children:"+"})," Add Item"]})]}),0===Xe.length?(0,er.jsxs)("div",{className:"text-center py-8 bg-white rounded-lg border-2 border-dashed border-gray-300",children:[(0,er.jsx)("p",{className:"text-sm text-gray-500",children:"No extra items added"}),(0,er.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:'Click "Add Item" to add packaging or condiments'})]}):(0,er.jsx)("div",{className:"space-y-3",children:Xe.map((e,t)=>(0,er.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-200 flex items-center gap-3",children:[(0,er.jsxs)("select",{value:e.inventory_item_id,onChange:e=>dt(t,"inventory_item_id",e.target.value),className:"flex-1 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[(0,er.jsx)("option",{value:"",children:"Select inventory item"}),$e.map(e=>(0,er.jsxs)("option",{value:e.id,children:[e.name," (",e.unit,")"]},e.id))]}),(0,er.jsx)("input",{type:"number",placeholder:"Qty",value:e.quantity,onChange:e=>dt(t,"quantity",e.target.value),className:"w-24 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",min:"0",step:"0.01"}),(0,er.jsx)("button",{type:"button",onClick:()=>(e=>{Qe(Xe.filter((t,r)=>r!==e))})(t),className:"bg-red-100 hover:bg-red-200 text-red-700 px-3 py-2 rounded-lg text-sm transition-colors",children:"Remove"})]},t))})]}),(0,er.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-200",children:[(0,er.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[(0,er.jsx)("span",{className:"w-1 h-6 bg-indigo-600 rounded"}),"Time-based Pricing",(0,er.jsx)("span",{className:"text-xs font-normal text-gray-500 ml-2",children:"(Optional)"})]}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Set different prices for breakfast, lunch, dinner, etc."})]}),(0,er.jsxs)("button",{type:"button",onClick:()=>{at([...nt,{from_time:"",to_time:"",price:""}])},className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2",children:[(0,er.jsx)("span",{children:"+"})," Add Price"]})]}),0===nt.length?(0,er.jsxs)("div",{className:"text-center py-8 bg-white rounded-lg border-2 border-dashed border-gray-300",children:[(0,er.jsx)("p",{className:"text-sm text-gray-500",children:"No time-based pricing set"}),(0,er.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Base price will be used for all times"})]}):(0,er.jsx)("div",{className:"space-y-3",children:nt.map((e,t)=>(0,er.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-200 grid grid-cols-12 gap-3 items-center",children:[(0,er.jsxs)("div",{className:"col-span-3",children:[(0,er.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"From"}),(0,er.jsx)("input",{type:"time",value:e.from_time,onChange:e=>ut(t,"from_time",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0})]}),(0,er.jsxs)("div",{className:"col-span-3",children:[(0,er.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"To"}),(0,er.jsx)("input",{type:"time",value:e.to_time,onChange:e=>ut(t,"to_time",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0})]}),(0,er.jsxs)("div",{className:"col-span-4",children:[(0,er.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Price (\u20b9)"}),(0,er.jsx)("input",{type:"number",placeholder:"0.00",value:e.price,onChange:e=>ut(t,"price",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",min:"0",step:"0.01",required:!0})]}),(0,er.jsx)("div",{className:"col-span-2",children:(0,er.jsx)("button",{type:"button",onClick:()=>(e=>{at(nt.filter((t,r)=>r!==e))})(t),className:"w-full bg-red-100 hover:bg-red-200 text-red-700 px-3 py-2 rounded-lg text-sm transition-colors mt-6",children:"Remove"})})]},t))})]}),(0,er.jsxs)("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[(0,er.jsx)("button",{type:"submit",className:"flex-1 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors shadow-md hover:shadow-lg",children:Ce?"Update Food Item":"Create Food Item"}),Ce&&(0,er.jsx)("button",{type:"button",onClick:yt,className:"bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold py-3 px-6 rounded-lg transition-colors",children:"Cancel"})]})]}),(0,er.jsxs)("div",{className:"mt-8",children:[(0,er.jsxs)("div",{className:"mb-6",children:[(0,er.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"All Food Items"}),(0,er.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,er.jsx)("div",{className:"flex-1 min-w-[200px]",children:(0,er.jsx)("input",{type:"text",placeholder:"\ud83d\udd0d Search items...",className:"w-full border border-gray-300 rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition",value:Ie.search,onChange:e=>Le(Be(Be({},Ie),{},{search:e.target.value}))})}),(0,er.jsxs)("select",{className:"border border-gray-300 rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition min-w-[150px]",value:Ie.category,onChange:e=>Le(Be(Be({},Ie),{},{category:e.target.value})),children:[(0,er.jsx)("option",{value:"all",children:"All Categories"}),We.map(e=>(0,er.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,er.jsxs)("select",{className:"border border-gray-300 rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition min-w-[150px]",value:Ie.availability,onChange:e=>Le(Be(Be({},Ie),{},{availability:e.target.value})),children:[(0,er.jsx)("option",{value:"all",children:"All Status"}),(0,er.jsx)("option",{value:"available",children:"Available"}),(0,er.jsx)("option",{value:"unavailable",children:"Unavailable"})]})]})]}),(0,er.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:0===Ot.length?(0,er.jsxs)("div",{className:"col-span-full text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[(0,er.jsx)("p",{className:"text-gray-500",children:"No food items found"}),(0,er.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Try adjusting your filters"})]}):Ot.map(e=>(0,er.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-md transition-shadow",children:[e.images&&e.images.length>0&&(0,er.jsxs)("div",{className:"relative h-40 bg-gray-100",children:[(0,er.jsx)("img",{src:ot(e.images[0].image_url),alt:e.name,className:"w-full h-full object-cover"}),(0,er.jsx)("span",{className:"absolute top-2 right-2 px-2 py-1 rounded-full text-xs font-medium ".concat(e.available?"bg-green-500 text-white":"bg-red-500 text-white"),children:e.available?"Available":"Unavailable"})]}),(0,er.jsxs)("div",{className:"p-4",children:[(0,er.jsx)("h3",{className:"font-semibold text-lg text-gray-800 mb-1",children:e.name}),(0,er.jsx)("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:e.description}),(0,er.jsxs)("div",{className:"mb-3 space-y-2",children:[(0,er.jsxs)("div",{className:"flex justify-between items-center",children:[(0,er.jsx)("span",{className:"text-sm text-gray-500",children:"Dine In:"}),(0,er.jsxs)("span",{className:"font-semibold text-indigo-600",children:["\u20b9",e.price||0]})]}),e.room_service_price&&(0,er.jsxs)("div",{className:"flex justify-between items-center",children:[(0,er.jsx)("span",{className:"text-sm text-gray-500",children:"Room Service:"}),(0,er.jsxs)("span",{className:"font-semibold text-purple-600",children:["\u20b9",e.room_service_price]})]})]}),(()=>{const t=x[e.id];let r=0;if(t&&t.ingredients&&Array.isArray(t.ingredients)){const e=t.servings||1;t.ingredients.forEach(t=>{const n=$e.find(e=>e.id===t.inventory_item_id);n&&n.unit_price&&(r+=(t.quantity||0)*n.unit_price/e)})}const n=parseFloat(e.price||0)-r,a=parseFloat(e.price||0)>0?n/parseFloat(e.price||0)*100:0;return r>0?(0,er.jsx)("div",{className:"mb-3 p-2 bg-gray-50 rounded border border-gray-200",children:(0,er.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[(0,er.jsxs)("div",{className:"text-center",children:[(0,er.jsx)("p",{className:"text-gray-500 mb-1",children:"Cost"}),(0,er.jsxs)("p",{className:"font-semibold text-red-600",children:["\u20b9",r.toFixed(0)]})]}),(0,er.jsxs)("div",{className:"text-center",children:[(0,er.jsx)("p",{className:"text-gray-500 mb-1",children:"Profit"}),(0,er.jsxs)("p",{className:"font-semibold ".concat(n>=0?"text-green-600":"text-red-600"),children:["\u20b9",n.toFixed(0)]})]}),(0,er.jsxs)("div",{className:"text-center",children:[(0,er.jsx)("p",{className:"text-gray-500 mb-1",children:"Margin"}),(0,er.jsxs)("p",{className:"font-semibold ".concat(a>=0?"text-green-600":"text-red-600"),children:[a.toFixed(0),"%"]})]})]})}):null})(),(0,er.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,er.jsx)("button",{onClick:()=>(e=>{var t;Ee(e.id),xe(e.name),ve(e.description),je(e.price||""),Ne(e.room_service_price||""),Ge(e.category_id),Pe(e.available),De(e.always_available||!1),Ae((null===(t=e.images)||void 0===t?void 0:t.map(e=>ot(e.image_url)))||[]),ke([]),et(e.available_from_time||""),rt(e.available_to_time||""),Qe(e.extra_inventory_items||[]),at(e.time_wise_prices||[])})(e),className:"flex-1 bg-indigo-600 hover:bg-indigo-700 text-white text-sm py-2 px-3 rounded-lg transition-colors font-medium",children:"Edit"}),(0,er.jsx)("button",{onClick:()=>(async e=>{me(!0);try{await Ia.patch("/food-items/".concat(e.id,"/toggle-availability?available=").concat(!e.available),null,{headers:{Authorization:"Bearer ".concat(it)}}),xt(),Tt.success("Item status toggled to ".concat(e.available?"Not Available":"Available"))}catch(t){console.error("Failed to toggle availability",t),Tt.error("Failed to toggle availability.")}finally{me(!1)}})(e),className:"bg-gray-200 hover:bg-gray-300 text-gray-700 text-sm py-2 px-3 rounded-lg transition-colors font-medium",children:e.available?"Hide":"Show"}),(0,er.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this item?")){me(!0);try{await Ia.delete("/food-items/".concat(e),{headers:{Authorization:"Bearer ".concat(it)}}),xt(),Tt.success("Food item deleted successfully!")}catch(t){console.error("Delete failed",t),Tt.error("Failed to delete food item.")}finally{me(!1)}}})(e.id),className:"bg-red-100 hover:bg-red-200 text-red-700 text-sm py-2 px-3 rounded-lg transition-colors font-medium",children:"Delete"})]})]})]},e.id))})]})]}),(0,er.jsxs)("div",{className:"bg-white p-8 rounded-2xl shadow-lg",children:[(0,er.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"\ud83d\udcc1 Category Management"}),(0,er.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!Me)return void Tt.error("Please fill in the category name.");me(!0);const t=new FormData;t.append("name",Me),Fe&&t.append("image",Fe);try{if(Ke)await Ia.put("/food-categories/".concat(Ke),t,{headers:{Authorization:"Bearer ".concat(it)}}),Ye(null),Tt.success("Category updated successfully!");else{if(!Fe)return Tt.error("Please select an image for the new category."),void me(!1);await Ia.post("/food-categories",t,{headers:{Authorization:"Bearer ".concat(it)}}),Tt.success("Category added successfully!")}Re(""),ze(null),qe(null),gt()}catch(i){var r,n,a,s;console.error("Failed to save category:",i);const e=(null===(r=i.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.detail)||(null===(a=i.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||i.message||"Failed to save category.";Tt.error("Failed to save category: ".concat(e))}finally{me(!1)}},className:"mb-6",children:[(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,er.jsx)("input",{type:"text",placeholder:"Category Name",className:"border border-gray-300 rounded-xl px-4 py-3 focus:ring-2 focus:ring-indigo-500",value:Me,onChange:e=>Re(e.target.value),required:!0}),(0,er.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];ze(t),qe(t?URL.createObjectURL(t):null)},className:"border border-gray-300 rounded-xl px-4 py-3 focus:ring-2 focus:ring-indigo-500",required:!Ke}),(0,er.jsxs)("div",{className:"flex gap-2",children:[(0,er.jsx)("button",{type:"submit",className:"flex-1 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 px-6 rounded-xl",children:Ke?"Update Category":"Add Category"}),Ke&&(0,er.jsx)("button",{type:"button",onClick:()=>{Ye(null),Re(""),ze(null),qe(null)},className:"bg-gray-500 hover:bg-gray-600 text-white font-semibold py-3 px-6 rounded-xl",children:"Cancel"})]})]}),Ue&&(0,er.jsx)("img",{src:Ue,alt:"Preview",className:"mt-4 w-32 h-32 object-cover rounded border"})]}),(0,er.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:We.map(e=>(0,er.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 text-center hover:shadow-lg transition-shadow",children:[(0,er.jsx)("img",{src:ot("static/food_categories/".concat(e.image)),alt:e.name,className:"w-full h-24 object-cover rounded mb-2"}),(0,er.jsx)("h3",{className:"font-semibold mb-2",children:e.name}),(0,er.jsxs)("div",{className:"flex gap-2",children:[(0,er.jsx)("button",{onClick:()=>(e=>{Ye(e.id),Re(e.name),qe(ot("static/food_categories/".concat(e.image))),ze(null)})(e),className:"flex-1 bg-blue-500 hover:bg-blue-600 text-white text-xs py-1 px-2 rounded",children:"Edit"}),(0,er.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this category?")){me(!0);try{await Ia.delete("/food-categories/".concat(e),{headers:{Authorization:"Bearer ".concat(it)}}),gt(),Tt.success("Category deleted successfully!")}catch(t){console.error("Failed to delete:",t),Tt.error("Failed to delete category. Check if it's in use.")}finally{me(!1)}}})(e.id),className:"flex-1 bg-red-500 hover:bg-red-600 text-white text-xs py-1 px-2 rounded",children:"Delete"})]})]},e.id))})]})]})]})})}const W$=Xh("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),V$=Xh("BedDouble",[["path",{d:"M2 20v-8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v8",key:"1k78r4"}],["path",{d:"M4 10V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4",key:"fb3tl2"}],["path",{d:"M12 4v6",key:"1dcgq2"}],["path",{d:"M2 18h20",key:"ajqnye"}]]),H$=Xh("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]),G$=Xh("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),K$=Xh("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Y$=Xh("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);var X$=r(7762),Q$=r(557),$$=r.n(Q$);const J$=Aa.create({baseURL:Pa()});J$.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e));J$.interceptors.response.use(e=>e,e=>(e.response&&401===e.response.status&&(localStorage.removeItem("token"),window.location.href="undefined"===typeof window?"/admin/login":(window.location.pathname||"").startsWith("/pommaadmin")?"/pommaadmin/login":"/admin/login"),Promise.reject(e)));const Z$=a.memo(e=>{let{title:t,value:r,icon:n,color:a,prefix:s="",suffix:i=""}=e;return(0,er.jsxs)("div",{className:"bg-white p-4 rounded-xl shadow-md flex items-center",children:[(0,er.jsx)("div",{className:"rounded-full p-3 mr-4 ".concat(a),children:n}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm text-gray-500 font-medium",children:t}),(0,er.jsxs)("p",{className:"text-2xl font-bold text-gray-800",children:[s,r,i]})]})]})});Z$.displayName="KpiCard";const eJ=a.memo(e=>{var t,r,n,s,i,o,l,c,d,u,h,m,p,f,g;let{checkout:x,onClose:y}=e;const[v,b]=(0,a.useState)(null),[j,w]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{x&&(w(!0),J$.get("/bill/checkouts/".concat(x.id,"/details")).then(e=>{b(e.data)}).catch(e=>{console.error("Failed to load checkout details:",e),b(null)}).finally(()=>w(!1)))},[x]),x?(0,er.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4 overflow-y-auto",children:(0,er.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] p-6 relative animate-fade-in-up overflow-y-auto",children:[(0,er.jsx)("button",{onClick:y,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 z-10",children:(0,er.jsx)(ZQ,{size:24})}),(0,er.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:["Checkout Details (ID: ",x.id,")"]}),j?(0,er.jsx)("div",{className:"text-center py-8",children:"Loading details..."}):v?(0,er.jsxs)("div",{className:"space-y-6",children:[(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm text-gray-500",children:"Guest Name"}),(0,er.jsx)("p",{className:"font-semibold",children:v.guest_name||"N/A"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm text-gray-500",children:"Rooms"}),(0,er.jsx)("p",{className:"font-semibold",children:(null===(t=v.room_numbers)||void 0===t?void 0:t.join(", "))||v.room_number||"N/A"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm text-gray-500",children:"Checkout Date"}),(0,er.jsx)("p",{className:"font-semibold",children:new Date(v.created_at).toLocaleString()})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm text-gray-500",children:"Payment Method"}),(0,er.jsx)("p",{className:"font-semibold",children:v.payment_method||"N/A"})]}),v.booking_id&&(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm text-gray-500",children:"Booking ID"}),(0,er.jsx)("p",{className:"font-semibold",children:v.booking_id})]}),v.package_booking_id&&(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm text-gray-500",children:"Package Booking ID"}),(0,er.jsx)("p",{className:"font-semibold",children:v.package_booking_id})]})]}),v.booking_details&&(0,er.jsxs)("div",{className:"border-t pt-4",children:[(0,er.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Booking Information"}),(0,er.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm text-gray-500",children:"Check-in"}),(0,er.jsx)("p",{className:"font-semibold",children:v.booking_details.check_in})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm text-gray-500",children:"Check-out"}),(0,er.jsx)("p",{className:"font-semibold",children:v.booking_details.check_out})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm text-gray-500",children:"Adults"}),(0,er.jsx)("p",{className:"font-semibold",children:v.booking_details.adults})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm text-gray-500",children:"Children"}),(0,er.jsx)("p",{className:"font-semibold",children:v.booking_details.children})]}),v.booking_details.package_name&&(0,er.jsxs)("div",{className:"col-span-2",children:[(0,er.jsx)("p",{className:"text-sm text-gray-500",children:"Package"}),(0,er.jsx)("p",{className:"font-semibold",children:v.booking_details.package_name})]})]})]}),v.food_orders&&v.food_orders.length>0&&(0,er.jsxs)("div",{className:"border-t pt-4",children:[(0,er.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Food Orders"}),(0,er.jsx)("div",{className:"space-y-4",children:v.food_orders.map((e,t)=>{var r;return(0,er.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,er.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,er.jsxs)("div",{children:[(0,er.jsxs)("p",{className:"font-semibold",children:["Order #",e.id]}),(0,er.jsxs)("p",{className:"text-sm text-gray-500",children:["Room: ",e.room_number]}),(0,er.jsx)("p",{className:"text-sm text-gray-500",children:new Date(e.created_at).toLocaleString()})]}),(0,er.jsxs)("div",{className:"text-right",children:[(0,er.jsx)("p",{className:"font-semibold text-indigo-600",children:ym(e.amount)}),(0,er.jsx)("p",{className:"text-sm text-gray-500",children:e.status})]})]}),(0,er.jsx)("div",{className:"mt-2 space-y-1",children:null===(r=e.items)||void 0===r?void 0:r.map((e,t)=>(0,er.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,er.jsxs)("span",{children:[e.item_name," x ",e.quantity]}),(0,er.jsx)("span",{className:"font-medium",children:ym(e.total)})]},t))})]},t)})})]}),v.services&&v.services.length>0&&(0,er.jsxs)("div",{className:"border-t pt-4",children:[(0,er.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Services"}),(0,er.jsx)("div",{className:"space-y-2",children:v.services.map((e,t)=>(0,er.jsxs)("div",{className:"flex justify-between items-center bg-gray-50 p-3 rounded-lg",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"font-semibold",children:e.service_name}),(0,er.jsxs)("p",{className:"text-sm text-gray-500",children:["Room: ",e.room_number]}),e.created_at&&(0,er.jsx)("p",{className:"text-xs text-gray-400",children:new Date(e.created_at).toLocaleString()})]}),(0,er.jsxs)("div",{className:"text-right",children:[(0,er.jsx)("p",{className:"font-semibold text-indigo-600",children:ym(e.charges)}),(0,er.jsx)("p",{className:"text-sm text-gray-500",children:e.status})]})]},t))})]}),(null===(r=v.bill_details)||void 0===r||null===(n=r.consumables_audit)||void 0===n||null===(s=n.items)||void 0===s?void 0:s.length)>0&&(0,er.jsxs)("div",{className:"border-t pt-4",children:[(0,er.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Consumables"}),(0,er.jsxs)("div",{className:"space-y-2",children:[v.bill_details.consumables_audit.items.map((e,t)=>(0,er.jsxs)("div",{className:"flex justify-between items-center bg-gray-50 p-3 rounded-lg",children:[(0,er.jsxs)("div",{className:"flex-1",children:[(0,er.jsx)("p",{className:"font-semibold",children:e.item_name}),(0,er.jsxs)("p",{className:"text-sm text-gray-500",children:["Qty: ",e.actual_consumed,e.complimentary_limit>0&&(0,er.jsxs)("span",{className:"text-xs text-green-600 ml-2",children:["(Limit: ",e.complimentary_limit,")"]})]})]}),(0,er.jsxs)("div",{className:"text-right",children:[(0,er.jsx)("p",{className:"font-semibold text-indigo-600",children:ym(e.total_charge)}),(0,er.jsxs)("p",{className:"text-xs text-gray-400",children:["@ ",ym(e.charge_per_unit)]})]})]},t)),(0,er.jsx)("div",{className:"flex justify-end pt-2 text-sm font-medium",children:(0,er.jsxs)("span",{children:["Subtotal: ",ym(v.bill_details.consumables_audit.charges)]})})]})]}),(null===(i=v.bill_details)||void 0===i||null===(o=i.inventory_usage)||void 0===o?void 0:o.length)>0&&(0,er.jsxs)("div",{className:"border-t pt-4",children:[(0,er.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Inventory Usage"}),(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full text-sm",children:[(0,er.jsx)("thead",{className:"bg-gray-100",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"px-3 py-2 text-left",children:"Item"}),(0,er.jsx)("th",{className:"px-3 py-2 text-center",children:"Qty"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left",children:"Type"}),(0,er.jsx)("th",{className:"px-3 py-2 text-right",children:"Status"})]})}),(0,er.jsx)("tbody",{children:v.bill_details.inventory_usage.map((e,t)=>(0,er.jsxs)("tr",{className:"border-b",children:[(0,er.jsxs)("td",{className:"px-3 py-2",children:[(0,er.jsx)("div",{className:"font-medium",children:e.item_name}),(0,er.jsx)("div",{className:"text-xs text-gray-500",children:new Date(e.date).toLocaleDateString()})]}),(0,er.jsxs)("td",{className:"px-3 py-2 text-center",children:[e.quantity," ",e.unit]}),(0,er.jsx)("td",{className:"px-3 py-2",children:e.is_rental?(0,er.jsx)("span",{className:"text-blue-600",children:"Rental"}):e.is_payable?(0,er.jsx)("span",{className:"text-orange-600",children:"Chargeable"}):"Complimentary"}),(0,er.jsx)("td",{className:"px-3 py-2 text-right",children:e.rental_charge>0||e.is_payable?(0,er.jsx)("span",{className:"font-semibold text-indigo-600",children:ym(e.rental_charge||(e.is_payable&&e.cost?e.quantity*e.cost:0))}):(0,er.jsx)("span",{className:"text-gray-400",children:"-"})})]},t))})]})})]}),(null===(l=v.bill_details)||void 0===l||null===(c=l.asset_damages)||void 0===c||null===(d=c.items)||void 0===d?void 0:d.length)>0&&(0,er.jsxs)("div",{className:"border-t pt-4",children:[(0,er.jsx)("h3",{className:"text-lg font-semibold mb-3 text-red-600",children:"Asset Damages"}),(0,er.jsxs)("div",{className:"space-y-2",children:[v.bill_details.asset_damages.items.map((e,t)=>(0,er.jsxs)("div",{className:"flex justify-between items-center bg-red-50 p-3 rounded-lg border border-red-100",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"font-semibold text-red-700",children:e.item_name}),e.notes&&(0,er.jsxs)("p",{className:"text-sm text-red-500 italic",children:['"',e.notes,'"']})]}),(0,er.jsx)("div",{className:"text-right",children:(0,er.jsx)("p",{className:"font-bold text-red-700",children:ym(e.replacement_cost)})})]},t)),(0,er.jsx)("div",{className:"flex justify-end pt-2 text-sm font-bold text-red-700",children:(0,er.jsxs)("span",{children:["Total Damages: ",ym(v.bill_details.asset_damages.charges)]})})]})]}),(0,er.jsxs)("div",{className:"border-t pt-4",children:[(0,er.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Bill Summary"}),(0,er.jsxs)("div",{className:"space-y-2",children:[v.room_total>0&&(0,er.jsxs)("div",{className:"flex justify-between",children:[(0,er.jsx)("span",{children:"Room Charges:"}),(0,er.jsx)("span",{className:"font-medium",children:ym(v.room_total)})]}),v.package_total>0&&(0,er.jsxs)("div",{className:"flex justify-between",children:[(0,er.jsx)("span",{children:"Package Charges:"}),(0,er.jsx)("span",{className:"font-medium",children:ym(v.package_total)})]}),v.food_total>0&&(0,er.jsxs)("div",{className:"flex justify-between",children:[(0,er.jsx)("span",{children:"Food Charges:"}),(0,er.jsx)("span",{className:"font-medium",children:ym(v.food_total)})]}),v.service_total>0&&(0,er.jsxs)("div",{className:"flex justify-between",children:[(0,er.jsx)("span",{children:"Service Charges:"}),(0,er.jsx)("span",{className:"font-medium",children:ym(v.service_total)})]}),(null===(u=v.bill_details)||void 0===u||null===(h=u.consumables_audit)||void 0===h?void 0:h.charges)>0&&(0,er.jsxs)("div",{className:"flex justify-between",children:[(0,er.jsx)("span",{children:"Consumables:"}),(0,er.jsx)("span",{className:"font-medium",children:ym(v.bill_details.consumables_audit.charges)})]}),(null===(m=v.bill_details)||void 0===m||null===(p=m.charges_breakdown)||void 0===p?void 0:p.inventory_charges)>0&&(0,er.jsxs)("div",{className:"flex justify-between",children:[(0,er.jsx)("span",{children:"Inventory Charges:"}),(0,er.jsx)("span",{className:"font-medium",children:ym(v.bill_details.charges_breakdown.inventory_charges)})]}),(null===(f=v.bill_details)||void 0===f||null===(g=f.asset_damages)||void 0===g?void 0:g.charges)>0&&(0,er.jsxs)("div",{className:"flex justify-between text-red-600",children:[(0,er.jsx)("span",{children:"Asset Damages:"}),(0,er.jsx)("span",{className:"font-medium",children:ym(v.bill_details.asset_damages.charges)})]}),v.tax_amount>0&&(0,er.jsxs)("div",{className:"flex justify-between",children:[(0,er.jsx)("span",{children:"Tax:"}),(0,er.jsx)("span",{className:"font-medium",children:ym(v.tax_amount)})]}),v.discount_amount>0&&(0,er.jsxs)("div",{className:"flex justify-between text-red-600",children:[(0,er.jsx)("span",{children:"Discount:"}),(0,er.jsxs)("span",{className:"font-medium",children:["-",ym(v.discount_amount)]})]}),(0,er.jsxs)("div",{className:"flex justify-between text-xl font-bold text-indigo-600 pt-2 border-t",children:[(0,er.jsx)("span",{children:"Grand Total:"}),(0,er.jsx)("span",{children:ym(v.grand_total)})]})]})]})]}):(0,er.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Failed to load details"})]})}):null});eJ.displayName="CheckoutDetailModal";const tJ=["#4f46e5","#10b981","#f59e0b","#3b82f6"],rJ=()=>{ie();const[e,t]=(0,a.useState)(""),[r,n]=(0,a.useState)("multiple"),[s,i]=(0,a.useState)(null),[o,l]=(0,a.useState)("Card"),[c,d]=(0,a.useState)(0),[u,h]=(0,a.useState)(!1),[m,p]=(0,a.useState)({type:null,text:""}),[f,g]=(0,a.useState)([]),[x,y]=(0,a.useState)([]),[v,b]=(0,a.useState)(null),[j,w]=(0,a.useState)(!0),[N,_]=(0,a.useState)(!1),[k,S]=(0,a.useState)(null),[A,C]=(0,a.useState)(!1),[E,T]=(0,a.useState)(null),[P,O]=(0,a.useState)(null),[D,I]=(0,a.useState)([]),[L,M]=(0,a.useState)(""),[R,F]=(0,a.useState)(""),[B,z]=(0,a.useState)(""),[U,q]=(0,a.useState)(""),[W,V]=(0,a.useState)("All"),[H,G]=(0,a.useState)(""),[K,Y]=(0,a.useState)(""),[X,Q]=(0,a.useState)(""),[$,J]=(0,a.useState)(""),Z=(e,t)=>{p({type:e,text:t})},ee=(0,a.useCallback)(async()=>{if(!N&&j){_(!0);try{const e=(await J$.get("/bill/checkouts?skip=".concat(x.length,"&limit=20"))).data||[];y(t=>[...t,...e]),e.length<20&&w(!1)}catch(e){console.error("Failed to load more checkouts:",e)}finally{_(!1)}}},[N,j,x.length]),te=JQ(ee,j,N),[re,ne]=(0,a.useState)({checkouts_today:0,checkouts_total:0,available_rooms:0,booked_rooms:0,food_revenue_today:0,package_bookings_today:0}),[ae,se]=(0,a.useState)({revenue_breakdown:[],weekly_performance:[]}),oe=(0,a.useMemo)(()=>{const e=new Set;return x.forEach(t=>{t.payment_method&&e.add(t.payment_method)}),Array.from(e).sort()},[x]),le=(0,a.useMemo)(()=>x.filter(e=>{var t,r;if(L){var n,a,s,i;const t=L.toLowerCase();if(!(e.id.toString().toLowerCase().includes(t)||(null===(n=e.guest_name)||void 0===n?void 0:n.toLowerCase().includes(t))||(null===(a=e.room_number)||void 0===a?void 0:a.toLowerCase().includes(t))||(null===(s=e.booking_id)||void 0===s?void 0:s.toString().toLowerCase().includes(t))||(null===(i=e.package_booking_id)||void 0===i?void 0:i.toString().toLowerCase().includes(t))))return!1}if(R&&(null===(t=e.guest_name)||void 0===t||!t.toLowerCase().includes(R.toLowerCase())))return!1;if(B&&(null===(r=e.room_number)||void 0===r||!r.toLowerCase().includes(B.toLowerCase())))return!1;if(U){var o,l;const t=U.toLowerCase();if(!((null===(o=e.booking_id)||void 0===o?void 0:o.toString().toLowerCase().includes(t))||(null===(l=e.package_booking_id)||void 0===l?void 0:l.toString().toLowerCase().includes(t))))return!1}if("All"!==W&&e.payment_method!==W)return!1;if(H||K){const t=new Date(e.created_at);if(H&&t<new Date(H))return!1;if(K&&t>new Date(K+"T23:59:59"))return!1}return!(X&&e.grand_total<parseFloat(X))&&!($&&e.grand_total>parseFloat($))}),[x,L,R,B,U,W,H,K,X,$]),ce=(0,a.useMemo)(()=>{let e=0;return L&&e++,R&&e++,B&&e++,U&&e++,"All"!==W&&e++,H&&e++,K&&e++,X&&e++,$&&e++,e},[L,R,B,U,W,H,K,X,$]),de=()=>{M(""),F(""),z(""),q(""),V("All"),G(""),Y(""),Q(""),J("")};(0,a.useEffect)(()=>{ue()},[]);const ue=async()=>{try{const a=await Promise.allSettled([J$.get("/bill/checkouts?skip=0&limit=20").catch(e=>({error:e,data:[]})),J$.get("/dashboard/kpis").catch(e=>({error:e,data:[{checkouts_today:0,checkouts_total:0,available_rooms:0,booked_rooms:0,food_revenue_today:0,package_bookings_today:0}]})),J$.get("/dashboard/charts").catch(e=>({error:e,data:{revenue_breakdown:[],weekly_performance:[]}})),J$.get("/bill/active-rooms").catch(e=>({error:e,data:[]}))]);var e,t;if("fulfilled"!==a[0].status||a[0].value.error)console.error("Failed to load checkouts:",(null===(e=a[0].value)||void 0===e?void 0:e.error)||a[0].reason),y([]),w(!1);else y(Array.isArray(a[0].value.data)?a[0].value.data:[]),w(a[0].value.data&&20===a[0].value.data.length);if("fulfilled"!==a[1].status||a[1].value.error){var r;console.error("Failed to load KPIs:",(null===(r=a[1].value)||void 0===r?void 0:r.error)||a[1].reason),ne({checkouts_today:0,checkouts_total:0,available_rooms:0,booked_rooms:0,food_revenue_today:0,package_bookings_today:0})}else{const e=a[1].value.data;Array.isArray(e)&&e.length>0?ne(e[0]):ne("object"===typeof e?e:{checkouts_today:0,checkouts_total:0,available_rooms:0,booked_rooms:0,food_revenue_today:0,package_bookings_today:0})}if("fulfilled"!==a[2].status||a[2].value.error)console.error("Failed to load charts:",(null===(t=a[2].value)||void 0===t?void 0:t.error)||a[2].reason),se({revenue_breakdown:[],weekly_performance:[]});else se(a[2].value.data||{revenue_breakdown:[],weekly_performance:[]});if("fulfilled"!==a[3].status||a[3].value.error){var n;console.error("Failed to load active rooms:",(null===(n=a[3].value)||void 0===n?void 0:n.error)||a[3].reason),g([])}else{const e=Array.isArray(a[3].value.data)?a[3].value.data:[];console.log("Active rooms fetched:",e),g(e),0===e.length&&(console.warn("No active rooms found. This could mean:"),console.warn("1. No bookings are in 'checked-in' status"),console.warn("2. All rooms in checked-in bookings are already marked as 'Available' (checked out)"),console.warn("3. There are no active bookings"))}const s=a.every(e=>{var t;return"rejected"===e.status||"fulfilled"===e.status&&(null===(t=e.value)||void 0===t?void 0:t.error)});s&&Z("error","Could not fetch dashboard data. Please check your connection and try again.")}catch(a){console.error("Unexpected error fetching initial data:",a),Z("error","Could not fetch dashboard data: ".concat(a.message||"Unknown error",". Please refresh.")),y([]),g([]),ne({checkouts_today:0,checkouts_total:0,available_rooms:0,booked_rooms:0,food_revenue_today:0,package_bookings_today:0}),se({revenue_breakdown:[],weekly_performance:[]})}};(0,a.useEffect)(()=>{(async()=>{if(e)try{const t=e.includes("-")?e.split("-")[1]:e,r=await J$.get("/bill/checkout-request/".concat(t));r.data&&r.data.exists?S(r.data):S(null)}catch(t){console.error("Error fetching checkout request:",t),S(null)}else S(null)})()},[e]);const he=(e,t,r)=>{const n=[...P.fixed_assets||[]];n[e][t]=r,O(Be(Be({},P),{},{fixed_assets:n}))},me=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"print";if(!s)return;const t=new X$.default;t.addImage("data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxMRDxAQEhAWFhMVFxIWDxUSFBAVExUSFxUiGRYVFRgaHCggGh0lHxMWIjEhJSktLjouGB80RDMtNyotLi0BCgoKDg0OGxAQGzUlICUtLS0rLS0vLS0tLTEtMC0tLzYrLjAtLS8vLy0tLy0tLS0tLS0tLS0tLS01Li0tLS0tLf/AABEIAOEA4QMBEQACEQEDEQH/xAAcAAEAAQUBAQAAAAAAAAAAAAAABAEDBQYHAgj/xAA9EAABAwIEAwUFBwMDBQEAAAABAAIDBBEFEiExBkFREyJhcYEHMlKRoRQjQmKCsdFDkvFTwvByo7Lh8jP/xAAbAQEAAwEBAQEAAAAAAAAAAAAAAwQFAQIGB//EADQRAQACAQIEAwYFBAIDAAAAAAABAgMEERIhMUEFIlETYXGRsdEygaHB8CNC4fEUggYVJP/aAAwDAQACEQMRAD8A7e1osNEFco6IGUdEDKOiBlHRAyjogZR0QMo6IGUdEDKOiBlHRAyjogZR0QMo6IGUdEDKOiBlHRAyjogZR0QMo6IGUdEDKOiBlHRAyjogZR0QMo6IGUdEDKOiCNlHRBJbsEFUBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQRkEhuwQVQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBBGQSG7BBVAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEEZBIbsEFUBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQRkEhuwQVQEBAQEBAQEBAQEBAQEBAQUc4AXJsOZOydTbdi6jiSjjNnVcIPTtGE/IFT10ua3OKT8k9dLmtzik/Jah4sonuysqWOd0bmJ/ZeraTNWN7V2dtpM1Y3tXZl4pQ4XadPIj91XmNkExs9rjggICAgICCMgkN2CCqAgICAgICAgICAgICAgh4picVNGZJpAxvK+5PRoGrj4BSYsV8tuGkbykxYr5bcNI3lzzHfaTI67aZgjb/qSAOefFrdm+t/RbODwqsc8s7+6Gxh8LpSOLNP5Q1UuqKx2aWV7m/FKS4ebGXA+Vgmo8R0ui8tY5+kfvK/SK0j+lWI/nzbLhOHUcVi6mdO7rNJZvpG1uW3nfzWDqP8AyHNb8MbR7vur5a6i/wDft8I/duFBj0TAGtpxG3pHksPSwWdPisTO94n57s7Jobzz4t/izNLiMcnuu16HQ/8AtWcWsw5eVZ5+inkwXp1hLVlCICAgICAgjIJDdggqgICAgICAgICAgICAg1ji7jCOiHZttJOR3WX0YDs6Q8h4bnw3V3SaK2ed55V9fsuaXR2zTvPKvr9nIcXxmSeQySvL5Dt0aPhaOQ8AvoaUx4a8NI2/nduRbHgrwY4/nvXsPw/Z8up5NOw81894h4ra2+PDPL1+yWmKZ81+rORTNHP5ar5y1LSkmsp1PO243tzsB/Kr2xz3RWrOzaMLwyKUd2oBPNuTK75Er3j0VMvS/wCjLz6nJjnzU/VlmYC0fjPyCknwik/3SqTrrT2ZCmgLNM5cOVxqPVXtPgtijabzMe/7q17xad9tl9WUYgICAgIIyCQ3YIKoCAgICAgICAgICAg07jrjIUjTBCQahw1OhETT+J3V3Qep0sDf0WinNPFb8P1WtNp+Od7dHG62tJc4lxc9xJc4m5udySdyt+ZiscNWlk1EUjhr/pSicG98+9yvrbx81i63U8f9Os8u/vX9Dpto9pk69mQjqL7klZc09GjMx2T6epb1+hUF8N5RWZOmqmfF9Cql9Nl9ENqy2Ghpnua2RjXEcnMuRfzGxVDJgzV58MqOTLj3mtp/KWz4Xix0ZL6OOh/V/KsafxGazwZvn92Xn0sfix/JnFsqAgICAgICCMgkN2CCqAgICAgIPE0oY1znGwAJJ8AvNrRWN5drWbTtDTq/HpJCcrixvINNj6kLEzavJknyztDaw6KlI80byiMxKVpuJX/3OI+RUNcuWvS0/NPOnxz1rDJ0XE7m6StzDq2wd8tj9Fcxa+8crxuqZfDqzzpOzZKOtZK3MxwI59R5jktPHlrkjesszJivjna0Nc474tbQxZI7GokH3bdwxu3aOHToOZ8AVoaPSTmtvP4Y6u4sfFPPo4jW1jiXPc4ue4kuLjckndxX0MzFI2hdvmikbQiU7cxuf8lZ2s1Hs68MdZTeHaf21+O3SP1lLCxn0a/FIOq65snQOB2IR4lNiC68Sy2E4hJA/PE8tPMfhcOjhzTbdBmwUy12vDpOBY3HVssQBIB32HX9TeoUV8cTymN3zup0t9Pbft2llmNAFgLDkF5rWKxtHRVmd+cvS9OCAgICAgjIJDdggqgICAgICDW+MsQDYxEHC7iC8X2YNr+tvkqOtv5eCO7S8Owza/Htyj6tJdiLB+L6FZ0YbNrhl7jq2u2cD+/ySccx1OF7Mq5wmyNV46aQCVrrP/pgH3j4/l6rQ8O0WTPl2pO0R1lV1d8dce1439IaNiWIvmkknmeXPcbvJ+gHQDQAL7qla46xWvSGLF4rDDSzXu4/88FHNt+aCLTkspTVztrC31VDNp65LcUzzb+n1FsNIpEcoT46kHcW+qqW0to6c16mtpP4o2Xwbqvalq9YW63rb8Mr8bV5emZwev7JwzxNljPvsfobfkeNWny08F3dBnwzkjyztPr947uh0fDdLVxCalle0HQtdZ2V3NrgdQfVOKYYl9dqMF+DLET+iw/hypp3CSPvZTdroz3h+k6+guu8USmjXYM1eG/Lf1bdg2JduzUZZG6StNwQetjrYrxMbMjUYPZW5c4npLILiuICAgICCMgkN2CCqAgICAgINLh4TdVXmqpXtLyXBjMoIvtmLgdbcraKrXT7+a3WWtbxCMW2PDHKO8tX4u4adRZXhxfE42DiLOa618rvOxsfA7c+XxcPRf0etjP5Z5W+vway6VeeFf2XRjhjHf73w/F/hS4PD7ai21eUd5U9Xqcenrvbr2j1YCrrHSvL3nU7dAOQC+s0+npgpFKf7fMZdTbLbisxtTPc2Gw+pXu1t0Fsm/JbDbrkQjmZ35IssZaf2KjtXZtafN7Su89e6ZQ1QJDXbnQHqVFavdZi3qzUcVjYjUaEHcEbhRTzSxy5w2zhTC6esP2eQmKfUwyM1a+2pY9h0uNwRa4Guo1pZ8fD5oer63Nh83WO8T90jFeC6qmucnasH44rk2/Mzcelx4qst4PEsGXlvwz6T9/9KcL4y6kmDxcxusJmj8Teo/MOXy5ol1ukrqMe3eOk/wA9XX4Jmva17TdrgC0jYg7FeXyFqzWZrPWFTGM2awzWtfnbpfohvO2z2jggICAgIIyCQ3YIKoCAgICAgIMdxBhbaulmp3aZ2kNd8Lxqx48nAH0XqluG0Sc46TtL5yqJ5Y3vifo9jnMeCBcOabOHzBWxGg01vNEfq8/+51kRwTb89o3RXPvqT5kq7WtaRtWNoUrZrZLcVp3lGmqL6D1K5a/o7utxNubLzDxky8Fd0tsRXuOXVHo8u9+Ce5LBmaR8vAr1Nd42beKJpO8ID6NzJHRvaQ5ujgf+agggg9Cqu8T0aNZi3OHacL4fbimGwVTSG1bWmOVx92V8fdvJ+YgA5t9efLMtknFea9lf204b8M9Grinkp5bOBjljcDru1w1B/Y32U+8Wj3NCOG9eXOJdqwTEBUU8Uw3cO8Ojxo4fMFZ168M7MTLj4LzVDxnhinqbuLMkn+oywcT+YbO9dVzdY02vzYOUTvHpP85LPDNJNS5qaTvR6ugkbt+ZhH4Tzt56pKTW5cWfbLTlPeP3bAuM8QEBAQEBBGQSG7BBVAQEBAQEBAQcj9sPBry52JUzSdB9sY0XOgsJgPIAO8AD1K0dHqdv6c/kr5sUW82zkBkJ3K0d5VoiI6PcMZcdPU8gosuauON7Lmk0eXU22xxy7z2j+ejKQ0lm5hyufluu1zb4uP3Keo0lq67/AItp/uiN/dPRNpY+8x3iD6L3mmLYbTHor6Ktsevx47dYvET81Kqnyu02Oo/hd0Wf22Pn1jq+01Wk9lk5dJ6Nm4hwJs2G0OIxC7o42U9WOf3fcjefEWDSejm9FSm/DmvSfXeFbHM0yTSe/OG5exwkUlQzpLmH6o2j/Yqmr/FHwQ62PNHwbNxJw9HVs17srR92/wD2u6tUOPJNJRYM84p9zGcCB8RqKWQWcwh4B8RY28NGn1XrNtO1oT6zhtFcle7bVCoiAgICAgICAgjIJDdggqgICAgICAgICDnnFXsrp6hzpqbLDKSS5pBMLndco9wnw08FNGoy7bcSxpr4KT/Vxxb6/ZzbG+E6yjuZad2Qf1I+/HbqS33R/wBQCjmd+r6fT6vT3iK45iPd0QIJh9ml65mhv6v/AJcrNMm2GasnV6Gb+L4csRy2mZ/69PrDzDLenk6t09HbfufkrGPN/wDLaPTl81LWaDbxvDescreafjXr+z3SVPaNyu94beIUOjzezyRPbu+rz4oy027x0dI9lk7ZG1dDILskZnDTzHuSfR0fyTWztnm0erE8SwzXFjyx1jl+8fu2T2e4W6mFZE7ds2W/UBgLXeoc0+qhz24tp9zO1V4vw2j0bcoFRZdTNMglt3w0tv1aSDY+oB/yu78tnrinbh7Ly48iAgICAgICAgjIJDdggqgICAgICAgICAgINV4j4Bo6wOPZ9lIde0hs256vb7rt9yL+KLun1+bDPKd49Jch4s4MqsPDi4Z4CR97GDl37oeN2HXnpruV6i07bN3T6vBqb1t0tG+0fHrs1mGXK4OHL9ua60YnZ0H2fVWTEqYjZ+dh8nMNvqGqS8zaN5VfE8cW0lvdtP6u1tYASQNzd3ibWufQD5KB8c9ICAgICAgICAgICCMgkN2CCqAgICAgICAgICAgIOPe17ijtn/YIXXZG69QRs6UbM8m7nxt8K1dFp9o47R16M3Vara3DSendzGWO2qh1em9n5q9Po+q8E8Y/wCVHscv447+sfdtXA8p+00J5iaIf9wD9iqsfhb2q56a/wAJfQqifEiAgICAgICAgICAgjIJDdggqgICAgICAgICAgINC4/41EDXU1M68xuJZBtEOYB+P9vNaGk0c389+n1Z2r1kU8lOv0cnlwyQRNncwtjeSI3O0LyBcloOrgNLu21C1YvWbcMdmXNbRXinujtgvmC7ekXrNZ7vWHUWwZK5KdYndnPZ1Tl1bSs6TX/sGY/+C+emJrExL9S1GaLaG2SOk1+u33fQKifICAgICAgICAgICAgjIJDdggqgICAgICAgICChNtUGv4vDW1IMURFNEdHSOOaZw/I1ps0fqB8lZxThx+a3mn07KeWM+Xy08sevf+fmh4ZwPR0oMso7QtBc581sjQNSQzblfW695NZlyeWOXwecWiw4Y4rc9u8tHxXtsYryIWnI2zY73DI4r++/oTqbb7DktCkU0uLzdfrLOva+rzeTp9IU4mwNkM8NFTtzOa1oe78Uk8hvr0FslhyHzXrTZZtS2W/8iEerpFclcNOv1mWU9muB5MRqnXu2mMsea28rnlpI9GP/ALgsfJfimZ9Z3fe6i3sfDsOGesxHyiP9fJ1JQsUQEBAQEBAQEBAQEEZBIbsEFUBAQEBAQEBAQEBBrmNYfLXHscxipQR2h/qTEcmg+6wdTueVrXtYclMPm627ekf5Us+K+ong6V7+s/4ZSko4aOAhjQyNgLnnmbDVzjuTpuVDa181+fOZT1rjwY+XKIa5gmHlhnxSoYe0dnfDHa7mtI0AHxEWaB081b1OaIrGGnSOvvU/DtLbJl9tk5TaeW/aPf8Al+jM8KYQaWmDX2Mry6WoI5yv1d6DQeipWneW5rM/tsm8fhjlHwhmV5VRAQEBAQEBAQEBAQRkEhuwQVQEBAQEBAQEBAQEBBangDwA4XFwbciRqL+tj6LsWmOcPNqRaNpe3sBtcXsQR5jYrj1u9ICAgICAgICAgICAgIIyCQ3YIKoCAgICDGTY5E2tioSHdrJE+VlgMmRpsbm+9/BBdxrF4aOB9TUSBkTB3nG530AAGpJPIINbo/aRSuljjlgq6Zsrg2CWrp3RQyuOwa+5te3OyCTjfHUFLVOpDBUyytYx7hTwOlAY7YnKbjZBbHtEovsdTV3kApjG2qidG5k8ZkeGMzRutuXb7aHog8UHtBhmliibR1zTI5jGufSSNYC42Bc47N11KDIcP8YUtbUVNNC53a07nNlY9uUnK8sc5mveaHNtfxHUIK0vGFLJiMmGsc508bS6Szfuxltdua/vDMLj+EE/EMXZCJy4OPYw9s/KAbs72jbnU/dn6ILL8byd6alniZcB0j/s7mNubAu7ORxA11cRYbkgaoPVRjFpHxxU8s7mECXsuxDWOLQ4NLpZGAmzgbNva4vZBcixZjux7r2mWR8TWvYWubIxj3uDgeVonWIuDoQSDdBIqqtsboWuveV/Zst8WRz9fC0bvogsYRi0dS17o8wySSRva8ZXBzHW26HQg8wQgUeLRy1E9OzMXQiMyG3cu/NZrXfiIyG9tjpvcAJ6AgICAgICCMgkN2CCqAgICAg0HHauOLiSifLIyNv2KoGaRzWNuZBYXJsgj+0rEoHtw2pErJqWnrYH1vZPZI2MEEMfIGk6Bx+qC97U8bo5cInibNHM+oDGUccT2SPklc4ZCwNJvY2N/wCUGHviEWNVApGQSztoKQTioe9uYtvfIW7uLhzIHiuOtdxZzqnBcdxKaRhqZn0cNRTxscz7N2FSxojeHHMXHr4egO926YDikxnp2u4koZmlzAYI2Ugkkvp2bSJCbnbQXXXlr2C8MzVEddWUMgir4MSxAQvOjXxPcA+OTQ3GpcLg6jxuuOstw/w9Hh+O0VOwlzvsE755He/LM6cF8jjuST1O1guuNl4svlxO2/2AWuba3m5oJ2KU1VUwyUz4oY45mujme2eSRwieMr8jOyaC4gkAkgC99bWIXGUmaWofTVWV2e1RGQyWJs2Rurmmz2ktDDYOAN72ubkMc/EnPlpu2yg09cYZZGXbC5z6J+R7cxJaC6ojjy3Pf7tzugyeNOBqMPYPe7d77DfI2mkDnH8oL2C/V7RzCDFUVBN2LZ6UsbMXTxS9pfKYjUPyvIG7oi5zwNiC9umbMAn4NRNgrJomXytpqTUm7nEzVBc9x5ucSSTzJJQZ5AQEBAQEBBGQSG7BBVAQEBAQYzFeHqSqc19RSwzOaLNMsbHkNvewLhoEHqgwGlgZJHDSwxsk/wD1YyNjWv0t3gBY6HmgjYbwnQ00nbQUUEcmtnsiYHC++U27vogyLKCITOnETRK5oY+QNGdzBs0u3IHRBFqeHqSQzOkpYXGYNFQXRsPahhBb2mnesWttfoEEam4Ow+N7JI8PpmvYQ5jmwxBzXA3DgQNCCEGToqCKEPEUTGB73SSZGhuaR3vPdbdxsLlAdQRGYVBib2waWNkyjOIyblodva+tkHqejjfnzxtdnbkkzAHNHr3XdR3naeJQX0EKqwmCV/aPhYX2y57WeW/CXDUjU6bILjaCIRdgImdjYtMeRvZ5TuMtrWNyg80WGQwlzoomMc4AOc1ozFo2aTvYXNhtqgkQwtYMrWhouTYCwuTcn1JJ9UFBC0PL8ozkNa51tS1pJaCegL3f3FBcQEBAQEBAQRkEhuwQVQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBBGQSG7BBVAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEEZBIbsEFUBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQRkEhuwQVQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBBGQUbsEFUBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQR0H//2Q==","PNG",14,15,30,15),t.setFontSize(22),t.setFont("helvetica","bold"),t.text("Resort Invoice",105,25,{align:"center"}),t.setFontSize(10),t.setFont("helvetica","normal"),t.text("Your Resort Name",190,20,{align:"right"}),t.text("123 Paradise Lane, Beach City",190,25,{align:"right"}),t.text("contact@yourresort.com",190,30,{align:"right"}),t.setFontSize(12),t.setFont("helvetica","bold"),t.text("Bill To:",14,45),t.setFont("helvetica","normal"),t.text(s.guest_name,14,51),t.text("Rooms: ".concat(s.room_numbers.join(", ")),14,57),t.setFont("helvetica","bold"),t.text("Check-in:",130,45),t.setFont("helvetica","normal"),t.text(new Date(s.check_in).toLocaleDateString(),150,45),t.setFont("helvetica","bold"),t.text("Check-out:",130,51),t.setFont("helvetica","normal"),t.text(new Date(s.check_out).toLocaleDateString(),150,51);const r=[];if(s.charges.room_charges>0){var n;const e=(null===(n=s.room_numbers)||void 0===n?void 0:n.length)||1,t=s.charges.room_charges/(s.stay_nights*e);r.push(["Room Charges","".concat(ym(t),"/day \xd7 ").concat(s.stay_nights," ").concat(1===s.stay_nights?"night":"nights"," \xd7 ").concat(e," ").concat(1===e?"room":"rooms"),ym(s.charges.room_charges)])}s.charges.package_charges>0&&r.push(["Package Charges","Package for ".concat(s.stay_nights," nights"),ym(s.charges.package_charges)]),s.charges.food_items.forEach(e=>r.push(["Food: ".concat(e.item_name),"Quantity: ".concat(e.quantity),ym(e.amount)])),s.charges.service_items.forEach(e=>{const t=e.is_paid?"Service: ".concat(e.service_name," (Previously Billed)"):"Service: ".concat(e.service_name);r.push([t,"",ym(e.charges)])}),s.charges.inventory_usage&&s.charges.inventory_usage.length>0&&(r.push([{content:"Inventory / Amenities Usage",colSpan:3,styles:{fillColor:[240,240,240],fontStyle:"bold"}}]),s.charges.inventory_usage.forEach(e=>{r.push(["Inventory: ".concat(e.item_name),"Qty: ".concat(e.quantity," ").concat(e.unit," (").concat(new Date(e.date).toLocaleDateString(),")"),""])})),$$()(t,{startY:65,head:[["Description","Details","Amount"]],body:r,theme:"striped",headStyles:{fillColor:[38,41,61]}});const a=s.charges.total_due,i=s.charges.total_gst||0,o=Math.max(0,a+i-(parseFloat(c)||0)),l=[...s.charges.food_charges>0?[["Food & Beverage",ym(s.charges.food_charges)]]:[],...s.charges.service_charges>0?[["Service Charges",ym(s.charges.service_charges)]]:[],...s.charges.consumables_charges>0?[["Consumables",ym(s.charges.consumables_charges)]]:[],["Subtotal",ym(s.charges.total_due)],...s.charges.room_gst>0?[["Room GST","+".concat(ym(s.charges.room_gst||0))]]:[],...s.charges.package_gst>0?[["Package GST","+".concat(ym(s.charges.package_gst||0))]]:[],...s.charges.food_gst>0?[["Food GST (5%)","+".concat(ym(s.charges.food_gst||0))]]:[],...s.charges.service_gst>0?[["Service GST","+".concat(ym(s.charges.service_gst||0))]]:[],...s.charges.consumables_gst>0?[["Consumables GST (5%)","+".concat(ym(s.charges.consumables_gst||0))]]:[],["Total GST","+".concat(ym(i))],...c>0?[["Discount","-".concat(ym(parseFloat(c)))]]:[],["Grand Total",ym(o)]];$$()(t,{startY:t.lastAutoTable.finalY+2,body:l,theme:"plain",tableWidth:"wrap",margin:{left:120},styles:{cellPadding:1.5,fontSize:11},columnStyles:{0:{fontStyle:"bold",halign:"right"},1:{fontStyle:"bold",halign:"right"}},didParseCell:e=>{e.row.index===l.length-1&&(e.cell.styles.fontStyle="bold",e.cell.styles.fontSize=14)}});const d=t.internal.getNumberOfPages();for(let s=1;s<=d;s++)t.setPage(s),t.setFontSize(10),t.text("Thank you for staying with us!",105,t.internal.pageSize.height-10,{align:"center"});"print"===e?(t.autoPrint(),t.output("dataurlnewwindow")):t.save("bill-room-".concat(s.room_numbers.join("-"),".pdf"))},pe=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!s)return"";const t="----------------------------------------",r=t=>e?"*".concat(t,"*"):t.toUpperCase();let n="".concat(r("Hotel Checkout Bill"),"\n").concat(t,"\n");if(n+="Guest Name: ".concat(s.guest_name,"\n"),n+="Rooms: ".concat(s.room_numbers.join(", "),"\n"),n+="Check-in: ".concat(new Date(s.check_in).toLocaleDateString(),"\n"),n+="Check-out: ".concat(new Date(s.check_out).toLocaleDateString(),"\n"),n+="".concat(t,"\n"),n+="".concat(r("Itemized Charges:"),"\n"),s.charges.room_charges>0){var a;const e=(null===(a=s.room_numbers)||void 0===a?void 0:a.length)||1,t=s.charges.room_charges/(s.stay_nights*e);n+="Room Charges: ".concat(ym(s.charges.room_charges)," (").concat(ym(t),"/day \xd7 ").concat(s.stay_nights," ").concat(1===s.stay_nights?"night":"nights"," \xd7 ").concat(e," ").concat(1===e?"room":"rooms",")\n")}if(s.charges.package_charges>0&&(n+="Package Charges: ".concat(ym(s.charges.package_charges),"\n")),s.charges.food_items.length>0&&(n+="\nFood & Beverage:\n",s.charges.food_items.forEach(e=>{n+="- ".concat(e.item_name," (x").concat(e.quantity,"): ").concat(ym(e.amount),"\n")})),s.charges.consumables_items&&s.charges.consumables_items.length>0&&(n+="\nConsumables:\n",s.charges.consumables_items.forEach(e=>{n+="- ".concat(e.item_name," (x").concat(e.actual_consumed,"): ").concat(ym(e.total_charge),"\n")})),s.charges.service_items.length>0&&(n+="\nAdditional Services:\n",s.charges.service_items.forEach(e=>{const t=e.is_paid?"".concat(e.service_name," (Previously Billed)"):e.service_name;n+="- ".concat(t,": ").concat(ym(e.charges),"\n")})),s.charges.inventory_usage&&s.charges.inventory_usage.length>0&&(n+="\nInventory Usage:\n",s.charges.inventory_usage.forEach(e=>{n+="- ".concat(e.item_name," (x").concat(e.quantity," ").concat(e.unit,")\n")})),n+="".concat(t,"\n"),n+="Subtotal: ".concat(ym(s.charges.total_due),"\n"),s.charges.room_gst>0){const e=s.charges.room_charges<=7500?"12%":"18%";n+="Room GST (".concat(e,"): +").concat(ym(s.charges.room_gst||0),"\n")}if(s.charges.package_gst>0){const e=s.charges.package_charges<=7500?"12%":"18%";n+="Package GST (".concat(e,"): +").concat(ym(s.charges.package_gst||0),"\n")}return s.charges.food_gst>0&&(n+="Food GST (5%): +".concat(ym(s.charges.food_gst||0),"\n")),s.charges.service_gst>0&&(n+="Service GST: +".concat(ym(s.charges.service_gst||0),"\n")),s.charges.consumables_gst>0&&(n+="Consumables GST (5%): +".concat(ym(s.charges.consumables_gst||0),"\n")),n+="Total GST: +".concat(ym(s.charges.total_gst||0),"\n"),c>0&&(n+="Discount: -".concat(ym(parseFloat(c)),"\n")),n+="".concat(r("Grand Total:")," ").concat(ym(Math.max(0,s.charges.total_due+(s.charges.total_gst||0)-c)),"\n"),n+="".concat(t,"\nThank you for staying with us!"),encodeURIComponent(n)};return(0,er.jsxs)(xm,{children:[(0,er.jsx)(e$,{message:m,onClose:()=>{p({type:null,text:""})},autoDismiss:!0,duration:5e3}),(0,er.jsxs)("div",{className:"bubbles-container",children:[(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{})]}),(0,er.jsxs)("div",{className:"p-2 sm:p-4 md:p-6 bg-gray-50 min-h-screen",children:[(0,er.jsx)("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-gray-800 mb-4 sm:mb-6",children:"Business Dashboard & Checkout"}),(0,er.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-3 sm:gap-4 mb-6 sm:mb-8",children:[(0,er.jsx)(Z$,{title:"Checkouts Today",value:re.checkouts_today,icon:(0,er.jsx)(W$,{size:22,className:"text-indigo-600"}),color:"bg-indigo-100"}),(0,er.jsx)(Z$,{title:"Total Checkouts",value:re.checkouts_total,icon:(0,er.jsx)(W$,{size:22,className:"text-green-600"}),color:"bg-green-100"}),(0,er.jsx)(Z$,{title:"Available Rooms",value:re.available_rooms,icon:(0,er.jsx)(V$,{size:22,className:"text-blue-600"}),color:"bg-blue-100"}),(0,er.jsx)(Z$,{title:"Booked Rooms",value:re.booked_rooms,icon:(0,er.jsx)(V$,{size:22,className:"text-red-600"}),color:"bg-red-100"}),(0,er.jsx)(Z$,{title:"Food Revenue Today",value:re.food_revenue_today.toLocaleString(),prefix:"\u20b9",icon:(0,er.jsx)(H$,{size:22,className:"text-yellow-600"}),color:"bg-yellow-100"}),(0,er.jsx)(Z$,{title:"Package Bookings Today",value:re.package_bookings_today,icon:(0,er.jsx)(Zh,{size:22,className:"text-purple-600"}),color:"bg-purple-100"})]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-4 sm:gap-6 md:gap-8 mb-6 sm:mb-8",children:[(0,er.jsxs)("div",{className:"lg:col-span-3 bg-white p-6 rounded-xl shadow-md",children:[(0,er.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Weekly Performance"}),(0,er.jsx)(sp,{width:"100%",height:300,children:(0,er.jsxs)(lU,{data:ae.weekly_performance,margin:{top:5,right:20,left:10,bottom:5},children:[(0,er.jsx)(BI,{dataKey:"day",stroke:"#6b7280"}),(0,er.jsx)(YI,{yAxisId:"left",stroke:"#6b7280"}),(0,er.jsx)(YI,{yAxisId:"right",orientation:"right",stroke:"#6b7280"}),(0,er.jsx)(CR,{contentStyle:{backgroundColor:"#fff",border:"1px solid #ddd"}}),(0,er.jsx)(iU,{}),(0,er.jsx)(sq,{yAxisId:"left",dataKey:"revenue",fill:"#4f46e5",name:"Revenue (\u20b9)"}),(0,er.jsx)(sq,{yAxisId:"right",dataKey:"checkouts",fill:"#10b981",name:"Checkouts"})]})})]}),(0,er.jsxs)("div",{className:"lg:col-span-2 bg-white p-6 rounded-xl shadow-md",children:[(0,er.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Total Revenue Breakdown"}),(0,er.jsx)(sp,{width:"100%",height:300,children:(0,er.jsxs)(aB,{children:[(0,er.jsx)(Uz,{data:ae.revenue_breakdown,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:100,label:!0,children:ae.revenue_breakdown.map((e,t)=>(0,er.jsx)(kB,{fill:tJ[t%tJ.length]},"cell-".concat(t)))}),(0,er.jsx)(CR,{formatter:e=>"\u20b9".concat(e.toLocaleString())}),(0,er.jsx)(iU,{})]})})]})]}),(0,er.jsxs)("div",{className:"bg-white p-4 sm:p-6 md:p-8 rounded-xl shadow-md w-full max-w-2xl mx-auto mb-6 sm:mb-8",children:[(0,er.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-center text-gray-800 mb-4 sm:mb-6",children:"Process New Checkout"}),(0,er.jsxs)("div",{className:"mb-4",children:[(0,er.jsx)("label",{htmlFor:"room-select",className:"block text-gray-700 font-medium mb-2",children:"Select a Room or Booking to Checkout"}),(0,er.jsxs)("select",{id:"room-select",value:e,onChange:e=>{const r=e.target.value;if(!r)return t(""),n("multiple"),void i(null);const a=r.split("-");if(a.length>=3){const[e,s,o]=a,l=f.find(t=>t.booking_id.toString()===e&&t.room_number===s&&t.checkout_mode===o);t(r),l&&(n(l.checkout_mode||o||"multiple"),i(null))}else{const e=f.find(e=>e.room_number===r);t(r),e&&(n(e.checkout_mode||"multiple"),i(null))}},className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[(0,er.jsx)("option",{value:"",children:"-- Select a Room or Booking to Checkout --"}),f.map((e,t)=>{var r;const n="".concat(e.booking_id,"-").concat(e.room_number,"-").concat(e.checkout_mode);return(0,er.jsx)("option",{value:n,children:e.display_label||"".concat((null===(r=e.room_numbers)||void 0===r?void 0:r.join(", "))||e.room_number," (").concat(e.guest_name,")")},"".concat(n,"-").concat(t))})]}),e&&((t,r,n)=>{let a=null,s="multiple";if(e.includes("-")){const t=e.split("-");if(t.length>=3){var i;const[e,r,n]=t;a=f.find(t=>t.booking_id.toString()===e&&t.room_number===r&&t.checkout_mode===n),s=(null===(i=a)||void 0===i?void 0:i.checkout_mode)||n||"multiple"}}else{var o;a=f.find(t=>t.room_number===e),s=(null===(o=a)||void 0===o?void 0:o.checkout_mode)||"multiple"}const l="multiple"===s;return(0,er.jsxs)("div",{className:"mt-2 p-3 ".concat(l?"bg-blue-50 border-blue-200":"bg-green-50 border-green-200"," border rounded-lg text-sm ").concat(l?"text-blue-800":"text-green-800"),children:[(0,er.jsx)("p",{className:"font-semibold",children:l?"\u26a0\ufe0f Important: This will checkout ALL rooms in the booking":"\u2713 Single Room Checkout: Only this room will be checked out"}),(0,er.jsxs)("p",{className:"mt-1",children:["Rooms: ",(null===(t=a)||void 0===t||null===(r=t.room_numbers)||void 0===r?void 0:r.join(", "))||e]}),(null===(n=a)||void 0===n?void 0:n.room_numbers)&&a.room_numbers.length>1&&!l&&(0,er.jsx)("p",{className:"mt-1 text-xs italic",children:"Other rooms in this booking will remain checked in."})]})})()]}),k&&k.exists&&(0,er.jsx)("div",{className:"mb-4 p-3 rounded-lg ".concat("completed"===k.status?"bg-green-50 border border-green-200":"in_progress"===k.status?"bg-blue-50 border border-blue-200":"bg-yellow-50 border border-yellow-200"),children:(0,er.jsx)("div",{className:"flex items-center justify-between",children:(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"font-semibold ".concat("completed"===k.status?"text-green-800":"in_progress"===k.status?"text-blue-800":"text-yellow-800"),children:"completed"===k.status?"\u2713 Checkout Request Completed":"in_progress"===k.status?"\ud83d\udd04 Checkout Request In Progress":"\u26a0 Checkout Request Pending"}),k.employee_name&&(0,er.jsxs)("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned to: ",k.employee_name]}),k.inventory_checked_by&&(0,er.jsxs)("p",{className:"text-xs text-gray-600 mt-1",children:["Verified by: ",k.inventory_checked_by,k.inventory_checked_at&&" on ".concat(new Date(k.inventory_checked_at).toLocaleString())]}),"completed"!==k.status&&(0,er.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:"Please complete the checkout request in the Service Requests section before getting the bill."})]})})}),(!k||!k.exists)&&(0,er.jsx)("button",{onClick:async()=>{if(e){h(!0);try{const t=e.includes("-")?e.split("-")[1]:e,n=await J$.post("/bill/checkout-request?room_number=".concat(t,"&checkout_mode=").concat(r));Z("success",n.data.message||"Checkout request created successfully. Please verify room inventory.");const a=await J$.get("/bill/checkout-request/".concat(t));a.data&&a.data.exists&&S(a.data)}catch(a){var t,n;const e=null===(t=a.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.detail,r="string"===typeof e?e:a.message||"Unknown error";Z("error","Error: ".concat(r)),console.error("Error creating checkout request:",a)}finally{h(!1)}}else Z("error","Please select a booking to checkout.")},className:"w-full bg-yellow-600 text-white py-2.5 rounded-lg font-semibold hover:bg-yellow-700 transition duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 mb-4",disabled:u,children:u?"Creating Request...":"Request Checkout (Verify Inventory First)"}),(0,er.jsx)("button",{onClick:async()=>{if(e)if(k&&k.exists&&"completed"!==k.status)Z("error","Please complete the checkout request (verify inventory) before getting the bill.");else{h(!0),i(null),d(0);try{const t=e.includes("-")?e.split("-")[1]:e,n=await J$.get("/bill/".concat(t,"?checkout_mode=").concat(r));if(!n.data||!n.data.room_numbers)throw new Error("Invalid bill data received");{i(n.data);const e=n.data.room_numbers.length,t="single"===r?"single room":"all rooms in the booking";Z("success","Bill retrieved for ".concat(e," room(s) (").concat(t,")."))}}catch(a){var t,n;const e=null===(t=a.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.detail,r="string"===typeof e?e:a.message||"Unknown error";Z("error","Error: ".concat(r)),i(null),console.error("Error fetching bill:",a)}finally{h(!1)}}else Z("error","Please select a booking to checkout.")},className:"w-full py-2.5 rounded-lg font-semibold transition duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 mb-4 ".concat(k&&k.exists&&"completed"!==k.status?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-indigo-600 text-white hover:bg-indigo-700 focus:ring-indigo-500"),disabled:u||k&&k.exists&&"completed"!==k.status,children:u?"Fetching Bill...":"single"===r?"Get Bill for Single Room":"Get Bill for Entire Booking"}),s&&((e,t)=>{const r=s.charges.food_charges||(s.charges.food_items&&s.charges.food_items.length>0?s.charges.food_items.filter(e=>!e.is_paid).reduce((e,t)=>e+(t.amount||0),0):0),n=s.charges.consumables_items||[],a=(null===(e=s.charges.inventory_usage)||void 0===e?void 0:e.filter(e=>e.is_payable||e.rental_price&&e.rental_price>0||e.rental_charge>0))||[],i=s.charges.food_items&&s.charges.food_items.length>0,o=(null===(t=s.room_numbers)||void 0===t?void 0:t.length)||1,l=s.stay_nights||1,d=s.charges.room_charges||0,u=d>0&&l>0&&o>0?d/(l*o):0;return(0,er.jsxs)("div",{id:"bill-details",className:"bg-gray-50 border border-gray-200 p-4 rounded-xl mb-6 animate-fade-in",children:[(0,er.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4 text-center",children:"Detailed Bill"}),(0,er.jsxs)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 mb-4 text-sm",children:[(0,er.jsxs)("p",{children:[(0,er.jsx)("span",{className:"font-semibold",children:"Guest Name:"})," ",s.guest_name]}),(0,er.jsxs)("p",{children:[(0,er.jsx)("span",{className:"font-semibold",children:"Rooms:"})," ",s.room_numbers.join(", ")," (",s.room_numbers.length,")"]}),(0,er.jsxs)("p",{children:[(0,er.jsx)("span",{className:"font-semibold",children:"Check-in:"})," ",new Date(s.check_in).toLocaleDateString()]}),(0,er.jsxs)("p",{children:[(0,er.jsx)("span",{className:"font-semibold",children:"Check-out:"})," ",new Date(s.check_out).toLocaleDateString()]}),(0,er.jsxs)("p",{children:[(0,er.jsx)("span",{className:"font-semibold",children:"Stay:"})," ",s.stay_nights," nights"]}),(0,er.jsxs)("p",{children:[(0,er.jsx)("span",{className:"font-semibold",children:"Guests:"})," ",s.number_of_guests]})]}),(0,er.jsxs)("div",{className:"mt-4 pt-4 border-t",children:[(0,er.jsx)("h3",{className:"font-bold text-gray-700 mb-2",children:"Itemized Charges:"}),(0,er.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-gray-600",children:[s.charges.room_charges>0&&(0,er.jsxs)("li",{children:["Room Charges: ",ym(s.charges.room_charges),(0,er.jsxs)("span",{className:"text-xs text-gray-500 ml-2",children:["(",ym(u),"/day \xd7 ",l," ",1===l?"night":"nights"," \xd7 ",o," ",1===o?"room":"rooms",")"]})]}),s.charges.package_charges>0&&(0,er.jsxs)("li",{children:["Package Charges: ",ym(s.charges.package_charges)]}),i&&(0,er.jsxs)("li",{children:["Food Charges: ",ym(r)," ",0===r&&s.charges.food_items.some(e=>e.is_paid)&&(0,er.jsx)("span",{className:"text-xs text-gray-500",children:"(All paid)"})]}),s.charges.service_charges>0&&(0,er.jsxs)("li",{children:["Service Charges: ",ym(s.charges.service_charges)]}),s.charges.consumables_charges>0&&(0,er.jsxs)("li",{children:["Consumables Charges: ",ym(s.charges.consumables_charges)]}),s.charges.inventory_charges>0&&(0,er.jsxs)("li",{className:"text-blue-700 font-semibold",children:["Inventory/Rental Charges: ",ym(s.charges.inventory_charges)]}),s.charges.asset_damage_charges>0&&(0,er.jsxs)("li",{className:"text-red-700 font-semibold",children:["Asset Damage Charges: ",ym(s.charges.asset_damage_charges)]})]}),s.charges.food_items.length>0&&(0,er.jsxs)("div",{className:"mt-3",children:[(0,er.jsx)("h4",{className:"font-semibold text-gray-600",children:"Food & Beverage Details:"}),(0,er.jsx)("ul",{className:"list-decimal list-inside ml-4 text-xs text-gray-500",children:s.charges.food_items.map((e,t)=>(0,er.jsxs)("li",{className:e.is_paid?"text-gray-400 line-through":"",children:[e.item_name," (x",e.quantity,") - ",ym(e.amount),e.is_paid&&(0,er.jsx)("span",{className:"ml-2 text-green-600 text-xs",children:"(Paid)"})]},t))})]}),n.length>0&&(0,er.jsxs)("div",{className:"mt-3",children:[(0,er.jsx)("h4",{className:"font-semibold text-gray-600",children:"Consumables:"}),(0,er.jsx)("ul",{className:"list-decimal list-inside ml-4 text-xs text-gray-500",children:n.map((e,t)=>(0,er.jsxs)("li",{children:[(0,er.jsxs)("span",{className:0===e.total_charge?"text-green-600 font-medium":"",children:[e.item_name," (x",e.actual_consumed,")",e.total_charge>0?" - ".concat(ym(e.total_charge)):" - Complimentary"]}),e.complimentary_limit>0&&e.total_charge>0&&(0,er.jsxs)("span",{className:"text-xs text-gray-400 ml-1",children:["(Limit: ",e.complimentary_limit," free)"]})]},t))})]}),s.charges.service_items.length>0&&(0,er.jsxs)("div",{className:"mt-3",children:[(0,er.jsx)("h4",{className:"font-semibold text-gray-600",children:"Additional Services:"}),(0,er.jsx)("ul",{className:"list-decimal list-inside ml-4 text-xs text-gray-500",children:s.charges.service_items.map((e,t)=>(0,er.jsxs)("li",{className:e.is_paid?"text-gray-400 line-through":"",children:[e.service_name," - ",ym(e.charges),e.is_paid&&(0,er.jsx)("span",{className:"ml-2 text-green-600 text-xs font-semibold no-underline",children:"(Previously Billed)"})]},t))})]}),a.length>0&&(0,er.jsxs)("div",{className:"mt-3",children:[(0,er.jsx)("h4",{className:"font-semibold text-gray-600",children:"Inventory/Rental Usage:"}),(0,er.jsx)("ul",{className:"list-disc list-inside ml-4 text-xs text-gray-500",children:a.map((e,t)=>(0,er.jsxs)("li",{children:[(0,er.jsx)("span",{className:"font-medium text-gray-700",children:e.item_name}),e.quantity>0&&" (x".concat(e.quantity," ").concat(e.unit,")"),e.rental_price>0&&(0,er.jsxs)("span",{className:"text-blue-700 font-semibold ml-2",children:["@ \u20b9",e.rental_price," = \u20b9",e.rental_charge||e.rental_price*e.quantity]}),e.room_number&&" - Room ".concat(e.room_number),(0,er.jsxs)("span",{className:"text-gray-400 ml-1",children:["[",new Date(e.date).toLocaleDateString(),"]"]})]},t))})]}),s.charges.asset_damages&&s.charges.asset_damages.length>0&&(0,er.jsxs)("div",{className:"mt-3",children:[(0,er.jsx)("h4",{className:"font-semibold text-gray-600",children:"Asset Damages:"}),(0,er.jsx)("ul",{className:"list-disc list-inside ml-4 text-xs text-red-500",children:s.charges.asset_damages.map((e,t)=>(0,er.jsxs)("li",{children:[(0,er.jsx)("span",{className:"font-medium text-gray-700",children:e.item_name}),(0,er.jsxs)("span",{children:[" - ",ym(e.replacement_cost)]}),e.notes&&(0,er.jsxs)("span",{className:"text-gray-400 ml-1",children:["(",e.notes,")"]})]},t))})]}),(0,er.jsxs)("div",{className:"mt-4 pt-4 border-t text-right space-y-1",children:[(0,er.jsxs)("p",{className:"text-sm text-gray-600",children:["Subtotal: ",ym(s.charges.total_due)]}),s.charges.room_gst>0&&(0,er.jsxs)("p",{className:"text-xs text-gray-500",children:["Room GST (",s.charges.room_charges<5e3?"5%":s.charges.room_charges<=7500?"12%":"18%","): +",ym(s.charges.room_gst||0)]}),s.charges.package_gst>0&&(0,er.jsxs)("p",{className:"text-xs text-gray-500",children:["Package GST (",s.charges.package_charges<5e3?"5%":s.charges.package_charges<=7500?"12%":"18%","): +",ym(s.charges.package_gst||0)]}),s.charges.food_gst>0&&(0,er.jsxs)("p",{className:"text-xs text-gray-500",children:["Food GST (5%): +",ym(s.charges.food_gst||0)]}),(0,er.jsxs)("p",{className:"text-sm text-gray-600 font-semibold",children:["Total GST: +",ym(s.charges.total_gst||0)]}),c>0&&(0,er.jsxs)("p",{className:"text-sm text-green-600",children:["Discount: -",ym(parseFloat(c))]}),(0,er.jsxs)("p",{className:"font-bold text-xl text-gray-900",children:["Grand Total: ",ym(Math.max(0,s.charges.total_due+(s.charges.total_gst||0)-c))]})]})]})]})})(),s&&(0,er.jsxs)(er.Fragment,{children:[(0,er.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{htmlFor:"discount",className:"block text-gray-700 font-medium mb-2",children:"Discount (\u20b9)"}),(0,er.jsx)("input",{type:"number",id:"discount",value:c,onChange:e=>d(e.target.value),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0.00"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{htmlFor:"payment-method",className:"block text-gray-700 font-medium mb-2",children:"Payment Method"}),(0,er.jsxs)("select",{id:"payment-method",value:o,onChange:e=>l(e.target.value),className:"w-full px-4 py-2 border rounded-lg h-full focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[(0,er.jsx)("option",{value:"Card",children:"Card"}),(0,er.jsx)("option",{value:"Cash",children:"Cash"}),(0,er.jsx)("option",{value:"Online",children:"Online"})]})]})]}),(0,er.jsxs)("div",{className:"space-y-3",children:[(0,er.jsxs)("div",{className:"flex space-x-2",children:[(0,er.jsx)("button",{onClick:()=>me("print"),className:"flex-1 bg-gray-500 text-white py-2 rounded-lg font-semibold hover:bg-gray-600 transition",children:"Print"}),(0,er.jsx)("button",{onClick:()=>me("download"),className:"flex-1 bg-indigo-500 text-white py-2 rounded-lg font-semibold hover:bg-indigo-600 transition",children:"Download"}),(0,er.jsx)("button",{onClick:()=>{const e=pe(!0);window.open("https://wa.me/?text=".concat(e),"_blank")},className:"flex-1 bg-green-500 text-white py-2 rounded-lg font-semibold hover:bg-green-600 transition",children:"WhatsApp"}),(0,er.jsx)("button",{onClick:()=>{const e=encodeURIComponent("Your Hotel Bill for Room(s) ".concat(s.room_numbers.join(", "))),t=pe(!1);window.location.href="mailto:?subject=".concat(e,"&body=").concat(t)},className:"flex-1 bg-blue-500 text-white py-2 rounded-lg font-semibold hover:bg-blue-600 transition",children:"Email"})]}),(0,er.jsx)("button",{onClick:async()=>{if(!s)return void Z("error","Please retrieve the bill before checkout.");if(!e)return void Z("error","No booking selected for checkout.");if(k&&k.exists&&"completed"!==k.status)return void Z("error","Please complete the checkout request (verify inventory) before completing checkout.");const a=parseFloat(c)||0;if(a<0)return void Z("error","Discount amount cannot be negative.");if(a>s.charges.total_due+(s.charges.total_gst||0))Z("error","Discount cannot exceed the grand total.");else{h(!0);try{var l;const c=e.includes("-")?e.split("-")[1]:e,u=await J$.post("/bill/checkout/".concat(c),{payment_method:o,discount_amount:a,checkout_mode:r}),h=(null===(l=s.room_numbers)||void 0===l?void 0:l.length)||1,m="single"===r?"single room":"all rooms";i(null),d(0),t(""),n("multiple"),Z("success","Checkout successful! ".concat(h," room(s) (").concat(m,") checked out. Checkout ID: ").concat(u.data.checkout_id)),await ue()}catch(g){var u,m,p,f;const e=(null===(u=g.response)||void 0===u||null===(m=u.data)||void 0===m?void 0:m.detail)||g.message||"Checkout failed";if(409===(null===(p=g.response)||void 0===p?void 0:p.status)){const r=e.includes("already")?e:"This booking or room has already been checked out. ".concat(e);Z("error",r),i(null),d(0),t(""),ue()}else 404===(null===(f=g.response)||void 0===f?void 0:f.status)?(Z("error","Booking not found. It may have already been checked out. Refreshing..."),i(null),t(""),ue()):Z("error","Error: ".concat(e));console.error("Checkout error:",g)}finally{h(!1)}}},className:"w-full bg-red-600 text-white py-3 rounded-lg font-bold text-lg hover:bg-red-700 transition duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",disabled:u,children:u?"Processing...":"Complete Checkout"})]})]})]}),(0,er.jsxs)("div",{className:"bg-white p-3 sm:p-6 rounded-xl shadow-md w-full max-w-7xl mx-auto",children:[(0,er.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 gap-3",children:[(0,er.jsxs)("div",{className:"flex items-center gap-3",children:[(0,er.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Completed Checkouts"}),(0,er.jsx)("button",{onClick:()=>{h(!0),ue().finally(()=>h(!1))},className:"p-2 bg-indigo-50 text-indigo-600 rounded-full hover:bg-indigo-100 transition-colors",title:"Refresh Checkouts",children:(0,er.jsx)(G$,{size:18,className:u?"animate-spin":""})})]}),ce>0&&(0,er.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,er.jsxs)("span",{children:["Showing ",le.length," of ",x.length," checkouts"]}),(0,er.jsxs)("button",{onClick:de,className:"flex items-center gap-1 px-3 py-1.5 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition-colors",children:[(0,er.jsx)(Gq,{size:14}),"Clear Filters (",ce,")"]})]})]}),(0,er.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mb-4 border border-gray-200",children:[(0,er.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,er.jsx)(K$,{size:18,className:"text-indigo-600"}),(0,er.jsx)("h3",{className:"font-semibold text-gray-800",children:"Filters & Search"})]}),(0,er.jsxs)("div",{className:"mb-4",children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),(0,er.jsxs)("div",{className:"relative",children:[(0,er.jsx)(Y$,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),(0,er.jsx)("input",{type:"text",value:L,onChange:e=>M(e.target.value),placeholder:"Search by ID, guest name, room number, booking ID...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Guest Name"}),(0,er.jsx)("input",{type:"text",value:R,onChange:e=>F(e.target.value),placeholder:"Filter by guest name",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Room Number"}),(0,er.jsx)("input",{type:"text",value:B,onChange:e=>z(e.target.value),placeholder:"Filter by room number",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Booking/Package ID"}),(0,er.jsx)("input",{type:"text",value:U,onChange:e=>q(e.target.value),placeholder:"Filter by booking ID",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Method"}),(0,er.jsxs)("select",{value:W,onChange:e=>V(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm bg-white",children:[(0,er.jsx)("option",{value:"All",children:"All Methods"}),oe.map(e=>(0,er.jsx)("option",{value:e,children:e},e))]})]})]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mt-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From Date"}),(0,er.jsx)("input",{type:"date",value:H,onChange:e=>G(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"To Date"}),(0,er.jsx)("input",{type:"date",value:K,onChange:e=>Y(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Amount (\u20b9)"}),(0,er.jsx)("input",{type:"number",value:X,onChange:e=>Q(e.target.value),placeholder:"0",min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Amount (\u20b9)"}),(0,er.jsx)("input",{type:"number",value:$,onChange:e=>J(e.target.value),placeholder:"No limit",min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm"})]})]})]}),(0,er.jsx)("div",{className:"overflow-x-auto -mx-2 sm:mx-0",children:(0,er.jsxs)("table",{className:"min-w-full text-xs sm:text-sm text-left",children:[(0,er.jsx)("thead",{className:"bg-gray-50 border-b-2 border-gray-200 text-gray-800 uppercase tracking-wider",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"p-2 sm:p-3",children:"ID"}),(0,er.jsx)("th",{className:"p-2 sm:p-3 hidden sm:table-cell",children:"Guest"}),(0,er.jsx)("th",{className:"p-2 sm:p-3",children:"Rooms"}),(0,er.jsx)("th",{className:"p-2 sm:p-3 hidden lg:table-cell",children:"Booking/Package ID"}),(0,er.jsx)("th",{className:"p-2 sm:p-3 hidden md:table-cell",children:"Payment"}),(0,er.jsx)("th",{className:"p-2 sm:p-3 hidden lg:table-cell",children:"Date"}),(0,er.jsx)("th",{className:"p-2 sm:p-3 text-right",children:"Total"})]})}),(0,er.jsx)("tbody",{className:"divide-y divide-gray-200",children:le.length>0?le.map(e=>(0,er.jsxs)("tr",{className:"hover:bg-indigo-50 cursor-pointer",onClick:()=>b(e),children:[(0,er.jsx)("td",{className:"p-2 sm:p-3 font-medium text-gray-800 text-xs sm:text-sm",children:e.id}),(0,er.jsx)("td",{className:"p-2 sm:p-3 font-semibold text-gray-900 text-xs sm:text-sm hidden sm:table-cell",children:e.guest_name}),(0,er.jsx)("td",{className:"p-2 sm:p-3 text-gray-800 text-xs sm:text-sm",children:e.room_number}),(0,er.jsx)("td",{className:"p-2 sm:p-3 text-gray-800 text-xs sm:text-sm hidden lg:table-cell",children:e.booking_id||e.package_booking_id||"N/A"}),(0,er.jsx)("td",{className:"p-2 sm:p-3 text-gray-800 text-xs sm:text-sm hidden md:table-cell",children:e.payment_method}),(0,er.jsx)("td",{className:"p-2 sm:p-3 text-gray-800 text-xs sm:text-sm hidden lg:table-cell",children:new Date(e.created_at).toLocaleDateString()}),(0,er.jsx)("td",{className:"p-2 sm:p-3 font-bold text-gray-900 text-right text-xs sm:text-sm",children:ym(e.grand_total)})]},e.id)):(0,er.jsx)("tr",{children:(0,er.jsx)("td",{colSpan:"7",className:"p-4 text-center text-gray-500 text-sm sm:text-base",children:ce>0?(0,er.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,er.jsx)("span",{children:"No checkouts match your filters."}),(0,er.jsx)("button",{onClick:de,className:"text-indigo-600 hover:text-indigo-800 underline text-sm",children:"Clear all filters"})]}):"No completed checkouts found."})})})]})}),j&&(0,er.jsx)("div",{ref:te,className:"text-center p-4",children:N&&(0,er.jsx)("span",{className:"text-indigo-600",children:"Loading more checkouts..."})})]}),(0,er.jsx)(eJ,{checkout:v,onClose:()=>b(null)}),E&&P&&(0,er.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,er.jsx)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:(0,er.jsxs)("div",{className:"p-6",children:[(0,er.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,er.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Verify Room Inventory"}),(0,er.jsx)("button",{onClick:()=>{T(null),O(null)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,er.jsx)(ZQ,{size:24})})]}),(0,er.jsx)("div",{className:"mb-4 bg-orange-50 border border-orange-200 p-4 rounded-lg",children:(0,er.jsx)("p",{className:"text-sm text-orange-800",children:"Please check both consumables and fixed assets. Mark any damaged assets below."})}),P.fixed_assets&&P.fixed_assets.length>0&&(0,er.jsxs)("div",{className:"mb-6",children:[(0,er.jsx)("h3",{className:"text-lg font-semibold mb-3 text-red-700",children:"Fixed Assets Check"}),(0,er.jsx)("div",{className:"bg-red-50 p-4 rounded-lg border border-red-100",children:(0,er.jsxs)("table",{className:"w-full text-sm",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"border-b border-red-200",children:[(0,er.jsx)("th",{className:"text-left py-2 font-medium text-red-800",children:"Asset Name"}),(0,er.jsx)("th",{className:"text-left py-2 font-medium text-red-800",children:"Serial No."}),(0,er.jsx)("th",{className:"text-center py-2 font-medium text-red-800",children:"Current"}),(0,er.jsx)("th",{className:"text-center py-2 font-medium text-red-800",children:"Available"}),(0,er.jsx)("th",{className:"text-right py-2 font-medium text-red-800",children:"Cost"}),(0,er.jsx)("th",{className:"text-center py-2 font-medium text-red-800",children:"Damaged?"}),(0,er.jsx)("th",{className:"text-left py-2 font-medium text-red-800",children:"Notes"})]})}),(0,er.jsx)("tbody",{children:P.fixed_assets.map((e,t)=>(0,er.jsxs)("tr",{className:"border-b border-red-100 last:border-0 hover:bg-red-50 transition-colors",children:[(0,er.jsxs)("td",{className:"py-2 text-gray-800 font-medium",children:[e.item_name,(0,er.jsx)("div",{className:"text-xs text-gray-500",children:e.asset_tag})]}),(0,er.jsx)("td",{className:"py-2 text-gray-600 border-l border-r border-red-100 px-2 font-mono text-xs",children:e.serial_number||"-"}),(0,er.jsx)("td",{className:"py-2 text-center text-gray-600",children:e.current_stock}),(0,er.jsx)("td",{className:"py-2 text-center",children:(0,er.jsx)("input",{type:"number",min:"0",max:"1",className:"w-12 border rounded p-1 text-center font-bold ".concat(e.available_stock<e.current_stock?"text-red-600 bg-red-50 border-red-300":"text-green-600 border-gray-300"),value:e.available_stock,onChange:e=>he(t,"available_stock",e.target.value)})}),(0,er.jsxs)("td",{className:"py-2 text-gray-600 text-right",children:["\u20b9",e.replacement_cost]}),(0,er.jsx)("td",{className:"py-2 text-center",children:(0,er.jsx)("input",{type:"checkbox",checked:e.is_damaged||!1,onChange:e=>he(t,"is_damaged",e.target.checked),className:"w-5 h-5 text-red-600 rounded focus:ring-red-500 border-gray-300"})}),(0,er.jsx)("td",{className:"py-2 px-2",children:(e.is_damaged||e.available_stock<e.current_stock)&&(0,er.jsx)("input",{type:"text",placeholder:"Describe damage...",value:e.damage_notes||"",onChange:e=>he(t,"damage_notes",e.target.value),className:"w-full border p-1 rounded text-sm focus:ring-1 focus:ring-red-500 outline-none"})})]},t))})]})})]}),(0,er.jsxs)("div",{className:"mb-6",children:[(0,er.jsx)("h3",{className:"text-lg font-semibold mb-3 text-gray-800",children:"Consumables Inventory Check"}),(0,er.jsx)("div",{className:"mb-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,er.jsxs)("p",{className:"text-sm text-blue-800",children:["\ud83d\udce6 ",(0,er.jsx)("strong",{children:"Consumables Usage Tracking:"})," Track how many items were consumed (e.g., beverages, snacks). No damage reporting needed for consumables - only usage quantity matters."]})}),(0,er.jsx)("div",{className:"overflow-x-auto border rounded-lg",children:(0,er.jsxs)("table",{className:"min-w-full text-sm",children:[(0,er.jsx)("thead",{className:"bg-gray-100 uppercase tracking-wider text-gray-700",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Item Name"}),(0,er.jsx)("th",{className:"py-3 px-4 text-center",children:"Current Stock"}),(0,er.jsx)("th",{className:"py-3 px-4 text-center",children:"Available Stock"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Return Unused To"}),(0,er.jsx)("th",{className:"py-3 px-4 text-center",children:"Consumed Qty"}),(0,er.jsx)("th",{className:"py-3 px-4 text-right",children:"Potential Charge"})]})}),(0,er.jsxs)("tbody",{className:"divide-y divide-gray-200",children:[P.items&&P.items.map((e,t)=>{e.used_qty,e.charge_per_unit||e.unit_price;const r=(e.used_qty||0)>(e.complimentary_limit||0)?(e.used_qty-e.complimentary_limit)*(e.charge_per_unit||0):0;return(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsx)("td",{className:"py-3 px-4 font-medium",children:e.item_name}),(0,er.jsx)("td",{className:"py-3 px-4 text-center text-gray-600 font-semibold",children:e.current_stock||0}),(0,er.jsx)("td",{className:"py-3 px-4 text-center",children:(0,er.jsx)("input",{type:"number",min:"0",max:e.current_stock,className:"w-20 border rounded p-1 text-center font-bold ".concat(e.available_stock<e.current_stock?"text-orange-600 border-orange-300 bg-orange-50":"text-green-600 border-gray-300"),value:e.available_stock,onChange:e=>((e,t,r)=>{const n=[...P.items],a=parseFloat(r)||0;if(n[e][t]=a,"available_stock"===t){const t=(n[e].current_stock||0)-a;n[e].used_qty=Math.max(0,t),n[e].missing_qty=0}O(Be(Be({},P),{},{items:n}))})(t,"available_stock",e.target.value)})}),(0,er.jsx)("td",{className:"py-3 px-4",children:e.available_stock>0?(0,er.jsxs)("select",{className:"w-full text-sm border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500",value:e.return_location_id||"",onChange:e=>((e,t)=>{const r=[...P.items];r[e].return_location_id=t?parseInt(t):null,O(Be(Be({},P),{},{items:r}))})(t,e.target.value),children:[(0,er.jsx)("option",{value:"",children:"Auto-detect (Default)"}),D.map(e=>(0,er.jsxs)("option",{value:e.id,children:[e.name," ",e.location_type?"(".concat(e.location_type,")"):""]},e.id))]}):(0,er.jsx)("span",{className:"text-gray-400 text-xs",children:"-"})}),(0,er.jsxs)("td",{className:"py-3 px-4 text-center text-gray-700",children:[e.used_qty||0,e.complimentary_limit>0&&(0,er.jsxs)("span",{className:"text-xs text-green-600 block",children:["(Free: ",e.complimentary_limit,")"]})]}),(0,er.jsx)("td",{className:"py-3 px-4 text-right font-medium text-red-600",children:r>0?"+".concat(ym(r)):"-"})]},t)}),(!P.items||0===P.items.length)&&(0,er.jsx)("tr",{children:(0,er.jsx)("td",{colSpan:"5",className:"py-4 text-center text-gray-500",children:"No consumable items found."})})]})]})})]}),P.assets&&P.assets.length>0&&(0,er.jsxs)("div",{className:"mb-6",children:[(0,er.jsx)("h3",{className:"text-lg font-semibold mb-3 text-gray-800",children:"Fixed Assets / Room Inventory"}),(0,er.jsx)("div",{className:"overflow-x-auto border rounded-lg",children:(0,er.jsxs)("table",{className:"min-w-full text-sm",children:[(0,er.jsx)("thead",{className:"bg-blue-50 uppercase tracking-wider text-blue-800",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Asset Name"}),(0,er.jsx)("th",{className:"py-3 px-4 text-center",children:"Serial / Tag"}),(0,er.jsx)("th",{className:"py-3 px-4 text-center",children:"Quantity"}),(0,er.jsx)("th",{className:"py-3 px-4 text-center",children:"Present"}),(0,er.jsx)("th",{className:"py-3 px-4 text-center",children:"Damaged"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left",children:"Condition / Notes"})]})}),(0,er.jsx)("tbody",{className:"divide-y divide-gray-200",children:P.assets.map((e,t)=>(0,er.jsxs)("tr",{className:"hover:bg-blue-50 ".concat(e.is_damaged?"bg-red-50":""),children:[(0,er.jsx)("td",{className:"py-3 px-4 font-medium",children:e.item_name||e.name}),(0,er.jsx)("td",{className:"py-3 px-4 text-center text-gray-600 font-mono text-xs",children:e.serial_number||e.asset_tag||"-"}),(0,er.jsx)("td",{className:"py-3 px-4 text-center font-semibold",children:e.quantity||1}),(0,er.jsx)("td",{className:"py-3 px-4 text-center",children:(0,er.jsx)("input",{type:"checkbox",checked:!1!==e.is_present,onChange:e=>{const r=[...P.assets];r[t]=Be(Be({},r[t]),{},{is_present:e.target.checked}),O(Be(Be({},P),{},{assets:r}))},className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"})}),(0,er.jsx)("td",{className:"py-3 px-4 text-center",children:(0,er.jsx)("input",{type:"checkbox",checked:e.is_damaged||!1,onChange:e=>{const r=[...P.assets];r[t]=Be(Be({},r[t]),{},{is_damaged:e.target.checked}),O(Be(Be({},P),{},{assets:r}))},className:"w-4 h-4 text-red-600 border-gray-300 rounded focus:ring-red-500"})}),(0,er.jsx)("td",{className:"py-3 px-4",children:e.is_damaged?(0,er.jsx)("input",{type:"text",placeholder:"Describe damage...",value:e.damage_notes||"",onChange:e=>{const r=[...P.assets];r[t]=Be(Be({},r[t]),{},{damage_notes:e.target.value}),O(Be(Be({},P),{},{assets:r}))},className:"w-full px-2 py-1 text-xs border border-red-300 rounded bg-red-50 focus:ring-2 focus:ring-red-500 outline-none"}):(0,er.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium ".concat("active"===(e.status||"active").toLowerCase()?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.status||"Active"})})]},t))})]})})]}),(0,er.jsxs)("div",{className:"mb-4",children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Notes"}),(0,er.jsx)("textarea",{id:"inventory-notes",className:"w-full border p-3 rounded-lg focus:ring-2 focus:ring-indigo-500",rows:"3",placeholder:"Any additional observations..."})]}),(0,er.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,er.jsx)("button",{onClick:()=>{T(null),O(null)},className:"px-6 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 font-medium",children:"Cancel"}),(0,er.jsx)("button",{onClick:()=>{var t;(async t=>{if(E){C(!0);try{const r=P.items.map(e=>({item_id:e.id,used_qty:e.used_qty||0,missing_qty:e.missing_qty||0,return_location_id:e.return_location_id})),n=(P.fixed_assets||[]).filter(e=>e.is_damaged).map(e=>({asset_registry_id:e.asset_registry_id,item_id:e.item_id,item_name:e.item_name,replacement_cost:e.replacement_cost,notes:e.damage_notes||""})),a=await J$.post("/bill/checkout-request/".concat(E,"/check-inventory"),{inventory_notes:t||"",items:r,asset_damages:n});Z("success",a.data.message||"Inventory checked successfully."),T(null),O(null);const s=e.includes("-")?e.split("-")[1]:e,i=await J$.get("/bill/checkout-request/".concat(s));i.data&&i.data.exists&&S(i.data)}catch(a){var r,n;console.error("Failed to submit inventory check:",a),alert("Failed to submit inventory check: ".concat((null===(r=a.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.detail)||a.message))}finally{C(!1)}}})(null===(t=document.getElementById("inventory-notes"))||void 0===t?void 0:t.value)},className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium shadow-md transition-all",children:"Confirm Verification"})]})]})})})]})]})},nJ=Xh("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),aJ=Xh("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),sJ=Xh("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),iJ=Xh("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),oJ=Xh("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),lJ=Xh("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),cJ=Xh("Boxes",[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]]),dJ=Xh("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]),uJ=Xh("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),hJ=Xh("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]),mJ=Xh("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),pJ=Xh("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),fJ=Xh("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),gJ=Xh("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),xJ=e=>{let{isOpen:t,onClose:r,department:n}=e;const[s,i]=(0,a.useState)("assets"),[o,l]=(0,a.useState)({assets:[],capital_investment:[],expenses:[],inventory_consumption:[],income:[]}),[c,d]=(0,a.useState)(!1),[u,h]=(0,a.useState)(null);(0,a.useEffect)(()=>{t&&n&&m()},[t,n]);const m=async()=>{try{d(!0),h(null);const e=await Ia.get("/dashboard/department/".concat(n,"/details"));l(e.data)}catch(e){console.error("Failed to fetch department details:",e),h("Failed to load department details.")}finally{d(!1)}};if(!t)return null;const p=[{id:"assets",label:"Assets",icon:(0,er.jsx)(nJ,{size:16})},{id:"capital_investment",label:"Capital Investment",icon:(0,er.jsx)(sJ,{size:16})},{id:"expenses",label:"Expenses",icon:(0,er.jsx)(fJ,{size:16})},{id:"inventory_consumption",label:"Consumption",icon:(0,er.jsx)(Zh,{size:16})},{id:"income",label:"Income",icon:(0,er.jsx)(a$,{size:16})}];return(0,er.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,er.jsxs)("div",{className:"bg-white rounded-2xl w-full max-w-5xl h-[90vh] flex flex-col shadow-2xl overflow-hidden",children:[(0,er.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 bg-gray-50",children:[(0,er.jsxs)("div",{children:[(0,er.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[(0,er.jsx)(Zh,{className:"text-indigo-600"}),n," Department - Detail Breakdown"]}),(0,er.jsx)("p",{className:"text-gray-500 text-sm mt-1",children:"Detailed view of assets, investments, expenses, and consumption."})]}),(0,er.jsx)("button",{onClick:r,className:"p-2 bg-white rounded-full hover:bg-gray-200 transition-colors shadow-sm",children:(0,er.jsx)(ZQ,{size:20,className:"text-gray-600"})})]}),(0,er.jsx)("div",{className:"flex border-b border-gray-200 px-6 overflow-x-auto no-scrollbar",children:p.map(e=>(0,er.jsxs)("button",{onClick:()=>i(e.id),className:"flex items-center gap-2 px-6 py-4 border-b-2 font-medium transition-colors whitespace-nowrap ".concat(s===e.id?"border-indigo-600 text-indigo-600 bg-indigo-50/50":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50"),children:[e.icon,e.label]},e.id))}),(0,er.jsx)("div",{className:"flex-1 overflow-y-auto p-6 bg-white min-h-0",children:c?(0,er.jsxs)("div",{className:"flex flex-col items-center justify-center h-64",children:[(0,er.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mb-4"}),(0,er.jsx)("p",{className:"text-gray-500",children:"Loading department details..."})]}):u?(0,er.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[(0,er.jsx)(gJ,{size:48,className:"text-red-400 mb-4"}),(0,er.jsx)("p",{className:"text-red-600 font-medium",children:u}),(0,er.jsx)("button",{onClick:m,className:"mt-4 px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"Retry"})]}):(0,er.jsxs)("div",{className:"chart-animate-appear",children:["assets"===s&&(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full text-sm",children:[(0,er.jsx)("thead",{className:"bg-gray-50",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"px-4 py-2 text-left",children:"Item Name"}),(0,er.jsx)("th",{className:"px-4 py-2 text-left",children:"Type"}),(0,er.jsx)("th",{className:"px-4 py-2 text-right",children:"Quantity"}),(0,er.jsx)("th",{className:"px-4 py-2 text-right",children:"Unit Price"}),(0,er.jsx)("th",{className:"px-4 py-2 text-right",children:"Total Value"})]})}),(0,er.jsx)("tbody",{className:"divide-y divide-gray-200",children:o.assets.length>0?o.assets.map((e,t)=>(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsx)("td",{className:"px-4 py-2 font-medium",children:e.name}),(0,er.jsx)("td",{className:"px-4 py-2",children:(0,er.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("Fixed Asset"===e.type?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"),children:e.type})}),(0,er.jsx)("td",{className:"px-4 py-2 text-right",children:e.quantity}),(0,er.jsxs)("td",{className:"px-4 py-2 text-right",children:["\u20b9",e.unit_price.toLocaleString()]}),(0,er.jsxs)("td",{className:"px-4 py-2 text-right font-semibold",children:["\u20b9",e.value.toLocaleString()]})]},t)):(0,er.jsx)("tr",{children:(0,er.jsx)("td",{colSpan:"5",className:"text-center py-8 text-gray-500",children:"No assets found"})})}),o.assets.length>0&&(0,er.jsx)("tfoot",{className:"bg-gray-50 font-semibold",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{colSpan:"4",className:"px-4 py-2 text-right",children:"Total Asset Value:"}),(0,er.jsxs)("td",{className:"px-4 py-2 text-right",children:["\u20b9",o.assets.reduce((e,t)=>e+(t.value||0),0).toLocaleString()]})]})})]})}),"capital_investment"===s&&(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full text-sm",children:[(0,er.jsx)("thead",{className:"bg-gray-50",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"px-4 py-2 text-left",children:"Date"}),(0,er.jsx)("th",{className:"px-4 py-2 text-left",children:"PO #"}),(0,er.jsx)("th",{className:"px-4 py-2 text-left",children:"Item"}),(0,er.jsx)("th",{className:"px-4 py-2 text-right",children:"Qty"}),(0,er.jsx)("th",{className:"px-4 py-2 text-right",children:"Unit Price"}),(0,er.jsx)("th",{className:"px-4 py-2 text-right",children:"Total"})]})}),(0,er.jsx)("tbody",{className:"divide-y divide-gray-200",children:o.capital_investment.length>0?o.capital_investment.map((e,t)=>(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsx)("td",{className:"px-4 py-2",children:y$(e.date)}),(0,er.jsx)("td",{className:"px-4 py-2",children:e.po_number}),(0,er.jsx)("td",{className:"px-4 py-2 font-medium",children:e.item_name}),(0,er.jsx)("td",{className:"px-4 py-2 text-right",children:e.quantity}),(0,er.jsxs)("td",{className:"px-4 py-2 text-right",children:["\u20b9",e.unit_price.toLocaleString()]}),(0,er.jsxs)("td",{className:"px-4 py-2 text-right font-semibold",children:["\u20b9",e.total_amount.toLocaleString()]})]},t)):(0,er.jsx)("tr",{children:(0,er.jsx)("td",{colSpan:"6",className:"text-center py-8 text-gray-500",children:"No capital investments found"})})}),o.capital_investment.length>0&&(0,er.jsx)("tfoot",{className:"bg-gray-50 font-semibold",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{colSpan:"5",className:"px-4 py-2 text-right",children:"Total Investment:"}),(0,er.jsxs)("td",{className:"px-4 py-2 text-right",children:["\u20b9",o.capital_investment.reduce((e,t)=>e+(t.total_amount||0),0).toLocaleString()]})]})})]})}),"expenses"===s&&(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full text-sm",children:[(0,er.jsx)("thead",{className:"bg-gray-50",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"px-4 py-2 text-left",children:"Date"}),(0,er.jsx)("th",{className:"px-4 py-2 text-left",children:"Category"}),(0,er.jsx)("th",{className:"px-4 py-2 text-left",children:"Description"}),(0,er.jsx)("th",{className:"px-4 py-2 text-left",children:"Type"}),(0,er.jsx)("th",{className:"px-4 py-2 text-right",children:"Amount"})]})}),(0,er.jsx)("tbody",{className:"divide-y divide-gray-200",children:o.expenses.length>0?o.expenses.map((e,t)=>(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsx)("td",{className:"px-4 py-2",children:y$(e.date)}),(0,er.jsx)("td",{className:"px-4 py-2",children:e.category}),(0,er.jsx)("td",{className:"px-4 py-2",children:e.description}),(0,er.jsx)("td",{className:"px-4 py-2",children:(0,er.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("Direct Expense"===e.type?"bg-orange-100 text-orange-800":"bg-gray-100 text-gray-800"),children:e.type})}),(0,er.jsxs)("td",{className:"px-4 py-2 text-right font-semibold",children:["\u20b9",e.amount.toLocaleString()]})]},t)):(0,er.jsx)("tr",{children:(0,er.jsx)("td",{colSpan:"5",className:"text-center py-8 text-gray-500",children:"No expenses recorded"})})}),o.expenses.length>0&&(0,er.jsx)("tfoot",{className:"bg-gray-50 font-semibold",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{colSpan:"4",className:"px-4 py-2 text-right",children:"Total Expenses:"}),(0,er.jsxs)("td",{className:"px-4 py-2 text-right",children:["\u20b9",o.expenses.reduce((e,t)=>e+(t.amount||0),0).toLocaleString()]})]})})]})}),"inventory_consumption"===s&&(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full text-sm",children:[(0,er.jsx)("thead",{className:"bg-gray-50",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"px-4 py-2 text-left",children:"Date"}),(0,er.jsx)("th",{className:"px-4 py-2 text-left",children:"Item Name"}),(0,er.jsx)("th",{className:"px-4 py-2 text-right",children:"Qty Consumed"}),(0,er.jsx)("th",{className:"px-4 py-2 text-right",children:"Cost Value"})]})}),(0,er.jsx)("tbody",{className:"divide-y divide-gray-200",children:o.inventory_consumption.length>0?o.inventory_consumption.map((e,t)=>(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsx)("td",{className:"px-4 py-2",children:v$(e.date)}),(0,er.jsx)("td",{className:"px-4 py-2 font-medium",children:e.item_name}),(0,er.jsx)("td",{className:"px-4 py-2 text-right text-red-600",children:e.quantity}),(0,er.jsxs)("td",{className:"px-4 py-2 text-right font-semibold",children:["\u20b9",e.amount.toFixed(2)]})]},t)):(0,er.jsx)("tr",{children:(0,er.jsx)("td",{colSpan:"4",className:"text-center py-8 text-gray-500",children:"No inventory consumption"})})}),o.inventory_consumption.length>0&&(0,er.jsx)("tfoot",{className:"bg-gray-50 font-semibold",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{colSpan:"3",className:"px-4 py-2 text-right",children:"Total Consumption Cost:"}),(0,er.jsxs)("td",{className:"px-4 py-2 text-right",children:["\u20b9",o.inventory_consumption.reduce((e,t)=>e+(t.amount||0),0).toLocaleString()]})]})})]})}),"income"===s&&(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full text-sm",children:[(0,er.jsx)("thead",{className:"bg-gray-50",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"px-4 py-2 text-left",children:"Date"}),(0,er.jsx)("th",{className:"px-4 py-2 text-left",children:"Source"}),(0,er.jsx)("th",{className:"px-4 py-2 text-right",children:"Amount"})]})}),(0,er.jsx)("tbody",{className:"divide-y divide-gray-200",children:o.income.length>0?o.income.map((e,t)=>(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsx)("td",{className:"px-4 py-2",children:v$(e.date)}),(0,er.jsx)("td",{className:"px-4 py-2",children:e.source}),(0,er.jsxs)("td",{className:"px-4 py-2 text-right text-green-600 font-semibold",children:["\u20b9",e.amount.toLocaleString()]})]},t)):(0,er.jsx)("tr",{children:(0,er.jsx)("td",{colSpan:"3",className:"text-center py-8 text-gray-500",children:"No income records found"})})}),o.income.length>0&&(0,er.jsx)("tfoot",{className:"bg-gray-50 font-semibold",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{colSpan:"2",className:"px-4 py-2 text-right",children:"Total Income:"}),(0,er.jsxs)("td",{className:"px-4 py-2 text-right text-green-600",children:["\u20b9",o.income.reduce((e,t)=>e+(t.amount||0),0).toLocaleString()]})]})})]})})]})})]})})},yJ=e=>{let{title:t,value:r,icon:n,prefix:a="",suffix:s="",loading:i,decimals:o=0}=e;if(i)return(0,er.jsx)("div",{className:"bg-gray-200 h-24 rounded-2xl animate-pulse"});const l="number"===typeof r?r:parseFloat(r)||0;return(0,er.jsxs)(Fh.div,{className:"bg-white rounded-2xl shadow-lg p-5 flex items-center gap-4 hover:shadow-xl transition duration-300 transform hover:-translate-y-1",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5},children:[n,(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-gray-500 text-sm font-medium",children:t}),(0,er.jsxs)("div",{className:"text-3xl font-bold text-gray-800",children:[a&&(0,er.jsx)("span",{children:a}),(0,er.jsx)(nW.Ay,{end:l,duration:1.5,decimals:o,separator:","}),s&&(0,er.jsx)("span",{className:"text-lg ml-1",children:s})]})]})]})},vJ=e=>{let{title:t,icon:r,children:n,loading:a,className:s=""}=e;return a?(0,er.jsx)("div",{className:"bg-gray-200 h-96 rounded-2xl animate-pulse"}):(0,er.jsxs)(Fh.div,{className:"bg-white rounded-2xl shadow-xl p-6 flex flex-col ".concat(s),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[(0,er.jsxs)("div",{className:"flex items-center mb-4 border-b border-gray-200 pb-3",children:[r,(0,er.jsx)("h2",{className:"text-xl font-bold text-gray-800 ml-3",children:t})]}),n]})},bJ=e=>{let{title:t,headers:r,data:n,loading:a,hasMore:s,loadMore:i,isSubmitting:o}=e;return a?(0,er.jsx)("div",{className:"bg-gray-200 h-64 rounded-2xl animate-pulse"}):(0,er.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,er.jsx)("h3",{className:"text-xl font-bold text-gray-700 mb-4",children:t}),(0,er.jsxs)("div",{className:"overflow-x-auto max-h-80",children:[(0,er.jsxs)("table",{className:"min-w-full text-sm",children:[(0,er.jsx)("thead",{className:"bg-gray-100 sticky top-0",children:(0,er.jsx)("tr",{children:r.map(e=>(0,er.jsx)("th",{className:"px-4 py-2 text-left font-semibold text-gray-600",children:e},e))})}),(0,er.jsx)("tbody",{className:"divide-y divide-gray-200",children:n.length>0?n.map((e,n)=>(0,er.jsx)("tr",{className:"hover:bg-gray-50 transition-colors",children:r.map(r=>(0,er.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:e[r.toLowerCase().replace(/ /g,"_")]||"N/A"},"".concat(t,"-").concat(n,"-").concat(r)))},"".concat(t,"-").concat(n))):(0,er.jsx)("tr",{children:(0,er.jsx)("td",{colSpan:r.length,className:"text-center py-10 text-gray-500",children:"No data available."})})})]}),s&&(0,er.jsx)("div",{ref:i,className:"text-center p-4",children:o&&(0,er.jsx)("span",{className:"text-indigo-600",children:"Loading..."})})]})]})},jJ=["#4f46e5","#10b981","#f59e0b","#ef4444","#3b82f6"];function wJ(){var e,t,r,n,s,i,o,l,c,d,u,h,m,p,f,g,x,y,v,b,j,w,N,_,k,S,A,C,E,T,P,O,D,I,L,M,R,F,B,z,U,q,W,V,H,G,K,Y,X,Q,$,J,Z,ee,te,re,ne,ae,se,ie,oe,le,ce,de,ue,he,me,pe,fe,ge,xe,ye,ve,be,je,we,Ne,_e,ke,Se,Ae,Ce,Ee,Te,Pe,Oe,De,Ie,Le,Me,Re,Fe,ze,Ue,qe,We,Ve,He,Ge,Ke,Ye,Xe,Qe,$e,Je,Ze,et,tt,rt,nt,at,st,it,ot,lt,ct,dt,ut,ht,mt,pt,ft,gt,xt,yt,vt,bt,jt,wt,Nt,_t,kt,St,At,Ct,Et,Tt,Pt,Ot,Dt,It,Lt,Mt,Rt,Ft,Bt,zt,Ut,qt,Wt,Vt,Ht,Gt,Kt,Yt,Xt,Qt,$t,Jt,Zt,tr,rr,nr,ar,sr,ir,or,lr,cr,dr,ur,hr,mr,pr,fr,gr,xr,yr,vr,br,jr,wr,Nr,_r,kr,Sr,Ar,Cr,Er,Tr,Pr,Or,Dr,Ir,Lr,Mr,Rr,Fr,Br,zr,Ur,qr,Wr,Vr,Hr,Gr,Kr,Yr,Xr,Qr,$r,Jr,Zr,en,tn,rn,nn,an,sn,on,ln,cn,dn,un,hn,mn,pn,fn,gn,xn,yn,vn,bn,jn,wn,Nn,_n,kn,Sn,An,Cn,En,Tn,Pn,On,Dn,In,Ln,Mn,Rn,Fn,Bn,zn,Un,qn,Wn,Vn,Hn,Gn,Kn,Yn,Xn,Qn,$n,Jn,Zn,ea,ta,ra,na,aa,sa,ia,oa,la,ca,da,ua,ha,ma,pa,fa,ga,xa,ya,va,ba,ja,wa,Na,_a,ka;const[Sa,Aa]=(0,a.useState)("reports"),[Ca,Ea]=(0,a.useState)(!0),[Ta,Pa]=(0,a.useState)(!0),[Oa,Da]=(0,a.useState)(null),[La,Ma]=(0,a.useState)("all"),[Ra,Fa]=(0,a.useState)({}),[Ba,za]=(0,a.useState)({}),[Ua,qa]=(0,a.useState)({revenue_breakdown:[],weekly_performance:[]}),[Wa,Va]=(0,a.useState)(!0),[Ha,Ga]=(0,a.useState)(!1),[Ka,Ya]=(0,a.useState)({roomBookings:[],packageBookings:[],foodOrders:[],expenses:[],employees:[],inventory:[]}),[Xa,Qa]=(0,a.useState)({roomBookings:{skip:0,hasMore:!0},packageBookings:{skip:0,hasMore:!0},foodOrders:{skip:0,hasMore:!0},expenses:{skip:0,hasMore:!0},employees:{skip:0,hasMore:!0},inventory:{skip:0,hasMore:!0}}),[$a,Ja]=(0,a.useState)("chart-of-accounts"),[Za,es]=(0,a.useState)([]),[ts,rs]=(0,a.useState)([]),[ns,as]=(0,a.useState)(null),[ss,is]=(0,a.useState)(!1),[os,ls]=(0,a.useState)(!1),[cs,ds]=(0,a.useState)(null),[us,hs]=(0,a.useState)(null),[ms,ps]=(0,a.useState)([]),[fs,gs]=(0,a.useState)(!1),[xs,ys]=(0,a.useState)(new Set),[vs,bs]=(0,a.useState)(null),[js,ws]=(0,a.useState)("manual"),[Ns,_s]=(0,a.useState)(null),[ks,Ss]=(0,a.useState)(!1),[As,Cs]=(0,a.useState)(""),[Es,Ts]=(0,a.useState)(""),[Ps,Os]=(0,a.useState)(null),[Ds,Is]=(0,a.useState)(!1),[Ls,Ms]=(0,a.useState)(""),[Rs,Fs]=(0,a.useState)(""),[Bs,zs]=(0,a.useState)("master-summary"),[Us,qs]=(0,a.useState)(null),[Ws,Vs]=(0,a.useState)(!1),[Hs,Gs]=(0,a.useState)(""),[Ks,Ys]=(0,a.useState)(""),[Xs,Qs]=(0,a.useState)(null),[$s,Js]=(0,a.useState)(!1),[Zs,ei]=(0,a.useState)("dashboard"),[ti,ri]=(0,a.useState)("front-office"),[ni,ai]=(0,a.useState)("daily-arrival"),[si,ii]=(0,a.useState)(null),[oi,li]=(0,a.useState)(!1),[ci,di]=(0,a.useState)(""),[ui,hi]=(0,a.useState)(""),[mi,pi]=(0,a.useState)(b$()),[fi,gi]=(0,a.useState)(null),[xi,yi]=(0,a.useState)(!1);(0,a.useEffect)(()=>{"reports"===Sa&&ti&&ni&&("occupancy"!==ni&&"in-house-guests"!==ni&&"stock-status"!==ni&&"low-stock-alert"!==ni&&"room-discrepancy"!==ni&&"dashboard"!==ni||(async()=>{try{var e;li(!0);const t=null===(e={"front-office":{"daily-arrival":"/reports/front-office/daily-arrival?report_date=".concat(mi),"daily-departure":"/reports/front-office/daily-departure?report_date=".concat(mi),occupancy:"/reports/front-office/occupancy?report_date=".concat(mi),"police-c-form":"/reports/front-office/police-c-form".concat(ci?"?start_date=".concat(ci):"").concat(ui?"&end_date=".concat(ui):""),"night-audit":"/reports/front-office/night-audit?audit_date=".concat(mi),"no-show-cancellation":"/reports/front-office/no-show-cancellation".concat(ci?"?start_date=".concat(ci):"").concat(ui?"&end_date=".concat(ui):""),"in-house-guests":"/reports/front-office/in-house-guests"},restaurant:{"daily-sales-summary":"/reports/restaurant/daily-sales-summary?report_date=".concat(mi),"item-wise-sales":"/reports/restaurant/item-wise-sales".concat(ci?"?start_date=".concat(ci):"").concat(ui?"&end_date=".concat(ui):""),"kot-analysis":"/reports/restaurant/kot-analysis".concat(ci?"?start_date=".concat(ci):"").concat(ui?"&end_date=".concat(ui):""),"void-cancellation":"/reports/restaurant/void-cancellation".concat(ci?"?start_date=".concat(ci):"").concat(ui?"&end_date=".concat(ui):""),"discount-complimentary":"/reports/restaurant/discount-complimentary".concat(ci?"?start_date=".concat(ci):"").concat(ui?"&end_date=".concat(ui):""),"nc-report":"/reports/restaurant/nc-report".concat(ci?"?start_date=".concat(ci):"").concat(ui?"&end_date=".concat(ui):"")},inventory:{"stock-status":"/reports/inventory/stock-status","low-stock-alert":"/reports/inventory/low-stock-alert","expiry-aging":"/reports/inventory/expiry-aging?days_ahead=3","stock-movement":"/reports/inventory/stock-movement".concat(ci?"?start_date=".concat(ci):"").concat(ui?"&end_date=".concat(ui):""),"waste-spoilage":"/reports/inventory/waste-spoilage".concat(ci?"?start_date=".concat(ci):"").concat(ui?"&end_date=".concat(ui):""),"purchase-register":"/reports/inventory/purchase-register".concat(ci?"?start_date=".concat(ci):"").concat(ui?"&end_date=".concat(ui):""),variance:"/reports/inventory/variance"},housekeeping:{"room-discrepancy":"/reports/housekeeping/room-discrepancy","laundry-cost":"/reports/housekeeping/laundry-cost".concat(ci?"?start_date=".concat(ci):"").concat(ui?"&end_date=".concat(ui):""),"minibar-consumption":"/reports/housekeeping/minibar-consumption".concat(ci?"?start_date=".concat(ci):"").concat(ui?"&end_date=".concat(ui):""),"lost-found":"/reports/housekeeping/lost-found","maintenance-tickets":"/reports/housekeeping/maintenance-tickets","asset-audit":"/reports/housekeeping/asset-audit"},"security-hr":{"visitor-log":"/reports/security/visitor-log".concat(ci?"?start_date=".concat(ci):"").concat(ui?"&end_date=".concat(ui):""),"key-card-audit":"/reports/security/key-card-audit".concat(ci?"?start_date=".concat(ci):"").concat(ui?"&end_date=".concat(ui):""),"staff-attendance":"/reports/hr/staff-attendance".concat(ci?"?start_date=".concat(ci):"").concat(ui?"&end_date=".concat(ui):""),"payroll-register":"/reports/hr/payroll-register"},management:{dashboard:"/reports/management/dashboard?report_date=".concat(mi)}}[ti])||void 0===e?void 0:e[ni];if(!t)return void ii({error:"Report type not found"});const r=await Ia.get(t);ii(r.data)}catch(Oa){var t,r;console.error("Failed to fetch department report:",Oa),ii({error:(null===(t=Oa.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"Failed to fetch report"})}finally{li(!1)}})())},[ti,ni,Sa]);const[vi,bi]=(0,a.useState)({name:"",account_type:"Revenue",description:""}),[ji,wi]=(0,a.useState)({name:"",code:"",group_id:"",module:"",description:"",opening_balance:0,balance_type:"debit",tax_type:"",tax_rate:"",bank_name:"",account_number:"",ifsc_code:"",branch_name:""}),[Ni,_i]=(0,a.useState)({entry_date:b$(),description:"",notes:"",lines:[{debit_ledger_id:"",credit_ledger_id:"",amount:0,description:""}]}),ki=e=>{const t=new Date;if("day"===e);else if("week"===e)t.setDate(t.getDate()-7);else{if("month"!==e)return"";t.setMonth(t.getMonth()-1)}return t.toISOString().split("T")[0]},Si=async e=>{var t;if(!Ha&&null!==(t=Xa[e])&&void 0!==t&&t.hasMore){Ga(!0);try{const t=ki(La),r=new URLSearchParams;t&&r.append("from_date",t);const n=Xa[e].skip+10;r.append("skip",n),r.append("limit",10);const a=r.toString(),s={roomBookings:"/bookings",packageBookings:"/reports/package-bookings",foodOrders:"/reports/food-orders",expenses:"/reports/expenses",employees:"/employees",inventory:"/inventory/items"}[e]||"/".concat(e.replace(/([A-Z])/g,"-$1").toLowerCase()),i=await Ia.get("".concat(s,"?").concat(a)).catch(async()=>Ia.get("".concat({roomBookings:"/bookings",packageBookings:"/report/package-bookings",foodOrders:"/food-orders",expenses:"/expenses",employees:"/employees",inventory:"/inventory/items"}[e],"?").concat(a)));let o="roomBookings"===e?i.data.bookings||[]:i.data||[];"foodOrders"===e&&(o=o.map(e=>Be(Be({},e),{},{room_number:e.room_number||e.room_id&&Ba[e.room_id]||"-",created_at:e.created_at||e.createdAt||"-"}))),"inventory"===e&&(o=o.map(e=>{var t;return{name:e.name||"-",category:e.category_name||(null===(t=e.category)||void 0===t?void 0:t.name)||"-",current_stock:null!=e.current_stock?"".concat(e.current_stock," ").concat(e.unit||"").trim():"-",unit_price:null!=e.unit_price?"\u20b9".concat(e.unit_price.toFixed(2)):"-",stock_value:null!=e.current_stock&&null!=e.unit_price?"\u20b9".concat((e.current_stock*e.unit_price).toFixed(2)):"-",status:e.is_low_stock?"Low Stock":"In Stock"}})),Ya(t=>Be(Be({},t),{},{[e]:[...t[e],...o]})),Qa(t=>Be(Be({},t),{},{[e]:{skip:n,hasMore:10===o.length}}))}catch(r){console.error("Failed to load more ".concat(e,":"),r)}finally{Ga(!1)}}},Ai=JQ(()=>Si("roomBookings"),null!==(e=null===(t=Xa.roomBookings)||void 0===t?void 0:t.hasMore)&&void 0!==e&&e,Ha),Ci=JQ(()=>Si("packageBookings"),null!==(r=null===(n=Xa.packageBookings)||void 0===n?void 0:n.hasMore)&&void 0!==r&&r,Ha),Ei=JQ(()=>Si("foodOrders"),null!==(s=null===(i=Xa.foodOrders)||void 0===i?void 0:i.hasMore)&&void 0!==s&&s,Ha),Ti=JQ(()=>Si("expenses"),null!==(o=null===(l=Xa.expenses)||void 0===l?void 0:l.hasMore)&&void 0!==o&&o,Ha),Pi=JQ(()=>Si("employees"),null!==(c=null===(d=Xa.employees)||void 0===d?void 0:d.hasMore)&&void 0!==c&&c,Ha),Oi=JQ(()=>Si("inventory"),null!==(u=null===(h=Xa.inventory)||void 0===h?void 0:h.hasMore)&&void 0!==u&&u,Ha);(0,a.useEffect)(()=>{(async()=>{try{Ea(!0);const e=await Ia.get("/dashboard/summary?period=".concat(La));Fa(e.data)}catch(e){console.error("Failed to fetch KPI data:",e),Da("Failed to load dashboard data. Please refresh the page.")}finally{Ea(!1)}})()},[La]),(0,a.useEffect)(()=>{(async()=>{try{Pa(!0);const e=await Ia.get("/dashboard/charts");qa(e.data)}catch(e){console.error("Failed to fetch chart data:",e)}finally{Pa(!1)}})()},[]),(0,a.useEffect)(()=>{(async()=>{try{Va(!0),Qa({roomBookings:{skip:0,hasMore:!0},packageBookings:{skip:0,hasMore:!0},foodOrders:{skip:0,hasMore:!0},expenses:{skip:0,hasMore:!0},employees:{skip:0,hasMore:!0}});const e=ki(La),t=new URLSearchParams;e&&t.append("from_date",e),t.append("skip",0),t.append("limit",10);const r=t.toString(),n=Ia.get("/bookings?".concat(r)),a=Ia.get("/reports/package-bookings?".concat(r)).catch(()=>({data:[]})),s=Ia.get("/reports/food-orders?".concat(r)).catch(()=>Ia.get("/food-orders?".concat(r))),i=Ia.get("/reports/expenses?".concat(r)).catch(()=>Ia.get("/expenses?".concat(r))),o=Ia.get("/employees?".concat(r)),l=Ia.get("/inventory/items?skip=0&limit=50").catch(()=>({data:[]})),c=Ia.get("/rooms?skip=0&limit=100").catch(()=>({data:[]})),[d,u,h,m,p,f,g]=await Promise.all([n,a,s,i,o,l,c]),x={};(g.data||[]).forEach(e=>{x[e.id]=e.number}),za(x);const y=(h.data||[]).map(e=>Be(Be({},e),{},{room_number:e.room_number||e.room_id&&x[e.room_id]||"-",created_at:e.created_at||e.createdAt||"-"})),v=(m.data||[]).map(e=>({category:e.category||"-",description:e.description||"-",amount:null!=e.amount?e.amount:"-",expense_date:e.expense_date||e.date||"-"})),b=(p.data||[]).map(e=>{var t;return{name:e.name||"-",role:(null===(t=e.role)||void 0===t?void 0:t.name)||e.role||"-",salary:null!=e.salary?e.salary:"-",hire_date:e.hire_date||e.join_date||"-"}}),j=(f.data||[]).map(e=>{var t;return{name:e.name||"-",category:e.category_name||(null===(t=e.category)||void 0===t?void 0:t.name)||"-",current_stock:null!=e.current_stock?"".concat(e.current_stock," ").concat(e.unit||""):"-",unit_price:null!=e.unit_price?"\u20b9".concat(e.unit_price.toFixed(2)):"-",stock_value:null!=e.current_stock&&null!=e.unit_price?"\u20b9".concat((e.current_stock*e.unit_price).toFixed(2)):"-",status:e.is_low_stock?"Low Stock":"In Stock"}});Ya({roomBookings:d.data.bookings||[],packageBookings:u.data||[],foodOrders:y,expenses:v,employees:b,inventory:j})}catch(e){console.error("Failed to fetch detailed data:",e),Ya({roomBookings:[],packageBookings:[],foodOrders:[],expenses:[],employees:[],inventory:[]})}finally{Va(!1)}})()},[La]),(0,a.useEffect)(()=>{"accounting"===Sa&&("chart-of-accounts"===$a?(Mi(),Ri()):"journal-entries"===$a?Fi():"trial-balance"===$a?Bi():"auto-report"===$a?Di():"comprehensive-report"===$a?Ii():"gst-reports"===$a&&Li())},[Sa,$a]),(0,a.useEffect)(()=>{"gst-reports"===$a&&Bs&&Li()},[Bs,$a]);const Di=async()=>{try{Ss(!0);const e=new URLSearchParams;As&&e.append("start_date",As),Es&&e.append("end_date",Es);const t=await Ia.get("/accounts/auto-report?".concat(e.toString()));_s(t.data)}catch(e){console.error("Failed to fetch automatic report:",e)}finally{Ss(!1)}},Ii=async()=>{try{Is(!0);const e=new URLSearchParams;Ls&&e.append("start_date",Ls),Rs&&e.append("end_date",Rs),e.append("limit","50");const t=await Ia.get("/accounts/comprehensive-report?".concat(e.toString()));Os(t.data)}catch(Oa){var e;console.error("Failed to fetch comprehensive report:",Oa),401!==(null===(e=Oa.response)||void 0===e?void 0:e.status)&&alert("Failed to load comprehensive report")}finally{Is(!1)}},Li=async()=>{try{var e,t,r,n,a,s,i,o,l,c,d,u,h,m,p;Vs(!0);const f=new URLSearchParams;Hs&&f.append("start_date",Hs),Ks&&f.append("end_date",Ks);const g=f.toString(),x="/gst-reports/".concat(Bs).concat(g?"?".concat(g):"");console.log("Fetching GST Report: ".concat(x),{gstStartDate:Hs,gstEndDate:Ks,gstReportType:Bs});const y=await Ia.get(x);console.log("GST Report Response for ".concat(Bs,":"),y.data),console.log("Data structure check:",{hasData:!!y.data,all_eligible:null===(e=y.data)||void 0===e?void 0:e.all_eligible,all_eligible_data:null===(t=y.data)||void 0===t||null===(r=t.all_eligible)||void 0===r?void 0:r.data,dataLength:null===(n=y.data)||void 0===n||null===(a=n.all_eligible)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.length,slab_5:null===(i=y.data)||void 0===i?void 0:i.slab_5_percent,slab_5_data:null===(o=y.data)||void 0===o||null===(l=o.slab_5_percent)||void 0===l?void 0:l.data,slab_12:null===(c=y.data)||void 0===c?void 0:c.slab_12_percent,slab_12_data:null===(d=y.data)||void 0===d||null===(u=d.slab_12_percent)||void 0===u?void 0:u.data,slab_18:null===(h=y.data)||void 0===h?void 0:h.slab_18_percent,slab_18_data:null===(m=y.data)||void 0===m||null===(p=m.slab_18_percent)||void 0===p?void 0:p.data}),qs(y.data)}catch(Oa){var f;console.error("Failed to fetch GST report:",Oa),401!==(null===(f=Oa.response)||void 0===f?void 0:f.status)&&alert("Failed to load GST report")}finally{Vs(!1)}},Mi=async()=>{try{const e=await Ia.get("/accounts/groups?limit=100");es(e.data||[])}catch(Oa){var e;console.error("Failed to fetch account groups:",Oa),404!==(null===(e=Oa.response)||void 0===e?void 0:e.status)&&alert("Failed to load account groups. Please run the migration script first.")}},Ri=async()=>{try{const e=await Ia.get("/accounts/ledgers?limit=100");rs(e.data||[])}catch(Oa){var e;console.error("Failed to fetch account ledgers:",Oa),404!==(null===(e=Oa.response)||void 0===e?void 0:e.status)&&alert("Failed to load account ledgers")}},Fi=async()=>{try{Ea(!0);const e=await Ia.get("/accounts/journal-entries?limit=100");ps(e.data||[])}catch(Oa){var e;console.error("Failed to fetch journal entries:",Oa),404!==(null===(e=Oa.response)||void 0===e?void 0:e.status)&&alert("Failed to load journal entries")}finally{Ea(!1)}},Bi=async()=>{try{Ea(!0);const e=await Ia.get("/accounts/trial-balance",{params:{automatic:"automatic"===js}});bs(e.data)}catch(Oa){var e;console.error("Failed to fetch trial balance:",Oa),404!==(null===(e=Oa.response)||void 0===e?void 0:e.status)&&alert("Failed to load trial balance")}finally{Ea(!1)}};(0,a.useEffect)(()=>{"trial-balance"===$a&&Bi()},[js]);const zi=ns?ts.filter(e=>e.group_id===ns.id):ts;return Oa?(0,er.jsx)(xm,{children:(0,er.jsx)("div",{className:"flex items-center justify-center h-screen text-red-500 text-lg",children:(0,er.jsx)("p",{children:Oa})})}):(0,er.jsxs)(xm,{children:[(0,er.jsxs)("div",{className:"bubbles-container",children:[(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{})]}),(0,er.jsx)(xJ,{isOpen:xi,onClose:()=>yi(!1),department:fi}),(0,er.jsxs)("div",{className:"p-6 md:p-8 space-y-8 bg-gray-50 min-h-screen",children:[(0,er.jsxs)("div",{className:"flex items-center justify-between",children:[(0,er.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Account Management"}),(0,er.jsxs)("div",{className:"flex space-x-2 border-b border-gray-200",children:[(0,er.jsxs)("button",{onClick:()=>Aa("reports"),className:"px-4 py-2 font-medium ".concat("reports"===Sa?"border-b-2 border-indigo-600 text-indigo-600":"text-gray-600 hover:text-gray-800"),children:[(0,er.jsx)(nJ,{className:"inline mr-2",size:18}),"Reports"]}),(0,er.jsxs)("button",{onClick:()=>Aa("accounting"),className:"px-4 py-2 font-medium ".concat("accounting"===Sa?"border-b-2 border-indigo-600 text-indigo-600":"text-gray-600 hover:text-gray-800"),children:[(0,er.jsx)(aJ,{className:"inline mr-2",size:18}),"Accounting"]})]})]}),"reports"===Sa&&(0,er.jsxs)(er.Fragment,{children:[(0,er.jsxs)("div",{className:"flex justify-between items-center",children:[(0,er.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Comprehensive Dashboard"}),(0,er.jsx)("div",{className:"flex items-center space-x-2 bg-white p-1 rounded-lg shadow",children:["day","week","month","all"].map(e=>(0,er.jsx)("button",{onClick:()=>Ma(e),className:"px-4 py-2 text-sm font-semibold rounded-md transition-colors ".concat(La===e?"bg-indigo-600 text-white shadow-md":"text-gray-600 hover:bg-gray-100"),children:"day"===e?"Today":"week"===e?"This Week":"month"===e?"This Month":"All Time"},e))})]}),(0,er.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-5",children:[(0,er.jsx)(yJ,{title:"Room Bookings",value:Ra.room_bookings||0,loading:Ca,icon:(0,er.jsx)(V$,{className:"text-purple-500 w-8 h-8"})}),(0,er.jsx)(yJ,{title:"Package Bookings",value:Ra.package_bookings||0,loading:Ca,icon:(0,er.jsx)(Zh,{className:"text-indigo-500 w-8 h-8"})}),(0,er.jsx)(yJ,{title:"Total Bookings",value:Ra.total_bookings||0,loading:Ca,icon:(0,er.jsx)(n$,{className:"text-blue-500 w-8 h-8"})}),(0,er.jsx)(yJ,{title:"Food Orders",value:Ra.food_orders||0,loading:Ca,icon:(0,er.jsx)(H$,{className:"text-orange-500 w-8 h-8"})}),(0,er.jsx)(yJ,{title:"Services Assigned",value:Ra.assigned_services||0,loading:Ca,icon:(0,er.jsx)(em,{className:"text-teal-500 w-8 h-8"})}),(0,er.jsx)(yJ,{title:"Services Completed",value:Ra.completed_services||0,loading:Ca,icon:(0,er.jsx)(Hq,{className:"text-green-500 w-8 h-8"})}),(0,er.jsx)(yJ,{title:"Total Expenses",value:Ra.total_expenses||0,prefix:"\u20b9",decimals:2,loading:Ca,icon:(0,er.jsx)(a$,{className:"text-red-500 w-8 h-8"})}),(0,er.jsx)(yJ,{title:"Expense Count",value:Ra.expense_count||0,loading:Ca,icon:(0,er.jsx)(sJ,{className:"text-red-400 w-8 h-8"})}),(0,er.jsx)(yJ,{title:"Active Employees",value:Ra.active_employees||0,loading:Ca,icon:(0,er.jsx)(om,{className:"text-cyan-500 w-8 h-8"})}),(0,er.jsx)(yJ,{title:"Total Salary",value:Ra.total_salary||0,prefix:"\u20b9",decimals:2,loading:Ca,icon:(0,er.jsx)(lm,{className:"text-gray-600 w-8 h-8"})}),(0,er.jsx)(yJ,{title:"Food Items",value:Ra.food_items_available||0,suffix:" Available",loading:Ca,icon:(0,er.jsx)(H$,{className:"text-yellow-500 w-8 h-8"})}),(0,er.jsx)(yJ,{title:"Inventory Categories",value:Ra.inventory_categories||0,loading:Ca,icon:(0,er.jsx)(iJ,{className:"text-pink-500 w-8 h-8"})}),(0,er.jsx)(yJ,{title:"Inventory Departments",value:Ra.inventory_departments||0,loading:Ca,icon:(0,er.jsx)(oJ,{className:"text-indigo-500 w-8 h-8"})}),(0,er.jsx)(yJ,{title:"Service Revenue",value:Ra.total_service_revenue||0,prefix:"\u20b9",decimals:2,loading:Ca,icon:(0,er.jsx)(em,{className:"text-violet-500 w-8 h-8"})}),(0,er.jsx)(yJ,{title:"Total Purchases",value:Ra.total_purchases||0,prefix:"\u20b9",decimals:2,loading:Ca,icon:(0,er.jsx)(lJ,{className:"text-amber-500 w-8 h-8"})}),(0,er.jsx)(yJ,{title:"Purchase Count",value:Ra.purchase_count||0,loading:Ca,icon:(0,er.jsx)(cJ,{className:"text-orange-500 w-8 h-8"})}),(0,er.jsx)(yJ,{title:"Vendors",value:Ra.vendor_count||0,loading:Ca,icon:(0,er.jsx)(dJ,{className:"text-emerald-500 w-8 h-8"})})]}),Ra.department_kpis&&Object.keys(Ra.department_kpis).length>0&&(0,er.jsxs)("div",{className:"mt-8",children:[(0,er.jsxs)("h3",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2",children:[(0,er.jsx)(oJ,{className:"text-indigo-600 w-6 h-6"}),"Department-wise Financial Overview"]}),(0,er.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Object.entries(Ra.department_kpis).map(e=>{let[t,r]=e;return(0,er.jsxs)(Fh.div,{className:"bg-white rounded-2xl shadow-lg p-6 hover:shadow-xl transition duration-300",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,er.jsxs)("div",{className:"flex items-center justify-between mb-4 pb-3 border-b border-gray-200",children:[(0,er.jsx)("h4",{className:"text-lg font-bold text-gray-800",children:t}),(0,er.jsx)("button",{onClick:()=>(gi(t),void yi(!0)),className:"text-indigo-600 hover:text-indigo-800 p-1 hover:bg-indigo-50 rounded",title:"View History",children:(0,er.jsx)(uJ,{className:"w-5 h-5"})})]}),(0,er.jsxs)("div",{className:"space-y-3",children:[(0,er.jsxs)("div",{className:"flex items-center justify-between",children:[(0,er.jsxs)("span",{className:"text-sm text-gray-600 flex items-center gap-2",children:[(0,er.jsx)(nJ,{className:"text-green-500 w-4 h-4"}),"Assets"]}),(0,er.jsxs)("span",{className:"text-lg font-bold text-green-600",children:["\u20b9",(0,er.jsx)(nW.Ay,{end:r.assets||0,duration:1.5,decimals:2,separator:","})]})]}),(0,er.jsxs)("div",{className:"flex items-center justify-between",children:[(0,er.jsxs)("span",{className:"text-sm text-gray-600 flex items-center gap-2",children:[(0,er.jsx)(hJ,{className:"text-blue-500 w-4 h-4"}),"Income"]}),(0,er.jsxs)("span",{className:"text-lg font-bold text-blue-600",children:["\u20b9",(0,er.jsx)(nW.Ay,{end:r.income||0,duration:1.5,decimals:2,separator:","})]})]}),(0,er.jsxs)("div",{className:"pt-2 border-t border-gray-100",children:[(0,er.jsx)("p",{className:"text-xs font-semibold text-gray-500 mb-2 uppercase",children:"Expenses"}),(0,er.jsxs)("div",{className:"space-y-1 pl-2",children:[(0,er.jsxs)("div",{className:"flex items-center justify-between",children:[(0,er.jsxs)("span",{className:"text-xs text-gray-600 flex items-center gap-1",children:[(0,er.jsx)(mJ,{className:"text-orange-400 w-3 h-3"}),"Regular Expenses"]}),(0,er.jsxs)("span",{className:"text-sm font-semibold text-orange-600",children:["\u20b9",(0,er.jsx)(nW.Ay,{end:r.regular_expenses||0,duration:1.5,decimals:2,separator:","})]})]}),(0,er.jsxs)("div",{className:"flex items-center justify-between",children:[(0,er.jsxs)("span",{className:"text-xs text-gray-600 flex items-center gap-1",children:[(0,er.jsx)(Zh,{className:"text-red-400 w-3 h-3"}),"Inventory Consumed"]}),(0,er.jsxs)("span",{className:"text-sm font-semibold text-red-600",children:["\u20b9",(0,er.jsx)(nW.Ay,{end:r.inventory_consumption||0,duration:1.5,decimals:2,separator:","})]})]}),(0,er.jsxs)("div",{className:"flex items-center justify-between",children:[(0,er.jsxs)("span",{className:"text-xs text-gray-600 flex items-center gap-1",children:[(0,er.jsx)(sJ,{className:"text-purple-400 w-3 h-3"}),"Capital Investment"]}),(0,er.jsxs)("span",{className:"text-sm font-semibold text-purple-600",children:["\u20b9",(0,er.jsx)(nW.Ay,{end:r.capital_investment||0,duration:1.5,decimals:2,separator:","})]})]})]})]}),(0,er.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:(0,er.jsxs)("div",{className:"flex items-center justify-between",children:[(0,er.jsx)("span",{className:"text-sm font-semibold text-gray-700",children:"Net Profit"}),(0,er.jsxs)("span",{className:"text-lg font-bold ".concat(r.income-r.expenses>=0?"text-green-600":"text-red-600"),children:["\u20b9",(0,er.jsx)(nW.Ay,{end:(r.income||0)-(r.expenses||0),duration:1.5,decimals:2,separator:","})]})]})})]})]},t)})}),(0,er.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-8",children:[(0,er.jsx)(vJ,{title:"Assets by Department",icon:(0,er.jsx)(nJ,{className:"text-green-600 w-6 h-6"}),loading:Ca,children:(0,er.jsx)(sp,{width:"100%",height:300,children:(0,er.jsxs)(lU,{data:Object.entries(Ra.department_kpis||{}).map(e=>{let[t,r]=e;return{department:t,assets:r.assets||0}}),children:[(0,er.jsx)(kI,{strokeDasharray:"3 3"}),(0,er.jsx)(BI,{dataKey:"department",angle:-45,textAnchor:"end",height:80}),(0,er.jsx)(YI,{tickFormatter:e=>"\u20b9".concat((e/1e3).toFixed(0),"K")}),(0,er.jsx)(CR,{formatter:e=>"\u20b9".concat(e.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}))}),(0,er.jsx)(sq,{dataKey:"assets",fill:"#10b981",radius:[8,8,0,0]})]})})}),(0,er.jsx)(vJ,{title:"Income vs Expenses by Department",icon:(0,er.jsx)(hJ,{className:"text-blue-600 w-6 h-6"}),loading:Ca,children:(0,er.jsx)(sp,{width:"100%",height:300,children:(0,er.jsxs)(lU,{data:Object.entries(Ra.department_kpis||{}).map(e=>{let[t,r]=e;return{department:t,income:r.income||0,expenses:r.expenses||0}}),children:[(0,er.jsx)(kI,{strokeDasharray:"3 3"}),(0,er.jsx)(BI,{dataKey:"department",angle:-45,textAnchor:"end",height:80}),(0,er.jsx)(YI,{tickFormatter:e=>"\u20b9".concat((e/1e3).toFixed(0),"K")}),(0,er.jsx)(CR,{formatter:e=>"\u20b9".concat(e.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}))}),(0,er.jsx)(iU,{}),(0,er.jsx)(sq,{dataKey:"income",fill:"#3b82f6",radius:[8,8,0,0]}),(0,er.jsx)(sq,{dataKey:"expenses",fill:"#ef4444",radius:[8,8,0,0]})]})})}),(0,er.jsx)(vJ,{title:"Income Distribution",icon:(0,er.jsx)(a$,{className:"text-blue-600 w-6 h-6"}),loading:Ca,children:(0,er.jsx)(sp,{width:"100%",height:300,children:(0,er.jsxs)(aB,{children:[(0,er.jsx)(Uz,{data:Object.entries(Ra.department_kpis||{}).filter(e=>{let[t,r]=e;return(r.income||0)>0}).map(e=>{let[t,r]=e;return{name:t,value:r.income||0}}),cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{name:t,percent:r}=e;return"".concat(t,": ").concat((100*r).toFixed(0),"%")},outerRadius:100,fill:"#8884d8",dataKey:"value",children:Object.entries(Ra.department_kpis||{}).filter(e=>{let[t,r]=e;return(r.income||0)>0}).map((e,t)=>{const r=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899","#06b6d4"];return(0,er.jsx)(kB,{fill:r[t%r.length]},"cell-".concat(t))})}),(0,er.jsx)(CR,{formatter:e=>"\u20b9".concat(e.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}))})]})})}),(0,er.jsx)(vJ,{title:"Net Profit by Department",icon:(0,er.jsx)(nJ,{className:"text-green-600 w-6 h-6"}),loading:Ca,children:(0,er.jsx)(sp,{width:"100%",height:300,children:(0,er.jsxs)(lU,{data:Object.entries(Ra.department_kpis||{}).map(e=>{let[t,r]=e;return{department:t,profit:(r.income||0)-(r.expenses||0)}}),children:[(0,er.jsx)(kI,{strokeDasharray:"3 3"}),(0,er.jsx)(BI,{dataKey:"department",angle:-45,textAnchor:"end",height:80}),(0,er.jsx)(YI,{tickFormatter:e=>"\u20b9".concat((e/1e3).toFixed(0),"K")}),(0,er.jsx)(CR,{formatter:e=>"\u20b9".concat(e.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}))}),(0,er.jsx)(sq,{dataKey:"profit",radius:[8,8,0,0],children:Object.entries(Ra.department_kpis||{}).map((e,t)=>{let[r,n]=e;const a=(n.income||0)-(n.expenses||0);return(0,er.jsx)(kB,{fill:a>=0?"#10b981":"#ef4444"},"cell-".concat(t))})})]})})})]})]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-8",children:[(0,er.jsx)(vJ,{title:"Revenue Breakdown (All Time)",icon:(0,er.jsx)(a$,{className:"text-green-600"}),loading:Ta,className:"lg:col-span-2",children:(0,er.jsx)(sp,{width:"100%",height:300,children:(0,er.jsxs)(aB,{children:[(0,er.jsx)(Uz,{data:Ua.revenue_breakdown,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:100,label:!0,children:Ua.revenue_breakdown.map((e,t)=>(0,er.jsx)(kB,{fill:jJ[t%jJ.length]},"cell-".concat(t)))}),(0,er.jsx)(CR,{formatter:e=>"\u20b9".concat(e.toLocaleString())}),(0,er.jsx)(iU,{})]})})}),(0,er.jsx)(vJ,{title:"Weekly Performance",icon:(0,er.jsx)(nJ,{className:"text-blue-600"}),loading:Ta,className:"lg:col-span-3",children:(0,er.jsx)(sp,{width:"100%",height:300,children:(0,er.jsxs)(lU,{data:Ua.weekly_performance,children:[(0,er.jsx)(kI,{strokeDasharray:"3 3"}),(0,er.jsx)(BI,{dataKey:"day"}),(0,er.jsx)(YI,{yAxisId:"left",orientation:"left",stroke:"#8884d8"}),(0,er.jsx)(YI,{yAxisId:"right",orientation:"right",stroke:"#82ca9d"}),(0,er.jsx)(CR,{}),(0,er.jsx)(iU,{}),(0,er.jsx)(sq,{yAxisId:"left",dataKey:"revenue",fill:"#8884d8",name:"Revenue (\u20b9)"}),(0,er.jsx)(sq,{yAxisId:"right",dataKey:"checkouts",fill:"#82ca9d",name:"Checkouts"})]})})})]}),(0,er.jsxs)("div",{className:"mt-8",children:[(0,er.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:["Detailed Reports for Period: ",(0,er.jsx)("span",{className:"text-indigo-600 capitalize",children:La})]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,er.jsx)(bJ,{title:"Room Bookings",headers:["Guest Name","Check In","Check Out","Status"],data:Ka.roomBookings||[],loading:Wa,hasMore:null!==(m=null===(p=Xa.roomBookings)||void 0===p?void 0:p.hasMore)&&void 0!==m&&m,loadMore:Ai,isSubmitting:Ha}),(0,er.jsx)(bJ,{title:"Package Bookings",headers:["Guest Name","Check In","Check Out","Status"],data:Ka.packageBookings||[],loading:Wa,hasMore:null!==(f=null===(g=Xa.packageBookings)||void 0===g?void 0:g.hasMore)&&void 0!==f&&f,loadMore:Ci,isSubmitting:Ha}),(0,er.jsx)(bJ,{title:"Food Orders",headers:["Room Number","Amount","Status","Created At"],data:Ka.foodOrders||[],loading:Wa,hasMore:null!==(x=null===(y=Xa.foodOrders)||void 0===y?void 0:y.hasMore)&&void 0!==x&&x,loadMore:Ei,isSubmitting:Ha}),(0,er.jsx)(bJ,{title:"Expenses",headers:["Category","Description","Amount","Expense Date"],data:Ka.expenses||[],loading:Wa,hasMore:null!==(v=null===(b=Xa.expenses)||void 0===b?void 0:b.hasMore)&&void 0!==v&&v,loadMore:Ti,isSubmitting:Ha}),(0,er.jsx)(bJ,{title:"Employee Salaries",headers:["Name","Role","Salary","Hire Date"],data:Ka.employees||[],loading:Wa,hasMore:null!==(j=null===(w=Xa.employees)||void 0===w?void 0:w.hasMore)&&void 0!==j&&j,loadMore:Pi,isSubmitting:Ha}),(0,er.jsx)(bJ,{title:"Inventory Items",headers:["Name","Category","Current Stock","Unit Price","Stock Value","Status"],data:Ka.inventory||[],loading:Wa,hasMore:null!==(N=null===(_=Xa.inventory)||void 0===_?void 0:_.hasMore)&&void 0!==N&&N,loadMore:Oi,isSubmitting:Ha})]})]})]}),"accounting"===Sa&&(0,er.jsxs)("div",{className:"space-y-6",children:[(0,er.jsxs)("div",{className:"flex space-x-2 border-b border-gray-200",children:[(0,er.jsxs)("button",{onClick:()=>Ja("chart-of-accounts"),className:"px-4 py-2 font-medium ".concat("chart-of-accounts"===$a?"border-b-2 border-indigo-600 text-indigo-600":"text-gray-600 hover:text-gray-800"),children:[(0,er.jsx)(aJ,{className:"inline mr-2",size:18}),"Chart of Accounts"]}),(0,er.jsxs)("button",{onClick:()=>Ja("journal-entries"),className:"px-4 py-2 font-medium ".concat("journal-entries"===$a?"border-b-2 border-indigo-600 text-indigo-600":"text-gray-600 hover:text-gray-800"),children:[(0,er.jsx)(mJ,{className:"inline mr-2",size:18}),"Journal Entries"]}),(0,er.jsxs)("button",{onClick:()=>Ja("trial-balance"),className:"px-4 py-2 font-medium ".concat("trial-balance"===$a?"border-b-2 border-indigo-600 text-indigo-600":"text-gray-600 hover:text-gray-800"),children:[(0,er.jsx)(pJ,{className:"inline mr-2",size:18}),"Trial Balance"]}),(0,er.jsxs)("button",{onClick:()=>Ja("auto-report"),className:"px-4 py-2 font-medium ".concat("auto-report"===$a?"border-b-2 border-indigo-600 text-indigo-600":"text-gray-600 hover:text-gray-800"),children:[(0,er.jsx)(nJ,{className:"inline mr-2",size:18}),"Automatic Reports"]}),(0,er.jsxs)("button",{onClick:()=>Ja("comprehensive-report"),className:"px-4 py-2 font-medium ".concat("comprehensive-report"===$a?"border-b-2 border-indigo-600 text-indigo-600":"text-gray-600 hover:text-gray-800"),children:[(0,er.jsx)(mJ,{className:"inline mr-2",size:18}),"Comprehensive Report"]}),(0,er.jsxs)("button",{onClick:()=>Ja("gst-reports"),className:"px-4 py-2 font-medium ".concat("gst-reports"===$a?"border-b-2 border-indigo-600 text-indigo-600":"text-gray-600 hover:text-gray-800"),children:[(0,er.jsx)(pJ,{className:"inline mr-2",size:18}),"GST Reports"]})]}),"chart-of-accounts"===$a&&(0,er.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,er.jsxs)("div",{className:"lg:col-span-1 bg-white rounded-lg shadow p-6",children:[(0,er.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,er.jsx)("h2",{className:"text-xl font-bold",children:"Account Groups"}),(0,er.jsxs)("button",{onClick:()=>{ds(null),bi({name:"",account_type:"Revenue",description:""}),is(!0)},className:"px-3 py-1 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:[(0,er.jsx)(r$,{size:16,className:"inline mr-1"}),"Add Group"]})]}),(0,er.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:Za.map(e=>(0,er.jsx)("div",{onClick:()=>as(e),className:"p-3 rounded cursor-pointer ".concat((null===ns||void 0===ns?void 0:ns.id)===e.id?"bg-indigo-100 border-2 border-indigo-600":"bg-gray-50 hover:bg-gray-100"),children:(0,er.jsxs)("div",{className:"flex items-center justify-between",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"font-semibold",children:e.name}),(0,er.jsx)("p",{className:"text-sm text-gray-600",children:e.account_type})]}),(0,er.jsxs)("div",{className:"flex space-x-2",children:[(0,er.jsx)("button",{onClick:t=>{t.stopPropagation(),ds(e),bi({name:e.name,account_type:e.account_type,description:e.description||""}),is(!0)},className:"text-blue-600 hover:text-blue-800",children:(0,er.jsx)(Xq,{size:16})}),(0,er.jsx)("button",{onClick:t=>{t.stopPropagation(),(async e=>{if(confirm("Are you sure you want to delete this account group?"))try{await Ia.delete("/accounts/groups/".concat(e)),Mi()}catch(Oa){alert("Failed to delete account group")}})(e.id)},className:"text-red-600 hover:text-red-800",children:(0,er.jsx)(Qq,{size:16})})]})]})},e.id))})]}),(0,er.jsxs)("div",{className:"lg:col-span-2 bg-white rounded-lg shadow p-6",children:[(0,er.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,er.jsxs)("h2",{className:"text-xl font-bold",children:["Account Ledgers",ns&&" - ".concat(ns.name)]}),(0,er.jsxs)("button",{onClick:()=>{hs(null),wi(Be(Be({},ji),{},{group_id:(null===ns||void 0===ns?void 0:ns.id)||""})),ls(!0)},className:"px-3 py-1 bg-indigo-600 text-white rounded hover:bg-indigo-700",disabled:!ns,children:[(0,er.jsx)(r$,{size:16,className:"inline mr-1"}),"Add Ledger"]})]}),(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full",children:[(0,er.jsx)("thead",{className:"bg-gray-100",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"px-4 py-2 text-left",children:"Name"}),(0,er.jsx)("th",{className:"px-4 py-2 text-left",children:"Code"}),(0,er.jsx)("th",{className:"px-4 py-2 text-left",children:"Module"}),(0,er.jsx)("th",{className:"px-4 py-2 text-left",children:"Opening Balance"}),(0,er.jsx)("th",{className:"px-4 py-2 text-left",children:"Current Balance"}),(0,er.jsx)("th",{className:"px-4 py-2 text-left",children:"Actions"})]})}),(0,er.jsx)("tbody",{children:zi.map(e=>{var t;return(0,er.jsxs)("tr",{className:"border-b",children:[(0,er.jsx)("td",{className:"px-4 py-2",children:e.name}),(0,er.jsx)("td",{className:"px-4 py-2",children:e.code||"-"}),(0,er.jsx)("td",{className:"px-4 py-2",children:e.module||"-"}),(0,er.jsxs)("td",{className:"px-4 py-2",children:["\u20b9",(null===(t=e.opening_balance)||void 0===t?void 0:t.toFixed(2))||"0.00"]}),(0,er.jsx)("td",{className:"px-4 py-2 font-semibold",children:(0,er.jsxs)("span",{className:e.current_balance>=0?"text-green-600":"text-red-600",children:["\u20b9",Math.abs(e.current_balance||0).toFixed(2),e.current_balance<0&&" (Cr)"]})}),(0,er.jsx)("td",{className:"px-4 py-2",children:(0,er.jsxs)("div",{className:"flex space-x-2",children:[(0,er.jsx)("button",{onClick:()=>{var t;hs(e),wi({name:e.name,code:e.code||"",group_id:e.group_id.toString(),module:e.module||"",description:e.description||"",opening_balance:e.opening_balance||0,balance_type:e.balance_type,tax_type:e.tax_type||"",tax_rate:(null===(t=e.tax_rate)||void 0===t?void 0:t.toString())||"",bank_name:e.bank_name||"",account_number:e.account_number||"",ifsc_code:e.ifsc_code||"",branch_name:e.branch_name||""}),ls(!0)},className:"text-blue-600 hover:text-blue-800",children:(0,er.jsx)(Xq,{size:16})}),(0,er.jsx)("button",{onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this account ledger?"))try{await Ia.delete("/accounts/ledgers/".concat(e)),Ri()}catch(Oa){alert("Failed to delete account ledger")}})(e.id),className:"text-red-600 hover:text-red-800",children:(0,er.jsx)(Qq,{size:16})})]})})]},e.id)})})]})})]})]}),"journal-entries"===$a&&(0,er.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,er.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,er.jsx)("h2",{className:"text-xl font-bold",children:"Journal Entries"}),(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,er.jsx)("button",{onClick:async()=>{if(window.confirm("Fix missing journal entries for all recent checkouts (last 7 days)?"))try{const e=await Ia.post("/accounts/fix-missing-journal-entries?days=7");alert("\u2705 ".concat(e.data.message,"\nFixed: ").concat(e.data.fixed,", Failed: ").concat(e.data.failed)),e.data.fixed>0&&Fi()}catch(Oa){var e,t;alert("Failed to fix journal entries: "+((null===(e=Oa.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||Oa.message))}},className:"px-4 py-2 bg-yellow-600 text-white rounded hover:bg-yellow-700",title:"Fix missing journal entries for checkouts",children:"\ud83d\udd27 Fix Missing Entries"}),(0,er.jsx)("button",{onClick:()=>{const e=[["Date","JE No.","Description","Ref","Debit (\u20b9)","Credit (\u20b9)"].join(","),...ms.flatMap(e=>{var t;const r=[],n=y$(e.entry_date),a=e.reference_type&&e.reference_id?"".concat(e.reference_type.toUpperCase(),"-").concat(e.reference_id):"",s=[n,e.entry_number,e.description,a,"",""].join(",");return r.push(s),null===(t=e.lines)||void 0===t||t.forEach(e=>{var t,a;const s=e.debit_ledger_id?"\u20b9".concat(e.amount.toFixed(2)):"",i=e.credit_ledger_id?"\u20b9".concat(e.amount.toFixed(2)):"",o=(null===(t=e.debit_ledger)||void 0===t?void 0:t.name)||(null===(a=e.credit_ledger)||void 0===a?void 0:a.name)||"",l=e.debit_ledger_id?"Dr.":"Cr.";r.push([n,"","".concat(l," ").concat(o),"",s,i].join(","))}),r})].join("\n"),t=new Blob([e],{type:"text/csv"}),r=window.URL.createObjectURL(t),n=document.createElement("a");n.href=r,n.download="journal-entries-".concat(b$(),".csv"),n.click()},className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Export to Sheets"}),(0,er.jsxs)("button",{onClick:()=>gs(!0),className:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:[(0,er.jsx)(r$,{size:18,className:"inline mr-2"}),"New Entry"]})]})]}),Ca?(0,er.jsx)("div",{className:"text-center py-8",children:"Loading..."}):(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full border-collapse",children:[(0,er.jsx)("thead",{className:"bg-gray-100",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"px-4 py-2 text-left w-12"}),(0,er.jsx)("th",{className:"px-4 py-2 text-left",children:"Date"}),(0,er.jsx)("th",{className:"px-4 py-2 text-left",children:"JE No."}),(0,er.jsx)("th",{className:"px-4 py-2 text-left",children:"Description"}),(0,er.jsx)("th",{className:"px-4 py-2 text-left",children:"Ref"}),(0,er.jsx)("th",{className:"px-4 py-2 text-right",children:"Debit (\u20b9)"}),(0,er.jsx)("th",{className:"px-4 py-2 text-right",children:"Credit (\u20b9)"})]})}),(0,er.jsx)("tbody",{children:0===ms.length?(0,er.jsx)("tr",{children:(0,er.jsx)("td",{colSpan:"7",className:"text-center py-8 text-gray-500",children:"No journal entries found"})}):ms.map(e=>{var t,r;const n=xs.has(e.id),s=(null===(t=e.lines)||void 0===t?void 0:t.filter(e=>e.debit_ledger_id).reduce((e,t)=>e+t.amount,0))||0,i=(null===(r=e.lines)||void 0===r?void 0:r.filter(e=>e.credit_ledger_id).reduce((e,t)=>e+t.amount,0))||0;return(0,er.jsxs)(a.Fragment,{children:[(0,er.jsxs)("tr",{className:"border-b hover:bg-gray-50 cursor-pointer",onClick:()=>{const t=new Set(xs);n?t.delete(e.id):t.add(e.id),ys(t)},children:[(0,er.jsx)("td",{className:"px-4 py-2",children:e.lines&&e.lines.length>0&&(0,er.jsx)("span",{className:"text-gray-400",children:n?"\u25bc":"\u25b6"})}),(0,er.jsx)("td",{className:"px-4 py-2",children:new Date(e.entry_date).toLocaleDateString("en-GB")}),(0,er.jsx)("td",{className:"px-4 py-2 font-semibold",children:e.entry_number}),(0,er.jsx)("td",{className:"px-4 py-2",children:e.description}),(0,er.jsx)("td",{className:"px-4 py-2",children:e.reference_type&&e.reference_id?"".concat(e.reference_type.toUpperCase(),"-").concat(e.reference_id):"-"}),(0,er.jsx)("td",{className:"px-4 py-2 text-right font-semibold",children:s>0?"\u20b9".concat(s.toFixed(2)):""}),(0,er.jsx)("td",{className:"px-4 py-2 text-right font-semibold",children:i>0?"\u20b9".concat(i.toFixed(2)):""})]}),n&&e.lines&&e.lines.map((t,r)=>{var n,a;return(0,er.jsxs)("tr",{className:"border-b bg-gray-50",children:[(0,er.jsx)("td",{className:"px-4 py-2"}),(0,er.jsx)("td",{className:"px-4 py-2"}),(0,er.jsx)("td",{className:"px-4 py-2"}),(0,er.jsxs)("td",{className:"px-4 py-2 pl-8 text-gray-600",children:[t.debit_ledger_id?"Dr.":"Cr."," ",(null===(n=t.debit_ledger)||void 0===n?void 0:n.name)||(null===(a=t.credit_ledger)||void 0===a?void 0:a.name)||"Unknown"]}),(0,er.jsx)("td",{className:"px-4 py-2"}),(0,er.jsx)("td",{className:"px-4 py-2 text-right",children:t.debit_ledger_id?"\u20b9".concat(t.amount.toFixed(2)):""}),(0,er.jsx)("td",{className:"px-4 py-2 text-right",children:t.credit_ledger_id?"\u20b9".concat(t.amount.toFixed(2)):""})]},"".concat(e.id,"-line-").concat(r))})]},e.id)})})]})})]}),"trial-balance"===$a&&(0,er.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,er.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,er.jsx)("h2",{className:"text-xl font-bold",children:"Trial Balance"}),(0,er.jsx)("button",{onClick:Bi,className:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"Refresh"})]}),Ca?(0,er.jsx)("div",{className:"text-center py-8",children:"Loading..."}):vs?(0,er.jsxs)("div",{children:[(0,er.jsxs)("div",{className:"mb-4 flex items-center space-x-4",children:[(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[vs.is_balanced?(0,er.jsx)(Hq,{className:"text-green-600",size:20}):(0,er.jsx)(Gq,{className:"text-red-600",size:20}),(0,er.jsx)("span",{className:"font-semibold ".concat(vs.is_balanced?"text-green-600":"text-red-600"),children:vs.is_balanced?"Balanced":"Not Balanced"})]}),(0,er.jsxs)("div",{className:"text-gray-600",children:["Total Debits: \u20b9",vs.total_debits.toFixed(2)," | Total Credits: \u20b9",vs.total_credits.toFixed(2)]})]}),(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full",children:[(0,er.jsx)("thead",{className:"bg-gray-100",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"px-4 py-2 text-left",children:"Ledger Name"}),(0,er.jsx)("th",{className:"px-4 py-2 text-right",children:"Debit Total"}),(0,er.jsx)("th",{className:"px-4 py-2 text-right",children:"Credit Total"}),(0,er.jsx)("th",{className:"px-4 py-2 text-right",children:"Balance"}),(0,er.jsx)("th",{className:"px-4 py-2 text-left",children:"Type"})]})}),(0,er.jsx)("tbody",{children:vs.ledgers.map(e=>(0,er.jsxs)("tr",{className:"border-b",children:[(0,er.jsx)("td",{className:"px-4 py-2",children:e.ledger_name}),(0,er.jsxs)("td",{className:"px-4 py-2 text-right",children:["\u20b9",e.debit_total.toFixed(2)]}),(0,er.jsxs)("td",{className:"px-4 py-2 text-right",children:["\u20b9",e.credit_total.toFixed(2)]}),(0,er.jsxs)("td",{className:"px-4 py-2 text-right",children:["\u20b9",Math.abs(e.balance).toFixed(2),e.balance<0&&" (Cr)"]}),(0,er.jsx)("td",{className:"px-4 py-2",children:e.balance_type})]},e.ledger_id))})]})})]}):(0,er.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No data available"})]}),"auto-report"===$a&&(0,er.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,er.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,er.jsx)("h2",{className:"text-xl font-bold",children:"Automatic Accounting Report"}),(0,er.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,er.jsx)("label",{className:"text-sm font-medium",children:"Start Date:"}),(0,er.jsx)("input",{type:"date",value:As,onChange:e=>Cs(e.target.value),className:"border rounded px-3 py-1"})]}),(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,er.jsx)("label",{className:"text-sm font-medium",children:"End Date:"}),(0,er.jsx)("input",{type:"date",value:Es,onChange:e=>Ts(e.target.value),className:"border rounded px-3 py-1"})]}),(0,er.jsx)("button",{onClick:Di,className:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"Calculate Report"})]})]}),ks?(0,er.jsx)("div",{className:"text-center py-8",children:"Calculating report..."}):Ns?(0,er.jsxs)("div",{className:"space-y-6",children:[(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,er.jsxs)("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[(0,er.jsx)("h3",{className:"text-sm font-medium text-green-800 mb-1",children:"Total Revenue"}),(0,er.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:["\u20b9",(null===(k=Ns.summary)||void 0===k||null===(S=k.total_revenue)||void 0===S?void 0:S.toFixed(2))||"0.00"]})]}),(0,er.jsxs)("div",{className:"bg-red-50 rounded-lg p-4 border border-red-200",children:[(0,er.jsx)("h3",{className:"text-sm font-medium text-red-800 mb-1",children:"Total Expenses"}),(0,er.jsxs)("p",{className:"text-2xl font-bold text-red-600",children:["\u20b9",(null===(A=Ns.summary)||void 0===A||null===(C=A.total_expenses)||void 0===C?void 0:C.toFixed(2))||"0.00"]})]}),(0,er.jsxs)("div",{className:"rounded-lg p-4 border ".concat(((null===(E=Ns.summary)||void 0===E?void 0:E.net_profit)||0)>=0?"bg-blue-50 border-blue-200":"bg-orange-50 border-orange-200"),children:[(0,er.jsx)("h3",{className:"text-sm font-medium mb-1 ".concat(((null===(T=Ns.summary)||void 0===T?void 0:T.net_profit)||0)>=0?"text-blue-800":"text-orange-800"),children:"Net Profit"}),(0,er.jsxs)("p",{className:"text-2xl font-bold ".concat(((null===(P=Ns.summary)||void 0===P?void 0:P.net_profit)||0)>=0?"text-blue-600":"text-orange-600"),children:["\u20b9",(null===(O=Ns.summary)||void 0===O||null===(D=O.net_profit)||void 0===D?void 0:D.toFixed(2))||"0.00"]}),(0,er.jsxs)("p",{className:"text-xs text-gray-600 mt-1",children:["Margin: ",(null===(I=Ns.summary)||void 0===I||null===(L=I.profit_margin)||void 0===L?void 0:L.toFixed(2))||"0.00","%"]})]})]}),(0,er.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,er.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Revenue Breakdown"}),(0,er.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm text-gray-600",children:"Checkouts"}),(0,er.jsxs)("p",{className:"text-lg font-semibold",children:["\u20b9",(null===(M=Ns.revenue)||void 0===M||null===(R=M.checkouts)||void 0===R||null===(F=R.grand_total)||void 0===F?void 0:F.toFixed(2))||"0.00"]}),(0,er.jsxs)("p",{className:"text-xs text-gray-500",children:[(null===(B=Ns.revenue)||void 0===B||null===(z=B.checkouts)||void 0===z?void 0:z.total_checkouts)||0," checkouts"]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm text-gray-600",children:"Room Revenue"}),(0,er.jsxs)("p",{className:"text-lg font-semibold",children:["\u20b9",(null===(U=Ns.revenue)||void 0===U||null===(q=U.checkouts)||void 0===q||null===(W=q.room_revenue)||void 0===W?void 0:W.toFixed(2))||"0.00"]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm text-gray-600",children:"Food Revenue"}),(0,er.jsxs)("p",{className:"text-lg font-semibold",children:["\u20b9",(null===(V=Ns.revenue)||void 0===V||null===(H=V.checkouts)||void 0===H||null===(G=H.food_revenue)||void 0===G?void 0:G.toFixed(2))||"0.00"]}),(0,er.jsxs)("p",{className:"text-xs text-gray-500",children:["+ \u20b9",(null===(K=Ns.revenue)||void 0===K||null===(Y=K.food_orders)||void 0===Y||null===(X=Y.billed_revenue)||void 0===X?void 0:X.toFixed(2))||"0.00"," (orders)"]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm text-gray-600",children:"Service Revenue"}),(0,er.jsxs)("p",{className:"text-lg font-semibold",children:["\u20b9",(null===(Q=Ns.revenue)||void 0===Q||null===($=Q.checkouts)||void 0===$||null===(J=$.service_revenue)||void 0===J?void 0:J.toFixed(2))||"0.00"]}),(0,er.jsxs)("p",{className:"text-xs text-gray-500",children:["+ \u20b9",(null===(Z=Ns.revenue)||void 0===Z||null===(ee=Z.services)||void 0===ee||null===(te=ee.billed_revenue)||void 0===te?void 0:te.toFixed(2))||"0.00"," (services)"]})]})]})]}),(0,er.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,er.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Expenses Breakdown"}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm text-gray-600",children:"Operating Expenses"}),(0,er.jsxs)("p",{className:"text-lg font-semibold",children:["\u20b9",(null===(re=Ns.expenses)||void 0===re||null===(ne=re.operating_expenses)||void 0===ne||null===(ae=ne.total_amount)||void 0===ae?void 0:ae.toFixed(2))||"0.00"]}),(0,er.jsxs)("p",{className:"text-xs text-gray-500",children:[(null===(se=Ns.expenses)||void 0===se||null===(ie=se.operating_expenses)||void 0===ie?void 0:ie.total_expenses)||0," expenses"]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm text-gray-600",children:"Inventory Purchases"}),(0,er.jsxs)("p",{className:"text-lg font-semibold",children:["\u20b9",(null===(oe=Ns.expenses)||void 0===oe||null===(le=oe.inventory_purchases)||void 0===le||null===(ce=le.total_amount)||void 0===ce?void 0:ce.toFixed(2))||"0.00"]}),(0,er.jsxs)("p",{className:"text-xs text-gray-500",children:[(null===(de=Ns.expenses)||void 0===de||null===(ue=de.inventory_purchases)||void 0===ue?void 0:ue.total_purchases)||0," purchases"]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm text-gray-600",children:"Inventory Consumption (COGS)"}),(0,er.jsxs)("p",{className:"text-lg font-semibold",children:["\u20b9",(null===(he=Ns.expenses)||void 0===he||null===(me=he.inventory_consumption)||void 0===me||null===(pe=me.total_cogs)||void 0===pe?void 0:pe.toFixed(2))||"0.00"]}),(0,er.jsxs)("p",{className:"text-xs text-gray-500",children:[(null===(fe=Ns.expenses)||void 0===fe||null===(ge=fe.inventory_consumption)||void 0===ge?void 0:ge.total_transactions)||0," transactions"]})]})]})]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{className:"bg-white border rounded-lg p-4",children:[(0,er.jsx)("h4",{className:"font-semibold mb-2",children:"Checkout Details"}),(0,er.jsxs)("ul",{className:"text-sm space-y-1",children:[(0,er.jsxs)("li",{children:["Tax Collected: \u20b9",(null===(xe=Ns.revenue)||void 0===xe||null===(ye=xe.checkouts)||void 0===ye||null===(ve=ye.tax_collected)||void 0===ve?void 0:ve.toFixed(2))||"0.00"]}),(0,er.jsxs)("li",{children:["Discount Given: \u20b9",(null===(be=Ns.revenue)||void 0===be||null===(je=be.checkouts)||void 0===je||null===(we=je.discount_given)||void 0===we?void 0:we.toFixed(2))||"0.00"]}),(0,er.jsxs)("li",{children:["Consumables: \u20b9",(null===(Ne=Ns.revenue)||void 0===Ne||null===(_e=Ne.checkouts)||void 0===_e||null===(ke=_e.consumables_charges)||void 0===ke?void 0:ke.toFixed(2))||"0.00"]}),(0,er.jsxs)("li",{children:["Asset Damage: \u20b9",(null===(Se=Ns.revenue)||void 0===Se||null===(Ae=Se.checkouts)||void 0===Ae||null===(Ce=Ae.asset_damage_charges)||void 0===Ce?void 0:Ce.toFixed(2))||"0.00"]}),(0,er.jsxs)("li",{children:["Tips/Gratuity: \u20b9",(null===(Ee=Ns.revenue)||void 0===Ee||null===(Te=Ee.checkouts)||void 0===Te||null===(Pe=Te.tips_gratuity)||void 0===Pe?void 0:Pe.toFixed(2))||"0.00"]})]})]}),(0,er.jsxs)("div",{className:"bg-white border rounded-lg p-4",children:[(0,er.jsx)("h4",{className:"font-semibold mb-2",children:"Food Orders"}),(0,er.jsxs)("ul",{className:"text-sm space-y-1",children:[(0,er.jsxs)("li",{children:["Total Orders: ",(null===(Oe=Ns.revenue)||void 0===Oe||null===(De=Oe.food_orders)||void 0===De?void 0:De.total_orders)||0]}),(0,er.jsxs)("li",{children:["Billed: ",(null===(Ie=Ns.revenue)||void 0===Ie||null===(Le=Ie.food_orders)||void 0===Le?void 0:Le.billed_orders)||0]}),(0,er.jsxs)("li",{children:["Unbilled: ",(null===(Me=Ns.revenue)||void 0===Me||null===(Re=Me.food_orders)||void 0===Re?void 0:Re.unbilled_orders)||0]}),(0,er.jsxs)("li",{children:["Billed Revenue: \u20b9",(null===(Fe=Ns.revenue)||void 0===Fe||null===(ze=Fe.food_orders)||void 0===ze||null===(Ue=ze.billed_revenue)||void 0===Ue?void 0:Ue.toFixed(2))||"0.00"]}),(0,er.jsxs)("li",{children:["Unbilled Revenue: \u20b9",(null===(qe=Ns.revenue)||void 0===qe||null===(We=qe.food_orders)||void 0===We||null===(Ve=We.unbilled_revenue)||void 0===Ve?void 0:Ve.toFixed(2))||"0.00"]})]})]})]}),(null===(He=Ns.expenses)||void 0===He||null===(Ge=He.operating_expenses)||void 0===Ge?void 0:Ge.by_category)&&Object.keys(Ns.expenses.operating_expenses.by_category).length>0&&(0,er.jsxs)("div",{className:"bg-white border rounded-lg p-4",children:[(0,er.jsx)("h4",{className:"font-semibold mb-2",children:"Expenses by Category"}),(0,er.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:Object.entries(Ns.expenses.operating_expenses.by_category).map(e=>{var t;let[r,n]=e;return(0,er.jsxs)("div",{className:"text-sm",children:[(0,er.jsx)("p",{className:"font-medium",children:r}),(0,er.jsxs)("p",{className:"text-gray-600",children:["\u20b9",(null===(t=n.amount)||void 0===t?void 0:t.toFixed(2))||"0.00"]}),(0,er.jsxs)("p",{className:"text-xs text-gray-500",children:[n.count||0," items"]})]},r)})})]})]}):(0,er.jsx)("div",{className:"text-center py-8 text-gray-500",children:'Click "Calculate Report" to generate automatic accounting report'})]}),"comprehensive-report"===$a&&(0,er.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,er.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,er.jsx)("h2",{className:"text-xl font-bold",children:"Comprehensive Report - All Data"}),(0,er.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,er.jsx)("label",{className:"text-sm font-medium",children:"Start Date:"}),(0,er.jsx)("input",{type:"date",value:Ls,onChange:e=>Ms(e.target.value),className:"border rounded px-3 py-1"})]}),(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,er.jsx)("label",{className:"text-sm font-medium",children:"End Date:"}),(0,er.jsx)("input",{type:"date",value:Rs,onChange:e=>Fs(e.target.value),className:"border rounded px-3 py-1"})]}),(0,er.jsx)("button",{onClick:Ii,className:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"Generate Report"})]})]}),Ds?(0,er.jsx)("div",{className:"text-center py-8",children:"Loading comprehensive report..."}):Ps?(0,er.jsxs)("div",{className:"space-y-6",children:[(0,er.jsxs)("div",{className:"bg-indigo-50 rounded-lg p-4 border border-indigo-200",children:[(0,er.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Report Summary"}),(0,er.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 text-sm",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-gray-600",children:"Checkouts"}),(0,er.jsx)("p",{className:"text-xl font-bold",children:(null===(Ke=Ps.summary)||void 0===Ke?void 0:Ke.total_checkouts)||0})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-gray-600",children:"Bookings"}),(0,er.jsx)("p",{className:"text-xl font-bold",children:(null===(Ye=Ps.summary)||void 0===Ye?void 0:Ye.total_bookings)||0})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-gray-600",children:"Food Orders"}),(0,er.jsx)("p",{className:"text-xl font-bold",children:(null===(Xe=Ps.summary)||void 0===Xe?void 0:Xe.total_food_orders)||0})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-gray-600",children:"Services"}),(0,er.jsx)("p",{className:"text-xl font-bold",children:(null===(Qe=Ps.summary)||void 0===Qe?void 0:Qe.total_services)||0})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-gray-600",children:"Expenses"}),(0,er.jsx)("p",{className:"text-xl font-bold",children:(null===($e=Ps.summary)||void 0===$e?void 0:$e.total_expenses)||0})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-gray-600",children:"Purchases"}),(0,er.jsx)("p",{className:"text-xl font-bold",children:(null===(Je=Ps.summary)||void 0===Je?void 0:Je.total_purchases)||0})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-gray-600",children:"Transactions"}),(0,er.jsx)("p",{className:"text-xl font-bold",children:(null===(Ze=Ps.summary)||void 0===Ze?void 0:Ze.total_inventory_transactions)||0})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-gray-600",children:"Journal Entries"}),(0,er.jsx)("p",{className:"text-xl font-bold",children:(null===(et=Ps.summary)||void 0===et?void 0:et.total_journal_entries)||0})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-gray-600",children:"Employees"}),(0,er.jsx)("p",{className:"text-xl font-bold",children:(null===(tt=Ps.summary)||void 0===tt?void 0:tt.total_employees)||0})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-gray-600",children:"Total Salary Cost"}),(0,er.jsxs)("p",{className:"text-xl font-bold text-red-600",children:["\u20b9",(null===(rt=Ps.summary)||void 0===rt||null===(nt=rt.total_salary_cost)||void 0===nt?void 0:nt.toFixed(2))||"0.00"]})]})]})]}),(0,er.jsxs)("div",{className:"bg-white border rounded-lg p-4",children:[(0,er.jsxs)("h3",{className:"text-lg font-bold mb-4",children:["Checkouts (",(null===(at=Ps.data)||void 0===at||null===(st=at.checkouts)||void 0===st?void 0:st.length)||0,")"]}),(0,er.jsxs)("div",{className:"overflow-x-auto",children:[(0,er.jsxs)("table",{className:"min-w-full text-sm",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"border-b",children:[(0,er.jsx)("th",{className:"text-left p-2",children:"ID"}),(0,er.jsx)("th",{className:"text-left p-2",children:"Guest"}),(0,er.jsx)("th",{className:"text-left p-2",children:"Room"}),(0,er.jsx)("th",{className:"text-left p-2",children:"Date"}),(0,er.jsx)("th",{className:"text-right p-2",children:"Total"})]})}),(0,er.jsx)("tbody",{children:null===(it=Ps.data)||void 0===it||null===(ot=it.checkouts)||void 0===ot?void 0:ot.slice(0,50).map(e=>{var t,r;return(0,er.jsxs)("tr",{className:"border-b",children:[(0,er.jsx)("td",{className:"p-2",children:e.id}),(0,er.jsx)("td",{className:"p-2",children:e.guest_name}),(0,er.jsx)("td",{className:"p-2",children:e.room_number}),(0,er.jsx)("td",{className:"p-2",children:null===(t=e.checkout_date)||void 0===t?void 0:t.split("T")[0]}),(0,er.jsxs)("td",{className:"p-2 text-right",children:["\u20b9",null===(r=e.grand_total)||void 0===r?void 0:r.toFixed(2)]})]},e.id)})})]}),(null===(lt=Ps.data)||void 0===lt||null===(ct=lt.checkouts)||void 0===ct?void 0:ct.length)>50&&(0,er.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Showing first 50 of ",Ps.data.checkouts.length," records"]})]})]}),(0,er.jsxs)("div",{className:"bg-white border rounded-lg p-4",children:[(0,er.jsxs)("h3",{className:"text-lg font-bold mb-4",children:["Bookings (",(null===(dt=Ps.data)||void 0===dt||null===(ut=dt.bookings)||void 0===ut?void 0:ut.length)||0,")"]}),(0,er.jsxs)("div",{className:"overflow-x-auto",children:[(0,er.jsxs)("table",{className:"min-w-full text-sm",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"border-b",children:[(0,er.jsx)("th",{className:"text-left p-2",children:"ID"}),(0,er.jsx)("th",{className:"text-left p-2",children:"Guest"}),(0,er.jsx)("th",{className:"text-left p-2",children:"Check-in"}),(0,er.jsx)("th",{className:"text-left p-2",children:"Check-out"}),(0,er.jsx)("th",{className:"text-left p-2",children:"Status"}),(0,er.jsx)("th",{className:"text-right p-2",children:"Amount"})]})}),(0,er.jsx)("tbody",{children:null===(ht=Ps.data)||void 0===ht||null===(mt=ht.bookings)||void 0===mt?void 0:mt.slice(0,50).map(e=>{var t;return(0,er.jsxs)("tr",{className:"border-b",children:[(0,er.jsx)("td",{className:"p-2",children:e.id}),(0,er.jsx)("td",{className:"p-2",children:e.guest_name}),(0,er.jsx)("td",{className:"p-2",children:e.check_in}),(0,er.jsx)("td",{className:"p-2",children:e.check_out}),(0,er.jsx)("td",{className:"p-2",children:e.status}),(0,er.jsxs)("td",{className:"p-2 text-right",children:["\u20b9",null===(t=e.total_amount)||void 0===t?void 0:t.toFixed(2)]})]},e.id)})})]}),(null===(pt=Ps.data)||void 0===pt||null===(ft=pt.bookings)||void 0===ft?void 0:ft.length)>50&&(0,er.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Showing first 50 of ",Ps.data.bookings.length," records"]})]})]}),(0,er.jsxs)("div",{className:"bg-white border rounded-lg p-4",children:[(0,er.jsxs)("h3",{className:"text-lg font-bold mb-4",children:["Food Orders (",(null===(gt=Ps.data)||void 0===gt||null===(xt=gt.food_orders)||void 0===xt?void 0:xt.length)||0,")"]}),(0,er.jsxs)("div",{className:"overflow-x-auto",children:[(0,er.jsxs)("table",{className:"min-w-full text-sm",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"border-b",children:[(0,er.jsx)("th",{className:"text-left p-2",children:"ID"}),(0,er.jsx)("th",{className:"text-left p-2",children:"Room"}),(0,er.jsx)("th",{className:"text-left p-2",children:"Date"}),(0,er.jsx)("th",{className:"text-left p-2",children:"Status"}),(0,er.jsx)("th",{className:"text-right p-2",children:"Amount"})]})}),(0,er.jsx)("tbody",{children:null===(yt=Ps.data)||void 0===yt||null===(vt=yt.food_orders)||void 0===vt?void 0:vt.slice(0,50).map(e=>{var t,r;return(0,er.jsxs)("tr",{className:"border-b",children:[(0,er.jsx)("td",{className:"p-2",children:e.id}),(0,er.jsx)("td",{className:"p-2",children:e.room_number}),(0,er.jsx)("td",{className:"p-2",children:null===(t=e.created_at)||void 0===t?void 0:t.split("T")[0]}),(0,er.jsx)("td",{className:"p-2",children:e.billing_status}),(0,er.jsxs)("td",{className:"p-2 text-right",children:["\u20b9",null===(r=e.amount)||void 0===r?void 0:r.toFixed(2)]})]},e.id)})})]}),(null===(bt=Ps.data)||void 0===bt||null===(jt=bt.food_orders)||void 0===jt?void 0:jt.length)>50&&(0,er.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Showing first 50 of ",Ps.data.food_orders.length," records"]})]})]}),(0,er.jsxs)("div",{className:"bg-white border rounded-lg p-4",children:[(0,er.jsxs)("h3",{className:"text-lg font-bold mb-4",children:["Services (",(null===(wt=Ps.data)||void 0===wt||null===(Nt=wt.services)||void 0===Nt?void 0:Nt.length)||0,")"]}),(0,er.jsxs)("div",{className:"overflow-x-auto",children:[(0,er.jsxs)("table",{className:"min-w-full text-sm",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"border-b",children:[(0,er.jsx)("th",{className:"text-left p-2",children:"ID"}),(0,er.jsx)("th",{className:"text-left p-2",children:"Service"}),(0,er.jsx)("th",{className:"text-left p-2",children:"Room"}),(0,er.jsx)("th",{className:"text-left p-2",children:"Employee"}),(0,er.jsx)("th",{className:"text-left p-2",children:"Status"})]})}),(0,er.jsx)("tbody",{children:null===(_t=Ps.data)||void 0===_t||null===(kt=_t.services)||void 0===kt?void 0:kt.slice(0,50).map(e=>(0,er.jsxs)("tr",{className:"border-b",children:[(0,er.jsx)("td",{className:"p-2",children:e.id}),(0,er.jsx)("td",{className:"p-2",children:e.service_name}),(0,er.jsx)("td",{className:"p-2",children:e.room_number}),(0,er.jsx)("td",{className:"p-2",children:e.employee_name}),(0,er.jsx)("td",{className:"p-2",children:e.status})]},e.id))})]}),(null===(St=Ps.data)||void 0===St||null===(At=St.services)||void 0===At?void 0:At.length)>50&&(0,er.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Showing first 50 of ",Ps.data.services.length," records"]})]})]}),(0,er.jsxs)("div",{className:"bg-white border rounded-lg p-4",children:[(0,er.jsxs)("h3",{className:"text-lg font-bold mb-4",children:["Expenses (",(null===(Ct=Ps.data)||void 0===Ct||null===(Et=Ct.expenses)||void 0===Et?void 0:Et.length)||0,")"]}),(0,er.jsxs)("div",{className:"overflow-x-auto",children:[(0,er.jsxs)("table",{className:"min-w-full text-sm",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"border-b",children:[(0,er.jsx)("th",{className:"text-left p-2",children:"ID"}),(0,er.jsx)("th",{className:"text-left p-2",children:"Category"}),(0,er.jsx)("th",{className:"text-left p-2",children:"Date"}),(0,er.jsx)("th",{className:"text-left p-2",children:"Description"}),(0,er.jsx)("th",{className:"text-right p-2",children:"Amount"})]})}),(0,er.jsx)("tbody",{children:null===(Tt=Ps.data)||void 0===Tt||null===(Pt=Tt.expenses)||void 0===Pt?void 0:Pt.slice(0,50).map(e=>{var t;return(0,er.jsxs)("tr",{className:"border-b",children:[(0,er.jsx)("td",{className:"p-2",children:e.id}),(0,er.jsx)("td",{className:"p-2",children:e.category}),(0,er.jsx)("td",{className:"p-2",children:e.date}),(0,er.jsx)("td",{className:"p-2",children:e.description}),(0,er.jsxs)("td",{className:"p-2 text-right",children:["\u20b9",null===(t=e.amount)||void 0===t?void 0:t.toFixed(2)]})]},e.id)})})]}),(null===(Ot=Ps.data)||void 0===Ot||null===(Dt=Ot.expenses)||void 0===Dt?void 0:Dt.length)>50&&(0,er.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Showing first 50 of ",Ps.data.expenses.length," records"]})]})]}),(0,er.jsxs)("div",{className:"bg-white border rounded-lg p-4",children:[(0,er.jsxs)("h3",{className:"text-lg font-bold mb-4",children:["Inventory Purchases (",(null===(It=Ps.data)||void 0===It||null===(Lt=It.purchases)||void 0===Lt?void 0:Lt.length)||0,")"]}),(0,er.jsxs)("div",{className:"overflow-x-auto",children:[(0,er.jsxs)("table",{className:"min-w-full text-sm",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"border-b",children:[(0,er.jsx)("th",{className:"text-left p-2",children:"ID"}),(0,er.jsx)("th",{className:"text-left p-2",children:"Purchase #"}),(0,er.jsx)("th",{className:"text-left p-2",children:"Vendor"}),(0,er.jsx)("th",{className:"text-left p-2",children:"Date"}),(0,er.jsx)("th",{className:"text-left p-2",children:"Status"}),(0,er.jsx)("th",{className:"text-right p-2",children:"Amount"})]})}),(0,er.jsx)("tbody",{children:null===(Mt=Ps.data)||void 0===Mt||null===(Rt=Mt.purchases)||void 0===Rt?void 0:Rt.slice(0,50).map(e=>{var t;return(0,er.jsxs)("tr",{className:"border-b",children:[(0,er.jsx)("td",{className:"p-2",children:e.id}),(0,er.jsx)("td",{className:"p-2",children:e.purchase_number}),(0,er.jsx)("td",{className:"p-2",children:e.vendor_name}),(0,er.jsx)("td",{className:"p-2",children:e.purchase_date}),(0,er.jsx)("td",{className:"p-2",children:e.status}),(0,er.jsxs)("td",{className:"p-2 text-right",children:["\u20b9",null===(t=e.total_amount)||void 0===t?void 0:t.toFixed(2)]})]},e.id)})})]}),(null===(Ft=Ps.data)||void 0===Ft||null===(Bt=Ft.purchases)||void 0===Bt?void 0:Bt.length)>50&&(0,er.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Showing first 50 of ",Ps.data.purchases.length," records"]})]})]}),(0,er.jsxs)("div",{className:"bg-white border rounded-lg p-4",children:[(0,er.jsxs)("h3",{className:"text-lg font-bold mb-4",children:["Inventory Transactions (",(null===(zt=Ps.data)||void 0===zt||null===(Ut=zt.inventory_transactions)||void 0===Ut?void 0:Ut.length)||0,")"]}),(0,er.jsxs)("div",{className:"overflow-x-auto",children:[(0,er.jsxs)("table",{className:"min-w-full text-sm",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"border-b",children:[(0,er.jsx)("th",{className:"text-left p-2",children:"ID"}),(0,er.jsx)("th",{className:"text-left p-2",children:"Item"}),(0,er.jsx)("th",{className:"text-left p-2",children:"Type"}),(0,er.jsx)("th",{className:"text-left p-2",children:"Date"}),(0,er.jsx)("th",{className:"text-right p-2",children:"Quantity"}),(0,er.jsx)("th",{className:"text-right p-2",children:"Amount"})]})}),(0,er.jsx)("tbody",{children:null===(qt=Ps.data)||void 0===qt||null===(Wt=qt.inventory_transactions)||void 0===Wt?void 0:Wt.slice(0,50).map(e=>{var t,r;return(0,er.jsxs)("tr",{className:"border-b",children:[(0,er.jsx)("td",{className:"p-2",children:e.id}),(0,er.jsx)("td",{className:"p-2",children:e.item_name}),(0,er.jsx)("td",{className:"p-2",children:e.transaction_type}),(0,er.jsx)("td",{className:"p-2",children:null===(t=e.created_at)||void 0===t?void 0:t.split("T")[0]}),(0,er.jsx)("td",{className:"p-2 text-right",children:e.quantity}),(0,er.jsxs)("td",{className:"p-2 text-right",children:["\u20b9",null===(r=e.total_amount)||void 0===r?void 0:r.toFixed(2)]})]},e.id)})})]}),(null===(Vt=Ps.data)||void 0===Vt||null===(Ht=Vt.inventory_transactions)||void 0===Ht?void 0:Ht.length)>50&&(0,er.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Showing first 50 of ",Ps.data.inventory_transactions.length," records"]})]})]}),(0,er.jsxs)("div",{className:"bg-white border rounded-lg p-4",children:[(0,er.jsxs)("h3",{className:"text-lg font-bold mb-4",children:["Journal Entries (",(null===(Gt=Ps.data)||void 0===Gt||null===(Kt=Gt.journal_entries)||void 0===Kt?void 0:Kt.length)||0,")"]}),(0,er.jsxs)("div",{className:"overflow-x-auto",children:[(0,er.jsxs)("table",{className:"min-w-full text-sm",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"border-b",children:[(0,er.jsx)("th",{className:"text-left p-2",children:"Entry #"}),(0,er.jsx)("th",{className:"text-left p-2",children:"Date"}),(0,er.jsx)("th",{className:"text-left p-2",children:"Description"}),(0,er.jsx)("th",{className:"text-left p-2",children:"Reference"}),(0,er.jsx)("th",{className:"text-right p-2",children:"Lines"})]})}),(0,er.jsx)("tbody",{children:null===(Yt=Ps.data)||void 0===Yt||null===(Xt=Yt.journal_entries)||void 0===Xt?void 0:Xt.slice(0,50).map(e=>{var t,r;return(0,er.jsxs)("tr",{className:"border-b",children:[(0,er.jsx)("td",{className:"p-2",children:e.entry_number}),(0,er.jsx)("td",{className:"p-2",children:null===(t=e.entry_date)||void 0===t?void 0:t.split("T")[0]}),(0,er.jsx)("td",{className:"p-2",children:e.description}),(0,er.jsxs)("td",{className:"p-2",children:[e.reference_type," #",e.reference_id]}),(0,er.jsx)("td",{className:"p-2 text-right",children:(null===(r=e.lines)||void 0===r?void 0:r.length)||0})]},e.id)})})]}),(null===(Qt=Ps.data)||void 0===Qt||null===($t=Qt.journal_entries)||void 0===$t?void 0:$t.length)>50&&(0,er.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Showing first 50 of ",Ps.data.journal_entries.length," records"]})]})]}),(0,er.jsxs)("div",{className:"bg-white border rounded-lg p-4",children:[(0,er.jsxs)("h3",{className:"text-lg font-bold mb-4",children:["Employees & Salary (",(null===(Jt=Ps.data)||void 0===Jt||null===(Zt=Jt.employees)||void 0===Zt?void 0:Zt.length)||0,")"]}),(0,er.jsxs)("div",{className:"overflow-x-auto",children:[(0,er.jsxs)("table",{className:"min-w-full text-sm",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"border-b",children:[(0,er.jsx)("th",{className:"text-left p-2",children:"ID"}),(0,er.jsx)("th",{className:"text-left p-2",children:"Name"}),(0,er.jsx)("th",{className:"text-left p-2",children:"Role"}),(0,er.jsx)("th",{className:"text-left p-2",children:"Join Date"}),(0,er.jsx)("th",{className:"text-right p-2",children:"Monthly Salary"})]})}),(0,er.jsx)("tbody",{children:null===(tr=Ps.data)||void 0===tr||null===(rr=tr.employees)||void 0===rr?void 0:rr.slice(0,50).map(e=>{var t;return(0,er.jsxs)("tr",{className:"border-b",children:[(0,er.jsx)("td",{className:"p-2",children:e.id}),(0,er.jsx)("td",{className:"p-2",children:e.name}),(0,er.jsx)("td",{className:"p-2",children:e.role}),(0,er.jsx)("td",{className:"p-2",children:e.join_date}),(0,er.jsxs)("td",{className:"p-2 text-right font-semibold",children:["\u20b9",null===(t=e.salary)||void 0===t?void 0:t.toFixed(2)]})]},e.id)})})]}),(null===(nr=Ps.data)||void 0===nr||null===(ar=nr.employees)||void 0===ar?void 0:ar.length)>50&&(0,er.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Showing first 50 of ",Ps.data.employees.length," records"]})]})]}),(0,er.jsxs)("div",{className:"bg-white border rounded-lg p-4",children:[(0,er.jsxs)("h3",{className:"text-lg font-bold mb-4",children:["Attendance Records (",(null===(sr=Ps.data)||void 0===sr||null===(ir=sr.attendances)||void 0===ir?void 0:ir.length)||0,")"]}),(0,er.jsxs)("div",{className:"overflow-x-auto",children:[(0,er.jsxs)("table",{className:"min-w-full text-sm",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"border-b",children:[(0,er.jsx)("th",{className:"text-left p-2",children:"ID"}),(0,er.jsx)("th",{className:"text-left p-2",children:"Employee"}),(0,er.jsx)("th",{className:"text-left p-2",children:"Date"}),(0,er.jsx)("th",{className:"text-left p-2",children:"Status"})]})}),(0,er.jsx)("tbody",{children:null===(or=Ps.data)||void 0===or||null===(lr=or.attendances)||void 0===lr?void 0:lr.slice(0,50).map(e=>(0,er.jsxs)("tr",{className:"border-b",children:[(0,er.jsx)("td",{className:"p-2",children:e.id}),(0,er.jsx)("td",{className:"p-2",children:e.employee_name}),(0,er.jsx)("td",{className:"p-2",children:e.date}),(0,er.jsx)("td",{className:"p-2",children:e.status})]},e.id))})]}),(null===(cr=Ps.data)||void 0===cr||null===(dr=cr.attendances)||void 0===dr?void 0:dr.length)>50&&(0,er.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Showing first 50 of ",Ps.data.attendances.length," records"]})]})]}),(0,er.jsxs)("div",{className:"bg-white border rounded-lg p-4",children:[(0,er.jsxs)("h3",{className:"text-lg font-bold mb-4",children:["Leaves (",(null===(ur=Ps.data)||void 0===ur||null===(hr=ur.leaves)||void 0===hr?void 0:hr.length)||0,")"]}),(0,er.jsxs)("div",{className:"overflow-x-auto",children:[(0,er.jsxs)("table",{className:"min-w-full text-sm",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"border-b",children:[(0,er.jsx)("th",{className:"text-left p-2",children:"ID"}),(0,er.jsx)("th",{className:"text-left p-2",children:"Employee"}),(0,er.jsx)("th",{className:"text-left p-2",children:"From Date"}),(0,er.jsx)("th",{className:"text-left p-2",children:"To Date"}),(0,er.jsx)("th",{className:"text-left p-2",children:"Type"}),(0,er.jsx)("th",{className:"text-left p-2",children:"Status"})]})}),(0,er.jsx)("tbody",{children:null===(mr=Ps.data)||void 0===mr||null===(pr=mr.leaves)||void 0===pr?void 0:pr.slice(0,50).map(e=>(0,er.jsxs)("tr",{className:"border-b",children:[(0,er.jsx)("td",{className:"p-2",children:e.id}),(0,er.jsx)("td",{className:"p-2",children:e.employee_name}),(0,er.jsx)("td",{className:"p-2",children:e.from_date}),(0,er.jsx)("td",{className:"p-2",children:e.to_date}),(0,er.jsx)("td",{className:"p-2",children:e.leave_type}),(0,er.jsx)("td",{className:"p-2",children:e.status})]},e.id))})]}),(null===(fr=Ps.data)||void 0===fr||null===(gr=fr.leaves)||void 0===gr?void 0:gr.length)>50&&(0,er.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Showing first 50 of ",Ps.data.leaves.length," records"]})]})]}),(0,er.jsxs)("div",{className:"bg-white border rounded-lg p-4",children:[(0,er.jsxs)("h3",{className:"text-lg font-bold mb-4",children:["Working Logs (",(null===(xr=Ps.data)||void 0===xr||null===(yr=xr.working_logs)||void 0===yr?void 0:yr.length)||0,")"]}),(0,er.jsxs)("div",{className:"overflow-x-auto",children:[(0,er.jsxs)("table",{className:"min-w-full text-sm",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"border-b",children:[(0,er.jsx)("th",{className:"text-left p-2",children:"ID"}),(0,er.jsx)("th",{className:"text-left p-2",children:"Employee"}),(0,er.jsx)("th",{className:"text-left p-2",children:"Date"}),(0,er.jsx)("th",{className:"text-left p-2",children:"Check-in"}),(0,er.jsx)("th",{className:"text-left p-2",children:"Check-out"}),(0,er.jsx)("th",{className:"text-left p-2",children:"Location"})]})}),(0,er.jsx)("tbody",{children:null===(vr=Ps.data)||void 0===vr||null===(br=vr.working_logs)||void 0===br?void 0:br.slice(0,50).map(e=>(0,er.jsxs)("tr",{className:"border-b",children:[(0,er.jsx)("td",{className:"p-2",children:e.id}),(0,er.jsx)("td",{className:"p-2",children:e.employee_name}),(0,er.jsx)("td",{className:"p-2",children:e.date}),(0,er.jsx)("td",{className:"p-2",children:e.check_in_time||"-"}),(0,er.jsx)("td",{className:"p-2",children:e.check_out_time||"-"}),(0,er.jsx)("td",{className:"p-2",children:e.location||"-"})]},e.id))})]}),(null===(jr=Ps.data)||void 0===jr||null===(wr=jr.working_logs)||void 0===wr?void 0:wr.length)>50&&(0,er.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Showing first 50 of ",Ps.data.working_logs.length," records"]})]})]})]}):(0,er.jsx)("div",{className:"text-center py-8 text-gray-500",children:'Click "Generate Report" to load all business data'})]}),"gst-reports"===$a&&(0,er.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,er.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,er.jsx)("h2",{className:"text-xl font-bold",children:"GST Reports (GSTR-1 & GSTR-3B)"}),(0,er.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,er.jsx)("label",{className:"text-sm font-medium",children:"Start Date:"}),(0,er.jsx)("input",{type:"date",value:Hs,onChange:e=>Gs(e.target.value),className:"border rounded px-3 py-1"})]}),(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,er.jsx)("label",{className:"text-sm font-medium",children:"End Date:"}),(0,er.jsx)("input",{type:"date",value:Ks,onChange:e=>Ys(e.target.value),className:"border rounded px-3 py-1"})]}),(0,er.jsx)("button",{onClick:Li,className:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"Generate Report"})]})]}),(0,er.jsxs)("div",{className:"mb-6 flex flex-wrap gap-2 border-b pb-4",children:[(0,er.jsx)("button",{onClick:()=>zs("master-summary"),className:"px-4 py-2 rounded ".concat("master-summary"===Bs?"bg-indigo-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Master Summary"}),(0,er.jsx)("button",{onClick:()=>zs("b2b-sales"),className:"px-4 py-2 rounded ".concat("b2b-sales"===Bs?"bg-indigo-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"B2B Sales"}),(0,er.jsx)("button",{onClick:()=>zs("b2c-sales"),className:"px-4 py-2 rounded ".concat("b2c-sales"===Bs?"bg-indigo-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"B2C Sales"}),(0,er.jsx)("button",{onClick:()=>zs("hsn-sac-summary"),className:"px-4 py-2 rounded ".concat("hsn-sac-summary"===Bs?"bg-indigo-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"HSN/SAC Summary"}),(0,er.jsx)("button",{onClick:()=>zs("itc-register"),className:"px-4 py-2 rounded ".concat("itc-register"===Bs?"bg-indigo-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"ITC Register"}),(0,er.jsx)("button",{onClick:()=>zs("rcm-register"),className:"px-4 py-2 rounded ".concat("rcm-register"===Bs?"bg-indigo-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"RCM Register"}),(0,er.jsx)("button",{onClick:()=>zs("advance-receipt"),className:"px-4 py-2 rounded ".concat("advance-receipt"===Bs?"bg-indigo-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Advance Receipt"}),(0,er.jsx)("button",{onClick:()=>zs("room-tariff-slab"),className:"px-4 py-2 rounded ".concat("room-tariff-slab"===Bs?"bg-indigo-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Room Tariff Slab"})]}),Ws?(0,er.jsx)("div",{className:"text-center py-8",children:"Loading GST report..."}):Us?(0,er.jsxs)("div",{className:"space-y-6",children:["master-summary"===Bs&&(0,er.jsx)("div",{className:"space-y-4",children:(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,er.jsxs)("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[(0,er.jsx)("h3",{className:"text-sm font-medium text-green-800 mb-1",children:"Total Output Tax"}),(0,er.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:["\u20b9",((null!==(Nr=null===(_r=Us.total_output_tax)||void 0===_r?void 0:_r.total)&&void 0!==Nr?Nr:Us.total_output_tax)||0).toFixed(2)]})]}),(0,er.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[(0,er.jsx)("h3",{className:"text-sm font-medium text-blue-800 mb-1",children:"Input Tax Credit"}),(0,er.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:["\u20b9",((null!==(kr=null!==(Sr=null===(Ar=Us.total_input_tax_credit)||void 0===Ar?void 0:Ar.total)&&void 0!==Sr?Sr:Us.input_tax_credit)&&void 0!==kr?kr:Us.total_input_tax_credit)||0).toFixed(2)]})]}),(0,er.jsxs)("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:[(0,er.jsx)("h3",{className:"text-sm font-medium text-orange-800 mb-1",children:"RCM Liability"}),(0,er.jsxs)("p",{className:"text-2xl font-bold text-orange-600",children:["\u20b9",((null!==(Cr=Us.total_rcm_liability)&&void 0!==Cr?Cr:Us.rcm_liability)||0).toFixed(2)]})]}),(0,er.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[(0,er.jsx)("h3",{className:"text-sm font-medium text-purple-800 mb-1",children:"Net Payable"}),(0,er.jsxs)("p",{className:"text-2xl font-bold text-purple-600",children:["\u20b9",((null!==(Er=Us.net_gst_payable)&&void 0!==Er?Er:Us.net_cash_ledger_payable)||0).toFixed(2)]})]})]})}),"b2b-sales"===Bs&&(0,er.jsxs)("div",{children:[(0,er.jsxs)("div",{className:"mb-4 p-4 bg-gray-50 rounded grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm text-gray-600",children:"Total Records"}),(0,er.jsx)("p",{className:"text-lg font-bold",children:Us.total_records||0})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm text-gray-600",children:"Total Invoices"}),(0,er.jsx)("p",{className:"text-lg font-bold",children:Us.total_invoices||0})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm text-gray-600",children:"Total Taxable Value"}),(0,er.jsxs)("p",{className:"text-lg font-bold",children:["\u20b9",(null===(Tr=Us.total_taxable_value)||void 0===Tr?void 0:Tr.toFixed(2))||"0.00"]})]}),Us.invalid_gstin_count>0&&(0,er.jsxs)("div",{className:"bg-red-50 rounded p-2",children:[(0,er.jsx)("p",{className:"text-sm text-red-600",children:"Invalid GSTIN"}),(0,er.jsx)("p",{className:"text-lg font-bold text-red-700",children:Us.invalid_gstin_count})]})]}),(0,er.jsx)("div",{className:"mb-4 p-4 bg-blue-50 rounded border border-blue-200",children:(0,er.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,er.jsx)("strong",{children:"Note:"})," Each invoice may appear multiple times if it contains items with different tax rates (e.g., Room at 12% and Food at 5%)."]})}),(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full text-xs border",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"bg-gray-100",children:[(0,er.jsx)("th",{className:"p-2 border text-left",children:"GSTIN"}),(0,er.jsx)("th",{className:"p-2 border text-left",children:"Receiver Name"}),(0,er.jsx)("th",{className:"p-2 border text-left",children:"Invoice No"}),(0,er.jsx)("th",{className:"p-2 border text-left",children:"Invoice Date"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"Invoice Value"}),(0,er.jsx)("th",{className:"p-2 border text-left",children:"Place of Supply"}),(0,er.jsx)("th",{className:"p-2 border text-left",children:"Reverse Charge"}),(0,er.jsx)("th",{className:"p-2 border text-left",children:"Invoice Type"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"Rate %"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"Taxable Value"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"IGST"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"CGST"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"SGST"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"Cess"}),(0,er.jsx)("th",{className:"p-2 border text-left",children:"Description"})]})}),(0,er.jsx)("tbody",{children:null===(Pr=Us.data)||void 0===Pr?void 0:Pr.map((e,t)=>{var r,n,a,s,i,o;return(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsx)("td",{className:"p-2 border font-mono",children:e.gstin}),(0,er.jsx)("td",{className:"p-2 border",children:e.receiver_name}),(0,er.jsx)("td",{className:"p-2 border font-mono",children:e.invoice_number}),(0,er.jsx)("td",{className:"p-2 border",children:e.invoice_date}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(r=e.invoice_value)||void 0===r?void 0:r.toFixed(2)]}),(0,er.jsx)("td",{className:"p-2 border",children:e.place_of_supply}),(0,er.jsx)("td",{className:"p-2 border",children:e.reverse_charge}),(0,er.jsx)("td",{className:"p-2 border",children:e.invoice_type}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:[e.rate,"%"]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(n=e.taxable_value)||void 0===n?void 0:n.toFixed(2)]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(a=e.igst)||void 0===a?void 0:a.toFixed(2)]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(s=e.cgst)||void 0===s?void 0:s.toFixed(2)]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(i=e.sgst)||void 0===i?void 0:i.toFixed(2)]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(o=e.cess)||void 0===o?void 0:o.toFixed(2)]}),(0,er.jsx)("td",{className:"p-2 border text-xs",children:e.description})]},t)})}),Us.data&&Us.data.length>0&&(0,er.jsx)("tfoot",{className:"bg-gray-100 font-bold",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{colSpan:"9",className:"p-2 border text-right",children:"Totals:"}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(Or=Us.total_taxable_value)||void 0===Or?void 0:Or.toFixed(2)]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(Dr=Us.total_igst)||void 0===Dr?void 0:Dr.toFixed(2)]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(Ir=Us.total_cgst)||void 0===Ir?void 0:Ir.toFixed(2)]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(Lr=Us.total_sgst)||void 0===Lr?void 0:Lr.toFixed(2)]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(Mr=Us.total_cess)||void 0===Mr?void 0:Mr.toFixed(2)]}),(0,er.jsx)("td",{className:"p-2 border"})]})})]})})]}),"b2c-sales"===Bs&&(0,er.jsxs)("div",{className:"space-y-6",children:[(0,er.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 p-4 bg-gray-50 rounded",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm text-gray-600",children:"B2C Large Invoices"}),(0,er.jsx)("p",{className:"text-xl font-bold",children:(null===(Rr=Us.b2c_large)||void 0===Rr?void 0:Rr.total_invoices)||0}),(0,er.jsxs)("p",{className:"text-xs text-gray-500",children:[(null===(Fr=Us.b2c_large)||void 0===Fr?void 0:Fr.total_records)||0," records"]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm text-gray-600",children:"B2C Small Groups"}),(0,er.jsx)("p",{className:"text-xl font-bold",children:(null===(Br=Us.b2c_small)||void 0===Br?void 0:Br.total_groups)||0})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm text-gray-600",children:"B2C Large Taxable"}),(0,er.jsxs)("p",{className:"text-lg font-bold",children:["\u20b9",(null===(zr=Us.summary)||void 0===zr||null===(Ur=zr.total_b2c_large_taxable)||void 0===Ur?void 0:Ur.toFixed(2))||"0.00"]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm text-gray-600",children:"B2C Small Taxable"}),(0,er.jsxs)("p",{className:"text-lg font-bold",children:["\u20b9",(null===(qr=Us.summary)||void 0===qr||null===(Wr=qr.total_b2c_small_taxable)||void 0===Wr?void 0:Wr.toFixed(2))||"0.00"]})]})]}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("div",{className:"mb-4 p-4 bg-blue-50 rounded border border-blue-200",children:[(0,er.jsx)("h3",{className:"text-lg font-bold mb-2",children:(null===(Vr=Us.b2c_large)||void 0===Vr?void 0:Vr.description)||"B2C Large (Inter-State Invoices > \u20b92.5L)"}),(0,er.jsx)("p",{className:"text-sm text-blue-800",children:"These are inter-state invoices with value exceeding \u20b92.5 Lakhs. Must be reported invoice-by-invoice."})]}),null!==(Hr=Us.b2c_large)&&void 0!==Hr&&Hr.data&&Us.b2c_large.data.length>0?(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full text-xs border",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"bg-gray-100",children:[(0,er.jsx)("th",{className:"p-2 border text-left",children:"Invoice Number"}),(0,er.jsx)("th",{className:"p-2 border text-left",children:"Invoice Date"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"Invoice Value"}),(0,er.jsx)("th",{className:"p-2 border text-left",children:"Place of Supply"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"Rate %"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"Taxable Value"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"IGST"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"CGST"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"SGST"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"Cess"})]})}),(0,er.jsx)("tbody",{children:Us.b2c_large.data.map((e,t)=>{var r,n,a,s,i,o;return(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsx)("td",{className:"p-2 border font-mono",children:e.invoice_number}),(0,er.jsx)("td",{className:"p-2 border",children:e.invoice_date}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(r=e.invoice_value)||void 0===r?void 0:r.toFixed(2)]}),(0,er.jsx)("td",{className:"p-2 border",children:e.place_of_supply}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:[e.rate,"%"]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(n=e.taxable_value)||void 0===n?void 0:n.toFixed(2)]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(a=e.igst)||void 0===a?void 0:a.toFixed(2)]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(s=e.cgst)||void 0===s?void 0:s.toFixed(2)]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(i=e.sgst)||void 0===i?void 0:i.toFixed(2)]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(o=e.cess)||void 0===o?void 0:o.toFixed(2)]})]},t)})})]})}):(0,er.jsx)("div",{className:"text-center py-8 text-gray-500 bg-gray-50 rounded",children:"No B2C Large invoices found (Inter-state invoices > \u20b92.5L)"})]}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("div",{className:"mb-4 p-4 bg-green-50 rounded border border-green-200",children:[(0,er.jsx)("h3",{className:"text-lg font-bold mb-2",children:(null===(Gr=Us.b2c_small)||void 0===Gr?void 0:Gr.description)||"B2C Small (Grouped by Place of Supply & Tax Rate)"}),(0,er.jsx)("p",{className:"text-sm text-green-800",children:"All intra-state sales and inter-state sales below \u20b92.5L are grouped by Place of Supply and Tax Rate. Individual invoice numbers are NOT reported here."})]}),null!==(Kr=Us.b2c_small)&&void 0!==Kr&&Kr.data&&Us.b2c_small.data.length>0?(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full text-sm border",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"bg-gray-100",children:[(0,er.jsx)("th",{className:"p-2 border text-left",children:"Place of Supply"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"Tax Rate %"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"Taxable Value"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"IGST"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"CGST"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"SGST"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"Cess"}),(0,er.jsx)("th",{className:"p-2 border text-left",children:"E-Commerce GSTIN"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"Invoice Count"})]})}),(0,er.jsx)("tbody",{children:Us.b2c_small.data.map((e,t)=>{var r,n,a,s,i;return(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsx)("td",{className:"p-2 border",children:e.place_of_supply}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:[e.rate,"%"]}),(0,er.jsxs)("td",{className:"p-2 border text-right font-semibold",children:["\u20b9",null===(r=e.taxable_value)||void 0===r?void 0:r.toFixed(2)]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(n=e.igst)||void 0===n?void 0:n.toFixed(2)]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(a=e.cgst)||void 0===a?void 0:a.toFixed(2)]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(s=e.sgst)||void 0===s?void 0:s.toFixed(2)]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(i=e.cess)||void 0===i?void 0:i.toFixed(2)]}),(0,er.jsx)("td",{className:"p-2 border font-mono text-xs",children:e.ecommerce_gstin||"-"}),(0,er.jsx)("td",{className:"p-2 border text-right",children:e.invoice_count||0})]},t)})}),Us.b2c_small.data.length>0&&(0,er.jsx)("tfoot",{className:"bg-gray-100 font-bold",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{colSpan:"2",className:"p-2 border text-right",children:"Totals:"}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(Yr=Us.summary)||void 0===Yr||null===(Xr=Yr.total_b2c_small_taxable)||void 0===Xr?void 0:Xr.toFixed(2)]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(Qr=Us.summary)||void 0===Qr||null===($r=Qr.total_b2c_small_igst)||void 0===$r?void 0:$r.toFixed(2)]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(Jr=Us.summary)||void 0===Jr||null===(Zr=Jr.total_b2c_small_cgst)||void 0===Zr?void 0:Zr.toFixed(2)]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(en=Us.summary)||void 0===en||null===(tn=en.total_b2c_small_sgst)||void 0===tn?void 0:tn.toFixed(2)]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",Us.b2c_small.data.reduce((e,t)=>e+(t.cess||0),0).toFixed(2)]}),(0,er.jsx)("td",{colSpan:"2",className:"p-2 border"})]})})]})}):(0,er.jsx)("div",{className:"text-center py-8 text-gray-500 bg-gray-50 rounded",children:"No B2C Small sales found"})]})]}),"hsn-sac-summary"===Bs&&(0,er.jsxs)("div",{className:"space-y-4",children:[Us.summary&&(0,er.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,er.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[(0,er.jsx)("h3",{className:"text-sm font-medium text-blue-800 mb-1",children:"Total Items"}),(0,er.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:Us.total_items||0})]}),(0,er.jsxs)("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[(0,er.jsx)("h3",{className:"text-sm font-medium text-green-800 mb-1",children:"Total Value"}),(0,er.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:["\u20b9",((null===(rn=Us.summary)||void 0===rn?void 0:rn.total_value)||0).toFixed(2)]})]}),(0,er.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[(0,er.jsx)("h3",{className:"text-sm font-medium text-purple-800 mb-1",children:"Total Taxable"}),(0,er.jsxs)("p",{className:"text-2xl font-bold text-purple-600",children:["\u20b9",((null===(nn=Us.summary)||void 0===nn?void 0:nn.total_taxable_value)||0).toFixed(2)]})]}),(0,er.jsxs)("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:[(0,er.jsx)("h3",{className:"text-sm font-medium text-orange-800 mb-1",children:"Total Tax"}),(0,er.jsxs)("p",{className:"text-2xl font-bold text-orange-600",children:["\u20b9",(((null===(an=Us.summary)||void 0===an?void 0:an.total_integrated_tax)||0)+((null===(sn=Us.summary)||void 0===sn?void 0:sn.total_central_tax)||0)+((null===(on=Us.summary)||void 0===on?void 0:on.total_state_ut_tax)||0)).toFixed(2)]})]})]}),(0,er.jsx)("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200 mb-4",children:(0,er.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,er.jsx)("strong",{children:"Note:"})," This report groups all sales by HSN/SAC code as required for GSTR-1 Table 12. Each row represents aggregated sales for a specific HSN/SAC code and tax rate."]})}),(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full text-xs border",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"bg-gray-100",children:[(0,er.jsx)("th",{className:"p-2 border text-left",children:"HSN / SAC Code"}),(0,er.jsx)("th",{className:"p-2 border text-left",children:"Description"}),(0,er.jsx)("th",{className:"p-2 border text-left",children:"UQC"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"Total Quantity"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"Total Value"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"Taxable Value"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"Integrated Tax (IGST)"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"Central Tax (CGST)"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"State/UT Tax (SGST)"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"Cess Amount"})]})}),(0,er.jsx)("tbody",{children:null===(ln=Us.data)||void 0===ln?void 0:ln.map((e,t)=>(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsx)("td",{className:"p-2 border font-mono",children:e.hsn_sac_code}),(0,er.jsx)("td",{className:"p-2 border",children:e.description}),(0,er.jsx)("td",{className:"p-2 border",children:e.uqc||e.uom||"NOS"}),(0,er.jsx)("td",{className:"p-2 border text-right",children:e.quantity||0}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",(e.total_value||0).toFixed(2)]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",(e.taxable_value||0).toFixed(2)]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",(e.integrated_tax||e.igst||0).toFixed(2)]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",(e.central_tax||e.cgst||0).toFixed(2)]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",(e.state_ut_tax||e.sgst||0).toFixed(2)]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",(e.cess_amount||e.cess||0).toFixed(2)]})]},t))}),Us.summary&&(0,er.jsx)("tfoot",{children:(0,er.jsxs)("tr",{className:"bg-gray-200 font-bold",children:[(0,er.jsx)("td",{className:"p-2 border text-right",colSpan:"3",children:"TOTAL"}),(0,er.jsx)("td",{className:"p-2 border text-right",children:Us.summary.total_quantity||0}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",(Us.summary.total_value||0).toFixed(2)]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",(Us.summary.total_taxable_value||0).toFixed(2)]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",(Us.summary.total_integrated_tax||0).toFixed(2)]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",(Us.summary.total_central_tax||0).toFixed(2)]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",(Us.summary.total_state_ut_tax||0).toFixed(2)]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",(Us.summary.total_cess||0).toFixed(2)]})]})})]})})]}),"itc-register"===Bs&&(0,er.jsxs)("div",{className:"space-y-6",children:[(0,er.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,er.jsxs)("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[(0,er.jsx)("h3",{className:"text-sm font-medium text-green-800 mb-1",children:"Total Eligible ITC"}),(0,er.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:["\u20b9",(null===(cn=Us.summary)||void 0===cn||null===(dn=cn.total_eligible_itc)||void 0===dn?void 0:dn.toFixed(2))||"0.00"]}),(0,er.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:"Claimable from Govt"})]}),(0,er.jsxs)("div",{className:"bg-red-50 rounded-lg p-4 border border-red-200",children:[(0,er.jsx)("h3",{className:"text-sm font-medium text-red-800 mb-1",children:"Ineligible ITC"}),(0,er.jsxs)("p",{className:"text-2xl font-bold text-red-600",children:["\u20b9",(null===(un=Us.summary)||void 0===un||null===(hn=un.total_ineligible_itc)||void 0===hn?void 0:hn.toFixed(2))||"0.00"]}),(0,er.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:"Cannot claim"})]}),(0,er.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[(0,er.jsx)("h3",{className:"text-sm font-medium text-blue-800 mb-1",children:"Net Claimable"}),(0,er.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:["\u20b9",(null===(mn=Us.summary)||void 0===mn||null===(pn=mn.net_claimable_itc)||void 0===pn?void 0:pn.toFixed(2))||"0.00"]}),(0,er.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:"For GSTR-3B"})]}),(0,er.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[(0,er.jsx)("h3",{className:"text-sm font-medium text-gray-800 mb-1",children:"Total Purchases"}),(0,er.jsx)("p",{className:"text-2xl font-bold text-gray-600",children:(null===(fn=Us.summary)||void 0===fn?void 0:fn.total_purchases)||0}),(0,er.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:"Invoices"})]})]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm",children:[(0,er.jsxs)("div",{className:"bg-white border rounded p-3",children:[(0,er.jsx)("p",{className:"font-semibold text-gray-700",children:"Input Goods"}),(0,er.jsxs)("p",{className:"text-lg font-bold",children:["\u20b9",(null===(gn=Us.input_goods)||void 0===gn||null===(xn=gn.total_tax)||void 0===xn?void 0:xn.toFixed(2))||"0.00"]}),(0,er.jsxs)("p",{className:"text-xs text-gray-500",children:[(null===(yn=Us.input_goods)||void 0===yn?void 0:yn.total_records)||0," items"]})]}),(0,er.jsxs)("div",{className:"bg-white border rounded p-3",children:[(0,er.jsx)("p",{className:"font-semibold text-gray-700",children:"Capital Goods"}),(0,er.jsxs)("p",{className:"text-lg font-bold",children:["\u20b9",(null===(vn=Us.capital_goods)||void 0===vn||null===(bn=vn.total_tax)||void 0===bn?void 0:bn.toFixed(2))||"0.00"]}),(0,er.jsxs)("p",{className:"text-xs text-gray-500",children:[(null===(jn=Us.capital_goods)||void 0===jn?void 0:jn.total_records)||0," items"]})]}),(0,er.jsxs)("div",{className:"bg-white border rounded p-3",children:[(0,er.jsx)("p",{className:"font-semibold text-gray-700",children:"Input Services"}),(0,er.jsxs)("p",{className:"text-lg font-bold",children:["\u20b9",(null===(wn=Us.input_services)||void 0===wn||null===(Nn=wn.total_tax)||void 0===Nn?void 0:Nn.toFixed(2))||"0.00"]}),(0,er.jsxs)("p",{className:"text-xs text-gray-500",children:[(null===(_n=Us.input_services)||void 0===_n?void 0:_n.total_records)||0," items"]})]}),(0,er.jsxs)("div",{className:"bg-white border rounded p-3 border-red-300",children:[(0,er.jsx)("p",{className:"font-semibold text-red-700",children:"Ineligible"}),(0,er.jsxs)("p",{className:"text-lg font-bold text-red-600",children:["\u20b9",(null===(kn=Us.ineligible)||void 0===kn||null===(Sn=kn.total_tax)||void 0===Sn?void 0:Sn.toFixed(2))||"0.00"]}),(0,er.jsxs)("p",{className:"text-xs text-gray-500",children:[(null===(An=Us.ineligible)||void 0===An?void 0:An.total_records)||0," items"]})]})]}),(0,er.jsx)("div",{className:"border-b",children:(0,er.jsx)("div",{className:"flex space-x-4",children:(0,er.jsx)("button",{onClick:()=>zs("itc-register"),className:"px-4 py-2 border-b-2 border-indigo-600 text-indigo-600 font-medium",children:"All Eligible ITC"})})}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("div",{className:"mb-4 p-4 bg-green-50 rounded border border-green-200",children:[(0,er.jsx)("h3",{className:"text-lg font-bold mb-2",children:"All Eligible ITC (Combined)"}),(0,er.jsx)("p",{className:"text-sm text-green-800",children:"Total tax paid on eligible purchases that can be claimed as Input Tax Credit in GSTR-3B."})]}),(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full text-xs border",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"bg-gray-100",children:[(0,er.jsx)("th",{className:"p-2 border text-left",children:"Vendor GSTIN"}),(0,er.jsx)("th",{className:"p-2 border text-left",children:"Supplier Name"}),(0,er.jsx)("th",{className:"p-2 border text-left",children:"Invoice No"}),(0,er.jsx)("th",{className:"p-2 border text-left",children:"Invoice Date"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"Invoice Value"}),(0,er.jsx)("th",{className:"p-2 border text-left",children:"Place of Supply"}),(0,er.jsx)("th",{className:"p-2 border text-left",children:"HSN Code"}),(0,er.jsx)("th",{className:"p-2 border text-left",children:"Item Name"}),(0,er.jsx)("th",{className:"p-2 border text-left",children:"Category"}),(0,er.jsx)("th",{className:"p-2 border text-left",children:"ITC Type"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"Tax Rate %"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"Taxable Value"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"IGST"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"CGST"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"SGST"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"Total Tax"})]})}),(0,er.jsx)("tbody",{children:null===(Cn=Us.all_eligible)||void 0===Cn||null===(En=Cn.data)||void 0===En?void 0:En.map((e,t)=>{var r,n,a,s,i,o;return(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsx)("td",{className:"p-2 border font-mono text-xs",children:e.vendor_gstin||"-"}),(0,er.jsx)("td",{className:"p-2 border",children:e.supplier_name}),(0,er.jsx)("td",{className:"p-2 border font-mono",children:e.invoice_number}),(0,er.jsx)("td",{className:"p-2 border",children:e.invoice_date}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(r=e.invoice_value)||void 0===r?void 0:r.toFixed(2)]}),(0,er.jsx)("td",{className:"p-2 border",children:e.place_of_supply}),(0,er.jsx)("td",{className:"p-2 border font-mono",children:e.hsn_code||"-"}),(0,er.jsx)("td",{className:"p-2 border",children:e.item_name}),(0,er.jsx)("td",{className:"p-2 border text-xs",children:e.category_name}),(0,er.jsx)("td",{className:"p-2 border",children:(0,er.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat("Capital Goods"===e.itc_type?"bg-purple-100 text-purple-800":"Input Services"===e.itc_type?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"),children:e.itc_type})}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:[e.tax_rate,"%"]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(n=e.taxable_value)||void 0===n?void 0:n.toFixed(2)]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(a=e.igst)||void 0===a?void 0:a.toFixed(2)]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(s=e.cgst)||void 0===s?void 0:s.toFixed(2)]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(i=e.sgst)||void 0===i?void 0:i.toFixed(2)]}),(0,er.jsxs)("td",{className:"p-2 border text-right font-semibold",children:["\u20b9",null===(o=e.total_tax)||void 0===o?void 0:o.toFixed(2)]})]},"itc-".concat(e.invoice_number||t,"-").concat(e.vendor_gstin||t,"-").concat(t))})}),(null===(Tn=Us.all_eligible)||void 0===Tn?void 0:Tn.data)&&Us.all_eligible.data.length>0&&(0,er.jsx)("tfoot",{className:"bg-gray-100 font-bold",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{colSpan:"11",className:"p-2 border text-right",children:"Totals:"}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(Pn=Us.all_eligible)||void 0===Pn||null===(On=Pn.total_taxable_value)||void 0===On?void 0:On.toFixed(2)]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(Dn=Us.all_eligible)||void 0===Dn||null===(In=Dn.total_igst)||void 0===In?void 0:In.toFixed(2)]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(Ln=Us.all_eligible)||void 0===Ln||null===(Mn=Ln.total_cgst)||void 0===Mn?void 0:Mn.toFixed(2)]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(Rn=Us.all_eligible)||void 0===Rn||null===(Fn=Rn.total_sgst)||void 0===Fn?void 0:Fn.toFixed(2)]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(Bn=Us.all_eligible)||void 0===Bn||null===(zn=Bn.total_tax)||void 0===zn?void 0:zn.toFixed(2)]})]})})]})})]}),(null===(Un=Us.ineligible)||void 0===Un?void 0:Un.data)&&Us.ineligible.data.length>0&&(0,er.jsxs)("div",{children:[(0,er.jsxs)("div",{className:"mb-4 p-4 bg-red-50 rounded border border-red-200",children:[(0,er.jsx)("h3",{className:"text-lg font-bold mb-2 text-red-800",children:"Ineligible / Blocked Credits (Section 17(5))"}),(0,er.jsx)("p",{className:"text-sm text-red-800",children:"These purchases cannot be claimed as ITC. Common reasons: Construction materials, Personal use items, Motor vehicles."})]}),(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full text-xs border",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"bg-red-100",children:[(0,er.jsx)("th",{className:"p-2 border text-left",children:"Vendor GSTIN"}),(0,er.jsx)("th",{className:"p-2 border text-left",children:"Supplier Name"}),(0,er.jsx)("th",{className:"p-2 border text-left",children:"Invoice No"}),(0,er.jsx)("th",{className:"p-2 border text-left",children:"Item Name"}),(0,er.jsx)("th",{className:"p-2 border text-left",children:"Category"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"Taxable Value"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"Total Tax"}),(0,er.jsx)("th",{className:"p-2 border text-left",children:"Reason"})]})}),(0,er.jsx)("tbody",{children:Us.ineligible.data.map((e,t)=>{var r,n;return(0,er.jsxs)("tr",{className:"hover:bg-red-50",children:[(0,er.jsx)("td",{className:"p-2 border font-mono text-xs",children:e.vendor_gstin||"-"}),(0,er.jsx)("td",{className:"p-2 border",children:e.supplier_name}),(0,er.jsx)("td",{className:"p-2 border font-mono",children:e.invoice_number}),(0,er.jsx)("td",{className:"p-2 border",children:e.item_name}),(0,er.jsx)("td",{className:"p-2 border text-xs",children:e.category_name}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(r=e.taxable_value)||void 0===r?void 0:r.toFixed(2)]}),(0,er.jsxs)("td",{className:"p-2 border text-right font-semibold text-red-600",children:["\u20b9",null===(n=e.total_tax)||void 0===n?void 0:n.toFixed(2)]}),(0,er.jsx)("td",{className:"p-2 border text-xs text-red-600",children:"Blocked by Category"})]},t)})}),(0,er.jsx)("tfoot",{className:"bg-red-100 font-bold",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{colSpan:"5",className:"p-2 border text-right",children:"Total Ineligible ITC:"}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(qn=Us.ineligible)||void 0===qn||null===(Wn=qn.total_taxable_value)||void 0===Wn?void 0:Wn.toFixed(2)]}),(0,er.jsxs)("td",{className:"p-2 border text-right text-red-600",children:["\u20b9",null===(Vn=Us.ineligible)||void 0===Vn||null===(Hn=Vn.total_tax)||void 0===Hn?void 0:Hn.toFixed(2)]}),(0,er.jsx)("td",{className:"p-2 border"})]})})]})})]}),(0,er.jsxs)("div",{className:"mt-8 p-6 bg-yellow-50 rounded-lg border border-yellow-300",children:[(0,er.jsx)("h3",{className:"text-lg font-bold mb-4 text-yellow-900",children:"GSTR-2B Reconciliation"}),(0,er.jsx)("p",{className:"text-sm text-yellow-800 mb-4",children:"Upload your GSTR-2B Excel file downloaded from the GST portal to reconcile with your ITC Register. The system will match invoice numbers and highlight any discrepancies."}),(0,er.jsxs)("div",{className:"flex items-center gap-4",children:[(0,er.jsx)("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:async e=>{var t;const r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(r){Js(!0);try{const e=new FormData;e.append("file",r);const t=new URLSearchParams;Hs&&t.append("start_date",Hs),Ks&&t.append("end_date",Ks);const n=await Ia.post("/gst-reports/itc-register/reconcile-gstr2b?".concat(t.toString()),e,{headers:{"Content-Type":"multipart/form-data"}});Qs(n.data)}catch(Oa){console.error("GSTR-2B Reconciliation error:",Oa),alert("Failed to reconcile GSTR-2B file. Please check the file format.")}finally{Js(!1)}}},className:"hidden",id:"gstr2b-file-input"}),(0,er.jsx)("label",{htmlFor:"gstr2b-file-input",className:"px-4 py-2 bg-yellow-600 text-white rounded hover:bg-yellow-700 cursor-pointer",children:$s?"Uploading...":"Upload GSTR-2B File"}),Xs&&(0,er.jsxs)("span",{className:"text-sm text-gray-600",children:["File: ",Xs.file_name]})]}),Xs&&(0,er.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,er.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,er.jsxs)("div",{className:"bg-white rounded p-3 border",children:[(0,er.jsx)("p",{className:"text-xs text-gray-600",children:"GSTR-2B Invoices"}),(0,er.jsx)("p",{className:"text-lg font-bold",children:Xs.total_gstr2b_invoices})]}),(0,er.jsxs)("div",{className:"bg-white rounded p-3 border",children:[(0,er.jsx)("p",{className:"text-xs text-gray-600",children:"System Invoices"}),(0,er.jsx)("p",{className:"text-lg font-bold",children:Xs.total_system_invoices})]}),(0,er.jsxs)("div",{className:"bg-green-50 rounded p-3 border border-green-300",children:[(0,er.jsx)("p",{className:"text-xs text-green-700",children:"Matched"}),(0,er.jsx)("p",{className:"text-lg font-bold text-green-600",children:Xs.matched_count})]}),(0,er.jsxs)("div",{className:"bg-red-50 rounded p-3 border border-red-300",children:[(0,er.jsx)("p",{className:"text-xs text-red-700",children:"Not in System"}),(0,er.jsx)("p",{className:"text-lg font-bold text-red-600",children:Xs.unmatched_in_gstr2b_count})]}),(0,er.jsxs)("div",{className:"bg-orange-50 rounded p-3 border border-orange-300",children:[(0,er.jsx)("p",{className:"text-xs text-orange-700",children:"Not in GSTR-2B"}),(0,er.jsx)("p",{className:"text-lg font-bold text-orange-600",children:Xs.unmatched_in_system_count})]})]}),(0,er.jsxs)("div",{className:"bg-white rounded p-4 border",children:[(0,er.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,er.jsx)("span",{className:"text-sm font-medium",children:"Match Percentage"}),(0,er.jsxs)("span",{className:"text-lg font-bold",children:[Xs.match_percentage,"%"]})]}),(0,er.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,er.jsx)("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"".concat(Xs.match_percentage,"%")}})})]}),Xs.unmatched_in_gstr2b&&Xs.unmatched_in_gstr2b.length>0&&(0,er.jsxs)("div",{children:[(0,er.jsxs)("h4",{className:"font-bold text-red-700 mb-2",children:["\u26a0\ufe0f Invoices in GSTR-2B but NOT in Your System (",Xs.unmatched_in_gstr2b.length,")"]}),(0,er.jsx)("div",{className:"bg-red-50 border border-red-300 rounded p-4 max-h-60 overflow-y-auto",children:(0,er.jsxs)("table",{className:"min-w-full text-xs",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"bg-red-100",children:[(0,er.jsx)("th",{className:"p-2 text-left border",children:"Invoice Number"}),(0,er.jsx)("th",{className:"p-2 text-left border",children:"Status"})]})}),(0,er.jsx)("tbody",{children:Xs.unmatched_in_gstr2b.map((e,t)=>(0,er.jsxs)("tr",{className:"bg-white",children:[(0,er.jsx)("td",{className:"p-2 border font-mono",children:e.invoice_number}),(0,er.jsx)("td",{className:"p-2 border text-red-600",children:"Not Found"})]},t))})]})})]}),Xs.unmatched_in_system&&Xs.unmatched_in_system.length>0&&(0,er.jsxs)("div",{children:[(0,er.jsxs)("h4",{className:"font-bold text-orange-700 mb-2",children:["\u26a0\ufe0f Invoices in Your System but NOT in GSTR-2B (",Xs.unmatched_in_system.length,")"]}),(0,er.jsx)("div",{className:"bg-orange-50 border border-orange-300 rounded p-4 max-h-60 overflow-y-auto",children:(0,er.jsxs)("table",{className:"min-w-full text-xs",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"bg-orange-100",children:[(0,er.jsx)("th",{className:"p-2 text-left border",children:"Invoice Number"}),(0,er.jsx)("th",{className:"p-2 text-left border",children:"Invoice Date"}),(0,er.jsx)("th",{className:"p-2 text-left border",children:"Vendor"}),(0,er.jsx)("th",{className:"p-2 text-right border",children:"Amount"}),(0,er.jsx)("th",{className:"p-2 text-left border",children:"Status"})]})}),(0,er.jsx)("tbody",{children:Xs.unmatched_in_system.map((e,t)=>{var r;return(0,er.jsxs)("tr",{className:"bg-white",children:[(0,er.jsx)("td",{className:"p-2 border font-mono",children:e.invoice_number}),(0,er.jsx)("td",{className:"p-2 border",children:e.invoice_date}),(0,er.jsx)("td",{className:"p-2 border",children:e.vendor_name||"-"}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(r=e.total_amount)||void 0===r?void 0:r.toFixed(2)]}),(0,er.jsx)("td",{className:"p-2 border text-orange-600",children:"Not in GSTR-2B"})]},t)})})]})})]}),Xs.matched&&Xs.matched.length>0&&(0,er.jsxs)("div",{children:[(0,er.jsxs)("h4",{className:"font-bold text-green-700 mb-2",children:["\u2705 Matched Invoices (",Xs.matched.length,")"]}),(0,er.jsx)("div",{className:"bg-green-50 border border-green-300 rounded p-4 max-h-60 overflow-y-auto",children:(0,er.jsxs)("table",{className:"min-w-full text-xs",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"bg-green-100",children:[(0,er.jsx)("th",{className:"p-2 text-left border",children:"Invoice Number"}),(0,er.jsx)("th",{className:"p-2 text-left border",children:"Invoice Date"}),(0,er.jsx)("th",{className:"p-2 text-left border",children:"Vendor"}),(0,er.jsx)("th",{className:"p-2 text-right border",children:"Amount"}),(0,er.jsx)("th",{className:"p-2 text-left border",children:"Status"})]})}),(0,er.jsx)("tbody",{children:Xs.matched.map((e,t)=>{var r;return(0,er.jsxs)("tr",{className:"bg-white",children:[(0,er.jsx)("td",{className:"p-2 border font-mono",children:e.invoice_number}),(0,er.jsx)("td",{className:"p-2 border",children:e.invoice_date}),(0,er.jsx)("td",{className:"p-2 border",children:e.vendor_name||"-"}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(r=e.total_amount)||void 0===r?void 0:r.toFixed(2)]}),(0,er.jsx)("td",{className:"p-2 border text-green-600",children:"\u2713 Matched"})]},t)})})]})})]})]})]})]}),"rcm-register"===Bs&&(0,er.jsxs)("div",{className:"space-y-6",children:[(0,er.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,er.jsxs)("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:[(0,er.jsx)("h3",{className:"text-sm font-medium text-orange-800 mb-1",children:"Total RCM Liability"}),(0,er.jsxs)("p",{className:"text-2xl font-bold text-orange-600",children:["\u20b9",(null===(Gn=Us.summary)||void 0===Gn||null===(Kn=Gn.total_tax_liability)||void 0===Kn?void 0:Kn.toFixed(2))||"0.00"]}),(0,er.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:"To be paid in cash"})]}),(0,er.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[(0,er.jsx)("h3",{className:"text-sm font-medium text-blue-800 mb-1",children:"Total Taxable Value"}),(0,er.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:["\u20b9",(null===(Yn=Us.summary)||void 0===Yn||null===(Xn=Yn.total_taxable_value)||void 0===Xn?void 0:Xn.toFixed(2))||"0.00"]})]}),(0,er.jsxs)("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[(0,er.jsx)("h3",{className:"text-sm font-medium text-green-800 mb-1",children:"Total Records"}),(0,er.jsx)("p",{className:"text-2xl font-bold text-green-600",children:(null===(Qn=Us.summary)||void 0===Qn?void 0:Qn.total_records)||0})]}),(0,er.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[(0,er.jsx)("h3",{className:"text-sm font-medium text-purple-800 mb-1",children:"Total IGST"}),(0,er.jsxs)("p",{className:"text-2xl font-bold text-purple-600",children:["\u20b9",(null===($n=Us.summary)||void 0===$n||null===(Jn=$n.total_igst)||void 0===Jn?void 0:Jn.toFixed(2))||"0.00"]})]})]}),(0,er.jsx)("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:(0,er.jsxs)("p",{className:"text-sm text-orange-800",children:[(0,er.jsx)("strong",{children:"Note:"})," Reverse Charge Mechanism (RCM) liability arises on specific goods/services (like GTA, Legal Services) or purchases from unregistered dealers. This liability must be paid in cash, but ITC can be claimed in the same month."]})}),(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full text-xs border",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"bg-gray-100",children:[(0,er.jsx)("th",{className:"p-2 border text-left",children:"RCM Invoice No"}),(0,er.jsx)("th",{className:"p-2 border text-left",children:"RCM Date"}),(0,er.jsx)("th",{className:"p-2 border text-left",children:"Supplier Name"}),(0,er.jsx)("th",{className:"p-2 border text-left",children:"Nature of Supply"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"Taxable Value"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"Tax Rate"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"Tax Liability"}),(0,er.jsx)("th",{className:"p-2 border text-left",children:"ITC Eligibility"}),(0,er.jsx)("th",{className:"p-2 border text-left",children:"Source"})]})}),(0,er.jsx)("tbody",{children:null===(Zn=Us.data)||void 0===Zn?void 0:Zn.map((e,t)=>{var r,n,a;return(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsx)("td",{className:"p-2 border font-mono text-xs",children:e.rcm_invoice_no}),(0,er.jsx)("td",{className:"p-2 border",children:null===(r=e.rcm_date)||void 0===r?void 0:r.split("T")[0]}),(0,er.jsx)("td",{className:"p-2 border",children:e.supplier_name}),(0,er.jsx)("td",{className:"p-2 border",children:e.nature_of_supply}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(n=e.taxable_value)||void 0===n?void 0:n.toFixed(2)]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:[e.tax_rate,"%"]}),(0,er.jsxs)("td",{className:"p-2 border text-right font-bold text-orange-600",children:["\u20b9",null===(a=e.tax_liability)||void 0===a?void 0:a.toFixed(2)]}),(0,er.jsx)("td",{className:"p-2 border",children:(0,er.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat("Eligible"===e.itc_eligibility?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.itc_eligibility})}),(0,er.jsxs)("td",{className:"p-2 border text-xs text-gray-500",children:[e.source_type," #",e.source_id]})]},t)})}),Us.data&&Us.data.length>0&&(0,er.jsx)("tfoot",{className:"bg-gray-100 font-bold",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{colSpan:"4",className:"p-2 border text-right",children:"Totals:"}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(ea=Us.summary)||void 0===ea||null===(ta=ea.total_taxable_value)||void 0===ta?void 0:ta.toFixed(2)]}),(0,er.jsx)("td",{className:"p-2 border"}),(0,er.jsxs)("td",{className:"p-2 border text-right text-orange-600",children:["\u20b9",null===(ra=Us.summary)||void 0===ra||null===(na=ra.total_tax_liability)||void 0===na?void 0:na.toFixed(2)]}),(0,er.jsx)("td",{colSpan:"2",className:"p-2 border"})]})})]})})]}),"advance-receipt"===Bs&&(0,er.jsxs)("div",{children:[(0,er.jsxs)("div",{className:"mb-4 grid grid-cols-3 gap-4",children:[(0,er.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[(0,er.jsx)("p",{className:"text-sm font-medium",children:"Total Advance"}),(0,er.jsxs)("p",{className:"text-xl font-bold",children:["\u20b9",(null===(aa=Us.total_advance_received)||void 0===aa?void 0:aa.toFixed(2))||"0.00"]})]}),(0,er.jsxs)("div",{className:"bg-yellow-50 rounded-lg p-4 border border-yellow-200",children:[(0,er.jsx)("p",{className:"text-sm font-medium",children:"Unadjusted"}),(0,er.jsxs)("p",{className:"text-xl font-bold",children:["\u20b9",(null===(sa=Us.unadjusted_advance)||void 0===sa?void 0:sa.toFixed(2))||"0.00"]})]}),(0,er.jsxs)("div",{className:"bg-red-50 rounded-lg p-4 border border-red-200",children:[(0,er.jsx)("p",{className:"text-sm font-medium",children:"Tax Liability"}),(0,er.jsxs)("p",{className:"text-xl font-bold",children:["\u20b9",(null===(ia=Us.tax_liability_on_advance)||void 0===ia?void 0:ia.toFixed(2))||"0.00"]})]})]}),(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full text-sm border",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"bg-gray-100",children:[(0,er.jsx)("th",{className:"p-2 border text-left",children:"Receipt Date"}),(0,er.jsx)("th",{className:"p-2 border text-left",children:"Booking ID"}),(0,er.jsx)("th",{className:"p-2 border text-left",children:"Guest"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"Advance"}),(0,er.jsx)("th",{className:"p-2 border text-left",children:"Invoice Raised"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"Unadjusted"})]})}),(0,er.jsx)("tbody",{children:null===(oa=Us.data)||void 0===oa?void 0:oa.map((e,t)=>{var r,n;return(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{className:"p-2 border",children:e.receipt_date}),(0,er.jsx)("td",{className:"p-2 border",children:e.booking_id}),(0,er.jsx)("td",{className:"p-2 border",children:e.guest_name}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(r=e.advance_amount)||void 0===r?void 0:r.toFixed(2)]}),(0,er.jsx)("td",{className:"p-2 border",children:e.invoice_raised?"Yes":"No"}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(n=e.unadjusted_advance)||void 0===n?void 0:n.toFixed(2)]})]},t)})})]})})]}),"room-tariff-slab"===Bs&&(0,er.jsxs)("div",{className:"space-y-6",children:[Us.slab_5_percent&&(0,er.jsxs)("div",{children:[(0,er.jsx)("h3",{className:"text-lg font-bold mb-4",children:null===(la=Us.slab_5_percent)||void 0===la?void 0:la.description}),(0,er.jsxs)("div",{className:"mb-4 p-4 bg-gray-50 rounded",children:[(0,er.jsxs)("p",{className:"text-sm",children:[(0,er.jsx)("strong",{children:"Total Invoices:"})," ",(null===(ca=Us.slab_5_percent)||void 0===ca?void 0:ca.total_invoices)||0]}),(0,er.jsxs)("p",{className:"text-sm",children:[(0,er.jsx)("strong",{children:"Total Revenue:"})," \u20b9",(null===(da=Us.slab_5_percent)||void 0===da||null===(ua=da.total_revenue)||void 0===ua?void 0:ua.toFixed(2))||"0.00"]})]}),(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full text-sm border",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"bg-gray-100",children:[(0,er.jsx)("th",{className:"p-2 border text-left",children:"Invoice Date"}),(0,er.jsx)("th",{className:"p-2 border text-left",children:"Invoice No"}),(0,er.jsx)("th",{className:"p-2 border text-left",children:"Guest"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"Room Total"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"Expected Tax Rate"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"Tax Applied"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"Tax Rate Applied"})]})}),(0,er.jsx)("tbody",{children:null===(ha=Us.slab_5_percent)||void 0===ha||null===(ma=ha.data)||void 0===ma?void 0:ma.slice(0,50).map((e,t)=>{var r,n,a;return(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{className:"p-2 border",children:null===(r=e.invoice_date)||void 0===r?void 0:r.split("T")[0]}),(0,er.jsx)("td",{className:"p-2 border",children:e.invoice_number}),(0,er.jsx)("td",{className:"p-2 border",children:e.guest_name}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(n=e.room_total)||void 0===n?void 0:n.toFixed(2)]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:[e.expected_tax_rate,"%"]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(a=e.tax_applied)||void 0===a?void 0:a.toFixed(2)]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:[e.tax_rate_applied,"%"]})]},"slab5-".concat(e.invoice_number||t,"-").concat(e.invoice_date||t))})})]})})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("h3",{className:"text-lg font-bold mb-4",children:null===(pa=Us.slab_12_percent)||void 0===pa?void 0:pa.description}),(0,er.jsxs)("div",{className:"mb-4 p-4 bg-gray-50 rounded",children:[(0,er.jsxs)("p",{className:"text-sm",children:[(0,er.jsx)("strong",{children:"Total Invoices:"})," ",(null===(fa=Us.slab_12_percent)||void 0===fa?void 0:fa.total_invoices)||0]}),(0,er.jsxs)("p",{className:"text-sm",children:[(0,er.jsx)("strong",{children:"Total Revenue:"})," \u20b9",(null===(ga=Us.slab_12_percent)||void 0===ga||null===(xa=ga.total_revenue)||void 0===xa?void 0:xa.toFixed(2))||"0.00"]})]}),(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full text-sm border",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"bg-gray-100",children:[(0,er.jsx)("th",{className:"p-2 border text-left",children:"Invoice Date"}),(0,er.jsx)("th",{className:"p-2 border text-left",children:"Invoice No"}),(0,er.jsx)("th",{className:"p-2 border text-left",children:"Guest"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"Room Total"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"Expected Tax Rate"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"Tax Applied"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"Tax Rate Applied"})]})}),(0,er.jsx)("tbody",{children:null===(ya=Us.slab_12_percent)||void 0===ya||null===(va=ya.data)||void 0===va?void 0:va.slice(0,50).map((e,t)=>{var r,n,a;return(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{className:"p-2 border",children:null===(r=e.invoice_date)||void 0===r?void 0:r.split("T")[0]}),(0,er.jsx)("td",{className:"p-2 border",children:e.invoice_number}),(0,er.jsx)("td",{className:"p-2 border",children:e.guest_name}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(n=e.room_total)||void 0===n?void 0:n.toFixed(2)]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:[e.expected_tax_rate,"%"]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(a=e.tax_applied)||void 0===a?void 0:a.toFixed(2)]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:[e.tax_rate_applied,"%"]})]},"slab12-".concat(e.invoice_number||t,"-").concat(e.invoice_date||t))})})]})})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("h3",{className:"text-lg font-bold mb-4",children:null===(ba=Us.slab_18_percent)||void 0===ba?void 0:ba.description}),(0,er.jsxs)("div",{className:"mb-4 p-4 bg-gray-50 rounded",children:[(0,er.jsxs)("p",{className:"text-sm",children:[(0,er.jsx)("strong",{children:"Total Invoices:"})," ",(null===(ja=Us.slab_18_percent)||void 0===ja?void 0:ja.total_invoices)||0]}),(0,er.jsxs)("p",{className:"text-sm",children:[(0,er.jsx)("strong",{children:"Total Revenue:"})," \u20b9",(null===(wa=Us.slab_18_percent)||void 0===wa||null===(Na=wa.total_revenue)||void 0===Na?void 0:Na.toFixed(2))||"0.00"]})]}),(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full text-sm border",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"bg-gray-100",children:[(0,er.jsx)("th",{className:"p-2 border text-left",children:"Invoice Date"}),(0,er.jsx)("th",{className:"p-2 border text-left",children:"Invoice No"}),(0,er.jsx)("th",{className:"p-2 border text-left",children:"Guest"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"Room Total"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"Expected Tax Rate"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"Tax Applied"}),(0,er.jsx)("th",{className:"p-2 border text-right",children:"Tax Rate Applied"})]})}),(0,er.jsx)("tbody",{children:null===(_a=Us.slab_18_percent)||void 0===_a||null===(ka=_a.data)||void 0===ka?void 0:ka.slice(0,50).map((e,t)=>{var r,n,a;return(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{className:"p-2 border",children:null===(r=e.invoice_date)||void 0===r?void 0:r.split("T")[0]}),(0,er.jsx)("td",{className:"p-2 border",children:e.invoice_number}),(0,er.jsx)("td",{className:"p-2 border",children:e.guest_name}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(n=e.room_total)||void 0===n?void 0:n.toFixed(2)]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:[e.expected_tax_rate,"%"]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:["\u20b9",null===(a=e.tax_applied)||void 0===a?void 0:a.toFixed(2)]}),(0,er.jsxs)("td",{className:"p-2 border text-right",children:[e.tax_rate_applied,"%"]})]},"slab18-".concat(e.invoice_number||t,"-").concat(e.invoice_date||t))})})]})})]})]})]}):(0,er.jsx)("div",{className:"text-center py-8 text-gray-500",children:'Select a report type and click "Generate Report" to view GST compliance data'})]})]}),ss&&(0,er.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,er.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,er.jsxs)("h3",{className:"text-xl font-bold mb-4",children:[cs?"Edit":"Create"," Account Group"]}),(0,er.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{cs?await Ia.put("/accounts/groups/".concat(cs.id),vi):await Ia.post("/accounts/groups",vi),is(!1),ds(null),bi({name:"",account_type:"Revenue",description:""}),Mi()}catch(Oa){var t,r;alert((null===(t=Oa.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"Failed to save account group")}},children:[(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Name"}),(0,er.jsx)("input",{type:"text",value:vi.name,onChange:e=>bi(Be(Be({},vi),{},{name:e.target.value})),className:"w-full border rounded px-3 py-2",required:!0})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Account Type"}),(0,er.jsxs)("select",{value:vi.account_type,onChange:e=>bi(Be(Be({},vi),{},{account_type:e.target.value})),className:"w-full border rounded px-3 py-2",required:!0,children:[(0,er.jsx)("option",{value:"Revenue",children:"Revenue"}),(0,er.jsx)("option",{value:"Expense",children:"Expense"}),(0,er.jsx)("option",{value:"Asset",children:"Asset"}),(0,er.jsx)("option",{value:"Liability",children:"Liability"}),(0,er.jsx)("option",{value:"Tax",children:"Tax"})]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Description"}),(0,er.jsx)("textarea",{value:vi.description,onChange:e=>bi(Be(Be({},vi),{},{description:e.target.value})),className:"w-full border rounded px-3 py-2",rows:"3"})]})]}),(0,er.jsxs)("div",{className:"mt-6 flex space-x-3",children:[(0,er.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:cs?"Update":"Create"}),(0,er.jsx)("button",{type:"button",onClick:()=>{is(!1),ds(null)},className:"flex-1 px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300",children:"Cancel"})]})]})]})}),os&&(0,er.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,er.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,er.jsxs)("h3",{className:"text-xl font-bold mb-4",children:[us?"Edit":"Create"," Account Ledger"]}),(0,er.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=Be(Be({},ji),{},{group_id:parseInt(ji.group_id),opening_balance:parseFloat(ji.opening_balance)||0,tax_rate:ji.tax_rate?parseFloat(ji.tax_rate):null});us?await Ia.put("/accounts/ledgers/".concat(us.id),e):await Ia.post("/accounts/ledgers",e),ls(!1),hs(null),wi({name:"",code:"",group_id:"",module:"",description:"",opening_balance:0,balance_type:"debit",tax_type:"",tax_rate:"",bank_name:"",account_number:"",ifsc_code:"",branch_name:""}),Ri()}catch(Oa){var t,r;alert((null===(t=Oa.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"Failed to save account ledger")}},children:[(0,er.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Name *"}),(0,er.jsx)("input",{type:"text",value:ji.name,onChange:e=>wi(Be(Be({},ji),{},{name:e.target.value})),className:"w-full border rounded px-3 py-2",required:!0})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Code"}),(0,er.jsx)("input",{type:"text",value:ji.code,onChange:e=>wi(Be(Be({},ji),{},{code:e.target.value})),className:"w-full border rounded px-3 py-2"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Group *"}),(0,er.jsxs)("select",{value:ji.group_id,onChange:e=>wi(Be(Be({},ji),{},{group_id:e.target.value})),className:"w-full border rounded px-3 py-2",required:!0,children:[(0,er.jsx)("option",{value:"",children:"Select Group"}),Za.map(e=>(0,er.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Module"}),(0,er.jsx)("input",{type:"text",value:ji.module,onChange:e=>wi(Be(Be({},ji),{},{module:e.target.value})),className:"w-full border rounded px-3 py-2",placeholder:"e.g., Booking, Purchase"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Opening Balance"}),(0,er.jsx)("input",{type:"number",step:"0.01",value:ji.opening_balance,onChange:e=>wi(Be(Be({},ji),{},{opening_balance:e.target.value})),className:"w-full border rounded px-3 py-2"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Balance Type"}),(0,er.jsxs)("select",{value:ji.balance_type,onChange:e=>wi(Be(Be({},ji),{},{balance_type:e.target.value})),className:"w-full border rounded px-3 py-2",children:[(0,er.jsx)("option",{value:"debit",children:"Debit"}),(0,er.jsx)("option",{value:"credit",children:"Credit"})]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Tax Type"}),(0,er.jsx)("input",{type:"text",value:ji.tax_type,onChange:e=>wi(Be(Be({},ji),{},{tax_type:e.target.value})),className:"w-full border rounded px-3 py-2",placeholder:"e.g., CGST, SGST, IGST"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Tax Rate (%)"}),(0,er.jsx)("input",{type:"number",step:"0.01",value:ji.tax_rate,onChange:e=>wi(Be(Be({},ji),{},{tax_rate:e.target.value})),className:"w-full border rounded px-3 py-2"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Bank Name"}),(0,er.jsx)("input",{type:"text",value:ji.bank_name,onChange:e=>wi(Be(Be({},ji),{},{bank_name:e.target.value})),className:"w-full border rounded px-3 py-2"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Account Number"}),(0,er.jsx)("input",{type:"text",value:ji.account_number,onChange:e=>wi(Be(Be({},ji),{},{account_number:e.target.value})),className:"w-full border rounded px-3 py-2"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium mb-1",children:"IFSC Code"}),(0,er.jsx)("input",{type:"text",value:ji.ifsc_code,onChange:e=>wi(Be(Be({},ji),{},{ifsc_code:e.target.value})),className:"w-full border rounded px-3 py-2"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Branch Name"}),(0,er.jsx)("input",{type:"text",value:ji.branch_name,onChange:e=>wi(Be(Be({},ji),{},{branch_name:e.target.value})),className:"w-full border rounded px-3 py-2"})]}),(0,er.jsxs)("div",{className:"col-span-2",children:[(0,er.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Description"}),(0,er.jsx)("textarea",{value:ji.description,onChange:e=>wi(Be(Be({},ji),{},{description:e.target.value})),className:"w-full border rounded px-3 py-2",rows:"3"})]})]}),(0,er.jsxs)("div",{className:"mt-6 flex space-x-3",children:[(0,er.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:us?"Update":"Create"}),(0,er.jsx)("button",{type:"button",onClick:()=>{ls(!1),hs(null)},className:"flex-1 px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300",children:"Cancel"})]})]})]})}),fs&&(0,er.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,er.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,er.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Create Journal Entry"}),(0,er.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=Ni.lines.filter(e=>e.debit_ledger_id).reduce((e,t)=>e+(parseFloat(t.amount)||0),0),t=Ni.lines.filter(e=>e.credit_ledger_id).reduce((e,t)=>e+(parseFloat(t.amount)||0),0);if(Math.abs(e-t)>.01)return void alert("Journal entry must balance. Debits: \u20b9".concat(e.toFixed(2),", Credits: \u20b9").concat(t.toFixed(2)));const r=Be(Be({},Ni),{},{entry_date:new Date(Ni.entry_date+"T00:00:00+05:30").toISOString(),lines:Ni.lines.map(e=>Be(Be({},e),{},{debit_ledger_id:e.debit_ledger_id?parseInt(e.debit_ledger_id):null,credit_ledger_id:e.credit_ledger_id?parseInt(e.credit_ledger_id):null,amount:parseFloat(e.amount)||0}))});await Ia.post("/accounts/journal-entries",r),gs(!1),_i({entry_date:b$(),description:"",notes:"",lines:[{debit_ledger_id:"",credit_ledger_id:"",amount:0,description:""}]}),Fi()}catch(Oa){var t,r;alert((null===(t=Oa.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"Failed to create journal entry")}},children:[(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsx)("div",{className:"grid grid-cols-2 gap-4",children:(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Entry Date *"}),(0,er.jsx)("input",{type:"date",value:Ni.entry_date,onChange:e=>_i(Be(Be({},Ni),{},{entry_date:e.target.value})),className:"w-full border rounded px-3 py-2",required:!0})]})}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Description *"}),(0,er.jsx)("input",{type:"text",value:Ni.description,onChange:e=>_i(Be(Be({},Ni),{},{description:e.target.value})),className:"w-full border rounded px-3 py-2",required:!0})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Notes"}),(0,er.jsx)("textarea",{value:Ni.notes,onChange:e=>_i(Be(Be({},Ni),{},{notes:e.target.value})),className:"w-full border rounded px-3 py-2",rows:"2"})]}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,er.jsx)("label",{className:"block text-sm font-medium",children:"Journal Entry Lines *"}),(0,er.jsxs)("button",{type:"button",onClick:()=>{_i(Be(Be({},Ni),{},{lines:[...Ni.lines,{debit_ledger_id:"",credit_ledger_id:"",amount:0,description:""}]}))},className:"px-3 py-1 bg-indigo-600 text-white rounded text-sm",children:[(0,er.jsx)(r$,{size:14,className:"inline mr-1"}),"Add Line"]})]}),(0,er.jsx)("div",{className:"space-y-2",children:Ni.lines.map((e,t)=>(0,er.jsxs)("div",{className:"grid grid-cols-12 gap-2 items-end border p-3 rounded",children:[(0,er.jsxs)("div",{className:"col-span-4",children:[(0,er.jsx)("label",{className:"block text-xs font-medium mb-1",children:"Debit Ledger"}),(0,er.jsxs)("select",{value:e.debit_ledger_id,onChange:e=>{const r=[...Ni.lines];r[t].debit_ledger_id=e.target.value,r[t].credit_ledger_id="",_i(Be(Be({},Ni),{},{lines:r}))},className:"w-full border rounded px-2 py-1 text-sm",children:[(0,er.jsx)("option",{value:"",children:"Select..."}),ts.map(e=>(0,er.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,er.jsxs)("div",{className:"col-span-4",children:[(0,er.jsx)("label",{className:"block text-xs font-medium mb-1",children:"Credit Ledger"}),(0,er.jsxs)("select",{value:e.credit_ledger_id,onChange:e=>{const r=[...Ni.lines];r[t].credit_ledger_id=e.target.value,r[t].debit_ledger_id="",_i(Be(Be({},Ni),{},{lines:r}))},className:"w-full border rounded px-2 py-1 text-sm",children:[(0,er.jsx)("option",{value:"",children:"Select..."}),ts.map(e=>(0,er.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,er.jsxs)("div",{className:"col-span-3",children:[(0,er.jsx)("label",{className:"block text-xs font-medium mb-1",children:"Amount *"}),(0,er.jsx)("input",{type:"number",step:"0.01",value:e.amount,onChange:e=>{const r=[...Ni.lines];r[t].amount=e.target.value,_i(Be(Be({},Ni),{},{lines:r}))},className:"w-full border rounded px-2 py-1 text-sm",required:!0})]}),(0,er.jsx)("div",{className:"col-span-1",children:Ni.lines.length>1&&(0,er.jsx)("button",{type:"button",onClick:()=>(e=>{_i(Be(Be({},Ni),{},{lines:Ni.lines.filter((t,r)=>r!==e)}))})(t),className:"text-red-600 hover:text-red-800",children:(0,er.jsx)(Qq,{size:16})})})]},t))}),(0,er.jsx)("div",{className:"mt-4 p-3 bg-gray-100 rounded border",children:(()=>{const e=Ni.lines.filter(e=>e.debit_ledger_id).reduce((e,t)=>e+(parseFloat(t.amount)||0),0),t=Ni.lines.filter(e=>e.credit_ledger_id).reduce((e,t)=>e+(parseFloat(t.amount)||0),0),r=Math.abs(e-t)<.01;return(0,er.jsxs)("div",{className:"flex items-center justify-between",children:[(0,er.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,er.jsxs)("span",{className:"text-sm font-medium",children:["Total Debits: \u20b9",e.toFixed(2)]}),(0,er.jsxs)("span",{className:"text-sm font-medium",children:["Total Credits: \u20b9",t.toFixed(2)]})]}),r?(0,er.jsxs)("span",{className:"text-green-600 font-semibold flex items-center",children:[(0,er.jsx)(Hq,{size:16,className:"mr-1"}),"Balanced"]}):(0,er.jsxs)("span",{className:"text-red-600 font-semibold flex items-center",children:[(0,er.jsx)(Gq,{size:16,className:"mr-1"}),"Not Balanced (Difference: \u20b9",Math.abs(e-t).toFixed(2),")"]})]})})()})]})]}),(0,er.jsxs)("div",{className:"mt-6 flex space-x-3",children:[(0,er.jsx)("button",{type:"submit",disabled:(()=>{const e=Ni.lines.filter(e=>e.debit_ledger_id).reduce((e,t)=>e+(parseFloat(t.amount)||0),0),t=Ni.lines.filter(e=>e.credit_ledger_id).reduce((e,t)=>e+(parseFloat(t.amount)||0),0);return Math.abs(e-t)>=.01})(),className:"flex-1 px-4 py-2 rounded ".concat((()=>{const e=Ni.lines.filter(e=>e.debit_ledger_id).reduce((e,t)=>e+(parseFloat(t.amount)||0),0),t=Ni.lines.filter(e=>e.credit_ledger_id).reduce((e,t)=>e+(parseFloat(t.amount)||0),0);return Math.abs(e-t)>=.01?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-indigo-600 text-white hover:bg-indigo-700"})()),children:"Create Entry"}),(0,er.jsx)("button",{type:"button",onClick:()=>gs(!1),className:"flex-1 px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300",children:"Cancel"})]})]})]})})]})]})}var NJ={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},_J=a.createContext&&a.createContext(NJ),kJ=function(){return kJ=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},kJ.apply(this,arguments)},SJ=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r};function AJ(e){return e&&e.map(function(e,t){return a.createElement(e.tag,kJ({key:t},e.attr),AJ(e.child))})}function CJ(e){return function(t){return a.createElement(EJ,kJ({attr:kJ({},e.attr)},t),AJ(e.child))}}function EJ(e){var t=function(t){var r,n=e.attr,s=e.size,i=e.title,o=SJ(e,["attr","size","title"]),l=s||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),a.createElement("svg",kJ({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,o,{className:r,style:kJ(kJ({color:e.color||t.color},t.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&a.createElement("title",null,i),e.children)};return void 0!==_J?a.createElement(_J.Consumer,null,function(e){return t(e)}):t(NJ)}function TJ(e){return CJ({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z"}}]})(e)}function PJ(e){return CJ({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"}}]})(e)}function OJ(e){return CJ({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48zM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56zM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48z"}}]})(e)}function DJ(e){return CJ({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"}}]})(e)}function IJ(e){return CJ({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M288 0c-69.59 0-126 56.41-126 126 0 56.26 82.35 158.8 113.9 196.02 6.39 7.54 17.82 7.54 24.2 0C331.65 284.8 414 182.26 414 126 414 56.41 357.59 0 288 0zm0 168c-23.2 0-42-18.8-42-42s18.8-42 42-42 42 18.8 42 42-18.8 42-42 42zM20.12 215.95A32.006 32.006 0 0 0 0 245.66v250.32c0 11.32 11.43 19.06 21.94 14.86L160 448V214.92c-8.84-15.98-16.07-31.54-21.25-46.42L20.12 215.95zM288 359.67c-14.07 0-27.38-6.18-36.51-16.96-19.66-23.2-40.57-49.62-59.49-76.72v182l192 64V266c-18.92 27.09-39.82 53.52-59.49 76.72-9.13 10.77-22.44 16.95-36.51 16.95zm266.06-198.51L416 224v288l139.88-55.95A31.996 31.996 0 0 0 576 426.34V176.02c0-11.32-11.43-19.06-21.94-14.86z"}}]})(e)}function LJ(e){return CJ({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"}}]})(e)}function MJ(e){return CJ({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"}}]})(e)}function RJ(e){return CJ({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"}}]})(e)}function FJ(e){return CJ({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"}}]})(e)}function BJ(e){return CJ({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"}}]})(e)}const zJ=e=>{if(!e)return"";if(e.startsWith("http://")||e.startsWith("https://"))return e;const t=Ta();let r=e.trim().replace(/\\/g,"/").replace(/([^:])\/\/+/g,"$1/");if(r.startsWith("/")||(r="/".concat(r)),!r.startsWith("/static/")&&!r.startsWith("/uploads/"))if(r.includes("/uploads/"))r=r.replace(/^\/uploads\//,"/static/uploads/");else if(r.includes("uploads/"))r="/static/".concat(r);else{if([".jpg",".jpeg",".png",".gif",".webp",".svg"].some(e=>r.toLowerCase().endsWith(e))&&!r.includes("static")&&!r.includes("uploads")){const e=r.split("/").pop();r="/static/uploads/".concat(e)}}return"".concat(t).concat(r)},UJ=e=>{let{item:t,onEdit:r,onDelete:n,type:a}=e;return(0,er.jsxs)(Fh.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-xl shadow-md hover:shadow-lg transition-all duration-300 overflow-hidden group",children:[t.image_url&&(0,er.jsxs)("div",{className:"relative h-40 overflow-hidden",children:[(0,er.jsx)("img",{src:zJ(t.image_url),alt:t.title||t.caption||t.name||"Content",className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300",onError:e=>{e.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2YzZjRmNiIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTIiIGZpbGw9IiM5Y2EzYWYiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5ObyBJbWFnZTwvdGV4dD48L3N2Zz4="}}),(0,er.jsx)("div",{className:"absolute top-2 right-2",children:(()=>{switch(a){case"banner":return(0,er.jsx)(OJ,{className:"text-blue-500"});case"gallery":return(0,er.jsx)(TJ,{className:"text-purple-500"});case"review":return(0,er.jsx)(RJ,{className:"text-yellow-500"});case"resortInfo":return(0,er.jsx)(DJ,{className:"text-green-500"});case"signatureExperience":return(0,er.jsx)(PJ,{className:"text-pink-500"});case"planWedding":return(0,er.jsx)(PJ,{className:"text-red-500"});case"nearbyAttraction":return(0,er.jsx)(IJ,{className:"text-indigo-500"});default:return(0,er.jsx)(OJ,{className:"text-gray-500"})}})()})]}),(0,er.jsxs)("div",{className:"p-4",children:[(0,er.jsx)("h3",{className:"font-semibold text-gray-800 mb-2 line-clamp-1",children:t.title||t.name||t.caption||"Untitled"}),t.subtitle&&(0,er.jsx)("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:t.subtitle}),t.description&&(0,er.jsx)("p",{className:"text-xs text-gray-500 mb-2 line-clamp-2",children:t.description}),t.comment&&(0,er.jsxs)("p",{className:"text-sm text-gray-600 italic mb-2 line-clamp-2",children:['"',t.comment,'"']}),t.rating&&(0,er.jsx)("div",{className:"flex text-yellow-400 mb-2",children:[...Array(5)].map((e,r)=>(0,er.jsx)(RJ,{className:r<t.rating?"fill-current":"text-gray-300"},r))}),void 0!==t.is_active&&(0,er.jsx)("span",{className:"inline-block px-2 py-1 rounded-full text-xs font-semibold mb-2 ".concat(t.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:t.is_active?"Active":"Inactive"}),(0,er.jsxs)("div",{className:"flex gap-2 mt-3 pt-3 border-t border-gray-100",children:[(0,er.jsxs)("button",{onClick:()=>r(t),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-colors text-sm font-medium",children:[(0,er.jsx)(LJ,{size:12})," Edit"]}),(0,er.jsxs)("button",{onClick:()=>n(t.id),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition-colors text-sm font-medium",children:[(0,er.jsx)(BJ,{size:12})," Delete"]})]})]})]})},qJ=e=>{let{isOpen:t,onClose:r,onSubmit:n,fields:s,initialData:i,title:o,isMultipart:l=!1}=e;const[c,d]=(0,a.useState)({}),[u,h]=(0,a.useState)(null),[m,p]=(0,a.useState)(null),[f,g]=(0,a.useState)(!1);(0,a.useEffect)(()=>{i?(d(i),i.image_url&&p(zJ(i.image_url))):(d({}),p(null))},[i,t]);const x=e=>{const{name:t,value:r,type:n,checked:a,files:s}=e.target;"file"===n&&s.length>0?(h(s[0]),p(URL.createObjectURL(s[0])),d(Be(Be({},c),{},{[t]:s[0]}))):d(Be(Be({},c),{},"checkbox"===n?{[t]:a}:{[t]:r}))};return t?(0,er.jsx)(Hh,{children:(0,er.jsx)(Fh.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",onClick:r,children:(0,er.jsxs)(Fh.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-2xl shadow-2xl p-6 w-full max-w-lg max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,er.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,er.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:o}),(0,er.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:(0,er.jsx)(FJ,{size:20})})]}),(0,er.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),g(!0);try{await n(c,u),r()}finally{g(!1)}},className:"space-y-4",children:[s.map(e=>(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e.placeholder}),"file"===e.type?(0,er.jsx)("input",{type:"file",name:e.name,onChange:x,accept:"image/*",className:"w-full text-sm text-gray-600 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100"}):"checkbox"===e.type?(0,er.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,er.jsx)("input",{type:"checkbox",name:e.name,checked:!!c[e.name],onChange:x,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),(0,er.jsx)("span",{className:"text-sm text-gray-700",children:"Active"})]}):"textarea"===e.type?(0,er.jsx)("textarea",{name:e.name,placeholder:e.placeholder,value:c[e.name]||"",onChange:x,required:!1!==e.required,rows:4,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors resize-none"}):(0,er.jsx)("input",{type:e.type||"text",name:e.name,placeholder:e.placeholder,value:c[e.name]||"",onChange:x,required:!1!==e.required,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors"})]},e.name)),m&&(0,er.jsx)("div",{className:"mt-4",children:(0,er.jsx)("img",{src:m,alt:"Preview",className:"w-full h-48 object-cover rounded-lg shadow-md"})}),(0,er.jsx)("button",{type:"submit",disabled:f,className:"w-full mt-6 py-3 px-6 bg-indigo-600 text-white rounded-lg font-semibold shadow-md hover:bg-indigo-700 transition-all duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed",children:f?"Saving...":"Save"})]})]})})}):null};function WJ(){var e,t,r,n;const[s,i]=(0,a.useState)({banners:[],gallery:[],reviews:[],resortInfo:[],signatureExperiences:[],planWeddings:[],nearbyAttractions:[],nearbyAttractionBanners:[]}),[o,l]=(0,a.useState)(!0),[c,d]=(0,a.useState)({isOpen:!1,config:null,initialData:null}),[u,h]=(0,a.useState)("banners"),m=async()=>{l(!0);try{const[e,t,r,n,a,s,o,l]=await Promise.all([Ia.get("/header-banner/"),Ia.get("/gallery/"),Ia.get("/reviews/"),Ia.get("/resort-info/"),Ia.get("/signature-experiences/"),Ia.get("/plan-weddings/"),Ia.get("/nearby-attractions/"),Ia.get("/nearby-attraction-banners/")]);i({banners:e.data||[],gallery:t.data||[],reviews:r.data||[],resortInfo:n.data||[],signatureExperiences:a.data||[],planWeddings:s.data||[],nearbyAttractions:o.data||[],nearbyAttractionBanners:l.data||[]})}catch(e){console.error("Failed to fetch data:",e),Tt.error("Failed to load data.")}finally{l(!1)}};(0,a.useEffect)(()=>{m()},[]);const p=[{key:"banners",label:"Banners",icon:(0,er.jsx)(OJ,{}),data:s.banners},{key:"gallery",label:"Gallery",icon:(0,er.jsx)(TJ,{}),data:s.gallery},{key:"reviews",label:"Reviews",icon:(0,er.jsx)(RJ,{}),data:s.reviews},{key:"resortInfo",label:"Resort Info",icon:(0,er.jsx)(DJ,{}),data:s.resortInfo},{key:"signatureExperiences",label:"Experiences",icon:(0,er.jsx)(PJ,{}),data:s.signatureExperiences},{key:"planWeddings",label:"Weddings",icon:(0,er.jsx)(PJ,{}),data:s.planWeddings},{key:"nearbyAttractions",label:"Attractions",icon:(0,er.jsx)(IJ,{}),data:s.nearbyAttractions},{key:"nearbyAttractionBanners",label:"Attraction Banners",icon:(0,er.jsx)(OJ,{}),data:s.nearbyAttractionBanners}],f=p.find(e=>e.key===u),g={banners:{title:"Header Banner",endpoint:"/header-banner/",fields:[{name:"title",placeholder:"Banner Title"},{name:"subtitle",placeholder:"Banner Description"},{name:"image",type:"file"},{name:"is_active",type:"checkbox",placeholder:"Is Active?"}],isMultipart:!0},gallery:{title:"Gallery Image",endpoint:"/gallery/",fields:[{name:"caption",placeholder:"Image Caption"},{name:"image",type:"file"}],isMultipart:!0},reviews:{title:"Review",endpoint:"/reviews/",fields:[{name:"name",placeholder:"Customer Name"},{name:"comment",placeholder:"Review Comment",type:"textarea"},{name:"rating",placeholder:"Rating (1-5)",type:"number"}],isMultipart:!1},resortInfo:{title:"Resort Info",endpoint:"/resort-info/",fields:[{name:"name",placeholder:"Resort Name"},{name:"address",placeholder:"Resort Address",type:"textarea"},{name:"facebook",placeholder:"Facebook URL"},{name:"instagram",placeholder:"Instagram URL"},{name:"twitter",placeholder:"Twitter URL"},{name:"linkedin",placeholder:"LinkedIn URL"},{name:"is_active",type:"checkbox",placeholder:"Is Active?"}],isMultipart:!1},signatureExperiences:{title:"Signature Experience",endpoint:"/signature-experiences/",fields:[{name:"title",placeholder:"Experience Title"},{name:"description",placeholder:"Description",type:"textarea"},{name:"image",type:"file"},{name:"is_active",type:"checkbox",placeholder:"Is Active?"}],isMultipart:!0},planWeddings:{title:"Plan Your Wedding",endpoint:"/plan-weddings/",fields:[{name:"title",placeholder:"Title"},{name:"description",placeholder:"Description",type:"textarea"},{name:"image",type:"file"},{name:"is_active",type:"checkbox",placeholder:"Is Active?"}],isMultipart:!0},nearbyAttractions:{title:"Nearby Attraction",endpoint:"/nearby-attractions/",fields:[{name:"title",placeholder:"Attraction Title"},{name:"description",placeholder:"Description",type:"textarea"},{name:"map_link",placeholder:"Google Maps Link (optional)"},{name:"image",type:"file"},{name:"is_active",type:"checkbox",placeholder:"Is Active?"}],isMultipart:!0},nearbyAttractionBanners:{title:"Nearby Attraction Banner",endpoint:"/nearby-attraction-banners/",fields:[{name:"title",placeholder:"Banner Title"},{name:"subtitle",placeholder:"Banner Subtitle",type:"textarea"},{name:"image",type:"file"},{name:"is_active",type:"checkbox",placeholder:"Is Active?"}],isMultipart:!0}}[u];return o?(0,er.jsx)(xm,{children:(0,er.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,er.jsxs)("div",{className:"text-center",children:[(0,er.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),(0,er.jsx)("p",{className:"text-gray-600",children:"Loading content..."})]})})}):(0,er.jsx)(xm,{children:(0,er.jsxs)("div",{className:"p-6 bg-gradient-to-br from-gray-50 to-gray-100 min-h-screen",children:[(0,er.jsxs)("div",{className:"mb-8",children:[(0,er.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Website Content Management"}),(0,er.jsx)("p",{className:"text-gray-600",children:"Manage your resort website content easily"})]}),(0,er.jsx)("div",{className:"mb-6",children:(0,er.jsx)("div",{className:"flex flex-wrap gap-2 bg-white p-2 rounded-xl shadow-sm",children:p.map(e=>(0,er.jsxs)("button",{onClick:()=>h(e.key),className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ".concat(u===e.key?"bg-indigo-600 text-white shadow-md":"text-gray-700 hover:bg-gray-100"),children:[e.icon,(0,er.jsx)("span",{children:e.label}),e.data.length>0&&(0,er.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs ".concat(u===e.key?"bg-white text-indigo-600":"bg-gray-200 text-gray-600"),children:e.data.length})]},e.key))})}),(0,er.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,er.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,er.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:(null===g||void 0===g?void 0:g.title)||"Content"}),(0,er.jsxs)("button",{onClick:()=>d({isOpen:!0,config:g,initialData:null}),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg font-semibold shadow-md hover:bg-indigo-700 transition-all",children:[(0,er.jsx)(MJ,{size:14})," Add New"]})]}),f.data.length>0?(0,er.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:f.data.map(e=>(0,er.jsx)(UJ,{item:e,type:u,onEdit:e=>d({isOpen:!0,config:g,initialData:e}),onDelete:e=>(async(e,t,r)=>{if(window.confirm("Delete this ".concat(r,"?")))try{const r=e.endsWith("/")?e.slice(0,-1):e;await Ia.delete("".concat(r,"/").concat(t)),Tt.success("Deleted successfully!"),m()}catch(s){var n,a;Tt.error((null===(n=s.response)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.detail)||"Failed to delete ".concat(r))}})(g.endpoint,e,g.title)},e.id))}):(0,er.jsxs)("div",{className:"text-center py-12",children:[(0,er.jsx)("div",{className:"text-gray-400 mb-4",children:(null===(e=p.find(e=>e.key===u))||void 0===e?void 0:e.icon)&&(0,er.jsx)("div",{className:"text-6xl mb-4",children:p.find(e=>e.key===u).icon})}),(0,er.jsxs)("p",{className:"text-gray-500 text-lg mb-2",children:["No ",null===g||void 0===g?void 0:g.title.toLowerCase()," found"]}),(0,er.jsx)("p",{className:"text-gray-400 text-sm",children:'Click "Add New" to create your first item'})]})]}),(0,er.jsx)(qJ,{isOpen:c.isOpen,onClose:()=>d({isOpen:!1,config:null,initialData:null}),onSubmit:(e,t)=>(async(e,t,r,n)=>{const a=t&&t.id,s=a?"".concat(e.endpoint,"/").concat(t.id):e.endpoint,i=a?"put":"post";let o=r;if(e.isMultipart){const e=new FormData;Object.keys(r).forEach(t=>{if("image"!==t){const n=r[t];e.append(t,"boolean"===typeof n?String(n):n)}}),n&&e.append("image",n),o=e}else{const e=Be({},r);void 0!==e.rating&&(e.rating=parseInt(e.rating,10)),void 0!==e.is_active&&(e.is_active=!0===e.is_active||"true"===e.is_active),o=e}try{await Ia({method:i,url:s,data:o}),Tt.success("".concat(e.title," ").concat(a?"updated":"added","!")),d({isOpen:!1,config:null,initialData:null}),m()}catch(u){var l,c;Tt.error((null===(l=u.response)||void 0===l||null===(c=l.data)||void 0===c?void 0:c.detail)||"Failed to save ".concat(e.title))}})(c.config,c.initialData,e,t),fields:(null===(t=c.config)||void 0===t?void 0:t.fields)||[],initialData:c.initialData,title:"".concat(c.initialData?"Edit":"Add"," ").concat(null===(r=c.config)||void 0===r?void 0:r.title),isMultipart:null===(n=c.config)||void 0===n?void 0:n.isMultipart})]})})}const VJ=Xh("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),HJ=Xh("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),GJ=Xh("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),KJ=Xh("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),YJ=Xh("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]),XJ=Xh("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),QJ=Xh("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),$J=Xh("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),JJ=Xh("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),ZJ=Xh("Hotel",[["path",{d:"M18 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2Z",key:"p9z69c"}],["path",{d:"m9 16 .348-.24c1.465-1.013 3.84-1.013 5.304 0L15 16",key:"1bvcvh"}],["path",{d:"M8 7h.01",key:"1vti4s"}],["path",{d:"M16 7h.01",key:"1kdx03"}],["path",{d:"M12 7h.01",key:"1ivr5q"}],["path",{d:"M12 11h.01",key:"z322tv"}],["path",{d:"M16 11h.01",key:"xkw8gn"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M10 22v-6.5m4 0V22",key:"16gs4s"}]]),eZ=Xh("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),tZ=e=>{let{title:t,icon:r,children:n,loading:a,count:s,className:i=""}=e;return(0,er.jsxs)(Fh.div,{className:"bg-white rounded-2xl shadow-lg p-6 flex flex-col ".concat(i),initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:[(0,er.jsxs)("div",{className:"flex items-center justify-between mb-4 border-b border-gray-200 pb-3",children:[(0,er.jsxs)("div",{className:"flex items-center",children:[r,(0,er.jsx)("h2",{className:"text-xl font-bold text-gray-800 ml-3",children:t})]}),!a&&void 0!==s&&(0,er.jsxs)("span",{className:"text-sm font-bold bg-indigo-100 text-indigo-700 px-2 py-1 rounded-full",children:[s," Records"]}),a&&(0,er.jsx)("div",{className:"h-6 w-20 bg-gray-200 rounded-full animate-pulse"})]}),(0,er.jsx)("div",{className:"overflow-auto max-h-96",children:a?(0,er.jsxs)("div",{className:"space-y-2 mt-2",children:[(0,er.jsx)("div",{className:"h-8 bg-gray-200 rounded animate-pulse"}),(0,er.jsx)("div",{className:"h-8 bg-gray-200 rounded animate-pulse"}),(0,er.jsx)("div",{className:"h-8 bg-gray-200 rounded animate-pulse"})]}):n})]})},rZ=e=>{let{headers:t,data:r,renderRow:n,emptyMessage:a="No data available"}=e;return r&&0!==r.length?(0,er.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,er.jsx)("thead",{className:"text-gray-600 uppercase tracking-wider bg-gray-50 sticky top-0",children:(0,er.jsx)("tr",{children:t.map(e=>(0,er.jsx)("th",{className:"p-3",children:e},e))})}),(0,er.jsx)("tbody",{className:"divide-y divide-gray-200",children:r.map((e,t)=>n(e,t))})]}):(0,er.jsx)("div",{className:"text-center py-8 text-gray-500",children:a})},nZ=e=>{if(!e)return"-";try{return y$(e)}catch(t){return e}},aZ=e=>{if(!e)return"-";try{if("string"===typeof e&&/^\d{2}:\d{2}:\d{2}/.test(e)){const t=e.split(":");return"".concat(t[0],":").concat(t[1])}const t=new Date(e);return isNaN(t.getTime())?e:t.toLocaleString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch(t){return e}},sZ=e=>{if(!e)return"-";try{if("string"===typeof e&&/^\d{2}:\d{2}:\d{2}/.test(e)){const t=e.split(":");return"".concat(t[0],":").concat(t[1])}const t=new Date(e);return isNaN(t.getTime())?e:t.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})}catch(t){return e}},iZ=e=>{let{filters:t,onFilterChange:r,onClear:n}=e;return(0,er.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-md mb-6",children:(0,er.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[t.map((e,t)=>{var n;return(0,er.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,er.jsx)("label",{htmlFor:e.id,className:"block text-sm font-medium text-gray-700 mb-1",children:e.label}),"date"===e.type?(0,er.jsx)("input",{type:"date",id:e.id,value:e.value||"",onChange:t=>r(e.id,t.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"}):"select"===e.type?(0,er.jsxs)("select",{id:e.id,value:e.value||"",onChange:t=>r(e.id,t.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",children:[(0,er.jsx)("option",{value:"",children:"All"}),null===(n=e.options)||void 0===n?void 0:n.map(e=>(0,er.jsx)("option",{value:e.value,children:e.label},e.value))]}):(0,er.jsx)("input",{type:"text",id:e.id,value:e.value||"",onChange:t=>r(e.id,t.target.value),placeholder:e.placeholder,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"})]},t)}),n&&(0,er.jsx)("button",{onClick:n,className:"mt-6 px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-gray-600 hover:bg-gray-700",children:"Clear"})]})})};function oZ(){var e;const[t,r]=(0,a.useState)("front-office"),[n,s]=(0,a.useState)(null),[i,o]=(0,a.useState)(!1),[l,c]=(0,a.useState)(null),[d,u]=(0,a.useState)(null),[h,m]=(0,a.useState)({}),p={"front-office":[{id:"daily-arrival",name:"Daily Arrival Report",icon:n$,endpoint:"/reports/front-office/daily-arrival"},{id:"daily-departure",name:"Daily Departure Report",icon:n$,endpoint:"/reports/front-office/daily-departure"},{id:"occupancy",name:"Occupancy Report",icon:V$,endpoint:"/reports/front-office/occupancy"},{id:"police-c-form",name:"Police / C-Form Report",icon:mJ,endpoint:"/reports/front-office/police-c-form"},{id:"night-audit",name:"Night Audit Report",icon:VJ,endpoint:"/reports/front-office/night-audit"},{id:"no-show-cancellation",name:"No-Show & Cancellation",icon:Gq,endpoint:"/reports/front-office/no-show-cancellation"},{id:"in-house-guests",name:"In-House Guest List",icon:om,endpoint:"/reports/front-office/in-house-guests"}],restaurant:[{id:"daily-sales-summary",name:"Daily Sales Summary",icon:HJ,endpoint:"/reports/restaurant/daily-sales-summary"},{id:"item-wise-sales",name:"Item-wise Sales Report",icon:nJ,endpoint:"/reports/restaurant/item-wise-sales"},{id:"kot-analysis",name:"KOT Analysis",icon:VJ,endpoint:"/reports/restaurant/kot-analysis"},{id:"void-cancellation",name:"Void / Cancellation Report",icon:Gq,endpoint:"/reports/restaurant/void-cancellation"},{id:"discount-complimentary",name:"Discount & Complimentary",icon:GJ,endpoint:"/reports/restaurant/discount-complimentary"},{id:"nc-report",name:"NC (Non-Chargeable) Report",icon:am,endpoint:"/reports/restaurant/nc-report"}],inventory:[{id:"stock-status",name:"Stock Status Report",icon:Zh,endpoint:"/reports/inventory/stock-status"},{id:"low-stock-alert",name:"Low Stock Alert Report",icon:gJ,endpoint:"/reports/inventory/low-stock-alert"},{id:"expiry-aging",name:"Expiry / Aging Report",icon:KJ,endpoint:"/reports/inventory/expiry-aging"},{id:"stock-movement",name:"Stock Movement Register",icon:nJ,endpoint:"/reports/inventory/stock-movement"},{id:"waste-spoilage",name:"Waste & Spoilage Report",icon:Gq,endpoint:"/reports/inventory/waste-spoilage"},{id:"purchase-register",name:"Purchase Register",icon:sJ,endpoint:"/reports/inventory/purchase-register"},{id:"variance",name:"Variance Report",icon:YJ,endpoint:"/reports/inventory/variance"}],housekeeping:[{id:"room-discrepancy",name:"Room Discrepancy Report",icon:KJ,endpoint:"/reports/housekeeping/room-discrepancy"},{id:"laundry-cost",name:"Laundry Cost Report",icon:Qh,endpoint:"/reports/housekeeping/laundry-cost"},{id:"minibar-consumption",name:"Minibar Consumption",icon:Zh,endpoint:"/reports/housekeeping/minibar-consumption"},{id:"lost-found",name:"Lost & Found Register",icon:XJ,endpoint:"/reports/housekeeping/lost-found"},{id:"maintenance-tickets",name:"Maintenance Ticket Log",icon:QJ,endpoint:"/reports/housekeeping/maintenance-tickets"},{id:"asset-audit",name:"Asset Audit Report",icon:YJ,endpoint:"/reports/housekeeping/asset-audit"}],"security-hr":[{id:"visitor-log",name:"Visitor Log",icon:om,endpoint:"/reports/security/visitor-log"},{id:"staff-attendance",name:"Staff Attendance",icon:$J,endpoint:"/reports/hr/staff-attendance"},{id:"payroll-register",name:"Payroll Register",icon:JJ,endpoint:"/reports/hr/payroll-register"}],gst:[{id:"master-gst-summary",name:"Master GST Summary",icon:HJ,endpoint:"/gst-reports/master-summary"},{id:"gstr-1-sales",name:"Sales (GSTR-1)",icon:nJ,endpoint:"/gst-reports/b2b-sales"},{id:"itc-register",name:"Purchases (ITC Register)",icon:sJ,endpoint:"/gst-reports/itc-register"},{id:"rcm-register",name:"RCM Register",icon:am,endpoint:"/gst-reports/rcm-register"}]},f=[{id:"front-office",name:"Front Office",icon:ZJ,color:"blue"},{id:"restaurant",name:"Restaurant (F&B)",icon:H$,color:"orange"},{id:"inventory",name:"Inventory & Purchase",icon:Zh,color:"purple"},{id:"housekeeping",name:"Housekeeping & Facility",icon:Qh,color:"green"},{id:"security-hr",name:"Security & HR",icon:eZ,color:"red"},{id:"gst",name:"GST Reports",icon:mJ,color:"indigo"}],g=async e=>{try{o(!0),c(null);const t=Be({},h);t.report_date&&(t.report_date=t.report_date),t.start_date&&(t.start_date=t.start_date),t.end_date&&(t.end_date=t.end_date),t.from_date&&(t.from_date=t.from_date),t.to_date&&(t.to_date=t.to_date),t.month&&(t.month=parseInt(t.month)),t.year&&(t.year=parseInt(t.year));const r=await Ia.get(e.endpoint,{params:t});u(r.data)}catch(n){var t,r;console.error("Failed to fetch report:",n),c((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||n.message||"Failed to load report data. Please try again."),u(null)}finally{o(!1)}},x=()=>{if(!n)return[];const e=n.id,t=[];if(e.includes("daily")||"occupancy"===e||"night-audit"===e?t.push({id:"report_date",label:"Report Date",type:"date",value:h.report_date||(new Date).toISOString().split("T")[0]}):"low-stock-alert"!==e&&"room-discrepancy"!==e&&t.push({id:"start_date",label:"From Date",type:"date",value:h.start_date||""},{id:"end_date",label:"To Date",type:"date",value:h.end_date||""}),"expiry-aging"===e&&t.push({id:"days_ahead",label:"Days Ahead",type:"text",value:h.days_ahead||"3",placeholder:"3"}),"payroll-register"===e){const e=new Date;t.push({id:"month",label:"Month",type:"number",value:h.month||e.getMonth()+1,placeholder:"1-12",min:1,max:12}),t.push({id:"year",label:"Year",type:"number",value:h.year||e.getFullYear(),placeholder:"YYYY",min:2020,max:2100})}return t},y=(e,t)=>{var r,a,s,o,c,d,u,m,p,f,g,x,y,v,b,j;switch(e){case"daily-arrival":const e=Array.isArray(t)?t:(null===t||void 0===t?void 0:t.arrivals)||[],w=Array.isArray(t)?t.length:(null===t||void 0===t?void 0:t.total)||0,N=(null===t||void 0===t?void 0:t.date)||h.report_date||(new Date).toISOString().split("T")[0];return(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,er.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,er.jsx)("strong",{children:"Report Date:"})," ",new Date(N).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})]}),0===w&&(0,er.jsx)("p",{className:"text-sm text-blue-600 mt-2",children:"No arrivals found for this date. Try selecting a different date."})]}),(0,er.jsx)(tZ,{title:"Daily Arrival Report",icon:(0,er.jsx)(n$,{className:"text-blue-600"}),loading:i,count:w,children:(0,er.jsx)(rZ,{headers:["Guest Name","Mobile","Room","Room Type","Adults","Children","Advance Paid","Total Amount","Type"],data:e,emptyMessage:"No arrivals found for the selected date",renderRow:(e,t)=>(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsx)("td",{className:"p-3 font-semibold",children:e.guest_name}),(0,er.jsx)("td",{className:"p-3",children:e.guest_mobile||"-"}),(0,er.jsx)("td",{className:"p-3",children:e.room_number}),(0,er.jsx)("td",{className:"p-3",children:e.room_type}),(0,er.jsx)("td",{className:"p-3",children:e.adults}),(0,er.jsx)("td",{className:"p-3",children:e.children}),(0,er.jsx)("td",{className:"p-3",children:ym(e.advance_paid)}),(0,er.jsx)("td",{className:"p-3",children:ym(e.total_amount)}),(0,er.jsx)("td",{className:"p-3",children:(0,er.jsx)("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800",children:e.booking_type})})]},t)})})]});case"daily-departure":return(0,er.jsx)(tZ,{title:"Daily Departure Report",icon:(0,er.jsx)(n$,{className:"text-blue-600"}),loading:i,count:t.total,children:(0,er.jsx)(rZ,{headers:["Room","Guest Name","Checkout Time","Room Total","Food Total","Service Total","Grand Total","Balance Pending"],data:t.departures||[],renderRow:(e,t)=>(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsx)("td",{className:"p-3 font-semibold",children:e.room_number}),(0,er.jsx)("td",{className:"p-3",children:e.guest_name}),(0,er.jsx)("td",{className:"p-3",children:aZ(e.checkout_time)}),(0,er.jsx)("td",{className:"p-3",children:ym(e.room_total)}),(0,er.jsx)("td",{className:"p-3",children:ym(e.food_total)}),(0,er.jsx)("td",{className:"p-3",children:ym(e.service_total)}),(0,er.jsx)("td",{className:"p-3 font-semibold",children:ym(e.grand_total)}),(0,er.jsx)("td",{className:"p-3",children:(0,er.jsx)("span",{className:e.balance_pending>0?"text-red-600 font-bold":"text-green-600",children:ym(e.balance_pending)})})]},t)})});case"occupancy":return(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,er.jsx)(tZ,{title:"Total Rooms",icon:(0,er.jsx)(V$,{className:"text-indigo-600"}),count:t.total_rooms}),(0,er.jsx)(tZ,{title:"Occupied Rooms",icon:(0,er.jsx)(V$,{className:"text-green-600"}),count:t.occupied_rooms}),(0,er.jsx)(tZ,{title:"Vacant Rooms",icon:(0,er.jsx)(V$,{className:"text-blue-600"}),count:t.vacant_rooms}),(0,er.jsx)(tZ,{title:"Occupancy %",icon:(0,er.jsx)(nJ,{className:"text-purple-600"}),count:"".concat(t.occupancy_percentage,"%")})]});case"night-audit":return(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,er.jsx)(tZ,{title:"Revenue Summary",icon:(0,er.jsx)(a$,{className:"text-green-600"}),children:(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsxs)("div",{className:"flex justify-between",children:[(0,er.jsx)("span",{className:"text-gray-600",children:"Room Revenue:"}),(0,er.jsx)("span",{className:"font-semibold",children:ym(t.room_revenue)})]}),(0,er.jsxs)("div",{className:"flex justify-between",children:[(0,er.jsx)("span",{className:"text-gray-600",children:"Food & Beverage:"}),(0,er.jsx)("span",{className:"font-semibold",children:ym(t.food_beverage_revenue)})]}),(0,er.jsxs)("div",{className:"flex justify-between",children:[(0,er.jsx)("span",{className:"text-gray-600",children:"Service Revenue:"}),(0,er.jsx)("span",{className:"font-semibold",children:ym(t.service_revenue)})]}),(0,er.jsxs)("div",{className:"flex justify-between",children:[(0,er.jsx)("span",{className:"text-gray-600",children:"Tax Collected:"}),(0,er.jsx)("span",{className:"font-semibold",children:ym(t.tax_collected)})]}),(0,er.jsxs)("div",{className:"flex justify-between border-t pt-2",children:[(0,er.jsx)("span",{className:"text-gray-800 font-bold",children:"Total Revenue:"}),(0,er.jsx)("span",{className:"text-indigo-600 font-bold text-lg",children:ym(t.total_revenue)})]})]})}),(0,er.jsx)(tZ,{title:"Checkouts",icon:(0,er.jsx)(om,{className:"text-blue-600"}),count:t.checkouts_count})]});case"daily-sales-summary":return(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,er.jsx)(tZ,{title:"Sales by Category",icon:(0,er.jsx)(HJ,{className:"text-orange-600"}),children:(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsxs)("div",{className:"flex justify-between",children:[(0,er.jsx)("span",{className:"text-gray-600",children:"Food Sales:"}),(0,er.jsx)("span",{className:"font-semibold",children:ym(t.food_sales)})]}),(0,er.jsxs)("div",{className:"flex justify-between",children:[(0,er.jsx)("span",{className:"text-gray-600",children:"Beverage Sales:"}),(0,er.jsx)("span",{className:"font-semibold",children:ym(t.beverage_sales)})]}),(0,er.jsxs)("div",{className:"flex justify-between",children:[(0,er.jsx)("span",{className:"text-gray-600",children:"Alcohol Sales:"}),(0,er.jsx)("span",{className:"font-semibold",children:ym(t.alcohol_sales)})]}),(0,er.jsxs)("div",{className:"flex justify-between border-t pt-2",children:[(0,er.jsx)("span",{className:"text-gray-800 font-bold",children:"Total Sales:"}),(0,er.jsx)("span",{className:"text-indigo-600 font-bold text-lg",children:ym(t.total_sales)})]})]})}),(0,er.jsx)(tZ,{title:"Sales by Meal Period",icon:(0,er.jsx)(VJ,{className:"text-purple-600"}),children:(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsxs)("div",{className:"flex justify-between",children:[(0,er.jsx)("span",{className:"text-gray-600",children:"Breakfast:"}),(0,er.jsx)("span",{className:"font-semibold",children:ym(t.breakfast_sales)})]}),(0,er.jsxs)("div",{className:"flex justify-between",children:[(0,er.jsx)("span",{className:"text-gray-600",children:"Lunch:"}),(0,er.jsx)("span",{className:"font-semibold",children:ym(t.lunch_sales)})]}),(0,er.jsxs)("div",{className:"flex justify-between",children:[(0,er.jsx)("span",{className:"text-gray-600",children:"Dinner:"}),(0,er.jsx)("span",{className:"font-semibold",children:ym(t.dinner_sales)})]})]})})]});case"item-wise-sales":return(0,er.jsx)(tZ,{title:"Item-wise Sales Report",icon:(0,er.jsx)(nJ,{className:"text-orange-600"}),loading:i,count:t.total_items,children:(0,er.jsx)(rZ,{headers:["Item Name","Total Quantity","Total Revenue"],data:t.items||[],renderRow:(e,t)=>(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsx)("td",{className:"p-3 font-semibold",children:e.item_name}),(0,er.jsx)("td",{className:"p-3",children:e.total_quantity}),(0,er.jsx)("td",{className:"p-3 font-semibold",children:ym(e.total_revenue)})]},t)})});case"discount-complimentary":const _=(null===t||void 0===t?void 0:t.discounts_complimentary)||[],k=(null===t||void 0===t?void 0:t.total)||0,S=(null===t||void 0===t?void 0:t.total_complimentary_amount)||0,A=(null===t||void 0===t?void 0:t.total_discount_amount)||0,C=(null===t||void 0===t?void 0:t.complimentary_count)||0,E=(null===t||void 0===t?void 0:t.discount_count)||0;return(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsxs)("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[(0,er.jsxs)("p",{className:"text-sm text-orange-800",children:[(0,er.jsx)("strong",{children:"Manager Approval Tracking:"})," This report tracks all discounted and complimentary meals for audit purposes."]}),(null===t||void 0===t?void 0:t.date_range)&&(0,er.jsxs)("p",{className:"text-sm text-orange-700 mt-1",children:["Date Range: ",t.date_range.start?nZ(t.date_range.start):"All"," - ",t.date_range.end?nZ(t.date_range.end):"All"]}),(0,er.jsxs)("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("span",{className:"font-semibold",children:"Total Records: "}),(0,er.jsx)("span",{className:"text-orange-600",children:k})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("span",{className:"font-semibold",children:"Complimentary: "}),(0,er.jsxs)("span",{className:"text-red-600",children:[C," (",ym(S),")"]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("span",{className:"font-semibold",children:"Discounted: "}),(0,er.jsxs)("span",{className:"text-orange-600",children:[E," (",ym(A),")"]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("span",{className:"font-semibold",children:"Total Value: "}),(0,er.jsx)("span",{className:"text-orange-600",children:ym(S+A)})]})]})]}),(0,er.jsx)(tZ,{title:"Discount & Complimentary Report",icon:(0,er.jsx)(GJ,{className:"text-orange-600"}),loading:i,count:k,children:(0,er.jsx)(rZ,{headers:["Order ID","Room","Guest","Order Date/Time","Original Amount","Discount","Final Amount","Items","Employee","Type","Reason"],data:_,emptyMessage:"No discounted or complimentary orders found",renderRow:(e,t)=>(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsxs)("td",{className:"p-3 font-semibold",children:["#",e.order_id]}),(0,er.jsx)("td",{className:"p-3",children:e.room_number}),(0,er.jsx)("td",{className:"p-3",children:e.guest_name||"-"}),(0,er.jsx)("td",{className:"p-3",children:(0,er.jsx)("div",{className:"text-sm",children:(0,er.jsx)("div",{children:e.order_time?aZ(e.order_time):"-"})})}),(0,er.jsx)("td",{className:"p-3",children:ym(e.original_amount)}),(0,er.jsx)("td",{className:"p-3",children:(0,er.jsx)("span",{className:"font-semibold ".concat(e.is_complimentary?"text-red-600":"text-orange-600"),children:ym(e.discount_amount)})}),(0,er.jsx)("td",{className:"p-3 font-semibold",children:ym(e.final_amount)}),(0,er.jsx)("td",{className:"p-3",children:(0,er.jsxs)("div",{className:"text-sm",children:[(0,er.jsxs)("div",{className:"font-medium",children:[e.items_count," items"]}),e.items_detail&&"N/A"!==e.items_detail&&(0,er.jsx)("div",{className:"text-xs text-gray-500 mt-1 max-w-xs truncate",title:e.items_detail,children:e.items_detail})]})}),(0,er.jsx)("td",{className:"p-3",children:e.employee_name}),(0,er.jsx)("td",{className:"p-3",children:(0,er.jsx)("span",{className:"px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-800",children:"room_service"===e.order_type?"Room Service":"Dine-in"})}),(0,er.jsx)("td",{className:"p-3",children:(0,er.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat(e.is_complimentary?"bg-red-100 text-red-800":"bg-orange-100 text-orange-800"),children:e.reason||(e.is_complimentary?"Complimentary":"Discount")})})]},t)})})]});case"void-cancellation":const T=(null===t||void 0===t?void 0:t.voided_orders)||[],P=(null===t||void 0===t?void 0:t.total)||0,O=(null===t||void 0===t?void 0:t.total_amount)||0;return(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,er.jsxs)("p",{className:"text-sm text-red-800",children:[(0,er.jsx)("strong",{children:"Security Report:"})," This report tracks all voided and cancelled food orders to prevent theft and track discrepancies."]}),(null===t||void 0===t?void 0:t.date_range)&&(0,er.jsxs)("p",{className:"text-sm text-red-700 mt-1",children:["Date Range: ",t.date_range.start?nZ(t.date_range.start):"All"," - ",t.date_range.end?nZ(t.date_range.end):"All"]}),(0,er.jsxs)("div",{className:"mt-2 flex gap-4 text-sm",children:[(0,er.jsxs)("span",{className:"font-semibold",children:["Total Voided Orders: ",(0,er.jsx)("span",{className:"text-red-600",children:P})]}),(0,er.jsxs)("span",{className:"font-semibold",children:["Total Amount: ",(0,er.jsx)("span",{className:"text-red-600",children:ym(O)})]})]})]}),(0,er.jsx)(tZ,{title:"Void / Cancellation Report",icon:(0,er.jsx)(Gq,{className:"text-red-600"}),loading:i,count:P,children:(0,er.jsx)(rZ,{headers:["Order ID","Room","Guest","Order Date/Time","Amount","Items","Employee","Status","Type"],data:T,emptyMessage:"No voided or cancelled orders found",renderRow:(e,t)=>(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsxs)("td",{className:"p-3 font-semibold",children:["#",e.order_id]}),(0,er.jsx)("td",{className:"p-3",children:e.room_number}),(0,er.jsx)("td",{className:"p-3",children:e.guest_name||"-"}),(0,er.jsx)("td",{className:"p-3",children:(0,er.jsx)("div",{className:"text-sm",children:(0,er.jsx)("div",{children:e.order_time?aZ(e.order_time):"-"})})}),(0,er.jsx)("td",{className:"p-3 font-semibold text-red-600",children:ym(e.amount)}),(0,er.jsx)("td",{className:"p-3",children:(0,er.jsxs)("div",{className:"text-sm",children:[(0,er.jsxs)("div",{className:"font-medium",children:[e.items_count," items"]}),e.items_detail&&"N/A"!==e.items_detail&&(0,er.jsx)("div",{className:"text-xs text-gray-500 mt-1 max-w-xs truncate",title:e.items_detail,children:e.items_detail})]})}),(0,er.jsx)("td",{className:"p-3",children:e.employee_name}),(0,er.jsx)("td",{className:"p-3",children:(0,er.jsx)("span",{className:"px-2 py-1 text-xs rounded-full bg-red-100 text-red-800",children:e.status})}),(0,er.jsx)("td",{className:"p-3",children:(0,er.jsx)("span",{className:"px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-800",children:"room_service"===e.order_type?"Room Service":"Dine-in"})})]},t)})})]});case"nc-report":const D=(null===t||void 0===t?void 0:t.nc_orders)||[],I=(null===t||void 0===t?void 0:t.total)||0,L=(null===t||void 0===t?void 0:t.total_value)||0;return(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsxs)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[(0,er.jsxs)("p",{className:"text-sm text-purple-800",children:[(0,er.jsx)("strong",{children:"Non-Chargeable Report:"})," This report tracks food given to staff or owners (No revenue, but inventory reduced)."]}),(null===t||void 0===t?void 0:t.date_range)&&(0,er.jsxs)("p",{className:"text-sm text-purple-700 mt-1",children:["Date Range: ",t.date_range.start?nZ(t.date_range.start):"All"," - ",t.date_range.end?nZ(t.date_range.end):"All"]}),(0,er.jsxs)("div",{className:"mt-2 flex gap-4 text-sm",children:[(0,er.jsxs)("span",{className:"font-semibold",children:["Total Orders: ",(0,er.jsx)("span",{className:"text-purple-600",children:I})]}),(0,er.jsxs)("span",{className:"font-semibold",children:["Total Inventory Value: ",(0,er.jsx)("span",{className:"text-purple-600",children:ym(L)})]})]})]}),(0,er.jsx)(tZ,{title:"NC (Non-Chargeable) Report",icon:(0,er.jsx)(am,{className:"text-purple-600"}),loading:i,count:I,children:(0,er.jsx)(rZ,{headers:["Order ID","Recipient","Type","Room","Order Date/Time","Items","Total Value","Employee","Status"],data:D,emptyMessage:"No non-chargeable orders found",renderRow:(e,t)=>(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsxs)("td",{className:"p-3 font-semibold",children:["#",e.order_id]}),(0,er.jsx)("td",{className:"p-3",children:(0,er.jsxs)("div",{children:[(0,er.jsx)("div",{className:"font-medium",children:e.recipient_name}),(0,er.jsx)("div",{className:"text-xs text-gray-500",children:e.recipient_type})]})}),(0,er.jsx)("td",{className:"p-3",children:(0,er.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat("Staff"===e.recipient_type?"bg-blue-100 text-blue-800":"Staff/Owner"===e.recipient_type?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"),children:e.recipient_type})}),(0,er.jsx)("td",{className:"p-3",children:e.room_number}),(0,er.jsx)("td",{className:"p-3",children:(0,er.jsx)("div",{className:"text-sm",children:(0,er.jsx)("div",{children:e.order_time?aZ(e.order_time):"-"})})}),(0,er.jsx)("td",{className:"p-3",children:(0,er.jsxs)("div",{className:"text-sm",children:[(0,er.jsxs)("div",{className:"font-medium",children:[e.items_count," items"]}),e.items&&e.items.length>0&&(0,er.jsxs)("div",{className:"text-xs text-gray-500 mt-1 max-w-xs",children:[e.items.slice(0,2).map((e,t)=>(0,er.jsxs)("div",{title:"".concat(e.item_name," x").concat(e.quantity),children:[e.item_name," (x",e.quantity,")"]},t)),e.items.length>2&&(0,er.jsxs)("div",{children:["+",e.items.length-2," more"]})]})]})}),(0,er.jsx)("td",{className:"p-3 font-semibold text-purple-600",children:ym(e.total_value)}),(0,er.jsx)("td",{className:"p-3",children:e.employee_name}),(0,er.jsx)("td",{className:"p-3",children:(0,er.jsx)("span",{className:"px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-800",children:e.billing_status})})]},t)})})]});case"stock-status":return(0,er.jsx)(tZ,{title:"Stock Status Report",icon:(0,er.jsx)(Zh,{className:"text-purple-600"}),loading:i,count:t.total,children:(0,er.jsx)(rZ,{headers:["Item Name","Item Code","Category","Current Stock","Unit Price","Stock Value","Status"],data:t.stock_status||[],renderRow:(e,t)=>(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsx)("td",{className:"p-3 font-semibold",children:e.item_name}),(0,er.jsx)("td",{className:"p-3",children:e.item_code}),(0,er.jsx)("td",{className:"p-3",children:e.category}),(0,er.jsxs)("td",{className:"p-3",children:[e.current_stock," ",e.unit]}),(0,er.jsx)("td",{className:"p-3",children:ym(e.unit_price)}),(0,er.jsx)("td",{className:"p-3 font-semibold",children:ym(e.stock_value)}),(0,er.jsx)("td",{className:"p-3",children:(0,er.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat("Low Stock"===e.status?"bg-red-100 text-red-800":"bg-green-100 text-green-800"),children:e.status})})]},t)})});case"low-stock-alert":return(0,er.jsx)(tZ,{title:"Low Stock Alert Report",icon:(0,er.jsx)(gJ,{className:"text-red-600"}),loading:i,count:t.total,children:(0,er.jsx)(rZ,{headers:["Item Name","Item Code","Category","Current Stock","Min Level","Shortage","Urgency","Preferred Vendor"],data:t.low_stock_items||[],renderRow:(e,t)=>(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsx)("td",{className:"p-3 font-semibold",children:e.item_name}),(0,er.jsx)("td",{className:"p-3",children:e.item_code}),(0,er.jsx)("td",{className:"p-3",children:e.category}),(0,er.jsxs)("td",{className:"p-3",children:[e.current_stock," ",e.unit]}),(0,er.jsxs)("td",{className:"p-3",children:[e.min_stock_level," ",e.unit]}),(0,er.jsxs)("td",{className:"p-3 text-red-600 font-semibold",children:[e.shortage," ",e.unit]}),(0,er.jsx)("td",{className:"p-3",children:(0,er.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat("Critical"===e.urgency?"bg-red-100 text-red-800":"bg-orange-100 text-orange-800"),children:e.urgency})}),(0,er.jsx)("td",{className:"p-3",children:e.preferred_vendor})]},t)})});case"visitor-log":const M=(null===t||void 0===t?void 0:t.visitors)||[],R=(null===t||void 0===t?void 0:t.total)||0;return(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsxs)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[(0,er.jsxs)("p",{className:"text-sm text-purple-800",children:[(0,er.jsx)("strong",{children:"Visitor Log:"})," This report tracks all visitors (guests and service visitors) based on check-in/checkout data."]}),(null===t||void 0===t?void 0:t.date_range)&&(0,er.jsxs)("p",{className:"text-sm text-purple-700 mt-1",children:["Date Range: ",t.date_range.start?nZ(t.date_range.start):"All"," - ",t.date_range.end?nZ(t.date_range.end):"All"]})]}),(0,er.jsx)(tZ,{title:"Visitor Log",icon:(0,er.jsx)(om,{className:"text-purple-600"}),loading:i,count:R,children:(0,er.jsx)(rZ,{headers:["Visitor Name","Mobile","Email","Purpose","Time In","Time Out","Room Visited","Host","Duration","Type"],data:M,emptyMessage:"No visitors found",renderRow:(e,t)=>(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsx)("td",{className:"p-3 font-semibold",children:e.visitor_name}),(0,er.jsx)("td",{className:"p-3",children:e.visitor_mobile||"-"}),(0,er.jsx)("td",{className:"p-3",children:e.visitor_email||"-"}),(0,er.jsx)("td",{className:"p-3",children:e.purpose||"-"}),(0,er.jsx)("td",{className:"p-3",children:e.time_in?aZ(e.time_in):"-"}),(0,er.jsx)("td",{className:"p-3",children:e.time_out?aZ(e.time_out):"-"}),(0,er.jsx)("td",{className:"p-3",children:e.room_visited||"-"}),(0,er.jsx)("td",{className:"p-3",children:e.host_name||"-"}),(0,er.jsx)("td",{className:"p-3",children:e.duration_days?"".concat(e.duration_days," days"):"-"}),(0,er.jsx)("td",{className:"p-3",children:(0,er.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat("Package"===e.booking_type?"bg-purple-100 text-purple-800":"Service Request"===e.booking_type?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"),children:e.booking_type||"Regular"})})]},t)})})]});case"staff-attendance":const F=(null===t||void 0===t?void 0:t.attendance_logs)||[],B=(null===t||void 0===t?void 0:t.total)||0;return(0,er.jsxs)("div",{className:"space-y-4",children:[(null===t||void 0===t?void 0:t.date_range)&&(0,er.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,er.jsxs)("p",{className:"text-sm text-blue-800",children:["Date Range: ",t.date_range.start?nZ(t.date_range.start):"All"," - ",t.date_range.end?nZ(t.date_range.end):"All"]})}),(0,er.jsx)(tZ,{title:"Staff Attendance Report",icon:(0,er.jsx)($J,{className:"text-blue-600"}),loading:i,count:B,children:(0,er.jsx)(rZ,{headers:["Employee Name","Code","Date","Check In","Check Out","Hours Worked","Location","Services","Status"],data:F,emptyMessage:"No attendance records found",renderRow:(e,t)=>(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsx)("td",{className:"p-3 font-semibold",children:e.employee_name}),(0,er.jsx)("td",{className:"p-3 text-sm text-gray-500",children:e.employee_code||"-"}),(0,er.jsx)("td",{className:"p-3",children:e.date?nZ(e.date):"-"}),(0,er.jsx)("td",{className:"p-3",children:e.check_in_time?sZ(e.check_in_time):"-"}),(0,er.jsx)("td",{className:"p-3",children:e.check_out_time?sZ(e.check_out_time):"-"}),(0,er.jsx)("td",{className:"p-3 font-semibold",children:null!==e.hours_worked&&void 0!==e.hours_worked?"".concat(e.hours_worked," hrs"):"-"}),(0,er.jsx)("td",{className:"p-3",children:e.location||"-"}),(0,er.jsx)("td",{className:"p-3",children:e.services_assigned||0}),(0,er.jsx)("td",{className:"p-3",children:(0,er.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat("Present"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.status||"-"})})]},t)})})]});case"payroll-register":const z=(null===t||void 0===t?void 0:t.payroll)||[],U=(null===t||void 0===t?void 0:t.total)||0,q=(null===t||void 0===t?void 0:t.total_payroll)||0;return(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsxs)("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:[(0,er.jsxs)("p",{className:"text-sm text-indigo-800",children:[(0,er.jsx)("strong",{children:"Payroll Register:"})," Salary calculation based on attendance, overtime, and leave deductions."]}),(null===t||void 0===t?void 0:t.month_name)&&(0,er.jsxs)("p",{className:"text-sm text-indigo-700 mt-1",children:["Period: ",t.month_name]}),(0,er.jsxs)("div",{className:"mt-2 flex gap-4 text-sm",children:[(0,er.jsxs)("span",{className:"font-semibold",children:["Total Employees: ",(0,er.jsx)("span",{className:"text-indigo-600",children:U})]}),(0,er.jsxs)("span",{className:"font-semibold",children:["Total Payroll: ",(0,er.jsx)("span",{className:"text-indigo-600",children:ym(q)})]})]})]}),(0,er.jsx)(tZ,{title:"Payroll Register",icon:(0,er.jsx)(JJ,{className:"text-indigo-600"}),loading:i,count:U,children:(0,er.jsx)(rZ,{headers:["Employee Name","Code","Role","Basic Salary","Attendance Days","Total Hours","OT Hours","OT Amount","Leave Days","Leave Deduction","Net Salary"],data:z,emptyMessage:"No payroll data found",renderRow:(e,t)=>(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsx)("td",{className:"p-3 font-semibold",children:e.employee_name}),(0,er.jsx)("td",{className:"p-3 text-sm text-gray-500",children:e.employee_code||"-"}),(0,er.jsx)("td",{className:"p-3",children:e.role||"-"}),(0,er.jsx)("td",{className:"p-3",children:ym(e.basic_salary)}),(0,er.jsx)("td",{className:"p-3",children:e.attendance_days||0}),(0,er.jsxs)("td",{className:"p-3",children:[e.total_hours||0," hrs"]}),(0,er.jsxs)("td",{className:"p-3",children:[e.ot_hours||0," hrs"]}),(0,er.jsx)("td",{className:"p-3 text-orange-600",children:ym(e.ot_amount||0)}),(0,er.jsx)("td",{className:"p-3",children:e.leave_days||0}),(0,er.jsx)("td",{className:"p-3 text-red-600",children:ym(e.leave_deduction||0)}),(0,er.jsx)("td",{className:"p-3 font-bold text-green-600",children:ym(e.net_salary||0)})]},t)})})]});case"in-house-guests":const W=(null===t||void 0===t?void 0:t.in_house_guests)||[],V=(null===t||void 0===t?void 0:t.total)||0;return(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,er.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,er.jsx)("strong",{children:"Emergency Evacuation List:"})," This report lists all currently checked-in guests for emergency purposes."]}),(null===t||void 0===t?void 0:t.date_range)&&(0,er.jsxs)("p",{className:"text-sm text-blue-700 mt-1",children:["Date Range: ",t.date_range.start?nZ(t.date_range.start):"All"," - ",t.date_range.end?nZ(t.date_range.end):"All"]}),0===V&&(0,er.jsx)("p",{className:"text-sm text-blue-600 mt-2",children:'No checked-in guests found. Make sure guests are checked in with status "checked-in".'})]}),(0,er.jsx)(tZ,{title:"In-House Guest List",icon:(0,er.jsx)(om,{className:"text-blue-600"}),loading:i,count:V,children:(0,er.jsx)(rZ,{headers:["Guest Name","Mobile","Email","Room","Check In","Check Out","Adults","Children","Type","Status"],data:W,emptyMessage:"No checked-in guests found",renderRow:(e,t)=>(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsx)("td",{className:"p-3 font-semibold",children:e.guest_name}),(0,er.jsx)("td",{className:"p-3",children:e.guest_mobile||"-"}),(0,er.jsx)("td",{className:"p-3",children:e.guest_email||"-"}),(0,er.jsx)("td",{className:"p-3 font-medium",children:e.room_number||"-"}),(0,er.jsx)("td",{className:"p-3",children:e.check_in?nZ(e.check_in):"-"}),(0,er.jsx)("td",{className:"p-3",children:e.check_out?nZ(e.check_out):"-"}),(0,er.jsx)("td",{className:"p-3",children:e.adults||0}),(0,er.jsx)("td",{className:"p-3",children:e.children||0}),(0,er.jsx)("td",{className:"p-3",children:(0,er.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat("Package"===e.booking_type?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"),children:e.booking_type||"Regular"})}),(0,er.jsx)("td",{className:"p-3",children:(0,er.jsx)("span",{className:"px-2 py-1 text-xs rounded-full bg-green-100 text-green-800",children:e.status||"-"})})]},t)})})]});case"police-c-form":const H=(null===t||void 0===t?void 0:t.foreign_nationals)||[],G=(null===t||void 0===t?void 0:t.total)||0;return(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,er.jsxs)("p",{className:"text-sm text-yellow-800",children:[(0,er.jsx)("strong",{children:"Legal Requirement:"})," This report lists all currently checked-in guests for police/C-form submission."]}),(null===t||void 0===t?void 0:t.date_range)&&(0,er.jsxs)("p",{className:"text-sm text-yellow-700 mt-1",children:["Date Range: ",t.date_range.start?nZ(t.date_range.start):"All"," - ",t.date_range.end?nZ(t.date_range.end):"All"]})]}),(0,er.jsx)(tZ,{title:"Police / C-Form Report",icon:(0,er.jsx)(mJ,{className:"text-red-600"}),loading:i,count:G,children:(0,er.jsx)(rZ,{headers:["Guest Name","Mobile","Email","Check In","Check Out","Rooms","Adults","Children","Passport","Visa","Nationality","Type"],data:H,emptyMessage:"No checked-in guests found",renderRow:(e,t)=>(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsx)("td",{className:"p-3 font-semibold",children:e.guest_name}),(0,er.jsx)("td",{className:"p-3",children:e.guest_mobile||"-"}),(0,er.jsx)("td",{className:"p-3",children:e.guest_email||"-"}),(0,er.jsx)("td",{className:"p-3",children:e.check_in?nZ(e.check_in):"-"}),(0,er.jsx)("td",{className:"p-3",children:e.check_out?nZ(e.check_out):"-"}),(0,er.jsx)("td",{className:"p-3",children:Array.isArray(e.room_numbers)?e.room_numbers.join(", "):e.rooms?e.rooms.join(", "):"-"}),(0,er.jsx)("td",{className:"p-3",children:e.adults||0}),(0,er.jsx)("td",{className:"p-3",children:e.children||0}),(0,er.jsx)("td",{className:"p-3",children:e.passport_number||"-"}),(0,er.jsx)("td",{className:"p-3",children:e.visa_number||"-"}),(0,er.jsx)("td",{className:"p-3",children:e.nationality||"-"}),(0,er.jsx)("td",{className:"p-3",children:(0,er.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat("Package"===e.booking_type?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"),children:e.booking_type||"Regular"})})]},t)})})]});case"lost-found":const K=(null===t||void 0===t?void 0:t.lost_found_items)||[],Y=(null===t||void 0===t?void 0:t.total)||0;return(0,er.jsx)("div",{className:"space-y-4",children:(0,er.jsx)(tZ,{title:"Lost & Found Register",icon:(0,er.jsx)(XJ,{className:"text-green-600"}),loading:i,count:Y,children:(0,er.jsx)(rZ,{headers:["Item Description","Found Date","Found By","Room/Location","Status","Claimed By","Claimed Date","Contact"],data:K,emptyMessage:"No lost & found items recorded",renderRow:(e,t)=>(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsx)("td",{className:"p-3 font-semibold",children:e.item_description||"-"}),(0,er.jsx)("td",{className:"p-3",children:e.found_date?nZ(e.found_date):"-"}),(0,er.jsx)("td",{className:"p-3",children:e.found_by||e.found_by_employee||"-"}),(0,er.jsx)("td",{className:"p-3",children:e.room_number?"Room ".concat(e.room_number):e.location||"-"}),(0,er.jsx)("td",{className:"p-3",children:(0,er.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat("claimed"===e.status?"bg-green-100 text-green-800":"disposed"===e.status?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800"),children:e.status||"found"})}),(0,er.jsx)("td",{className:"p-3",children:e.claimed_by||"-"}),(0,er.jsx)("td",{className:"p-3",children:e.claimed_date?nZ(e.claimed_date):"-"}),(0,er.jsx)("td",{className:"p-3",children:e.claimed_contact||"-"})]},t)})})});case"asset-audit":const X=(null===t||void 0===t?void 0:t.asset_audit)||[],Q=(null===t||void 0===t?void 0:t.total)||0,$=async e=>{try{var t;let r=null;const n=e.mapped_location||e.location;if(n&&e.location_id){const t=await Ia.get("/rooms?skip=0&limit=100"),n=(t.data||[]).find(t=>t.inventory_location_id===e.location_id);n&&(r=n.id)}if(!r){const e=(await Ia.get("/rooms?skip=0&limit=1")).data||[];r=e.length>0?e[0].id:null}if(!r)return void alert("No rooms available. Please create a room first.");const a={room_id:r,request_type:"service",description:"Service request for asset: ".concat(e.asset_name," (").concat(e.asset_code,") at location: ").concat(n||"-")},s=await Ia.post("/service-requests",a);alert("Service request raised successfully! Request ID: ".concat((null===(t=s.data)||void 0===t?void 0:t.id)||"N/A"))}catch(l){var r,n;console.error("Error raising service request:",l);const t=(null===(r=l.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.detail)||l.message||"Failed to raise service request";alert("Error: ".concat(t))}},J=async e=>{try{var t;let r=null;const n=e.mapped_location||e.location;if(n&&e.location_id){const t=await Ia.get("/rooms?skip=0&limit=100"),n=(t.data||[]).find(t=>t.inventory_location_id===e.location_id);n&&(r=n.id)}if(!r){const e=(await Ia.get("/rooms?skip=0&limit=1")).data||[];r=e.length>0?e[0].id:null}if(!r)return void alert("No rooms available. Please create a room first.");const a={room_id:r,request_type:"inventory_audit",description:"Inventory audit required for asset: ".concat(e.asset_name," (").concat(e.asset_code,") at location: ").concat(n||"-",". Status: ").concat(e.status,". Mapped Location: ").concat(e.mapped_location||"N/A",", Actual Location: ").concat(e.actual_location||"N/A")},s=await Ia.post("/service-requests",a);alert("Inventory audit service request created successfully! Request ID: ".concat((null===(t=s.data)||void 0===t?void 0:t.id)||"N/A"))}catch(l){var r,n;console.error("Error raising inventory audit request:",l);const t=(null===(r=l.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.detail)||l.message||"Failed to raise inventory audit request";alert("Error: ".concat(t))}},Z=async e=>{try{let t=null;const r=e.mapped_location||e.location;if(r&&e.location_id){const r=await Ia.get("/rooms?skip=0&limit=100"),n=(r.data||[]).find(t=>t.inventory_location_id===e.location_id);n&&(t=n.id)}if(!t){const e=(await Ia.get("/rooms?skip=0&limit=1")).data||[];t=e.length>0?e[0].id:null}if(!t)return void alert("No rooms available. Please create a room first.");const n={room_id:t,request_type:"maintenance",description:"Maintenance ticket for asset: ".concat(e.asset_name," (").concat(e.asset_code,") at location: ").concat(r||"-",". Status: ").concat(e.status)};await Ia.post("/service-requests",n),alert("Maintenance ticket raised successfully!")}catch(l){console.error("Error raising maintenance ticket:",l),alert("Failed to raise maintenance ticket. Please try again.")}};return(0,er.jsx)("div",{className:"space-y-4",children:(0,er.jsx)(tZ,{title:"Asset Audit Report",icon:(0,er.jsx)(YJ,{className:"text-green-600"}),loading:i,count:Q,children:(0,er.jsx)(rZ,{headers:["Asset Name","Asset Code","Mapped Location","Actual Location","Status","Category","Actions"],data:X,emptyMessage:"No assets found",renderRow:(e,t)=>(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsx)("td",{className:"p-3 font-semibold",children:e.asset_name}),(0,er.jsx)("td",{className:"p-3 font-mono text-sm",children:e.asset_code||"-"}),(0,er.jsx)("td",{className:"p-3",children:e.mapped_location||"-"}),(0,er.jsx)("td",{className:"p-3",children:e.actual_location||"-"}),(0,er.jsx)("td",{className:"p-3",children:(0,er.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat("Match"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.status})}),(0,er.jsx)("td",{className:"p-3",children:e.category||"-"}),(0,er.jsx)("td",{className:"p-3",children:(0,er.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,er.jsx)("button",{onClick:()=>J(e),className:"px-3 py-1 text-xs bg-purple-500 text-white rounded hover:bg-purple-600 transition-colors",title:"Create Inventory Audit Service Request",children:"Audit"}),(0,er.jsx)("button",{onClick:()=>$(e),className:"px-3 py-1 text-xs bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",title:"Raise Service Request",children:"Service"}),(0,er.jsx)("button",{onClick:()=>Z(e),className:"px-3 py-1 text-xs bg-orange-500 text-white rounded hover:bg-orange-600 transition-colors",title:"Raise Maintenance Ticket",children:"Maintenance"})]})})]},t)})})});case"master-gst-summary":return(0,er.jsx)("div",{className:"space-y-6",children:(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,er.jsx)(tZ,{title:"Output Tax Liability",icon:(0,er.jsx)(nJ,{className:"text-red-600"}),children:(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsxs)("div",{className:"flex justify-between",children:[(0,er.jsx)("span",{className:"text-gray-600",children:"Total Sales:"}),(0,er.jsx)("span",{className:"font-semibold",children:ym((null===(r=t.output_tax)||void 0===r?void 0:r.total_taxable_value)||0)})]}),(0,er.jsxs)("div",{className:"flex justify-between border-t pt-2",children:[(0,er.jsx)("span",{className:"text-gray-800 font-bold",children:"Total Output Tax:"}),(0,er.jsx)("span",{className:"text-red-600 font-bold text-lg",children:ym((null===(a=t.output_tax)||void 0===a?void 0:a.total_tax)||0)})]})]})}),(0,er.jsx)(tZ,{title:"Input Tax Credit (ITC)",icon:(0,er.jsx)(sJ,{className:"text-green-600"}),children:(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsxs)("div",{className:"flex justify-between",children:[(0,er.jsx)("span",{className:"text-gray-600",children:"Total Purchases:"}),(0,er.jsx)("span",{className:"font-semibold",children:ym((null===(s=t.input_tax_credit)||void 0===s?void 0:s.total_taxable_value)||0)})]}),(0,er.jsxs)("div",{className:"flex justify-between border-t pt-2",children:[(0,er.jsx)("span",{className:"text-gray-800 font-bold",children:"Total Eligible ITC:"}),(0,er.jsx)("span",{className:"text-green-600 font-bold text-lg",children:ym((null===(o=t.input_tax_credit)||void 0===o?void 0:o.eligible_itc)||0)})]})]})}),(0,er.jsx)(tZ,{title:"Net GST Payable",icon:(0,er.jsx)(a$,{className:"text-blue-600"}),children:(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsxs)("div",{className:"flex justify-between",children:[(0,er.jsx)("span",{className:"text-gray-600",children:"Output Tax:"}),(0,er.jsx)("span",{className:"text-red-600",children:ym((null===(c=t.output_tax)||void 0===c?void 0:c.total_tax)||0)})]}),(0,er.jsxs)("div",{className:"flex justify-between",children:[(0,er.jsx)("span",{className:"text-gray-600",children:"Less: ITC Available:"}),(0,er.jsxs)("span",{className:"text-green-600",children:["(",ym((null===(d=t.input_tax_credit)||void 0===d?void 0:d.eligible_itc)||0),")"]})]}),(0,er.jsxs)("div",{className:"flex justify-between border-t pt-2",children:[(0,er.jsx)("span",{className:"text-gray-800 font-bold",children:"Net Payable (Cash):"}),(0,er.jsx)("span",{className:"text-blue-600 font-bold text-lg",children:ym(t.net_payable||0)})]})]})})]})});case"rcm-register":return(0,er.jsxs)("div",{className:"space-y-6",children:[(0,er.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,er.jsxs)("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:[(0,er.jsx)("h3",{className:"text-sm font-medium text-orange-800 mb-1",children:"Total RCM Liability"}),(0,er.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:ym((null===(u=t.summary)||void 0===u?void 0:u.total_tax_liability)||0)}),(0,er.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:"To be paid in cash"})]}),(0,er.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[(0,er.jsx)("h3",{className:"text-sm font-medium text-blue-800 mb-1",children:"Total Taxable Value"}),(0,er.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:ym((null===(m=t.summary)||void 0===m?void 0:m.total_taxable_value)||0)})]}),(0,er.jsxs)("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[(0,er.jsx)("h3",{className:"text-sm font-medium text-green-800 mb-1",children:"Total Records"}),(0,er.jsx)("p",{className:"text-2xl font-bold text-green-600",children:(null===(p=t.summary)||void 0===p?void 0:p.total_records)||0})]}),(0,er.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[(0,er.jsx)("h3",{className:"text-sm font-medium text-purple-800 mb-1",children:"Total IGST"}),(0,er.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:ym((null===(f=t.summary)||void 0===f?void 0:f.total_igst)||0)})]})]}),(0,er.jsx)("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:(0,er.jsxs)("p",{className:"text-sm text-orange-800",children:[(0,er.jsx)("strong",{children:"Note:"})," Reverse Charge Mechanism (RCM) liability arises on specific goods/services (like GTA, Legal Services) or purchases from unregistered dealers. This liability must be paid in cash, but ITC can be claimed in the same month."]})}),(0,er.jsx)(tZ,{title:"RCM Register",icon:(0,er.jsx)(am,{className:"text-orange-600"}),loading:i,count:null===(g=t.summary)||void 0===g?void 0:g.total_records,children:(0,er.jsx)(rZ,{headers:["RCM Invoice No","RCM Date","Supplier Name","Nature of Supply","Taxable Value","Tax Rate","Tax Liability","ITC Eligibility","Source"],data:t.data||[],emptyMessage:"No RCM transactions found",renderRow:(e,t)=>{var r;return(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsx)("td",{className:"p-3 font-mono text-sm",children:e.rcm_invoice_no}),(0,er.jsx)("td",{className:"p-3",children:null===(r=e.rcm_date)||void 0===r?void 0:r.split("T")[0]}),(0,er.jsx)("td",{className:"p-3",children:e.supplier_name}),(0,er.jsx)("td",{className:"p-3",children:e.nature_of_supply}),(0,er.jsx)("td",{className:"p-3 text-right",children:ym(e.taxable_value)}),(0,er.jsxs)("td",{className:"p-3 text-right",children:[e.tax_rate,"%"]}),(0,er.jsx)("td",{className:"p-3 text-right font-bold text-orange-600",children:ym(e.tax_liability)}),(0,er.jsx)("td",{className:"p-3",children:(0,er.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat("Eligible"===e.itc_eligibility?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.itc_eligibility})}),(0,er.jsxs)("td",{className:"p-3 text-xs text-gray-500",children:[e.source_type," #",e.source_id]})]},t)}})})]});case"itc-register":return(0,er.jsxs)("div",{className:"space-y-6",children:[(0,er.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,er.jsxs)("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[(0,er.jsx)("h3",{className:"text-sm font-medium text-green-800 mb-1",children:"Total Eligible ITC"}),(0,er.jsx)("p",{className:"text-2xl font-bold text-green-600",children:ym((null===(x=t.summary)||void 0===x?void 0:x.total_eligible_itc)||0)})]}),(0,er.jsxs)("div",{className:"bg-red-50 rounded-lg p-4 border border-red-200",children:[(0,er.jsx)("h3",{className:"text-sm font-medium text-red-800 mb-1",children:"Ineligible ITC"}),(0,er.jsx)("p",{className:"text-2xl font-bold text-red-600",children:ym((null===(y=t.summary)||void 0===y?void 0:y.total_ineligible_itc)||0)})]}),(0,er.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[(0,er.jsx)("h3",{className:"text-sm font-medium text-blue-800 mb-1",children:"Total Purchases"}),(0,er.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:ym((null===(v=t.summary)||void 0===v?void 0:v.total_taxable_value)||0)})]}),(0,er.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[(0,er.jsx)("h3",{className:"text-sm font-medium text-purple-800 mb-1",children:"Total Tax Paid"}),(0,er.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:ym((null===(b=t.summary)||void 0===b?void 0:b.total_tax_paid)||0)})]})]}),(0,er.jsx)(tZ,{title:"ITC Register (Purchases)",icon:(0,er.jsx)(sJ,{className:"text-green-600"}),loading:i,count:null===(j=t.summary)||void 0===j?void 0:j.total_records,children:(0,er.jsx)(rZ,{headers:["Invoice No","Date","Vendor","GSTIN","Taxable Value","IGST","CGST","SGST","Total Tax","Eligibility"],data:t.data||[],emptyMessage:"No purchase records found",renderRow:(e,t)=>{var r;return(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsx)("td",{className:"p-3 font-mono text-sm",children:e.invoice_number}),(0,er.jsx)("td",{className:"p-3",children:null===(r=e.invoice_date)||void 0===r?void 0:r.split("T")[0]}),(0,er.jsx)("td",{className:"p-3",children:e.vendor_name}),(0,er.jsx)("td",{className:"p-3 text-xs",children:e.vendor_gstin||"-"}),(0,er.jsx)("td",{className:"p-3 text-right",children:ym(e.taxable_value)}),(0,er.jsx)("td",{className:"p-3 text-right",children:ym(e.igst)}),(0,er.jsx)("td",{className:"p-3 text-right",children:ym(e.cgst)}),(0,er.jsx)("td",{className:"p-3 text-right",children:ym(e.sgst)}),(0,er.jsx)("td",{className:"p-3 text-right font-bold",children:ym(e.total_tax)}),(0,er.jsx)("td",{className:"p-3",children:(0,er.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat("Eligible"===e.eligibility?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.eligibility})})]},t)}})})]});default:const ee=Object.keys(t||{}),te=ee.length>0&&Array.isArray(t[ee[0]])?t[ee[0]]:Array.isArray(t)?t:[];if(0===te.length)return(0,er.jsxs)("div",{className:"bg-white rounded-lg p-8 text-center",children:[(0,er.jsx)("p",{className:"text-gray-500",children:"No data available for this report"}),t.message&&(0,er.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:t.message})]});const re=Object.keys(te[0]||{});return(0,er.jsx)(tZ,{title:n.name,icon:(0,er.jsx)(mJ,{className:"text-indigo-600"}),loading:i,count:te.length,children:(0,er.jsx)(rZ,{headers:re.map(e=>e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())),data:te,renderRow:(e,t)=>(0,er.jsx)("tr",{className:"hover:bg-gray-50",children:re.map(t=>(0,er.jsx)("td",{className:"p-3",children:"number"===typeof e[t]&&(t.includes("amount")||t.includes("price")||t.includes("total")||t.includes("salary"))?ym(e[t]):"string"===typeof e[t]&&e[t].includes("T")&&e[t].includes("-")?nZ(e[t]):Array.isArray(e[t])?e[t].join(", "):null===e[t]||void 0===e[t]||"N/A"===e[t]||"na"===e[t]||""===e[t]?"-":String(e[t])},t))},t)})})}};return(0,er.jsx)(xm,{children:(0,er.jsxs)("div",{className:"p-6 md:p-8 space-y-6 bg-gray-50 min-h-screen",children:[(0,er.jsxs)("div",{className:"flex items-center justify-between",children:[(0,er.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Comprehensive Reports"}),n&&(0,er.jsx)("button",{onClick:()=>{s(null),u(null),m({})},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Back to Reports"})]}),n?(0,er.jsxs)("div",{className:"space-y-6",children:[(0,er.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,er.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,er.jsx)(n.icon,{className:"h-8 w-8 text-indigo-600"}),(0,er.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:n.name})]}),x().length>0&&(0,er.jsxs)(er.Fragment,{children:[(0,er.jsx)(iZ,{filters:x(),onFilterChange:(e,t)=>{m(r=>Be(Be({},r),{},{[e]:t}))},onClear:()=>{m({}),n&&g(n)}}),(0,er.jsx)("div",{className:"flex justify-end gap-2",children:(0,er.jsx)("button",{onClick:()=>{n&&g(n)},className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 font-medium",children:"Apply Filters"})})]})]}),(0,er.jsx)(Hh,{mode:"wait",children:(0,er.jsx)(Fh.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:n?l?(0,er.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[(0,er.jsx)(KJ,{className:"mx-auto h-12 w-12 text-red-500 mb-4"}),(0,er.jsx)("p",{className:"text-red-700 font-semibold",children:l})]}):i?(0,er.jsxs)("div",{className:"text-center py-16",children:[(0,er.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"}),(0,er.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading report data..."})]}):d?y(n.id,d):null:(0,er.jsxs)("div",{className:"text-center py-16 text-gray-500",children:[(0,er.jsx)(mJ,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),(0,er.jsx)("p",{className:"text-lg",children:"Select a report from the list to view data"})]})},n.id)})]}):(0,er.jsxs)("div",{className:"space-y-6",children:[(0,er.jsx)("div",{className:"bg-white rounded-lg shadow-md p-4",children:(0,er.jsx)("div",{className:"flex space-x-1 overflow-x-auto",children:f.map(e=>(0,er.jsxs)("button",{onClick:()=>r(e.id),className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors whitespace-nowrap ".concat((()=>{if(t===e.id){return{blue:"bg-blue-100 text-blue-700 border-2 border-blue-300",orange:"bg-orange-100 text-orange-700 border-2 border-orange-300",purple:"bg-purple-100 text-purple-700 border-2 border-purple-300",green:"bg-green-100 text-green-700 border-2 border-green-300",indigo:"bg-indigo-100 text-indigo-700 border-2 border-indigo-300",red:"bg-red-100 text-red-700 border-2 border-red-300",gray:"bg-gray-100 text-gray-700 border-2 border-gray-300"}[e.color]||"bg-indigo-100 text-indigo-700 border-2 border-indigo-300"}return"bg-gray-100 text-gray-700 hover:bg-gray-200"})()),children:[(0,er.jsx)(e.icon,{className:"h-5 w-5"}),e.name]},e.id))})}),(0,er.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:null===(e=p[t])||void 0===e?void 0:e.map(e=>(0,er.jsxs)(Fh.div,{onClick:()=>(e=>{s(e),u(null),m({}),g(e)})(e),className:"bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition-shadow border-2 border-transparent hover:border-indigo-300",whileHover:{scale:1.02},whileTap:{scale:.98},children:[(0,er.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,er.jsx)(e.icon,{className:"h-6 w-6 text-indigo-600"}),(0,er.jsx)("h3",{className:"font-semibold text-gray-800",children:e.name})]}),(0,er.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Click to view report"})]},e.id))})]})]})})}const lZ=Xh("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),cZ=Xh("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),dZ=Xh("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),uZ=Xh("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),hZ=e=>{let{icon:t,label:r,value:n}=e;return(0,er.jsxs)("div",{className:"flex items-center text-gray-700",children:[t,(0,er.jsxs)("span",{className:"font-semibold ml-2 mr-1",children:[r,":"]}),(0,er.jsx)("span",{children:n})]})},mZ=e=>{let{title:t,children:r}=e;return(0,er.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[(0,er.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:t}),(0,er.jsx)("div",{className:"overflow-x-auto",children:r})]})},pZ=()=>{const[e,t]=(0,a.useState)(""),[r,n]=(0,a.useState)(""),[s,i]=(0,a.useState)(""),[o,l]=(0,a.useState)(null),[c,d]=(0,a.useState)(!1),[u,h]=(0,a.useState)(""),[m,p]=(0,a.useState)([]);(0,a.useEffect)(()=>{(async()=>{try{const e=await Ia.get("/reports/guest-suggestions");p(e.data)}catch(e){console.error("Could not fetch guest suggestions:",e)}})()},[]);const f=async e=>{if(e.email||e.mobile||e.name){d(!0),h(""),l(null);try{const t=await Ia.get("/reports/guest-profile",{params:Be(Be(Be({},e.name&&{guest_name:e.name}),e.email&&{guest_email:e.email}),e.mobile&&{guest_mobile:e.mobile})});l(t.data)}catch(n){var t,r;h((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"Failed to fetch guest profile.")}finally{d(!1)}}else h("Please provide a name, email, or mobile number to search.")},g=e=>{if(!e)return null;const t=Pa();return e.startsWith("id_pkg_")||e.startsWith("guest_pkg_")?"".concat(t,"/packages/booking/checkin-image/").concat(e):"".concat(t,"/bookings/checkin-image/").concat(e)};return(0,er.jsxs)(xm,{children:[(0,er.jsxs)("div",{className:"bubbles-container",children:[(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{})]}),(0,er.jsxs)("div",{className:"p-6 bg-gray-50 min-h-screen",children:[(0,er.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Guest Profile Report"}),(0,er.jsxs)("div",{className:"mb-6",children:[(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-3",children:"Quick Search"}),(0,er.jsxs)("div",{className:"flex space-x-3 overflow-x-auto pb-3",children:[m.map((e,r)=>(0,er.jsx)("button",{onClick:()=>{return t((r=e).guest_name),n(r.guest_email),i(r.guest_mobile),void f({name:r.guest_name,email:r.guest_email,mobile:r.guest_mobile});var r},className:"flex-shrink-0 bg-white border border-gray-300 text-gray-700 px-4 py-2 rounded-full text-sm font-medium hover:bg-indigo-50 hover:border-indigo-400 transition-colors shadow-sm",children:e.guest_name},r)),0===m.length&&(0,er.jsx)("p",{className:"text-sm text-gray-500",children:"No guest suggestions available."})]})]}),(0,er.jsx)("div",{className:"max-w-2xl mx-auto bg-white p-6 rounded-xl shadow-md mb-8",children:(0,er.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),f({name:e,email:r,mobile:s})},className:"flex flex-col sm:flex-row items-center gap-4",children:[(0,er.jsx)("input",{type:"text",placeholder:"Guest Name",value:e,onChange:e=>t(e.target.value),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"}),(0,er.jsx)("input",{type:"email",placeholder:"Guest Email",value:r,onChange:e=>n(e.target.value),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",list:"guest-emails"}),(0,er.jsx)("datalist",{id:"guest-emails",children:m.map((e,t)=>(0,er.jsxs)("option",{value:e.guest_email,children:[e.guest_name," (",e.guest_mobile,")"]},t))}),(0,er.jsx)("input",{type:"tel",placeholder:"Guest Mobile",value:s,onChange:e=>i(e.target.value),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"}),(0,er.jsxs)("button",{type:"submit",className:"w-full sm:w-auto bg-indigo-600 text-white px-6 py-2 rounded-lg font-semibold hover:bg-indigo-700 transition flex items-center justify-center",disabled:c,children:[(0,er.jsx)(Y$,{size:18,className:"mr-2"}),c?"Searching...":"Search"]})]})}),u&&(0,er.jsxs)("div",{className:"max-w-2xl mx-auto bg-red-100 text-red-700 p-4 rounded-lg flex items-center",children:[(0,er.jsx)(gJ,{size:20,className:"mr-3"}),u]}),o&&(0,er.jsxs)("div",{className:"space-y-8 animate-fade-in",children:[(0,er.jsx)(mZ,{title:"Guest Details",children:(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,er.jsx)(hZ,{icon:(0,er.jsx)(lZ,{size:20,className:"text-indigo-500"}),label:"Name",value:o.guest_details.name}),(0,er.jsx)(hZ,{icon:(0,er.jsx)(cZ,{size:20,className:"text-indigo-500"}),label:"Email",value:o.guest_details.email}),(0,er.jsx)(hZ,{icon:(0,er.jsx)(dZ,{size:20,className:"text-indigo-500"}),label:"Mobile",value:o.guest_details.mobile})]})}),(0,er.jsx)(mZ,{title:"Booking History",children:(0,er.jsxs)("table",{className:"min-w-full text-sm",children:[(0,er.jsx)("thead",{className:"bg-gray-50",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"p-3 text-left",children:"Type"}),(0,er.jsx)("th",{className:"p-3 text-left",children:"Dates"}),(0,er.jsx)("th",{className:"p-3 text-left",children:"Rooms"}),(0,er.jsx)("th",{className:"p-3 text-left",children:"Status"}),(0,er.jsx)("th",{className:"p-3 text-left",children:"Documents"})]})}),(0,er.jsx)("tbody",{className:"divide-y",children:o.bookings.map(e=>(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{className:"p-3",children:e.type}),(0,er.jsxs)("td",{className:"p-3",children:[e.check_in," to ",e.check_out]}),(0,er.jsx)("td",{className:"p-3",children:e.rooms.join(", ")}),(0,er.jsx)("td",{className:"p-3",children:(0,er.jsx)("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800",children:e.status})}),(0,er.jsxs)("td",{className:"p-3 flex items-center gap-4",children:[e.id_card_image_url&&(0,er.jsxs)("a",{href:g(e.id_card_image_url),target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:underline flex items-center",children:[(0,er.jsx)(mJ,{size:16,className:"mr-1"})," ID Card"]}),e.guest_photo_url&&(0,er.jsxs)("a",{href:g(e.guest_photo_url),target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:underline flex items-center",children:[(0,er.jsx)(uZ,{size:16,className:"mr-1"})," Photo"]})]})]},"".concat(e.type,"-").concat(e.id)))})]})}),(0,er.jsx)(mZ,{title:"Food Order History",children:(0,er.jsxs)("table",{className:"min-w-full text-sm",children:[(0,er.jsx)("thead",{className:"bg-gray-50",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"p-3 text-left",children:"Order ID"}),(0,er.jsx)("th",{className:"p-3 text-left",children:"Date"}),(0,er.jsx)("th",{className:"p-3 text-left",children:"Room"}),(0,er.jsx)("th",{className:"p-3 text-left",children:"Items"}),(0,er.jsx)("th",{className:"p-3 text-right",children:"Amount"}),(0,er.jsx)("th",{className:"p-3 text-center",children:"Status"})]})}),(0,er.jsx)("tbody",{className:"divide-y",children:o.food_orders.map(e=>(0,er.jsxs)("tr",{children:[(0,er.jsxs)("td",{className:"p-3",children:["#",e.id]}),(0,er.jsx)("td",{className:"p-3",children:new Date(e.created_at).toLocaleString()}),(0,er.jsx)("td",{className:"p-3",children:e.room_number||"N/A"}),(0,er.jsx)("td",{className:"p-3",children:e.items.map(e=>{var t;return"".concat((null===(t=e.food_item)||void 0===t?void 0:t.name)||"Unknown Item"," (x").concat(e.quantity,")")}).join(", ")}),(0,er.jsxs)("td",{className:"p-3 text-right font-semibold",children:["\u20b9",e.amount.toFixed(2)]}),(0,er.jsx)("td",{className:"p-3 text-center",children:(0,er.jsx)("span",{className:"px-2 py-1 text-xs rounded-full bg-green-100 text-green-800",children:e.status})})]},e.id))})]})}),(0,er.jsx)(mZ,{title:"Service History",children:(0,er.jsxs)("table",{className:"min-w-full text-sm",children:[(0,er.jsx)("thead",{className:"bg-gray-50",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"p-3 text-left",children:"Service ID"}),(0,er.jsx)("th",{className:"p-3 text-left",children:"Date"}),(0,er.jsx)("th",{className:"p-3 text-left",children:"Service"}),(0,er.jsx)("th",{className:"p-3 text-left",children:"Room"}),(0,er.jsx)("th",{className:"p-3 text-right",children:"Charges"}),(0,er.jsx)("th",{className:"p-3 text-center",children:"Status"})]})}),(0,er.jsx)("tbody",{className:"divide-y",children:o.services.map(e=>(0,er.jsxs)("tr",{children:[(0,er.jsxs)("td",{className:"p-3",children:["#",e.id]}),(0,er.jsx)("td",{className:"p-3",children:new Date(e.assigned_at).toLocaleString()}),(0,er.jsx)("td",{className:"p-3",children:e.service_name}),(0,er.jsx)("td",{className:"p-3",children:e.room_number||"N/A"}),(0,er.jsxs)("td",{className:"p-3 text-right font-semibold",children:["\u20b9",(e.charges||0).toFixed(2)]}),(0,er.jsx)("td",{className:"p-3 text-center",children:(0,er.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat("completed"===e.status?"bg-purple-100 text-purple-800":"bg-yellow-100 text-yellow-800"),children:e.status})})]},e.id))})]})}),(0,er.jsx)(mZ,{title:"Inventory Usage & Amenities",children:(0,er.jsxs)("table",{className:"min-w-full text-sm",children:[(0,er.jsx)("thead",{className:"bg-gray-50",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"p-3 text-left",children:"Date"}),(0,er.jsx)("th",{className:"p-3 text-left",children:"Item"}),(0,er.jsx)("th",{className:"p-3 text-left",children:"Category"}),(0,er.jsx)("th",{className:"p-3 text-left",children:"Room"}),(0,er.jsx)("th",{className:"p-3 text-right",children:"Quantity"}),(0,er.jsx)("th",{className:"p-3 text-right",children:"Cost (Est.)"})]})}),(0,er.jsx)("tbody",{className:"divide-y",children:o.inventory_usage&&o.inventory_usage.length>0?o.inventory_usage.map((e,t)=>(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{className:"p-3",children:new Date(e.issue_date).toLocaleString()}),(0,er.jsx)("td",{className:"p-3 font-medium text-gray-900",children:e.item_name}),(0,er.jsx)("td",{className:"p-3",children:(0,er.jsx)("span",{className:"px-2 py-1 bg-gray-100 rounded-full text-xs",children:e.category||"N/A"})}),(0,er.jsx)("td",{className:"p-3",children:e.room_number}),(0,er.jsxs)("td",{className:"p-3 text-right font-semibold",children:[e.quantity," ",e.unit]}),(0,er.jsxs)("td",{className:"p-3 text-right text-gray-500",children:["\u20b9",e.cost?e.cost.toFixed(2):"0.00"]})]},t)):(0,er.jsx)("tr",{children:(0,er.jsx)("td",{colSpan:"6",className:"p-4 text-center text-gray-500 italic",children:"No inventory consumption recorded."})})})]})})]})]})]})},fZ=e=>{switch(e){case"Room Booking":return(0,er.jsx)(V$,{className:"w-5 h-5 text-purple-500"});case"Package Booking":return(0,er.jsx)(Zh,{className:"w-5 h-5 text-indigo-500"});case"Food Order":return(0,er.jsx)(H$,{className:"w-5 h-5 text-orange-500"});case"Service":return(0,er.jsx)(em,{className:"w-5 h-5 text-teal-500"});case"Expense":return(0,er.jsx)(a$,{className:"w-5 h-5 text-red-500"});default:return(0,er.jsx)(n$,{className:"w-5 h-5 text-gray-500"})}},gZ=e=>{let{title:t,activities:r,icon:n}=e;return r&&0!==r.length?(0,er.jsxs)(Fh.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white p-6 rounded-xl shadow-md",children:[(0,er.jsxs)("h3",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center",children:[n,(0,er.jsxs)("span",{className:"ml-2",children:[t," (",r.length,")"]})]}),(0,er.jsx)("div",{className:"space-y-4 max-h-96 overflow-y-auto pr-2",children:r.map((e,t)=>(0,er.jsx)(xZ,{activity:e},t))})]}):null},xZ=e=>{let{activity:t}=e;return(0,er.jsx)("div",{className:"p-4 border rounded-lg bg-gray-50/50 hover:bg-white hover:shadow-sm transition-all duration-200",children:(0,er.jsxs)("div",{className:"flex items-start gap-3",children:[(0,er.jsx)("div",{className:"mt-1",children:fZ(t.type)}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-xs text-gray-500",children:new Date(t.activity_date).toLocaleString()}),(0,er.jsx)("h4",{className:"font-bold text-gray-800",children:t.type}),(0,er.jsx)("p",{className:"text-sm text-gray-600",children:t.description}),(0,er.jsxs)("div",{className:"text-xs mt-2 flex items-center gap-4 flex-wrap",children:[null!=t.amount&&(0,er.jsxs)("span",{className:"font-semibold text-green-600",children:["Amount: ",ym(t.amount)]}),t.status&&(0,er.jsx)("span",{className:"px-2 py-0.5 rounded-full bg-gray-200 text-gray-800 font-medium",children:t.status})]})]})]})})},yZ=()=>{const[e,t]=(0,a.useState)([]),[r,n]=(0,a.useState)(""),[s,i]=(0,a.useState)(""),[o,l]=(0,a.useState)(""),[c,d]=(0,a.useState)(null),[u,h]=(0,a.useState)(!1),[m,p]=(0,a.useState)("");(0,a.useEffect)(()=>{(async()=>{try{const e=await Ia.get("/employees");t(e.data||[])}catch(e){console.error("Failed to fetch users:",e),p("Could not load the list of users.")}})()},[]);const f=(0,a.useMemo)(()=>c?c.activities.reduce((e,t)=>{const r=t.type;return e[r]||(e[r]=[]),e[r].push(t),e},{}):{},[c]);return(0,er.jsx)(xm,{children:(0,er.jsxs)("div",{className:"p-6 md:p-8 space-y-8 bg-gray-50 min-h-screen",children:[(0,er.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"User Activity History"}),(0,er.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end",children:[(0,er.jsxs)("div",{className:"md:col-span-2",children:[(0,er.jsx)("label",{htmlFor:"user-select",className:"block text-sm font-medium text-gray-700 mb-1",children:"Select User"}),(0,er.jsxs)("select",{id:"user-select",value:r,onChange:e=>n(e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[(0,er.jsx)("option",{value:"",children:"-- Select a User --"}),e.map(e=>(0,er.jsxs)("option",{value:e.user_id||e.id,children:[e.name," (",e.role,")"]},e.id))]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{htmlFor:"from-date",className:"block text-sm font-medium text-gray-700 mb-1",children:"From Date"}),(0,er.jsx)("input",{type:"date",id:"from-date",value:s,onChange:e=>i(e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{htmlFor:"to-date",className:"block text-sm font-medium text-gray-700 mb-1",children:"To Date"}),(0,er.jsx)("input",{type:"date",id:"to-date",value:o,onChange:e=>l(e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),(0,er.jsx)("div",{className:"mt-4 text-center",children:(0,er.jsxs)("button",{onClick:async()=>{if(r){h(!0),p(""),d(null);try{const e={user_id:r};s&&(e.from_date=s),o&&(e.to_date=o);const t=await Ia.get("/reports/user-history",{params:e});d(t.data)}catch(n){var e,t;console.error("Failed to fetch user history:",n),p((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"An error occurred while fetching the history.")}finally{h(!1)}}else p("Please select a user to view their history.")},disabled:u||!r,className:"w-full md:w-auto bg-indigo-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-indigo-700 transition flex items-center justify-center disabled:bg-gray-400 disabled:cursor-not-allowed",children:[(0,er.jsx)(Y$,{size:18,className:"mr-2"}),u?"Fetching...":"Get History"]})})]}),m&&(0,er.jsxs)("div",{className:"bg-red-100 text-red-700 p-4 rounded-lg flex items-center",children:[(0,er.jsx)(gJ,{size:20,className:"mr-3"}),m]}),c&&(0,er.jsxs)(Fh.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-white p-6 rounded-xl shadow-md mt-8",children:[(0,er.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 mb-6 text-center",children:["Activity for ",(0,er.jsx)("span",{className:"text-indigo-600",children:c.user_name})]}),c.activities.length>0?(0,er.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[(0,er.jsx)(gZ,{title:"Room Bookings",activities:f["Room Booking"],icon:(0,er.jsx)(V$,{className:"w-6 h-6 text-purple-500"})}),(0,er.jsx)(gZ,{title:"Package Bookings",activities:f["Package Booking"],icon:(0,er.jsx)(Zh,{className:"w-6 h-6 text-indigo-500"})}),(0,er.jsx)(gZ,{title:"Food Orders",activities:f["Food Order"],icon:(0,er.jsx)(H$,{className:"w-6 h-6 text-orange-500"})}),(0,er.jsx)(gZ,{title:"Services",activities:f.Service,icon:(0,er.jsx)(em,{className:"w-6 h-6 text-teal-500"})}),(0,er.jsx)(gZ,{title:"Expenses",activities:f.Expense,icon:(0,er.jsx)(a$,{className:"w-6 h-6 text-red-500"})})]}):(0,er.jsx)("p",{className:"text-center text-gray-500 py-8",children:"No activities found for this user in the selected date range."})]})]})})},vZ=Xh("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var bZ={version:"0.18.5"},jZ=1200,wZ=1252,NZ=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],_Z={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},kZ=function(e){-1!=NZ.indexOf(e)&&(wZ=_Z[0]=e)};var SZ=function(e){jZ=e,kZ(e)};function AZ(){SZ(1200),kZ(1252)}function CZ(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var EZ,TZ=function(e){return String.fromCharCode(e)},PZ=function(e){return String.fromCharCode(e)};var OZ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function DZ(e){for(var t="",r=0,n=0,a=0,s=0,i=0,o=0,l=0,c=0;c<e.length;)s=(r=e.charCodeAt(c++))>>2,i=(3&r)<<4|(n=e.charCodeAt(c++))>>4,o=(15&n)<<2|(a=e.charCodeAt(c++))>>6,l=63&a,isNaN(n)?o=l=64:isNaN(a)&&(l=64),t+=OZ.charAt(s)+OZ.charAt(i)+OZ.charAt(o)+OZ.charAt(l);return t}function IZ(e){var t="",r=0,n=0,a=0,s=0,i=0,o=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var l=0;l<e.length;)r=OZ.indexOf(e.charAt(l++))<<2|(s=OZ.indexOf(e.charAt(l++)))>>4,t+=String.fromCharCode(r),n=(15&s)<<4|(i=OZ.indexOf(e.charAt(l++)))>>2,64!==i&&(t+=String.fromCharCode(n)),a=(3&i)<<6|(o=OZ.indexOf(e.charAt(l++))),64!==o&&(t+=String.fromCharCode(a));return t}var LZ=function(){return"undefined"!==typeof Buffer&&"undefined"!==typeof process&&"undefined"!==typeof process.versions&&!!process.versions.node}(),MZ=function(){if("undefined"!==typeof Buffer){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch(ze){e=!0}return e?function(e,t){return t?new Buffer(e,t):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function RZ(e){return LZ?Buffer.alloc?Buffer.alloc(e):new Buffer(e):"undefined"!=typeof Uint8Array?new Uint8Array(e):new Array(e)}function FZ(e){return LZ?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):"undefined"!=typeof Uint8Array?new Uint8Array(e):new Array(e)}var BZ=function(e){return LZ?MZ(e,"binary"):e.split("").map(function(e){return 255&e.charCodeAt(0)})};function zZ(e){if("undefined"===typeof ArrayBuffer)return BZ(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=255&e.charCodeAt(n);return t}function UZ(e){if(Array.isArray(e))return e.map(function(e){return String.fromCharCode(e)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}var qZ=LZ?function(e){return Buffer.concat(e.map(function(e){return Buffer.isBuffer(e)?e:MZ(e)}))}:function(e){if("undefined"!==typeof Uint8Array){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),a=0;for(t=0,r=0;t<e.length;r+=a,++t)if(a=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if("string"==typeof e[t])throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(e){return Array.isArray(e)?e:[].slice.call(e)}))};var WZ=/\u0000/g,VZ=/[\u0001-\u0006]/g;function HZ(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function GZ(e,t){var r=""+e;return r.length>=t?r:a1("0",t-r.length)+r}function KZ(e,t){var r=""+e;return r.length>=t?r:a1(" ",t-r.length)+r}function YZ(e,t){var r=""+e;return r.length>=t?r:r+a1(" ",t-r.length)}var XZ=Math.pow(2,32);function QZ(e,t){return e>XZ||e<-XZ?function(e,t){var r=""+Math.round(e);return r.length>=t?r:a1("0",t-r.length)+r}(e,t):function(e,t){var r=""+e;return r.length>=t?r:a1("0",t-r.length)+r}(Math.round(e),t)}function $Z(e,t){return t=t||0,e.length>=7+t&&103===(32|e.charCodeAt(t))&&101===(32|e.charCodeAt(t+1))&&110===(32|e.charCodeAt(t+2))&&101===(32|e.charCodeAt(t+3))&&114===(32|e.charCodeAt(t+4))&&97===(32|e.charCodeAt(t+5))&&108===(32|e.charCodeAt(t+6))}var JZ=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],ZZ=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];var e0={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "'},t0={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},r0={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function n0(e,t,r){for(var n=e<0?-1:1,a=e*n,s=0,i=1,o=0,l=1,c=0,d=0,u=Math.floor(a);c<t&&(o=(u=Math.floor(a))*i+s,d=u*c+l,!(a-u<5e-8));)a=1/(a-u),s=i,i=o,l=c,c=d;if(d>t&&(c>t?(d=l,o=s):(d=c,o=i)),!r)return[0,n*o,d];var h=Math.floor(n*o/d);return[h,n*o-h*d,d]}function a0(e,t,r){if(e>2958465||e<0)return null;var n=0|e,a=Math.floor(86400*(e-n)),s=0,i=[],o={D:n,T:a,u:86400*(e-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(n+=1462),o.u>.9999&&(o.u=0,86400==++a&&(o.T=a=0,++n,++o.D)),60===n)i=r?[1317,10,29]:[1900,2,29],s=3;else if(0===n)i=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),i=[l.getFullYear(),l.getMonth()+1,l.getDate()],s=l.getDay(),n<60&&(s=(s+6)%7),r&&(s=function(e,t){t[0]-=581;var r=e.getDay();e<60&&(r=(r+6)%7);return r}(l,i))}return o.y=i[0],o.m=i[1],o.d=i[2],o.S=a%60,a=Math.floor(a/60),o.M=a%60,a=Math.floor(a/60),o.H=a,o.q=s,o}var s0=new Date(1899,11,31,0,0,0),i0=s0.getTime(),o0=new Date(1900,2,1,0,0,0);function l0(e,t){var r=e.getTime();return t?r-=1262304e5:e>=o0&&(r+=864e5),(r-(i0+6e4*(e.getTimezoneOffset()-s0.getTimezoneOffset())))/864e5}function c0(e){return-1==e.indexOf(".")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function d0(e){var t,r=Math.floor(Math.log(Math.abs(e))*Math.LOG10E);return t=r>=-4&&r<=-1?e.toPrecision(10+r):Math.abs(r)<=9?function(e){var t=e<0?12:11,r=c0(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10)).length<=t?r:e.toExponential(5)}(e):10===r?e.toFixed(10).substr(0,12):function(e){var t=c0(e.toFixed(11));return t.length>(e<0?12:11)||"0"===t||"-0"===t?e.toPrecision(6):t}(e),c0(function(e){return-1==e.indexOf("E")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}(t.toUpperCase()))}function u0(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(0|e)===e?e.toString(10):d0(e);case"undefined":return"";case"object":if(null==e)return"";if(e instanceof Date)return O0(14,l0(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function h0(e,t,r,n){var a,s="",i=0,o=0,l=r.y,c=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:a=l%100,c=2;break;default:a=l%1e4,c=4}break;case 109:switch(t.length){case 1:case 2:a=r.m,c=t.length;break;case 3:return ZZ[r.m-1][1];case 5:return ZZ[r.m-1][0];default:return ZZ[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:a=r.d,c=t.length;break;case 3:return JZ[r.q][0];default:return JZ[r.q][1]}break;case 104:switch(t.length){case 1:case 2:a=1+(r.H+11)%12,c=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:a=r.H,c=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:a=r.M,c=t.length;break;default:throw"bad minute format: "+t}break;case 115:if("s"!=t&&"ss"!=t&&".0"!=t&&".00"!=t&&".000"!=t)throw"bad second format: "+t;return 0!==r.u||"s"!=t&&"ss"!=t?(o=n>=2?3===n?1e3:100:1===n?10:1,(i=Math.round(o*(r.S+r.u)))>=60*o&&(i=0),"s"===t?0===i?"0":""+i/o:(s=GZ(i,2+n),"ss"===t?s.substr(0,2):"."+s.substr(2,t.length-1))):GZ(r.S,t.length);case 90:switch(t){case"[h]":case"[hh]":a=24*r.D+r.H;break;case"[m]":case"[mm]":a=60*(24*r.D+r.H)+r.M;break;case"[s]":case"[ss]":a=60*(60*(24*r.D+r.H)+r.M)+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}c=3===t.length?1:2;break;case 101:a=l,c=1}return c>0?GZ(a,c):""}function m0(e){if(e.length<=3)return e;for(var t=e.length%3,r=e.substr(0,t);t!=e.length;t+=3)r+=(r.length>0?",":"")+e.substr(t,3);return r}var p0=/%/g;function f0(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+f0(e,-t);var a=e.indexOf(".");-1===a&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),-1===(r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a)).indexOf("e")){var i=Math.floor(Math.log(t)*Math.LOG10E);for(-1===r.indexOf(".")?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s);"0."===r.substr(0,2);)r=(r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a)).replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(e,t,r,n){return t+r+n.substr(0,(a+s)%a)+"."+n.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var g0=/# (\?+)( ?)\/( ?)(\d+)/;var x0=/^#*0*\.([0#]+)/,y0=/\).*[0#]/,v0=/\(###\) ###\\?-####/;function b0(e){for(var t,r="",n=0;n!=e.length;++n)switch(t=e.charCodeAt(n)){case 35:break;case 63:r+=" ";break;case 48:r+="0";break;default:r+=String.fromCharCode(t)}return r}function j0(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function w0(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function N0(e,t,r){if(40===e.charCodeAt(0)&&!t.match(y0)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?N0("n",n,r):"("+N0("n",n,-r)+")"}if(44===t.charCodeAt(t.length-1))return function(e,t,r){for(var n=t.length-1;44===t.charCodeAt(n-1);)--n;return S0(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}(e,t,r);if(-1!==t.indexOf("%"))return function(e,t,r){var n=t.replace(p0,""),a=t.length-n.length;return S0(e,n,r*Math.pow(10,2*a))+a1("%",a)}(e,t,r);if(-1!==t.indexOf("E"))return f0(t,r);if(36===t.charCodeAt(0))return"$"+N0(e,t.substr(" "==t.charAt(1)?2:1),r);var a,s,i,o,l=Math.abs(r),c=r<0?"-":"";if(t.match(/^00+$/))return c+QZ(l,t.length);if(t.match(/^[#?]+$/))return"0"===(a=QZ(r,0))&&(a=""),a.length>t.length?a:b0(t.substr(0,t.length-a.length))+a;if(s=t.match(g0))return function(e,t,r){var n=parseInt(e[4],10),a=Math.round(t*n),s=Math.floor(a/n),i=a-s*n,o=n;return r+(0===s?"":""+s)+" "+(0===i?a1(" ",e[1].length+1+e[4].length):KZ(i,e[1].length)+e[2]+"/"+e[3]+GZ(o,e[4].length))}(s,l,c);if(t.match(/^#+0+$/))return c+QZ(l,t.length-t.indexOf("0"));if(s=t.match(x0))return a=j0(r,s[1].length).replace(/^([^\.]+)$/,"$1."+b0(s[1])).replace(/\.$/,"."+b0(s[1])).replace(/\.(\d*)$/,function(e,t){return"."+t+a1("0",b0(s[1]).length-t.length)}),-1!==t.indexOf("0.")?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return c+j0(l,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return c+m0(QZ(l,0));if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+N0(e,t,-r):m0(""+(Math.floor(r)+function(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}(r,s[1].length)))+"."+GZ(w0(r,s[1].length),s[1].length);if(s=t.match(/^#,#*,#0/))return N0(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=HZ(N0(e,t.replace(/[\\-]/g,""),r)),i=0,HZ(HZ(t.replace(/\\/g,"")).replace(/[0#]/g,function(e){return i<a.length?a.charAt(i++):"0"===e?"0":""}));if(t.match(v0))return"("+(a=N0(e,"##########",r)).substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),o=n0(l,Math.pow(10,i)-1,!1),a=""+c," "==(d=S0("n",s[1],o[1])).charAt(d.length-1)&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],(d=YZ(o[2],i)).length<s[4].length&&(d=b0(s[4].substr(s[4].length-d.length))+d),a+=d;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),c+((o=n0(l,Math.pow(10,i)-1,!0))[0]||(o[1]?"":"0"))+" "+(o[1]?KZ(o[1],i)+s[2]+"/"+s[3]+YZ(o[2],i):a1(" ",2*i+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=QZ(r,0),t.length<=a.length?a:b0(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var u=t.indexOf(".")-i,h=t.length-a.length-u;return b0(t.substr(0,u)+a+t.substr(t.length-h))}if(s=t.match(/^00,000\.([#0]*0)$/))return i=w0(r,s[1].length),r<0?"-"+N0(e,t,-r):m0(function(e){return e<2147483647&&e>-2147483648?""+(e>=0?0|e:e-1|0):""+Math.floor(e)}(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(e){return"00,"+(e.length<3?GZ(0,3-e.length):"")+e})+"."+GZ(i,s[1].length);switch(t){case"###,##0.00":return N0(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var m=m0(QZ(l,0));return"0"!==m?c+m:"";case"###,###.00":return N0(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return N0(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function _0(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+_0(e,-t);var a=e.indexOf(".");-1===a&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),!(r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a)).match(/[Ee]/)){var i=Math.floor(Math.log(t)*Math.LOG10E);-1===r.indexOf(".")?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(e,t,r,n){return t+r+n.substr(0,(a+s)%a)+"."+n.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function k0(e,t,r){if(40===e.charCodeAt(0)&&!t.match(y0)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?k0("n",n,r):"("+k0("n",n,-r)+")"}if(44===t.charCodeAt(t.length-1))return function(e,t,r){for(var n=t.length-1;44===t.charCodeAt(n-1);)--n;return S0(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}(e,t,r);if(-1!==t.indexOf("%"))return function(e,t,r){var n=t.replace(p0,""),a=t.length-n.length;return S0(e,n,r*Math.pow(10,2*a))+a1("%",a)}(e,t,r);if(-1!==t.indexOf("E"))return _0(t,r);if(36===t.charCodeAt(0))return"$"+k0(e,t.substr(" "==t.charAt(1)?2:1),r);var a,s,i,o,l=Math.abs(r),c=r<0?"-":"";if(t.match(/^00+$/))return c+GZ(l,t.length);if(t.match(/^[#?]+$/))return a=""+r,0===r&&(a=""),a.length>t.length?a:b0(t.substr(0,t.length-a.length))+a;if(s=t.match(g0))return function(e,t,r){return r+(0===t?"":""+t)+a1(" ",e[1].length+2+e[4].length)}(s,l,c);if(t.match(/^#+0+$/))return c+GZ(l,t.length-t.indexOf("0"));if(s=t.match(x0))return a=(a=(""+r).replace(/^([^\.]+)$/,"$1."+b0(s[1])).replace(/\.$/,"."+b0(s[1]))).replace(/\.(\d*)$/,function(e,t){return"."+t+a1("0",b0(s[1]).length-t.length)}),-1!==t.indexOf("0.")?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return c+m0(""+l);if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+k0(e,t,-r):m0(""+r)+"."+a1("0",s[1].length);if(s=t.match(/^#,#*,#0/))return k0(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=HZ(k0(e,t.replace(/[\\-]/g,""),r)),i=0,HZ(HZ(t.replace(/\\/g,"")).replace(/[0#]/g,function(e){return i<a.length?a.charAt(i++):"0"===e?"0":""}));if(t.match(v0))return"("+(a=k0(e,"##########",r)).substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),o=n0(l,Math.pow(10,i)-1,!1),a=""+c," "==(d=S0("n",s[1],o[1])).charAt(d.length-1)&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],(d=YZ(o[2],i)).length<s[4].length&&(d=b0(s[4].substr(s[4].length-d.length))+d),a+=d;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),c+((o=n0(l,Math.pow(10,i)-1,!0))[0]||(o[1]?"":"0"))+" "+(o[1]?KZ(o[1],i)+s[2]+"/"+s[3]+YZ(o[2],i):a1(" ",2*i+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=""+r,t.length<=a.length?a:b0(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var u=t.indexOf(".")-i,h=t.length-a.length-u;return b0(t.substr(0,u)+a+t.substr(t.length-h))}if(s=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+k0(e,t,-r):m0(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(e){return"00,"+(e.length<3?GZ(0,3-e.length):"")+e})+"."+GZ(0,s[1].length);switch(t){case"###,###":case"##,###":case"#,###":var m=m0(""+l);return"0"!==m?c+m:"";default:if(t.match(/\.[0#?]*$/))return k0(e,t.slice(0,t.lastIndexOf(".")),r)+b0(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function S0(e,t,r){return(0|r)===r?k0(e,t,r):N0(e,t,r)}var A0=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function C0(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":$Z(e,t)&&(t+=6),t++;break;case'"':for(;34!==e.charCodeAt(++t)&&t<e.length;);++t;break;case"\\":case"_":t+=2;break;case"@":++t;break;case"B":case"b":if("1"===e.charAt(t+1)||"2"===e.charAt(t+1))return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"\u4e0a":if("A/P"===e.substr(t,3).toUpperCase())return!0;if("AM/PM"===e.substr(t,5).toUpperCase())return!0;if("\u4e0a\u5348/\u4e0b\u5348"===e.substr(t,5).toUpperCase())return!0;++t;break;case"[":for(n=r;"]"!==e.charAt(t++)&&t<e.length;)n+=e.charAt(t);if(n.match(A0))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||"\\"==r&&"-"==e.charAt(t+1)&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t," "!=e.charAt(t)&&"*"!=e.charAt(t)||++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;default:++t}return!1}var E0=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function T0(e,t){if(null==t)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0}return!1}function P0(e,t){var r=function(e){for(var t=[],r=!1,n=0,a=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(a,n-a),a=n+1}if(t[t.length]=e.substr(a),!0===r)throw new Error("Format |"+e+"| unterminated string ");return t}(e),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if("number"!==typeof t)return[4,4===r.length||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"]}var s=t>0?r[0]:t<0?r[1]:r[2];if(-1===r[0].indexOf("[")&&-1===r[1].indexOf("["))return[n,s];if(null!=r[0].match(/\[[=<>]/)||null!=r[1].match(/\[[=<>]/)){var i=r[0].match(E0),o=r[1].match(E0);return T0(t,i)?[n,r[0]]:T0(t,o)?[n,r[1]]:[n,r[null!=i&&null!=o?2:1]]}return[n,s]}function O0(e,t,r){null==r&&(r={});var n="";switch(typeof e){case"string":n="m/d/yy"==e&&r.dateNF?r.dateNF:e;break;case"number":null==(n=14==e&&r.dateNF?r.dateNF:(null!=r.table?r.table:e0)[e])&&(n=r.table&&r.table[t0[e]]||e0[t0[e]]),null==n&&(n=r0[e]||"General")}if($Z(n,0))return u0(t,r);t instanceof Date&&(t=l0(t,r.date1904));var a=P0(n,t);if($Z(a[1]))return u0(t,r);if(!0===t)t="TRUE";else if(!1===t)t="FALSE";else if(""===t||null==t)return"";return function(e,t,r,n){for(var a,s,i,o=[],l="",c=0,d="",u="t",h="H";c<e.length;)switch(d=e.charAt(c)){case"G":if(!$Z(e,c))throw new Error("unrecognized character "+d+" in "+e);o[o.length]={t:"G",v:"General"},c+=7;break;case'"':for(l="";34!==(i=e.charCodeAt(++c))&&c<e.length;)l+=String.fromCharCode(i);o[o.length]={t:"t",v:l},++c;break;case"\\":var m=e.charAt(++c),p="("===m||")"===m?m:"t";o[o.length]={t:p,v:m},++c;break;case"_":o[o.length]={t:"t",v:" "},c+=2;break;case"@":o[o.length]={t:"T",v:t},++c;break;case"B":case"b":if("1"===e.charAt(c+1)||"2"===e.charAt(c+1)){if(null==a&&null==(a=a0(t,r,"2"===e.charAt(c+1))))return"";o[o.length]={t:"X",v:e.substr(c,2)},u=d,c+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":d=d.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0)return"";if(null==a&&null==(a=a0(t,r)))return"";for(l=d;++c<e.length&&e.charAt(c).toLowerCase()===d;)l+=d;"m"===d&&"h"===u.toLowerCase()&&(d="M"),"h"===d&&(d=h),o[o.length]={t:d,v:l},u=d;break;case"A":case"a":case"\u4e0a":var f={t:d,v:d};if(null==a&&(a=a0(t,r)),"A/P"===e.substr(c,3).toUpperCase()?(null!=a&&(f.v=a.H>=12?"P":"A"),f.t="T",h="h",c+=3):"AM/PM"===e.substr(c,5).toUpperCase()?(null!=a&&(f.v=a.H>=12?"PM":"AM"),f.t="T",c+=5,h="h"):"\u4e0a\u5348/\u4e0b\u5348"===e.substr(c,5).toUpperCase()?(null!=a&&(f.v=a.H>=12?"\u4e0b\u5348":"\u4e0a\u5348"),f.t="T",c+=5,h="h"):(f.t="t",++c),null==a&&"T"===f.t)return"";o[o.length]=f,u=d;break;case"[":for(l=d;"]"!==e.charAt(c++)&&c<e.length;)l+=e.charAt(c);if("]"!==l.slice(-1))throw'unterminated "[" block: |'+l+"|";if(l.match(A0)){if(null==a&&null==(a=a0(t,r)))return"";o[o.length]={t:"Z",v:l.toLowerCase()},u=l.charAt(1)}else l.indexOf("$")>-1&&(l=(l.match(/\$([^-\[\]]*)/)||[])[1]||"$",C0(e)||(o[o.length]={t:"t",v:l}));break;case".":if(null!=a){for(l=d;++c<e.length&&"0"===(d=e.charAt(c));)l+=d;o[o.length]={t:"s",v:l};break}case"0":case"#":for(l=d;++c<e.length&&"0#?.,E+-%".indexOf(d=e.charAt(c))>-1;)l+=d;o[o.length]={t:"n",v:l};break;case"?":for(l=d;e.charAt(++c)===d;)l+=d;o[o.length]={t:d,v:l},u=d;break;case"*":++c," "!=e.charAt(c)&&"*"!=e.charAt(c)||++c;break;case"(":case")":o[o.length]={t:1===n?"t":d,v:d},++c;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(l=d;c<e.length&&"0123456789".indexOf(e.charAt(++c))>-1;)l+=e.charAt(c);o[o.length]={t:"D",v:l};break;case" ":o[o.length]={t:d,v:d},++c;break;case"$":o[o.length]={t:"t",v:"$"},++c;break;default:if(-1===",$-+/():!^&'~{}<>=\u20acacfijklopqrtuvwxzP".indexOf(d))throw new Error("unrecognized character "+d+" in "+e);o[o.length]={t:"t",v:d},++c}var g,x=0,y=0;for(c=o.length-1,u="t";c>=0;--c)switch(o[c].t){case"h":case"H":o[c].t=h,u="h",x<1&&(x=1);break;case"s":(g=o[c].v.match(/\.0+$/))&&(y=Math.max(y,g[0].length-1)),x<3&&(x=3);case"d":case"y":case"M":case"e":u=o[c].t;break;case"m":"s"===u&&(o[c].t="M",x<2&&(x=2));break;case"X":break;case"Z":x<1&&o[c].v.match(/[Hh]/)&&(x=1),x<2&&o[c].v.match(/[Mm]/)&&(x=2),x<3&&o[c].v.match(/[Ss]/)&&(x=3)}switch(x){case 0:break;case 1:a.u>=.5&&(a.u=0,++a.S),a.S>=60&&(a.S=0,++a.M),a.M>=60&&(a.M=0,++a.H);break;case 2:a.u>=.5&&(a.u=0,++a.S),a.S>=60&&(a.S=0,++a.M)}var v,b="";for(c=0;c<o.length;++c)switch(o[c].t){case"t":case"T":case" ":case"D":break;case"X":o[c].v="",o[c].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":o[c].v=h0(o[c].t.charCodeAt(0),o[c].v,a,y),o[c].t="t";break;case"n":case"?":for(v=c+1;null!=o[v]&&("?"===(d=o[v].t)||"D"===d||(" "===d||"t"===d)&&null!=o[v+1]&&("?"===o[v+1].t||"t"===o[v+1].t&&"/"===o[v+1].v)||"("===o[c].t&&(" "===d||"n"===d||")"===d)||"t"===d&&("/"===o[v].v||" "===o[v].v&&null!=o[v+1]&&"?"==o[v+1].t));)o[c].v+=o[v].v,o[v]={v:"",t:";"},++v;b+=o[c].v,c=v-1;break;case"G":o[c].t="t",o[c].v=u0(t,r)}var j,w,N="";if(b.length>0){40==b.charCodeAt(0)?(j=t<0&&45===b.charCodeAt(0)?-t:t,w=S0("n",b,j)):(w=S0("n",b,j=t<0&&n>1?-t:t),j<0&&o[0]&&"t"==o[0].t&&(w=w.substr(1),o[0].v="-"+o[0].v)),v=w.length-1;var _=o.length;for(c=0;c<o.length;++c)if(null!=o[c]&&"t"!=o[c].t&&o[c].v.indexOf(".")>-1){_=c;break}var k=o.length;if(_===o.length&&-1===w.indexOf("E")){for(c=o.length-1;c>=0;--c)null!=o[c]&&-1!=="n?".indexOf(o[c].t)&&(v>=o[c].v.length-1?(v-=o[c].v.length,o[c].v=w.substr(v+1,o[c].v.length)):v<0?o[c].v="":(o[c].v=w.substr(0,v+1),v=-1),o[c].t="t",k=c);v>=0&&k<o.length&&(o[k].v=w.substr(0,v+1)+o[k].v)}else if(_!==o.length&&-1===w.indexOf("E")){for(v=w.indexOf(".")-1,c=_;c>=0;--c)if(null!=o[c]&&-1!=="n?".indexOf(o[c].t)){for(s=o[c].v.indexOf(".")>-1&&c===_?o[c].v.indexOf(".")-1:o[c].v.length-1,N=o[c].v.substr(s+1);s>=0;--s)v>=0&&("0"===o[c].v.charAt(s)||"#"===o[c].v.charAt(s))&&(N=w.charAt(v--)+N);o[c].v=N,o[c].t="t",k=c}for(v>=0&&k<o.length&&(o[k].v=w.substr(0,v+1)+o[k].v),v=w.indexOf(".")+1,c=_;c<o.length;++c)if(null!=o[c]&&(-1!=="n?(".indexOf(o[c].t)||c===_)){for(s=o[c].v.indexOf(".")>-1&&c===_?o[c].v.indexOf(".")+1:0,N=o[c].v.substr(0,s);s<o[c].v.length;++s)v<w.length&&(N+=w.charAt(v++));o[c].v=N,o[c].t="t",k=c}}}for(c=0;c<o.length;++c)null!=o[c]&&"n?".indexOf(o[c].t)>-1&&(j=n>1&&t<0&&c>0&&"-"===o[c-1].v?-t:t,o[c].v=S0(o[c].t,o[c].v,j),o[c].t="t");var S="";for(c=0;c!==o.length;++c)null!=o[c]&&(S+=o[c].v);return S}(a[1],t,r,a[0])}function D0(e,t){if("number"!=typeof t){t=+t||-1;for(var r=0;r<392;++r)if(void 0!=e0[r]){if(e0[r]==e){t=r;break}}else t<0&&(t=r);t<0&&(t=391)}return e0[t]=e,t}function I0(e){for(var t=0;392!=t;++t)void 0!==e[t]&&D0(e[t],t)}function L0(){e0=function(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "',e}()}var M0=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;var R0=function(){var e={};e.version="1.2.0";var t=function(){for(var e=0,t=new Array(256),r=0;256!=r;++r)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=r)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1,t[r]=e;return"undefined"!==typeof Int32Array?new Int32Array(t):t}();var r=function(e){var t=0,r=0,n=0,a="undefined"!==typeof Int32Array?new Int32Array(4096):new Array(4096);for(n=0;256!=n;++n)a[n]=e[n];for(n=0;256!=n;++n)for(r=e[n],t=256+n;t<4096;t+=256)r=a[t]=r>>>8^e[255&r];var s=[];for(n=1;16!=n;++n)s[n-1]="undefined"!==typeof Int32Array?a.subarray(256*n,256*n+256):a.slice(256*n,256*n+256);return s}(t),n=r[0],a=r[1],s=r[2],i=r[3],o=r[4],l=r[5],c=r[6],d=r[7],u=r[8],h=r[9],m=r[10],p=r[11],f=r[12],g=r[13],x=r[14];return e.table=t,e.bstr=function(e,r){for(var n=-1^r,a=0,s=e.length;a<s;)n=n>>>8^t[255&(n^e.charCodeAt(a++))];return~n},e.buf=function(e,r){for(var y=-1^r,v=e.length-15,b=0;b<v;)y=x[e[b++]^255&y]^g[e[b++]^y>>8&255]^f[e[b++]^y>>16&255]^p[e[b++]^y>>>24]^m[e[b++]]^h[e[b++]]^u[e[b++]]^d[e[b++]]^c[e[b++]]^l[e[b++]]^o[e[b++]]^i[e[b++]]^s[e[b++]]^a[e[b++]]^n[e[b++]]^t[e[b++]];for(v+=15;b<v;)y=y>>>8^t[255&(y^e[b++])];return~y},e.str=function(e,r){for(var n=-1^r,a=0,s=e.length,i=0,o=0;a<s;)(i=e.charCodeAt(a++))<128?n=n>>>8^t[255&(n^i)]:i<2048?n=(n=n>>>8^t[255&(n^(192|i>>6&31))])>>>8^t[255&(n^(128|63&i))]:i>=55296&&i<57344?(i=64+(1023&i),o=1023&e.charCodeAt(a++),n=(n=(n=(n=n>>>8^t[255&(n^(240|i>>8&7))])>>>8^t[255&(n^(128|i>>2&63))])>>>8^t[255&(n^(128|o>>6&15|(3&i)<<4))])>>>8^t[255&(n^(128|63&o))]):n=(n=(n=n>>>8^t[255&(n^(224|i>>12&15))])>>>8^t[255&(n^(128|i>>6&63))])>>>8^t[255&(n^(128|63&i))];return~n},e}(),F0=function(){var e,t={};function r(e){if("/"==e.charAt(e.length-1))return-1===e.slice(0,-1).indexOf("/")?e:r(e.slice(0,-1));var t=e.lastIndexOf("/");return-1===t?e:e.slice(0,t+1)}function n(e){if("/"==e.charAt(e.length-1))return n(e.slice(0,-1));var t=e.lastIndexOf("/");return-1===t?e:e.slice(t+1)}function a(e,t){"string"===typeof t&&(t=new Date(t));var r=t.getHours();r=(r=r<<6|t.getMinutes())<<5|t.getSeconds()>>>1,e.write_shift(2,r);var n=t.getFullYear()-1980;n=(n=n<<4|t.getMonth()+1)<<5|t.getDate(),e.write_shift(2,n)}function s(e){D2(e,0);for(var t={},r=0;e.l<=e.length-4;){var n=e.read_shift(2),a=e.read_shift(2),s=e.l+a,i={};if(21589===n)1&(r=e.read_shift(1))&&(i.mtime=e.read_shift(4)),a>5&&(2&r&&(i.atime=e.read_shift(4)),4&r&&(i.ctime=e.read_shift(4))),i.mtime&&(i.mt=new Date(1e3*i.mtime));e.l=s,t[n]=i}return t}function i(){return e||(e={})}function o(e,t){if(80==e[0]&&75==e[1])return ne(e,t);if(109==(32|e[0])&&105==(32|e[1]))return function(e,t){if("mime-version:"!=w(e.slice(0,13)).toLowerCase())throw new Error("Unsupported MAD header");var r=t&&t.root||"",n=(LZ&&Buffer.isBuffer(e)?e.toString("binary"):w(e)).split("\r\n"),a=0,s="";for(a=0;a<n.length;++a)if(s=n[a],/^Content-Location:/i.test(s)&&(s=s.slice(s.indexOf("file")),r||(r=s.slice(0,s.lastIndexOf("/")+1)),s.slice(0,r.length)!=r))for(;r.length>0&&(r=(r=r.slice(0,r.length-1)).slice(0,r.lastIndexOf("/")+1),s.slice(0,r.length)!=r););var i=(n[1]||"").match(/boundary="(.*?)"/);if(!i)throw new Error("MAD cannot find boundary");var o="--"+(i[1]||""),l=[],c=[],d={FileIndex:l,FullPaths:c};h(d);var u,m=0;for(a=0;a<n.length;++a){var p=n[a];p!==o&&p!==o+"--"||(m++&&ce(d,n.slice(u,a),r),u=a)}return d}(e,t);if(e.length<512)throw new Error("CFB file size "+e.length+" < 512");var r,n,a,s,i,o,m=512,p=[],f=e.slice(0,512);D2(f,0);var g=function(e){if(80==e[e.l]&&75==e[e.l+1])return[0,0];e.chk(y,"Header Signature: "),e.l+=16;var t=e.read_shift(2,"u");return[e.read_shift(2,"u"),t]}(f);switch(r=g[0]){case 3:m=512;break;case 4:m=4096;break;case 0:if(0==g[1])return ne(e,t);default:throw new Error("Major Version: Expected 3 or 4 saw "+r)}512!==m&&D2(f=e.slice(0,m),28);var v=e.slice(0,m);!function(e,t){var r=9;switch(e.l+=2,r=e.read_shift(2)){case 9:if(3!=t)throw new Error("Sector Shift: Expected 9 saw "+r);break;case 12:if(4!=t)throw new Error("Sector Shift: Expected 12 saw "+r);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+r)}e.chk("0600","Mini Sector Shift: "),e.chk("000000000000","Reserved: ")}(f,r);var b=f.read_shift(4,"i");if(3===r&&0!==b)throw new Error("# Directory Sectors: Expected 0 saw "+b);f.l+=4,s=f.read_shift(4,"i"),f.l+=4,f.chk("00100000","Mini Stream Cutoff Size: "),i=f.read_shift(4,"i"),n=f.read_shift(4,"i"),o=f.read_shift(4,"i"),a=f.read_shift(4,"i");for(var j=-1,N=0;N<109&&!((j=f.read_shift(4,"i"))<0);++N)p[N]=j;var _=function(e,t){for(var r=Math.ceil(e.length/t)-1,n=[],a=1;a<r;++a)n[a-1]=e.slice(a*t,(a+1)*t);return n[r-1]=e.slice(r*t),n}(e,m);c(o,a,_,m,p);var k=function(e,t,r,n){var a=e.length,s=[],i=[],o=[],l=[],c=n-1,d=0,u=0,h=0,m=0;for(d=0;d<a;++d)if(o=[],(h=d+t)>=a&&(h-=a),!i[h]){l=[];var p=[];for(u=h;u>=0;){p[u]=!0,i[u]=!0,o[o.length]=u,l.push(e[u]);var f=r[Math.floor(4*u/n)];if(n<4+(m=4*u&c))throw new Error("FAT boundary crossed: "+u+" 4 "+n);if(!e[f])break;if(p[u=k2(e[f],m)])break}s[h]={nodes:o,data:e2([l])}}return s}(_,s,p,m);k[s].name="!Directory",n>0&&i!==x&&(k[i].name="!MiniFAT"),k[p[0]].name="!FAT",k.fat_addrs=p,k.ssz=m;var S=[],A=[],C=[];!function(e,t,r,n,a,s,i,o){for(var c,h=0,m=n.length?2:0,p=t[e].data,f=0,g=0;f<p.length;f+=128){var y=p.slice(f,f+128);D2(y,64),g=y.read_shift(2),c=r2(y,0,g-m),n.push(c);var v={name:c,type:y.read_shift(1),color:y.read_shift(1),L:y.read_shift(4,"i"),R:y.read_shift(4,"i"),C:y.read_shift(4,"i"),clsid:y.read_shift(16),state:y.read_shift(4,"i"),start:0,size:0};0!==y.read_shift(2)+y.read_shift(2)+y.read_shift(2)+y.read_shift(2)&&(v.ct=u(y,y.l-8)),0!==y.read_shift(2)+y.read_shift(2)+y.read_shift(2)+y.read_shift(2)&&(v.mt=u(y,y.l-8)),v.start=y.read_shift(4,"i"),v.size=y.read_shift(4,"i"),v.size<0&&v.start<0&&(v.size=v.type=0,v.start=x,v.name=""),5===v.type?(h=v.start,a>0&&h!==x&&(t[h].name="!StreamData")):v.size>=4096?(v.storage="fat",void 0===t[v.start]&&(t[v.start]=d(r,v.start,t.fat_addrs,t.ssz)),t[v.start].name=v.name,v.content=t[v.start].data.slice(0,v.size)):(v.storage="minifat",v.size<0?v.size=0:h!==x&&v.start!==x&&t[h]&&(v.content=l(v,t[h].data,(t[o]||{}).data))),v.content&&D2(v.content,0),s[c]=v,i.push(v)}}(s,k,_,S,n,{},A,i),function(e,t,r){for(var n=0,a=0,s=0,i=0,o=0,l=r.length,c=[],d=[];n<l;++n)c[n]=d[n]=n,t[n]=r[n];for(;o<d.length;++o)a=e[n=d[o]].L,s=e[n].R,i=e[n].C,c[n]===n&&(-1!==a&&c[a]!==a&&(c[n]=c[a]),-1!==s&&c[s]!==s&&(c[n]=c[s])),-1!==i&&(c[i]=n),-1!==a&&n!=c[n]&&(c[a]=c[n],d.lastIndexOf(a)<o&&d.push(a)),-1!==s&&n!=c[n]&&(c[s]=c[n],d.lastIndexOf(s)<o&&d.push(s));for(n=1;n<l;++n)c[n]===n&&(-1!==s&&c[s]!==s?c[n]=c[s]:-1!==a&&c[a]!==a&&(c[n]=c[a]));for(n=1;n<l;++n)if(0!==e[n].type){if((o=n)!=c[o])do{o=c[o],t[n]=t[o]+"/"+t[n]}while(0!==o&&-1!==c[o]&&o!=c[o]);c[n]=-1}for(t[0]+="/",n=1;n<l;++n)2!==e[n].type&&(t[n]+="/")}(A,C,S),S.shift();var E={FileIndex:A,FullPaths:C};return t&&t.raw&&(E.raw={header:v,sectors:_}),E}function l(e,t,r){for(var n=e.start,a=e.size,s=[],i=n;r&&a>0&&i>=0;)s.push(t.slice(i*g,i*g+g)),a-=g,i=k2(r,4*i);return 0===s.length?L2(0):qZ(s).slice(0,e.size)}function c(e,t,r,n,a){var s=x;if(e===x){if(0!==t)throw new Error("DIFAT chain shorter than expected")}else if(-1!==e){var i=r[e],o=(n>>>2)-1;if(!i)return;for(var l=0;l<o&&(s=k2(i,4*l))!==x;++l)a.push(s);c(k2(i,n-4),t-1,r,n,a)}}function d(e,t,r,n,a){var s=[],i=[];a||(a=[]);var o=n-1,l=0,c=0;for(l=t;l>=0;){a[l]=!0,s[s.length]=l,i.push(e[l]);var d=r[Math.floor(4*l/n)];if(n<4+(c=4*l&o))throw new Error("FAT boundary crossed: "+l+" 4 "+n);if(!e[d])break;l=k2(e[d],c)}return{nodes:s,data:e2([i])}}function u(e,t){return new Date(1e3*(_2(e,t+4)/1e7*Math.pow(2,32)+_2(e,t)/1e7-11644473600))}function h(e,t){var r=t||{},n=r.root||"Root Entry";if(e.FullPaths||(e.FullPaths=[]),e.FileIndex||(e.FileIndex=[]),e.FullPaths.length!==e.FileIndex.length)throw new Error("inconsistent CFB structure");0===e.FullPaths.length&&(e.FullPaths[0]=n+"/",e.FileIndex[0]={name:n,type:5}),r.CLSID&&(e.FileIndex[0].clsid=r.CLSID),function(e){var t="\x01Sh33tJ5";if(F0.find(e,"/"+t))return;var r=L2(4);r[0]=55,r[1]=r[3]=50,r[2]=54,e.FileIndex.push({name:t,type:2,content:r,size:4,L:69,R:69,C:69}),e.FullPaths.push(e.FullPaths[0]+t),m(e)}(e)}function m(e,t){h(e);for(var a=!1,s=!1,i=e.FullPaths.length-1;i>=0;--i){var o=e.FileIndex[i];switch(o.type){case 0:s?a=!0:(e.FileIndex.pop(),e.FullPaths.pop());break;case 1:case 2:case 5:s=!0,isNaN(o.R*o.L*o.C)&&(a=!0),o.R>-1&&o.L>-1&&o.R==o.L&&(a=!0);break;default:a=!0}}if(a||t){var l=new Date(1987,1,19),c=0,d=Object.create?Object.create(null):{},u=[];for(i=0;i<e.FullPaths.length;++i)d[e.FullPaths[i]]=!0,0!==e.FileIndex[i].type&&u.push([e.FullPaths[i],e.FileIndex[i]]);for(i=0;i<u.length;++i){var m=r(u[i][0]);(s=d[m])||(u.push([m,{name:n(m).replace("/",""),type:1,clsid:b,ct:l,mt:l,content:null}]),d[m]=!0)}for(u.sort(function(e,t){return function(e,t){for(var r=e.split("/"),n=t.split("/"),a=0,s=0,i=Math.min(r.length,n.length);a<i;++a){if(s=r[a].length-n[a].length)return s;if(r[a]!=n[a])return r[a]<n[a]?-1:1}return r.length-n.length}(e[0],t[0])}),e.FullPaths=[],e.FileIndex=[],i=0;i<u.length;++i)e.FullPaths[i]=u[i][0],e.FileIndex[i]=u[i][1];for(i=0;i<u.length;++i){var p=e.FileIndex[i],f=e.FullPaths[i];if(p.name=n(f).replace("/",""),p.L=p.R=p.C=-(p.color=1),p.size=p.content?p.content.length:0,p.start=0,p.clsid=p.clsid||b,0===i)p.C=u.length>1?1:-1,p.size=0,p.type=5;else if("/"==f.slice(-1)){for(c=i+1;c<u.length&&r(e.FullPaths[c])!=f;++c);for(p.C=c>=u.length?-1:c,c=i+1;c<u.length&&r(e.FullPaths[c])!=r(f);++c);p.R=c>=u.length?-1:c,p.type=1}else r(e.FullPaths[i+1]||"")==r(f)&&(p.R=i+1),p.type=2}}}function p(e,t){var r=t||{};if("mad"==r.fileType)return function(e,t){for(var r=t||{},n=r.boundary||"SheetJS",a=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+(n="------="+n).slice(2)+'"',"","",""],s=e.FullPaths[0],i=s,o=e.FileIndex[0],l=1;l<e.FullPaths.length;++l)if(i=e.FullPaths[l].slice(s.length),(o=e.FileIndex[l]).size&&o.content&&"\x01Sh33tJ5"!=i){i=i.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(e){return"_x"+e.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(e){return"_u"+e.charCodeAt(0).toString(16)+"_"});for(var c=o.content,d=LZ&&Buffer.isBuffer(c)?c.toString("binary"):w(c),u=0,h=Math.min(1024,d.length),m=0,p=0;p<=h;++p)(m=d.charCodeAt(p))>=32&&m<128&&++u;var f=u>=4*h/5;a.push(n),a.push("Content-Location: "+(r.root||"file:///C:/SheetJS/")+i),a.push("Content-Transfer-Encoding: "+(f?"quoted-printable":"base64")),a.push("Content-Type: "+ie(o,i)),a.push(""),a.push(f?le(d):oe(d))}return a.push(n+"--\r\n"),a.join("\r\n")}(e,r);if(m(e),"zip"===r.fileType)return function(e,t){var r=t||{},n=[],s=[],i=L2(1),o=r.compression?8:0,l=0;0;var c=0,d=0,u=0,h=0,m=e.FullPaths[0],p=m,f=e.FileIndex[0],g=[],x=0;for(c=1;c<e.FullPaths.length;++c)if(p=e.FullPaths[c].slice(m.length),(f=e.FileIndex[c]).size&&f.content&&"\x01Sh33tJ5"!=p){var y=u,v=L2(p.length);for(d=0;d<p.length;++d)v.write_shift(1,127&p.charCodeAt(d));v=v.slice(0,v.l),g[h]=R0.buf(f.content,0);var b=f.content;8==o&&(b=N(b)),(i=L2(30)).write_shift(4,67324752),i.write_shift(2,20),i.write_shift(2,l),i.write_shift(2,o),f.mt?a(i,f.mt):i.write_shift(4,0),i.write_shift(-4,8&l?0:g[h]),i.write_shift(4,8&l?0:b.length),i.write_shift(4,8&l?0:f.content.length),i.write_shift(2,v.length),i.write_shift(2,0),u+=i.length,n.push(i),u+=v.length,n.push(v),u+=b.length,n.push(b),8&l&&((i=L2(12)).write_shift(-4,g[h]),i.write_shift(4,b.length),i.write_shift(4,f.content.length),u+=i.l,n.push(i)),(i=L2(46)).write_shift(4,33639248),i.write_shift(2,0),i.write_shift(2,20),i.write_shift(2,l),i.write_shift(2,o),i.write_shift(4,0),i.write_shift(-4,g[h]),i.write_shift(4,b.length),i.write_shift(4,f.content.length),i.write_shift(2,v.length),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(4,0),i.write_shift(4,y),x+=i.l,s.push(i),x+=v.length,s.push(v),++h}return i=L2(22),i.write_shift(4,101010256),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(2,h),i.write_shift(2,h),i.write_shift(4,x),i.write_shift(4,u),i.write_shift(2,0),qZ([qZ(n),qZ(s),i])}(e,r);var n=function(e){for(var t=0,r=0,n=0;n<e.FileIndex.length;++n){var a=e.FileIndex[n];if(a.content){var s=a.content.length;s>0&&(s<4096?t+=s+63>>6:r+=s+511>>9)}}for(var i=e.FullPaths.length+3>>2,o=t+127>>7,l=(t+7>>3)+r+i+o,c=l+127>>7,d=c<=109?0:Math.ceil((c-109)/127);l+c+d+127>>7>c;)d=++c<=109?0:Math.ceil((c-109)/127);var u=[1,d,c,o,i,r,t,0];return e.FileIndex[0].size=t<<6,u[7]=(e.FileIndex[0].start=u[0]+u[1]+u[2]+u[3]+u[4]+u[5])+(u[6]+7>>3),u}(e),s=L2(n[7]<<9),i=0,o=0;for(i=0;i<8;++i)s.write_shift(1,v[i]);for(i=0;i<8;++i)s.write_shift(2,0);for(s.write_shift(2,62),s.write_shift(2,3),s.write_shift(2,65534),s.write_shift(2,9),s.write_shift(2,6),i=0;i<3;++i)s.write_shift(2,0);for(s.write_shift(4,0),s.write_shift(4,n[2]),s.write_shift(4,n[0]+n[1]+n[2]+n[3]-1),s.write_shift(4,0),s.write_shift(4,4096),s.write_shift(4,n[3]?n[0]+n[1]+n[2]-1:x),s.write_shift(4,n[3]),s.write_shift(-4,n[1]?n[0]-1:x),s.write_shift(4,n[1]),i=0;i<109;++i)s.write_shift(-4,i<n[2]?n[1]+i:-1);if(n[1])for(o=0;o<n[1];++o){for(;i<236+127*o;++i)s.write_shift(-4,i<n[2]?n[1]+i:-1);s.write_shift(-4,o===n[1]-1?x:o+1)}var l=function(e){for(o+=e;i<o-1;++i)s.write_shift(-4,i+1);e&&(++i,s.write_shift(-4,x))};for(o=i=0,o+=n[1];i<o;++i)s.write_shift(-4,j.DIFSECT);for(o+=n[2];i<o;++i)s.write_shift(-4,j.FATSECT);l(n[3]),l(n[4]);for(var c=0,d=0,u=e.FileIndex[0];c<e.FileIndex.length;++c)(u=e.FileIndex[c]).content&&((d=u.content.length)<4096||(u.start=o,l(d+511>>9)));for(l(n[6]+7>>3);511&s.l;)s.write_shift(-4,j.ENDOFCHAIN);for(o=i=0,c=0;c<e.FileIndex.length;++c)(u=e.FileIndex[c]).content&&(!(d=u.content.length)||d>=4096||(u.start=o,l(d+63>>6)));for(;511&s.l;)s.write_shift(-4,j.ENDOFCHAIN);for(i=0;i<n[4]<<2;++i){var h=e.FullPaths[i];if(h&&0!==h.length){u=e.FileIndex[i],0===i&&(u.start=u.size?u.start-1:x);var p=0===i&&r.root||u.name;if(d=2*(p.length+1),s.write_shift(64,p,"utf16le"),s.write_shift(2,d),s.write_shift(1,u.type),s.write_shift(1,u.color),s.write_shift(-4,u.L),s.write_shift(-4,u.R),s.write_shift(-4,u.C),u.clsid)s.write_shift(16,u.clsid,"hex");else for(c=0;c<4;++c)s.write_shift(4,0);s.write_shift(4,u.state||0),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,u.start),s.write_shift(4,u.size),s.write_shift(4,0)}else{for(c=0;c<17;++c)s.write_shift(4,0);for(c=0;c<3;++c)s.write_shift(4,-1);for(c=0;c<12;++c)s.write_shift(4,0)}}for(i=1;i<e.FileIndex.length;++i)if((u=e.FileIndex[i]).size>=4096)if(s.l=u.start+1<<9,LZ&&Buffer.isBuffer(u.content))u.content.copy(s,s.l,0,u.size),s.l+=u.size+511&-512;else{for(c=0;c<u.size;++c)s.write_shift(1,u.content[c]);for(;511&c;++c)s.write_shift(1,0)}for(i=1;i<e.FileIndex.length;++i)if((u=e.FileIndex[i]).size>0&&u.size<4096)if(LZ&&Buffer.isBuffer(u.content))u.content.copy(s,s.l,0,u.size),s.l+=u.size+63&-64;else{for(c=0;c<u.size;++c)s.write_shift(1,u.content[c]);for(;63&c;++c)s.write_shift(1,0)}if(LZ)s.l=s.length;else for(;s.l<s.length;)s.write_shift(1,0);return s}t.version="1.2.1";var f,g=64,x=-2,y="d0cf11e0a1b11ae1",v=[208,207,17,224,161,177,26,225],b="00000000000000000000000000000000",j={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:x,FREESECT:-1,HEADER_SIGNATURE:y,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:b,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function w(e){for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function N(e){return f?f.deflateRawSync(e):Y(e)}var _=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],k=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],S=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function A(e){var t=139536&(e<<1|e<<11)|558144&(e<<5|e<<15);return 255&(t>>16|t>>8|t)}for(var C="undefined"!==typeof Uint8Array,E=C?new Uint8Array(256):[],T=0;T<256;++T)E[T]=A(T);function P(e,t){var r=E[255&e];return t<=8?r>>>8-t:(r=r<<8|E[e>>8&255],t<=16?r>>>16-t:(r=r<<8|E[e>>16&255])>>>24-t)}function O(e,t){var r=7&t,n=t>>>3;return(e[n]|(r<=6?0:e[n+1]<<8))>>>r&3}function D(e,t){var r=7&t,n=t>>>3;return(e[n]|(r<=5?0:e[n+1]<<8))>>>r&7}function I(e,t){var r=7&t,n=t>>>3;return(e[n]|(r<=3?0:e[n+1]<<8))>>>r&31}function L(e,t){var r=7&t,n=t>>>3;return(e[n]|(r<=1?0:e[n+1]<<8))>>>r&127}function M(e,t,r){var n=7&t,a=t>>>3,s=(1<<r)-1,i=e[a]>>>n;return r<8-n?i&s:(i|=e[a+1]<<8-n,r<16-n?i&s:(i|=e[a+2]<<16-n,r<24-n?i&s:(i|=e[a+3]<<24-n)&s))}function R(e,t,r){var n=7&t,a=t>>>3;return n<=5?e[a]|=(7&r)<<n:(e[a]|=r<<n&255,e[a+1]=(7&r)>>8-n),t+3}function F(e,t,r){return r=(1&r)<<(7&t),e[t>>>3]|=r,t+1}function B(e,t,r){var n=t>>>3;return r<<=7&t,e[n]|=255&r,r>>>=8,e[n+1]=r,t+8}function z(e,t,r){var n=t>>>3;return r<<=7&t,e[n]|=255&r,r>>>=8,e[n+1]=255&r,e[n+2]=r>>>8,t+16}function U(e,t){var r=e.length,n=2*r>t?2*r:t+5,a=0;if(r>=t)return e;if(LZ){var s=FZ(n);if(e.copy)e.copy(s);else for(;a<e.length;++a)s[a]=e[a];return s}if(C){var i=new Uint8Array(n);if(i.set)i.set(e);else for(;a<r;++a)i[a]=e[a];return i}return e.length=n,e}function q(e){for(var t=new Array(e),r=0;r<e;++r)t[r]=0;return t}function W(e,t,r){var n=1,a=0,s=0,i=0,o=0,l=e.length,c=C?new Uint16Array(32):q(32);for(s=0;s<32;++s)c[s]=0;for(s=l;s<r;++s)e[s]=0;l=e.length;var d=C?new Uint16Array(l):q(l);for(s=0;s<l;++s)c[a=e[s]]++,n<a&&(n=a),d[s]=0;for(c[0]=0,s=1;s<=n;++s)c[s+16]=o=o+c[s-1]<<1;for(s=0;s<l;++s)0!=(o=e[s])&&(d[s]=c[o+16]++);var u=0;for(s=0;s<l;++s)if(0!=(u=e[s]))for(o=P(d[s],n)>>n-u,i=(1<<n+4-u)-1;i>=0;--i)t[o|i<<u]=15&u|s<<4;return n}var V=C?new Uint16Array(512):q(512),H=C?new Uint16Array(32):q(32);if(!C){for(var G=0;G<512;++G)V[G]=0;for(G=0;G<32;++G)H[G]=0}!function(){for(var e=[],t=0;t<32;t++)e.push(5);W(e,H,32);var r=[];for(t=0;t<=143;t++)r.push(8);for(;t<=255;t++)r.push(9);for(;t<=279;t++)r.push(7);for(;t<=287;t++)r.push(8);W(r,V,288)}();var K=function(){for(var e=C?new Uint8Array(32768):[],t=0,r=0;t<S.length-1;++t)for(;r<S[t+1];++r)e[r]=t;for(;r<32768;++r)e[r]=29;var n=C?new Uint8Array(259):[];for(t=0,r=0;t<k.length-1;++t)for(;r<k[t+1];++r)n[r]=t;return function(t,r){return t.length<8?function(e,t){for(var r=0;r<e.length;){var n=Math.min(65535,e.length-r),a=r+n==e.length;for(t.write_shift(1,+a),t.write_shift(2,n),t.write_shift(2,65535&~n);n-- >0;)t[t.l++]=e[r++]}return t.l}(t,r):function(t,r){for(var a=0,s=0,i=C?new Uint16Array(32768):[];s<t.length;){var o=Math.min(65535,t.length-s);if(o<10){for(7&(a=R(r,a,+!(s+o!=t.length)))&&(a+=8-(7&a)),r.l=a/8|0,r.write_shift(2,o),r.write_shift(2,65535&~o);o-- >0;)r[r.l++]=t[s++];a=8*r.l}else{a=R(r,a,+!(s+o!=t.length)+2);for(var l=0;o-- >0;){var c=t[s],d=-1,u=0;if((d=i[l=32767&(l<<5^c)])&&((d|=-32768&s)>s&&(d-=32768),d<s))for(;t[d+u]==t[s+u]&&u<250;)++u;if(u>2){(c=n[u])<=22?a=B(r,a,E[c+1]>>1)-1:(B(r,a,3),B(r,a+=5,E[c-23]>>5),a+=3);var h=c<8?0:c-4>>2;h>0&&(z(r,a,u-k[c]),a+=h),c=e[s-d],a=B(r,a,E[c]>>3),a-=3;var m=c<4?0:c-2>>1;m>0&&(z(r,a,s-d-S[c]),a+=m);for(var p=0;p<u;++p)i[l]=32767&s,l=32767&(l<<5^t[s]),++s;o-=u-1}else c<=143?c+=48:a=F(r,a,1),a=B(r,a,E[c]),i[l]=32767&s,++s}a=B(r,a,0)-1}}return r.l=(a+7)/8|0,r.l}(t,r)}}();function Y(e){var t=L2(50+Math.floor(1.1*e.length)),r=K(e,t);return t.slice(0,r)}var X=C?new Uint16Array(32768):q(32768),Q=C?new Uint16Array(32768):q(32768),$=C?new Uint16Array(128):q(128),J=1,Z=1;function ee(e,t){var r=I(e,t)+257,n=I(e,t+=5)+1,a=function(e,t){var r=7&t,n=t>>>3;return(e[n]|(r<=4?0:e[n+1]<<8))>>>r&15}(e,t+=5)+4;t+=4;for(var s=0,i=C?new Uint8Array(19):q(19),o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=1,c=C?new Uint8Array(8):q(8),d=C?new Uint8Array(8):q(8),u=i.length,h=0;h<a;++h)i[_[h]]=s=D(e,t),l<s&&(l=s),c[s]++,t+=3;var m=0;for(c[0]=0,h=1;h<=l;++h)d[h]=m=m+c[h-1]<<1;for(h=0;h<u;++h)0!=(m=i[h])&&(o[h]=d[m]++);var p=0;for(h=0;h<u;++h)if(0!=(p=i[h])){m=E[o[h]]>>8-p;for(var f=(1<<7-p)-1;f>=0;--f)$[m|f<<p]=7&p|h<<3}var g=[];for(l=1;g.length<r+n;)switch(t+=7&(m=$[L(e,t)]),m>>>=3){case 16:for(s=3+O(e,t),t+=2,m=g[g.length-1];s-- >0;)g.push(m);break;case 17:for(s=3+D(e,t),t+=3;s-- >0;)g.push(0);break;case 18:for(s=11+L(e,t),t+=7;s-- >0;)g.push(0);break;default:g.push(m),l<m&&(l=m)}var x=g.slice(0,r),y=g.slice(r);for(h=r;h<286;++h)x[h]=0;for(h=n;h<30;++h)y[h]=0;return J=W(x,X,286),Z=W(y,Q,30),t}function te(e,t){var r=function(e,t){if(3==e[0]&&!(3&e[1]))return[RZ(t),2];for(var r=0,n=0,a=FZ(t||1<<18),s=0,i=a.length>>>0,o=0,l=0;0==(1&n);)if(n=D(e,r),r+=3,n>>>1!=0)for(n>>1==1?(o=9,l=5):(r=ee(e,r),o=J,l=Z);;){!t&&i<s+32767&&(i=(a=U(a,s+32767)).length);var c=M(e,r,o),d=n>>>1==1?V[c]:X[c];if(r+=15&d,0===((d>>>=4)>>>8&255))a[s++]=d;else{if(256==d)break;var u=(d-=257)<8?0:d-4>>2;u>5&&(u=0);var h=s+k[d];u>0&&(h+=M(e,r,u),r+=u),c=M(e,r,l),r+=15&(d=n>>>1==1?H[c]:Q[c]);var m=(d>>>=4)<4?0:d-2>>1,p=S[d];for(m>0&&(p+=M(e,r,m),r+=m),!t&&i<h&&(i=(a=U(a,h+100)).length);s<h;)a[s]=a[s-p],++s}}else{7&r&&(r+=8-(7&r));var f=e[r>>>3]|e[(r>>>3)+1]<<8;if(r+=32,f>0)for(!t&&i<s+f&&(i=(a=U(a,s+f)).length);f-- >0;)a[s++]=e[r>>>3],r+=8}return t?[a,r+7>>>3]:[a.slice(0,s),r+7>>>3]}(e.slice(e.l||0),t);return e.l+=r[1],r[0]}function re(e,t){if(!e)throw new Error(t);"undefined"!==typeof console&&console.error(t)}function ne(e,t){var r=e;D2(r,0);var n={FileIndex:[],FullPaths:[]};h(n,{root:t.root});for(var a=r.length-4;(80!=r[a]||75!=r[a+1]||5!=r[a+2]||6!=r[a+3])&&a>=0;)--a;r.l=a+4,r.l+=4;var i=r.read_shift(2);r.l+=6;var o=r.read_shift(4);for(r.l=o,a=0;a<i;++a){r.l+=20;var l=r.read_shift(4),c=r.read_shift(4),d=r.read_shift(2),u=r.read_shift(2),m=r.read_shift(2);r.l+=8;var p=r.read_shift(4),f=s(r.slice(r.l+d,r.l+d+u));r.l+=d+u+m;var g=r.l;r.l=p+4,ae(r,l,c,n,f),r.l=g}return n}function ae(e,t,r,n,a){e.l+=2;var i=e.read_shift(2),o=e.read_shift(2),l=function(e){var t=65535&e.read_shift(2),r=65535&e.read_shift(2),n=new Date,a=31&r,s=15&(r>>>=5);r>>>=4,n.setMilliseconds(0),n.setFullYear(r+1980),n.setMonth(s-1),n.setDate(a);var i=31&t,o=63&(t>>>=5);return t>>>=6,n.setHours(t),n.setMinutes(o),n.setSeconds(i<<1),n}(e);if(8257&i)throw new Error("Unsupported ZIP encryption");e.read_shift(4);for(var c=e.read_shift(4),d=e.read_shift(4),u=e.read_shift(2),h=e.read_shift(2),m="",p=0;p<u;++p)m+=String.fromCharCode(e[e.l++]);if(h){var g=s(e.slice(e.l,e.l+h));(g[21589]||{}).mt&&(l=g[21589].mt),((a||{})[21589]||{}).mt&&(l=a[21589].mt)}e.l+=h;var x=e.slice(e.l,e.l+c);switch(o){case 8:x=function(e,t){if(!f)return te(e,t);var r=new(0,f.InflateRaw),n=r._processChunk(e.slice(e.l),r._finishFlushFlag);return e.l+=r.bytesRead,n}(e,d);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+o)}var y=!1;8&i&&(134695760==e.read_shift(4)&&(e.read_shift(4),y=!0),c=e.read_shift(4),d=e.read_shift(4)),c!=t&&re(y,"Bad compressed size: "+t+" != "+c),d!=r&&re(y,"Bad uncompressed size: "+r+" != "+d),de(n,m,x,{unsafe:!0,mt:l})}var se={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function ie(e,t){if(e.ctype)return e.ctype;var r=e.name||"",n=r.match(/\.([^\.]+)$/);return n&&se[n[1]]||t&&(n=(r=t).match(/[\.\\]([^\.\\])+$/))&&se[n[1]]?se[n[1]]:"application/octet-stream"}function oe(e){for(var t=DZ(e),r=[],n=0;n<t.length;n+=76)r.push(t.slice(n,n+76));return r.join("\r\n")+"\r\n"}function le(e){var t=e.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(e){var t=e.charCodeAt(0).toString(16).toUpperCase();return"="+(1==t.length?"0"+t:t)});"\n"==(t=t.replace(/ $/gm,"=20").replace(/\t$/gm,"=09")).charAt(0)&&(t="=0D"+t.slice(1));for(var r=[],n=(t=t.replace(/\r(?!\n)/gm,"=0D").replace(/\n\n/gm,"\n=0A").replace(/([^\r\n])\n/gm,"$1=0A")).split("\r\n"),a=0;a<n.length;++a){var s=n[a];if(0!=s.length)for(var i=0;i<s.length;){var o=76,l=s.slice(i,i+o);"="==l.charAt(o-1)?o--:"="==l.charAt(o-2)?o-=2:"="==l.charAt(o-3)&&(o-=3),l=s.slice(i,i+o),(i+=o)<s.length&&(l+="="),r.push(l)}else r.push("")}return r.join("\r\n")}function ce(e,t,r){for(var n,a="",s="",i="",o=0;o<10;++o){var l=t[o];if(!l||l.match(/^\s*$/))break;var c=l.match(/^(.*?):\s*([^\s].*)$/);if(c)switch(c[1].toLowerCase()){case"content-location":a=c[2].trim();break;case"content-type":i=c[2].trim();break;case"content-transfer-encoding":s=c[2].trim()}}switch(++o,s.toLowerCase()){case"base64":n=BZ(IZ(t.slice(o).join("")));break;case"quoted-printable":n=function(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r];r<=e.length&&"="==n.charAt(n.length-1);)n=n.slice(0,n.length-1)+e[++r];t.push(n)}for(var a=0;a<t.length;++a)t[a]=t[a].replace(/[=][0-9A-Fa-f]{2}/g,function(e){return String.fromCharCode(parseInt(e.slice(1),16))});return BZ(t.join("\r\n"))}(t.slice(o));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+s)}var d=de(e,a.slice(r.length),n,{unsafe:!0});i&&(d.ctype=i)}function de(e,t,r,a){var s=a&&a.unsafe;s||h(e);var i=!s&&F0.find(e,t);if(!i){var o=e.FullPaths[0];t.slice(0,o.length)==o?o=t:("/"!=o.slice(-1)&&(o+="/"),o=(o+t).replace("//","/")),i={name:n(t),type:2},e.FileIndex.push(i),e.FullPaths.push(o),s||F0.utils.cfb_gc(e)}return i.content=r,i.size=r?r.length:0,a&&(a.CLSID&&(i.clsid=a.CLSID),a.mt&&(i.mt=a.mt),a.ct&&(i.ct=a.ct)),i}return t.find=function(e,t){var r=e.FullPaths.map(function(e){return e.toUpperCase()}),n=r.map(function(e){var t=e.split("/");return t[t.length-("/"==e.slice(-1)?2:1)]}),a=!1;47===t.charCodeAt(0)?(a=!0,t=r[0].slice(0,-1)+t):a=-1!==t.indexOf("/");var s=t.toUpperCase(),i=!0===a?r.indexOf(s):n.indexOf(s);if(-1!==i)return e.FileIndex[i];var o=!s.match(VZ);for(s=s.replace(WZ,""),o&&(s=s.replace(VZ,"!")),i=0;i<r.length;++i){if((o?r[i].replace(VZ,"!"):r[i]).replace(WZ,"")==s)return e.FileIndex[i];if((o?n[i].replace(VZ,"!"):n[i]).replace(WZ,"")==s)return e.FileIndex[i]}return null},t.read=function(t,r){var n=r&&r.type;switch(n||LZ&&Buffer.isBuffer(t)&&(n="buffer"),n||"base64"){case"file":return function(t,r){return i(),o(e.readFileSync(t),r)}(t,r);case"base64":return o(BZ(IZ(t)),r);case"binary":return o(BZ(t),r)}return o(t,r)},t.parse=o,t.write=function(t,r){var n=p(t,r);switch(r&&r.type||"buffer"){case"file":return i(),e.writeFileSync(r.filename,n),n;case"binary":return"string"==typeof n?n:w(n);case"base64":return DZ("string"==typeof n?n:w(n));case"buffer":if(LZ)return Buffer.isBuffer(n)?n:MZ(n);case"array":return"string"==typeof n?BZ(n):n}return n},t.writeFile=function(t,r,n){i();var a=p(t,n);e.writeFileSync(r,a)},t.utils={cfb_new:function(e){var t={};return h(t,e),t},cfb_add:de,cfb_del:function(e,t){h(e);var r=F0.find(e,t);if(r)for(var n=0;n<e.FileIndex.length;++n)if(e.FileIndex[n]==r)return e.FileIndex.splice(n,1),e.FullPaths.splice(n,1),!0;return!1},cfb_mov:function(e,t,r){h(e);var a=F0.find(e,t);if(a)for(var s=0;s<e.FileIndex.length;++s)if(e.FileIndex[s]==a)return e.FileIndex[s].name=n(r),e.FullPaths[s]=r,!0;return!1},cfb_gc:function(e){m(e,!0)},ReadShift:A2,CheckField:O2,prep_blob:D2,bconcat:qZ,use_zlib:function(e){try{var t=new(0,e.InflateRaw);if(t._processChunk(new Uint8Array([3,0]),t._finishFlushFlag),!t.bytesRead)throw new Error("zlib does not expose bytesRead");f=e}catch(ze){console.error("cannot use native zlib: "+(ze.message||ze))}},_deflateRaw:Y,_inflateRaw:te,consts:j},t}();let B0;function z0(e){return"string"===typeof e?zZ(e):Array.isArray(e)?function(e){if("undefined"===typeof Uint8Array)throw new Error("Unsupported");return new Uint8Array(e)}(e):e}function U0(e,t,r){if("undefined"!==typeof B0&&B0.writeFileSync)return r?B0.writeFileSync(e,t,r):B0.writeFileSync(e,t);if("undefined"!==typeof Deno){if(r&&"string"==typeof t)switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=zZ(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n="utf8"==r?k1(t):t;if("undefined"!==typeof IE_SaveFile)return IE_SaveFile(n,e);if("undefined"!==typeof Blob){var a=new Blob([z0(n)],{type:"application/octet-stream"});if("undefined"!==typeof navigator&&navigator.msSaveBlob)return navigator.msSaveBlob(a,e);if("undefined"!==typeof saveAs)return saveAs(a,e);if("undefined"!==typeof URL&&"undefined"!==typeof document&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(a);if("object"===typeof chrome&&"function"==typeof(chrome.downloads||{}).download)return URL.revokeObjectURL&&"undefined"!==typeof setTimeout&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:e,saveAs:!0});var i=document.createElement("a");if(null!=i.download)return i.download=e,i.href=s,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&"undefined"!==typeof setTimeout&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if("undefined"!==typeof $&&"undefined"!==typeof File&&"undefined"!==typeof Folder)try{var o=File(e);return o.open("w"),o.encoding="binary",Array.isArray(t)&&(t=UZ(t)),o.write(t),o.close(),t}catch(ze){if(!ze.message||!ze.message.match(/onstruct/))throw ze}throw new Error("cannot save file "+e)}function q0(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function W0(e,t){for(var r=[],n=q0(e),a=0;a!==n.length;++a)null==r[e[n[a]][t]]&&(r[e[n[a]][t]]=n[a]);return r}function V0(e){for(var t=[],r=q0(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function H0(e){for(var t=[],r=q0(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}var G0=new Date(1899,11,30,0,0,0);function K0(e,t){var r=e.getTime();return t&&(r-=1263168e5),(r-(G0.getTime()+6e4*(e.getTimezoneOffset()-G0.getTimezoneOffset())))/864e5}var Y0=new Date,X0=G0.getTime()+6e4*(Y0.getTimezoneOffset()-G0.getTimezoneOffset()),Q0=Y0.getTimezoneOffset();function $0(e){var t=new Date;return t.setTime(24*e*60*60*1e3+X0),t.getTimezoneOffset()!==Q0&&t.setTime(t.getTime()+6e4*(t.getTimezoneOffset()-Q0)),t}var J0=new Date("2017-02-19T19:06:09.000Z"),Z0=isNaN(J0.getFullYear())?new Date("2/19/17"):J0,e1=2017==Z0.getFullYear();function t1(e,t){var r=new Date(e);if(e1)return t>0?r.setTime(r.getTime()+60*r.getTimezoneOffset()*1e3):t<0&&r.setTime(r.getTime()-60*r.getTimezoneOffset()*1e3),r;if(e instanceof Date)return e;if(1917==Z0.getFullYear()&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=e.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return e.indexOf("Z")>-1&&(s=new Date(s.getTime()-60*s.getTimezoneOffset()*1e3)),s}function r1(e,t){if(LZ&&Buffer.isBuffer(e)){if(t){if(255==e[0]&&254==e[1])return k1(e.slice(2).toString("utf16le"));if(254==e[1]&&255==e[2])return k1(CZ(e.slice(2).toString("binary")))}return e.toString("binary")}if("undefined"!==typeof TextDecoder)try{if(t){if(255==e[0]&&254==e[1])return k1(new TextDecoder("utf-16le").decode(e.slice(2)));if(254==e[0]&&255==e[1])return k1(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"\u20ac":"\x80","\u201a":"\x82","\u0192":"\x83","\u201e":"\x84","\u2026":"\x85","\u2020":"\x86","\u2021":"\x87","\u02c6":"\x88","\u2030":"\x89","\u0160":"\x8a","\u2039":"\x8b","\u0152":"\x8c","\u017d":"\x8e","\u2018":"\x91","\u2019":"\x92","\u201c":"\x93","\u201d":"\x94","\u2022":"\x95","\u2013":"\x96","\u2014":"\x97","\u02dc":"\x98","\u2122":"\x99","\u0161":"\x9a","\u203a":"\x9b","\u0153":"\x9c","\u017e":"\x9e","\u0178":"\x9f"};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[\u20ac\u201a\u0192\u201e\u2026\u2020\u2021\u02c6\u2030\u0160\u2039\u0152\u017d\u2018\u2019\u201c\u201d\u2022\u2013\u2014\u02dc\u2122\u0161\u203a\u0153\u017e\u0178]/g,function(e){return r[e]||e})}catch(ze){}for(var n=[],a=0;a!=e.length;++a)n.push(String.fromCharCode(e[a]));return n.join("")}function n1(e){if("undefined"!=typeof JSON&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if("object"!=typeof e||null==e)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=n1(e[r]));return t}function a1(e,t){for(var r="";r.length<t;)r+=e;return r}function s1(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return isNaN(t=Number(n))?(n=n.replace(/[(](.*)[)]/,function(e,t){return r=-r,t}),isNaN(t=Number(n))?t:t/r):t/r}var i1=["january","february","march","april","may","june","july","august","september","october","november","december"];function o1(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),a=t.getMonth(),s=t.getDate();if(isNaN(s))return r;var i=e.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if((i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,"")).length>3&&-1==i1.indexOf(i))return r}else if(i.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||s>1)&&101!=n?t:e.match(/[^-0-9:,\/\\]/)?r:t}function l1(e,t,r){if(e.FullPaths){var n;if("string"==typeof r)return n=LZ?MZ(r):function(e){for(var t=[],r=0,n=e.length+250,a=RZ(e.length+255),s=0;s<e.length;++s){var i=e.charCodeAt(s);if(i<128)a[r++]=i;else if(i<2048)a[r++]=192|i>>6&31,a[r++]=128|63&i;else if(i>=55296&&i<57344){i=64+(1023&i);var o=1023&e.charCodeAt(++s);a[r++]=240|i>>8&7,a[r++]=128|i>>2&63,a[r++]=128|o>>6&15|(3&i)<<4,a[r++]=128|63&o}else a[r++]=224|i>>12&15,a[r++]=128|i>>6&63,a[r++]=128|63&i;r>n&&(t.push(a.slice(0,r)),r=0,a=RZ(65535),n=65530)}return t.push(a.slice(0,r)),qZ(t)}(r),F0.utils.cfb_add(e,t,n);F0.utils.cfb_add(e,t,r)}else e.file(t,r)}function c1(){return F0.utils.cfb_new()}var d1='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n';var u1={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},h1=V0(u1),m1=/[&<>'"]/g,p1=/[\u0000-\u0008\u000b-\u001f]/g;function f1(e){return(e+"").replace(m1,function(e){return h1[e]}).replace(p1,function(e){return"_x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+"_"})}function g1(e){return f1(e).replace(/ /g,"_x0020_")}var x1=/[\u0000-\u001f]/g;function y1(e){return(e+"").replace(m1,function(e){return h1[e]}).replace(/\n/g,"<br/>").replace(x1,function(e){return"&#x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+";"})}function v1(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function b1(e){for(var t="",r=0,n=0,a=0,s=0,i=0,o=0;r<e.length;)(n=e.charCodeAt(r++))<128?t+=String.fromCharCode(n):(a=e.charCodeAt(r++),n>191&&n<224?(i=(31&n)<<6,i|=63&a,t+=String.fromCharCode(i)):(s=e.charCodeAt(r++),n<240?t+=String.fromCharCode((15&n)<<12|(63&a)<<6|63&s):(o=((7&n)<<18|(63&a)<<12|(63&s)<<6|63&(i=e.charCodeAt(r++)))-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(1023&o)))));return t}function j1(e){var t,r,n,a=RZ(2*e.length),s=1,i=0,o=0;for(r=0;r<e.length;r+=s)s=1,(n=e.charCodeAt(r))<128?t=n:n<224?(t=64*(31&n)+(63&e.charCodeAt(r+1)),s=2):n<240?(t=4096*(15&n)+64*(63&e.charCodeAt(r+1))+(63&e.charCodeAt(r+2)),s=3):(s=4,t=262144*(7&n)+4096*(63&e.charCodeAt(r+1))+64*(63&e.charCodeAt(r+2))+(63&e.charCodeAt(r+3)),o=55296+((t-=65536)>>>10&1023),t=56320+(1023&t)),0!==o&&(a[i++]=255&o,a[i++]=o>>>8,o=0),a[i++]=t%256,a[i++]=t>>>8;return a.slice(0,i).toString("ucs2")}function w1(e){return MZ(e,"binary").toString("utf8")}var N1="foo bar baz\xe2\x98\x83\xf0\x9f\x8d\xa3",_1=LZ&&(w1(N1)==b1(N1)&&w1||j1(N1)==b1(N1)&&j1)||b1,k1=LZ?function(e){return MZ(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,a=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(63&n)));break;case n>=55296&&n<57344:n-=55296,a=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(a>>18&7))),t.push(String.fromCharCode(144+(a>>12&63))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(63&a)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(63&n)))}return t.join("")},S1=function(){var e=[["nbsp"," "],["middot","\xb7"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(t){for(var r=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,"\n").replace(/<[^>]*>/g,""),n=0;n<e.length;++n)r=r.replace(e[n][0],e[n][1]);return r}}();var A1=/(^\s|\s$|\n)/;function C1(e,t){return"<"+e+(t.match(A1)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function E1(e){return q0(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function T1(e,t,r){return"<"+e+(null!=r?E1(r):"")+(null!=t?(t.match(A1)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function P1(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(ze){if(t)throw ze}return""}var O1="http://schemas.openxmlformats.org/package/2006/metadata/core-properties",D1="http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",I1="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",L1="http://schemas.openxmlformats.org/package/2006/content-types",M1="http://schemas.openxmlformats.org/package/2006/relationships",R1="http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",F1="http://purl.org/dc/elements/1.1/",B1="http://purl.org/dc/terms/",z1="http://purl.org/dc/dcmitype/",U1="http://schemas.openxmlformats.org/officeDocument/2006/relationships",q1="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",W1="http://www.w3.org/2001/XMLSchema-instance",V1="http://www.w3.org/2001/XMLSchema",H1=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],G1="urn:schemas-microsoft-com:office:office",K1="urn:schemas-microsoft-com:office:excel",Y1="urn:schemas-microsoft-com:office:spreadsheet",X1="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",Q1="http://macVmlSchemaUri",$1="urn:schemas-microsoft-com:vml",J1="http://www.w3.org/TR/REC-html40";var Z1=function(e){for(var t=[],r=0;r<e[0].length;++r)if(e[0][r])for(var n=0,a=e[0][r].length;n<a;n+=10240)t.push.apply(t,e[0][r].slice(n,n+10240));return t},e2=LZ?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(e){return Buffer.isBuffer(e)?e:MZ(e)})):Z1(e)}:Z1,t2=function(e,t,r){for(var n=[],a=t;a<r;a+=2)n.push(String.fromCharCode(w2(e,a)));return n.join("").replace(WZ,"")},r2=LZ?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(WZ,""):t2(e,t,r)}:t2,n2=function(e,t,r){for(var n=[],a=t;a<t+r;++a)n.push(("0"+e[a].toString(16)).slice(-2));return n.join("")},a2=LZ?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):n2(e,t,r)}:n2,s2=function(e,t,r){for(var n=[],a=t;a<r;a++)n.push(String.fromCharCode(j2(e,a)));return n.join("")},i2=LZ?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf8",t,r):s2(e,t,r)}:s2,o2=function(e,t){var r=_2(e,t);return r>0?i2(e,t+4,t+4+r-1):""},l2=o2,c2=function(e,t){var r=_2(e,t);return r>0?i2(e,t+4,t+4+r-1):""},d2=c2,u2=function(e,t){var r=2*_2(e,t);return r>0?i2(e,t+4,t+4+r-1):""},h2=u2,m2=function(e,t){var r=_2(e,t);return r>0?r2(e,t+4,t+4+r):""},p2=m2,f2=function(e,t){var r=_2(e,t);return r>0?i2(e,t+4,t+4+r):""},g2=f2,x2=function(e,t){return function(e,t){for(var r=1-2*(e[t+7]>>>7),n=((127&e[t+7])<<4)+(e[t+6]>>>4&15),a=15&e[t+6],s=5;s>=0;--s)a=256*a+e[t+s];return 2047==n?0==a?r*(1/0):NaN:(0==n?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}(e,t)},y2=x2,v2=function(e){return Array.isArray(e)||"undefined"!==typeof Uint8Array&&e instanceof Uint8Array};function b2(){r2=function(e,t,r){return EZ.utils.decode(1200,e.slice(t,r)).replace(WZ,"")},i2=function(e,t,r){return EZ.utils.decode(65001,e.slice(t,r))},l2=function(e,t){var r=_2(e,t);return r>0?EZ.utils.decode(wZ,e.slice(t+4,t+4+r-1)):""},d2=function(e,t){var r=_2(e,t);return r>0?EZ.utils.decode(jZ,e.slice(t+4,t+4+r-1)):""},h2=function(e,t){var r=2*_2(e,t);return r>0?EZ.utils.decode(1200,e.slice(t+4,t+4+r-1)):""},p2=function(e,t){var r=_2(e,t);return r>0?EZ.utils.decode(1200,e.slice(t+4,t+4+r)):""},g2=function(e,t){var r=_2(e,t);return r>0?EZ.utils.decode(65001,e.slice(t+4,t+4+r)):""}}LZ&&(l2=function(e,t){if(!Buffer.isBuffer(e))return o2(e,t);var r=e.readUInt32LE(t);return r>0?e.toString("utf8",t+4,t+4+r-1):""},d2=function(e,t){if(!Buffer.isBuffer(e))return c2(e,t);var r=e.readUInt32LE(t);return r>0?e.toString("utf8",t+4,t+4+r-1):""},h2=function(e,t){if(!Buffer.isBuffer(e))return u2(e,t);var r=2*e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+r-1)},p2=function(e,t){if(!Buffer.isBuffer(e))return m2(e,t);var r=e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+r)},g2=function(e,t){if(!Buffer.isBuffer(e))return f2(e,t);var r=e.readUInt32LE(t);return e.toString("utf8",t+4,t+4+r)},y2=function(e,t){return Buffer.isBuffer(e)?e.readDoubleLE(t):x2(e,t)},v2=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||"undefined"!==typeof Uint8Array&&e instanceof Uint8Array}),"undefined"!==typeof EZ&&b2();var j2=function(e,t){return e[t]},w2=function(e,t){return 256*e[t+1]+e[t]},N2=function(e,t){var r=256*e[t+1]+e[t];return r<32768?r:-1*(65535-r+1)},_2=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},k2=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},S2=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function A2(e,t){var r,n,a,s,i,o,l="",c=[];switch(t){case"dbcs":if(o=this.l,LZ&&Buffer.isBuffer(this))l=this.slice(this.l,this.l+2*e).toString("utf16le");else for(i=0;i<e;++i)l+=String.fromCharCode(w2(this,o)),o+=2;e*=2;break;case"utf8":l=i2(this,this.l,this.l+e);break;case"utf16le":e*=2,l=r2(this,this.l,this.l+e);break;case"wstr":if("undefined"===typeof EZ)return A2.call(this,e,"dbcs");l=EZ.utils.decode(jZ,this.slice(this.l,this.l+2*e)),e*=2;break;case"lpstr-ansi":l=l2(this,this.l),e=4+_2(this,this.l);break;case"lpstr-cp":l=d2(this,this.l),e=4+_2(this,this.l);break;case"lpwstr":l=h2(this,this.l),e=4+2*_2(this,this.l);break;case"lpp4":e=4+_2(this,this.l),l=p2(this,this.l),2&e&&(e+=2);break;case"8lpp4":e=4+_2(this,this.l),l=g2(this,this.l),3&e&&(e+=4-(3&e));break;case"cstr":for(e=0,l="";0!==(a=j2(this,this.l+e++));)c.push(TZ(a));l=c.join("");break;case"_wstr":for(e=0,l="";0!==(a=w2(this,this.l+e));)c.push(TZ(a)),e+=2;e+=2,l=c.join("");break;case"dbcs-cont":for(l="",o=this.l,i=0;i<e;++i){if(this.lens&&-1!==this.lens.indexOf(o))return a=j2(this,o),this.l=o+1,s=A2.call(this,e-i,a?"dbcs-cont":"sbcs-cont"),c.join("")+s;c.push(TZ(w2(this,o))),o+=2}l=c.join(""),e*=2;break;case"cpstr":if("undefined"!==typeof EZ){l=EZ.utils.decode(jZ,this.slice(this.l,this.l+e));break}case"sbcs-cont":for(l="",o=this.l,i=0;i!=e;++i){if(this.lens&&-1!==this.lens.indexOf(o))return a=j2(this,o),this.l=o+1,s=A2.call(this,e-i,a?"dbcs-cont":"sbcs-cont"),c.join("")+s;c.push(TZ(j2(this,o))),o+=1}l=c.join("");break;default:switch(e){case 1:return r=j2(this,this.l),this.l++,r;case 2:return r=("i"===t?N2:w2)(this,this.l),this.l+=2,r;case 4:case-4:return"i"===t||0===(128&this[this.l+3])?(r=(e>0?k2:S2)(this,this.l),this.l+=4,r):(n=_2(this,this.l),this.l+=4,n);case 8:case-8:if("f"===t)return n=8==e?y2(this,this.l):y2([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,n;e=8;case 16:l=a2(this,this.l,e)}}return this.l+=e,l}var C2=function(e,t,r){e[r]=255&t,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},E2=function(e,t,r){e[r]=255&t,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},T2=function(e,t,r){e[r]=255&t,e[r+1]=t>>>8&255};function P2(e,t,r){var n=0,a=0;if("dbcs"===r){for(a=0;a!=t.length;++a)T2(this,t.charCodeAt(a),this.l+2*a);n=2*t.length}else if("sbcs"===r){if("undefined"!==typeof EZ&&874==wZ)for(a=0;a!=t.length;++a){var s=EZ.utils.encode(wZ,t.charAt(a));this[this.l+a]=s[0]}else for(t=t.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=t.length;++a)this[this.l+a]=255&t.charCodeAt(a);n=t.length}else{if("hex"===r){for(;a<e;++a)this[this.l++]=parseInt(t.slice(2*a,2*a+2),16)||0;return this}if("utf16le"===r){var i=Math.min(this.l+e,this.length);for(a=0;a<Math.min(t.length,e);++a){var o=t.charCodeAt(a);this[this.l++]=255&o,this[this.l++]=o>>8}for(;this.l<i;)this[this.l++]=0;return this}switch(e){case 1:n=1,this[this.l]=255&t;break;case 2:n=2,this[this.l]=255&t,t>>>=8,this[this.l+1]=255&t;break;case 3:n=3,this[this.l]=255&t,t>>>=8,this[this.l+1]=255&t,t>>>=8,this[this.l+2]=255&t;break;case 4:n=4,C2(this,t,this.l);break;case 8:if(n=8,"f"===r){!function(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,a=0,s=0,i=n?-t:t;isFinite(i)?0==i?a=s=0:(a=Math.floor(Math.log(i)/Math.LN2),s=i*Math.pow(2,52-a),a<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?a=-1022:(s-=Math.pow(2,52),a+=1023)):(a=2047,s=isNaN(t)?26985:0);for(var o=0;o<=5;++o,s/=256)e[r+o]=255&s;e[r+6]=(15&a)<<4|15&s,e[r+7]=a>>4|n}(this,t,this.l);break}case 16:break;case-4:n=4,E2(this,t,this.l)}}return this.l+=n,this}function O2(e,t){var r=a2(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function D2(e,t){e.l=t,e.read_shift=A2,e.chk=O2,e.write_shift=P2}function I2(e,t){e.l+=t}function L2(e){var t=RZ(e);return D2(t,0),t}function M2(){var e=[],t=LZ?256:2048,r=function(e){var t=L2(e);return D2(t,0),t},n=r(t),a=function(){n&&(n.length>n.l&&((n=n.slice(0,n.l)).l=n.length),n.length>0&&e.push(n),n=null)},s=function(e){return n&&e<n.length-n.l?n:(a(),n=r(Math.max(e+1,t)))};return{next:s,push:function(e){a(),null==(n=e).l&&(n.l=n.length),s(t)},end:function(){return a(),qZ(e)},_bufs:e}}function R2(e,t,r,n){var a,s=+t;if(!isNaN(s)){n||(n=J6[s].p||(r||[]).length||0),a=1+(s>=128?1:0)+1,n>=128&&++a,n>=16384&&++a,n>=2097152&&++a;var i=e.next(a);s<=127?i.write_shift(1,s):(i.write_shift(1,128+(127&s)),i.write_shift(1,s>>7));for(var o=0;4!=o;++o){if(!(n>=128)){i.write_shift(1,n);break}i.write_shift(1,128+(127&n)),n>>=7}n>0&&v2(r)&&e.push(r)}}function F2(e,t,r){var n=n1(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function B2(e,t,r){var n=n1(e);return n.s=F2(n.s,t.s,r),n.e=F2(n.e,t.s,r),n}function z2(e,t){if(e.cRel&&e.c<0)for(e=n1(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=n1(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=K2(e);return e.cRel||null==e.cRel||(r=r.replace(/^([A-Z])/,"$$$1")),e.rRel||null==e.rRel||(r=function(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}(r)),r}function U2(e,t){return 0!=e.s.r||e.s.rRel||e.e.r!=(t.biff>=12?1048575:t.biff>=8?65536:16384)||e.e.rRel?0!=e.s.c||e.s.cRel||e.e.c!=(t.biff>=12?16383:255)||e.e.cRel?z2(e.s,t.biff)+":"+z2(e.e,t.biff):(e.s.rRel?"":"$")+W2(e.s.r)+":"+(e.e.rRel?"":"$")+W2(e.e.r):(e.s.cRel?"":"$")+H2(e.s.c)+":"+(e.e.cRel?"":"$")+H2(e.e.c)}function q2(e){return parseInt(e.replace(/\$(\d+)$/,"$1"),10)-1}function W2(e){return""+(e+1)}function V2(e){for(var t=e.replace(/^\$([A-Z])/,"$1"),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function H2(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function G2(e){for(var t=0,r=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a>=48&&a<=57?t=10*t+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:t-1}}function K2(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function Y2(e){var t=e.indexOf(":");return-1==t?{s:G2(e),e:G2(e)}:{s:G2(e.slice(0,t)),e:G2(e.slice(t+1))}}function X2(e,t){return"undefined"===typeof t||"number"===typeof t?X2(e.s,e.e):("string"!==typeof e&&(e=K2(e)),"string"!==typeof t&&(t=K2(t)),e==t?e:e+":"+t)}function Q2(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,s=e.length;for(r=0;n<s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.s.c=--r,r=0;n<s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(t.s.r=--r,n===s||10!=a)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.e.c=--r,r=0;n!=s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return t.e.r=--r,t}function $2(e,t){var r="d"==e.t&&t instanceof Date;if(null!=e.z)try{return e.w=O0(e.z,r?K0(t):t)}catch(ze){}try{return e.w=O0((e.XF||{}).numFmtId||(r?14:0),r?K0(t):t)}catch(ze){return""+t}}function J2(e,t,r){return null==e||null==e.t||"z"==e.t?"":void 0!==e.w?e.w:("d"==e.t&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),"e"==e.t?D5[e.v]||e.v:$2(e,void 0==t?e.v:t))}function Z2(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function e5(e,t,r){var n=r||{},a=e?Array.isArray(e):n.dense;var s=e||(a?[]:{}),i=0,o=0;if(s&&null!=n.origin){if("number"==typeof n.origin)i=n.origin;else{var l="string"==typeof n.origin?G2(n.origin):n.origin;i=l.r,o=l.c}s["!ref"]||(s["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=Q2(s["!ref"]);c.s.c=d.s.c,c.s.r=d.s.r,c.e.c=Math.max(c.e.c,d.e.c),c.e.r=Math.max(c.e.r,d.e.r),-1==i&&(c.e.r=i=d.e.r+1)}for(var u=0;u!=t.length;++u)if(t[u]){if(!Array.isArray(t[u]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=t[u].length;++h)if("undefined"!==typeof t[u][h]){var m={v:t[u][h]},p=i+u,f=o+h;if(c.s.r>p&&(c.s.r=p),c.s.c>f&&(c.s.c=f),c.e.r<p&&(c.e.r=p),c.e.c<f&&(c.e.c=f),!t[u][h]||"object"!==typeof t[u][h]||Array.isArray(t[u][h])||t[u][h]instanceof Date)if(Array.isArray(m.v)&&(m.f=t[u][h][1],m.v=m.v[0]),null===m.v)if(m.f)m.t="n";else if(n.nullError)m.t="e",m.v=0;else{if(!n.sheetStubs)continue;m.t="z"}else"number"===typeof m.v?m.t="n":"boolean"===typeof m.v?m.t="b":m.v instanceof Date?(m.z=n.dateNF||e0[14],n.cellDates?(m.t="d",m.w=O0(m.z,K0(m.v))):(m.t="n",m.v=K0(m.v),m.w=O0(m.z,m.v))):m.t="s";else m=t[u][h];if(a)s[p]||(s[p]=[]),s[p][f]&&s[p][f].z&&(m.z=s[p][f].z),s[p][f]=m;else{var g=K2({c:f,r:p});s[g]&&s[g].z&&(m.z=s[g].z),s[g]=m}}}return c.s.c<1e7&&(s["!ref"]=X2(c)),s}function t5(e,t){return e5(null,e,t)}function r5(e,t){return t||(t=L2(4)),t.write_shift(4,e),t}function n5(e){var t=e.read_shift(4);return 0===t?"":e.read_shift(t,"dbcs")}function a5(e,t){var r=!1;return null==t&&(r=!0,t=L2(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function s5(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function i5(e,t){var r=e.l,n=e.read_shift(1),a=n5(e),s=[],i={t:a,h:a};if(0!==(1&n)){for(var o=e.read_shift(4),l=0;l!=o;++l)s.push(s5(e));i.r=s}else i.r=[{ich:0,ifnt:0}];return e.l=r+t,i}var o5=i5;function l5(e,t){var r=!1;return null==t&&(r=!0,t=L2(23+4*e.t.length)),t.write_shift(1,1),a5(e.t,t),t.write_shift(4,1),function(e,t){t||(t=L2(4)),t.write_shift(2,e.ich||0),t.write_shift(2,e.ifnt||0)}({ich:0,ifnt:0},t),r?t.slice(0,t.l):t}function c5(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function d5(e,t){return null==t&&(t=L2(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function u5(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function h5(e,t){return null==t&&(t=L2(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var m5=n5,p5=a5;function f5(e){var t=e.read_shift(4);return 0===t||4294967295===t?"":e.read_shift(t,"dbcs")}function g5(e,t){var r=!1;return null==t&&(r=!0,t=L2(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var x5=n5,y5=f5,v5=g5;function b5(e){var t=e.slice(e.l,e.l+4),r=1&t[0],n=2&t[0];e.l+=4;var a=0===n?y2([0,0,0,0,252&t[0],t[1],t[2],t[3]],0):k2(t,0)>>2;return r?a/100:a}function j5(e,t){null==t&&(t=L2(4));var r=0,n=0,a=100*e;if(e==(0|e)&&e>=-(1<<29)&&e<1<<29?n=1:a==(0|a)&&a>=-(1<<29)&&a<1<<29&&(n=1,r=1),!n)throw new Error("unsupported RkNumber "+e);t.write_shift(-4,((r?a:e)<<2)+(r+2))}function w5(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}var N5=w5,_5=function(e,t){return t||(t=L2(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t};function k5(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function S5(e,t){return(t||L2(8)).write_shift(8,e,"f")}function A5(e,t){if(t||(t=L2(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;null!=e.index?(t.write_shift(1,2),t.write_shift(1,e.index)):null!=e.theme?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),e.rgb&&null==e.theme){var n=e.rgb||"FFFFFF";"number"==typeof n&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}else t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);return t}var C5=80,E5={1:{n:"CodePage",t:2},2:{n:"Category",t:C5},3:{n:"PresentationFormat",t:C5},4:{n:"ByteCount",t:3},5:{n:"LineCount",t:3},6:{n:"ParagraphCount",t:3},7:{n:"SlideCount",t:3},8:{n:"NoteCount",t:3},9:{n:"HiddenCount",t:3},10:{n:"MultimediaClipCount",t:3},11:{n:"ScaleCrop",t:11},12:{n:"HeadingPairs",t:4108},13:{n:"TitlesOfParts",t:4126},14:{n:"Manager",t:C5},15:{n:"Company",t:C5},16:{n:"LinksUpToDate",t:11},17:{n:"CharacterCount",t:3},19:{n:"SharedDoc",t:11},22:{n:"HyperlinksChanged",t:11},23:{n:"AppVersion",t:3,p:"version"},24:{n:"DigSig",t:65},26:{n:"ContentType",t:C5},27:{n:"ContentStatus",t:C5},28:{n:"Language",t:C5},29:{n:"Version",t:C5},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}},T5={1:{n:"CodePage",t:2},2:{n:"Title",t:C5},3:{n:"Subject",t:C5},4:{n:"Author",t:C5},5:{n:"Keywords",t:C5},6:{n:"Comments",t:C5},7:{n:"Template",t:C5},8:{n:"LastAuthor",t:C5},9:{n:"RevNumber",t:C5},10:{n:"EditTime",t:64},11:{n:"LastPrinted",t:64},12:{n:"CreatedDate",t:64},13:{n:"ModifiedDate",t:64},14:{n:"PageCount",t:3},15:{n:"WordCount",t:3},16:{n:"CharCount",t:3},17:{n:"Thumbnail",t:71},18:{n:"Application",t:C5},19:{n:"DocSecurity",t:3},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}};function P5(e){return e.map(function(e){return[e>>16&255,e>>8&255,255&e]})}var O5=n1(P5([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),D5={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},I5={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},L5={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function M5(e,t){var r,n=function(e){for(var t=[],r=q0(e),n=0;n!==r.length;++n)null==t[e[r[n]]]&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}(I5),a=[];a[a.length]=d1,a[a.length]=T1("Types",null,{xmlns:L1,"xmlns:xsd":V1,"xmlns:xsi":W1}),a=a.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(e){return T1("Default",null,{Extension:e[0],ContentType:e[1]})}));var s=function(n){e[n]&&e[n].length>0&&(r=e[n][0],a[a.length]=T1("Override",null,{PartName:("/"==r[0]?"":"/")+r,ContentType:L5[n][t.bookType]||L5[n].xlsx}))},i=function(r){(e[r]||[]).forEach(function(e){a[a.length]=T1("Override",null,{PartName:("/"==e[0]?"":"/")+e,ContentType:L5[r][t.bookType]||L5[r].xlsx})})},o=function(t){(e[t]||[]).forEach(function(e){a[a.length]=T1("Override",null,{PartName:("/"==e[0]?"":"/")+e,ContentType:n[t][0]})})};return s("workbooks"),i("sheets"),i("charts"),o("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),i("metadata"),o("people"),a.length>2&&(a[a.length]="</Types>",a[1]=a[1].replace("/>",">")),a.join("")}var R5={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function F5(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function B5(e){var t=[d1,T1("Relationships",null,{xmlns:M1})];return q0(e["!id"]).forEach(function(r){t[t.length]=T1("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function z5(e,t,r,n,a,s){if(a||(a={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,a.Id="rId"+t,a.Type=n,a.Target=r,s?a.TargetMode=s:[R5.HLINK,R5.XPATH,R5.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),e["!id"][a.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][a.Id]=a,e[("/"+a.Target).replace("//","/")]=a,t}function U5(e,t,r){return['  <rdf:Description rdf:about="'+e+'">\n','    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+'"/>\n',"  </rdf:Description>\n"].join("")}function q5(e,t){return['  <rdf:Description rdf:about="'+e+'">\n','    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+'"/>\n',"  </rdf:Description>\n"].join("")}function W5(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+bZ.version+"</meta:generator></office:meta></office:document-meta>"}var V5=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function H5(e,t,r,n,a){null==a[e]&&null!=t&&""!==t&&(a[e]=t,t=f1(t),n[n.length]=r?T1(e,t,r):C1(e,t))}function G5(e,t){var r=t||{},n=[d1,T1("cp:coreProperties",null,{"xmlns:cp":O1,"xmlns:dc":F1,"xmlns:dcterms":B1,"xmlns:dcmitype":z1,"xmlns:xsi":W1})],a={};if(!e&&!r.Props)return n.join("");e&&(null!=e.CreatedDate&&H5("dcterms:created","string"===typeof e.CreatedDate?e.CreatedDate:P1(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),null!=e.ModifiedDate&&H5("dcterms:modified","string"===typeof e.ModifiedDate?e.ModifiedDate:P1(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var s=0;s!=V5.length;++s){var i=V5[s],o=r.Props&&null!=r.Props[i[1]]?r.Props[i[1]]:e?e[i[1]]:null;!0===o?o="1":!1===o?o="0":"number"==typeof o&&(o=String(o)),null!=o&&H5(i[0],o,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var K5=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],Y5=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function X5(e){var t=[],r=T1;return e||(e={}),e.Application="SheetJS",t[t.length]=d1,t[t.length]=T1("Properties",null,{xmlns:I1,"xmlns:vt":q1}),K5.forEach(function(n){if(void 0!==e[n[1]]){var a;switch(n[2]){case"string":a=f1(String(e[n[1]]));break;case"bool":a=e[n[1]]?"true":"false"}void 0!==a&&(t[t.length]=r(n[0],a))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(e){return"<vt:lpstr>"+f1(e)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}function Q5(e){var t=[d1,T1("Properties",null,{xmlns:D1,"xmlns:vt":q1})];if(!e)return t.join("");var r=1;return q0(e).forEach(function(n){++r,t[t.length]=T1("property",function(e,t){switch(typeof e){case"string":var r=T1("vt:lpwstr",f1(e));return t&&(r=r.replace(/&quot;/g,"_x0022_")),r;case"number":return T1((0|e)==e?"vt:i4":"vt:r8",f1(String(e)));case"boolean":return T1("vt:bool",e?"true":"false")}if(e instanceof Date)return T1("vt:filetime",P1(e));throw new Error("Unable to serialize "+e)}(e[n],!0),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:f1(n)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var $5={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function J5(e,t){var r=L2(4),n=L2(4);switch(r.write_shift(4,80==e?31:e),e){case 3:n.write_shift(-4,t);break;case 5:(n=L2(8)).write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=function(e){var t=("string"==typeof e?new Date(Date.parse(e)):e).getTime()/1e3+11644473600,r=t%Math.pow(2,32),n=(t-r)/Math.pow(2,32);n*=1e7;var a=(r*=1e7)/Math.pow(2,32)|0;a>0&&(r%=Math.pow(2,32),n+=a);var s=L2(8);return s.write_shift(4,r),s.write_shift(4,n),s}(t);break;case 31:case 80:for((n=L2(4+2*(t.length+1)+(t.length%2?0:2))).write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return qZ([r,n])}var Z5=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function e3(e){switch(typeof e){case"boolean":return 11;case"number":return(0|e)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64}return-1}function t3(e,t,r){var n=L2(8),a=[],s=[],i=8,o=0,l=L2(8),c=L2(8);if(l.write_shift(4,2),l.write_shift(4,1200),c.write_shift(4,1),s.push(l),a.push(c),i+=8+l.length,!t){(c=L2(8)).write_shift(4,0),a.unshift(c);var d=[L2(4)];for(d[0].write_shift(4,e.length),o=0;o<e.length;++o){var u=e[o][0];for((l=L2(8+2*(u.length+1)+(u.length%2?0:2))).write_shift(4,o+2),l.write_shift(4,u.length+1),l.write_shift(0,u,"dbcs");l.l!=l.length;)l.write_shift(1,0);d.push(l)}l=qZ(d),s.unshift(l),i+=8+l.length}for(o=0;o<e.length;++o)if((!t||t[e[o][0]])&&!(Z5.indexOf(e[o][0])>-1||Y5.indexOf(e[o][0])>-1)&&null!=e[o][1]){var h=e[o][1],m=0;if(t){var p=r[m=+t[e[o][0]]];if("version"==p.p&&"string"==typeof h){var f=h.split(".");h=(+f[0]<<16)+(+f[1]||0)}l=J5(p.t,h)}else{var g=e3(h);-1==g&&(g=31,h=String(h)),l=J5(g,h)}s.push(l),(c=L2(8)).write_shift(4,t?m:2+o),a.push(c),i+=8+l.length}var x=8*(s.length+1);for(o=0;o<s.length;++o)a[o].write_shift(4,x),x+=s[o].length;return n.write_shift(4,i),n.write_shift(4,s.length),qZ([n].concat(a).concat(s))}function r3(e,t,r,n,a,s){var i=L2(a?68:48),o=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,F0.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,a?2:1),i.write_shift(16,t,"hex"),i.write_shift(4,a?68:48);var l=t3(e,r,n);if(o.push(l),a){var c=t3(a,null,null);i.write_shift(16,s,"hex"),i.write_shift(4,68+l.length),o.push(c)}return qZ(o)}function n3(e,t){return 1===e.read_shift(t)}function a3(e,t){return t||(t=L2(2)),t.write_shift(2,+!!e),t}function s3(e){return e.read_shift(2,"u")}function i3(e,t){return t||(t=L2(2)),t.write_shift(2,e),t}function o3(e,t,r){return r||(r=L2(2)),r.write_shift(1,"e"==t?+e:+!!e),r.write_shift(1,"e"==t?1:0),r}function l3(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont",s=jZ;(r&&r.biff>=8&&(jZ=1200),r&&8!=r.biff)?12==r.biff&&(a="wstr"):e.read_shift(1)&&(a="dbcs-cont");r.biff>=2&&r.biff<=5&&(a="cpstr");var i=n?e.read_shift(n,a):"";return jZ=s,i}function c3(e){var t=e.t||"",r=L2(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=L2(2*t.length);return n.write_shift(2*t.length,t,"utf16le"),qZ([r,n])}function d3(e,t,r){if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}return 0===e.read_shift(1)?e.read_shift(t,"sbcs-cont"):e.read_shift(t,"dbcs-cont")}function u3(e,t,r){var n=e.read_shift(r&&2==r.biff?1:2);return 0===n?(e.l++,""):d3(e,n,r)}function h3(e,t,r){if(r.biff>5)return u3(e,0,r);var n=e.read_shift(1);return 0===n?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function m3(e,t,r){return r||(r=L2(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function p3(e,t){t||(t=L2(6+2*e.length)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function f3(e){var t=L2(512),r=0,n=e.Target;"file://"==n.slice(0,7)&&(n=n.slice(7));var a=n.indexOf("#"),s=a>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3}t.write_shift(4,2),t.write_shift(4,s);var i=[8,6815827,6619237,4849780,83];for(r=0;r<i.length;++r)t.write_shift(4,i[r]);if(28==s)p3(n=n.slice(1),t);else if(2&s){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));var o=a>-1?n.slice(0,a):n;for(t.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)t.write_shift(2,o.charCodeAt(r));t.write_shift(2,0),8&s&&p3(a>-1?n.slice(a+1):"",t)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));for(var l=0;"../"==n.slice(3*l,3*l+3)||"..\\"==n.slice(3*l,3*l+3);)++l;for(t.write_shift(2,l),t.write_shift(4,n.length-3*l+1),r=0;r<n.length-3*l;++r)t.write_shift(1,255&n.charCodeAt(r+3*l));for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function g3(e,t,r,n){return n||(n=L2(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function x3(e,t,r){var n=r.biff>8?4:2;return[e.read_shift(n),e.read_shift(n,"i"),e.read_shift(n,"i")]}function y3(e){var t=e.read_shift(2),r=e.read_shift(2);return{s:{c:e.read_shift(2),r:t},e:{c:e.read_shift(2),r:r}}}function v3(e,t){return t||(t=L2(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function b3(e,t,r){var n=1536,a=16;switch(r.bookType){case"biff8":case"xla":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;default:throw new Error("unsupported BIFF version")}var s=L2(a);return s.write_shift(2,n),s.write_shift(2,t),a>4&&s.write_shift(2,29282),a>6&&s.write_shift(2,1997),a>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function j3(e,t){var r=!t||t.biff>=8?2:1,n=L2(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function w3(e,t,r,n){var a=r&&5==r.biff;n||(n=L2(a?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(a?1:2,t.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*t.length,t,a?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return null==s.l&&(s.l=s.length),s}function N3(e,t,r,n){var a=r&&5==r.biff;n||(n=L2(a?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var s=0;return e.numFmtId>0&&a&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function _3(e,t,r){if(r.biff<8)return function(e,t,r){3==e[e.l+1]&&e[e.l]++;var n=l3(e,0,r);return 3==n.charCodeAt(0)?n.slice(1):n}(e,0,r);for(var n=[],a=e.l+t,s=e.read_shift(r.biff>8?4:2);0!==s--;)n.push(x3(e,r.biff,r));if(e.l!=a)throw new Error("Bad ExternSheet: "+e.l+" != "+a);return n}function k3(e){var t=L2(24),r=G2(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)t.write_shift(1,parseInt(n[a],16));return qZ([t,f3(e[1])])}function S3(e){var t=e[1].Tooltip,r=L2(10+2*(t.length+1));r.write_shift(2,2048);var n=G2(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<t.length;++a)r.write_shift(2,t.charCodeAt(a));return r.write_shift(2,0),r}function A3(e,t,r){if(!r.cellStyles)return I2(e,t);var n=r&&r.biff>=12?4:2,a=e.read_shift(n),s=e.read_shift(n),i=e.read_shift(n),o=e.read_shift(n),l=e.read_shift(2);2==n&&(e.l+=2);var c={s:a,e:s,w:i,ixfe:o,flags:l};return(r.biff>=5||!r.biff)&&(c.level=l>>8&7),c}var C3=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=V0({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(t,r){var n=r||{};n.dateNF||(n.dateNF="yyyymmdd");var a=t5(function(t,r){var n=[],a=RZ(1);switch(r.type){case"base64":a=BZ(IZ(t));break;case"binary":a=BZ(t);break;case"buffer":case"array":a=t}D2(a,0);var s=a.read_shift(1),i=!!(136&s),o=!1,l=!1;switch(s){case 2:case 3:case 131:case 139:case 245:break;case 48:case 49:o=!0,i=!0;break;case 140:l=!0;break;default:throw new Error("DBF Unsupported Version: "+s.toString(16))}var c=0,d=521;2==s&&(c=a.read_shift(2)),a.l+=3,2!=s&&(c=a.read_shift(4)),c>1048576&&(c=1e6),2!=s&&(d=a.read_shift(2));var u=a.read_shift(2),h=r.codepage||1252;2!=s&&(a.l+=16,a.read_shift(1),0!==a[a.l]&&(h=e[a[a.l]]),a.l+=1,a.l+=2),l&&(a.l+=36);for(var m=[],p={},f=Math.min(a.length,2==s?521:d-10-(o?264:0)),g=l?32:11;a.l<f&&13!=a[a.l];)switch((p={}).name=EZ.utils.decode(h,a.slice(a.l,a.l+g)).replace(/[\u0000\r\n].*$/g,""),a.l+=g,p.type=String.fromCharCode(a.read_shift(1)),2==s||l||(p.offset=a.read_shift(4)),p.len=a.read_shift(1),2==s&&(p.offset=a.read_shift(2)),p.dec=a.read_shift(1),p.name.length&&m.push(p),2!=s&&(a.l+=l?13:14),p.type){case"B":o&&8==p.len||!r.WTF||console.log("Skipping "+p.name+":"+p.type);break;case"G":case"P":r.WTF&&console.log("Skipping "+p.name+":"+p.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+p.type)}if(13!==a[a.l]&&(a.l=d-1),13!==a.read_shift(1))throw new Error("DBF Terminator not found "+a.l+" "+a[a.l]);a.l=d;var x=0,y=0;for(n[0]=[],y=0;y!=m.length;++y)n[0][y]=m[y].name;for(;c-- >0;)if(42!==a[a.l])for(++a.l,n[++x]=[],y=0,y=0;y!=m.length;++y){var v=a.slice(a.l,a.l+m[y].len);a.l+=m[y].len,D2(v,0);var b=EZ.utils.decode(h,v);switch(m[y].type){case"C":b.trim().length&&(n[x][y]=b.replace(/\s+$/,""));break;case"D":8===b.length?n[x][y]=new Date(+b.slice(0,4),+b.slice(4,6)-1,+b.slice(6,8)):n[x][y]=b;break;case"F":n[x][y]=parseFloat(b.trim());break;case"+":case"I":n[x][y]=l?2147483648^v.read_shift(-4,"i"):v.read_shift(4,"i");break;case"L":switch(b.trim().toUpperCase()){case"Y":case"T":n[x][y]=!0;break;case"N":case"F":n[x][y]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+b+"|")}break;case"M":if(!i)throw new Error("DBF Unexpected MEMO for type "+s.toString(16));n[x][y]="##MEMO##"+(l?parseInt(b.trim(),10):v.read_shift(4));break;case"N":(b=b.replace(/\u0000/g,"").trim())&&"."!=b&&(n[x][y]=+b||0);break;case"@":n[x][y]=new Date(v.read_shift(-8,"f")-621356832e5);break;case"T":n[x][y]=new Date(864e5*(v.read_shift(4)-2440588)+v.read_shift(4));break;case"Y":n[x][y]=v.read_shift(4,"i")/1e4+v.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":n[x][y]=-v.read_shift(-8,"f");break;case"B":if(o&&8==m[y].len){n[x][y]=v.read_shift(8,"f");break}case"G":case"P":v.l+=m[y].len;break;case"0":if("_NullFlags"===m[y].name)break;default:throw new Error("DBF Unsupported data type "+m[y].type)}}else a.l+=u;if(2!=s&&a.l<a.length&&26!=a[a.l++])throw new Error("DBF EOF Marker missing "+(a.l-1)+" of "+a.length+" "+a[a.l-1].toString(16));return r&&r.sheetRows&&(n=n.slice(0,r.sheetRows)),r.DBF=m,n}(t,n),n);return a["!cols"]=n.DBF.map(function(e){return{wch:e.len,DBF:e}}),delete n.DBF,a}var n={B:8,C:250,L:1,D:8,"?":0,"":0};return{to_workbook:function(e,t){try{return Z2(r(e,t),t)}catch(ze){if(t&&t.WTF)throw ze}return{SheetNames:[],Sheets:{}}},to_sheet:r,from_sheet:function(e,r){var a=r||{};if(+a.codepage>=0&&SZ(+a.codepage),"string"==a.type)throw new Error("Cannot write DBF to JS string");var s=M2(),i=X8(e,{header:1,raw:!0,cellDates:!0}),o=i[0],l=i.slice(1),c=e["!cols"]||[],d=0,u=0,h=0,m=1;for(d=0;d<o.length;++d)if(((c[d]||{}).DBF||{}).name)o[d]=c[d].DBF.name,++h;else if(null!=o[d]){if(++h,"number"===typeof o[d]&&(o[d]=o[d].toString(10)),"string"!==typeof o[d])throw new Error("DBF Invalid column name "+o[d]+" |"+typeof o[d]+"|");if(o.indexOf(o[d])!==d)for(u=0;u<1024;++u)if(-1==o.indexOf(o[d]+"_"+u)){o[d]+="_"+u;break}}var p=Q2(e["!ref"]),f=[],g=[],x=[];for(d=0;d<=p.e.c-p.s.c;++d){var y="",v="",b=0,j=[];for(u=0;u<l.length;++u)null!=l[u][d]&&j.push(l[u][d]);if(0!=j.length&&null!=o[d]){for(u=0;u<j.length;++u){switch(typeof j[u]){case"number":v="B";break;case"string":default:v="C";break;case"boolean":v="L";break;case"object":v=j[u]instanceof Date?"D":"C"}b=Math.max(b,String(j[u]).length),y=y&&y!=v?"C":v}b>250&&(b=250),"C"==(v=((c[d]||{}).DBF||{}).type)&&c[d].DBF.len>b&&(b=c[d].DBF.len),"B"==y&&"N"==v&&(y="N",x[d]=c[d].DBF.dec,b=c[d].DBF.len),g[d]="C"==y||"N"==v?b:n[y]||0,m+=g[d],f[d]=y}else f[d]="?"}var w=s.next(32);for(w.write_shift(4,318902576),w.write_shift(4,l.length),w.write_shift(2,296+32*h),w.write_shift(2,m),d=0;d<4;++d)w.write_shift(4,0);for(w.write_shift(4,(+t[wZ]||3)<<8),d=0,u=0;d<o.length;++d)if(null!=o[d]){var N=s.next(32),_=(o[d].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);N.write_shift(1,_,"sbcs"),N.write_shift(1,"?"==f[d]?"C":f[d],"sbcs"),N.write_shift(4,u),N.write_shift(1,g[d]||n[f[d]]||0),N.write_shift(1,x[d]||0),N.write_shift(1,2),N.write_shift(4,0),N.write_shift(1,0),N.write_shift(4,0),N.write_shift(4,0),u+=g[d]||n[f[d]]||0}var k=s.next(264);for(k.write_shift(4,13),d=0;d<65;++d)k.write_shift(4,0);for(d=0;d<l.length;++d){var S=s.next(m);for(S.write_shift(1,0),u=0;u<o.length;++u)if(null!=o[u])switch(f[u]){case"L":S.write_shift(1,null==l[d][u]?63:l[d][u]?84:70);break;case"B":S.write_shift(8,l[d][u]||0,"f");break;case"N":var A="0";for("number"==typeof l[d][u]&&(A=l[d][u].toFixed(x[u]||0)),h=0;h<g[u]-A.length;++h)S.write_shift(1,32);S.write_shift(1,A,"sbcs");break;case"D":l[d][u]?(S.write_shift(4,("0000"+l[d][u].getFullYear()).slice(-4),"sbcs"),S.write_shift(2,("00"+(l[d][u].getMonth()+1)).slice(-2),"sbcs"),S.write_shift(2,("00"+l[d][u].getDate()).slice(-2),"sbcs")):S.write_shift(8,"00000000","sbcs");break;case"C":var C=String(null!=l[d][u]?l[d][u]:"").slice(0,g[u]);for(S.write_shift(1,C,"sbcs"),h=0;h<g[u]-C.length;++h)S.write_shift(1,32)}}return s.next(1).write_shift(1,26),s.end()}}}(),E3=function(){var e={AA:"\xc0",BA:"\xc1",CA:"\xc2",DA:195,HA:"\xc4",JA:197,AE:"\xc8",BE:"\xc9",CE:"\xca",HE:"\xcb",AI:"\xcc",BI:"\xcd",CI:"\xce",HI:"\xcf",AO:"\xd2",BO:"\xd3",CO:"\xd4",DO:213,HO:"\xd6",AU:"\xd9",BU:"\xda",CU:"\xdb",HU:"\xdc",Aa:"\xe0",Ba:"\xe1",Ca:"\xe2",Da:227,Ha:"\xe4",Ja:229,Ae:"\xe8",Be:"\xe9",Ce:"\xea",He:"\xeb",Ai:"\xec",Bi:"\xed",Ci:"\xee",Hi:"\xef",Ao:"\xf2",Bo:"\xf3",Co:"\xf4",Do:245,Ho:"\xf6",Au:"\xf9",Bu:"\xfa",Cu:"\xfb",Hu:"\xfc",KC:"\xc7",Kc:"\xe7",q:"\xe6",z:"\u0153",a:"\xc6",j:"\u0152",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1bN("+q0(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(t,r){var n=e[r];return"number"==typeof n?PZ(n):n},n=function(e,t,r){var n=t.charCodeAt(0)-32<<4|r.charCodeAt(0)-48;return 59==n?e:PZ(n)};function a(e,a){var s,i=e.split(/[\n\r]+/),o=-1,l=-1,c=0,d=0,u=[],h=[],m=null,p={},f=[],g=[],x=[],y=0;for(+a.codepage>=0&&SZ(+a.codepage);c!==i.length;++c){y=0;var v,b=i[c].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),j=b.replace(/;;/g,"\0").split(";").map(function(e){return e.replace(/\u0000/g,";")}),w=j[0];if(b.length>0)switch(w){case"ID":case"E":case"B":case"O":case"W":break;case"P":"P"==j[1].charAt(0)&&h.push(b.slice(3).replace(/;;/g,";"));break;case"C":var N=!1,_=!1,k=!1,S=!1,A=-1,C=-1;for(d=1;d<j.length;++d)switch(j[d].charAt(0)){case"A":case"G":break;case"X":l=parseInt(j[d].slice(1))-1,_=!0;break;case"Y":for(o=parseInt(j[d].slice(1))-1,_||(l=0),s=u.length;s<=o;++s)u[s]=[];break;case"K":'"'===(v=j[d].slice(1)).charAt(0)?v=v.slice(1,v.length-1):"TRUE"===v?v=!0:"FALSE"===v?v=!1:isNaN(s1(v))?isNaN(o1(v).getDate())||(v=t1(v)):(v=s1(v),null!==m&&C0(m)&&(v=$0(v))),"undefined"!==typeof EZ&&"string"==typeof v&&"string"!=(a||{}).type&&(a||{}).codepage&&(v=EZ.utils.decode(a.codepage,v)),N=!0;break;case"E":S=!0;var E=b4(j[d].slice(1),{r:o,c:l});u[o][l]=[u[o][l],E];break;case"S":k=!0,u[o][l]=[u[o][l],"S5S"];break;case"R":A=parseInt(j[d].slice(1))-1;break;case"C":C=parseInt(j[d].slice(1))-1;break;default:if(a&&a.WTF)throw new Error("SYLK bad record "+b)}if(N&&(u[o][l]&&2==u[o][l].length?u[o][l][0]=v:u[o][l]=v,m=null),k){if(S)throw new Error("SYLK shared formula cannot have own formula");var T=A>-1&&u[A][C];if(!T||!T[1])throw new Error("SYLK shared formula cannot find base");u[o][l][1]=N4(T[1],{r:o-A,c:l-C})}break;case"F":var P=0;for(d=1;d<j.length;++d)switch(j[d].charAt(0)){case"X":l=parseInt(j[d].slice(1))-1,++P;break;case"Y":for(o=parseInt(j[d].slice(1))-1,s=u.length;s<=o;++s)u[s]=[];break;case"M":y=parseInt(j[d].slice(1))/20;break;case"F":case"G":case"S":case"D":case"N":break;case"P":m=h[parseInt(j[d].slice(1))];break;case"W":for(x=j[d].slice(1).split(" "),s=parseInt(x[0],10);s<=parseInt(x[1],10);++s)y=parseInt(x[2],10),g[s-1]=0===y?{hidden:!0}:{wch:y},G3(g[s-1]);break;case"C":g[l=parseInt(j[d].slice(1))-1]||(g[l]={});break;case"R":f[o=parseInt(j[d].slice(1))-1]||(f[o]={}),y>0?(f[o].hpt=y,f[o].hpx=X3(y)):0===y&&(f[o].hidden=!0);break;default:if(a&&a.WTF)throw new Error("SYLK bad record "+b)}P<1&&(m=null);break;default:if(a&&a.WTF)throw new Error("SYLK bad record "+b)}}return f.length>0&&(p["!rows"]=f),g.length>0&&(p["!cols"]=g),a&&a.sheetRows&&(u=u.slice(0,a.sheetRows)),[u,p]}function s(e,t){var r=function(e,t){switch(t.type){case"base64":return a(IZ(e),t);case"binary":return a(e,t);case"buffer":return a(LZ&&Buffer.isBuffer(e)?e.toString("binary"):UZ(e),t);case"array":return a(r1(e),t)}throw new Error("Unrecognized type "+t.type)}(e,t),n=r[0],s=r[1],i=t5(n,t);return q0(s).forEach(function(e){i[e]=s[e]}),i}function i(e,t,r,n){var a="C;Y"+(r+1)+";X"+(n+1)+";K";switch(e.t){case"n":a+=e.v||0,e.f&&!e.F&&(a+=";E"+w4(e.f,{r:r,c:n}));break;case"b":a+=e.v?"TRUE":"FALSE";break;case"e":a+=e.w||e.v;break;case"d":a+='"'+(e.w||e.v)+'"';break;case"s":a+='"'+e.v.replace(/"/g,"").replace(/;/g,";;")+'"'}return a}return e["|"]=254,{to_workbook:function(e,t){return Z2(s(e,t),t)},to_sheet:s,from_sheet:function(e,t){var r,n,a=["ID;PWXL;N;E"],s=[],o=Q2(e["!ref"]),l=Array.isArray(e),c="\r\n";a.push("P;PGeneral"),a.push("F;P0;DG0G8;M255"),e["!cols"]&&(n=a,e["!cols"].forEach(function(e,t){var r="F;W"+(t+1)+" "+(t+1)+" ";e.hidden?r+="0":("number"!=typeof e.width||e.wpx||(e.wpx=W3(e.width)),"number"!=typeof e.wpx||e.wch||(e.wch=V3(e.wpx)),"number"==typeof e.wch&&(r+=Math.round(e.wch)))," "!=r.charAt(r.length-1)&&n.push(r)})),e["!rows"]&&function(e,t){t.forEach(function(t,r){var n="F;";t.hidden?n+="M0;":t.hpt?n+="M"+20*t.hpt+";":t.hpx&&(n+="M"+20*Y3(t.hpx)+";"),n.length>2&&e.push(n+"R"+(r+1))})}(a,e["!rows"]),a.push("B;Y"+(o.e.r-o.s.r+1)+";X"+(o.e.c-o.s.c+1)+";D"+[o.s.c,o.s.r,o.e.c,o.e.r].join(" "));for(var d=o.s.r;d<=o.e.r;++d)for(var u=o.s.c;u<=o.e.c;++u){var h=K2({r:d,c:u});(r=l?(e[d]||[])[u]:e[h])&&(null!=r.v||r.f&&!r.F)&&s.push(i(r,0,d,u))}return a.join(c)+c+s.join(c)+c+"E"+c}}}(),T3=function(){function e(e,t){for(var r=e.split("\n"),n=-1,a=-1,s=0,i=[];s!==r.length;++s)if("BOT"!==r[s].trim()){if(!(n<0)){for(var o=r[s].trim().split(","),l=o[0],c=o[1],d=r[++s]||"";1&(d.match(/["]/g)||[]).length&&s<r.length-1;)d+="\n"+r[++s];switch(d=d.trim(),+l){case-1:if("BOT"===d){i[++n]=[],a=0;continue}if("EOD"!==d)throw new Error("Unrecognized DIF special command "+d);break;case 0:"TRUE"===d?i[n][a]=!0:"FALSE"===d?i[n][a]=!1:isNaN(s1(c))?isNaN(o1(c).getDate())?i[n][a]=c:i[n][a]=t1(c):i[n][a]=s1(c),++a;break;case 1:(d=(d=d.slice(1,d.length-1)).replace(/""/g,'"'))&&d.match(/^=".*"$/)&&(d=d.slice(2,-1)),i[n][a++]=""!==d?d:null}if("EOD"===d)break}}else i[++n]=[],a=0;return t&&t.sheetRows&&(i=i.slice(0,t.sheetRows)),i}function t(t,r){return t5(function(t,r){switch(r.type){case"base64":return e(IZ(t),r);case"binary":return e(t,r);case"buffer":return e(LZ&&Buffer.isBuffer(t)?t.toString("binary"):UZ(t),r);case"array":return e(r1(t),r)}throw new Error("Unrecognized type "+r.type)}(t,r),r)}var r=function(){var e=function(e,t,r,n,a){e.push(t),e.push(r+","+n),e.push('"'+a.replace(/"/g,'""')+'"')},t=function(e,t,r,n){e.push(t+","+r),e.push(1==t?'"'+n.replace(/"/g,'""')+'"':n)};return function(r){var n,a=[],s=Q2(r["!ref"]),i=Array.isArray(r);e(a,"TABLE",0,1,"sheetjs"),e(a,"VECTORS",0,s.e.r-s.s.r+1,""),e(a,"TUPLES",0,s.e.c-s.s.c+1,""),e(a,"DATA",0,0,"");for(var o=s.s.r;o<=s.e.r;++o){t(a,-1,0,"BOT");for(var l=s.s.c;l<=s.e.c;++l){var c=K2({r:o,c:l});if(n=i?(r[o]||[])[l]:r[c])switch(n.t){case"n":var d=n.w;d||null==n.v||(d=n.v),null==d?n.f&&!n.F?t(a,1,0,"="+n.f):t(a,1,0,""):t(a,0,d,"V");break;case"b":t(a,0,n.v?1:0,n.v?"TRUE":"FALSE");break;case"s":t(a,1,0,isNaN(n.v)?n.v:'="'+n.v+'"');break;case"d":n.w||(n.w=O0(n.z||e0[14],K0(t1(n.v)))),t(a,0,n.w,"V");break;default:t(a,1,0,"")}else t(a,1,0,"")}}t(a,-1,0,"EOD");return a.join("\r\n")}}();return{to_workbook:function(e,r){return Z2(t(e,r),r)},to_sheet:t,from_sheet:r}}(),P3=function(){function e(e){return e.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,"\n")}function t(e){return e.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(t,r){return t5(function(t,r){for(var n=t.split("\n"),a=-1,s=-1,i=0,o=[];i!==n.length;++i){var l=n[i].trim().split(":");if("cell"===l[0]){var c=G2(l[1]);if(o.length<=c.r)for(a=o.length;a<=c.r;++a)o[a]||(o[a]=[]);switch(a=c.r,s=c.c,l[2]){case"t":o[a][s]=e(l[3]);break;case"v":o[a][s]=+l[3];break;case"vtf":var d=l[l.length-1];case"vtc":"nl"===l[3]?o[a][s]=!!+l[4]:o[a][s]=+l[4],"vtf"==l[2]&&(o[a][s]=[o[a][s],d])}}}return r&&r.sheetRows&&(o=o.slice(0,r.sheetRows)),o}(t,r),r)}var n=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join("\n"),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join("\n")+"\n",s=["# SocialCalc Spreadsheet Control Save","part:sheet"].join("\n"),i="--SocialCalcSpreadsheetControlSave--";function o(e){if(!e||!e["!ref"])return"";for(var r,n=[],a=[],s="",i=Y2(e["!ref"]),o=Array.isArray(e),l=i.s.r;l<=i.e.r;++l)for(var c=i.s.c;c<=i.e.c;++c)if(s=K2({r:l,c:c}),(r=o?(e[l]||[])[c]:e[s])&&null!=r.v&&"z"!==r.t){switch(a=["cell",s,"t"],r.t){case"s":case"str":a.push(t(r.v));break;case"n":r.f?(a[2]="vtf",a[3]="n",a[4]=r.v,a[5]=t(r.f)):(a[2]="v",a[3]=r.v);break;case"b":a[2]="vt"+(r.f?"f":"c"),a[3]="nl",a[4]=r.v?"1":"0",a[5]=t(r.f||(r.v?"TRUE":"FALSE"));break;case"d":var d=K0(t1(r.v));a[2]="vtc",a[3]="nd",a[4]=""+d,a[5]=r.w||O0(r.z||e0[14],d);break;case"e":continue}n.push(a.join(":"))}return n.push("sheet:c:"+(i.e.c-i.s.c+1)+":r:"+(i.e.r-i.s.r+1)+":tvf:1"),n.push("valueformat:1:text-wiki"),n.join("\n")}return{to_workbook:function(e,t){return Z2(r(e,t),t)},to_sheet:r,from_sheet:function(e){return[n,a,s,a,o(e),i].join("\n")}}}(),O3=function(){function e(e,t,r,n,a){a.raw?t[r][n]=e:""===e||("TRUE"===e?t[r][n]=!0:"FALSE"===e?t[r][n]=!1:isNaN(s1(e))?isNaN(o1(e).getDate())?t[r][n]=e:t[r][n]=t1(e):t[r][n]=s1(e))}var t={44:",",9:"\t",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function n(e){for(var n={},a=!1,s=0,i=0;s<e.length;++s)34==(i=e.charCodeAt(s))?a=!a:!a&&i in t&&(n[i]=(n[i]||0)+1);for(s in i=[],n)Object.prototype.hasOwnProperty.call(n,s)&&i.push([n[s],s]);if(!i.length)for(s in n=r)Object.prototype.hasOwnProperty.call(n,s)&&i.push([n[s],s]);return i.sort(function(e,t){return e[0]-t[0]||r[e[1]]-r[t[1]]}),t[i.pop()[1]]||44}function a(e,t){var r=t||{},a="";var s=r.dense?[]:{},i={s:{c:0,r:0},e:{c:0,r:0}};"sep="==e.slice(0,4)?13==e.charCodeAt(5)&&10==e.charCodeAt(6)?(a=e.charAt(4),e=e.slice(7)):13==e.charCodeAt(5)||10==e.charCodeAt(5)?(a=e.charAt(4),e=e.slice(6)):a=n(e.slice(0,1024)):a=r&&r.FS?r.FS:n(e.slice(0,1024));var o=0,l=0,c=0,d=0,u=0,h=a.charCodeAt(0),m=!1,p=0,f=e.charCodeAt(0);e=e.replace(/\r\n/gm,"\n");var g=null!=r.dateNF?function(e){var t="number"==typeof e?e0[e]:e;return t=t.replace(M0,"(\\d+)"),new RegExp("^"+t+"$")}(r.dateNF):null;function x(){var t=e.slice(d,u),n={};if('"'==t.charAt(0)&&'"'==t.charAt(t.length-1)&&(t=t.slice(1,-1).replace(/""/g,'"')),0===t.length)n.t="z";else if(r.raw)n.t="s",n.v=t;else if(0===t.trim().length)n.t="s",n.v=t;else if(61==t.charCodeAt(0))34==t.charCodeAt(1)&&34==t.charCodeAt(t.length-1)?(n.t="s",n.v=t.slice(2,-1).replace(/""/g,'"')):!function(e){return 1!=e.length}(t)?(n.t="s",n.v=t):(n.t="n",n.f=t.slice(1));else if("TRUE"==t)n.t="b",n.v=!0;else if("FALSE"==t)n.t="b",n.v=!1;else if(isNaN(c=s1(t)))if(!isNaN(o1(t).getDate())||g&&t.match(g)){n.z=r.dateNF||e0[14];var a=0;g&&t.match(g)&&(t=function(e,t,r){var n=-1,a=-1,s=-1,i=-1,o=-1,l=-1;(t.match(M0)||[]).forEach(function(e,t){var c=parseInt(r[t+1],10);switch(e.toLowerCase().charAt(0)){case"y":n=c;break;case"d":s=c;break;case"h":i=c;break;case"s":l=c;break;case"m":i>=0?o=c:a=c}}),l>=0&&-1==o&&a>=0&&(o=a,a=-1);var c=(""+(n>=0?n:(new Date).getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);7==c.length&&(c="0"+c),8==c.length&&(c="20"+c);var d=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return-1==i&&-1==o&&-1==l?c:-1==n&&-1==a&&-1==s?d:c+"T"+d}(0,r.dateNF,t.match(g)||[]),a=1),r.cellDates?(n.t="d",n.v=t1(t,a)):(n.t="n",n.v=K0(t1(t,a))),!1!==r.cellText&&(n.w=O0(n.z,n.v instanceof Date?K0(n.v):n.v)),r.cellNF||delete n.z}else n.t="s",n.v=t;else n.t="n",!1!==r.cellText&&(n.w=t),n.v=c;if("z"==n.t||(r.dense?(s[o]||(s[o]=[]),s[o][l]=n):s[K2({c:l,r:o})]=n),d=u+1,f=e.charCodeAt(d),i.e.c<l&&(i.e.c=l),i.e.r<o&&(i.e.r=o),p==h)++l;else if(l=0,++o,r.sheetRows&&r.sheetRows<=o)return!0}e:for(;u<e.length;++u)switch(p=e.charCodeAt(u)){case 34:34===f&&(m=!m);break;case h:case 10:case 13:if(!m&&x())break e}return u-d>0&&x(),s["!ref"]=X2(i),s}function s(t,r){return r&&r.PRN?r.FS||"sep="==t.slice(0,4)||t.indexOf("\t")>=0||t.indexOf(",")>=0||t.indexOf(";")>=0?a(t,r):t5(function(t,r){var n=r||{},a=[];if(!t||0===t.length)return a;for(var s=t.split(/[\r\n]/),i=s.length-1;i>=0&&0===s[i].length;)--i;for(var o=10,l=0,c=0;c<=i;++c)-1==(l=s[c].indexOf(" "))?l=s[c].length:l++,o=Math.max(o,l);for(c=0;c<=i;++c){a[c]=[];var d=0;for(e(s[c].slice(0,o).trim(),a,c,d,n),d=1;d<=(s[c].length-o)/10+1;++d)e(s[c].slice(o+10*(d-1),o+10*d).trim(),a,c,d,n)}return n.sheetRows&&(a=a.slice(0,n.sheetRows)),a}(t,r),r):a(t,r)}function i(e,t){var r="",n="string"==t.type?[0,0,0,0]:U8(e,t);switch(t.type){case"base64":r=IZ(e);break;case"binary":case"string":r=e;break;case"buffer":r=65001==t.codepage?e.toString("utf8"):t.codepage&&"undefined"!==typeof EZ?EZ.utils.decode(t.codepage,e):LZ&&Buffer.isBuffer(e)?e.toString("binary"):UZ(e);break;case"array":r=r1(e);break;default:throw new Error("Unrecognized type "+t.type)}return 239==n[0]&&187==n[1]&&191==n[2]?r=_1(r.slice(3)):"string"!=t.type&&"buffer"!=t.type&&65001==t.codepage?r=_1(r):"binary"==t.type&&"undefined"!==typeof EZ&&t.codepage&&(r=EZ.utils.decode(t.codepage,EZ.utils.encode(28591,r))),"socialcalc:version:"==r.slice(0,19)?P3.to_sheet("string"==t.type?r:_1(r),t):s(r,t)}return{to_workbook:function(e,t){return Z2(i(e,t),t)},to_sheet:i,from_sheet:function(e){for(var t,r=[],n=Q2(e["!ref"]),a=Array.isArray(e),s=n.s.r;s<=n.e.r;++s){for(var i=[],o=n.s.c;o<=n.e.c;++o){var l=K2({r:s,c:o});if((t=a?(e[s]||[])[o]:e[l])&&null!=t.v){for(var c=(t.w||(J2(t),t.w)||"").slice(0,10);c.length<10;)c+=" ";i.push(c+(0===o?" ":""))}else i.push("          ")}r.push(i.join(""))}return r.join("\n")}}}();var D3=function(){function e(e,t,r){if(e){D2(e,e.l||0);for(var n=r.Enum||x;e.l<e.length;){var a=e.read_shift(2),s=n[a]||n[65535],i=e.read_shift(2),o=e.l+i,l=s.f&&s.f(e,i,r);if(e.l=o,t(l,s,a))return}}}function t(t,r){if(!t)return t;var n=r||{};var a=n.dense?[]:{},s="Sheet1",i="",o=0,l={},c=[],d=[],u={s:{r:0,c:0},e:{r:0,c:0}},h=n.sheetRows||0;if(0==t[2]&&(8==t[3]||9==t[3])&&t.length>=16&&5==t[14]&&108===t[15])throw new Error("Unsupported Works 3 for Mac file");if(2==t[2])n.Enum=x,e(t,function(e,t,r){switch(r){case 0:n.vers=e,e>=4096&&(n.qpro=!0);break;case 6:u=e;break;case 204:e&&(i=e);break;case 222:i=e;break;case 15:case 51:n.qpro||(e[1].v=e[1].v.slice(1));case 13:case 14:case 16:14==r&&112==(112&e[2])&&(15&e[2])>1&&(15&e[2])<15&&(e[1].z=n.dateNF||e0[14],n.cellDates&&(e[1].t="d",e[1].v=$0(e[1].v))),n.qpro&&e[3]>o&&(a["!ref"]=X2(u),l[s]=a,c.push(s),a=n.dense?[]:{},u={s:{r:0,c:0},e:{r:0,c:0}},o=e[3],s=i||"Sheet"+(o+1),i="");var d=n.dense?(a[e[0].r]||[])[e[0].c]:a[K2(e[0])];if(d){d.t=e[1].t,d.v=e[1].v,null!=e[1].z&&(d.z=e[1].z),null!=e[1].f&&(d.f=e[1].f);break}n.dense?(a[e[0].r]||(a[e[0].r]=[]),a[e[0].r][e[0].c]=e[1]):a[K2(e[0])]=e[1]}},n);else{if(26!=t[2]&&14!=t[2])throw new Error("Unrecognized LOTUS BOF "+t[2]);n.Enum=y,14==t[2]&&(n.qpro=!0,t.l=0),e(t,function(e,t,r){switch(r){case 204:s=e;break;case 22:e[1].v=e[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(e[3]>o&&(a["!ref"]=X2(u),l[s]=a,c.push(s),a=n.dense?[]:{},u={s:{r:0,c:0},e:{r:0,c:0}},o=e[3],s="Sheet"+(o+1)),h>0&&e[0].r>=h)break;n.dense?(a[e[0].r]||(a[e[0].r]=[]),a[e[0].r][e[0].c]=e[1]):a[K2(e[0])]=e[1],u.e.c<e[0].c&&(u.e.c=e[0].c),u.e.r<e[0].r&&(u.e.r=e[0].r);break;case 27:e[14e3]&&(d[e[14e3][0]]=e[14e3][1]);break;case 1537:d[e[0]]=e[1],e[0]==o&&(s=e[1])}},n)}if(a["!ref"]=X2(u),l[i||s]=a,c.push(i||s),!d.length)return{SheetNames:c,Sheets:l};for(var m={},p=[],f=0;f<d.length;++f)l[c[f]]?(p.push(d[f]||c[f]),m[d[f]]=l[d[f]]||l[c[f]]):(p.push(d[f]),m[d[f]]={"!ref":"A1"});return{SheetNames:p,Sheets:m}}function r(e,t,r){var n=[{c:0,r:0},{t:"n",v:0},0,0];return r.qpro&&20768!=r.vers?(n[0].c=e.read_shift(1),n[3]=e.read_shift(1),n[0].r=e.read_shift(2),e.l+=2):(n[2]=e.read_shift(1),n[0].c=e.read_shift(2),n[0].r=e.read_shift(2)),n}function n(e,t,n){var a=e.l+t,s=r(e,0,n);if(s[1].t="s",20768==n.vers){e.l++;var i=e.read_shift(1);return s[1].v=e.read_shift(i,"utf8"),s}return n.qpro&&e.l++,s[1].v=e.read_shift(a-e.l,"cstr"),s}function a(e,t,r){var n=L2(7+r.length);n.write_shift(1,255),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(1,39);for(var a=0;a<n.length;++a){var s=r.charCodeAt(a);n.write_shift(1,s>=128?95:s)}return n.write_shift(1,0),n}function s(e,t,r){var n=L2(7);return n.write_shift(1,255),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,r,"i"),n}function i(e,t,r){var n=L2(13);return n.write_shift(1,255),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(8,r,"f"),n}function o(e,t,r){var n=32768&t;return t=(n?e:0)+((t&=-32769)>=8192?t-16384:t),(n?"":"$")+(r?H2(t):W2(t))}var l={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},c=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function d(e){var t=[{c:0,r:0},{t:"n",v:0},0];return t[0].r=e.read_shift(2),t[3]=e[e.l++],t[0].c=e[e.l++],t}function u(e,t,r,n){var a=L2(6+n.length);a.write_shift(2,e),a.write_shift(1,r),a.write_shift(1,t),a.write_shift(1,39);for(var s=0;s<n.length;++s){var i=n.charCodeAt(s);a.write_shift(1,i>=128?95:i)}return a.write_shift(1,0),a}function h(e,t){var r=d(e),n=e.read_shift(4),a=e.read_shift(4),s=e.read_shift(2);if(65535==s)return 0===n&&3221225472===a?(r[1].t="e",r[1].v=15):0===n&&3489660928===a?(r[1].t="e",r[1].v=42):r[1].v=0,r;var i=32768&s;return s=(32767&s)-16446,r[1].v=(1-2*i)*(a*Math.pow(2,s+32)+n*Math.pow(2,s)),r}function m(e,t,r,n){var a=L2(14);if(a.write_shift(2,e),a.write_shift(1,r),a.write_shift(1,t),0==n)return a.write_shift(4,0),a.write_shift(4,0),a.write_shift(2,65535),a;var s,i=0,o=0,l=0;return n<0&&(i=1,n=-n),o=0|Math.log2(n),0==(2147483648&(l=(n/=Math.pow(2,o-31))>>>0))&&(++o,l=(n/=2)>>>0),n-=l,l|=2147483648,l>>>=0,s=(n*=Math.pow(2,32))>>>0,a.write_shift(4,s),a.write_shift(4,l),o+=16383+(i?32768:0),a.write_shift(2,o),a}function p(e,t){var r=d(e),n=e.read_shift(8,"f");return r[1].v=n,r}function f(e,t){return 0==e[e.l+t-1]?e.read_shift(t,"cstr"):""}function g(e,t){var r=L2(5+e.length);r.write_shift(2,14e3),r.write_shift(2,t);for(var n=0;n<e.length;++n){var a=e.charCodeAt(n);r[r.l++]=a>127?95:a}return r[r.l++]=0,r}var x={0:{n:"BOF",f:s3},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:function(e,t,r){var n={s:{c:0,r:0},e:{c:0,r:0}};return 8==t&&r.qpro?(n.s.c=e.read_shift(1),e.l++,n.s.r=e.read_shift(2),n.e.c=e.read_shift(1),e.l++,n.e.r=e.read_shift(2),n):(n.s.c=e.read_shift(2),n.s.r=e.read_shift(2),12==t&&r.qpro&&(e.l+=2),n.e.c=e.read_shift(2),n.e.r=e.read_shift(2),12==t&&r.qpro&&(e.l+=2),65535==n.s.c&&(n.s.c=n.e.c=n.s.r=n.e.r=0),n)}},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:function(e,t,n){var a=r(e,0,n);return a[1].v=e.read_shift(2,"i"),a}},14:{n:"NUMBER",f:function(e,t,n){var a=r(e,0,n);return a[1].v=e.read_shift(8,"f"),a}},15:{n:"LABEL",f:n},16:{n:"FORMULA",f:function(e,t,n){var a=e.l+t,s=r(e,0,n);if(s[1].v=e.read_shift(8,"f"),n.qpro)e.l=a;else{var i=e.read_shift(2);!function(e,t){D2(e,0);var r=[],n=0,a="",s="",i="",d="";for(;e.l<e.length;){var u=e[e.l++];switch(u){case 0:r.push(e.read_shift(8,"f"));break;case 1:s=o(t[0].c,e.read_shift(2),!0),a=o(t[0].r,e.read_shift(2),!1),r.push(s+a);break;case 2:var h=o(t[0].c,e.read_shift(2),!0),m=o(t[0].r,e.read_shift(2),!1);s=o(t[0].c,e.read_shift(2),!0),a=o(t[0].r,e.read_shift(2),!1),r.push(h+m+":"+s+a);break;case 3:if(e.l<e.length)return void console.error("WK1 premature formula end");break;case 4:r.push("("+r.pop()+")");break;case 5:r.push(e.read_shift(2));break;case 6:for(var p="";u=e[e.l++];)p+=String.fromCharCode(u);r.push('"'+p.replace(/"/g,'""')+'"');break;case 8:r.push("-"+r.pop());break;case 23:r.push("+"+r.pop());break;case 22:r.push("NOT("+r.pop()+")");break;case 20:case 21:d=r.pop(),i=r.pop(),r.push(["AND","OR"][u-20]+"("+i+","+d+")");break;default:if(u<32&&c[u])d=r.pop(),i=r.pop(),r.push(i+c[u]+d);else{if(!l[u])return u<=7?console.error("WK1 invalid opcode "+u.toString(16)):u<=24?console.error("WK1 unsupported op "+u.toString(16)):u<=30?console.error("WK1 invalid opcode "+u.toString(16)):u<=115?console.error("WK1 unsupported function opcode "+u.toString(16)):console.error("WK1 unrecognized opcode "+u.toString(16));if(69==(n=l[u][1])&&(n=e[e.l++]),n>r.length)return void console.error("WK1 bad formula parse 0x"+u.toString(16)+":|"+r.join("|")+"|");var f=r.slice(-n);r.length-=n,r.push(l[u][0]+"("+f.join(",")+")")}}}1==r.length?t[1].f=""+r[0]:console.error("WK1 bad formula parse |"+r.join("|")+"|")}(e.slice(e.l,e.l+i),s),e.l+=i}return s}},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:n},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:f},222:{n:"SHEETNAMELP",f:function(e,t){var r=e[e.l++];r>t-1&&(r=t-1);for(var n="";n.length<r;)n+=String.fromCharCode(e[e.l++]);return n}},65535:{n:""}},y={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:function(e,t){var r=d(e);return r[1].t="s",r[1].v=e.read_shift(t-4,"cstr"),r}},23:{n:"NUMBER17",f:h},24:{n:"NUMBER18",f:function(e,t){var r=d(e);r[1].v=e.read_shift(2);var n=r[1].v>>1;if(1&r[1].v)switch(7&n){case 0:n=5e3*(n>>3);break;case 1:n=500*(n>>3);break;case 2:n=(n>>3)/20;break;case 3:n=(n>>3)/200;break;case 4:n=(n>>3)/2e3;break;case 5:n=(n>>3)/2e4;break;case 6:n=(n>>3)/16;break;case 7:n=(n>>3)/64}return r[1].v=n,r}},25:{n:"FORMULA19",f:function(e,t){var r=h(e);return e.l+=t-14,r}},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:function(e,t){for(var r={},n=e.l+t;e.l<n;){var a=e.read_shift(2);if(14e3==a){for(r[a]=[0,""],r[a][0]=e.read_shift(2);e[e.l];)r[a][1]+=String.fromCharCode(e[e.l]),e.l++;e.l++}}return r}},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:function(e,t){var r=d(e),n=e.read_shift(4);return r[1].v=n>>6,r}},38:{n:"??"},39:{n:"NUMBER27",f:p},40:{n:"FORMULA28",f:function(e,t){var r=p(e);return e.l+=t-10,r}},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:f},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:function(e,t,r){if(r.qpro&&!(t<21)){var n=e.read_shift(1);return e.l+=17,e.l+=1,e.l+=2,[n,e.read_shift(t-21,"cstr")]}}},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:function(e,t){var r=t||{};if(+r.codepage>=0&&SZ(+r.codepage),"string"==r.type)throw new Error("Cannot write WK1 to JS string");var n=M2(),o=Q2(e["!ref"]),l=Array.isArray(e),c=[];Z6(n,0,function(e){var t=L2(2);return t.write_shift(2,e),t}(1030)),Z6(n,6,function(e){var t=L2(8);return t.write_shift(2,e.s.c),t.write_shift(2,e.s.r),t.write_shift(2,e.e.c),t.write_shift(2,e.e.r),t}(o));for(var d=Math.min(o.e.r,8191),u=o.s.r;u<=d;++u)for(var h=W2(u),m=o.s.c;m<=o.e.c;++m){u===o.s.r&&(c[m]=H2(m));var p=c[m]+h,f=l?(e[u]||[])[m]:e[p];if(f&&"z"!=f.t)if("n"==f.t)(0|f.v)==f.v&&f.v>=-32768&&f.v<=32767?Z6(n,13,s(u,m,f.v)):Z6(n,14,i(u,m,f.v));else Z6(n,15,a(u,m,J2(f).slice(0,239)))}return Z6(n,1),n.end()},book_to_wk3:function(e,t){var r=t||{};if(+r.codepage>=0&&SZ(+r.codepage),"string"==r.type)throw new Error("Cannot write WK3 to JS string");var n=M2();Z6(n,0,function(e){var t=L2(26);t.write_shift(2,4096),t.write_shift(2,4),t.write_shift(4,0);for(var r=0,n=0,a=0,s=0;s<e.SheetNames.length;++s){var i=e.SheetNames[s],o=e.Sheets[i];if(o&&o["!ref"]){++a;var l=Y2(o["!ref"]);r<l.e.r&&(r=l.e.r),n<l.e.c&&(n=l.e.c)}}r>8191&&(r=8191);return t.write_shift(2,r),t.write_shift(1,a),t.write_shift(1,n),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(1,1),t.write_shift(1,2),t.write_shift(4,0),t.write_shift(4,0),t}(e));for(var a=0,s=0;a<e.SheetNames.length;++a)(e.Sheets[e.SheetNames[a]]||{})["!ref"]&&Z6(n,27,g(e.SheetNames[a],s++));var i=0;for(a=0;a<e.SheetNames.length;++a){var o=e.Sheets[e.SheetNames[a]];if(o&&o["!ref"]){for(var l=Q2(o["!ref"]),c=Array.isArray(o),d=[],h=Math.min(l.e.r,8191),p=l.s.r;p<=h;++p)for(var f=W2(p),x=l.s.c;x<=l.e.c;++x){p===l.s.r&&(d[x]=H2(x));var y=d[x]+f,v=c?(o[p]||[])[x]:o[y];if(v&&"z"!=v.t)if("n"==v.t)Z6(n,23,m(p,x,i,v.v));else Z6(n,22,u(p,x,i,J2(v).slice(0,239)))}++i}}return Z6(n,1),n.end()},to_workbook:function(e,r){switch(r.type){case"base64":return t(BZ(IZ(e)),r);case"binary":return t(BZ(e),r);case"buffer":case"array":return t(e,r)}throw"Unsupported type "+r.type}}}();var I3=/^\s|\s$|[\t\n\r]/;function L3(e,t){if(!t.bookSST)return"";var r=[d1];r[r.length]=T1("sst",null,{xmlns:H1[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(null!=e[n]){var a=e[n],s="<si>";a.r?s+=a.r:(s+="<t",a.t||(a.t=""),a.t.match(I3)&&(s+=' xml:space="preserve"'),s+=">"+f1(a.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}var M3=function(e,t){var r=!1;return null==t&&(r=!0,t=L2(15+4*e.t.length)),t.write_shift(1,0),a5(e.t,t),r?t.slice(0,t.l):t};function R3(e){var t=M2();R2(t,159,function(e,t){return t||(t=L2(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}(e));for(var r=0;r<e.length;++r)R2(t,19,M3(e[r]));return R2(t,160),t.end()}function F3(e){if("undefined"!==typeof EZ)return EZ.utils.encode(wZ,e);for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function B3(e){var t,r,n=0,a=F3(e),s=a.length+1;for((t=RZ(s))[0]=a.length,r=1;r!=s;++r)t[r]=a[r-1];for(r=s-1;r>=0;--r)n=((0===(16384&n)?0:1)|n<<1&32767)^t[r];return 52811^n}var z3=function(){function e(e,r){switch(r.type){case"base64":return t(IZ(e),r);case"binary":return t(e,r);case"buffer":return t(LZ&&Buffer.isBuffer(e)?e.toString("binary"):UZ(e),r);case"array":return t(r1(e),r)}throw new Error("Unrecognized type "+r.type)}function t(e,t){var r=(t||{}).dense?[]:{},n=e.match(/\\trowd.*?\\row\b/g);if(!n.length)throw new Error("RTF missing table");var a={s:{c:0,r:0},e:{c:0,r:n.length-1}};return n.forEach(function(e,t){Array.isArray(r)&&(r[t]=[]);for(var n,s=/\\\w+\b/g,i=0,o=-1;n=s.exec(e);){if("\\cell"===n[0]){var l=e.slice(i,s.lastIndex-n[0].length);if(" "==l[0]&&(l=l.slice(1)),++o,l.length){var c={v:l,t:"s"};Array.isArray(r)?r[t][o]=c:r[K2({r:t,c:o})]=c}}i=s.lastIndex}o>a.e.c&&(a.e.c=o)}),r["!ref"]=X2(a),r}return{to_workbook:function(t,r){return Z2(e(t,r),r)},to_sheet:e,from_sheet:function(e){for(var t,r=["{\\rtf1\\ansi"],n=Q2(e["!ref"]),a=Array.isArray(e),s=n.s.r;s<=n.e.r;++s){r.push("\\trowd\\trautofit1");for(var i=n.s.c;i<=n.e.c;++i)r.push("\\cellx"+(i+1));for(r.push("\\pard\\intbl"),i=n.s.c;i<=n.e.c;++i){var o=K2({r:s,c:i});(t=a?(e[s]||[])[i]:e[o])&&(null!=t.v||t.f&&!t.F)&&(r.push(" "+(t.w||(J2(t),t.w))),r.push("\\cell"))}r.push("\\pard\\intbl\\row")}return r.join("")+"}"}}}();function U3(e){for(var t=0,r=1;3!=t;++t)r=256*r+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}var q3=6;function W3(e){return Math.floor((e+Math.round(128/q3)/256)*q3)}function V3(e){return Math.floor((e-5)/q3*100+.5)/100}function H3(e){return Math.round((e*q3+5)/q3*256)/256}function G3(e){e.width?(e.wpx=W3(e.width),e.wch=V3(e.wpx),e.MDW=q3):e.wpx?(e.wch=V3(e.wpx),e.width=H3(e.wch),e.MDW=q3):"number"==typeof e.wch&&(e.width=H3(e.wch),e.wpx=W3(e.width),e.MDW=q3),e.customWidth&&delete e.customWidth}var K3=96;function Y3(e){return 96*e/K3}function X3(e){return e*K3/96}function Q3(e,t){var r,n=[d1,T1("styleSheet",null,{xmlns:H1[0],"xmlns:vt":q1})];return e.SSF&&null!=(r=function(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)null!=e[n]&&(t[t.length]=T1("numFmt",null,{numFmtId:n,formatCode:f1(e[n])}))}),1===t.length?"":(t[t.length]="</numFmts>",t[0]=T1("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}(e.SSF))&&(n[n.length]=r),n[n.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',n[n.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',n[n.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',n[n.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(r=function(e){var t=[];return t[t.length]=T1("cellXfs",null),e.forEach(function(e){t[t.length]=T1("xf",null,e)}),t[t.length]="</cellXfs>",2===t.length?"":(t[0]=T1("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}(t.cellXfs))&&(n[n.length]=r),n[n.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',n[n.length]='<dxfs count="0"/>',n[n.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',n.length>2&&(n[n.length]="</styleSheet>",n[1]=n[1].replace("/>",">")),n.join("")}function $3(e,t,r){r||(r=L2(6+4*t.length)),r.write_shift(2,e),a5(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return null==r.l&&(r.l=r.length),n}function J3(e,t){t||(t=L2(153)),t.write_shift(2,20*e.sz),function(e,t){t||(t=L2(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);t.write_shift(1,r),t.write_shift(1,0)}(e,t),t.write_shift(2,e.bold?700:400);var r=0;"superscript"==e.vertAlign?r=1:"subscript"==e.vertAlign&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),A5(e.color,t);var n=0;return"major"==e.scheme&&(n=1),"minor"==e.scheme&&(n=2),t.write_shift(1,n),a5(e.name,t),t.length>t.l?t.slice(0,t.l):t}var Z3,e4=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],t4=I2;function r4(e,t){t||(t=L2(84)),Z3||(Z3=V0(e4));var r=Z3[e.patternType];null==r&&(r=40),t.write_shift(4,r);var n=0;if(40!=r)for(A5({auto:1},t),A5({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function n4(e,t,r){r||(r=L2(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);return r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function a4(e,t){return t||(t=L2(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var s4=I2;function i4(e){R2(e,613,r5(1)),R2(e,46,function(e,t){return t||(t=L2(51)),t.write_shift(1,0),a4(0,t),a4(0,t),a4(0,t),a4(0,t),a4(0,t),t.length>t.l?t.slice(0,t.l):t}()),R2(e,614)}function o4(e){R2(e,619,r5(1)),R2(e,48,function(e,t){return t||(t=L2(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,+e.builtinId),t.write_shift(1,0),g5(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}({xfId:0,builtinId:0,name:"Normal"})),R2(e,620)}function l4(e){R2(e,508,function(e,t,r){var n=L2(2052);return n.write_shift(4,e),g5(t,n),g5(r,n),n.length>n.l?n.slice(0,n.l):n}(0,"TableStyleMedium9","PivotStyleMedium4")),R2(e,509)}function c4(e,t){var r=M2();return R2(r,278),function(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(e){for(var n=e[0];n<=e[1];++n)null!=t[n]&&++r}),0!=r&&(R2(e,615,r5(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)null!=t[n]&&R2(e,44,$3(n,t[n]))}),R2(e,616))}}(r,e.SSF),function(e){R2(e,611,r5(1)),R2(e,43,J3({sz:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"})),R2(e,612)}(r),function(e){R2(e,603,r5(2)),R2(e,45,r4({patternType:"none"})),R2(e,45,r4({patternType:"gray125"})),R2(e,604)}(r),i4(r),function(e){R2(e,626,r5(1)),R2(e,47,n4({numFmtId:0,fontId:0,fillId:0,borderId:0},65535)),R2(e,627)}(r),function(e,t){R2(e,617,r5(t.length)),t.forEach(function(t){R2(e,47,n4(t,0))}),R2(e,618)}(r,t.cellXfs),o4(r),function(e){R2(e,505,r5(0)),R2(e,506)}(r),l4(r),R2(r,279),r.end()}function d4(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&"string"==typeof e.raw)return e.raw;var r=[d1];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',r[r.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',r[r.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',r[r.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',r[r.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',r[r.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',r[r.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function u4(){var e=M2();return R2(e,332),R2(e,334,r5(1)),R2(e,335,function(e){var t=L2(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),a5(e.name,t),t.slice(0,t.l)}({name:"XLDAPR",version:12e4,flags:3496657072})),R2(e,336),R2(e,339,function(e,t){var r=L2(8+2*t.length);return r.write_shift(4,e),a5(t,r),r.slice(0,r.l)}(1,"XLDAPR")),R2(e,52),R2(e,35,r5(514)),R2(e,4096,r5(0)),R2(e,4097,i3(1)),R2(e,36),R2(e,53),R2(e,340),R2(e,337,function(e,t){var r=L2(8);return r.write_shift(4,e),r.write_shift(4,t?1:0),r}(1,!0)),R2(e,51,function(e){var t=L2(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}([[1,0]])),R2(e,338),R2(e,333),e.end()}function h4(){var e=[d1];return e.push('<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">\n  <metadataTypes count="1">\n    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>\n  </metadataTypes>\n  <futureMetadata name="XLDAPR" count="1">\n    <bk>\n      <extLst>\n        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">\n          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>\n        </ext>\n      </extLst>\n    </bk>\n  </futureMetadata>\n  <cellMetadata count="1">\n    <bk>\n      <rc t="1" v="0"/>\n    </bk>\n  </cellMetadata>\n</metadata>'),e.join("")}var m4=1024;function p4(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[T1("xml",null,{"xmlns:v":$1,"xmlns:o":G1,"xmlns:x":K1,"xmlns:mv":Q1}).replace(/\/>/,">"),T1("o:shapelayout",T1("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),T1("v:shapetype",[T1("v:stroke",null,{joinstyle:"miter"}),T1("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];m4<1e3*e;)m4+=1e3;return t.forEach(function(e){var t=G2(e[0]),r={color2:"#BEFF82",type:"gradient"};"gradient"==r.type&&(r.angle="-180");var n="gradient"==r.type?T1("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,s=T1("v:fill",n,r);++m4,a=a.concat(["<v:shape"+E1({id:"_x0000_s"+m4,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(e[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",s,T1("v:shadow",null,{on:"t",obscured:"t"}),T1("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",C1("x:Anchor",[t.c+1,0,t.r+1,0,t.c+3,20,t.r+5,20].join(",")),C1("x:AutoFill","False"),C1("x:Row",String(t.r)),C1("x:Column",String(t.c)),e[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function f4(e){var t=[d1,T1("comments",null,{xmlns:H1[0]})],r=[];return t.push("<authors>"),e.forEach(function(e){e[1].forEach(function(e){var n=f1(e.a);-1==r.indexOf(n)&&(r.push(n),t.push("<author>"+n+"</author>")),e.T&&e.ID&&-1==r.indexOf("tc="+e.ID)&&(r.push("tc="+e.ID),t.push("<author>tc="+e.ID+"</author>"))})}),0==r.length&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(e){var n=0,a=[];if(e[1][0]&&e[1][0].T&&e[1][0].ID?n=r.indexOf("tc="+e[1][0].ID):e[1].forEach(function(e){e.a&&(n=r.indexOf(f1(e.a))),a.push(e.t||"")}),t.push('<comment ref="'+e[0]+'" authorId="'+n+'"><text>'),a.length<=1)t.push(C1("t",f1(a[0]||"")));else{for(var s="Comment:\n    "+a[0]+"\n",i=1;i<a.length;++i)s+="Reply:\n    "+a[i]+"\n";t.push(C1("t",f1(s)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function g4(e,t,r){var n=[d1,T1("ThreadedComments",null,{xmlns:R1}).replace(/[\/]>/,">")];return e.forEach(function(e){var a="";(e[1]||[]).forEach(function(s,i){if(s.T){s.a&&-1==t.indexOf(s.a)&&t.push(s.a);var o={ref:e[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};0==i?a=o.id:o.parentId=a,s.ID=o.id,s.a&&(o.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(s.a)).slice(-12)+"}"),n.push(T1("threadedComment",C1("text",s.t||""),o))}else delete s.ID})}),n.push("</ThreadedComments>"),n.join("")}var x4=n5;function y4(e){var t=M2(),r=[];return R2(t,628),R2(t,630),e.forEach(function(e){e[1].forEach(function(e){r.indexOf(e.a)>-1||(r.push(e.a.slice(0,54)),R2(t,632,function(e){return a5(e.slice(0,54))}(e.a)))})}),R2(t,631),R2(t,633),e.forEach(function(e){e[1].forEach(function(n){n.iauthor=r.indexOf(n.a);var a={s:G2(e[0]),e:G2(e[0])};R2(t,635,function(e,t){return null==t&&(t=L2(36)),t.write_shift(4,e[1].iauthor),_5(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}([a,n])),n.t&&n.t.length>0&&R2(t,637,l5(n)),R2(t,636),delete n.iauthor})}),R2(t,634),R2(t,629),t.end()}var v4=["xlsb","xlsm","xlam","biff8","xla"];var b4=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(e,r,n,a){var s=!1,i=!1;0==n.length?i=!0:"["==n.charAt(0)&&(i=!0,n=n.slice(1,-1)),0==a.length?s=!0:"["==a.charAt(0)&&(s=!0,a=a.slice(1,-1));var o=n.length>0?0|parseInt(n,10):0,l=a.length>0?0|parseInt(a,10):0;return s?l+=t.c:--l,i?o+=t.r:--o,r+(s?"":"$")+H2(l)+(i?"":"$")+W2(o)}return function(n,a){return t=a,n.replace(e,r)}}(),j4=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,w4=function(){return function(e,t){return e.replace(j4,function(e,r,n,a,s,i){var o=V2(a)-(n?0:t.c),l=q2(i)-(s?0:t.r);return r+"R"+(0==l?"":s?l+1:"["+l+"]")+"C"+(0==o?"":n?o+1:"["+o+"]")})}}();function N4(e,t){return e.replace(j4,function(e,r,n,a,s,i){return r+("$"==n?n+a:H2(V2(a)+t.c))+("$"==s?s+i:W2(q2(i)+t.r))})}function _4(e){e.l+=1}function k4(e,t){var r=e.read_shift(1==t?1:2);return[16383&r,r>>14&1,r>>15&1]}function S4(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return A4(e);12==r.biff&&(n=4)}var a=e.read_shift(n),s=e.read_shift(n),i=k4(e,2),o=k4(e,2);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function A4(e){var t=k4(e,2),r=k4(e,2),n=e.read_shift(1),a=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function C4(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return function(e){var t=k4(e,2),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}(e);var n=e.read_shift(r&&12==r.biff?4:2),a=k4(e,2);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function E4(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:255&r,fQuoted:!!(16384&r),cRel:r>>15,rRel:r>>15}}function T4(e){var t=1&e[e.l+1];return e.l+=4,[t,1]}function P4(e){return[e.read_shift(1),e.read_shift(1)]}function O4(e,t){var r=[e.read_shift(1)];if(12==t)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2}switch(r[0]){case 4:r[1]=n3(e,1)?"TRUE":"FALSE",12!=t&&(e.l+=7);break;case 37:case 16:r[1]=D5[e[e.l]],e.l+=12==t?4:8;break;case 0:e.l+=8;break;case 1:r[1]=k5(e);break;case 2:r[1]=h3(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function D4(e,t,r){for(var n=e.read_shift(12==r.biff?4:2),a=[],s=0;s!=n;++s)a.push((12==r.biff?N5:y3)(e,8));return a}function I4(e,t,r){var n=0,a=0;12==r.biff?(n=e.read_shift(4),a=e.read_shift(4)):(a=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,0==--a&&(a=256));for(var s=0,i=[];s!=n&&(i[s]=[]);++s)for(var o=0;o!=a;++o)i[s][o]=O4(e,r.biff);return i}function L4(e,t,r){return e.l+=2,[E4(e)]}function M4(e){return e.l+=6,[]}function R4(e){return e.l+=2,[s3(e),1&e.read_shift(2)]}var F4=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];var B4={1:{n:"PtgExp",f:function(e,t,r){return e.l++,r&&12==r.biff?[e.read_shift(4,"i"),0]:[e.read_shift(2),e.read_shift(r&&2==r.biff?1:2)]}},2:{n:"PtgTbl",f:I2},3:{n:"PtgAdd",f:_4},4:{n:"PtgSub",f:_4},5:{n:"PtgMul",f:_4},6:{n:"PtgDiv",f:_4},7:{n:"PtgPower",f:_4},8:{n:"PtgConcat",f:_4},9:{n:"PtgLt",f:_4},10:{n:"PtgLe",f:_4},11:{n:"PtgEq",f:_4},12:{n:"PtgGe",f:_4},13:{n:"PtgGt",f:_4},14:{n:"PtgNe",f:_4},15:{n:"PtgIsect",f:_4},16:{n:"PtgUnion",f:_4},17:{n:"PtgRange",f:_4},18:{n:"PtgUplus",f:_4},19:{n:"PtgUminus",f:_4},20:{n:"PtgPercent",f:_4},21:{n:"PtgParen",f:_4},22:{n:"PtgMissArg",f:_4},23:{n:"PtgStr",f:function(e,t,r){return e.l++,l3(e,0,r)}},26:{n:"PtgSheet",f:function(e,t,r){return e.l+=5,e.l+=2,e.l+=2==r.biff?1:4,["PTGSHEET"]}},27:{n:"PtgEndSheet",f:function(e,t,r){return e.l+=2==r.biff?4:5,["PTGENDSHEET"]}},28:{n:"PtgErr",f:function(e){return e.l++,D5[e.read_shift(1)]}},29:{n:"PtgBool",f:function(e){return e.l++,0!==e.read_shift(1)}},30:{n:"PtgInt",f:function(e){return e.l++,e.read_shift(2)}},31:{n:"PtgNum",f:function(e){return e.l++,k5(e)}},32:{n:"PtgArray",f:function(e,t,r){var n=(96&e[e.l++])>>5;return e.l+=2==r.biff?6:12==r.biff?14:7,[n]}},33:{n:"PtgFunc",f:function(e,t,r){var n=(96&e[e.l])>>5;e.l+=1;var a=e.read_shift(r&&r.biff<=3?1:2);return[a6[a],n6[a],n]}},34:{n:"PtgFuncVar",f:function(e,t,r){var n=e[e.l++],a=e.read_shift(1),s=r&&r.biff<=3?[88==n?-1:0,e.read_shift(1)]:function(e){return[e[e.l+1]>>7,32767&e.read_shift(2)]}(e);return[a,(0===s[0]?n6:r6)[s[1]]]}},35:{n:"PtgName",f:function(e,t,r){var n=e.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,s=e.read_shift(a);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12}return[n,0,s]}},36:{n:"PtgRef",f:function(e,t,r){var n=(96&e[e.l])>>5;return e.l+=1,[n,C4(e,0,r)]}},37:{n:"PtgArea",f:function(e,t,r){return[(96&e[e.l++])>>5,S4(e,r.biff>=2&&r.biff,r)]}},38:{n:"PtgMemArea",f:function(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=r&&2==r.biff?3:4,[n,e.read_shift(r&&2==r.biff?1:2)]}},39:{n:"PtgMemErr",f:I2},40:{n:"PtgMemNoMem",f:I2},41:{n:"PtgMemFunc",f:function(e,t,r){return[e.read_shift(1)>>>5&3,e.read_shift(r&&2==r.biff?1:2)]}},42:{n:"PtgRefErr",f:function(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,12==r.biff&&(e.l+=2),[n]}},43:{n:"PtgAreaErr",f:function(e,t,r){var n=(96&e[e.l++])>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}},44:{n:"PtgRefN",f:function(e,t,r){var n=(96&e[e.l])>>5;e.l+=1;var a=function(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return function(e){var t=e.read_shift(2),r=e.read_shift(1),n=(32768&t)>>15,a=(16384&t)>>14;return t&=16383,1==n&&t>=8192&&(t-=16384),1==a&&r>=128&&(r-=256),{r:t,c:r,cRel:a,rRel:n}}(e);var a=e.read_shift(n>=12?4:2),s=e.read_shift(2),i=(16384&s)>>14,o=(32768&s)>>15;if(s&=16383,1==o)for(;a>524287;)a-=1048576;if(1==i)for(;s>8191;)s-=16384;return{r:a,c:s,cRel:i,rRel:o}}(e,0,r);return[n,a]}},45:{n:"PtgAreaN",f:function(e,t,r){var n=(96&e[e.l++])>>5,a=function(e,t,r){if(r.biff<8)return A4(e);var n=e.read_shift(12==r.biff?4:2),a=e.read_shift(12==r.biff?4:2),s=k4(e,2),i=k4(e,2);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:i[0],cRel:i[1],rRel:i[2]}}}(e,0,r);return[n,a]}},46:{n:"PtgMemAreaN",f:function(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},47:{n:"PtgMemNoMemN",f:function(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},57:{n:"PtgNameX",f:function(e,t,r){return 5==r.biff?function(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}(e):[e.read_shift(1)>>>5&3,e.read_shift(2),e.read_shift(4)]}},58:{n:"PtgRef3d",f:function(e,t,r){var n=(96&e[e.l])>>5;e.l+=1;var a=e.read_shift(2);return r&&5==r.biff&&(e.l+=12),[n,a,C4(e,0,r)]}},59:{n:"PtgArea3d",f:function(e,t,r){var n=(96&e[e.l++])>>5,a=e.read_shift(2,"i");if(r)switch(r.biff){case 5:e.l+=12;break;case 12:0}return[n,a,S4(e,0,r)]}},60:{n:"PtgRefErr3d",f:function(e,t,r){var n=(96&e[e.l++])>>5,a=e.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6}return e.l+=s,[n,a]}},61:{n:"PtgAreaErr3d",f:function(e,t,r){var n=(96&e[e.l++])>>5,a=e.read_shift(2),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12}return e.l+=s,[n,a]}},255:{}},z4={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},U4={1:{n:"PtgElfLel",f:R4},2:{n:"PtgElfRw",f:L4},3:{n:"PtgElfCol",f:L4},6:{n:"PtgElfRwV",f:L4},7:{n:"PtgElfColV",f:L4},10:{n:"PtgElfRadical",f:L4},11:{n:"PtgElfRadicalS",f:M4},13:{n:"PtgElfColS",f:M4},15:{n:"PtgElfColSV",f:M4},16:{n:"PtgElfRadicalLel",f:R4},25:{n:"PtgList",f:function(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a=e.read_shift(2),s=e.read_shift(2);return{ixti:t,coltype:3&r,rt:F4[r>>2&31],idx:n,c:a,C:s}}},29:{n:"PtgSxName",f:function(e){return e.l+=2,[e.read_shift(4)]}},255:{}},q4={0:{n:"PtgAttrNoop",f:function(e){return e.l+=4,[0,0]}},1:{n:"PtgAttrSemi",f:function(e,t,r){var n=255&e[e.l+1]?1:0;return e.l+=r&&2==r.biff?3:4,[n]}},2:{n:"PtgAttrIf",f:function(e,t,r){var n=255&e[e.l+1]?1:0;return e.l+=2,[n,e.read_shift(r&&2==r.biff?1:2)]}},4:{n:"PtgAttrChoose",f:function(e,t,r){e.l+=2;for(var n=e.read_shift(r&&2==r.biff?1:2),a=[],s=0;s<=n;++s)a.push(e.read_shift(r&&2==r.biff?1:2));return a}},8:{n:"PtgAttrGoto",f:function(e,t,r){var n=255&e[e.l+1]?1:0;return e.l+=2,[n,e.read_shift(r&&2==r.biff?1:2)]}},16:{n:"PtgAttrSum",f:function(e,t,r){e.l+=r&&2==r.biff?3:4}},32:{n:"PtgAttrBaxcel",f:T4},33:{n:"PtgAttrBaxcel",f:T4},64:{n:"PtgAttrSpace",f:function(e){return e.read_shift(2),P4(e)}},65:{n:"PtgAttrSpaceSemi",f:function(e){return e.read_shift(2),P4(e)}},128:{n:"PtgAttrIfError",f:function(e){var t=255&e[e.l+1]?1:0;return e.l+=2,[t,e.read_shift(2)]}},255:{}};function W4(e,t,r,n){if(n.biff<8)return I2(e,t);for(var a=e.l+t,s=[],i=0;i!==r.length;++i)switch(r[i][0]){case"PtgArray":r[i][1]=I4(e,0,n),s.push(r[i][1]);break;case"PtgMemArea":r[i][2]=D4(e,r[i][1],n),s.push(r[i][2]);break;case"PtgExp":n&&12==n.biff&&(r[i][1][1]=e.read_shift(4),s.push(r[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[i][0]}return 0!==(t=a-e.l)&&s.push(I2(e,t)),s}function V4(e,t,r){for(var n,a,s=e.l+t,i=[];s!=e.l;)t=s-e.l,a=e[e.l],n=B4[a]||B4[z4[a]],24!==a&&25!==a||(n=(24===a?U4:q4)[e[e.l+1]]),n&&n.f?i.push([n.n,n.f(e,t,r)]):I2(e,t);return i}function H4(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],a=[],s=0;s<n.length;++s){var i=n[s];if(i)if(2===i[0])a.push('"'+i[1].replace(/"/g,'""')+'"');else a.push(i[1]);else a.push("")}t.push(a.join(","))}return t.join(";")}var G4={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function K4(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),0==t?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(e[n[0]][0]){case 357:return a=-1==n[1]?"#REF":e.SheetNames[n[1]],n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 358:return null!=r.SID?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return a=-1==n[1]?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(e){return e.Name}).join(";;");default:return e[n[0]][0][3]?(a=-1==n[1]?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function Y4(e,t,r){var n=K4(e,t,r);return"#REF"==n?n:function(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}(n,r)}function X4(e,t,r,n,a){var s,i,o,l,c=a&&a.biff||8,d={s:{c:0,r:0},e:{c:0,r:0}},u=[],h=0,m=0,p="";if(!e[0]||!e[0][0])return"";for(var f=-1,g="",x=0,y=e[0].length;x<y;++x){var v=e[0][x];switch(v[0]){case"PtgUminus":u.push("-"+u.pop());break;case"PtgUplus":u.push("+"+u.pop());break;case"PtgPercent":u.push(u.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(s=u.pop(),i=u.pop(),f>=0){switch(e[0][f][1][0]){case 0:g=a1(" ",e[0][f][1][1]);break;case 1:g=a1("\r",e[0][f][1][1]);break;default:if(g="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][f][1][0])}i+=g,f=-1}u.push(i+G4[v[0]]+s);break;case"PtgIsect":s=u.pop(),i=u.pop(),u.push(i+" "+s);break;case"PtgUnion":s=u.pop(),i=u.pop(),u.push(i+","+s);break;case"PtgRange":s=u.pop(),i=u.pop(),u.push(i+":"+s);break;case"PtgAttrChoose":case"PtgAttrGoto":case"PtgAttrIf":case"PtgAttrIfError":case"PtgAttrBaxcel":case"PtgAttrSemi":case"PtgMemArea":case"PtgTbl":case"PtgMemErr":case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":case"PtgMemFunc":case"PtgMemNoMem":break;case"PtgRef":o=F2(v[1][1],d,a),u.push(z2(o,c));break;case"PtgRefN":o=r?F2(v[1][1],r,a):v[1][1],u.push(z2(o,c));break;case"PtgRef3d":h=v[1][1],o=F2(v[1][2],d,a);p=Y4(n,h,a);u.push(p+"!"+z2(o,c));break;case"PtgFunc":case"PtgFuncVar":var b=v[1][0],j=v[1][1];b||(b=0);var w=0==(b&=127)?[]:u.slice(-b);u.length-=b,"User"===j&&(j=w.shift()),u.push(j+"("+w.join(",")+")");break;case"PtgBool":u.push(v[1]?"TRUE":"FALSE");break;case"PtgInt":case"PtgErr":u.push(v[1]);break;case"PtgNum":u.push(String(v[1]));break;case"PtgStr":u.push('"'+v[1].replace(/"/g,'""')+'"');break;case"PtgAreaN":l=B2(v[1][1],r?{s:r}:d,a),u.push(U2(l,a));break;case"PtgArea":l=B2(v[1][1],d,a),u.push(U2(l,a));break;case"PtgArea3d":h=v[1][1],l=v[1][2],p=Y4(n,h,a),u.push(p+"!"+U2(l,a));break;case"PtgAttrSum":u.push("SUM("+u.pop()+")");break;case"PtgName":m=v[1][2];var N=(n.names||[])[m-1]||(n[0]||[])[m],_=N?N.Name:"SH33TJSNAME"+String(m);_&&"_xlfn."==_.slice(0,6)&&!a.xlfn&&(_=_.slice(6)),u.push(_);break;case"PtgNameX":var k,S=v[1][1];if(m=v[1][2],!(a.biff<=5)){var A="";if(14849==((n[S]||[])[0]||[])[0]||(1025==((n[S]||[])[0]||[])[0]?n[S][m]&&n[S][m].itab>0&&(A=n.SheetNames[n[S][m].itab-1]+"!"):A=n.SheetNames[m-1]+"!"),n[S]&&n[S][m])A+=n[S][m].Name;else if(n[0]&&n[0][m])A+=n[0][m].Name;else{var C=(K4(n,S,a)||"").split(";;");C[m-1]?A=C[m-1]:A+="SH33TJSERRX"}u.push(A);break}S<0&&(S=-S),n[S]&&(k=n[S][m]),k||(k={Name:"SH33TJSERRY"}),u.push(k.Name);break;case"PtgParen":var E="(",T=")";if(f>=0){switch(g="",e[0][f][1][0]){case 2:E=a1(" ",e[0][f][1][1])+E;break;case 3:E=a1("\r",e[0][f][1][1])+E;break;case 4:T=a1(" ",e[0][f][1][1])+T;break;case 5:T=a1("\r",e[0][f][1][1])+T;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][f][1][0])}f=-1}u.push(E+u.pop()+T);break;case"PtgRefErr":case"PtgRefErr3d":case"PtgAreaErr":case"PtgAreaErr3d":u.push("#REF!");break;case"PtgExp":o={c:v[1][1],r:v[1][0]};var P={c:r.c,r:r.r};if(n.sharedf[K2(o)]){var O=n.sharedf[K2(o)];u.push(X4(O,d,P,n,a))}else{var D=!1;for(s=0;s!=n.arrayf.length;++s)if(i=n.arrayf[s],!(o.c<i[0].s.c||o.c>i[0].e.c)&&!(o.r<i[0].s.r||o.r>i[0].e.r)){u.push(X4(i[1],d,P,n,a)),D=!0;break}D||u.push(v[1])}break;case"PtgArray":u.push("{"+H4(v[1])+"}");break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":f=x;break;case"PtgMissArg":u.push("");break;case"PtgList":u.push("Table"+v[1].idx+"[#"+v[1].rt+"]");break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");default:throw new Error("Unrecognized Formula Token: "+String(v))}if(3!=a.biff&&f>=0&&-1==["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"].indexOf(e[0][x][0])){var I=!0;switch((v=e[0][f])[1][0]){case 4:I=!1;case 0:g=a1(" ",v[1][1]);break;case 5:I=!1;case 1:g=a1("\r",v[1][1]);break;default:if(g="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+v[1][0])}u.push((I?g:"")+u.pop()+(I?"":g)),f=-1}}if(u.length>1&&a.WTF)throw new Error("bad formula stack");return u[0]}function Q4(e,t,r,n,a){var s=g3(t,r,a),i=function(e){if(null==e){var t=L2(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}return S5("number"==typeof e?e:0)}(e.v),o=L2(6);o.write_shift(2,33),o.write_shift(4,0);for(var l=L2(e.bf.length),c=0;c<e.bf.length;++c)l[c]=e.bf[c];return qZ([s,i,o,l])}function $4(e,t,r){var n=e.read_shift(4),a=V4(e,n,r),s=e.read_shift(4);return[a,s>0?W4(e,s,a,r):null]}var J4=$4,Z4=$4,e6=$4,t6=$4,r6={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},n6={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},a6={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function s6(e){return("of:="+e.replace(j4,"$1[.$2$3$4$5]").replace(/\]:\[/g,":")).replace(/;/g,"|").replace(/,/g,";")}function i6(e){return e.replace(/\./,"!")}var o6="undefined"!==typeof Map;function l6(e,t,r){var n=0,a=e.length;if(r){if(o6?r.has(t):Object.prototype.hasOwnProperty.call(r,t))for(var s=o6?r.get(t):r[t];n<s.length;++n)if(e[s[n]].t===t)return e.Count++,s[n]}else for(;n<a;++n)if(e[n].t===t)return e.Count++,n;return e[a]={t:t},e.Count++,e.Unique++,r&&(o6?(r.has(t)||r.set(t,[]),r.get(t).push(a)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(a))),a}function c6(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(q3=t.MDW),null!=t.width?r.customWidth=1:null!=t.wpx?n=V3(t.wpx):null!=t.wch&&(n=t.wch),n>-1?(r.width=H3(n),r.customWidth=1):null!=t.width&&(r.width=t.width),t.hidden&&(r.hidden=!0),null!=t.level&&(r.outlineLevel=r.level=t.level),r}function d6(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];"xlml"==t&&(r=[1,1,1,1,.5,.5]),null==e.left&&(e.left=r[0]),null==e.right&&(e.right=r[1]),null==e.top&&(e.top=r[2]),null==e.bottom&&(e.bottom=r[3]),null==e.header&&(e.header=r[4]),null==e.footer&&(e.footer=r[5])}}function u6(e,t,r){var n=r.revssf[null!=t.z?t.z:"General"],a=60,s=e.length;if(null==n&&r.ssf)for(;a<392;++a)if(null==r.ssf[a]){D0(t.z,a),r.ssf[a]=t.z,r.revssf[t.z]=n=a;break}for(a=0;a!=s;++a)if(e[a].numFmtId===n)return a;return e[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function h6(e,t,r){if(e&&e["!ref"]){var n=Q2(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}var m6=["objects","scenarios","selectLockedCells","selectUnlockedCells"],p6=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function f6(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),void 0===e.v&&"string"!==typeof e.f||"z"===e.t&&!e.f)return"";var a="",s=e.t,i=e.v;if("z"!==e.t)switch(e.t){case"b":a=e.v?"1":"0";break;case"n":a=""+e.v;break;case"e":a=D5[e.v];break;case"d":n&&n.cellDates?a=t1(e.v,-1).toISOString():((e=n1(e)).t="n",a=""+(e.v=K0(t1(e.v)))),"undefined"===typeof e.z&&(e.z=e0[14]);break;default:a=e.v}var o=C1("v",f1(a)),l={r:t},c=u6(n.cellXfs,e,n);switch(0!==c&&(l.s=c),e.t){case"n":case"z":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;default:if(null==e.v){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=C1("v",""+l6(n.Strings,e.v,n.revStrings)),l.t="s";break}l.t="str"}if(e.t!=s&&(e.t=s,e.v=i),"string"==typeof e.f&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;o=T1("f",f1(e.f),d)+(null!=e.v?o:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(l.cm=1),T1("c",o,l)}function g6(e,t,r,n){var a,s=[d1,T1("worksheet",null,{xmlns:H1[0],"xmlns:r":U1})],i=r.SheetNames[e],o="",l=r.Sheets[i];null==l&&(l={});var c=l["!ref"]||"A1",d=Q2(c);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+c+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),c=X2(d)}n||(n={}),l["!comments"]=[];var u=[];!function(e,t,r,n,a){var s=!1,i={},o=null;if("xlsx"!==n.bookType&&t.vbaraw){var l=t.SheetNames[r];try{t.Workbook&&(l=t.Workbook.Sheets[r].CodeName||l)}catch(ze){}s=!0,i.codeName=k1(f1(l))}if(e&&e["!outline"]){var c={summaryBelow:1,summaryRight:1};e["!outline"].above&&(c.summaryBelow=0),e["!outline"].left&&(c.summaryRight=0),o=(o||"")+T1("outlinePr",null,c)}(s||o)&&(a[a.length]=T1("sheetPr",o,i))}(l,r,e,t,s),s[s.length]=T1("dimension",null,{ref:c}),s[s.length]=function(e,t,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),T1("sheetViews",T1("sheetView",null,a),{})}(0,0,0,r),t.sheetFormat&&(s[s.length]=T1("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),null!=l["!cols"]&&l["!cols"].length>0&&(s[s.length]=function(e,t){for(var r,n=["<cols>"],a=0;a!=t.length;++a)(r=t[a])&&(n[n.length]=T1("col",null,c6(a,r)));return n[n.length]="</cols>",n.join("")}(0,l["!cols"])),s[a=s.length]="<sheetData/>",l["!links"]=[],null!=l["!ref"]&&(o=function(e,t){var r,n,a=[],s=[],i=Q2(e["!ref"]),o="",l="",c=[],d=0,u=0,h=e["!rows"],m=Array.isArray(e),p={r:l},f=-1;for(u=i.s.c;u<=i.e.c;++u)c[u]=H2(u);for(d=i.s.r;d<=i.e.r;++d){for(s=[],l=W2(d),u=i.s.c;u<=i.e.c;++u){r=c[u]+l;var g=m?(e[d]||[])[u]:e[r];void 0!==g&&null!=(o=f6(g,r,e,t))&&s.push(o)}(s.length>0||h&&h[d])&&(p={r:l},h&&h[d]&&((n=h[d]).hidden&&(p.hidden=1),f=-1,n.hpx?f=Y3(n.hpx):n.hpt&&(f=n.hpt),f>-1&&(p.ht=f,p.customHeight=1),n.level&&(p.outlineLevel=n.level)),a[a.length]=T1("row",s.join(""),p))}if(h)for(;d<h.length;++d)h&&h[d]&&(p={r:d+1},(n=h[d]).hidden&&(p.hidden=1),f=-1,n.hpx?f=Y3(n.hpx):n.hpt&&(f=n.hpt),f>-1&&(p.ht=f,p.customHeight=1),n.level&&(p.outlineLevel=n.level),a[a.length]=T1("row","",p));return a.join("")}(l,t,0,0),o.length>0&&(s[s.length]=o)),s.length>a+1&&(s[s.length]="</sheetData>",s[a]=s[a].replace("/>",">")),l["!protect"]&&(s[s.length]=function(e){var t={sheet:1};return m6.forEach(function(r){null!=e[r]&&e[r]&&(t[r]="1")}),p6.forEach(function(r){null==e[r]||e[r]||(t[r]="0")}),e.password&&(t.password=B3(e.password).toString(16).toUpperCase()),T1("sheetProtection",null,t)}(l["!protect"])),null!=l["!autofilter"]&&(s[s.length]=function(e,t,r,n){var a="string"==typeof e.ref?e.ref:X2(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,i=Y2(a);i.s.r==i.e.r&&(i.e.r=Y2(t["!ref"]).e.r,a=X2(i));for(var o=0;o<s.length;++o){var l=s[o];if("_xlnm._FilterDatabase"==l.Name&&l.Sheet==n){l.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return o==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),T1("autoFilter",null,{ref:a})}(l["!autofilter"],l,r,e)),null!=l["!merges"]&&l["!merges"].length>0&&(s[s.length]=function(e){if(0===e.length)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+X2(e[r])+'"/>';return t+"</mergeCells>"}(l["!merges"]));var h,m,p=-1,f=-1;return l["!links"].length>0&&(s[s.length]="<hyperlinks>",l["!links"].forEach(function(e){e[1].Target&&(h={ref:e[0]},"#"!=e[1].Target.charAt(0)&&(f=z5(n,-1,f1(e[1].Target).replace(/#.*$/,""),R5.HLINK),h["r:id"]="rId"+f),(p=e[1].Target.indexOf("#"))>-1&&(h.location=f1(e[1].Target.slice(p+1))),e[1].Tooltip&&(h.tooltip=f1(e[1].Tooltip)),s[s.length]=T1("hyperlink",null,h))}),s[s.length]="</hyperlinks>"),delete l["!links"],null!=l["!margins"]&&(s[s.length]=(d6(m=l["!margins"]),T1("pageMargins",null,m))),t&&!t.ignoreEC&&void 0!=t.ignoreEC||(s[s.length]=C1("ignoredErrors",T1("ignoredError",null,{numberStoredAsText:1,sqref:c}))),u.length>0&&(f=z5(n,-1,"../drawings/drawing"+(e+1)+".xml",R5.DRAW),s[s.length]=T1("drawing",null,{"r:id":"rId"+f}),l["!drawing"]=u),l["!comments"].length>0&&(f=z5(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",R5.VML),s[s.length]=T1("legacyDrawing",null,{"r:id":"rId"+f}),l["!legacy"]=f),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function x6(e,t,r,n){var a=function(e,t,r){var n=L2(145),a=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var s=320;a.hpx?s=20*Y3(a.hpx):a.hpt&&(s=20*a.hpt),n.write_shift(2,s),n.write_shift(1,0);var i=0;a.level&&(i|=a.level),a.hidden&&(i|=16),(a.hpx||a.hpt)&&(i|=32),n.write_shift(1,i),n.write_shift(1,0);var o=0,l=n.l;n.l+=4;for(var c={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var u=-1,h=-1,m=d<<10;m<d+1<<10;++m)c.c=m,(Array.isArray(r)?(r[c.r]||[])[c.c]:r[K2(c)])&&(u<0&&(u=m),h=m);u<0||(++o,n.write_shift(4,u),n.write_shift(4,h))}var p=n.l;return n.l=l,n.write_shift(4,o),n.l=p,n.length>n.l?n.slice(0,n.l):n}(n,r,t);(a.length>17||(t["!rows"]||[])[n])&&R2(e,0,a)}var y6=N5,v6=_5;function b6(e){return[u5(e),k5(e),"n"]}var j6=N5,w6=_5;var N6=["left","right","top","bottom","header","footer"];function _6(e,t,r,n,a,s,i){if(void 0===t.v)return!1;var o="";switch(t.t){case"b":o=t.v?"1":"0";break;case"d":(t=n1(t)).z=t.z||e0[14],t.v=K0(t1(t.v)),t.t="n";break;case"n":case"e":o=""+t.v;break;default:o=t.v}var l={r:r,c:n};switch(l.s=u6(a.cellXfs,t,a),t.l&&s["!links"].push([K2(l),t.l]),t.c&&s["!comments"].push([K2(l),t.c]),t.t){case"s":case"str":return a.bookSST?(o=l6(a.Strings,t.v,a.revStrings),l.t="s",l.v=o,i?R2(e,18,function(e,t,r){return null==r&&(r=L2(8)),h5(t,r),r.write_shift(4,t.v),r}(0,l)):R2(e,7,function(e,t,r){return null==r&&(r=L2(12)),d5(t,r),r.write_shift(4,t.v),r}(0,l))):(l.t="str",i?R2(e,17,function(e,t,r){return null==r&&(r=L2(8+4*e.v.length)),h5(t,r),a5(e.v,r),r.length>r.l?r.slice(0,r.l):r}(t,l)):R2(e,6,function(e,t,r){return null==r&&(r=L2(12+4*e.v.length)),d5(t,r),a5(e.v,r),r.length>r.l?r.slice(0,r.l):r}(t,l))),!0;case"n":return t.v==(0|t.v)&&t.v>-1e3&&t.v<1e3?i?R2(e,13,function(e,t,r){return null==r&&(r=L2(8)),h5(t,r),j5(e.v,r),r}(t,l)):R2(e,2,function(e,t,r){return null==r&&(r=L2(12)),d5(t,r),j5(e.v,r),r}(t,l)):i?R2(e,16,function(e,t,r){return null==r&&(r=L2(12)),h5(t,r),S5(e.v,r),r}(t,l)):R2(e,5,function(e,t,r){return null==r&&(r=L2(16)),d5(t,r),S5(e.v,r),r}(t,l)),!0;case"b":return l.t="b",i?R2(e,15,function(e,t,r){return null==r&&(r=L2(5)),h5(t,r),r.write_shift(1,e.v?1:0),r}(t,l)):R2(e,4,function(e,t,r){return null==r&&(r=L2(9)),d5(t,r),r.write_shift(1,e.v?1:0),r}(t,l)),!0;case"e":return l.t="e",i?R2(e,14,function(e,t,r){return null==r&&(r=L2(8)),h5(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}(t,l)):R2(e,3,function(e,t,r){return null==r&&(r=L2(9)),d5(t,r),r.write_shift(1,e.v),r}(t,l)),!0}return i?R2(e,12,function(e,t,r){return null==r&&(r=L2(4)),h5(t,r)}(0,l)):R2(e,1,function(e,t,r){return null==r&&(r=L2(8)),d5(t,r)}(0,l)),!0}function k6(e,t){t&&t["!merges"]&&(R2(e,177,function(e,t){return null==t&&(t=L2(4)),t.write_shift(4,e),t}(t["!merges"].length)),t["!merges"].forEach(function(t){R2(e,176,w6(t))}),R2(e,178))}function S6(e,t){t&&t["!cols"]&&(R2(e,390),t["!cols"].forEach(function(t,r){t&&R2(e,60,function(e,t,r){null==r&&(r=L2(18));var n=c6(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,256*(n.width||10)),r.write_shift(4,0);var a=0;return t.hidden&&(a|=1),"number"==typeof n.width&&(a|=2),t.level&&(a|=t.level<<8),r.write_shift(2,a),r}(r,t))}),R2(e,391))}function A6(e,t){t&&t["!ref"]&&(R2(e,648),R2(e,649,function(e){var t=L2(24);return t.write_shift(4,4),t.write_shift(4,1),_5(e,t),t}(Q2(t["!ref"]))),R2(e,650))}function C6(e,t,r){t["!links"].forEach(function(t){if(t[1].Target){var n=z5(r,-1,t[1].Target.replace(/#.*$/,""),R5.HLINK);R2(e,494,function(e,t){var r=L2(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));_5({s:G2(e[0]),e:G2(e[0])},r),v5("rId"+t,r);var n=e[1].Target.indexOf("#");return a5((-1==n?"":e[1].Target.slice(n+1))||"",r),a5(e[1].Tooltip||"",r),a5("",r),r.slice(0,r.l)}(t,n))}}),delete t["!links"]}function E6(e,t,r){R2(e,133),R2(e,137,function(e,t,r){null==r&&(r=L2(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}(0,r)),R2(e,138),R2(e,134)}function T6(e,t){t["!protect"]&&R2(e,535,function(e,t){return null==t&&(t=L2(66)),t.write_shift(2,e.password?B3(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,null==e[r[0]]||e[r[0]]?0:1):t.write_shift(4,null!=e[r[0]]&&e[r[0]]?0:1)}),t}(t["!protect"]))}function P6(e,t,r,n){var a=M2(),s=r.SheetNames[e],i=r.Sheets[s]||{},o=s;try{r&&r.Workbook&&(o=r.Workbook.Sheets[e].CodeName||o)}catch(ze){}var l=Q2(i["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],R2(a,129),(r.vbaraw||i["!outline"])&&R2(a,147,function(e,t,r){null==r&&(r=L2(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return A5({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),p5(e,r),r.slice(0,r.l)}(o,i["!outline"])),R2(a,148,v6(l)),E6(a,0,r.Workbook),S6(a,i),function(e,t,r,n){var a,s=Q2(t["!ref"]||"A1"),i="",o=[];R2(e,145);var l=Array.isArray(t),c=s.e.r;t["!rows"]&&(c=Math.max(s.e.r,t["!rows"].length-1));for(var d=s.s.r;d<=c;++d){i=W2(d),x6(e,t,s,d);var u=!1;if(d<=s.e.r)for(var h=s.s.c;h<=s.e.c;++h){d===s.s.r&&(o[h]=H2(h)),a=o[h]+i;var m=l?(t[d]||[])[h]:t[a];u=!!m&&_6(e,m,d,h,n,t,u)}}R2(e,146)}(a,i,0,t),T6(a,i),function(e,t,r,n){if(t["!autofilter"]){var a=t["!autofilter"],s="string"===typeof a.ref?a.ref:X2(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=Y2(s);o.s.r==o.e.r&&(o.e.r=Y2(t["!ref"]).e.r,s=X2(o));for(var l=0;l<i.length;++l){var c=i[l];if("_xlnm._FilterDatabase"==c.Name&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+s;break}}l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),R2(e,161,_5(Q2(s))),R2(e,162)}}(a,i,r,e),k6(a,i),C6(a,i,n),i["!margins"]&&R2(a,476,function(e,t){return null==t&&(t=L2(48)),d6(e),N6.forEach(function(r){S5(e[r],t)}),t}(i["!margins"])),t&&!t.ignoreEC&&void 0!=t.ignoreEC||A6(a,i),function(e,t,r,n){if(t["!comments"].length>0){var a=z5(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",R5.VML);R2(e,551,v5("rId"+a)),t["!legacy"]=a}}(a,i,e,n),R2(a,130),a.end()}var O6=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];var D6="][*?/\\".split("");function I6(e,t){if(e.length>31){if(t)return!1;throw new Error("Sheet names cannot exceed 31 chars")}var r=!0;return D6.forEach(function(n){if(-1!=e.indexOf(n)){if(!t)throw new Error("Sheet name cannot contain : \\ / ? * [ ]");r=!1}}),r}function L6(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];!function(e,t,r){e.forEach(function(n,a){I6(n);for(var s=0;s<a;++s)if(n==e[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var i=t&&t[a]&&t[a].CodeName||n;if(95==i.charCodeAt(0)&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)h6(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}function M6(e){var t=[d1];t[t.length]=T1("workbook",null,{xmlns:H1[0],"xmlns:r":U1});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(O6.forEach(function(t){null!=e.Workbook.WBProps[t[0]]&&e.Workbook.WBProps[t[0]]!=t[1]&&(n[t[0]]=e.Workbook.WBProps[t[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=T1("workbookPr",null,n);var a=e.Workbook&&e.Workbook.Sheets||[],s=0;if(a&&a[0]&&a[0].Hidden){for(t[t.length]="<bookViews>",s=0;s!=e.SheetNames.length&&a[s]&&a[s].Hidden;++s);s==e.SheetNames.length&&(s=0),t[t.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",s=0;s!=e.SheetNames.length;++s){var i={name:f1(e.SheetNames[s].slice(0,31))};if(i.sheetId=""+(s+1),i["r:id"]="rId"+(s+1),a[s])switch(a[s].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden"}t[t.length]=T1("sheet",null,i)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(e){var r={name:e.Name};e.Comment&&(r.comment=e.Comment),null!=e.Sheet&&(r.localSheetId=""+e.Sheet),e.Hidden&&(r.hidden="1"),e.Ref&&(t[t.length]=T1("definedName",f1(e.Ref),r))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function R6(e,t){return t||(t=L2(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),v5(e.strRelID,t),a5(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function F6(e,t){if(t.Workbook&&t.Workbook.Sheets){for(var r=t.Workbook.Sheets,n=0,a=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&-1==a?a=n:1==r[n].Hidden&&-1==s&&(s=n);s>a||(R2(e,135),R2(e,158,function(e,t){return t||(t=L2(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e),t.write_shift(1,120),t.length>t.l?t.slice(0,t.l):t}(a)),R2(e,136))}}function B6(e,t){var r=M2();return R2(r,131),R2(r,128,function(e,t){t||(t=L2(127));for(var r=0;4!=r;++r)t.write_shift(4,0);return a5("SheetJS",t),a5(bZ.version,t),a5(bZ.version,t),a5("7262",t),t.length>t.l?t.slice(0,t.l):t}()),R2(r,153,function(e,t){t||(t=L2(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),p5(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}(e.Workbook&&e.Workbook.WBProps||null)),F6(r,e),function(e,t){R2(e,143);for(var r=0;r!=t.SheetNames.length;++r)R2(e,156,R6({Hidden:t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]}));R2(e,144)}(r,e),R2(r,132),r.end()}function z6(e,t,r,n,a){return(".bin"===t.slice(-4)?P6:g6)(e,r,n,a)}function U6(e,t,r){return(".bin"===t.slice(-4)?y4:f4)(e,r)}function q6(e,t){var r=[];return e.Props&&r.push(function(e,t){var r=[];return q0($5).map(function(e){for(var t=0;t<V5.length;++t)if(V5[t][1]==e)return V5[t];for(t=0;t<K5.length;++t)if(K5[t][1]==e)return K5[t];throw e}).forEach(function(n){if(null!=e[n[1]]){var a=t&&t.Props&&null!=t.Props[n[1]]?t.Props[n[1]]:e[n[1]];"date"===n[2]&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"Z")),"number"==typeof a?a=String(a):!0===a||!1===a?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(C1($5[n[1]]||n[1],a))}}),T1("DocumentProperties",r.join(""),{xmlns:G1})}(e.Props,t)),e.Custprops&&r.push(function(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return e&&q0(e).forEach(function(t){if(Object.prototype.hasOwnProperty.call(e,t)){for(var n=0;n<V5.length;++n)if(t==V5[n][1])return;for(n=0;n<K5.length;++n)if(t==K5[n][1])return;for(n=0;n<r.length;++n)if(t==r[n])return;var s=e[t],i="string";"number"==typeof s?(i="float",s=String(s)):!0===s||!1===s?(i="boolean",s=s?"1":"0"):s=String(s),a.push(T1(g1(t),s,{"dt:dt":i}))}}),t&&q0(t).forEach(function(r){if(Object.prototype.hasOwnProperty.call(t,r)&&(!e||!Object.prototype.hasOwnProperty.call(e,r))){var n=t[r],s="string";"number"==typeof n?(s="float",n=String(n)):!0===n||!1===n?(s="boolean",n=n?"1":"0"):n instanceof Date?(s="dateTime.tz",n=n.toISOString()):n=String(n),a.push(T1(g1(r),n,{"dt:dt":s}))}}),"<"+n+' xmlns="'+G1+'">'+a.join("")+"</"+n+">"}(e.Props,e.Custprops)),r.join("")}function W6(e){return T1("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+w4(e.Ref,{r:0,c:0})})}function V6(e,t,r,n,a,s,i){if(!e||void 0==e.v&&void 0==e.f)return"";var o={};if(e.f&&(o["ss:Formula"]="="+f1(w4(e.f,i))),e.F&&e.F.slice(0,t.length)==t){var l=G2(e.F.slice(t.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==i.r?"":"["+(l.r-i.r)+"]")+"C"+(l.c==i.c?"":"["+(l.c-i.c)+"]")}if(e.l&&e.l.Target&&(o["ss:HRef"]=f1(e.l.Target),e.l.Tooltip&&(o["x:HRefScreenTip"]=f1(e.l.Tooltip))),r["!merges"])for(var c=r["!merges"],d=0;d!=c.length;++d)c[d].s.c==i.c&&c[d].s.r==i.r&&(c[d].e.c>c[d].s.c&&(o["ss:MergeAcross"]=c[d].e.c-c[d].s.c),c[d].e.r>c[d].s.r&&(o["ss:MergeDown"]=c[d].e.r-c[d].s.r));var u="",h="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":u="Number",h=String(e.v);break;case"b":u="Boolean",h=e.v?"1":"0";break;case"e":u="Error",h=D5[e.v];break;case"d":u="DateTime",h=new Date(e.v).toISOString(),null==e.z&&(e.z=e.z||e0[14]);break;case"s":u="String",h=((e.v||"")+"").replace(m1,function(e){return h1[e]}).replace(x1,function(e){return"&#x"+e.charCodeAt(0).toString(16).toUpperCase()+";"})}var m=u6(n.cellXfs,e,n);o["ss:StyleID"]="s"+(21+m),o["ss:Index"]=i.c+1;var p=null!=e.v?h:"",f="z"==e.t?"":'<Data ss:Type="'+u+'">'+p+"</Data>";return(e.c||[]).length>0&&(f+=e.c.map(function(e){var t=T1("ss:Data",(e.t||"").replace(/(\r\n|[\r\n])/g,"&#10;"),{xmlns:"http://www.w3.org/TR/REC-html40"});return T1("Comment",t,{"ss:Author":e.a})}).join("")),T1("Cell",f,o)}function H6(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=X3(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function G6(e,t,r){var n=[],a=r.SheetNames[e],s=r.Sheets[a],i=s?function(e,t,r,n){if(!e)return"";if(!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,s=[],i=0;i<a.length;++i){var o=a[i];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||s.push(W6(o)))}return s.join("")}(s,0,e,r):"";return i.length>0&&n.push("<Names>"+i+"</Names>"),i=s?function(e,t){if(!e["!ref"])return"";var r=Q2(e["!ref"]),n=e["!merges"]||[],a=0,s=[];e["!cols"]&&e["!cols"].forEach(function(e,t){G3(e);var r=!!e.width,n=c6(t,e),a={"ss:Index":t+1};r&&(a["ss:Width"]=W3(n.width)),e.hidden&&(a["ss:Hidden"]="1"),s.push(T1("Column",null,a))});for(var i=Array.isArray(e),o=r.s.r;o<=r.e.r;++o){for(var l=[H6(o,(e["!rows"]||[])[o])],c=r.s.c;c<=r.e.c;++c){var d=!1;for(a=0;a!=n.length;++a)if(!(n[a].s.c>c)&&!(n[a].s.r>o)&&!(n[a].e.c<c)&&!(n[a].e.r<o)){n[a].s.c==c&&n[a].s.r==o||(d=!0);break}if(!d){var u={r:o,c:c},h=K2(u),m=i?(e[o]||[])[c]:e[h];l.push(V6(m,h,e,t,0,0,u))}}l.push("</Row>"),l.length>2&&s.push(l.join(""))}return s.join("")}(s,t):"",i.length>0&&n.push("<Table>"+i+"</Table>"),n.push(function(e,t,r,n){if(!e)return"";var a=[];if(e["!margins"]&&(a.push("<PageSetup>"),e["!margins"].header&&a.push(T1("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&a.push(T1("Footer",null,{"x:Margin":e["!margins"].footer})),a.push(T1("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(T1("Visible",1==n.Workbook.Sheets[r].Hidden?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&(!n.Workbook.Sheets[s]||n.Workbook.Sheets[s].Hidden);++s);s==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),e["!protect"]&&(a.push(C1("ProtectContents","True")),e["!protect"].objects&&a.push(C1("ProtectObjects","True")),e["!protect"].scenarios&&a.push(C1("ProtectScenarios","True")),null==e["!protect"].selectLockedCells||e["!protect"].selectLockedCells?null==e["!protect"].selectUnlockedCells||e["!protect"].selectUnlockedCells||a.push(C1("EnableSelection","UnlockedCells")):a.push(C1("EnableSelection","NoSelection")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(t){e["!protect"][t[0]]&&a.push("<"+t[1]+"/>")})),0==a.length?"":T1("WorksheetOptions",a.join(""),{xmlns:K1})}(s,0,e,r)),n.join("")}function K6(e,t){t||(t={}),e.SSF||(e.SSF=n1(e0)),e.SSF&&(L0(),I0(e.SSF),t.revssf=H0(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],u6(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(q6(e,t)),r.push(""),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(T1("Worksheet",G6(n,t,e),{"ss:Name":f1(e.SheetNames[n])}));return r[2]=function(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(e,t){var n=[];n.push(T1("NumberFormat",null,{"ss:Format":f1(e0[e.numFmtId])}));var a={"ss:ID":"s"+(21+t)};r.push(T1("Style",n.join(""),a))}),T1("Styles",r.join(""))}(0,t),r[3]=function(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var a=t[n];null==a.Sheet&&(a.Name.match(/^_xlfn\./)||r.push(W6(a)))}return T1("Names",r.join(""))}(e),d1+T1("Workbook",r.join(""),{xmlns:Y1,"xmlns:o":G1,"xmlns:x":K1,"xmlns:ss":Y1,"xmlns:dt":X1,"xmlns:html":J1})}var Y6="e0859ff2f94f6810ab9108002b27b3d9",X6="02d5cdd59c2e1b10939708002b2cf9ae",Q6="05d5cdd59c2e1b10939708002b2cf9ae";function $6(e,t){var r=t||{},n=F0.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return F0.utils.cfb_add(n,a,l8(e,r)),8==r.biff&&(e.Props||e.Custprops)&&function(e,t){var r,n=[],a=[],s=[],i=0,o=W0(E5,"n"),l=W0(T5,"n");if(e.Props)for(r=q0(e.Props),i=0;i<r.length;++i)(Object.prototype.hasOwnProperty.call(o,r[i])?n:Object.prototype.hasOwnProperty.call(l,r[i])?a:s).push([r[i],e.Props[r[i]]]);if(e.Custprops)for(r=q0(e.Custprops),i=0;i<r.length;++i)Object.prototype.hasOwnProperty.call(e.Props||{},r[i])||(Object.prototype.hasOwnProperty.call(o,r[i])?n:Object.prototype.hasOwnProperty.call(l,r[i])?a:s).push([r[i],e.Custprops[r[i]]]);var c=[];for(i=0;i<s.length;++i)Z5.indexOf(s[i][0])>-1||Y5.indexOf(s[i][0])>-1||null!=s[i][1]&&c.push(s[i]);a.length&&F0.utils.cfb_add(t,"/\x05SummaryInformation",r3(a,Y6,l,T5)),(n.length||c.length)&&F0.utils.cfb_add(t,"/\x05DocumentSummaryInformation",r3(n,X6,o,E5,c.length?c:null,Q6))}(e,n),8==r.biff&&e.vbaraw&&function(e,t){t.FullPaths.forEach(function(r,n){if(0!=n){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");"/"!==a.slice(-1)&&F0.utils.cfb_add(e,a,t.FileIndex[n].content)}})}(n,F0.read(e.vbaraw,{type:"string"==typeof e.vbaraw?"binary":"buffer"})),n}var J6={0:{f:function(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var a=e.read_shift(2);e.l+=1;var s=e.read_shift(1);return e.l=n,7&s&&(r.level=7&s),16&s&&(r.hidden=!0),32&s&&(r.hpt=a/20),r}},1:{f:function(e){return[c5(e)]}},2:{f:function(e){return[c5(e),b5(e),"n"]}},3:{f:function(e){return[c5(e),e.read_shift(1),"e"]}},4:{f:function(e){return[c5(e),e.read_shift(1),"b"]}},5:{f:function(e){return[c5(e),k5(e),"n"]}},6:{f:function(e){return[c5(e),n5(e),"str"]}},7:{f:function(e){return[c5(e),e.read_shift(4),"s"]}},8:{f:function(e,t,r){var n=e.l+t,a=c5(e);a.r=r["!row"];var s=[a,n5(e),"str"];if(r.cellFormula){e.l+=2;var i=Z4(e,n-e.l,r);s[3]=X4(i,0,a,r.supbooks,r)}else e.l=n;return s}},9:{f:function(e,t,r){var n=e.l+t,a=c5(e);a.r=r["!row"];var s=[a,k5(e),"n"];if(r.cellFormula){e.l+=2;var i=Z4(e,n-e.l,r);s[3]=X4(i,0,a,r.supbooks,r)}else e.l=n;return s}},10:{f:function(e,t,r){var n=e.l+t,a=c5(e);a.r=r["!row"];var s=[a,e.read_shift(1),"b"];if(r.cellFormula){e.l+=2;var i=Z4(e,n-e.l,r);s[3]=X4(i,0,a,r.supbooks,r)}else e.l=n;return s}},11:{f:function(e,t,r){var n=e.l+t,a=c5(e);a.r=r["!row"];var s=[a,e.read_shift(1),"e"];if(r.cellFormula){e.l+=2;var i=Z4(e,n-e.l,r);s[3]=X4(i,0,a,r.supbooks,r)}else e.l=n;return s}},12:{f:function(e){return[u5(e)]}},13:{f:function(e){return[u5(e),b5(e),"n"]}},14:{f:function(e){return[u5(e),e.read_shift(1),"e"]}},15:{f:function(e){return[u5(e),e.read_shift(1),"b"]}},16:{f:b6},17:{f:function(e){return[u5(e),n5(e),"str"]}},18:{f:function(e){return[u5(e),e.read_shift(4),"s"]}},19:{f:i5},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:function(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var a=e.read_shift(4),s=x5(e),i=e6(e,0,r),o=f5(e);e.l=n;var l={Name:s,Ptg:i};return a<268435455&&(l.Sheet=a),o&&(l.Comment=o),l}},40:{},42:{},43:{f:function(e,t,r){var n={};n.sz=e.read_shift(2)/20;var a=function(e){var t=e.read_shift(1);return e.l++,{fBold:1&t,fItalic:2&t,fUnderline:4&t,fStrikeout:8&t,fOutline:16&t,fShadow:32&t,fCondense:64&t,fExtend:128&t}}(e);switch(a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1),700===e.read_shift(2)&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript"}var s=e.read_shift(1);0!=s&&(n.underline=s);var i=e.read_shift(1);i>0&&(n.family=i);var o=e.read_shift(1);switch(o>0&&(n.charset=o),e.l++,n.color=function(e){var t={},r=e.read_shift(1)>>>1,n=e.read_shift(1),a=e.read_shift(2,"i"),s=e.read_shift(1),i=e.read_shift(1),o=e.read_shift(1);switch(e.l++,r){case 0:t.auto=1;break;case 1:t.index=n;var l=O5[n];l&&(t.rgb=U3(l));break;case 2:t.rgb=U3([s,i,o]);break;case 3:t.theme=n}return 0!=a&&(t.tint=a>0?a/32767:a/32768),t}(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor"}return n.name=n5(e),n}},44:{f:function(e,t){return[e.read_shift(2),n5(e)]}},45:{f:t4},46:{f:s4},47:{f:function(e,t){var r=e.l+t,n=e.read_shift(2),a=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:a}}},48:{},49:{f:function(e){return e.read_shift(4,"i")}},50:{},51:{f:function(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:A3},62:{f:function(e){return[c5(e),i5(e),"is"]}},63:{f:function(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=K2(r);var n=e.read_shift(1);return 2&n&&(t.l="1"),8&n&&(t.a="1"),t}},64:{f:function(){}},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:I2,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:function(e){var t=e.read_shift(2);return e.l+=28,{RTL:32&t}}},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:function(e,t){var r={},n=e[e.l];return++e.l,r.above=!(64&n),r.left=!(128&n),e.l+=18,r.name=m5(e,t-19),r}},148:{f:y6,p:16},151:{f:function(){}},152:{},153:{f:function(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var a=t>8?n5(e):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(65536&n),r.backupFile=!!(64&n),r.checkCompatibility=!!(4096&n),r.date1904=!!(1&n),r.filterPrivacy=!!(8&n),r.hidePivotFieldList=!!(1024&n),r.promptedSolutions=!!(16&n),r.publishItems=!!(2048&n),r.refreshAllConnections=!!(262144&n),r.saveExternalLinkValues=!!(128&n),r.showBorderUnselectedTables=!!(4&n),r.showInkAnnotation=!!(32&n),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(32768&n),r.updateLinks=["userSet","never","always"][n>>8&3],r}},154:{},155:{},156:{f:function(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=y5(e,t-8),r.name=n5(e),r}},157:{},158:{},159:{T:1,f:function(e){return[e.read_shift(4),e.read_shift(4)]}},160:{T:-1},161:{T:1,f:N5},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:j6},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:function(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:n5(e)}}},336:{T:-1},337:{f:function(e){return e.l+=4,0!=e.read_shift(4)},T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:y5},357:{},358:{},359:{},360:{T:1},361:{},362:{f:_3},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:function(e,t,r){var n=e.l+t,a=w5(e),s=e.read_shift(1),i=[a];if(i[2]=s,r.cellFormula){var o=J4(e,n-e.l,r);i[1]=o}else e.l=n;return i}},427:{f:function(e,t,r){var n=e.l+t,a=[N5(e,16)];if(r.cellFormula){var s=t6(e,n-e.l,r);a[1]=s,e.l=n}else e.l=n;return a}},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:function(e){var t={};return N6.forEach(function(r){t[r]=k5(e)}),t}},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:function(){}},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:function(e,t){var r=e.l+t,n=N5(e,16),a=f5(e),s=n5(e),i=n5(e),o=n5(e);e.l=r;var l={rfx:n,relId:a,loc:s,display:o};return i&&(l.Tooltip=i),l}},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:y5},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:x4},633:{T:1},634:{T:-1},635:{T:1,f:function(e){var t={};t.iauthor=e.read_shift(4);var r=N5(e,16);return t.rfx=r.s,t.ref=K2(r.s),e.l+=16,t}},636:{T:-1},637:{f:o5},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:function(e,t){return e.l+=10,{name:n5(e)}}},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:function(){}},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function Z6(e,t,r,n){var a=t;if(!isNaN(a)){var s=n||(r||[]).length||0,i=e.next(4);i.write_shift(2,a),i.write_shift(2,s),s>0&&v2(r)&&e.push(r)}}function e8(e,t,r){return e||(e=L2(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function t8(e,t,r,n){if(null!=t.v)switch(t.t){case"d":case"n":var a="d"==t.t?K0(t1(t.v)):t.v;return void(a==(0|a)&&a>=0&&a<65536?Z6(e,2,function(e,t,r){var n=L2(9);return e8(n,e,t),n.write_shift(2,r),n}(r,n,a)):Z6(e,3,function(e,t,r){var n=L2(15);return e8(n,e,t),n.write_shift(8,r,"f"),n}(r,n,a)));case"b":case"e":return void Z6(e,5,function(e,t,r,n){var a=L2(9);return e8(a,e,t),o3(r,n||"b",a),a}(r,n,t.v,t.t));case"s":case"str":return void Z6(e,4,function(e,t,r){var n=L2(8+2*r.length);return e8(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}(r,n,(t.v||"").slice(0,255)))}Z6(e,1,e8(null,r,n))}function r8(e,t){var r=t||{};for(var n=M2(),a=0,s=0;s<e.SheetNames.length;++s)e.SheetNames[s]==r.sheet&&(a=s);if(0==a&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Z6(n,4==r.biff?1033:3==r.biff?521:9,b3(0,16,r)),function(e,t,r,n){var a,s=Array.isArray(t),i=Q2(t["!ref"]||"A1"),o="",l=[];if(i.e.c>255||i.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),a=X2(i)}for(var c=i.s.r;c<=i.e.r;++c){o=W2(c);for(var d=i.s.c;d<=i.e.c;++d){c===i.s.r&&(l[d]=H2(d)),a=l[d]+o;var u=s?(t[c]||[])[d]:t[a];u&&t8(e,u,c,d)}}}(n,e.Sheets[e.SheetNames[a]],0,r),Z6(n,10),n.end()}function n8(e,t,r){Z6(e,49,function(e,t){var r=e.name||"Arial",n=t&&5==t.biff,a=L2(n?15+r.length:16+2*r.length);return a.write_shift(2,20*(e.sz||12)),a.write_shift(4,0),a.write_shift(2,400),a.write_shift(4,0),a.write_shift(2,0),a.write_shift(1,r.length),n||a.write_shift(1,1),a.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),a}({sz:12,color:{theme:1},name:"Arial",family:2,scheme:"minor"},r))}function a8(e,t){if(t){var r=0;t.forEach(function(t,n){++r<=256&&t&&Z6(e,125,function(e,t){var r=L2(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,256*e.width),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}(c6(n,t),n))})}}function s8(e,t,r,n,a){var s=16+u6(a.cellXfs,t,a);if(null!=t.v||t.bf)if(t.bf)Z6(e,6,Q4(t,r,n,0,s));else switch(t.t){case"d":case"n":Z6(e,515,function(e,t,r,n){var a=L2(14);return g3(e,t,n,a),S5(r,a),a}(r,n,"d"==t.t?K0(t1(t.v)):t.v,s));break;case"b":case"e":Z6(e,517,function(e,t,r,n,a,s){var i=L2(8);return g3(e,t,n,i),o3(r,s,i),i}(r,n,t.v,s,0,t.t));break;case"s":case"str":if(a.bookSST)Z6(e,253,function(e,t,r,n){var a=L2(10);return g3(e,t,n,a),a.write_shift(4,r),a}(r,n,l6(a.Strings,t.v,a.revStrings),s));else Z6(e,516,function(e,t,r,n,a){var s=!a||8==a.biff,i=L2(+s+8+(1+s)*r.length);return g3(e,t,n,i),i.write_shift(2,r.length),s&&i.write_shift(1,1),i.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),i}(r,n,(t.v||"").slice(0,255),s,a));break;default:Z6(e,513,g3(r,n,s))}else Z6(e,513,g3(r,n,s))}function i8(e,t,r){var n,a=M2(),s=r.SheetNames[e],i=r.Sheets[s]||{},o=(r||{}).Workbook||{},l=(o.Sheets||[])[e]||{},c=Array.isArray(i),d=8==t.biff,u="",h=[],m=Q2(i["!ref"]||"A1"),p=d?65536:16384;if(m.e.c>255||m.e.r>=p){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");m.e.c=Math.min(m.e.c,255),m.e.r=Math.min(m.e.c,p-1)}Z6(a,2057,b3(0,16,t)),Z6(a,13,i3(1)),Z6(a,12,i3(100)),Z6(a,15,a3(!0)),Z6(a,17,a3(!1)),Z6(a,16,S5(.001)),Z6(a,95,a3(!0)),Z6(a,42,a3(!1)),Z6(a,43,a3(!1)),Z6(a,130,i3(1)),Z6(a,128,function(e){var t=L2(8);return t.write_shift(4,0),t.write_shift(2,e[0]?e[0]+1:0),t.write_shift(2,e[1]?e[1]+1:0),t}([0,0])),Z6(a,131,a3(!1)),Z6(a,132,a3(!1)),d&&a8(a,i["!cols"]),Z6(a,512,function(e,t){var r=8!=t.biff&&t.biff?2:4,n=L2(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}(m,t)),d&&(i["!links"]=[]);for(var f=m.s.r;f<=m.e.r;++f){u=W2(f);for(var g=m.s.c;g<=m.e.c;++g){f===m.s.r&&(h[g]=H2(g)),n=h[g]+u;var x=c?(i[f]||[])[g]:i[n];x&&(s8(a,x,f,g,t),d&&x.l&&i["!links"].push([n,x.l]))}}var y=l.CodeName||l.name||s;return d&&Z6(a,574,function(e){var t=L2(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}((o.Views||[])[0])),d&&(i["!merges"]||[]).length&&Z6(a,229,function(e){var t=L2(2+8*e.length);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)v3(e[r],t);return t}(i["!merges"])),d&&function(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];Z6(e,440,k3(n)),n[1].Tooltip&&Z6(e,2048,S3(n))}delete t["!links"]}(a,i),Z6(a,442,m3(y)),d&&function(e,t){var r=L2(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Z6(e,2151,r),(r=L2(39)).write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),v3(Q2(t["!ref"]||"A1"),r),r.write_shift(4,4),Z6(e,2152,r)}(a,i),Z6(a,10),a.end()}function o8(e,t,r){var n=M2(),a=(e||{}).Workbook||{},s=a.Sheets||[],i=a.WBProps||{},o=8==r.biff,l=5==r.biff;(Z6(n,2057,b3(0,5,r)),"xla"==r.bookType&&Z6(n,135),Z6(n,225,o?i3(1200):null),Z6(n,193,function(e,t){t||(t=L2(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}(2)),l&&Z6(n,191),l&&Z6(n,192),Z6(n,226),Z6(n,92,function(e,t){var r=!t||8==t.biff,n=L2(r?112:54);for(n.write_shift(8==t.biff?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}(0,r)),Z6(n,66,i3(o?1200:1252)),o&&Z6(n,353,i3(0)),o&&Z6(n,448),Z6(n,317,function(e){for(var t=L2(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}(e.SheetNames.length)),o&&e.vbaraw&&Z6(n,211),o&&e.vbaraw)&&Z6(n,442,m3(i.CodeName||"ThisWorkbook"));Z6(n,156,i3(17)),Z6(n,25,a3(!1)),Z6(n,18,a3(!1)),Z6(n,19,i3(0)),o&&Z6(n,431,a3(!1)),o&&Z6(n,444,i3(0)),Z6(n,61,function(){var e=L2(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}()),Z6(n,64,a3(!1)),Z6(n,141,i3(0)),Z6(n,34,a3("true"==function(e){return e.Workbook&&e.Workbook.WBProps&&v1(e.Workbook.WBProps.date1904)?"true":"false"}(e))),Z6(n,14,a3(!0)),o&&Z6(n,439,a3(!1)),Z6(n,218,i3(0)),n8(n,0,r),function(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)null!=t[a]&&Z6(e,1054,w3(a,t[a],r))})}(n,e.SSF,r),function(e,t){for(var r=0;r<16;++r)Z6(e,224,N3({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(r){Z6(e,224,N3(r,0,t))})}(n,r),o&&Z6(n,352,a3(!1));var c=n.end(),d=M2();o&&Z6(d,140,function(e){return e||(e=L2(4)),e.write_shift(2,1),e.write_shift(2,1),e}()),o&&r.Strings&&function(e,t,r,n){var a=n||(r||[]).length||0;if(a<=8224)return Z6(e,t,r,a);var s=t;if(!isNaN(s)){for(var i=r.parts||[],o=0,l=0,c=0;c+(i[o]||8224)<=8224;)c+=i[o]||8224,o++;var d=e.next(4);for(d.write_shift(2,s),d.write_shift(2,c),e.push(r.slice(l,l+c)),l+=c;l<a;){for((d=e.next(4)).write_shift(2,60),c=0;c+(i[o]||8224)<=8224;)c+=i[o]||8224,o++;d.write_shift(2,c),e.push(r.slice(l,l+c)),l+=c}}}(d,252,function(e){var t=L2(8);t.write_shift(4,e.Count),t.write_shift(4,e.Unique);for(var r=[],n=0;n<e.length;++n)r[n]=c3(e[n]);var a=qZ([t].concat(r));return a.parts=[t.length].concat(r.map(function(e){return e.length})),a}(r.Strings)),Z6(d,10);var u=d.end(),h=M2(),m=0,p=0;for(p=0;p<e.SheetNames.length;++p)m+=(o?12:11)+(o?2:1)*e.SheetNames[p].length;var f=c.length+m+u.length;for(p=0;p<e.SheetNames.length;++p){Z6(h,133,j3({pos:f,hs:(s[p]||{}).Hidden||0,dt:0,name:e.SheetNames[p]},r)),f+=t[p].length}var g=h.end();if(m!=g.length)throw new Error("BS8 "+m+" != "+g.length);var x=[];return c.length&&x.push(c),g.length&&x.push(g),u.length&&x.push(u),qZ(x)}function l8(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(n&&n["!ref"])Y2(n["!ref"]).e.c>255&&"undefined"!=typeof console&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}var a=t||{};switch(a.biff||2){case 8:case 5:return function(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=n1(e0)),e&&e.SSF&&(L0(),I0(e.SSF),r.revssf=H0(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,F8(r),r.cellXfs=[],u6(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var a=0;a<e.SheetNames.length;++a)n[n.length]=i8(a,r,e);return n.unshift(o8(e,n,r)),qZ(n)}(e,t);case 4:case 3:case 2:return r8(e,t)}throw new Error("invalid type "+a.bookType+" for BIFF")}function c8(e,t,r,n){for(var a=e["!merges"]||[],s=[],i=t.s.c;i<=t.e.c;++i){for(var o=0,l=0,c=0;c<a.length;++c)if(!(a[c].s.r>r||a[c].s.c>i)&&!(a[c].e.r<r||a[c].e.c<i)){if(a[c].s.r<r||a[c].s.c<i){o=-1;break}o=a[c].e.r-a[c].s.r+1,l=a[c].e.c-a[c].s.c+1;break}if(!(o<0)){var d=K2({r:r,c:i}),u=n.dense?(e[r]||[])[i]:e[d],h=u&&null!=u.v&&(u.h||y1(u.w||(J2(u),u.w)||""))||"",m={};o>1&&(m.rowspan=o),l>1&&(m.colspan=l),n.editable?h='<span contenteditable="true">'+h+"</span>":u&&(m["data-t"]=u&&u.t||"z",null!=u.v&&(m["data-v"]=u.v),null!=u.z&&(m["data-z"]=u.z),u.l&&"#"!=(u.l.Target||"#").charAt(0)&&(h='<a href="'+u.l.Target+'">'+h+"</a>")),m.id=(n.id||"sjs")+"-"+d,s.push(T1("td",h,m))}}return"<tr>"+s.join("")+"</tr>"}var d8='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',u8="</body></html>";function h8(e,t,r){return[].join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function m8(e,t){var r=t||{},n=null!=r.header?r.header:d8,a=null!=r.footer?r.footer:u8,s=[n],i=Y2(e["!ref"]);r.dense=Array.isArray(e),s.push(h8(0,0,r));for(var o=i.s.r;o<=i.e.r;++o)s.push(c8(e,i,o,r));return s.push("</table>"+a),s.join("")}function p8(e,t,r){var n=r||{};var a=0,s=0;if(null!=n.origin)if("number"==typeof n.origin)a=n.origin;else{var i="string"==typeof n.origin?G2(n.origin):n.origin;a=i.r,s=i.c}var o=t.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,o.length),c={s:{r:0,c:0},e:{r:a,c:s}};if(e["!ref"]){var d=Y2(e["!ref"]);c.s.r=Math.min(c.s.r,d.s.r),c.s.c=Math.min(c.s.c,d.s.c),c.e.r=Math.max(c.e.r,d.e.r),c.e.c=Math.max(c.e.c,d.e.c),-1==a&&(c.e.r=a=d.e.r+1)}var u=[],h=0,m=e["!rows"]||(e["!rows"]=[]),p=0,f=0,g=0,x=0,y=0,v=0;for(e["!cols"]||(e["!cols"]=[]);p<o.length&&f<l;++p){var b=o[p];if(g8(b)){if(n.display)continue;m[f]={hidden:!0}}var j=b.children;for(g=x=0;g<j.length;++g){var w=j[g];if(!n.display||!g8(w)){var N=w.hasAttribute("data-v")?w.getAttribute("data-v"):w.hasAttribute("v")?w.getAttribute("v"):S1(w.innerHTML),_=w.getAttribute("data-z")||w.getAttribute("z");for(h=0;h<u.length;++h){var k=u[h];k.s.c==x+s&&k.s.r<f+a&&f+a<=k.e.r&&(x=k.e.c+1-s,h=-1)}v=+w.getAttribute("colspan")||1,((y=+w.getAttribute("rowspan")||1)>1||v>1)&&u.push({s:{r:f+a,c:x+s},e:{r:f+a+(y||1)-1,c:x+s+(v||1)-1}});var S={t:"s",v:N},A=w.getAttribute("data-t")||w.getAttribute("t")||"";null!=N&&(0==N.length?S.t=A||"z":n.raw||0==N.trim().length||"s"==A||("TRUE"===N?S={t:"b",v:!0}:"FALSE"===N?S={t:"b",v:!1}:isNaN(s1(N))?isNaN(o1(N).getDate())||(S={t:"d",v:t1(N)},n.cellDates||(S={t:"n",v:K0(S.v)}),S.z=n.dateNF||e0[14]):S={t:"n",v:s1(N)})),void 0===S.z&&null!=_&&(S.z=_);var C="",E=w.getElementsByTagName("A");if(E&&E.length)for(var T=0;T<E.length&&(!E[T].hasAttribute("href")||"#"==(C=E[T].getAttribute("href")).charAt(0));++T);C&&"#"!=C.charAt(0)&&(S.l={Target:C}),n.dense?(e[f+a]||(e[f+a]=[]),e[f+a][x+s]=S):e[K2({c:x+s,r:f+a})]=S,c.e.c<x+s&&(c.e.c=x+s),x+=v}}++f}return u.length&&(e["!merges"]=(e["!merges"]||[]).concat(u)),c.e.r=Math.max(c.e.r,f-1+a),e["!ref"]=X2(c),f>=l&&(e["!fullref"]=X2((c.e.r=o.length-p+f-1+a,c))),e}function f8(e,t){return p8((t||{}).dense?[]:{},e,t)}function g8(e){var t="",r=function(e){return e.ownerDocument.defaultView&&"function"===typeof e.ownerDocument.defaultView.getComputedStyle?e.ownerDocument.defaultView.getComputedStyle:"function"===typeof getComputedStyle?getComputedStyle:null}(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),"none"===t}var x8=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+E1({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return d1+t}}(),y8=function(){var e=function(e){return f1(e).replace(/  +/g,function(e){return'<text:s text:c="'+e.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t="          <table:table-cell />\n",r=function(r,n,a){var s=[];s.push('      <table:table table:name="'+f1(n.SheetNames[a])+'" table:style-name="ta1">\n');var i=0,o=0,l=Y2(r["!ref"]||"A1"),c=r["!merges"]||[],d=0,u=Array.isArray(r);if(r["!cols"])for(o=0;o<=l.e.c;++o)s.push("        <table:table-column"+(r["!cols"][o]?' table:style-name="co'+r["!cols"][o].ods+'"':"")+"></table:table-column>\n");var h="",m=r["!rows"]||[];for(i=0;i<l.s.r;++i)h=m[i]?' table:style-name="ro'+m[i].ods+'"':"",s.push("        <table:table-row"+h+"></table:table-row>\n");for(;i<=l.e.r;++i){for(h=m[i]?' table:style-name="ro'+m[i].ods+'"':"",s.push("        <table:table-row"+h+">\n"),o=0;o<l.s.c;++o)s.push(t);for(;o<=l.e.c;++o){var p=!1,f={},g="";for(d=0;d!=c.length;++d)if(!(c[d].s.c>o)&&!(c[d].s.r>i)&&!(c[d].e.c<o)&&!(c[d].e.r<i)){c[d].s.c==o&&c[d].s.r==i||(p=!0),f["table:number-columns-spanned"]=c[d].e.c-c[d].s.c+1,f["table:number-rows-spanned"]=c[d].e.r-c[d].s.r+1;break}if(p)s.push("          <table:covered-table-cell/>\n");else{var x=K2({r:i,c:o}),y=u?(r[i]||[])[o]:r[x];if(y&&y.f&&(f["table:formula"]=f1(s6(y.f)),y.F&&y.F.slice(0,x.length)==x)){var v=Y2(y.F);f["table:number-matrix-columns-spanned"]=v.e.c-v.s.c+1,f["table:number-matrix-rows-spanned"]=v.e.r-v.s.r+1}if(y){switch(y.t){case"b":g=y.v?"TRUE":"FALSE",f["office:value-type"]="boolean",f["office:boolean-value"]=y.v?"true":"false";break;case"n":g=y.w||String(y.v||0),f["office:value-type"]="float",f["office:value"]=y.v||0;break;case"s":case"str":g=null==y.v?"":y.v,f["office:value-type"]="string";break;case"d":g=y.w||t1(y.v).toISOString(),f["office:value-type"]="date",f["office:date-value"]=t1(y.v).toISOString(),f["table:style-name"]="ce1";break;default:s.push(t);continue}var b=e(g);if(y.l&&y.l.Target){var j=y.l.Target;"#"==(j="#"==j.charAt(0)?"#"+i6(j.slice(1)):j).charAt(0)||j.match(/^\w+:/)||(j="../"+j),b=T1("text:a",b,{"xlink:href":j.replace(/&/g,"&amp;")})}s.push("          "+T1("table:table-cell",T1("text:p",b,{}),f)+"\n")}else s.push(t)}}s.push("        </table:table-row>\n")}return s.push("      </table:table>\n"),s.join("")};return function(e,t){var n=[d1],a=E1({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),s=E1({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});"fods"==t.bookType?(n.push("<office:document"+a+s+">\n"),n.push(W5().replace(/office:document-meta/g,"office:meta"))):n.push("<office:document-content"+a+">\n"),function(e,t){e.push(" <office:automatic-styles>\n"),e.push('  <number:date-style style:name="N37" number:automatic-order="true">\n'),e.push('   <number:month number:style="long"/>\n'),e.push("   <number:text>/</number:text>\n"),e.push('   <number:day number:style="long"/>\n'),e.push("   <number:text>/</number:text>\n"),e.push("   <number:year/>\n"),e.push("  </number:date-style>\n");var r=0;t.SheetNames.map(function(e){return t.Sheets[e]}).forEach(function(t){if(t&&t["!cols"])for(var n=0;n<t["!cols"].length;++n)if(t["!cols"][n]){var a=t["!cols"][n];if(null==a.width&&null==a.wpx&&null==a.wch)continue;G3(a),a.ods=r;var s=t["!cols"][n].wpx+"px";e.push('  <style:style style:name="co'+r+'" style:family="table-column">\n'),e.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+s+'"/>\n'),e.push("  </style:style>\n"),++r}});var n=0;t.SheetNames.map(function(e){return t.Sheets[e]}).forEach(function(t){if(t&&t["!rows"])for(var r=0;r<t["!rows"].length;++r)if(t["!rows"][r]){t["!rows"][r].ods=n;var a=t["!rows"][r].hpx+"px";e.push('  <style:style style:name="ro'+n+'" style:family="table-row">\n'),e.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+a+'"/>\n'),e.push("  </style:style>\n"),++n}}),e.push('  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">\n'),e.push('   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>\n'),e.push("  </style:style>\n"),e.push('  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>\n'),e.push(" </office:automatic-styles>\n")}(n,e),n.push("  <office:body>\n"),n.push("    <office:spreadsheet>\n");for(var i=0;i!=e.SheetNames.length;++i)n.push(r(e.Sheets[e.SheetNames[i]],e,i));return n.push("    </office:spreadsheet>\n"),n.push("  </office:body>\n"),"fods"==t.bookType?n.push("</office:document>"):n.push("</office:document-content>"),n.join("")}}();function v8(e,t){if("fods"==t.bookType)return y8(e,t);var r=c1(),n="",a=[],s=[];return l1(r,n="mimetype","application/vnd.oasis.opendocument.spreadsheet"),l1(r,n="content.xml",y8(e,t)),a.push([n,"text/xml"]),s.push([n,"ContentFile"]),l1(r,n="styles.xml",x8(e,t)),a.push([n,"text/xml"]),s.push([n,"StylesFile"]),l1(r,n="meta.xml",d1+W5()),a.push([n,"text/xml"]),s.push([n,"MetadataFile"]),l1(r,n="manifest.rdf",function(e){var t=[d1];t.push('<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">\n');for(var r=0;r!=e.length;++r)t.push(U5(e[r][0],e[r][1])),t.push(q5("",e[r][0]));return t.push(U5("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}(s)),a.push([n,"application/rdf+xml"]),l1(r,n="META-INF/manifest.xml",function(e){var t=[d1];t.push('<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">\n'),t.push('  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>\n');for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+'"/>\n');return t.push("</manifest:manifest>"),t.join("")}(a)),r}function b8(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function j8(e){return"undefined"!=typeof TextEncoder?(new TextEncoder).encode(e):BZ(k1(e))}function w8(e){var t=e.reduce(function(e,t){return e+t.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(e){r.set(e,n),n+=e.length}),r}function N8(e,t){var r=t?t[0]:0,n=127&e[r];e:if(e[r++]>=128){if(n|=(127&e[r])<<7,e[r++]<128)break e;if(n|=(127&e[r])<<14,e[r++]<128)break e;if(n|=(127&e[r])<<21,e[r++]<128)break e;if(n+=(127&e[r])*Math.pow(2,28),++r,e[r++]<128)break e;if(n+=(127&e[r])*Math.pow(2,35),++r,e[r++]<128)break e;if(n+=(127&e[r])*Math.pow(2,42),++r,e[r++]<128)break e}return t&&(t[0]=r),n}function _8(e){var t=new Uint8Array(7);t[0]=127&e;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383)break e;if(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)break e;if(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)break e;if(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)break e;if(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103)break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function k8(e){var t=0,r=127&e[t];e:if(e[t++]>=128){if(r|=(127&e[t])<<7,e[t++]<128)break e;if(r|=(127&e[t])<<14,e[t++]<128)break e;if(r|=(127&e[t])<<21,e[t++]<128)break e;r|=(127&e[t])<<28}return r}function S8(e){for(var t=[],r=[0];r[0]<e.length;){var n,a=r[0],s=N8(e,r),i=7&s,o=0;if(0==(s=Math.floor(s/8)))break;switch(i){case 0:for(var l=r[0];e[r[0]++]>=128;);n=e.slice(l,r[0]);break;case 5:o=4,n=e.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,n=e.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=N8(e,r),n=e.slice(r[0],r[0]+o),r[0]+=o;break;default:throw new Error("PB Type ".concat(i," for Field ").concat(s," at offset ").concat(a))}var c={data:n,type:i};null==t[s]?t[s]=[c]:t[s].push(c)}return t}function A8(e){var t=[];return e.forEach(function(e,r){e.forEach(function(e){e.data&&(t.push(_8(8*r+e.type)),2==e.type&&t.push(_8(e.data.length)),t.push(e.data))})}),w8(t)}function C8(e){for(var t,r=[],n=[0];n[0]<e.length;){var a=N8(e,n),s=S8(e.slice(n[0],n[0]+a));n[0]+=a;var i={id:k8(s[1][0].data),messages:[]};s[2].forEach(function(t){var r=S8(t.data),a=k8(r[3][0].data);i.messages.push({meta:r,data:e.slice(n[0],n[0]+a)}),n[0]+=a}),(null==(t=s[3])?void 0:t[0])&&(i.merge=k8(s[3][0].data)>>>0>0),r.push(i)}return r}function E8(e){var t=[];return e.forEach(function(e){var r=[];r[1]=[{data:_8(e.id),type:0}],r[2]=[],null!=e.merge&&(r[3]=[{data:_8(+!!e.merge),type:0}]);var n=[];e.messages.forEach(function(e){n.push(e.data),e.meta[3]=[{type:0,data:_8(e.data.length)}],r[2].push({data:A8(e.meta),type:2})});var a=A8(r);t.push(_8(a.length)),t.push(a),n.forEach(function(e){return t.push(e)})}),w8(t)}function T8(e,t){if(0!=e)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=N8(t,r),a=[];r[0]<t.length;){var s=3&t[r[0]];if(0!=s){var i=0,o=0;if(1==s?(o=4+(t[r[0]]>>2&7),i=(224&t[r[0]++])<<3,i|=t[r[0]++]):(o=1+(t[r[0]++]>>2),2==s?(i=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(i=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),a=[w8(a)],0==i)throw new Error("Invalid offset 0");if(i>a[0].length)throw new Error("Invalid offset beyond length");if(o>=i)for(a.push(a[0].slice(-i)),o-=i;o>=a[a.length-1].length;)a.push(a[a.length-1]),o-=a[a.length-1].length;a.push(a[0].slice(-i,-i+o))}else{var l=t[r[0]++]>>2;if(l<60)++l;else{var c=l-59;l=t[r[0]],c>1&&(l|=t[r[0]+1]<<8),c>2&&(l|=t[r[0]+2]<<16),c>3&&(l|=t[r[0]+3]<<24),l>>>=0,l++,r[0]+=c}a.push(t.slice(r[0],r[0]+l)),r[0]+=l}}var d=w8(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function P8(e){for(var t=[],r=0;r<e.length;){var n=e[r++],a=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(T8(n,e.slice(r,r+a))),r+=a}if(r!==e.length)throw new Error("data is not a valid framed stream!");return w8(t)}function O8(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),a=new Uint8Array(4);t.push(a);var s=_8(n),i=s.length;t.push(s),n<=60?(i++,t.push(new Uint8Array([n-1<<2]))):n<=256?(i+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(i+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(i+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(i+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),i+=n,a[0]=0,a[1]=255&i,a[2]=i>>8&255,a[3]=i>>16&255,r+=n}return w8(t)}function D8(e,t){var r=new Uint8Array(32),n=b8(r),a=12,s=0;switch(r[0]=5,e.t){case"n":r[1]=2,function(e,t,r){var n=Math.floor(0==r?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(127&n)<<1;for(var s=0;a>=1;++s,a/=256)e[t+s]=255&a;e[t+15]|=r>=0?0:128}(r,a,e.v),s|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,e.v?1:0,!0),s|=2,a+=8;break;case"s":if(-1==t.indexOf(e.v))throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=8,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,s,!0),r.slice(0,a)}function I8(e,t){var r=new Uint8Array(32),n=b8(r),a=12,s=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(a,e.v,!0),s|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,e.v?1:0,!0),s|=32,a+=8;break;case"s":if(-1==t.indexOf(e.v))throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=16,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,s,!0),r.slice(0,a)}function L8(e){return N8(S8(e)[1][0].data)}function M8(e,t,r){var n,a,s,i;if(!(null==(n=e[6])?void 0:n[0])||!(null==(a=e[7])?void 0:a[0]))throw"Mutation only works on post-BNC storages!";if((null==(i=null==(s=e[8])?void 0:s[0])?void 0:i.data)&&k8(e[8][0].data)>0||!1)throw"Math only works with normal offsets";for(var o=0,l=b8(e[7][0].data),c=0,d=[],u=b8(e[4][0].data),h=0,m=[],p=0;p<t.length;++p)if(null!=t[p]){var f,g;switch(l.setUint16(2*p,c,!0),u.setUint16(2*p,h,!0),typeof t[p]){case"string":f=D8({t:"s",v:t[p]},r),g=I8({t:"s",v:t[p]},r);break;case"number":f=D8({t:"n",v:t[p]},r),g=I8({t:"n",v:t[p]},r);break;case"boolean":f=D8({t:"b",v:t[p]},r),g=I8({t:"b",v:t[p]},r);break;default:throw new Error("Unsupported value "+t[p])}d.push(f),c+=f.length,m.push(g),h+=g.length,++o}else l.setUint16(2*p,65535,!0),u.setUint16(2*p,65535);for(e[2][0].data=_8(o);p<e[7][0].data.length/2;++p)l.setUint16(2*p,65535,!0),u.setUint16(2*p,65535,!0);return e[6][0].data=w8(d),e[3][0].data=w8(m),o}function R8(e){return function(t){for(var r=0;r!=e.length;++r){var n=e[r];void 0===t[n[0]]&&(t[n[0]]=n[1]),"n"===n[2]&&(t[n[0]]=Number(t[n[0]]))}}}function F8(e){R8([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function B8(e,t){return"ods"==t.bookType?v8(e,t):"numbers"==t.bookType?function(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Y2(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(X2(n)));var s=X8(r,{range:n,header:1}),i=["~Sh33tJ5~"];s.forEach(function(e){return e.forEach(function(e){"string"==typeof e&&i.push(e)})});var o={},l=[],c=F0.read(t.numbers,{type:"base64"});c.FileIndex.map(function(e,t){return[e,c.FullPaths[t]]}).forEach(function(e){var t=e[0],r=e[1];2==t.type&&t.name.match(/\.iwa/)&&C8(P8(t.content)).forEach(function(e){l.push(e.id),o[e.id]={deps:[],location:r,type:k8(e.messages[0].meta[1][0].data)}})}),l.sort(function(e,t){return e-t});var d=l.filter(function(e){return e>1}).map(function(e){return[e,_8(e)]});c.FileIndex.map(function(e,t){return[e,c.FullPaths[t]]}).forEach(function(e){var t=e[0];e[1],t.name.match(/\.iwa/)&&C8(P8(t.content)).forEach(function(e){e.messages.forEach(function(t){d.forEach(function(t){e.messages.some(function(e){return 11006!=k8(e.meta[1][0].data)&&function(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}(e.data,t[1])})&&o[t[0]].deps.push(e.id)})})})});for(var u,h=F0.find(c,o[1].location),m=C8(P8(h.content)),p=0;p<m.length;++p){var f=m[p];1==f.id&&(u=f)}var g=L8(S8(u.messages[0].data)[1][0].data);for(m=C8(P8((h=F0.find(c,o[g].location)).content)),p=0;p<m.length;++p)(f=m[p]).id==g&&(u=f);for(g=L8(S8(u.messages[0].data)[2][0].data),m=C8(P8((h=F0.find(c,o[g].location)).content)),p=0;p<m.length;++p)(f=m[p]).id==g&&(u=f);for(g=L8(S8(u.messages[0].data)[2][0].data),m=C8(P8((h=F0.find(c,o[g].location)).content)),p=0;p<m.length;++p)(f=m[p]).id==g&&(u=f);var x=S8(u.messages[0].data);x[6][0].data=_8(n.e.r+1),x[7][0].data=_8(n.e.c+1);for(var y=L8(x[46][0].data),v=F0.find(c,o[y].location),b=C8(P8(v.content)),j=0;j<b.length&&b[j].id!=y;++j);if(b[j].id!=y)throw"Bad ColumnRowUIDMapArchive";var w=S8(b[j].messages[0].data);w[1]=[],w[2]=[],w[3]=[];for(var N=0;N<=n.e.c;++N){var _=[];_[1]=_[2]=[{type:0,data:_8(N+420690)}],w[1].push({type:2,data:A8(_)}),w[2].push({type:0,data:_8(N)}),w[3].push({type:0,data:_8(N)})}w[4]=[],w[5]=[],w[6]=[];for(var k=0;k<=n.e.r;++k)(_=[])[1]=_[2]=[{type:0,data:_8(k+726270)}],w[4].push({type:2,data:A8(_)}),w[5].push({type:0,data:_8(k)}),w[6].push({type:0,data:_8(k)});b[j].messages[0].data=A8(w),v.content=O8(E8(b)),v.size=v.content.length,delete x[46];var S=S8(x[4][0].data);S[7][0].data=_8(n.e.r+1);var A=L8(S8(S[1][0].data)[2][0].data);if((b=C8(P8((v=F0.find(c,o[A].location)).content)))[0].id!=A)throw"Bad HeaderStorageBucket";var C=S8(b[0].messages[0].data);for(k=0;k<s.length;++k){var E=S8(C[2][0].data);E[1][0].data=_8(k),E[4][0].data=_8(s[k].length),C[2][k]={type:C[2][0].type,data:A8(E)}}b[0].messages[0].data=A8(C),v.content=O8(E8(b)),v.size=v.content.length;var T=L8(S[2][0].data);if((b=C8(P8((v=F0.find(c,o[T].location)).content)))[0].id!=T)throw"Bad HeaderStorageBucket";for(C=S8(b[0].messages[0].data),N=0;N<=n.e.c;++N)(E=S8(C[2][0].data))[1][0].data=_8(N),E[4][0].data=_8(n.e.r+1),C[2][N]={type:C[2][0].type,data:A8(E)};b[0].messages[0].data=A8(C),v.content=O8(E8(b)),v.size=v.content.length;var P=L8(S[4][0].data);!function(){for(var e,t=F0.find(c,o[P].location),r=C8(P8(t.content)),n=0;n<r.length;++n){var a=r[n];a.id==P&&(e=a)}var s=S8(e.messages[0].data);s[3]=[];var l=[];i.forEach(function(e,t){l[1]=[{type:0,data:_8(t)}],l[2]=[{type:0,data:_8(1)}],l[3]=[{type:2,data:j8(e)}],s[3].push({type:2,data:A8(l)})}),e.messages[0].data=A8(s);var d=O8(E8(r));t.content=d,t.size=t.content.length}();var O=S8(S[3][0].data),D=O[1][0];delete O[2];var I=S8(D.data),L=L8(I[2][0].data);!function(){for(var e,t=F0.find(c,o[L].location),r=C8(P8(t.content)),a=0;a<r.length;++a){var l=r[a];l.id==L&&(e=l)}var d=S8(e.messages[0].data);delete d[6],delete O[7];var u=new Uint8Array(d[5][0].data);d[5]=[];for(var h=0,m=0;m<=n.e.r;++m){var p=S8(u);h+=M8(p,s[m],i),p[1][0].data=_8(m),d[5].push({data:A8(p),type:2})}d[1]=[{type:0,data:_8(n.e.c+1)}],d[2]=[{type:0,data:_8(n.e.r+1)}],d[3]=[{type:0,data:_8(h)}],d[4]=[{type:0,data:_8(n.e.r+1)}],e.messages[0].data=A8(d);var f=O8(E8(r));t.content=f,t.size=t.content.length}(),D.data=A8(I),S[3][0].data=A8(O),x[4][0].data=A8(S),u.messages[0].data=A8(x);var M=O8(E8(m));return h.content=M,h.size=h.content.length,c}(e,t):"xlsb"==t.bookType?function(e,t){m4=1024,e&&!e.SSF&&(e.SSF=n1(e0));e&&e.SSF&&(L0(),I0(e.SSF),t.revssf=H0(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF);t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,o6?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xlsb"==t.bookType?"bin":"xml",n=v4.indexOf(t.bookType)>-1,a={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};F8(t=t||{});var s=c1(),i="",o=0;t.cellXfs=[],u6(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});if(i="docProps/core.xml",l1(s,i,G5(e.Props,t)),a.coreprops.push(i),z5(t.rels,2,i,R5.CORE_PROPS),i="docProps/app.xml",e.Props&&e.Props.SheetNames);else if(e.Workbook&&e.Workbook.Sheets){for(var l=[],c=0;c<e.SheetNames.length;++c)2!=(e.Workbook.Sheets[c]||{}).Hidden&&l.push(e.SheetNames[c]);e.Props.SheetNames=l}else e.Props.SheetNames=e.SheetNames;e.Props.Worksheets=e.Props.SheetNames.length,l1(s,i,X5(e.Props)),a.extprops.push(i),z5(t.rels,3,i,R5.EXT_PROPS),e.Custprops!==e.Props&&q0(e.Custprops||{}).length>0&&(l1(s,i="docProps/custom.xml",Q5(e.Custprops)),a.custprops.push(i),z5(t.rels,4,i,R5.CUST_PROPS));for(o=1;o<=e.SheetNames.length;++o){var d={"!id":{}},u=e.Sheets[e.SheetNames[o-1]];(u||{})["!type"];if(l1(s,i="xl/worksheets/sheet"+o+"."+r,z6(o-1,i,t,e,d)),a.sheets.push(i),z5(t.wbrels,-1,"worksheets/sheet"+o+"."+r,R5.WS[0]),u){var h=u["!comments"],m=!1,p="";h&&h.length>0&&(l1(s,p="xl/comments"+o+"."+r,U6(h,p,t)),a.comments.push(p),z5(d,-1,"../comments"+o+"."+r,R5.CMNT),m=!0),u["!legacy"]&&m&&l1(s,"xl/drawings/vmlDrawing"+o+".vml",p4(o,u["!comments"])),delete u["!comments"],delete u["!legacy"]}d["!id"].rId1&&l1(s,F5(i),B5(d))}null!=t.Strings&&t.Strings.length>0&&(l1(s,i="xl/sharedStrings."+r,function(e,t,r){return(".bin"===t.slice(-4)?R3:L3)(e,r)}(t.Strings,i,t)),a.strs.push(i),z5(t.wbrels,-1,"sharedStrings."+r,R5.SST));i="xl/workbook."+r,l1(s,i,function(e,t,r){return(".bin"===t.slice(-4)?B6:M6)(e,r)}(e,i,t)),a.workbooks.push(i),z5(t.rels,1,i,R5.WB),i="xl/theme/theme1.xml",l1(s,i,d4(e.Themes,t)),a.themes.push(i),z5(t.wbrels,-1,"theme/theme1.xml",R5.THEME),i="xl/styles."+r,l1(s,i,function(e,t,r){return(".bin"===t.slice(-4)?c4:Q3)(e,r)}(e,i,t)),a.styles.push(i),z5(t.wbrels,-1,"styles."+r,R5.STY),e.vbaraw&&n&&(l1(s,i="xl/vbaProject.bin",e.vbaraw),a.vba.push(i),z5(t.wbrels,-1,"vbaProject.bin",R5.VBA));return i="xl/metadata."+r,l1(s,i,function(e){return(".bin"===e.slice(-4)?u4:h4)()}(i)),a.metadata.push(i),z5(t.wbrels,-1,"metadata."+r,R5.XLMETA),l1(s,"[Content_Types].xml",M5(a,t)),l1(s,"_rels/.rels",B5(t.rels)),l1(s,"xl/_rels/workbook."+r+".rels",B5(t.wbrels)),delete t.revssf,delete t.ssf,s}(e,t):z8(e,t)}function z8(e,t){m4=1024,e&&!e.SSF&&(e.SSF=n1(e0)),e&&e.SSF&&(L0(),I0(e.SSF),t.revssf=H0(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,o6?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=v4.indexOf(t.bookType)>-1,a={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};F8(t=t||{});var s=c1(),i="",o=0;if(t.cellXfs=[],u6(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),l1(s,i="docProps/core.xml",G5(e.Props,t)),a.coreprops.push(i),z5(t.rels,2,i,R5.CORE_PROPS),i="docProps/app.xml",e.Props&&e.Props.SheetNames);else if(e.Workbook&&e.Workbook.Sheets){for(var l=[],c=0;c<e.SheetNames.length;++c)2!=(e.Workbook.Sheets[c]||{}).Hidden&&l.push(e.SheetNames[c]);e.Props.SheetNames=l}else e.Props.SheetNames=e.SheetNames;e.Props.Worksheets=e.Props.SheetNames.length,l1(s,i,X5(e.Props)),a.extprops.push(i),z5(t.rels,3,i,R5.EXT_PROPS),e.Custprops!==e.Props&&q0(e.Custprops||{}).length>0&&(l1(s,i="docProps/custom.xml",Q5(e.Custprops)),a.custprops.push(i),z5(t.rels,4,i,R5.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,o=1;o<=e.SheetNames.length;++o){var u={"!id":{}},h=e.Sheets[e.SheetNames[o-1]];(h||{})["!type"];if(l1(s,i="xl/worksheets/sheet"+o+"."+r,g6(o-1,t,e,u)),a.sheets.push(i),z5(t.wbrels,-1,"worksheets/sheet"+o+"."+r,R5.WS[0]),h){var m=h["!comments"],p=!1,f="";if(m&&m.length>0){var g=!1;m.forEach(function(e){e[1].forEach(function(e){1==e.T&&(g=!0)})}),g&&(l1(s,f="xl/threadedComments/threadedComment"+o+"."+r,g4(m,d,t)),a.threadedcomments.push(f),z5(u,-1,"../threadedComments/threadedComment"+o+"."+r,R5.TCMNT)),l1(s,f="xl/comments"+o+"."+r,f4(m)),a.comments.push(f),z5(u,-1,"../comments"+o+"."+r,R5.CMNT),p=!0}h["!legacy"]&&p&&l1(s,"xl/drawings/vmlDrawing"+o+".vml",p4(o,h["!comments"])),delete h["!comments"],delete h["!legacy"]}u["!id"].rId1&&l1(s,F5(i),B5(u))}return null!=t.Strings&&t.Strings.length>0&&(l1(s,i="xl/sharedStrings."+r,L3(t.Strings,t)),a.strs.push(i),z5(t.wbrels,-1,"sharedStrings."+r,R5.SST)),l1(s,i="xl/workbook."+r,M6(e)),a.workbooks.push(i),z5(t.rels,1,i,R5.WB),l1(s,i="xl/theme/theme1.xml",d4(e.Themes,t)),a.themes.push(i),z5(t.wbrels,-1,"theme/theme1.xml",R5.THEME),l1(s,i="xl/styles."+r,Q3(e,t)),a.styles.push(i),z5(t.wbrels,-1,"styles."+r,R5.STY),e.vbaraw&&n&&(l1(s,i="xl/vbaProject.bin",e.vbaraw),a.vba.push(i),z5(t.wbrels,-1,"vbaProject.bin",R5.VBA)),l1(s,i="xl/metadata."+r,h4()),a.metadata.push(i),z5(t.wbrels,-1,"metadata."+r,R5.XLMETA),d.length>1&&(l1(s,i="xl/persons/person.xml",function(e){var t=[d1,T1("personList",null,{xmlns:R1,"xmlns:x":H1[0]}).replace(/[\/]>/,">")];return e.forEach(function(e,r){t.push(T1("person",null,{displayName:e,id:"{54EE7950-7262-4200-6969-"+("000000000000"+r).slice(-12)+"}",userId:e,providerId:"None"}))}),t.push("</personList>"),t.join("")}(d)),a.people.push(i),z5(t.wbrels,-1,"persons/person.xml",R5.PEOPLE)),l1(s,"[Content_Types].xml",M5(a,t)),l1(s,"_rels/.rels",B5(t.rels)),l1(s,"xl/_rels/workbook.xml.rels",B5(t.wbrels)),delete t.revssf,delete t.ssf,s}function U8(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=IZ(e.slice(0,12));break;case"binary":r=e;break;default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function q8(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return U0(t.file,F0.write(e,{type:LZ?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return F0.write(e,t)}function W8(e,t){var r={},n=LZ?"nodebuffer":"undefined"!==typeof Uint8Array?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var a=e.FullPaths?F0.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if("undefined"!==typeof Deno&&"string"==typeof a){if("binary"==t.type||"base64"==t.type)return a;a=new Uint8Array(zZ(a))}return t.password&&"undefined"!==typeof encrypt_agile?q8(encrypt_agile(a,t.password),t):"file"===t.type?U0(t.file,a):"string"==t.type?_1(a):a}function V8(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return DZ(k1(n));case"binary":return k1(n);case"string":return e;case"file":return U0(t.file,n,"utf8");case"buffer":return LZ?MZ(n,"utf8"):"undefined"!==typeof TextEncoder?(new TextEncoder).encode(n):V8(n,{type:"binary"}).split("").map(function(e){return e.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function H8(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return"base64"==t.type?DZ(r):"string"==t.type?_1(r):r;case"file":return U0(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function G8(e,t){AZ(),L6(e);var r=n1(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),"array"==r.type){r.type="binary";var n=G8(e,r);return r.type="array",zZ(n)}var a=0;if(r.sheet&&(a="number"==typeof r.sheet?r.sheet:e.SheetNames.indexOf(r.sheet),!e.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return V8(K6(e,r),r);case"slk":case"sylk":return V8(E3.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"htm":case"html":return V8(m8(e.Sheets[e.SheetNames[a]],r),r);case"txt":return function(e,t){switch(t.type){case"base64":return DZ(e);case"binary":case"string":return e;case"file":return U0(t.file,e,"binary");case"buffer":return LZ?MZ(e,"binary"):e.split("").map(function(e){return e.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}(Z8(e.Sheets[e.SheetNames[a]],r),r);case"csv":return V8(J8(e.Sheets[e.SheetNames[a]],r),r,"\ufeff");case"dif":return V8(T3.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"dbf":return H8(C3.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"prn":return V8(O3.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"rtf":return V8(z3.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"eth":return V8(P3.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"fods":return V8(v8(e,r),r);case"wk1":return H8(D3.sheet_to_wk1(e.Sheets[e.SheetNames[a]],r),r);case"wk3":return H8(D3.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),H8(l8(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),function(e,t){var r=t||{};return q8($6(e,r),r)}(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return function(e,t){var r=n1(t||{});return W8(B8(e,r),r)}(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function K8(e){if(!e.bookType){var t=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();t.match(/^\.[a-z]+$/)&&(e.bookType=t.slice(1)),e.bookType={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"}[e.bookType]||e.bookType}}function Y8(e,t,r,n,a,s,i,o){var l=W2(r),c=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),u=!0,h=1===a?[]:{};if(1!==a)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch(ze){h.__rowNum__=r}else h.__rowNum__=r;if(!i||e[r])for(var m=t.s.c;m<=t.e.c;++m){var p=i?e[r][m]:e[n[m]+l];if(void 0!==p&&void 0!==p.t){var f=p.v;switch(p.t){case"z":if(null==f)break;continue;case"e":f=0==f?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+p.t)}if(null!=s[m]){if(null==f)if("e"==p.t&&null===f)h[s[m]]=null;else if(void 0!==c)h[s[m]]=c;else{if(!d||null!==f)continue;h[s[m]]=null}else h[s[m]]=d&&("n"!==p.t||"n"===p.t&&!1!==o.rawNumbers)?f:J2(p,f,o);null!=f&&(u=!1)}}else{if(void 0===c)continue;null!=s[m]&&(h[s[m]]=c)}}return{row:h,isempty:u}}function X8(e,t){if(null==e||null==e["!ref"])return[];var r={t:"n",v:0},n=0,a=1,s=[],i=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},c=t||{},d=null!=c.range?c.range:e["!ref"];switch(1===c.header?n=1:"A"===c.header?n=2:Array.isArray(c.header)?n=3:null==c.header&&(n=0),typeof d){case"string":l=Q2(d);break;case"number":(l=Q2(e["!ref"])).s.r=d;break;default:l=d}n>0&&(a=0);var u=W2(l.s.r),h=[],m=[],p=0,f=0,g=Array.isArray(e),x=l.s.r,y=0,v={};g&&!e[x]&&(e[x]=[]);var b=c.skipHidden&&e["!cols"]||[],j=c.skipHidden&&e["!rows"]||[];for(y=l.s.c;y<=l.e.c;++y)if(!(b[y]||{}).hidden)switch(h[y]=H2(y),r=g?e[x][y]:e[h[y]+u],n){case 1:s[y]=y-l.s.c;break;case 2:s[y]=h[y];break;case 3:s[y]=c.header[y-l.s.c];break;default:if(null==r&&(r={w:"__EMPTY",t:"s"}),o=i=J2(r,null,c),f=v[i]||0){do{o=i+"_"+f++}while(v[o]);v[i]=f,v[o]=1}else v[i]=1;s[y]=o}for(x=l.s.r+a;x<=l.e.r;++x)if(!(j[x]||{}).hidden){var w=Y8(e,l,x,h,n,s,g,c);(!1===w.isempty||(1===n?!1!==c.blankrows:c.blankrows))&&(m[p++]=w.row)}return m.length=p,m}var Q8=/"/g;function $8(e,t,r,n,a,s,i,o){for(var l=!0,c=[],d="",u=W2(r),h=t.s.c;h<=t.e.c;++h)if(n[h]){var m=o.dense?(e[r]||[])[h]:e[n[h]+u];if(null==m)d="";else if(null!=m.v){l=!1,d=""+(o.rawNumbers&&"n"==m.t?m.v:J2(m,null,o));for(var p=0,f=0;p!==d.length;++p)if((f=d.charCodeAt(p))===a||f===s||34===f||o.forceQuotes){d='"'+d.replace(Q8,'""')+'"';break}"ID"==d&&(d='"ID"')}else null==m.f||m.F?d="":(l=!1,(d="="+m.f).indexOf(",")>=0&&(d='"'+d.replace(Q8,'""')+'"'));c.push(d)}return!1===o.blankrows&&l?null:c.join(i)}function J8(e,t){var r=[],n=null==t?{}:t;if(null==e||null==e["!ref"])return"";var a=Q2(e["!ref"]),s=void 0!==n.FS?n.FS:",",i=s.charCodeAt(0),o=void 0!==n.RS?n.RS:"\n",l=o.charCodeAt(0),c=new RegExp(("|"==s?"\\|":s)+"+$"),d="",u=[];n.dense=Array.isArray(e);for(var h=n.skipHidden&&e["!cols"]||[],m=n.skipHidden&&e["!rows"]||[],p=a.s.c;p<=a.e.c;++p)(h[p]||{}).hidden||(u[p]=H2(p));for(var f=0,g=a.s.r;g<=a.e.r;++g)(m[g]||{}).hidden||null!=(d=$8(e,a,g,u,i,l,s,n))&&(n.strip&&(d=d.replace(c,"")),(d||!1!==n.blankrows)&&r.push((f++?o:"")+d));return delete n.dense,r.join("")}function Z8(e,t){t||(t={}),t.FS="\t",t.RS="\n";var r=J8(e,t);if("undefined"==typeof EZ||"string"==t.type)return r;var n=EZ.utils.encode(1200,r,"str");return String.fromCharCode(255)+String.fromCharCode(254)+n}function e7(e,t,r){var n,a=r||{},s=+!a.skipHeader,i=e||{},o=0,l=0;if(i&&null!=a.origin)if("number"==typeof a.origin)o=a.origin;else{var c="string"==typeof a.origin?G2(a.origin):a.origin;o=c.r,l=c.c}var d={s:{c:0,r:0},e:{c:l,r:o+t.length-1+s}};if(i["!ref"]){var u=Q2(i["!ref"]);d.e.c=Math.max(d.e.c,u.e.c),d.e.r=Math.max(d.e.r,u.e.r),-1==o&&(o=u.e.r+1,d.e.r=o+t.length-1+s)}else-1==o&&(o=0,d.e.r=t.length-1+s);var h=a.header||[],m=0;t.forEach(function(e,t){q0(e).forEach(function(r){-1==(m=h.indexOf(r))&&(h[m=h.length]=r);var c=e[r],d="z",u="",p=K2({c:l+m,r:o+t+s});n=t7(i,p),!c||"object"!==typeof c||c instanceof Date?("number"==typeof c?d="n":"boolean"==typeof c?d="b":"string"==typeof c?d="s":c instanceof Date?(d="d",a.cellDates||(d="n",c=K0(c)),u=a.dateNF||e0[14]):null===c&&a.nullError&&(d="e",c=0),n?(n.t=d,n.v=c,delete n.w,delete n.R,u&&(n.z=u)):i[p]=n={t:d,v:c},u&&(n.z=u)):i[p]=c})}),d.e.c=Math.max(d.e.c,l+h.length-1);var p=W2(o);if(s)for(m=0;m<h.length;++m)i[H2(m+l)+p]={t:"s",v:h[m]};return i["!ref"]=X2(d),i}function t7(e,t,r){if("string"==typeof t){if(Array.isArray(e)){var n=G2(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return t7(e,K2("number"!=typeof t?t:{r:t,c:r||0}))}function r7(){return{SheetNames:[],Sheets:{}}}function n7(e,t,r,n){var a=1;if(!r)for(;a<=65535&&-1!=e.SheetNames.indexOf(r="Sheet"+a);++a,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);a=s&&+s[2]||0;var i=s&&s[1]||r;for(++a;a<=65535&&-1!=e.SheetNames.indexOf(r=i+a);++a);}if(I6(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function a7(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}var s7={encode_col:H2,encode_row:W2,encode_cell:K2,encode_range:X2,decode_col:V2,decode_row:q2,split_cell:function(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")},decode_cell:G2,decode_range:Y2,format_cell:J2,sheet_add_aoa:e5,sheet_add_json:e7,sheet_add_dom:p8,aoa_to_sheet:t5,json_to_sheet:function(e,t){return e7(null,e,t)},table_to_sheet:f8,table_to_book:function(e,t){return Z2(f8(e,t),t)},sheet_to_csv:J8,sheet_to_txt:Z8,sheet_to_json:X8,sheet_to_html:m8,sheet_to_formulae:function(e){var t,r="",n="";if(null==e||null==e["!ref"])return[];var a,s=Q2(e["!ref"]),i="",o=[],l=[],c=Array.isArray(e);for(a=s.s.c;a<=s.e.c;++a)o[a]=H2(a);for(var d=s.s.r;d<=s.e.r;++d)for(i=W2(d),a=s.s.c;a<=s.e.c;++a)if(r=o[a]+i,n="",void 0!==(t=c?(e[d]||[])[a]:e[r])){if(null!=t.F){if(r=t.F,!t.f)continue;n=t.f,-1==r.indexOf(":")&&(r=r+":"+r)}if(null!=t.f)n=t.f;else{if("z"==t.t)continue;if("n"==t.t&&null!=t.v)n=""+t.v;else if("b"==t.t)n=t.v?"TRUE":"FALSE";else if(void 0!==t.w)n="'"+t.w;else{if(void 0===t.v)continue;n="s"==t.t?"'"+t.v:""+t.v}}l[l.length]=r+"="+n}return l},sheet_to_row_object_array:X8,sheet_get_cell:t7,book_new:r7,book_append_sheet:n7,book_set_sheet_visibility:function(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=function(e,t){if("number"==typeof t){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}if("string"==typeof t){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}throw new Error("Cannot find sheet |"+t+"|")}(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r},cell_set_number_format:function(e,t){return e.z=t,e},cell_set_hyperlink:a7,cell_set_internal_link:function(e,t,r){return a7(e,"#"+t,r)},cell_add_comment:function(e,t,r){e.c||(e.c=[]),e.c.push({t:t,a:r||"SheetJS"})},sheet_set_array_formula:function(e,t,r,n){for(var a="string"!=typeof t?t:Q2(t),s="string"==typeof t?t:X2(t),i=a.s.r;i<=a.e.r;++i)for(var o=a.s.c;o<=a.e.c;++o){var l=t7(e,i,o);l.t="n",l.F=s,delete l.v,i==a.s.r&&o==a.s.c&&(l.f=r,n&&(l.D=!0))}return e},consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};bZ.version;var i7=r(5173),o7=r(6922);function l7(e){return"string"===typeof e}function c7(e,t,r){return r.indexOf(e)===t}function d7(e){return-1===e.indexOf(",")?e:e.split(",")}function u7(e){if(!e)return e;if("C"===e||"posix"===e||"POSIX"===e)return"en-US";if(-1!==e.indexOf(".")){var t=e.split(".")[0];return u7(void 0===t?"":t)}if(-1!==e.indexOf("@")){var r=e.split("@")[0];return u7(void 0===r?"":r)}if(-1===e.indexOf("-")||(n=e).toLowerCase()!==n)return e;var n,a=e.split("-"),s=a[0],i=a[1],o=void 0===i?"":i;return"".concat(s,"-").concat(o.toUpperCase())}var h7=o7(function(e){var t=void 0===e?{}:e,r=t.useFallbackLocale,n=void 0===r||r,a=t.fallbackLocale,s=void 0===a?"en-US":a,i=[];if("undefined"!==typeof navigator){for(var o=[],l=0,c=navigator.languages||[];l<c.length;l++){var d=c[l];o=o.concat(d7(d))}var u=navigator.language,h=u?d7(u):u;i=i.concat(o,h)}return n&&i.push(s),i.filter(l7).map(u7).filter(c7)},{cacheKey:JSON.stringify});var m7=o7(function(e){return h7(e)[0]||null},{cacheKey:JSON.stringify});const p7=m7;function f7(e,t,r){return function(n,a){void 0===a&&(a=r);var s=e(n)+a;return t(s)}}function g7(e){return function(t){return new Date(e(t).getTime()-1)}}function x7(e,t){return function(r){return[e(r),t(r)]}}function y7(e){if(e instanceof Date)return e.getFullYear();if("number"===typeof e)return e;var t=parseInt(e,10);if("string"===typeof e&&!isNaN(t))return t;throw new Error("Failed to get year from date: ".concat(e,"."))}function v7(e){if(e instanceof Date)return e.getMonth();throw new Error("Failed to get month from date: ".concat(e,"."))}function b7(e){if(e instanceof Date)return e.getDate();throw new Error("Failed to get year from date: ".concat(e,"."))}function j7(e){var t=y7(e),r=t+(1-t)%100,n=new Date;return n.setFullYear(r,0,1),n.setHours(0,0,0,0),n}var w7=f7(y7,j7,-100),N7=f7(y7,j7,100),_7=g7(N7),k7=f7(y7,_7,-100),S7=(f7(y7,_7,100),x7(j7,_7));function A7(e){var t=y7(e),r=t+(1-t)%10,n=new Date;return n.setFullYear(r,0,1),n.setHours(0,0,0,0),n}var C7=f7(y7,A7,-10),E7=f7(y7,A7,10),T7=g7(E7),P7=f7(y7,T7,-10),O7=(f7(y7,T7,10),x7(A7,T7));function D7(e){var t=y7(e),r=new Date;return r.setFullYear(t,0,1),r.setHours(0,0,0,0),r}var I7=f7(y7,D7,-1),L7=f7(y7,D7,1),M7=g7(L7),R7=f7(y7,M7,-1),F7=(f7(y7,M7,1),x7(D7,M7));function B7(e,t){return function(r,n){void 0===n&&(n=t);var a=y7(r),s=v7(r)+n,i=new Date;return i.setFullYear(a,s,1),i.setHours(0,0,0,0),e(i)}}function z7(e){var t=y7(e),r=v7(e),n=new Date;return n.setFullYear(t,r,1),n.setHours(0,0,0,0),n}var U7=B7(z7,-1),q7=B7(z7,1),W7=g7(q7),V7=B7(W7,-1),H7=(B7(W7,1),x7(z7,W7));function G7(e,t){return function(r,n){void 0===n&&(n=t);var a=y7(r),s=v7(r),i=b7(r)+n,o=new Date;return o.setFullYear(a,s,i),o.setHours(0,0,0,0),e(o)}}function K7(e){var t=y7(e),r=v7(e),n=b7(e),a=new Date;return a.setFullYear(t,r,n),a.setHours(0,0,0,0),a}G7(K7,-1);var Y7,X7=g7(G7(K7,1)),Q7=(G7(X7,-1),G7(X7,1),x7(K7,X7));function $7(e){return b7(W7(e))}var J7={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},Z7={ARABIC:"Arabic",HEBREW:"Hebrew",ISO_8601:"ISO 8601",US:"US"},e9=((Y7={})[J7.GREGORY]=["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],Y7[J7.HEBREW]=["he","he-IL"],Y7[J7.ISLAMIC]=["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"],Y7),t9=[0,1,2,3,4,5,6],r9=new Map;function n9(e){return function(t,r){return function(e){return function(t,r){var n=t||p7();r9.has(n)||r9.set(n,new Map);var a=r9.get(n);return a.has(e)||a.set(e,new Intl.DateTimeFormat(n||void 0,e).format),a.get(e)(r)}}(e)(t,function(e){var t=new Date(e);return new Date(t.setHours(12))}(r))}}n9({day:"numeric",month:"numeric",year:"numeric"});var a9=n9({day:"numeric"}),s9=n9({day:"numeric",month:"long",year:"numeric"}),i9=n9({month:"long"}),o9=n9({month:"long",year:"numeric"}),l9=n9({weekday:"short"}),c9=n9({weekday:"long"}),d9=n9({year:"numeric"}),u9=t9[0],h9=t9[5],m9=t9[6];function p9(e,t){void 0===t&&(t=J7.ISO_8601);var r=e.getDay();switch(t){case J7.ISO_8601:return(r+6)%7;case J7.ISLAMIC:return(r+1)%7;case J7.HEBREW:case J7.GREGORY:return r;default:throw new Error("Unsupported calendar type.")}}function f9(e,t){void 0===t&&(t=J7.ISO_8601);var r=y7(e),n=v7(e),a=e.getDate()-p9(e,t);return new Date(r,n,a)}function g9(e,t){switch(e){case"century":return j7(t);case"decade":return A7(t);case"year":return D7(t);case"month":return z7(t);case"day":return K7(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function x9(e,t){switch(e){case"century":return N7(t);case"decade":return E7(t);case"year":return L7(t);case"month":return q7(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function y9(e,t){switch(e){case"century":return _7(t);case"decade":return T7(t);case"year":return M7(t);case"month":return W7(t);case"day":return X7(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function v9(e,t){switch(e){case"century":return S7(t);case"decade":return O7(t);case"year":return F7(t);case"month":return H7(t);case"day":return Q7(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function b9(e,t,r){return void 0===t&&(t=d9),r.map(function(r){return t(e,r)}).join(" \u2013 ")}function j9(e,t,r){return b9(e,t,O7(r))}function w9(e){return e.getDay()===(new Date).getDay()}function N9(e,t){void 0===t&&(t=J7.ISO_8601);var r=e.getDay();switch(t){case J7.ISLAMIC:case J7.HEBREW:return r===h9||r===m9;case J7.ISO_8601:case J7.GREGORY:return r===m9||r===u9;default:throw new Error("Unsupported calendar type.")}}var _9="react-calendar__navigation";function k9(e){var t=e.activeStartDate,r=e.drillUp,n=e.formatMonthYear,s=void 0===n?o9:n,i=e.formatYear,o=void 0===i?d9:i,l=e.locale,c=e.maxDate,d=e.minDate,u=e.navigationAriaLabel,h=void 0===u?"":u,m=e.navigationAriaLive,p=e.navigationLabel,f=e.next2AriaLabel,g=void 0===f?"":f,x=e.next2Label,y=void 0===x?"\xbb":x,v=e.nextAriaLabel,b=void 0===v?"":v,j=e.nextLabel,w=void 0===j?"\u203a":j,N=e.prev2AriaLabel,_=void 0===N?"":N,k=e.prev2Label,S=void 0===k?"\xab":k,A=e.prevAriaLabel,C=void 0===A?"":A,E=e.prevLabel,T=void 0===E?"\u2039":E,P=e.setActiveStartDate,O=e.showDoubleView,D=e.view,I=e.views.indexOf(D)>0,L="century"!==D,M=function(e,t){switch(e){case"century":return w7(t);case"decade":return C7(t);case"year":return I7(t);case"month":return U7(t);default:throw new Error("Invalid rangeType: ".concat(e))}}(D,t),R=L?function(e,t){switch(e){case"decade":return C7(t,-100);case"year":return I7(t,-10);case"month":return U7(t,-12);default:throw new Error("Invalid rangeType: ".concat(e))}}(D,t):void 0,F=x9(D,t),B=L?function(e,t){switch(e){case"decade":return E7(t,100);case"year":return L7(t,10);case"month":return q7(t,12);default:throw new Error("Invalid rangeType: ".concat(e))}}(D,t):void 0,z=function(){if(M.getFullYear()<0)return!0;var e=function(e,t){switch(e){case"century":return k7(t);case"decade":return P7(t);case"year":return R7(t);case"month":return V7(t);default:throw new Error("Invalid rangeType: ".concat(e))}}(D,t);return d&&d>=e}(),U=L&&function(){if(R.getFullYear()<0)return!0;var e=function(e,t){switch(e){case"decade":return P7(t,-100);case"year":return R7(t,-10);case"month":return V7(t,-12);default:throw new Error("Invalid rangeType: ".concat(e))}}(D,t);return d&&d>=e}(),q=c&&c<F,W=L&&c&&c<B;function V(e){var t=function(){switch(D){case"century":return function(e,t,r){return b9(e,t,S7(r))}(l,o,e);case"decade":return j9(l,o,e);case"year":return o(l,e);case"month":return s(l,e);default:throw new Error("Invalid view: ".concat(D,"."))}}();return p?p({date:e,label:t,locale:l||m7()||void 0,view:D}):t}return a.createElement("div",{className:_9},null!==S&&L?a.createElement("button",{"aria-label":_,className:"".concat(_9,"__arrow ").concat(_9,"__prev2-button"),disabled:U,onClick:function(){P(R,"prev2")},type:"button"},S):null,null!==T&&a.createElement("button",{"aria-label":C,className:"".concat(_9,"__arrow ").concat(_9,"__prev-button"),disabled:z,onClick:function(){P(M,"prev")},type:"button"},T),function(){var e="".concat(_9,"__label");return a.createElement("button",{"aria-label":h,"aria-live":m,className:e,disabled:!I,onClick:r,style:{flexGrow:1},type:"button"},a.createElement("span",{className:"".concat(e,"__labelText ").concat(e,"__labelText--from")},V(t)),O?a.createElement(a.Fragment,null,a.createElement("span",{className:"".concat(e,"__divider")}," \u2013 "),a.createElement("span",{className:"".concat(e,"__labelText ").concat(e,"__labelText--to")},V(F))):null)}(),null!==w&&a.createElement("button",{"aria-label":b,className:"".concat(_9,"__arrow ").concat(_9,"__next-button"),disabled:q,onClick:function(){P(F,"next")},type:"button"},w),null!==y&&L?a.createElement("button",{"aria-label":g,className:"".concat(_9,"__arrow ").concat(_9,"__next2-button"),disabled:W,onClick:function(){P(B,"next2")},type:"button"},y):null)}var S9=function(){return S9=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},S9.apply(this,arguments)},A9=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r};function C9(e){return"".concat(e,"%")}function E9(e){var t=e.children,r=e.className,n=e.count,s=e.direction,i=e.offset,o=e.style,l=e.wrap,c=A9(e,["children","className","count","direction","offset","style","wrap"]);return a.createElement("div",S9({className:r,style:S9({display:"flex",flexDirection:s,flexWrap:l?"wrap":"nowrap"},o)},c),a.Children.map(t,function(e,t){var r=i&&0===t?C9(100*i/n):null;return a.cloneElement(e,S9(S9({},e.props),{style:{flexBasis:C9(100/n),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:r,marginInlineStart:r,marginInlineEnd:0}}))}))}var T9,P9=r(6440);function O9(e,t){return t[0]<=e&&t[1]>=e}function D9(e,t){return O9(e[0],t)||O9(e[1],t)}function I9(e,t,r){var n=[];if(D9(t,e)){n.push(r);var a=O9(e[0],t),s=O9(e[1],t);a&&n.push("".concat(r,"Start")),s&&n.push("".concat(r,"End")),a&&s&&n.push("".concat(r,"BothEnds"))}return n}function L9(e){if(!e)throw new Error("args is required");var t=e.value,r=e.date,n=e.hover,a="react-calendar__tile",s=[a];if(!r)return s;var i=new Date,o=function(){if(Array.isArray(r))return r;var t=e.dateType;if(!t)throw new Error("dateType is required when date is not an array of two dates");return v9(t,r)}();if(O9(i,o)&&s.push("".concat(a,"--now")),!t||!function(e){return Array.isArray(e)?null!==e[0]&&null!==e[1]:null!==e}(t))return s;var l,c,d=function(){if(Array.isArray(t))return t;var r=e.valueType;if(!r)throw new Error("valueType is required when value is not an array of two dates");return v9(r,t)}();c=o,(l=d)[0]<=c[0]&&l[1]>=c[1]?s.push("".concat(a,"--active")):D9(d,o)&&s.push("".concat(a,"--hasActive"));var u=I9(d,o,"".concat(a,"--range"));s.push.apply(s,u);var h=Array.isArray(t)?t:[t];if(n&&1===h.length){var m=I9(n>d[0]?[d[0],n]:[n,d[0]],o,"".concat(a,"--hover"));s.push.apply(s,m)}return s}var M9=((T9={})[Z7.ARABIC]=J7.ISLAMIC,T9[Z7.HEBREW]=J7.HEBREW,T9[Z7.ISO_8601]=J7.ISO_8601,T9[Z7.US]=J7.GREGORY,T9);var R9=!1;function F9(e){if(function(e){return void 0!==e&&e in Z7}(e)){var t=M9[e];return P9(R9,'Specifying calendarType="'.concat(e,'" is deprecated. Use calendarType="').concat(t,'" instead.')),R9=!0,t}return e}function B9(e){for(var t=e.className,r=e.count,n=void 0===r?3:r,s=e.dateTransform,i=e.dateType,o=e.end,l=e.hover,c=e.offset,d=e.renderTile,u=e.start,h=e.step,m=void 0===h?1:h,p=e.value,f=e.valueType,g=[],x=u;x<=o;x+=m){var y=s(x);g.push(d({classes:L9({date:y,dateType:i,hover:l,value:p,valueType:f}),date:y}))}return a.createElement(E9,{className:t,count:n,offset:c,wrap:!0},g)}function z9(e){var t=e.activeStartDate,r=e.children,n=e.classes,s=e.date,i=e.formatAbbr,o=e.locale,l=e.maxDate,c=e.maxDateTransform,d=e.minDate,u=e.minDateTransform,h=e.onClick,m=e.onMouseOver,p=e.style,f=e.tileClassName,g=e.tileContent,x=e.tileDisabled,y=e.view,v=(0,a.useMemo)(function(){return"function"===typeof f?f({activeStartDate:t,date:s,view:y}):f},[t,s,f,y]),b=(0,a.useMemo)(function(){return"function"===typeof g?g({activeStartDate:t,date:s,view:y}):g},[t,s,g,y]);return a.createElement("button",{className:wm(n,v),disabled:d&&u(d)>s||l&&c(l)<s||x&&x({activeStartDate:t,date:s,view:y}),onClick:h?function(e){return h(s,e)}:void 0,onFocus:m?function(){return m(s)}:void 0,onMouseOver:m?function(){return m(s)}:void 0,style:p,type:"button"},i?a.createElement("abbr",{"aria-label":i(o,s)},r):r,b)}var U9=function(){return U9=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},U9.apply(this,arguments)},q9=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r},W9="react-calendar__century-view__decades__decade";function V9(e){var t=e.classes,r=void 0===t?[]:t,n=e.currentCentury,s=e.formatYear,i=void 0===s?d9:s,o=q9(e,["classes","currentCentury","formatYear"]),l=o.date,c=o.locale,d=[];return r&&d.push.apply(d,r),W9&&d.push(W9),j7(l).getFullYear()!==n&&d.push("".concat(W9,"--neighboringCentury")),a.createElement(z9,U9({},o,{classes:d,maxDateTransform:T7,minDateTransform:A7,view:"century"}),j9(c,i,l))}var H9=function(){return H9=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},H9.apply(this,arguments)},G9=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r};function K9(e){var t=e.activeStartDate,r=e.hover,n=e.showNeighboringCentury,s=e.value,i=e.valueType,o=G9(e,["activeStartDate","hover","showNeighboringCentury","value","valueType"]),l=function(e){return y7(j7(e))}(t),c=l+(n?119:99);return a.createElement(B9,{className:"react-calendar__century-view__decades",dateTransform:A7,dateType:"decade",end:c,hover:r,renderTile:function(e){var r=e.date,n=G9(e,["date"]);return a.createElement(V9,H9({key:r.getTime()},o,n,{activeStartDate:t,currentCentury:l,date:r}))},start:l,step:10,value:s,valueType:i})}var Y9=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,s=t.length;a<s;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},X9=Object.values(J7),Q9=Object.values(Z7),$9=["century","decade","year","month"],J9=i7.oneOf(Y9(Y9([],X9,!0),Q9,!0)),Z9=i7.oneOfType([i7.string,i7.arrayOf(i7.string)]),eee=function(e,t,r){var n=e[t];if(!n)return null;if(!(n instanceof Date))return new Error("Invalid prop `".concat(t,"` of type `").concat(typeof n,"` supplied to `").concat(r,"`, expected instance of `Date`."));var a=e.maxDate;return a&&n>a?new Error("Invalid prop `".concat(t,"` of type `").concat(typeof n,"` supplied to `").concat(r,"`, minDate cannot be larger than maxDate.")):null},tee=function(e,t,r){var n=e[t];if(!n)return null;if(!(n instanceof Date))return new Error("Invalid prop `".concat(t,"` of type `").concat(typeof n,"` supplied to `").concat(r,"`, expected instance of `Date`."));var a=e.minDate;return a&&n<a?new Error("Invalid prop `".concat(t,"` of type `").concat(typeof n,"` supplied to `").concat(r,"`, maxDate cannot be smaller than minDate.")):null},ree=i7.oneOfType([i7.func,i7.exact({current:i7.any})]),nee=i7.arrayOf(i7.oneOfType([i7.instanceOf(Date),i7.oneOf([null])]).isRequired),aee=i7.oneOfType([i7.instanceOf(Date),i7.oneOf([null]),nee]),see=(i7.arrayOf(i7.oneOf($9)),function(e,t,r){var n=e[t];return void 0===n||"string"===typeof n&&-1!==$9.indexOf(n)?null:new Error("Invalid prop `".concat(t,"` of value `").concat(n,"` supplied to `").concat(r,"`, expected one of [").concat($9.map(function(e){return'"'.concat(e,'"')}).join(", "),"]."))});see.isRequired=function(e,t,r,n,a){var s=e[t];return s?see(e,t,r):new Error("The prop `".concat(t,"` is marked as required in `").concat(r,"`, but its value is `").concat(s,"`."))};var iee={activeStartDate:i7.instanceOf(Date).isRequired,hover:i7.instanceOf(Date),locale:i7.string,maxDate:tee,minDate:eee,onClick:i7.func,onMouseOver:i7.func,tileClassName:i7.oneOfType([i7.func,Z9]),tileContent:i7.oneOfType([i7.func,i7.node]),value:aee,valueType:i7.oneOf(["century","decade","year","month","day"]).isRequired},oee=(i7.instanceOf(Date).isRequired,i7.arrayOf(i7.string.isRequired).isRequired,i7.instanceOf(Date).isRequired,i7.string,i7.func,i7.func,i7.objectOf(i7.oneOfType([i7.string,i7.number])),i7.oneOfType([i7.func,Z9]),i7.oneOfType([i7.func,i7.node]),i7.func,function(){return oee=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},oee.apply(this,arguments)}),lee=function(e){return a.createElement("div",{className:"react-calendar__century-view"},a.createElement(K9,oee({},e)))};lee.propTypes=oee(oee({},iee),{showNeighboringCentury:i7.bool});const cee=lee;var dee=function(){return dee=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},dee.apply(this,arguments)},uee=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r},hee="react-calendar__decade-view__years__year";function mee(e){var t=e.classes,r=void 0===t?[]:t,n=e.currentDecade,s=e.formatYear,i=void 0===s?d9:s,o=uee(e,["classes","currentDecade","formatYear"]),l=o.date,c=o.locale,d=[];return r&&d.push.apply(d,r),hee&&d.push(hee),A7(l).getFullYear()!==n&&d.push("".concat(hee,"--neighboringDecade")),a.createElement(z9,dee({},o,{classes:d,maxDateTransform:M7,minDateTransform:D7,view:"decade"}),i(c,l))}var pee=function(){return pee=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},pee.apply(this,arguments)},fee=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r};function gee(e){var t=e.activeStartDate,r=e.hover,n=e.showNeighboringDecade,s=e.value,i=e.valueType,o=fee(e,["activeStartDate","hover","showNeighboringDecade","value","valueType"]),l=function(e){return y7(A7(e))}(t),c=l+(n?11:9);return a.createElement(B9,{className:"react-calendar__decade-view__years",dateTransform:D7,dateType:"year",end:c,hover:r,renderTile:function(e){var r=e.date,n=fee(e,["date"]);return a.createElement(mee,pee({key:r.getTime()},o,n,{activeStartDate:t,currentDecade:l,date:r}))},start:l,value:s,valueType:i})}var xee=function(){return xee=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},xee.apply(this,arguments)},yee=function(e){return a.createElement("div",{className:"react-calendar__decade-view"},a.createElement(gee,xee({},e)))};yee.propTypes=xee(xee({},iee),{showNeighboringDecade:i7.bool});const vee=yee;var bee=function(){return bee=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},bee.apply(this,arguments)},jee=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r},wee=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,s=t.length;a<s;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))};function Nee(e){var t=e.classes,r=void 0===t?[]:t,n=e.formatMonth,s=void 0===n?i9:n,i=e.formatMonthYear,o=void 0===i?o9:i,l=jee(e,["classes","formatMonth","formatMonthYear"]),c=l.date,d=l.locale;return a.createElement(z9,bee({},l,{classes:wee(wee([],r,!0),["react-calendar__year-view__months__month"],!1),formatAbbr:o,maxDateTransform:W7,minDateTransform:z7,view:"year"}),s(d,c))}var _ee=function(){return _ee=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},_ee.apply(this,arguments)},kee=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r};function See(e){var t=e.activeStartDate,r=e.hover,n=e.value,s=e.valueType,i=kee(e,["activeStartDate","hover","value","valueType"]),o=y7(t);return a.createElement(B9,{className:"react-calendar__year-view__months",dateTransform:function(e){var t=new Date;return t.setFullYear(o,e,1),z7(t)},dateType:"month",end:11,hover:r,renderTile:function(e){var r=e.date,n=kee(e,["date"]);return a.createElement(Nee,_ee({key:r.getTime()},i,n,{activeStartDate:t,date:r}))},start:0,value:n,valueType:s})}var Aee=function(){return Aee=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Aee.apply(this,arguments)},Cee=function(e){return a.createElement("div",{className:"react-calendar__year-view"},a.createElement(See,Aee({},e)))};Cee.propTypes=Aee({},iee);const Eee=Cee;var Tee=function(){return Tee=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Tee.apply(this,arguments)},Pee=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r},Oee="react-calendar__month-view__days__day";function Dee(e){var t=e.calendarType,r=e.classes,n=void 0===r?[]:r,s=e.currentMonthIndex,i=e.formatDay,o=void 0===i?a9:i,l=e.formatLongDate,c=void 0===l?s9:l,d=Pee(e,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),u=F9(t),h=d.date,m=d.locale,p=[];return n&&p.push.apply(p,n),Oee&&p.push(Oee),N9(h,u)&&p.push("".concat(Oee,"--weekend")),h.getMonth()!==s&&p.push("".concat(Oee,"--neighboringMonth")),a.createElement(z9,Tee({},d,{classes:p,formatAbbr:c,maxDateTransform:X7,minDateTransform:K7,view:"month"}),o(m,h))}var Iee=function(){return Iee=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Iee.apply(this,arguments)},Lee=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r};function Mee(e){var t=e.activeStartDate,r=e.calendarType,n=e.hover,s=e.showFixedNumberOfWeeks,i=e.showNeighboringMonth,o=e.value,l=e.valueType,c=Lee(e,["activeStartDate","calendarType","hover","showFixedNumberOfWeeks","showNeighboringMonth","value","valueType"]),d=F9(r),u=y7(t),h=v7(t),m=s||i,p=p9(t,d),f=m?0:p,g=1+(m?-p:0),x=function(){if(s)return g+42-1;var e=$7(t);if(i){var r=new Date;return r.setFullYear(u,h,e),r.setHours(0,0,0,0),e+(7-p9(r,d)-1)}return e}();return a.createElement(B9,{className:"react-calendar__month-view__days",count:7,dateTransform:function(e){var t=new Date;return t.setFullYear(u,h,e),K7(t)},dateType:"day",hover:n,end:x,renderTile:function(e){var n=e.date,s=Lee(e,["date"]);return a.createElement(Dee,Iee({key:n.getTime()},c,s,{activeStartDate:t,calendarType:r,currentMonthIndex:h,date:n}))},offset:f,start:g,value:o,valueType:l})}var Ree="react-calendar__month-view__weekdays",Fee="".concat(Ree,"__weekday");function Bee(e){for(var t=e.calendarType,r=e.formatShortWeekday,n=void 0===r?l9:r,s=e.formatWeekday,i=void 0===s?c9:s,o=e.locale,l=e.onMouseLeave,c=F9(t),d=z7(new Date),u=y7(d),h=v7(d),m=[],p=1;p<=7;p+=1){var f=new Date(u,h,p-p9(d,c)),g=i(o,f);m.push(a.createElement("div",{key:p,className:wm(Fee,w9(f)&&"".concat(Fee,"--current"),N9(f,c)&&"".concat(Fee,"--weekend"))},a.createElement("abbr",{"aria-label":g,title:g},n(o,f).replace(".",""))))}return a.createElement(E9,{className:Ree,count:7,onFocus:l,onMouseOver:l},m)}var zee=function(){return zee=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},zee.apply(this,arguments)},Uee=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r},qee="react-calendar__tile";function Wee(e){var t=e.onClickWeekNumber,r=e.weekNumber,n=a.createElement("span",null,r);if(t){var s=e.date,i=e.onClickWeekNumber,o=e.weekNumber,l=Uee(e,["date","onClickWeekNumber","weekNumber"]);return a.createElement("button",zee({},l,{className:qee,onClick:function(e){return i(o,s,e)},type:"button"}),n)}e.date,e.onClickWeekNumber,e.weekNumber,l=Uee(e,["date","onClickWeekNumber","weekNumber"]);return a.createElement("div",zee({},l,{className:qee}),n)}function Vee(e){var t=e.activeStartDate,r=e.calendarType,n=e.onClickWeekNumber,s=e.onMouseLeave,i=e.showFixedNumberOfWeeks,o=F9(r),l=function(){if(i)return 6;var e=$7(t)-(7-p9(t,o));return 1+Math.ceil(e/7)}(),c=function(){for(var e=y7(t),r=v7(t),n=b7(t),a=[],s=0;s<l;s+=1)a.push(f9(new Date(e,r,n+7*s),o));return a}(),d=c.map(function(e){return function(e,t){void 0===t&&(t=J7.ISO_8601);var r,n=t===J7.GREGORY?J7.GREGORY:J7.ISO_8601,a=f9(e,t),s=y7(e)+1;do{r=f9(new Date(s,0,n===J7.ISO_8601?4:1),t),s-=1}while(e<r);return Math.round((a.getTime()-r.getTime())/6048e5)+1}(e,o)});return a.createElement(E9,{className:"react-calendar__month-view__weekNumbers",count:l,direction:"column",onFocus:s,onMouseOver:s,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0}},d.map(function(e,t){var r=c[t];if(!r)throw new Error("date is not defined");return a.createElement(Wee,{key:e,date:r,onClickWeekNumber:n,weekNumber:e})}))}var Hee=function(){return Hee=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Hee.apply(this,arguments)},Gee=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r};var Kee=function(e){var t=e.activeStartDate,r=e.locale,n=e.onMouseLeave,s=e.showFixedNumberOfWeeks,i=e.calendarType,o=void 0===i?function(e){if(e)for(var t=0,r=Object.entries(e9);t<r.length;t++){var n=r[t],a=n[0];if(n[1].includes(e))return a}return J7.ISO_8601}(r):i,l=e.formatShortWeekday,c=e.formatWeekday,d=e.onClickWeekNumber,u=e.showWeekNumbers,h=Gee(e,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);var m="react-calendar__month-view";return a.createElement("div",{className:wm(m,u?"".concat(m,"--weekNumbers"):"")},a.createElement("div",{style:{display:"flex",alignItems:"flex-end"}},u?a.createElement(Vee,{activeStartDate:t,calendarType:o,onClickWeekNumber:d,onMouseLeave:n,showFixedNumberOfWeeks:s}):null,a.createElement("div",{style:{flexGrow:1,width:"100%"}},a.createElement(Bee,{calendarType:o,formatShortWeekday:l,formatWeekday:c,locale:r,onMouseLeave:n}),a.createElement(Mee,Hee({calendarType:o},h)))))};Kee.propTypes=Hee(Hee({},iee),{calendarType:J9,formatDay:i7.func,formatLongDate:i7.func,formatShortWeekday:i7.func,formatWeekday:i7.func,onClickWeekNumber:i7.func,onMouseLeave:i7.func,showFixedNumberOfWeeks:i7.bool,showNeighboringMonth:i7.bool,showWeekNumbers:i7.bool});const Yee=Kee;var Xee=function(){return Xee=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Xee.apply(this,arguments)},Qee="react-calendar",$ee=["century","decade","year","month"],Jee=["decade","year","month","day"],Zee=new Date;Zee.setFullYear(1,0,1),Zee.setHours(0,0,0,0);var ete=new Date(864e13);function tte(e){return e instanceof Date?e:new Date(e)}function rte(e,t){return $ee.slice($ee.indexOf(e),$ee.indexOf(t)+1)}function nte(e,t,r){return e&&function(e,t,r){return-1!==rte(t,r).indexOf(e)}(e,t,r)?e:r}function ate(e){var t=$ee.indexOf(e);return Jee[t]}function ste(e,t){var r=e.value,n=e.minDate,a=e.maxDate,s=e.maxDetail,i=function(e,t){var r=Array.isArray(e)?e[t]:e;if(!r)return null;var n=tte(r);if(isNaN(n.getTime()))throw new Error("Invalid date: ".concat(e));return n}(r,t);if(!i)return null;var o=ate(s);return function(e,t,r){return t&&t>e?t:r&&r<e?r:e}(function(){switch(t){case 0:return g9(o,i);case 1:return y9(o,i);default:throw new Error("Invalid index value: ".concat(t))}}(),n,a)}var ite=function(e){return ste(e,0)},ote=function(e){return ste(e,1)},lte=function(e){return[ite,ote].map(function(t){return t(e)})};function cte(e){var t=e.maxDate,r=e.maxDetail,n=e.minDate,a=e.minDetail,s=e.value;return g9(nte(e.view,a,r),ite({value:s,minDate:n,maxDate:t,maxDetail:r})||new Date)}function dte(e){return e&&(!Array.isArray(e)||1===e.length)}function ute(e,t){return e instanceof Date&&t instanceof Date&&e.getTime()===t.getTime()}var hte,mte=(0,a.forwardRef)(function(e,t){var r=e.activeStartDate,n=e.allowPartialRange,s=e.calendarType,i=e.className,o=e.defaultActiveStartDate,l=e.defaultValue,c=e.defaultView,d=e.formatDay,u=e.formatLongDate,h=e.formatMonth,m=e.formatMonthYear,p=e.formatShortWeekday,f=e.formatWeekday,g=e.formatYear,x=e.goToRangeStartOnSelect,y=void 0===x||x,v=e.inputRef,b=e.locale,j=e.maxDate,w=void 0===j?ete:j,N=e.maxDetail,_=void 0===N?"month":N,k=e.minDate,S=void 0===k?Zee:k,A=e.minDetail,C=void 0===A?"century":A,E=e.navigationAriaLabel,T=e.navigationAriaLive,P=e.navigationLabel,O=e.next2AriaLabel,D=e.next2Label,I=e.nextAriaLabel,L=e.nextLabel,M=e.onActiveStartDateChange,R=e.onChange,F=e.onClickDay,B=e.onClickDecade,z=e.onClickMonth,U=e.onClickWeekNumber,q=e.onClickYear,W=e.onDrillDown,V=e.onDrillUp,H=e.onViewChange,G=e.prev2AriaLabel,K=e.prev2Label,Y=e.prevAriaLabel,X=e.prevLabel,Q=e.returnValue,$=void 0===Q?"start":Q,J=e.selectRange,Z=e.showDoubleView,ee=e.showFixedNumberOfWeeks,te=e.showNavigation,re=void 0===te||te,ne=e.showNeighboringCentury,ae=e.showNeighboringDecade,se=e.showNeighboringMonth,ie=void 0===se||se,oe=e.showWeekNumbers,le=e.tileClassName,ce=e.tileContent,de=e.tileDisabled,ue=e.value,he=e.view,me=(0,a.useState)(o),pe=me[0],fe=me[1],ge=(0,a.useState)(null),xe=ge[0],ye=ge[1],ve=(0,a.useState)(Array.isArray(l)?l.map(function(e){return null!==e?tte(e):null}):null!==l&&void 0!==l?tte(l):null),be=ve[0],je=ve[1],we=(0,a.useState)(c),Ne=we[0],_e=we[1],ke=r||pe||function(e){var t=e.activeStartDate,r=e.defaultActiveStartDate,n=e.defaultValue,a=e.defaultView,s=e.maxDate,i=e.maxDetail,o=e.minDate,l=e.minDetail,c=e.value,d=e.view,u=nte(d,l,i),h=t||r;return h?g9(u,h):cte({maxDate:s,maxDetail:i,minDate:o,minDetail:l,value:c||n,view:d||a})}({activeStartDate:r,defaultActiveStartDate:o,defaultValue:l,defaultView:c,maxDate:w,maxDetail:_,minDate:S,minDetail:C,value:ue,view:he}),Se=function(){var e=J&&dte(be)?be:void 0!==ue?ue:be;return e?Array.isArray(e)?e.map(function(e){return null!==e?tte(e):null}):null!==e?tte(e):null:null}(),Ae=ate(_),Ce=nte(he||Ne,C,_),Ee=rte(C,_),Te=J?xe:null,Pe=Ee.indexOf(Ce)<Ee.length-1,Oe=Ee.indexOf(Ce)>0,De=(0,a.useCallback)(function(e){return function(){switch($){case"start":return ite;case"end":return ote;case"range":return lte;default:throw new Error("Invalid returnValue.")}}()({maxDate:w,maxDetail:_,minDate:S,value:e})},[w,_,S,$]),Ie=(0,a.useCallback)(function(e,t){fe(e);var r={action:t,activeStartDate:e,value:Se,view:Ce};M&&!ute(ke,e)&&M(r)},[ke,M,Se,Ce]),Le=(0,a.useCallback)(function(e,t){var r=function(){switch(Ce){case"century":return B;case"decade":return q;case"year":return z;case"month":return F;default:throw new Error("Invalid view: ".concat(Ce,"."))}}();r&&r(e,t)},[F,B,z,q,Ce]),Me=(0,a.useCallback)(function(e,t){if(Pe){Le(e,t);var r=Ee[Ee.indexOf(Ce)+1];if(!r)throw new Error("Attempted to drill down from the lowest view.");fe(e),_e(r);var n={action:"drillDown",activeStartDate:e,value:Se,view:r};M&&!ute(ke,e)&&M(n),H&&Ce!==r&&H(n),W&&W(n)}},[ke,Pe,M,Le,W,H,Se,Ce,Ee]),Re=(0,a.useCallback)(function(){if(Oe){var e=Ee[Ee.indexOf(Ce)-1];if(!e)throw new Error("Attempted to drill up from the highest view.");var t=g9(e,ke);fe(t),_e(e);var r={action:"drillUp",activeStartDate:t,value:Se,view:e};M&&!ute(ke,t)&&M(r),H&&Ce!==e&&H(r),V&&V(r)}},[ke,Oe,M,V,H,Se,Ce,Ee]),Fe=(0,a.useCallback)(function(e,t){var r=Se;Le(e,t);var a,s=J&&!dte(r);if(J)if(s)a=g9(Ae,e);else{if(!r)throw new Error("previousValue is required");if(Array.isArray(r))throw new Error("previousValue must not be an array");a=function(e,t,r){var n=[t,r].sort(function(e,t){return e.getTime()-t.getTime()});return[g9(e,n[0]),y9(e,n[1])]}(Ae,r,e)}else a=De(e);var i=!J||s||y?cte({maxDate:w,maxDetail:_,minDate:S,minDetail:C,value:a,view:Ce}):null;t.persist(),fe(i),je(a);var o={action:"onChange",activeStartDate:i,value:a,view:Ce};if(M&&!ute(ke,i)&&M(o),R)if(J)if(dte(a)){if(n){if(Array.isArray(a))throw new Error("value must not be an array");R([a||null,null],t)}}else R(a||null,t);else R(a||null,t)},[ke,n,De,y,w,_,S,C,M,R,Le,J,Se,Ae,Ce]);function Be(e){ye(e)}function ze(){ye(null)}function Ue(e){var t={activeStartDate:e?x9(Ce,ke):g9(Ce,ke),hover:Te,locale:b,maxDate:w,minDate:S,onClick:Pe?Me:Fe,onMouseOver:J?Be:void 0,tileClassName:le,tileContent:ce,tileDisabled:de,value:Se,valueType:Ae};switch(Ce){case"century":return a.createElement(cee,Xee({formatYear:g,showNeighboringCentury:ne},t));case"decade":return a.createElement(vee,Xee({formatYear:g,showNeighboringDecade:ae},t));case"year":return a.createElement(Eee,Xee({formatMonth:h,formatMonthYear:m},t));case"month":return a.createElement(Yee,Xee({calendarType:s,formatDay:d,formatLongDate:u,formatShortWeekday:p,formatWeekday:f,onClickWeekNumber:U,onMouseLeave:J?ze:void 0,showFixedNumberOfWeeks:"undefined"!==typeof ee?ee:Z,showNeighboringMonth:ie,showWeekNumbers:oe},t));default:throw new Error("Invalid view: ".concat(Ce,"."))}}(0,a.useImperativeHandle)(t,function(){return{activeStartDate:ke,drillDown:Me,drillUp:Re,onChange:Fe,setActiveStartDate:Ie,value:Se,view:Ce}},[ke,Me,Re,Fe,Ie,Se,Ce]);var qe=Array.isArray(Se)?Se:[Se];return a.createElement("div",{className:wm(Qee,J&&1===qe.length&&"".concat(Qee,"--selectRange"),Z&&"".concat(Qee,"--doubleView"),i),ref:v},re?a.createElement(k9,{activeStartDate:ke,drillUp:Re,formatMonthYear:m,formatYear:g,locale:b,maxDate:w,minDate:S,navigationAriaLabel:E,navigationAriaLive:T,navigationLabel:P,next2AriaLabel:O,next2Label:D,nextAriaLabel:I,nextLabel:L,prev2AriaLabel:G,prev2Label:K,prevAriaLabel:Y,prevLabel:X,setActiveStartDate:Ie,showDoubleView:Z,view:Ce,views:Ee}):null,a.createElement("div",{className:"".concat(Qee,"__viewContainer"),onBlur:J?ze:void 0,onMouseLeave:J?ze:void 0},Ue(),Z?Ue(!0):null))}),pte=i7.instanceOf(Date),fte=i7.oneOfType([i7.string,i7.instanceOf(Date)]),gte=i7.oneOfType([fte,(hte=fte,i7.arrayOf(hte))]);mte.propTypes={activeStartDate:pte,allowPartialRange:i7.bool,calendarType:J9,className:Z9,defaultActiveStartDate:pte,defaultValue:gte,defaultView:see,formatDay:i7.func,formatLongDate:i7.func,formatMonth:i7.func,formatMonthYear:i7.func,formatShortWeekday:i7.func,formatWeekday:i7.func,formatYear:i7.func,goToRangeStartOnSelect:i7.bool,inputRef:ree,locale:i7.string,maxDate:tee,maxDetail:i7.oneOf($ee),minDate:eee,minDetail:i7.oneOf($ee),navigationAriaLabel:i7.string,navigationAriaLive:i7.oneOf(["off","polite","assertive"]),navigationLabel:i7.func,next2AriaLabel:i7.string,next2Label:i7.node,nextAriaLabel:i7.string,nextLabel:i7.node,onActiveStartDateChange:i7.func,onChange:i7.func,onClickDay:i7.func,onClickDecade:i7.func,onClickMonth:i7.func,onClickWeekNumber:i7.func,onClickYear:i7.func,onDrillDown:i7.func,onDrillUp:i7.func,onViewChange:i7.func,prev2AriaLabel:i7.string,prev2Label:i7.node,prevAriaLabel:i7.string,prevLabel:i7.node,returnValue:i7.oneOf(["start","end","range"]),selectRange:i7.bool,showDoubleView:i7.bool,showFixedNumberOfWeeks:i7.bool,showNavigation:i7.bool,showNeighboringCentury:i7.bool,showNeighboringDecade:i7.bool,showNeighboringMonth:i7.bool,showWeekNumbers:i7.bool,tileClassName:i7.oneOfType([i7.func,Z9]),tileContent:i7.oneOfType([i7.func,i7.node]),tileDisabled:i7.func,value:gte,view:see};const xte=mte,yte=()=>{const[e,t]=(0,a.useState)(new Date),[r,n]=(0,a.useState)(new Date),[s,i]=(0,a.useState)([]),[o,l]=(0,a.useState)(""),[c,d]=(0,a.useState)([]),[u,h]=(0,a.useState)([]),[m,p]=(0,a.useState)([]),[f,g]=(0,a.useState)(!1);(0,a.useEffect)(()=>{Ia.get("/employees").then(e=>{i(e.data||[]),e.data&&e.data.length>0&&l(e.data[0].id)})},[]),(0,a.useEffect)(()=>{o&&(g(!0),Promise.all([Ia.get("/attendance/work-logs/".concat(o)).catch(()=>({data:[]})),Ia.get("/employees/leave/".concat(o)).catch(()=>({data:[]})),Ia.get("/services/assigned?employee_id=".concat(o,"&status=completed&limit=10")).catch(()=>({data:[]}))]).then(e=>{let[t,r,n]=e;d(t.data||[]),h(r.data||[]);const a=(n.data||[]).map(e=>{var t,r;return{id:e.id,type:e.service_name||(null===(t=e.service)||void 0===t?void 0:t.name)||"Service",location:"Room ".concat(e.room_number||(null===(r=e.room)||void 0===r?void 0:r.number)||"N/A"),completedAt:e.completed_at,status:"Completed"}});p(a)}).finally(()=>g(!1)))},[o]);const x=(0,a.useMemo)(()=>{const e=u.filter(e=>"approved"===e.status).length;return 20-e},[u]),y=(0,a.useMemo)(()=>[{month:"Jan",days:2},{month:"Feb",days:1},{month:"Mar",days:3},{month:"Apr",days:1},{month:"May",days:2},{month:"Jun",days:4},{month:"Jul",days:3},{month:"Aug",days:2},{month:"Sep",days:5},{month:"Oct",days:8},{month:"Nov",days:3},{month:"Dec",days:0}],[]),v=(0,a.useMemo)(()=>c.some(e=>!e.check_out_time),[c]),b=(0,a.useMemo)(()=>{const e=(new Date).toISOString().split("T")[0],t=c.filter(t=>t.date===e);return t.reduce((e,t)=>e+(t.duration_hours||0),0)},[c]);return(0,er.jsxs)("div",{className:"space-y-6",children:[(0,er.jsx)("div",{className:"flex items-center justify-between bg-white p-4 rounded-xl shadow-sm border border-gray-100",children:(0,er.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,er.jsx)(om,{size:20,className:"text-gray-500"}),(0,er.jsxs)("select",{value:o,onChange:e=>l(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",children:[(0,er.jsx)("option",{value:"",children:"Select Employee"}),s.map(e=>(0,er.jsx)("option",{value:e.id,children:e.name},e.id))]})]})}),f?(0,er.jsx)("div",{className:"text-center py-12",children:(0,er.jsx)("p",{className:"text-gray-500",children:"Loading employee data..."})}):(0,er.jsxs)(er.Fragment,{children:[(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,er.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[(0,er.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-4",children:"Time record"}),(0,er.jsxs)("div",{className:"flex flex-col items-center justify-center py-4",children:[(0,er.jsx)("div",{className:"w-32 h-32 rounded-full border-4 border-gray-100 flex items-center justify-center bg-gray-50 mb-4",children:(0,er.jsxs)("div",{className:"text-center",children:[(0,er.jsx)("p",{className:"text-xs text-gray-400",children:v?"Clocked in":"Clocked out"}),(0,er.jsx)("p",{className:"text-lg font-bold text-gray-700",children:v?"".concat(b.toFixed(1),"h"):"N/A"})]})}),(0,er.jsxs)("div",{className:"w-full space-y-3",children:[(0,er.jsxs)("div",{className:"flex justify-between items-center bg-gray-50 p-3 rounded-lg",children:[(0,er.jsx)("span",{className:"text-sm text-gray-600",children:"Location"}),(0,er.jsx)("span",{className:"text-sm font-medium",children:"Office"})]}),(0,er.jsx)("button",{className:"w-full bg-gray-100 text-gray-400 py-2 rounded-lg cursor-not-allowed",children:"Clock In"})]})]})]}),(0,er.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[(0,er.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,er.jsx)("h3",{className:"text-sm font-semibold text-gray-700",children:"Attendance"}),(0,er.jsx)("span",{className:"text-xs text-gray-500",children:r.toLocaleDateString("en-US",{month:"2-digit",year:"numeric"})})]}),(0,er.jsx)(xte,{value:e,onChange:t,className:"border-none w-full text-xs",tileClassName:e=>{let{date:t,view:r}=e;if("month"===r){const e=t.toISOString().split("T")[0],r=c.some(t=>t.date===e&&t.duration_hours>=4);if(r)return"bg-green-100 text-green-800 font-bold rounded-full"}return null},formatShortWeekday:(e,t)=>["S","M","T","W","T","F","S"][t.getDay()]})]}),(0,er.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[(0,er.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-4",children:"Total leave balance"}),(0,er.jsxs)("div",{className:"flex flex-col items-center justify-center h-48",children:[(0,er.jsxs)("div",{className:"relative w-32 h-32",children:[(0,er.jsxs)("svg",{viewBox:"0 0 36 36",className:"w-full h-full transform -rotate-90",children:[(0,er.jsx)("path",{className:"text-gray-200",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor",strokeWidth:"3"}),(0,er.jsx)("path",{className:"text-red-500",strokeDasharray:"".concat(x/20*100,", 100"),d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor",strokeWidth:"3"})]}),(0,er.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,er.jsx)("span",{className:"text-3xl font-bold",children:x})})]}),(0,er.jsx)("button",{className:"mt-4 text-orange-500 text-sm hover:underline",children:"See more"})]})]}),(0,er.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[(0,er.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,er.jsx)("h3",{className:"text-sm font-semibold text-gray-700",children:"Timesheet"})}),(0,er.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,er.jsx)("button",{className:"text-gray-400 hover:text-gray-600",children:(0,er.jsx)(vZ,{size:20})}),(0,er.jsx)("span",{className:"text-sm font-medium",children:"Tue, Nov 26"}),(0,er.jsx)("button",{className:"text-gray-400 hover:text-gray-600",children:(0,er.jsx)(Yq,{size:20})})]}),(0,er.jsx)("div",{className:"space-y-2 text-xs text-gray-500",children:["8:00 AM","9:00 AM","10:00 AM","11:00 AM","12:00 PM","1:00 PM","2:00 PM","3:00 PM","4:00 PM","5:00 PM"].map((e,t)=>(0,er.jsx)("div",{className:"py-1 border-b border-gray-100",children:e},t))})]})]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,er.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[(0,er.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-4",children:"List of holidays"}),(0,er.jsx)("div",{className:"space-y-4",children:[{date:"DEC 25",name:"Christmas"},{date:"JAN 01",name:"New Year"},{date:"JAN 26",name:"Republic Day"}].map((e,t)=>(0,er.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,er.jsxs)("div",{className:"text-center",children:[(0,er.jsx)("p",{className:"text-xs text-gray-500",children:e.date.split(" ")[0]}),(0,er.jsx)("p",{className:"text-2xl font-bold text-orange-500",children:e.date.split(" ")[1]})]}),(0,er.jsxs)("div",{className:"flex-1",children:[(0,er.jsx)("p",{className:"text-xs text-gray-500",children:"Thu"}),(0,er.jsx)("p",{className:"text-sm font-medium",children:e.name})]})]},t))})]}),(0,er.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[(0,er.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-4",children:"Tasks Completed by Employee"}),(0,er.jsx)("div",{className:"space-y-4",children:m.length>0?m.map(e=>(0,er.jsxs)("div",{className:"flex items-center justify-between",children:[(0,er.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,er.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm font-medium",children:e.type}),(0,er.jsx)("p",{className:"text-xs text-gray-500",children:e.location})]})]}),(0,er.jsx)("span",{className:"text-xs px-2 py-1 bg-green-100 text-green-700 rounded",children:e.status})]},e.id)):(0,er.jsx)("p",{className:"text-sm text-gray-400 text-center py-4",children:"No completed tasks yet"})})]}),(0,er.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[(0,er.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-4",children:"Time off activities"}),(0,er.jsx)(sp,{width:"100%",height:200,children:(0,er.jsxs)(lU,{data:y,children:[(0,er.jsx)(BI,{dataKey:"month",tick:{fontSize:10}}),(0,er.jsx)(YI,{tick:{fontSize:10}}),(0,er.jsx)(CR,{}),(0,er.jsx)(sq,{dataKey:"days",radius:[4,4,0,0],children:y.map((e,t)=>(0,er.jsx)(kB,{fill:e.days>5?"#3b82f6":e.days>2?"#10b981":"#6b7280"},"cell-".concat(t)))})]})})]})]})]})]})},vte=()=>{const[e,t]=(0,a.useState)([]),[r,n]=(0,a.useState)(""),[s,i]=(0,a.useState)(""),[o,l]=(0,a.useState)(""),[c,d]=(0,a.useState)(null),[u,h]=(0,a.useState)(!1),[m,p]=(0,a.useState)("");(0,a.useMemo)(()=>Ta(),[]);(0,a.useEffect)(()=>{(async()=>{try{const[e,r]=await Promise.all([Ia.get("/users/"),Ia.get("/employees")]),n=e.data||[],a=r.data||[],s=new Map;a.forEach(e=>{e.user_id&&s.set(e.user_id,e)});const i=n.map(e=>{var t,r,n,a;return{id:e.id,name:e.name,email:e.email,role:(null===(t=e.role)||void 0===t?void 0:t.name)||"Unknown",phone:e.phone,is_active:e.is_active,salary:(null===(r=s.get(e.id))||void 0===r?void 0:r.salary)||null,join_date:(null===(n=s.get(e.id))||void 0===n?void 0:n.join_date)||null,image_url:(null===(a=s.get(e.id))||void 0===a?void 0:a.image_url)||null,has_employee_record:s.has(e.id)}});t(i)}catch(e){console.error("Failed to fetch users:",e)}})()},[]);return(0,er.jsxs)("div",{className:"space-y-6",children:[(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end bg-gray-50 p-4 rounded-lg",children:[(0,er.jsxs)("div",{className:"md:col-span-2",children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select User"}),(0,er.jsxs)("select",{value:r,onChange:e=>n(e.target.value),className:"w-full p-2 border rounded-md",children:[(0,er.jsx)("option",{value:"",children:"-- Select a User --"}),e.map(e=>(0,er.jsxs)("option",{value:e.id,children:[e.name," (",e.role,") ",e.has_employee_record?"":"(Admin)"]},e.id))]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From"}),(0,er.jsx)("input",{type:"date",value:s,onChange:e=>i(e.target.value),className:"w-full p-2 border rounded-md"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"To"}),(0,er.jsx)("input",{type:"date",value:o,onChange:e=>l(e.target.value),className:"w-full p-2 border rounded-md"})]})]}),(0,er.jsx)("button",{onClick:async()=>{if(r){h(!0),p(""),d(null);try{const e={user_id:r};s&&""!==s.trim()&&(e.from_date=s),o&&""!==o.trim()&&(e.to_date=o);const t=await Ia.get("/reports/user-history",{params:e});d(t.data)}catch(n){var e,t;p((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"An error occurred.")}finally{h(!1)}}},disabled:u||!r,className:"w-full bg-indigo-600 text-white px-6 py-2 rounded-lg font-semibold hover:bg-indigo-700 disabled:bg-gray-400",children:u?"Fetching...":"Get Activity Report"}),m&&(0,er.jsx)("p",{className:"text-red-500",children:m}),c&&(0,er.jsxs)("div",{className:"mt-6",children:[(0,er.jsxs)("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:["Activity for ",c.user_name]}),(0,er.jsx)("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto pr-2",children:c.activities.length>0?c.activities.map((e,t)=>(0,er.jsxs)("div",{className:"p-3 border rounded-lg bg-white shadow-sm",children:[(0,er.jsx)("p",{className:"text-xs text-gray-500",children:new Date(e.activity_date).toLocaleString()}),(0,er.jsx)("h4",{className:"font-bold",children:e.type}),(0,er.jsx)("p",{className:"text-sm",children:e.description}),null!=e.amount&&(0,er.jsxs)("span",{className:"text-sm font-semibold text-green-600",children:["Amount: ",ym(e.amount)]})]},t)):(0,er.jsx)("p",{children:"No activities found."})})]})]})},bte=()=>{const[e,t]=(0,a.useState)([]),[r,n]=(0,a.useState)([]),[s,i]=(0,a.useState)(""),[o,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)({employee_id:"",from_date:"",to_date:"",reason:"",leave_type:"Paid"});(0,a.useEffect)(()=>{Ia.get("/employees").then(e=>n(e.data))},[]),(0,a.useEffect)(()=>{s?(d(e=>Be(Be({},e),{},{employee_id:s})),Ia.get("/employees/leave/".concat(s)).then(e=>t(e.data)).catch(e=>console.error("Failed to fetch leaves",e))):t([])},[s]);const u=(r,n)=>{Ia.put("/employees/leave/".concat(r,"/status/").concat(n)).then(n=>{t(e.map(e=>e.id===r?n.data:e))})},h=e=>{d(Be(Be({},c),{},{[e.target.name]:e.target.value}))};return(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,er.jsx)("button",{onClick:()=>l(!o),className:"font-semibold text-indigo-600",children:o?"\u25bc Hide Form":"\u25b6 Create Leave Entry"}),o&&(0,er.jsxs)(Fh.form,{onSubmit:async r=>{r.preventDefault();try{const r=await Ia.post("/employees/leave",c);r.data.employee_id===parseInt(s)&&t([r.data,...e]),d({employee_id:"",from_date:"",to_date:"",reason:"",leave_type:"Paid"}),l(!1)}catch(n){console.error("Failed to create leave",n),alert("Failed to create leave request.")}},initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mt-4 space-y-3",children:[(0,er.jsxs)("select",{name:"employee_id",value:c.employee_id,onChange:h,className:"w-full p-2 border rounded-md",required:!0,children:[(0,er.jsx)("option",{value:"",children:"-- Select Employee --"}),r.map(e=>(0,er.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,er.jsxs)("select",{name:"leave_type",value:c.leave_type,onChange:h,className:"w-full p-2 border rounded-md",required:!0,children:[(0,er.jsx)("option",{value:"Paid",children:"Paid Leave"}),(0,er.jsx)("option",{value:"Sick",children:"Sick Leave"}),(0,er.jsx)("option",{value:"Unpaid",children:"Unpaid Leave"})]}),(0,er.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,er.jsx)("input",{type:"date",name:"from_date",value:c.from_date,onChange:h,className:"w-full p-2 border rounded-md",required:!0}),(0,er.jsx)("input",{type:"date",name:"to_date",value:c.to_date,onChange:h,className:"w-full p-2 border rounded-md",required:!0})]}),(0,er.jsx)("input",{type:"text",name:"reason",placeholder:"Reason for leave",value:c.reason,onChange:h,className:"w-full p-2 border rounded-md",required:!0}),(0,er.jsx)("button",{type:"submit",className:"w-full bg-green-600 text-white px-4 py-2 rounded-md",children:"Submit Leave"})]})]}),(0,er.jsx)("h3",{className:"text-lg font-semibold pt-4 border-t",children:"View Existing Leaves"}),(0,er.jsxs)("select",{value:s,onChange:e=>i(e.target.value),className:"w-full p-2 border rounded-md",children:[(0,er.jsx)("option",{value:"",children:"Select Employee to view leaves"}),r.map(e=>(0,er.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,er.jsxs)("div",{className:"overflow-x-auto max-h-96",children:[s&&0===e.length&&(0,er.jsx)("p",{className:"text-center text-gray-500 py-4",children:"No leave records found for this employee."}),(0,er.jsxs)("table",{className:"min-w-full bg-white",children:[(0,er.jsx)("thead",{className:"bg-gray-100",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"py-2 px-4",children:"From"}),(0,er.jsx)("th",{className:"py-2 px-4",children:"To"}),(0,er.jsx)("th",{className:"py-2 px-4",children:"Reason"}),(0,er.jsx)("th",{className:"py-2 px-4",children:"Type"}),(0,er.jsx)("th",{className:"py-2 px-4",children:"Status"}),(0,er.jsx)("th",{className:"py-2 px-4",children:"Actions"})]})}),(0,er.jsx)("tbody",{children:e.length>0&&e.map(e=>(0,er.jsxs)("tr",{className:"border-b",children:[(0,er.jsx)("td",{className:"py-2 px-4",children:e.from_date}),(0,er.jsx)("td",{className:"py-2 px-4",children:e.to_date}),(0,er.jsx)("td",{className:"py-2 px-4",children:e.reason}),(0,er.jsx)("td",{className:"py-2 px-4",children:e.leave_type}),(0,er.jsx)("td",{className:"py-2 px-4",children:e.status}),(0,er.jsx)("td",{className:"py-2 px-4 space-x-2",children:"pending"===e.status&&(0,er.jsxs)(er.Fragment,{children:[(0,er.jsx)("button",{onClick:()=>u(e.id,"approved"),className:"text-green-600",children:"Approve"}),(0,er.jsx)("button",{onClick:()=>u(e.id,"rejected"),className:"text-red-600",children:"Reject"})]})})]},e.id))})]})]})]})},jte=()=>{const[e,t]=(0,a.useState)([]),[r,n]=(0,a.useState)(""),[s,i]=(0,a.useState)([]),[o,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)({text:"",type:""}),[u,h]=(0,a.useState)({type:null,text:""}),m=(e,t)=>{h({type:e,text:t})},[p,f]=(0,a.useState)("Office"),[g,x]=(0,a.useState)(null);(0,a.useEffect)(()=>{Ia.get("/employees").then(e=>t(e.data))},[]),(0,a.useEffect)(()=>{r?(l(!0),Ia.get("/attendance/work-logs/".concat(r)).then(e=>{i(e.data||[]),e.data&&0!==e.data.length||console.log("No work logs found for this employee")}).catch(e=>{var t,r;console.error("Failed to fetch data",e);const n=null===(t=e.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail;m("error","string"===typeof n?n:"Failed to fetch employee records"),i([])}).finally(()=>l(!1))):i([])},[r]);const y=(e,t)=>{m(t,e)},v=(0,a.useMemo)(()=>{const e=s.reduce((e,t)=>{const r=t.date;e[r]||(e[r]={totalHours:0,logs:[],completedLogs:[],openLogs:[]});const n=t.duration_hours||0;return e[r].totalHours+=n,e[r].logs.push(t),t.check_out_time&&n>0?e[r].completedLogs.push(t):t.check_out_time||e[r].openLogs.push(t),e},{});return Object.entries(e).map(e=>{let[t,r]=e;const n=r.totalHours;let a="Absent",s="";n>=8?(a="Present",s="Full Day Present (8+ hours)"):n>=4&&n<8?(a="Half Day",s="Half Day (4-8 hours)"):n>0&&n<4?(a="Partial",s="Partial Day (".concat(n.toFixed(2)," hours)")):(a="Absent",s="No attendance recorded");const i=r.completedLogs.reduce((e,t)=>e+(t.duration_hours||0),0),o=r.openLogs.length,l=r.completedLogs.length;return{date:t,totalHours:n,status:a,statusDescription:s,logs:r.logs,completedLogs:r.completedLogs,openLogs:r.openLogs,completedHours:i,completedLogsCount:l,openLogsCount:o}}).sort((e,t)=>new Date(t.date)-new Date(e.date))},[s]);return(0,er.jsxs)("div",{className:"space-y-6",children:[(0,er.jsx)(e$,{message:u,onClose:()=>{h({type:null,text:""})},autoDismiss:!0,duration:5e3}),(0,er.jsxs)("select",{value:r,onChange:e=>n(e.target.value),className:"w-full p-2 border rounded-md",children:[(0,er.jsx)("option",{value:"",children:"-- Select an Employee --"}),e.map(e=>(0,er.jsx)("option",{value:e.id,children:e.name},e.id))]}),r&&(0,er.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,er.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg space-y-4",children:[(0,er.jsx)("h3",{className:"text-lg font-semibold",children:"Live Attendance"}),(()=>{const e=s.some(e=>null===e.check_out_time||void 0===e.check_out_time);return(0,er.jsxs)("div",{className:"p-2 rounded-md text-center text-sm font-semibold ".concat(e?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:["Status: ",e?"\ud83d\udfe2 Clocked In":"\u26aa Not Clocked In"]})})(),(0,er.jsxs)("div",{className:"space-y-2",children:[(0,er.jsx)("label",{htmlFor:"location-select",className:"block text-sm font-medium text-gray-700",children:"Location"}),(0,er.jsxs)("select",{id:"location-select",value:p,onChange:e=>f(e.target.value),className:"w-full p-2 border rounded-md",children:[(0,er.jsx)("option",{children:"Office"}),(0,er.jsx)("option",{children:"Remote"}),(0,er.jsx)("option",{children:"On-Site"})]})]}),(0,er.jsxs)("div",{className:"flex space-x-2",children:[(0,er.jsx)("button",{onClick:async()=>{if(!r)return y("Please select an employee.","error");try{const e=await Ia.post("/attendance/clock-in",{employee_id:r,location:p});i([e.data,...s]),y("Clocked in successfully.","success")}catch(n){var e,t;const r=null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail;y("string"===typeof r?r:"Failed to clock in.","error")}},className:"flex-1 bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700",children:"Clock In"}),(0,er.jsx)("button",{onClick:async()=>{if(!r)return y("Please select an employee.","error");const e=s.some(e=>null===e.check_out_time||void 0===e.check_out_time);if(!e)return y("Please clock in first before clocking out.","error");try{const e=await Ia.post("/attendance/clock-out",{employee_id:r});i(s.map(t=>t.id===e.data.id?e.data:t).sort((e,t)=>new Date(t.date)-new Date(e.date)||t.id-e.id)),y("Clocked out successfully.","success")}catch(a){var t,n;const e=null===(t=a.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.detail;y("string"===typeof e?e:"Failed to clock out.","error")}},className:"flex-1 bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700",children:"Clock Out"})]})]}),(0,er.jsxs)("div",{className:"bg-white p-4 rounded-lg space-y-4 lg:col-span-2",children:[(0,er.jsxs)("div",{className:"flex items-center justify-between",children:[(0,er.jsx)("h3",{className:"text-lg font-semibold",children:"Daily Attendance Summary"}),!o&&s.length>0&&(0,er.jsxs)("div",{className:"text-xs text-gray-500",children:[(0,er.jsx)("span",{className:"font-semibold",children:"Total Records:"})," ",s.length]})]}),o&&(0,er.jsx)("p",{className:"text-center text-gray-500",children:"Loading attendance records..."}),!o&&0===s.length&&(0,er.jsxs)("div",{className:"text-center py-8 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[(0,er.jsx)("p",{className:"text-gray-600 font-medium",children:"No attendance records found for this employee."}),(0,er.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Use the Clock In button above to create attendance records."})]}),!o&&s.length>0&&(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:(()=>{const e=v.length,t=v.filter(e=>"Present"===e.status).length,r=v.filter(e=>"Half Day"===e.status).length,n=v.reduce((e,t)=>e+t.totalHours,0);return(0,er.jsxs)(er.Fragment,{children:[(0,er.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-200",children:[(0,er.jsx)("p",{className:"text-xs text-blue-600 font-medium",children:"Total Days"}),(0,er.jsx)("p",{className:"text-lg font-bold text-blue-800",children:e})]}),(0,er.jsxs)("div",{className:"bg-green-50 p-3 rounded-lg border border-green-200",children:[(0,er.jsx)("p",{className:"text-xs text-green-600 font-medium",children:"Present Days"}),(0,er.jsx)("p",{className:"text-lg font-bold text-green-800",children:t})]}),(0,er.jsxs)("div",{className:"bg-yellow-50 p-3 rounded-lg border border-yellow-200",children:[(0,er.jsx)("p",{className:"text-xs text-yellow-600 font-medium",children:"Half Days"}),(0,er.jsx)("p",{className:"text-lg font-bold text-yellow-800",children:r})]}),(0,er.jsxs)("div",{className:"bg-purple-50 p-3 rounded-lg border border-purple-200",children:[(0,er.jsx)("p",{className:"text-xs text-purple-600 font-medium",children:"Total Hours"}),(0,er.jsx)("p",{className:"text-lg font-bold text-purple-800",children:n.toFixed(2)})]})]})})()}),(0,er.jsx)("div",{className:"max-h-96 overflow-y-auto border border-gray-200 rounded-lg",children:(0,er.jsxs)("table",{className:"min-w-full bg-white text-sm",children:[(0,er.jsx)("thead",{className:"bg-gray-100 sticky top-0 z-10",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"py-3 px-4 text-left font-semibold text-gray-700 border-b",children:"Date"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left font-semibold text-gray-700 border-b",children:"Total Hours"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left font-semibold text-gray-700 border-b",children:"Status"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left font-semibold text-gray-700 border-b",children:"Sessions"}),(0,er.jsx)("th",{className:"py-3 px-4 text-left font-semibold text-gray-700 border-b",children:"Details"})]})}),(0,er.jsx)("tbody",{children:v.map(e=>{return(0,er.jsxs)(a.Fragment,{children:[(0,er.jsxs)("tr",{className:"border-b hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>x(g===e.date?null:e.date),children:[(0,er.jsx)("td",{className:"py-3 px-4 font-medium text-gray-800",children:y$(e.date,{weekday:"short",year:"numeric",month:"short",day:"numeric"})}),(0,er.jsx)("td",{className:"py-3 px-4",children:(0,er.jsxs)("div",{className:"flex flex-col",children:[(0,er.jsxs)("span",{className:"font-semibold text-gray-900",children:[e.totalHours.toFixed(2)," hrs"]}),e.completedHours>0&&e.openLogsCount>0&&(0,er.jsxs)("span",{className:"text-xs text-gray-500",children:[e.completedHours.toFixed(2)," completed"]})]})}),(0,er.jsx)("td",{className:"py-3 px-4",children:(0,er.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,er.jsx)("span",{className:"px-3 py-1 rounded-md text-xs font-semibold border ".concat((t=e.status,"Present"===t?"bg-green-100 text-green-800 border-green-300":"Half Day"===t?"bg-yellow-100 text-yellow-800 border-yellow-300":"Partial"===t?"bg-orange-100 text-orange-800 border-orange-300":"bg-red-100 text-red-800 border-red-300")),children:e.status}),(0,er.jsx)("span",{className:"text-xs text-gray-500",children:e.statusDescription})]})}),(0,er.jsx)("td",{className:"py-3 px-4",children:(0,er.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,er.jsxs)("span",{className:"text-xs",children:[(0,er.jsx)("span",{className:"font-semibold text-green-600",children:e.completedLogsCount})," completed"]}),e.openLogsCount>0&&(0,er.jsxs)("span",{className:"text-xs",children:[(0,er.jsx)("span",{className:"font-semibold text-orange-600",children:e.openLogsCount})," open"]})]})}),(0,er.jsx)("td",{className:"py-3 px-4",children:(0,er.jsx)("button",{className:"text-indigo-600 hover:text-indigo-800 text-sm font-medium",children:g===e.date?"\u25b2 Hide Details":"\u25bc Show Details"})})]}),g===e.date&&(0,er.jsx)("tr",{children:(0,er.jsx)("td",{colSpan:"5",className:"p-0 bg-gray-50",children:(0,er.jsxs)("div",{className:"p-4 border-t-2 border-gray-200",children:[(0,er.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,er.jsxs)("h4",{className:"font-semibold text-gray-800",children:["Detailed Logs for ",e.date]}),(0,er.jsxs)("span",{className:"text-xs text-gray-500",children:["Total: ",e.totalHours.toFixed(2)," hours | Completed: ",e.completedHours.toFixed(2)," hours",e.openLogsCount>0&&" | Open: ".concat(e.openLogsCount," session(s)")]})]}),(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full bg-white text-xs border border-gray-200 rounded-lg",children:[(0,er.jsx)("thead",{className:"bg-gray-100",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"py-2 px-3 text-left font-semibold text-gray-700 border-b",children:"Check-in Time"}),(0,er.jsx)("th",{className:"py-2 px-3 text-left font-semibold text-gray-700 border-b",children:"Check-out Time"}),(0,er.jsx)("th",{className:"py-2 px-3 text-left font-semibold text-gray-700 border-b",children:"Location"}),(0,er.jsx)("th",{className:"py-2 px-3 text-left font-semibold text-gray-700 border-b",children:"Duration"}),(0,er.jsx)("th",{className:"py-2 px-3 text-left font-semibold text-gray-700 border-b",children:"Status"})]})}),(0,er.jsx)("tbody",{children:e.logs.length>0?e.logs.map((e,t)=>{const r=!e.check_out_time,n=e.duration_hours||0;return(0,er.jsxs)("tr",{className:"border-b last:border-b-0 ".concat(r?"bg-orange-50":""),children:[(0,er.jsx)("td",{className:"py-2 px-3 font-medium",children:e.check_in_time||"N/A"}),(0,er.jsx)("td",{className:"py-2 px-3",children:e.check_out_time||(0,er.jsx)("span",{className:"text-orange-600 font-medium",children:"In Progress..."})}),(0,er.jsx)("td",{className:"py-2 px-3",children:(0,er.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:e.location||"N/A"})}),(0,er.jsx)("td",{className:"py-2 px-3",children:n>0?(0,er.jsxs)("span",{className:"font-semibold",children:[n.toFixed(2)," hrs"]}):(0,er.jsx)("span",{className:"text-gray-400",children:"-"})}),(0,er.jsx)("td",{className:"py-2 px-3",children:r?(0,er.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-orange-100 text-orange-800",children:"Open"}):(0,er.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:"Completed"})})]},t)}):(0,er.jsx)("tr",{children:(0,er.jsx)("td",{colSpan:"5",className:"py-4 text-center text-gray-500",children:"No logs available for this date"})})})]})})]})})})]},e.date);var t})})]})})]})]})]})]})},wte=()=>{const[e,t]=(0,a.useState)([]),[r,n]=(0,a.useState)(""),[s,i]=(0,a.useState)(null),[o,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)((new Date).toISOString().slice(0,7));(0,a.useEffect)(()=>{Ia.get("/employees").then(e=>t(e.data))},[]),(0,a.useEffect)(()=>{r&&u()},[r,c]);const u=async()=>{if(!r)return;l(!0);const[e,t]=c.split("-"),n=parseInt(e,10),a=parseInt(t,10);try{const e=await Ia.get("/attendance/monthly-report/".concat(r),{params:{year:n,month:a}});i(e.data)}catch(d){var s,o;console.error("Failed to fetch monthly report",d);const e=null===(s=d.response)||void 0===s||null===(o=s.data)||void 0===o?void 0:o.detail,t="string"===typeof e?e:"Failed to load monthly report";console.error(t),i(null)}finally{l(!1)}},h=e=>{let{title:t,value:r,colorClass:n}=e;return(0,er.jsxs)("div",{className:"p-4 rounded-lg shadow ".concat(n),children:[(0,er.jsx)("p",{className:"text-sm font-medium",children:t}),(0,er.jsx)("p",{className:"text-2xl font-bold",children:r})]})};return(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 bg-gray-50 p-4 rounded-lg",children:[(0,er.jsxs)("select",{value:r,onChange:e=>n(e.target.value),className:"w-full p-2 border rounded-md",children:[(0,er.jsx)("option",{value:"",children:"-- Select Employee --"}),e.map(e=>(0,er.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,er.jsx)("input",{type:"month",value:c,onChange:e=>d(e.target.value),className:"w-full p-2 border rounded-md"})]}),o&&(0,er.jsx)("p",{children:"Loading report..."}),s&&!o&&(0,er.jsxs)(Fh.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[(0,er.jsxs)("h3",{className:"text-xl font-bold",children:["Monthly Report for ",s.year&&s.month?new Date(s.year,s.month-1).toLocaleString("default",{month:"long",year:"numeric"}):c]}),(0,er.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,er.jsx)(h,{title:"Total Days",value:s.total_days||0,colorClass:"bg-blue-100 text-blue-800"}),(0,er.jsx)(h,{title:"Present Days",value:s.present_days||0,colorClass:"bg-green-100 text-green-800"}),(0,er.jsx)(h,{title:"Paid Leaves",value:s.paid_leaves_taken||0,colorClass:"bg-yellow-100 text-yellow-800"}),(0,er.jsx)(h,{title:"Unpaid/Absent",value:s.unpaid_leaves||0,colorClass:"bg-red-100 text-red-800"})]}),(0,er.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,er.jsx)("h4",{className:"font-semibold mb-2",children:"Annual Leave Balance"}),(0,er.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"font-medium",children:"Paid Leave"}),(0,er.jsxs)("p",{children:["Balance: ",(0,er.jsx)("span",{className:"font-bold",children:s.paid_leave_balance||0})," / ",s.total_paid_leaves_year||0]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"font-medium",children:"Sick Leave"}),(0,er.jsxs)("p",{children:["Balance: ",(0,er.jsx)("span",{className:"font-bold",children:s.sick_leave_balance||0})," / ",s.total_sick_leaves_year||0]})]})]})]}),(0,er.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,er.jsx)("h4",{className:"font-semibold mb-2",children:"Salary Calculation for the Month"}),(0,er.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"font-medium text-gray-600",children:"Base Salary"}),(0,er.jsx)("p",{className:"font-bold text-lg",children:ym(s.base_salary||0)})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"font-medium text-red-600",children:"Deductions (Unpaid)"}),(0,er.jsxs)("p",{className:"font-bold text-lg text-red-500",children:["- ",ym(s.deductions||0)]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"font-medium text-green-600",children:"Net Salary"}),(0,er.jsx)("p",{className:"font-bold text-xl text-green-700",children:ym(s.net_salary||0)})]})]})]})]})]})},Nte=()=>{const[e,t]=(0,a.useState)(null),[r,n]=(0,a.useState)(!0);(0,a.useEffect)(()=>{Ia.get("/employees/status-overview").then(e=>t(e.data)).catch(e=>console.error("Failed to fetch status overview",e)).finally(()=>n(!1))},[]);const s=e=>{let{title:t,employees:r,colorClass:n}=e;return(0,er.jsxs)("div",{className:"p-4 rounded-lg shadow-sm ".concat(n),children:[(0,er.jsxs)("h4",{className:"font-bold text-lg mb-2",children:[t," (",r.length,")"]}),r.length>0?(0,er.jsx)("ul",{className:"space-y-1 text-sm max-h-60 overflow-y-auto",children:r.map(e=>(0,er.jsxs)("li",{className:"flex justify-between items-center p-1.5 rounded hover:bg-white/50",children:[(0,er.jsx)("span",{children:e.name}),(0,er.jsx)("span",{className:"text-xs text-gray-600",children:e.role})]},e.id))}):(0,er.jsx)("p",{className:"text-sm text-gray-500 italic",children:"No employees in this category."})]})};return r?(0,er.jsx)("p",{children:"Loading employee overview..."}):e?(0,er.jsx)(Hh,{children:(0,er.jsxs)(Fh.div,{initial:{opacity:0},animate:{opacity:1},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,er.jsx)(s,{title:"Active Employees",employees:e.active_employees,colorClass:"bg-green-50 text-green-900"}),(0,er.jsx)(s,{title:"On Paid Leave",employees:e.on_paid_leave,colorClass:"bg-blue-50 text-blue-900"}),(0,er.jsx)(s,{title:"On Sick Leave",employees:e.on_sick_leave,colorClass:"bg-yellow-50 text-yellow-900"}),(0,er.jsx)(s,{title:"On Unpaid Leave",employees:e.on_unpaid_leave,colorClass:"bg-orange-50 text-orange-900"}),(0,er.jsx)(s,{title:"Inactive Employees",employees:e.inactive_employees,colorClass:"bg-red-50 text-red-900"})]})}):(0,er.jsx)("p",{children:"Could not load data."})},_te=()=>{const[e,t]=(0,a.useState)([]),[r,n]=(0,a.useState)([]),[s,i]=(0,a.useState)({name:"",role:"",salary:"",join_date:"",email:"",phone:"",password:"",image:null}),[o,l]=(0,a.useState)(null),[c,d]=(0,a.useState)(null),[u,h]=(0,a.useState)(""),[m,p]=(0,a.useState)(!0),[f,g]=(0,a.useState)(!1),[x,y]=(0,a.useState)(1),[v,b]=(0,a.useState)(null),j=(0,a.useMemo)(()=>Ta(),[]);(0,a.useEffect)(()=>{N(),_()},[]);const w=()=>({headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),N=async()=>{try{const[e,r]=await Promise.all([Ia.get("/users/?skip=0&limit=20",w()),Ia.get("/employees?skip=0&limit=20",w())]),n=e.data||[],a=r.data||[],s=new Map;a.forEach(e=>{e.user_id&&s.set(e.user_id,e)});const i=n.map(e=>{var t,r,n,a;return{id:e.id,name:e.name,email:e.email,role:(null===(t=e.role)||void 0===t?void 0:t.name)||"Unknown",phone:e.phone,is_active:e.is_active,salary:(null===(r=s.get(e.id))||void 0===r?void 0:r.salary)||null,join_date:(null===(n=s.get(e.id))||void 0===n?void 0:n.join_date)||null,image_url:(null===(a=s.get(e.id))||void 0===a?void 0:a.image_url)||null,has_employee_record:s.has(e.id),trend:Array.from({length:30},()=>Math.floor(1e4*Math.random()))}});t(i),p(i.length>=20),y(1)}catch(e){console.error("Error fetching employees:",e)}},_=async()=>{try{const e=await Ia.get("/roles?limit=1000",w());n(e.data)}catch(e){console.error("Error fetching roles:",e)}},k=e=>{const{name:t,value:r,files:n}=e.target;if("image"===t){const e=n[0];i(Be(Be({},s),{},{image:e})),l(URL.createObjectURL(e))}else i(Be(Be({},s),{},{[t]:r}))},S=()=>{i({name:"",role:"",salary:"",join_date:"",email:"",phone:"",password:"",is_active:!0,image:null}),l(null),d(null)},A=e.filter(e=>!u||e.salary>=parseFloat(u)),C=e.length,E=e.length>0?Math.round(e.reduce((e,t)=>e+t.salary,0)/e.length):0,T=r.map(t=>({name:t.name,count:e.filter(e=>e.role===t.name).length,trend:Array.from({length:30},()=>Math.floor(1e4*Math.random()))})),P=[{label:"Total Employees",value:C,color:"#4f46e5",trend:e.map(e=>e.salary)},{label:"Avg Salary",value:E,color:"#16a34a",trend:e.map(e=>e.salary)},...T.map(e=>({label:e.name,value:e.count,color:"#f59e0b",trend:e.trend}))];return(0,er.jsxs)("div",{className:"space-y-6",children:[(0,er.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:P.map((e,t)=>(0,er.jsxs)("div",{className:"relative bg-white p-5 rounded-xl shadow cursor-pointer hover:shadow-xl transition",onMouseEnter:()=>b(t),onMouseLeave:()=>b(null),children:[(0,er.jsxs)("div",{className:"flex flex-col items-center",children:[(0,er.jsx)("span",{className:"text-gray-500",children:e.label}),(0,er.jsx)("span",{className:"text-2xl font-bold",style:{color:e.color},children:(0,er.jsx)(nW.Ay,{end:e.value,duration:1.5})})]}),v===t&&(0,er.jsx)("div",{className:"absolute inset-0 bg-white bg-opacity-95 flex items-center justify-center rounded-xl p-2 shadow-lg",children:(0,er.jsx)(sp,{width:"100%",height:50,children:(0,er.jsxs)(oq,{data:e.trend.map((e,t)=>({day:t+1,value:e})),children:[(0,er.jsx)(Fq,{type:"monotone",dataKey:"value",stroke:e.color,strokeWidth:2,dot:!1}),(0,er.jsx)(CR,{contentStyle:{fontSize:12},formatter:e=>["\u20b9".concat(e),"Salary"]})]})})})]},t))}),(0,er.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),c){const e=["name","role","salary","join_date","email"];for(const t of e)if(!s[t])return void alert("Please fill in the required field: ".concat(t))}else{const e=["name","role","salary","join_date","email","password"];for(const t of e)if(!s[t])return void alert("Please fill in the required field: ".concat(t))}const t=new FormData;t.append("name",s.name),t.append("role",s.role),t.append("salary",s.salary),t.append("join_date",s.join_date),t.append("email",s.email),c?(s.password&&s.password.trim()&&t.append("password",s.password),void 0!==s.is_active&&t.append("is_active",String(s.is_active))):t.append("password",s.password),s.phone&&t.append("phone",s.phone),s.image&&t.append("image",s.image);try{c?await Ia.put("/employees/".concat(c),t,w()):await Ia.post("/employees",t,w()),N(),S()}catch(a){var r,n;const e=(null===(r=a.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.detail)||"An error occurred while saving the employee.";console.error("Error saving employee:",a.response||a),alert(e)}},className:"bg-white p-6 rounded-2xl shadow mb-8 max-w-4xl mx-auto flex gap-6",encType:"multipart/form-data",children:[(0,er.jsxs)("div",{className:"flex-1",children:[(0,er.jsxs)("h2",{className:"text-xl font-semibold mb-4",children:[c?"Edit":"Create"," Employee"]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,er.jsxs)("label",{className:"text-sm text-gray-600 mb-1",children:["Name ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("input",{name:"name",value:s.name,onChange:k,placeholder:"Name",className:"border px-3 py-2 rounded w-full",required:!0}),(0,er.jsxs)("label",{className:"text-sm text-gray-600 mb-1",children:["Role ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsxs)("select",{name:"role",value:s.role,onChange:k,className:"border px-3 py-2 rounded w-full",required:!0,children:[(0,er.jsx)("option",{value:"",children:"Select Role"}),r.map(e=>(0,er.jsx)("option",{value:e.name,children:e.name},e.id))]}),(0,er.jsxs)("label",{className:"text-sm text-gray-600 mb-1",children:["Salary ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("input",{name:"salary",type:"number",value:s.salary,onChange:k,placeholder:"Salary",className:"border px-3 py-2 rounded w-full",required:!0}),(0,er.jsxs)("label",{className:"text-sm text-gray-600 mb-1",children:["Joining Date ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("input",{type:"date",name:"join_date",value:s.join_date,onChange:k,className:"border px-3 py-2 rounded w-full",required:!0}),(0,er.jsxs)("label",{className:"text-sm text-gray-600 mb-1",children:["Email ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("input",{name:"email",type:"email",value:s.email,onChange:k,placeholder:"Email",className:"border px-3 py-2 rounded w-full",required:!0}),(0,er.jsx)("label",{className:"text-sm text-gray-600 mb-1",children:"Phone"}),(0,er.jsx)("input",{name:"phone",type:"tel",value:s.phone,onChange:k,placeholder:"Phone (optional)",className:"border px-3 py-2 rounded w-full"}),(0,er.jsxs)("label",{className:"text-sm text-gray-600 mb-1",children:["Password ",c?"(Leave blank to keep current)":(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("input",{name:"password",type:"password",value:s.password,onChange:k,placeholder:c?"New password (optional)":"Password",className:"border px-3 py-2 rounded w-full",required:!c}),c&&(0,er.jsxs)(er.Fragment,{children:[(0,er.jsx)("label",{className:"text-sm text-gray-600 mb-1",children:"Status"}),(0,er.jsxs)("div",{className:"flex items-center gap-2",children:[(0,er.jsx)("input",{type:"checkbox",name:"is_active",checked:void 0===s.is_active||s.is_active,onChange:e=>i(Be(Be({},s),{},{is_active:e.target.checked})),className:"w-5 h-5"}),(0,er.jsx)("span",{className:"text-sm",children:s.is_active?"Active":"Inactive"})]})]}),(0,er.jsx)("label",{className:"text-sm text-gray-600 mb-1",children:"Image"}),(0,er.jsx)("input",{type:"file",name:"image",accept:"image/*",onChange:k,className:"w-full"}),(0,er.jsx)("button",{type:"submit",className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700",children:c?"Update":"Create"})]})]}),(0,er.jsx)("div",{className:"flex items-center justify-center w-48 h-48 border rounded",children:o?(0,er.jsx)("img",{src:o,alt:"Preview",className:"w-full h-full object-cover rounded"}):(0,er.jsx)("span",{className:"text-gray-400",children:"Image Preview"})})]}),(0,er.jsxs)("div",{className:"mb-4 flex flex-wrap gap-4 justify-between items-center",children:[(0,er.jsx)("input",{type:"number",placeholder:"Min Salary",value:u,onChange:e=>h(e.target.value),className:"border px-3 py-2 rounded"}),(0,er.jsx)("button",{onClick:()=>{const e=s7.json_to_sheet(A),t=s7.book_new();s7.book_append_sheet(t,e,"Employees"),function(e,t,r){var n=r||{};n.type="file",n.file=t,K8(n),G8(e,n)}(t,"employees.xlsx")},className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Export to Excel"})]}),(0,er.jsx)("div",{className:"bg-white p-4 sm:p-6 rounded-xl sm:rounded-2xl shadow overflow-x-auto",children:(0,er.jsxs)("table",{className:"w-full text-sm border-collapse border border-gray-200",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"bg-gray-100",children:[(0,er.jsx)("th",{className:"p-2 sm:p-3 border text-xs sm:text-sm",children:"#"}),(0,er.jsx)("th",{className:"p-2 sm:p-3 border text-xs sm:text-sm",children:"Image"}),(0,er.jsx)("th",{className:"p-2 sm:p-3 border text-xs sm:text-sm",children:"Name"}),(0,er.jsx)("th",{className:"p-2 sm:p-3 border text-xs sm:text-sm",children:"Role"}),(0,er.jsx)("th",{className:"p-2 sm:p-3 border text-xs sm:text-sm",children:"Salary"}),(0,er.jsx)("th",{className:"p-2 sm:p-3 border text-xs sm:text-sm",children:"Join Date"}),(0,er.jsx)("th",{className:"p-2 sm:p-3 border text-xs sm:text-sm",children:"Status"}),(0,er.jsx)("th",{className:"p-2 sm:p-3 border text-xs sm:text-sm",children:"Actions"})]})}),(0,er.jsxs)("tbody",{children:[A.map((e,t)=>(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsx)("td",{className:"p-1 sm:p-2 border text-center text-xs sm:text-sm",children:t+1}),(0,er.jsx)("td",{className:"p-1 sm:p-2 border",children:e.image_url?(0,er.jsx)("img",{src:"".concat(j,"/").concat(e.image_url.startsWith("/")?e.image_url.substring(1):e.image_url),alt:"Profile",className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full object-cover"}):(0,er.jsx)("span",{className:"text-gray-400 text-xs sm:text-sm",children:"No image"})}),(0,er.jsx)("td",{className:"p-1 sm:p-2 border text-xs sm:text-sm",children:(0,er.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center",children:[(0,er.jsx)("span",{className:"truncate",children:e.name}),!e.has_employee_record&&(0,er.jsx)("span",{className:"text-xs bg-blue-100 text-blue-800 px-1 sm:px-2 py-0.5 sm:py-1 rounded mt-1 sm:mt-0 sm:ml-2",children:"Admin"})]})}),(0,er.jsx)("td",{className:"p-1 sm:p-2 border text-xs sm:text-sm",children:e.role}),(0,er.jsx)("td",{className:"p-1 sm:p-2 border text-right text-xs sm:text-sm",children:e.salary?"\u20b9".concat(e.salary):"N/A"}),(0,er.jsx)("td",{className:"p-1 sm:p-2 border text-xs sm:text-sm",children:e.join_date||"N/A"}),(0,er.jsx)("td",{className:"p-1 sm:p-2 border text-xs sm:text-sm",children:e.has_employee_record?(0,er.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat(e.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:e.is_active?"Active":"Inactive"}):(0,er.jsx)("span",{className:"text-gray-500 text-xs",children:"-"})}),(0,er.jsx)("td",{className:"p-1 sm:p-2 border",children:(0,er.jsx)("div",{className:"flex flex-col sm:flex-row gap-1 sm:gap-2",children:e.has_employee_record?(0,er.jsxs)(er.Fragment,{children:[(0,er.jsx)("button",{className:"bg-blue-500 text-white px-1 sm:px-2 py-1 text-xs sm:text-sm rounded",onClick:()=>(e=>{if(d(e.id),i({name:e.name,role:e.role,salary:e.salary,join_date:e.join_date?e.join_date.split("T")[0]:"",email:e.email,phone:e.phone,password:"",is_active:void 0===e.is_active||e.is_active,image:null}),e.image_url){const t=e.image_url.startsWith("/")?e.image_url.substring(1):e.image_url;l("".concat(j,"/").concat(t))}else l(null)})(e),children:"Edit"}),(0,er.jsx)("button",{className:"px-1 sm:px-2 py-1 text-xs sm:text-sm rounded ".concat(e.is_active?"bg-yellow-500":"bg-green-500"," text-white"),onClick:()=>(async e=>{if(window.confirm("Are you sure you want to ".concat(e.is_active?"deactivate":"activate"," this employee?")))try{const t=new FormData;t.append("is_active",String(!e.is_active)),await Ia.put("/employees/".concat(e.id),t,w()),N()}catch(n){var t,r;const e=(null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"An error occurred while updating employee status.";console.error("Error updating employee:",n.response||n),alert(e)}})(e),children:e.is_active?"Deactivate":"Activate"}),(0,er.jsx)("button",{className:"bg-red-500 text-white px-1 sm:px-2 py-1 text-xs sm:text-sm rounded",onClick:()=>(async e=>{window.confirm("Delete this employee?")&&(await Ia.delete("/employees/".concat(e),w()),N())})(e.id),children:"Delete"})]}):(0,er.jsx)("span",{className:"text-gray-500 text-xs sm:text-sm",children:"Admin User"})})})]},e.id)),0===A.length&&(0,er.jsx)("tr",{children:(0,er.jsx)("td",{colSpan:"8",className:"text-center py-4 text-gray-500 text-sm sm:text-base",children:"No employees found."})})]}),m&&A.length>0&&(0,er.jsx)("tfoot",{children:(0,er.jsx)("tr",{children:(0,er.jsx)("td",{colSpan:"8",className:"text-center p-4",children:(0,er.jsx)("button",{onClick:async()=>{if(f||!m)return;const e=x+1;g(!0);try{const r=(await Ia.get("/employees?skip=".concat(20*(e-1),"&limit=20"),w())).data||[],n=r.map(e=>Be(Be({},e),{},{trend:Array.from({length:30},()=>Math.floor(1e4*Math.random()))}));t(e=>[...e,...n]),y(e),p(r.length>=20)}catch(r){console.error("Failed to load more employees:",r)}finally{g(!1)}},disabled:f,className:"bg-indigo-100 text-indigo-700 font-semibold px-6 py-2 rounded-lg hover:bg-indigo-200 transition-colors disabled:bg-gray-200 disabled:text-gray-500",children:f?"Loading...":"Load More"})})})})]})})]})},kte=()=>{const[e,t]=(0,a.useState)("overview"),r=r=>{let{id:n,label:a,icon:s}=r;return(0,er.jsxs)("button",{onClick:()=>t(n),className:"flex items-center gap-2 px-4 py-2.5 text-sm font-medium rounded-lg transition-all ".concat(e===n?"bg-orange-500 text-white shadow-md":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"),children:[s,(0,er.jsx)("span",{children:a})]})};return(0,er.jsx)(xm,{children:(0,er.jsxs)("div",{className:"p-6 space-y-6 bg-gray-50 min-h-screen",children:[(0,er.jsx)("div",{className:"flex items-center justify-between",children:(0,er.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Employee Management"})}),(0,er.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-1 inline-flex flex-wrap gap-1",children:[(0,er.jsx)(r,{id:"overview",label:"Overview",icon:(0,er.jsx)(nJ,{size:18})}),(0,er.jsx)(r,{id:"manage-employees",label:"Directory",icon:(0,er.jsx)(om,{size:18})}),(0,er.jsx)(r,{id:"attendance",label:"Attendance",icon:(0,er.jsx)(VJ,{size:18})}),(0,er.jsx)(r,{id:"leave",label:"Leave",icon:(0,er.jsx)($J,{size:18})}),(0,er.jsx)(r,{id:"monthly-report",label:"Reports",icon:(0,er.jsx)(n$,{size:18})}),(0,er.jsx)(r,{id:"status-overview",label:"Status",icon:(0,er.jsx)(lm,{size:18})}),(0,er.jsx)(r,{id:"report",label:"Activity",icon:(0,er.jsx)(Y$,{size:18})})]}),(0,er.jsx)("div",{children:(()=>{switch(e){case"overview":return(0,er.jsx)(yte,{});case"manage-employees":return(0,er.jsx)(_te,{});case"report":return(0,er.jsx)(vte,{});case"leave":return(0,er.jsx)(bte,{});case"attendance":return(0,er.jsx)(jte,{});case"monthly-report":return(0,er.jsx)(wte,{});case"status-overview":return(0,er.jsx)(Nte,{});default:return null}})()})]})})},Ste=()=>{const[e,t]=(0,a.useState)(new Date),[r,n]=(0,a.useState)(new Date),[s,i]=(0,a.useState)([]),[o,l]=(0,a.useState)(""),[c,d]=(0,a.useState)([]),[u,h]=(0,a.useState)([]),[m,p]=(0,a.useState)([]),[f,g]=(0,a.useState)(!1);(0,a.useEffect)(()=>{Ia.get("/employees").then(e=>{i(e.data||[]),e.data&&e.data.length>0&&l(e.data[0].id)})},[]),(0,a.useEffect)(()=>{o&&(g(!0),Promise.all([Ia.get("/attendance/work-logs/".concat(o)).catch(()=>({data:[]})),Ia.get("/employees/leave/".concat(o)).catch(()=>({data:[]}))]).then(e=>{let[t,r]=e;d(t.data||[]),h(r.data||[]),p([{id:1,type:"Work From Home",dates:"Oct 22",status:"Accepted"},{id:2,type:"PTO",dates:"Oct 21-24",status:"Accepted"},{id:3,type:"Work From Home",dates:"Oct 17",status:"Accepted"}])}).finally(()=>g(!1)))},[o]);const x=(0,a.useMemo)(()=>{const e=u.filter(e=>"approved"===e.status).length;return 20-e},[u]),y=(0,a.useMemo)(()=>[{month:"Jan",days:2},{month:"Feb",days:1},{month:"Mar",days:3},{month:"Apr",days:1},{month:"May",days:2},{month:"Jun",days:4},{month:"Jul",days:3},{month:"Aug",days:2},{month:"Sep",days:5},{month:"Oct",days:8},{month:"Nov",days:3},{month:"Dec",days:0}],[]),v=(0,a.useMemo)(()=>c.some(e=>!e.check_out_time),[c]),b=(0,a.useMemo)(()=>{const e=(new Date).toISOString().split("T")[0],t=c.filter(t=>t.date===e);return t.reduce((e,t)=>e+(t.duration_hours||0),0)},[c]);s.find(e=>e.id===parseInt(o));return(0,er.jsx)(xm,{children:(0,er.jsxs)("div",{className:"p-6 space-y-6 bg-gray-50 min-h-screen",children:[(0,er.jsxs)("div",{className:"flex items-center justify-between",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Time"}),(0,er.jsxs)("div",{className:"flex space-x-6 mt-4 border-b",children:[(0,er.jsx)("button",{className:"pb-2 font-medium text-orange-500 border-b-2 border-orange-500",children:"Overview"}),(0,er.jsx)("button",{className:"pb-2 font-medium text-gray-500 hover:text-gray-700",children:"Timesheet"}),(0,er.jsx)("button",{className:"pb-2 font-medium text-gray-500 hover:text-gray-700",children:"Timeoff"})]})]}),(0,er.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,er.jsx)(om,{size:20,className:"text-gray-500"}),(0,er.jsxs)("select",{value:o,onChange:e=>l(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",children:[(0,er.jsx)("option",{value:"",children:"Select Employee"}),s.map(e=>(0,er.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),f?(0,er.jsx)("div",{className:"text-center py-12",children:(0,er.jsx)("p",{className:"text-gray-500",children:"Loading employee data..."})}):(0,er.jsxs)(er.Fragment,{children:[(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,er.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[(0,er.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-4",children:"Time record"}),(0,er.jsxs)("div",{className:"flex flex-col items-center justify-center py-4",children:[(0,er.jsx)("div",{className:"w-32 h-32 rounded-full border-4 border-gray-100 flex items-center justify-center bg-gray-50 mb-4",children:(0,er.jsxs)("div",{className:"text-center",children:[(0,er.jsx)("p",{className:"text-xs text-gray-400",children:v?"Clocked in":"Clocked out"}),(0,er.jsx)("p",{className:"text-lg font-bold text-gray-700",children:v?"".concat(b.toFixed(1),"h"):"N/A"})]})}),(0,er.jsxs)("div",{className:"w-full space-y-3",children:[(0,er.jsxs)("div",{className:"flex justify-between items-center bg-gray-50 p-3 rounded-lg",children:[(0,er.jsx)("span",{className:"text-sm text-gray-600",children:"Location"}),(0,er.jsx)("span",{className:"text-sm font-medium",children:"Office"})]}),(0,er.jsx)("button",{className:"w-full py-2 rounded-lg font-medium ".concat(v?"bg-red-500 hover:bg-red-600 text-white":"bg-gray-100 text-gray-400 cursor-not-allowed"),disabled:!v,children:v?"Clock Out":"Clock In"})]})]})]}),(0,er.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[(0,er.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,er.jsx)("h3",{className:"text-sm font-semibold text-gray-700",children:"Attendance"}),(0,er.jsx)("span",{className:"text-xs text-gray-500",children:r.toLocaleDateString("en-US",{month:"2-digit",year:"numeric"})})]}),(0,er.jsx)(xte,{value:e,onChange:t,className:"border-none w-full text-xs",tileClassName:e=>{let{date:t,view:r}=e;if("month"===r){const e=t.toISOString().split("T")[0],r=c.some(t=>t.date===e&&t.duration_hours>=4);if(r)return"bg-green-100 text-green-800 font-bold rounded-full"}return null},formatShortWeekday:(e,t)=>["S","M","T","W","T","F","S"][t.getDay()]})]}),(0,er.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[(0,er.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-4",children:"Total leave balance"}),(0,er.jsxs)("div",{className:"flex flex-col items-center justify-center h-48",children:[(0,er.jsxs)("div",{className:"relative w-32 h-32",children:[(0,er.jsxs)("svg",{viewBox:"0 0 36 36",className:"w-full h-full transform -rotate-90",children:[(0,er.jsx)("path",{className:"text-gray-200",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor",strokeWidth:"3"}),(0,er.jsx)("path",{className:"text-red-500",strokeDasharray:"".concat(x/20*100,", 100"),d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor",strokeWidth:"3"})]}),(0,er.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,er.jsx)("span",{className:"text-3xl font-bold",children:x})})]}),(0,er.jsx)("button",{className:"mt-4 text-orange-500 text-sm hover:underline",children:"See more"})]})]}),(0,er.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[(0,er.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,er.jsx)("h3",{className:"text-sm font-semibold text-gray-700",children:"Timesheet"}),(0,er.jsx)("button",{className:"text-gray-400 hover:text-gray-600",children:(0,er.jsx)("svg",{width:"16",height:"16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})})]}),(0,er.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,er.jsx)("button",{className:"text-gray-400 hover:text-gray-600",children:(0,er.jsx)(vZ,{size:20})}),(0,er.jsx)("span",{className:"text-sm font-medium",children:"Tue, Nov 26"}),(0,er.jsx)("button",{className:"text-gray-400 hover:text-gray-600",children:(0,er.jsx)(Yq,{size:20})})]}),(0,er.jsx)("div",{className:"space-y-2 text-xs text-gray-500",children:["8:00 AM","9:00 AM","10:00 AM","11:00 AM","12:00 PM","1:00 PM","2:00 PM","3:00 PM","4:00 PM","5:00 PM"].map((e,t)=>(0,er.jsx)("div",{className:"py-1 border-b border-gray-100",children:e},t))})]})]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,er.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[(0,er.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-4",children:"List of holidays"}),(0,er.jsx)("div",{className:"space-y-4",children:[{date:"DEC 25",name:"Christmas"},{date:"JAN 01",name:"New Year"},{date:"JAN 26",name:"Republic Day"}].map((e,t)=>(0,er.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,er.jsxs)("div",{className:"text-center",children:[(0,er.jsx)("p",{className:"text-xs text-gray-500",children:e.date.split(" ")[0]}),(0,er.jsx)("p",{className:"text-2xl font-bold text-orange-500",children:e.date.split(" ")[1]})]}),(0,er.jsxs)("div",{className:"flex-1",children:[(0,er.jsx)("p",{className:"text-xs text-gray-500",children:"Thu"}),(0,er.jsx)("p",{className:"text-sm font-medium",children:e.name})]})]},t))})]}),(0,er.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[(0,er.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-4",children:"Time off requests"}),(0,er.jsx)("div",{className:"space-y-4",children:m.map(e=>(0,er.jsxs)("div",{className:"flex items-center justify-between",children:[(0,er.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,er.jsx)("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-xs text-gray-500",children:e.dates}),(0,er.jsx)("p",{className:"text-sm font-medium",children:e.type})]})]}),(0,er.jsx)("span",{className:"text-xs px-2 py-1 bg-green-100 text-green-700 rounded",children:e.status})]},e.id))})]}),(0,er.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[(0,er.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-4",children:"Time off activities"}),(0,er.jsx)(sp,{width:"100%",height:200,children:(0,er.jsxs)(lU,{data:y,children:[(0,er.jsx)(BI,{dataKey:"month",tick:{fontSize:10}}),(0,er.jsx)(YI,{tick:{fontSize:10}}),(0,er.jsx)(CR,{}),(0,er.jsx)(sq,{dataKey:"days",radius:[4,4,0,0],children:y.map((e,t)=>(0,er.jsx)(kB,{fill:e.days>5?"#3b82f6":e.days>2?"#10b981":"#6b7280"},"cell-".concat(t)))})]})})]})]})]})]})})},Ate=Xh("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Cte=Xh("ArrowDownCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]),Ete=Xh("ArrowUpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]),Tte=Xh("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]),Pte=Xh("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Ote=Xh("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]),Dte=Xh("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Ite=Xh("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),Lte=e=>{let{locations:t,onLocationClick:r}=e;return(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsx)("div",{className:"md:hidden space-y-4",children:0===t.length?(0,er.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No locations found. Sync rooms or create locations first."}):t.map(e=>(0,er.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm cursor-pointer hover:shadow-md transition-shadow",onClick:()=>r(e.id),children:[(0,er.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,er.jsx)("h3",{className:"font-semibold text-gray-900",children:e.name||"".concat(e.building," - ").concat(e.room_area)}),(0,er.jsx)("span",{className:"text-xs text-gray-500",children:e.location_type})]}),(0,er.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[e.location_code&&(0,er.jsxs)("p",{children:[(0,er.jsx)("span",{className:"font-medium",children:"Code:"})," ",e.location_code]}),(0,er.jsxs)("p",{children:[(0,er.jsx)("span",{className:"font-medium",children:"Total Items:"})," ",e.total_items||0]}),(0,er.jsxs)("p",{children:[(0,er.jsx)("span",{className:"font-medium",children:"Assets:"})," ",e.asset_count||0]}),(0,er.jsxs)("p",{children:[(0,er.jsx)("span",{className:"font-medium",children:"Consumables:"})," ",e.consumable_items_count||0]}),(0,er.jsxs)("p",{children:[(0,er.jsx)("span",{className:"font-medium",children:"Stock Value:"})," ",ym(e.total_stock_value||0)]})]})]},e.id))}),(0,er.jsx)("div",{className:"hidden md:block overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,er.jsx)("thead",{className:"bg-gray-50",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Location"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total Items"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Assets"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Consumables"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Stock Value"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Action"})]})}),(0,er.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===t.length?(0,er.jsx)("tr",{children:(0,er.jsx)("td",{colSpan:"7",className:"px-4 py-8 text-center text-gray-500",children:"No locations found. Sync rooms or create locations first."})}):t.map(e=>(0,er.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>r(e.id),children:[(0,er.jsx)("td",{className:"px-4 py-3",children:(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.name||"".concat(e.building," - ").concat(e.room_area)}),e.location_code&&(0,er.jsx)("p",{className:"text-xs text-gray-500",children:e.location_code})]})}),(0,er.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.location_type}),(0,er.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900 font-medium",children:e.total_items||0}),(0,er.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.asset_count||0}),(0,er.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.consumable_items_count||0}),(0,er.jsx)("td",{className:"px-4 py-3 text-sm font-semibold text-gray-900",children:ym(e.total_stock_value||0)}),(0,er.jsx)("td",{className:"px-4 py-3",children:(0,er.jsxs)("button",{onClick:t=>{t.stopPropagation(),r(e.id)},className:"px-3 py-1 bg-indigo-600 text-white text-sm rounded hover:bg-indigo-700 flex items-center gap-1",children:[(0,er.jsx)(Pte,{className:"w-4 h-4"}),"View Items"]})})]},e.id))})]})})]})},Mte=e=>{let{label:t,value:r,icon:n,color:a,highlight:s}=e;const i={blue:"bg-blue-50 text-blue-600",red:"bg-red-50 text-red-600",green:"bg-green-50 text-green-600",purple:"bg-purple-50 text-purple-600",indigo:"bg-indigo-50 text-indigo-600",teal:"bg-teal-50 text-teal-600",orange:"bg-orange-50 text-orange-600"};return(0,er.jsx)("div",{className:"bg-white rounded-xl shadow-sm border-2 p-3 sm:p-4 ".concat(s?"border-red-300":"border-gray-100"),children:(0,er.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,er.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,er.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 truncate",children:t}),(0,er.jsx)("p",{className:"text-base sm:text-lg md:text-xl lg:text-2xl font-bold mt-1 break-words ".concat(i[a]),children:r})]}),(0,er.jsx)("div",{className:i[a]+" p-2 sm:p-3 rounded-lg flex-shrink-0",children:n})]})})},Rte=e=>{let{items:t,categories:r,onDelete:n,onEdit:a,onViewHistory:s}=e;return(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,er.jsx)("thead",{className:"bg-gray-50",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Category"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Department"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Stock"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Min Level"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Unit Price"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total Value"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,er.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===t.length?(0,er.jsx)("tr",{children:(0,er.jsx)("td",{colSpan:"9",className:"px-4 py-8 text-center text-gray-500",children:"No items found"})}):t.map(e=>(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsx)("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:e.name}),(0,er.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.category_name||"-"}),(0,er.jsx)("td",{className:"px-4 py-3 text-sm",children:e.department?(0,er.jsx)("span",{className:"px-2 py-1 text-xs font-semibold text-indigo-800 bg-indigo-100 rounded-full",children:e.department}):(0,er.jsx)("span",{className:"text-gray-400",children:"-"})}),(0,er.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:(0,er.jsxs)("span",{className:e.is_low_stock?"text-red-600 font-semibold":"",children:[e.current_stock," ",e.unit]})}),(0,er.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.min_stock_level}),(0,er.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:null!=e.unit_price?ym(e.unit_price):"-"}),(0,er.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:null!=e.unit_price?ym(e.current_stock*e.unit_price):"-"}),(0,er.jsx)("td",{className:"px-4 py-3 text-sm",children:e.is_low_stock?(0,er.jsx)("span",{className:"px-2 py-1 text-xs font-semibold text-red-800 bg-red-100 rounded-full",children:"Low Stock"}):(0,er.jsx)("span",{className:"px-2 py-1 text-xs font-semibold text-green-800 bg-green-100 rounded-full",children:"In Stock"})}),(0,er.jsxs)("td",{className:"px-4 py-3 text-sm",children:[(0,er.jsx)("button",{onClick:()=>s&&s(e),className:"text-indigo-600 hover:text-indigo-800 mr-2",title:"View History",children:(0,er.jsx)(uJ,{className:"w-4 h-4"})}),(0,er.jsx)("button",{onClick:()=>a(e),className:"text-blue-600 hover:text-blue-800 mr-2",title:"Edit Item",children:(0,er.jsx)(Xq,{className:"w-4 h-4"})}),(0,er.jsx)("button",{onClick:()=>n(e.id),className:"text-red-600 hover:text-red-800",title:"Delete Item",children:(0,er.jsx)(Qq,{className:"w-4 h-4"})})]})]},e.id))})]})})},Fte=e=>{let{categories:t,onEdit:r,onDelete:n}=e;return(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,er.jsx)("thead",{className:"bg-gray-50",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Created"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,er.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===t.length?(0,er.jsx)("tr",{children:(0,er.jsx)("td",{colSpan:"4",className:"px-4 py-8 text-center text-gray-500",children:"No categories found"})}):t.map(e=>(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsx)("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:e.name}),(0,er.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.description||"-"}),(0,er.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:y$(e.created_at)}),(0,er.jsxs)("td",{className:"px-4 py-3 text-sm",children:[(0,er.jsx)("button",{onClick:()=>r(e),className:"text-blue-600 hover:text-blue-800 mr-2",children:(0,er.jsx)(Xq,{className:"w-4 h-4"})}),(0,er.jsx)("button",{onClick:()=>n(e.id),className:"text-red-600 hover:text-red-800",children:(0,er.jsx)(Qq,{className:"w-4 h-4"})})]})]},e.id))})]})})},Bte=e=>{let{vendors:t,onEdit:r,onView:n}=e;return(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,er.jsx)("thead",{className:"bg-gray-50",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Company"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"GST"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Contact"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),(0,er.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,er.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===t.length?(0,er.jsx)("tr",{children:(0,er.jsx)("td",{colSpan:"6",className:"px-4 py-8 text-center text-gray-500",children:"No vendors found"})}):t.map(e=>(0,er.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>n&&n(e),children:[(0,er.jsx)("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:e.name}),(0,er.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.company_name||"-"}),(0,er.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.gst_number||"-"}),(0,er.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.phone||e.email||"-"}),(0,er.jsx)("td",{className:"px-4 py-3 text-sm",children:e.is_active?(0,er.jsx)("span",{className:"px-2 py-1 text-xs font-semibold text-green-800 bg-green-100 rounded-full",children:"Active"}):(0,er.jsx)("span",{className:"px-2 py-1 text-xs font-semibold text-gray-800 bg-gray-100 rounded-full",children:"Inactive"})}),(0,er.jsx)("td",{className:"px-4 py-3 text-sm text-right",children:(0,er.jsxs)("div",{className:"flex items-center justify-end gap-2",onClick:e=>e.stopPropagation(),children:[(0,er.jsx)("button",{onClick:()=>r&&r(e),className:"p-1 text-blue-600 hover:bg-blue-50 rounded-full transition-colors",title:"Edit Vendor",children:(0,er.jsx)(Xq,{className:"w-4 h-4"})}),(0,er.jsx)("button",{onClick:()=>n&&n(e),className:"p-1 text-gray-600 hover:bg-gray-50 rounded-full transition-colors",title:"View Details",children:(0,er.jsx)(Pte,{className:"w-4 h-4"})})]})})]},e.id))})]})})},zte=e=>{let{purchases:t,onPurchaseClick:r}=e;return(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,er.jsx)("thead",{className:"bg-gray-50",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"PO Number"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Vendor"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Payment"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total"})]})}),(0,er.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===t.length?(0,er.jsx)("tr",{children:(0,er.jsx)("td",{colSpan:"6",className:"px-4 py-8 text-center text-gray-500",children:"No purchases found"})}):t.map(e=>(0,er.jsxs)("tr",{className:"hover:bg-indigo-50 cursor-pointer transition-colors",onClick:()=>r&&r(e),children:[(0,er.jsx)("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:e.purchase_number}),(0,er.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.vendor_name||"-"}),(0,er.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:y$(e.purchase_date)}),(0,er.jsx)("td",{className:"px-4 py-3 text-sm",children:(0,er.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat("received"===e.status?"bg-green-100 text-green-800":"confirmed"===e.status?"bg-blue-100 text-blue-800":"cancelled"===e.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:e.status})}),(0,er.jsx)("td",{className:"px-4 py-3 text-sm",children:(0,er.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat("paid"===e.payment_status?"bg-green-100 text-green-800":"partial"===e.payment_status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:e.payment_status})}),(0,er.jsx)("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:ym(e.total_amount)})]},e.id))})]})})},Ute=e=>{var t;let{form:r,setForm:n,categories:s,vendors:i,units:l,locations:c=[],setShowUnitForm:d,onSubmit:u,onClose:h}=e;const[m,p]=(0,a.useState)([]),f=a.useRef(!1);(0,a.useEffect)(()=>{if(0===c.length&&!f.current){f.current=!0;(async()=>{try{const e=await Ia.get("/inventory/locations");p(e.data||[])}catch(e){console.error("[ItemFormModal] Error fetching locations:",e),p([])}})()}},[]);const g=c.length>0?c:m;console.log("[ItemFormModal] Available locations:",g);const x=s.find(e=>e.id===parseInt(r.category_id)),y=(null===x||void 0===x||null===(t=x.name)||void 0===t?void 0:t.toLowerCase())||"",v=y.includes("restaurant")||y.includes("food"),b=y.includes("linen")||y.includes("hotel"),j=(y.includes("security")||y.includes("office"),y.includes("fire")||y.includes("safety"),y.includes("consumable")||y.includes("guest"),g.length>0?g.map(e=>e.name||"".concat(e.building," - ").concat(e.room_area)):["Cold Storage","Dry Store","Housekeeping Closet","Server Room","Warehouse A","Warehouse B","Main Store","Kitchen Store","Office Store"]),w=v?["Meat","Dairy","Spices","Vegetables","Beverages","Dry Goods","Frozen"]:y.includes("facility")?["Plumbing","Electrical","HVAC","Maintenance","Tools"]:b?["Bedsheets","Towels","Curtains","Pillows","Blankets"]:[];return o.createPortal((0,er.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[10000] p-2 sm:p-4",children:(0,er.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-5xl w-full mx-4 max-h-[95vh] overflow-y-auto",children:[(0,er.jsxs)("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center sticky top-0 bg-white z-10 shadow-sm",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Create Inventory Item"}),(0,er.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Smart form adapts based on category selection"})]}),(0,er.jsx)("button",{onClick:h,className:"text-gray-400 hover:text-gray-600",children:(0,er.jsx)(ZQ,{className:"w-6 h-6"})})]}),(0,er.jsxs)("form",{onSubmit:u,className:"p-6 space-y-6",children:[(0,er.jsxs)("div",{className:"border-b border-gray-200 pb-6",children:[(0,er.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[(0,er.jsx)("span",{className:"bg-indigo-100 text-indigo-600 rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold",children:"1"}),"Basic Information"]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{className:"md:col-span-2",children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Item Name ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("input",{type:"text",value:r.name,onChange:e=>n(Be(Be({},r),{},{name:e.target.value})),placeholder:"e.g., Chicken Breast, LED Bulb 9W, Bath Towel White",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Item Code / SKU"}),(0,er.jsx)("input",{type:"text",value:r.item_code||"",onChange:e=>n(Be(Be({},r),{},{item_code:e.target.value})),placeholder:"Unique system ID",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Category ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsxs)("select",{value:r.category_id,onChange:e=>n(Be(Be({},r),{},{category_id:e.target.value,sub_category:""})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0,children:[(0,er.jsx)("option",{value:"",children:"Select Category"}),s.map(e=>(0,er.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),w.length>0&&(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sub-Category"}),(0,er.jsxs)("select",{value:r.sub_category,onChange:e=>n(Be(Be({},r),{},{sub_category:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[(0,er.jsx)("option",{value:"",children:"Select Sub-Category"}),w.map(e=>(0,er.jsx)("option",{value:e,children:e},e))]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"HSN / SAC Code"}),(0,er.jsx)("input",{type:"text",value:r.hsn_code||"",onChange:e=>n(Be(Be({},r),{},{hsn_code:e.target.value})),placeholder:"For GST compliance",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Unit of Measurement (UOM)"," ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsxs)("div",{className:"flex gap-2",children:[(0,er.jsxs)("select",{value:r.unit,onChange:e=>n(Be(Be({},r),{},{unit:e.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0,children:[(0,er.jsx)("option",{value:"",children:"Select Unit"}),l.map(e=>(0,er.jsx)("option",{value:e.value,children:e.label},e.value))]}),(0,er.jsxs)("button",{type:"button",onClick:()=>d(!0),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center gap-1 whitespace-nowrap transition-colors",title:"Add New Unit",children:[(0,er.jsx)(r$,{className:"w-4 h-4"}),(0,er.jsx)("span",{className:"hidden sm:inline",children:"Add Unit"})]})]})]}),(0,er.jsxs)("div",{className:"md:col-span-2",children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,er.jsx)("textarea",{value:r.description||"",onChange:e=>n(Be(Be({},r),{},{description:e.target.value})),rows:"3",placeholder:"e.g., Samsung 43 inch TV, Double ply toilet paper",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,er.jsxs)("div",{className:"md:col-span-2",children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Item Image"}),(0,er.jsx)("input",{type:"file",accept:"image/*",onChange:e=>n(Be(Be({},r),{},{image:e.target.files[0]||null})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),r.image&&(0,er.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Selected: ",r.image.name]})]})]})]}),(0,er.jsxs)("div",{className:"border-b border-gray-200 pb-6",children:[(0,er.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[(0,er.jsx)("span",{className:"bg-indigo-100 text-indigo-600 rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold",children:"2"}),"Inventory & Measurement Settings"]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Initial Stock"}),(0,er.jsx)("input",{type:"number",step:"0.01",min:"0",value:r.initial_stock||"",onChange:e=>n(Be(Be({},r),{},{initial_stock:e.target.value?parseFloat(e.target.value):""})),placeholder:"Leave empty for 0 stock",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Stock Level (Reorder Point)"}),(0,er.jsx)("input",{type:"number",step:"0.01",min:"0",value:r.min_stock_level,onChange:e=>n(Be(Be({},r),{},{min_stock_level:parseFloat(e.target.value)||0})),placeholder:"0.00",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"System alerts when stock hits this"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Storage Location"}),(0,er.jsxs)("select",{value:r.location||"",onChange:e=>n(Be(Be({},r),{},{location:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[(0,er.jsx)("option",{value:"",children:"Select Location"}),j.map(e=>(0,er.jsx)("option",{value:e,children:e},e))]})]}),(0,er.jsxs)("div",{className:"flex items-center pt-6",children:[(0,er.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,er.jsx)("input",{type:"checkbox",checked:r.is_perishable,onChange:e=>n(Be(Be({},r),{},{is_perishable:e.target.checked})),className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),(0,er.jsx)("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"Is Perishable / Has Expiry?"})]}),(0,er.jsx)("span",{className:"ml-2 text-xs text-gray-500",children:"(Required for Restaurant & Fire Safety)"})]}),(0,er.jsxs)("div",{className:"flex items-center pt-6",children:[(0,er.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,er.jsx)("input",{type:"checkbox",checked:r.track_serial_number,onChange:e=>n(Be(Be({},r),{},{track_serial_number:e.target.checked})),className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),(0,er.jsx)("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"Track Serial Number?"})]}),(0,er.jsx)("span",{className:"ml-2 text-xs text-gray-500",children:"(For Security & Facility assets)"})]}),(0,er.jsxs)("div",{className:"flex items-center pt-6",children:[(0,er.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,er.jsx)("input",{type:"checkbox",checked:r.track_laundry_cycle,onChange:e=>n(Be(Be({},r),{},{track_laundry_cycle:e.target.checked})),className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),(0,er.jsx)("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"Track Laundry Cycle?"})]}),(0,er.jsx)("span",{className:"ml-2 text-xs text-gray-500",children:"(For Linens: Towels, Sheets, etc.)"})]})]})]}),(0,er.jsxs)("div",{className:"border-b border-gray-200 pb-6",children:[(0,er.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[(0,er.jsx)("span",{className:"bg-indigo-100 text-indigo-600 rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold",children:"3"}),"Pricing & Tax (Purchase & Sales)"]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purchase Price (Cost)"}),(0,er.jsx)("input",{type:"number",step:"0.01",min:"0",value:r.unit_price,onChange:e=>n(Be(Be({},r),{},{unit_price:parseFloat(e.target.value)||0})),placeholder:"0.00",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Rate you pay the vendor"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"GST Tax Rate (Input) %"}),(0,er.jsxs)("select",{value:r.gst_rate,onChange:e=>n(Be(Be({},r),{},{gst_rate:parseFloat(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[(0,er.jsx)("option",{value:"0",children:"0%"}),(0,er.jsx)("option",{value:"5",children:"5%"}),(0,er.jsx)("option",{value:"12",children:"12%"}),(0,er.jsx)("option",{value:"18",children:"18%"}),(0,er.jsx)("option",{value:"28",children:"28%"})]})]}),(0,er.jsxs)("div",{className:"flex items-center pt-6",children:[(0,er.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,er.jsx)("input",{type:"checkbox",checked:r.is_sellable_to_guest,onChange:e=>n(Be(Be({},r),{},{is_sellable_to_guest:e.target.checked})),className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),(0,er.jsx)("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"Is Sellable to Guest?"})]}),(0,er.jsx)("span",{className:"ml-2 text-xs text-gray-500",children:"(Vegetables: No, Soft Drinks: Yes)"})]}),r.is_sellable_to_guest&&(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Selling Price (MRP)"}),(0,er.jsx)("input",{type:"number",step:"0.01",min:"0",value:r.selling_price,onChange:e=>n(Be(Be({},r),{},{selling_price:e.target.value?parseFloat(e.target.value):""})),placeholder:"0.00",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Price charged to guest if consumed"})]})]})]}),(0,er.jsxs)("div",{className:"border-b border-gray-200 pb-6",children:[(0,er.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[(0,er.jsx)("span",{className:"bg-indigo-100 text-indigo-600 rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold",children:"4"}),"Vendor Linking (Procurement)"]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preferred Vendor"}),(0,er.jsxs)("select",{value:r.preferred_vendor_id,onChange:e=>n(Be(Be({},r),{},{preferred_vendor_id:e.target.value?parseInt(e.target.value):""})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[(0,er.jsx)("option",{value:"",children:"Select Vendor"}),i.filter(e=>e.is_active).map(e=>(0,er.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Vendor Item Code"}),(0,er.jsx)("input",{type:"text",value:r.vendor_item_code||"",onChange:e=>n(Be(Be({},r),{},{vendor_item_code:e.target.value})),placeholder:"Vendor's code for this item",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lead Time (Days)"}),(0,er.jsx)("input",{type:"number",min:"0",value:r.lead_time_days,onChange:e=>n(Be(Be({},r),{},{lead_time_days:e.target.value?parseInt(e.target.value):""})),placeholder:"Days to arrive after ordering",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,er.jsx)("div",{className:"flex items-center pt-6",children:(0,er.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,er.jsx)("input",{type:"checkbox",checked:r.is_active,onChange:e=>n(Be(Be({},r),{},{is_active:e.target.checked})),className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),(0,er.jsx)("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"Item is Active"})]})})]})]}),(0,er.jsxs)("div",{className:"flex justify-end gap-4 pt-4",children:[(0,er.jsx)("button",{type:"button",onClick:h,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 font-medium transition-colors",children:"Cancel"}),(0,er.jsx)("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium transition-colors shadow-sm",children:"Create Item"})]})]})]})}),document.body)},qte=e=>{let{onClose:t,onSave:r}=e;const[n,s]=(0,a.useState)({value:"",label:""});return(0,er.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[11000] p-4",children:(0,er.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full",children:[(0,er.jsxs)("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center",children:[(0,er.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Add New Unit"}),(0,er.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:(0,er.jsx)(ZQ,{className:"w-6 h-6"})})]}),(0,er.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n.value&&n.label?(r(n),t()):alert("Please fill in both Unit Value and Label")},className:"p-6 space-y-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Value (Code) *"}),(0,er.jsx)("input",{type:"text",value:n.value,onChange:e=>s(Be(Be({},n),{},{value:e.target.value.toLowerCase().replace(/\s+/g,"")})),placeholder:"e.g. dozen",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",required:!0}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"This will be used internally (e.g. 'dozen', 'kg', 'ltr')"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Label (Display Name) *"}),(0,er.jsx)("input",{type:"text",value:n.label,onChange:e=>s(Be(Be({},n),{},{label:e.target.value})),placeholder:"e.g. Dozen (12 pcs)",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",required:!0})]}),(0,er.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,er.jsx)("button",{type:"button",onClick:t,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,er.jsx)("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Add Unit"})]})]})]})})},Wte=Xh("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),Vte=Xh("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),Hte=e=>{let{isOpen:t,onClose:r,item:n}=e;const[s,i]=(0,a.useState)([]),[o,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)(null);(0,a.useEffect)(()=>{t&&n&&u()},[t,n]);const u=async()=>{l(!0),d(null);try{const e=await Ia.get("/inventory/items/".concat(n.id,"/transactions"));i(e.data||[])}catch(e){console.error("Failed to fetch item history:",e),d("Failed to load history.")}finally{l(!1)}};if(!t||!n)return null;const h=[...s].sort((e,t)=>new Date(e.created_at)-new Date(t.created_at));let m=0;const p=[...h.map(e=>{let t=0;return"in"===e.transaction_type?t=e.quantity:"out"===e.transaction_type||"waste_spoilage"===e.transaction_type?t=-e.quantity:"transfer_out"===e.transaction_type?t=0:"adjustment"===e.transaction_type?t=e.quantity:"transfer_in"===e.transaction_type&&(t=0),m+=t,Be(Be({},e),{},{qtyChange:t,runningBalance:m})})].reverse(),f=m,g=Math.abs(f-n.current_stock)>.01;return(0,er.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50 backdrop-blur-sm",children:(0,er.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[(0,er.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,er.jsxs)("div",{children:[(0,er.jsxs)("h2",{className:"text-xl font-bold text-gray-800",children:["Item History: ",n.name]}),(0,er.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Current Stock: ",(0,er.jsxs)("span",{className:"font-bold text-gray-800",children:[n.current_stock," ",n.unit]})]})]}),(0,er.jsx)("button",{onClick:r,className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100 transition-colors",children:(0,er.jsx)(ZQ,{className:"w-5 h-5"})})]}),(0,er.jsx)("div",{className:"p-6 overflow-y-auto flex-1",children:o?(0,er.jsx)("div",{className:"flex justify-center py-10",children:(0,er.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):c?(0,er.jsx)("div",{className:"text-red-500 text-center py-10",children:c}):(0,er.jsxs)(er.Fragment,{children:[g&&(0,er.jsxs)("div",{className:"mb-4 p-4 bg-orange-50 border border-orange-200 rounded-lg flex items-start justify-between gap-3",children:[(0,er.jsxs)("div",{className:"flex items-start gap-3",children:[(0,er.jsx)(KJ,{className:"w-5 h-5 text-orange-500 flex-shrink-0 mt-0.5"}),(0,er.jsxs)("div",{children:[(0,er.jsx)("h3",{className:"font-semibold text-orange-800",children:"Stock Discrepancy Detected"}),(0,er.jsxs)("p",{className:"text-sm text-orange-700",children:["The calculated history total (",f,") does not match the current stock (",n.current_stock,"). This may be due to manual database edits or untracked adjustments."]})]})]}),(0,er.jsx)("button",{onClick:async()=>{if(window.confirm("Are you sure you want to update the current stock from ".concat(n.current_stock," to ").concat(f," to match the transaction history?")))try{l(!0),await Ia.post("/inventory/items/".concat(n.id,"/fix-stock"));const e=await Ia.get("/inventory/items/".concat(n.id,"/transactions"));i(e.data||[]),r()}catch(e){console.error("Failed to fix stock:",e),d("Failed to synchronize stock."),l(!1)}},className:"px-3 py-1.5 bg-orange-100 text-orange-700 text-sm font-medium rounded-lg hover:bg-orange-200 whitespace-nowrap transition-colors",children:"Sync Stock to History"})]}),(0,er.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,er.jsx)("thead",{className:"text-xs text-gray-500 uppercase bg-gray-50 sticky top-0",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"px-4 py-3",children:"Date"}),(0,er.jsx)("th",{className:"px-4 py-3",children:"Type"}),(0,er.jsx)("th",{className:"px-4 py-3",children:"Reference"}),(0,er.jsx)("th",{className:"px-4 py-3",children:"Department / Notes"}),(0,er.jsx)("th",{className:"px-4 py-3 text-right",children:"Change"}),(0,er.jsx)("th",{className:"px-4 py-3 text-right",children:"Balance"})]})}),(0,er.jsx)("tbody",{className:"divide-y divide-gray-100",children:0===p.length?(0,er.jsx)("tr",{children:(0,er.jsx)("td",{colSpan:"6",className:"px-4 py-8 text-center text-gray-500",children:"No transactions found"})}):p.map((e,t)=>(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:new Date(e.created_at).toLocaleString()}),(0,er.jsx)("td",{className:"px-4 py-3",children:(0,er.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium \n                            ".concat(e.qtyChange>0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:[e.qtyChange>0?(0,er.jsx)(Wte,{className:"w-3 h-3"}):(0,er.jsx)(Vte,{className:"w-3 h-3"}),e.transaction_type.toUpperCase().replace("_"," ")]})}),(0,er.jsx)("td",{className:"px-4 py-3 font-medium text-gray-700",children:e.reference_number||"-"}),(0,er.jsx)("td",{className:"px-4 py-3 text-gray-600 max-w-xs truncate",title:e.notes,children:(0,er.jsxs)("div",{className:"flex flex-col",children:[e.department&&(0,er.jsx)("span",{className:"text-xs font-bold text-gray-400",children:e.department}),(0,er.jsx)("span",{children:e.notes||"-"}),e.created_by_name&&(0,er.jsxs)("span",{className:"text-xs text-gray-400",children:["by ",e.created_by_name]})]})}),(0,er.jsx)("td",{className:"px-4 py-3 text-right font-medium ".concat(e.qtyChange>0?"text-green-600":e.qtyChange<0?"text-red-600":"text-gray-500"),children:0===e.qtyChange&&e.quantity>0&&e.transaction_type.includes("transfer")?(0,er.jsx)("span",{className:"text-xs italic text-blue-500",children:"Global Stock Unchanged"}):(0,er.jsxs)(er.Fragment,{children:[e.qtyChange>0?"+":"",e.qtyChange," ",n.unit]})}),(0,er.jsxs)("td",{className:"px-4 py-3 text-right text-gray-600 font-semibold",children:[e.runningBalance," ",n.unit]})]},e.id||t))})]})]})}),(0,er.jsx)("div",{className:"p-4 border-t bg-gray-50 flex justify-end",children:(0,er.jsx)("button",{onClick:r,className:"px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Close"})})]})})},Gte=["account_number_confirm"];function Kte(e){var t;let{locationData:r,onClose:n}=e;if(!r)return null;const a=(null===(t=r.items)||void 0===t?void 0:t.filter(e=>(e.location_stock||0)>0))||[];return(0,er.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[10000] p-4",children:(0,er.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-5xl w-full max-h-[90vh] overflow-y-auto",children:[(0,er.jsxs)("div",{className:"p-4 sm:p-6 border-b border-gray-200 flex justify-between items-center sticky top-0 bg-white z-10",children:[(0,er.jsxs)("div",{children:[(0,er.jsxs)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:["Inventory at ",r.location.name]}),(0,er.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[r.location.building," ",r.location.floor?"- ".concat(r.location.floor):""]})]}),(0,er.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:(0,er.jsx)(ZQ,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]}),(0,er.jsxs)("div",{className:"p-4 sm:p-6 space-y-4",children:[(0,er.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 p-4 bg-gray-50 rounded-lg",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Total Items"}),(0,er.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:r.total_items})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Stock Value"}),(0,er.jsx)("p",{className:"text-2xl font-bold text-green-600 mt-1",children:ym(r.total_stock_value)})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Location Type"}),(0,er.jsx)("p",{className:"text-sm font-semibold text-gray-900 mt-1",children:r.location.location_type})]})]}),r.room_usage&&(0,er.jsxs)("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Room Usage Information"}),r.room_usage.booking_info&&(0,er.jsxs)("div",{className:"mb-4 p-3 bg-white rounded-lg border border-blue-100",children:[(0,er.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,er.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Current Guest:"}),(0,er.jsx)("span",{className:"text-lg font-bold text-blue-700",children:r.room_usage.booking_info.guest_name})]}),(0,er.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm text-gray-600",children:[r.room_usage.booking_info.guest_mobile&&(0,er.jsxs)("div",{children:[(0,er.jsx)("span",{className:"font-medium",children:"Mobile:"})," ",r.room_usage.booking_info.guest_mobile]}),r.room_usage.booking_info.guest_email&&(0,er.jsxs)("div",{children:[(0,er.jsx)("span",{className:"font-medium",children:"Email:"})," ",r.room_usage.booking_info.guest_email]}),r.room_usage.booking_info.check_in&&(0,er.jsxs)("div",{children:[(0,er.jsx)("span",{className:"font-medium",children:"Check-in:"})," ",y$(r.room_usage.booking_info.check_in)]}),r.room_usage.booking_info.check_out&&(0,er.jsxs)("div",{children:[(0,er.jsx)("span",{className:"font-medium",children:"Check-out:"})," ",y$(r.room_usage.booking_info.check_out)]})]})]}),r.room_usage.services_used&&r.room_usage.services_used.length>0?(0,er.jsxs)("div",{className:"mb-4",children:[(0,er.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,er.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Services Used:"}),(0,er.jsxs)("span",{className:"text-sm font-semibold text-gray-800",children:[r.room_usage.total_services," service(s) - Total: \u20b9",r.room_usage.total_service_charges.toFixed(2)]})]}),(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[(0,er.jsx)("thead",{className:"bg-gray-100",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"px-2 py-1 text-left text-xs font-medium text-gray-600",children:"Service"}),(0,er.jsx)("th",{className:"px-2 py-1 text-left text-xs font-medium text-gray-600",children:"Employee"}),(0,er.jsx)("th",{className:"px-2 py-1 text-left text-xs font-medium text-gray-600",children:"Charges"}),(0,er.jsx)("th",{className:"px-2 py-1 text-left text-xs font-medium text-gray-600",children:"Status"}),(0,er.jsx)("th",{className:"px-2 py-1 text-left text-xs font-medium text-gray-600",children:"Assigned"}),(0,er.jsx)("th",{className:"px-2 py-1 text-left text-xs font-medium text-gray-600",children:"Last Used"})]})}),(0,er.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:r.room_usage.services_used.map((e,t)=>(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsx)("td",{className:"px-2 py-1 text-gray-900 font-medium",children:e.service_name}),(0,er.jsx)("td",{className:"px-2 py-1 text-gray-600",children:e.employee_name||"N/A"}),(0,er.jsxs)("td",{className:"px-2 py-1 text-gray-900 font-semibold",children:["\u20b9",e.charges]}),(0,er.jsx)("td",{className:"px-2 py-1",children:(0,er.jsx)("span",{className:"px-2 py-0.5 text-xs rounded-full ".concat("completed"===e.status?"bg-green-100 text-green-800":"in_progress"===e.status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:e.status})}),(0,er.jsx)("td",{className:"px-2 py-1 text-gray-600 text-xs",children:e.assigned_at?v$(e.assigned_at):"N/A"}),(0,er.jsx)("td",{className:"px-2 py-1 text-gray-600 text-xs",children:e.last_used_at?(0,er.jsx)("span",{className:"text-green-600 font-medium",children:v$(e.last_used_at)}):(0,er.jsx)("span",{className:"text-gray-400 italic",children:"Never"})})]},t))})]})})]}):(0,er.jsx)("div",{className:"text-sm text-gray-500 italic mb-4",children:"No services have been used in this room yet."})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Items & Stock"}),(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,er.jsx)("thead",{className:"bg-gray-50",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Item"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Category"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Location Stock"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Unit"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Unit Price"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Value"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),(0,er.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===a.length?(0,er.jsx)("tr",{children:(0,er.jsx)("td",{colSpan:"8",className:"px-4 py-8 text-center text-gray-500",children:"No items found at this location"})}):a.map((e,t)=>(0,er.jsxs)("tr",{className:e.is_low_stock?"bg-red-50":"",children:[(0,er.jsx)("td",{className:"px-3 py-2 text-sm font-medium text-gray-900",children:e.item_name}),(0,er.jsx)("td",{className:"px-3 py-2 text-sm text-gray-600",children:e.category_name||"-"}),(0,er.jsx)("td",{className:"px-3 py-2",children:(0,er.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat("asset"===e.type?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"),children:"asset"===e.type?"Asset":"Consumable"})}),(0,er.jsx)("td",{className:"px-3 py-2 text-sm text-gray-900 font-medium",children:e.location_stock||0}),(0,er.jsx)("td",{className:"px-3 py-2 text-sm text-gray-600",children:e.unit}),(0,er.jsx)("td",{className:"px-3 py-2 text-sm text-gray-600",children:ym(e.unit_price||0)}),(0,er.jsx)("td",{className:"px-3 py-2 text-sm font-semibold text-gray-900",children:ym((e.location_stock||0)*(e.unit_price||0))}),(0,er.jsx)("td",{className:"px-3 py-2",children:(e.location_stock||0)<=0?(0,er.jsx)("span",{className:"px-2 py-1 text-xs bg-red-100 text-red-800 rounded-full",children:"Out of Stock"}):e.is_low_stock?(0,er.jsx)("span",{className:"px-2 py-1 text-xs bg-yellow-100 text-yellow-800 rounded-full",children:"Low Stock"}):(0,er.jsx)("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full",children:"In Stock"})})]},t))})]})})]}),(0,er.jsxs)("div",{className:"mt-8 pt-6 border-t border-gray-100",children:[(0,er.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[(0,er.jsx)(Ate,{className:"w-5 h-5 text-indigo-600"}),"Inventory History (Issues & Waste)"]}),(0,er.jsx)("div",{className:"overflow-x-auto rounded-lg border border-gray-200",children:(0,er.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,er.jsx)("thead",{className:"bg-gray-50",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reference"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"})]})}),(0,er.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:r.history&&r.history.length>0?r.history.map((e,t)=>(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600 whitespace-nowrap",children:v$(e.date)}),(0,er.jsx)("td",{className:"px-4 py-3",children:(0,er.jsx)("span",{className:"px-2 py-1 text-xs rounded-full font-medium ".concat("green"===e.color?"bg-green-100 text-green-800":"red"===e.color?"bg-red-100 text-red-800":"blue"===e.color?"bg-blue-100 text-blue-800":"orange"===e.color?"bg-orange-100 text-orange-800":"bg-gray-100 text-gray-800"),children:e.type})}),(0,er.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900 font-medium",children:e.item_name}),(0,er.jsxs)("td",{className:"px-4 py-3 text-sm text-gray-900",children:[(0,er.jsxs)("span",{className:"font-semibold ".concat("green"===e.color?"text-green-600":"text-red-600"),children:["green"===e.color?"+":"-",e.quantity]})," ",(0,er.jsx)("span",{className:"text-gray-500 text-xs",children:e.unit})]}),(0,er.jsx)("td",{className:"px-4 py-3 text-sm text-gray-500",children:e.reference}),(0,er.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.user})]},t)):(0,er.jsx)("tr",{children:(0,er.jsx)("td",{colSpan:"6",className:"px-4 py-8 text-center text-gray-500 italic",children:"No history found for this location."})})})]})})]}),(0,er.jsx)("div",{className:"flex justify-end pt-4 border-t",children:(0,er.jsx)("button",{onClick:n,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Close"})})]})]})})}function Yte(e){var t,r;let{transaction:n,items:a,foodItems:s,categories:i,purchases:o,onClose:l}=e;if(!n)return null;const c=a.find(e=>e.id===n.item_id)||(null===s||void 0===s?void 0:s.find(e=>e.id===n.item_id)),d=i.find(e=>e.id===(null===c||void 0===c?void 0:c.category_id)),u=(()=>{if("in"===n.transaction_type)return{label:"Purchase (In)",color:"bg-green-100 text-green-800"};if("transfer_in"===n.transaction_type){let e="Stock Received";if(n.notes&&n.notes.includes("from")){const t=n.notes.match(/from\s+(\d+)/);t&&(e+=" (from Loc #".concat(t[1],")"))}return{label:e,color:"bg-blue-100 text-blue-800"}}if("transfer_out"===n.transaction_type){let e="Transfer Out";if(n.notes)if(n.notes.includes("\u2192")){const t=n.notes.split("\u2192")[1].trim();e+=" \u2192 ".concat(t)}else if(n.notes.includes("\xe2\u2020'")){const t=n.notes.split("\xe2\u2020'")[1].trim();e+=" \u2192 ".concat(t)}return{label:e,color:"bg-purple-100 text-purple-800"}}var e,t,r;return"out"===n.transaction_type?null!==(e=n.notes)&&void 0!==e&&e.toLowerCase().includes("waste")||null!==(t=n.notes)&&void 0!==t&&t.toLowerCase().includes("spoilage")?{label:"Waste/Spoilage",color:"bg-red-100 text-red-800"}:null!==(r=n.notes)&&void 0!==r&&r.toLowerCase().includes("kitchen")?{label:"Kitchen Usage",color:"bg-yellow-100 text-yellow-800"}:{label:"Usage (Out)",color:"bg-orange-100 text-orange-800"}:{label:"Adjustment",color:"bg-blue-100 text-blue-800"}})();return(0,er.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[10000] p-4",children:(0,er.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,er.jsxs)("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center sticky top-0 bg-white z-10",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Transaction Details"}),(0,er.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Ref: ",n.reference_number||"TRX-".concat(n.id)]})]}),(0,er.jsx)("button",{onClick:l,className:"text-gray-400 hover:text-gray-600",children:(0,er.jsx)(ZQ,{className:"w-6 h-6"})})]}),(0,er.jsxs)("div",{className:"p-6 space-y-6",children:[(0,er.jsxs)("div",{className:"flex flex-wrap gap-4 items-center justify-between bg-gray-50 p-4 rounded-lg",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm text-gray-500",children:"Date"}),(0,er.jsx)("p",{className:"font-medium text-gray-900",children:y$(n.created_at)})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm text-gray-500",children:"Type"}),(0,er.jsx)("span",{className:"px-2 py-1 text-xs rounded-full font-medium ".concat(u.color),children:u.label})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm text-gray-500",children:"Amount"}),(0,er.jsx)("p",{className:"font-bold text-gray-900",children:ym(n.total_amount||0)})]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-3 border-b pb-2",children:"Item Information"}),(0,er.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm text-gray-500",children:"Item Name"}),(0,er.jsx)("p",{className:"font-medium text-gray-900",children:(null===c||void 0===c?void 0:c.name)||n.item_name||"Unknown Item"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm text-gray-500",children:"Category"}),(0,er.jsx)("p",{className:"font-medium text-gray-900",children:(null===d||void 0===d?void 0:d.name)||"-"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm text-gray-500",children:"Quantity Change"}),(0,er.jsxs)("p",{className:"font-medium ".concat("in"===n.transaction_type||"transfer_in"===n.transaction_type?"text-green-600":"text-red-600"),children:["in"===n.transaction_type||"transfer_in"===n.transaction_type?"+":"-"," ",n.quantity," ",(null===c||void 0===c?void 0:c.unit)||"pcs"]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm text-gray-500",children:"Unit Price"}),(0,er.jsx)("p",{className:"font-medium text-gray-900",children:ym(n.unit_price||0)})]})]})]}),("transfer_out"===n.transaction_type||"transfer_in"===n.transaction_type)&&n.notes&&(0,er.jsxs)("div",{children:[(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-3 border-b pb-2",children:"Transfer Information"}),(0,er.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm text-gray-500",children:"From Location"}),(0,er.jsx)("p",{className:"font-medium text-orange-600",children:n.notes.includes("from")?(()=>{const e=n.notes.match(/from\s+(\d+)/);if(e){const t=e[1];return"1"===t?"Central Warehouse (Main Block - Storage Wing A)":"Location #".concat(t)}return"Source Warehouse"})():"Central Warehouse"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm text-gray-500",children:"To Location"}),(0,er.jsx)("p",{className:"font-medium text-green-600",children:(()=>{const e=n.notes;if(console.log("Transaction:",n.id,"Type:",n.transaction_type),console.log("Department:",n.department),console.log("Notes:",e),"transfer_in"===n.transaction_type)return n.department?n.department:"Dining Block - Store Room 102";const t=e.match(/ISS-\d{8}-\d{3}\s+(.+)/);if(t&&t[1]){return t[1].replace(/^[^a-zA-Z]+/,"").trim()||"Unknown Location"}return n.department||"Unknown Location"})()})]})]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-3 border-b pb-2",children:"Additional Details"}),(0,er.jsxs)("div",{className:"space-y-3",children:[n.notes&&(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm text-gray-500",children:"Notes"}),(0,er.jsx)("div",{className:"bg-gray-50 p-3 rounded text-sm text-gray-700 whitespace-pre-wrap",children:n.notes})]}),((null===(t=n.notes)||void 0===t?void 0:t.includes("Batch:"))||(null===(r=n.notes)||void 0===r?void 0:r.includes("Exp:")))&&(0,er.jsxs)("div",{className:"flex gap-4",children:[n.notes.match(/Batch: ([^\n]+)/)&&(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm text-gray-500",children:"Batch Number"}),(0,er.jsx)("p",{className:"font-medium text-gray-900",children:n.notes.match(/Batch: ([^\n]+)/)[1]})]}),n.notes.match(/Exp: ([^\n]+)/)&&(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm text-gray-500",children:"Expiry Date"}),(0,er.jsx)("p",{className:"font-medium text-orange-600",children:n.notes.match(/Exp: ([^\n]+)/)[1]})]})]})]})]})]}),(0,er.jsx)("div",{className:"p-6 border-t border-gray-200 flex justify-end",children:(0,er.jsx)("button",{onClick:l,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:"Close"})})]})})}const Xte=e=>{let{transactions:t,purchases:r,items:n,categories:a,filters:s,setFilters:i,onRefresh:o,onTransactionClick:l}=e;const c=(()=>{const e=r.filter(e=>"cancelled"!==e.status).reduce((e,t)=>e+(parseFloat(t.total_amount)||0),0),a=t.filter(e=>{var t;return"out"===e.transaction_type&&(null===(t=e.notes)||void 0===t?void 0:t.toLowerCase().includes("kitchen"))}).reduce((e,t)=>e+(parseFloat(t.total_amount)||0),0),s=t.filter(e=>{var t,r;return"out"===e.transaction_type&&((null===(t=e.notes)||void 0===t?void 0:t.toLowerCase().includes("waste"))||(null===(r=e.notes)||void 0===r?void 0:r.toLowerCase().includes("spoilage")))}).reduce((e,t)=>e+(parseFloat(t.total_amount)||0),0);return{totalPurchases:e,kitchenUsage:a,wasteSpoilage:s,currentStockValue:n.reduce((e,t)=>e+(parseFloat(t.current_stock)||0)*(parseFloat(t.unit_price)||0),0)}})(),d=(()=>{let e=[...t];if("all"!==s.type){const t={purchase:"in",transfer_in:"transfer_in",transfer_out:"transfer_out",usage:"out",waste:"out",adjustment:"adjustment"};e=e.filter(e=>{var r,n,a,i;return"waste"===s.type?"out"===e.transaction_type&&((null===(r=e.notes)||void 0===r?void 0:r.toLowerCase().includes("waste"))||(null===(n=e.notes)||void 0===n?void 0:n.toLowerCase().includes("spoilage"))):"usage"===s.type?"out"===e.transaction_type&&!(null!==(a=e.notes)&&void 0!==a&&a.toLowerCase().includes("waste"))&&!(null!==(i=e.notes)&&void 0!==i&&i.toLowerCase().includes("spoilage")):e.transaction_type===t[s.type]})}if("all"!==s.category&&(e=e.filter(e=>{const t=n.find(t=>t.id===e.item_id);if(!t)return!1;const r=a.find(e=>e.id===t.category_id);return(null===r||void 0===r?void 0:r.name)===s.category})),"all"!==s.dateRange){const t=new Date;let r=new Date;if("today"===s.dateRange)r.setHours(0,0,0,0);else if("week"===s.dateRange)r.setDate(t.getDate()-7);else if("month"===s.dateRange)r.setMonth(t.getMonth()-1);else if("custom"===s.dateRange&&s.startDate&&s.endDate){r=new Date(s.startDate);const t=new Date(s.endDate);return t.setHours(23,59,59,999),e=e.filter(e=>{const n=new Date(e.created_at);return n>=r&&n<=t}),e}e=e.filter(e=>new Date(e.created_at)>=r)}return e.sort((e,t)=>new Date(t.created_at)-new Date(e.created_at))})();return(0,er.jsxs)("div",{className:"space-y-6",children:[(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,er.jsx)("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-blue-500",children:(0,er.jsxs)("div",{className:"flex items-center justify-between",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Purchases"}),(0,er.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:ym(c.totalPurchases)}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Sum of all Purchase Invoices"})]}),(0,er.jsx)(Cte,{className:"w-8 h-8 text-blue-500"})]})}),(0,er.jsx)("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-yellow-500",children:(0,er.jsxs)("div",{className:"flex items-center justify-between",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Kitchen Consumption"}),(0,er.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:ym(c.kitchenUsage)}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Sum of Usage Logs (COGS)"})]}),(0,er.jsx)(sJ,{className:"w-8 h-8 text-yellow-500"})]})}),(0,er.jsx)("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-red-500",children:(0,er.jsxs)("div",{className:"flex items-center justify-between",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Waste / Spoilage"}),(0,er.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:ym(c.wasteSpoilage)}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Loss from expired/ruined food"})]}),(0,er.jsx)(Tte,{className:"w-8 h-8 text-red-500"})]})}),(0,er.jsx)("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-green-500",children:(0,er.jsxs)("div",{className:"flex items-center justify-between",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Current Stock Value"}),(0,er.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:ym(c.currentStockValue)}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Value of inventory on shelves"})]}),(0,er.jsx)(Zh,{className:"w-8 h-8 text-green-500"})]})})]}),(0,er.jsxs)("div",{className:"bg-white rounded-lg shadow p-4",children:[(0,er.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,er.jsx)(K$,{className:"w-5 h-5 text-gray-600"}),(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Filters"})]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transaction Type"}),(0,er.jsx)("div",{className:"flex flex-wrap gap-2",children:[{value:"all",label:"All",icon:null},{value:"purchase",label:"Purchase (In)",icon:(0,er.jsx)(Cte,{className:"w-4 h-4"})},{value:"transfer_in",label:"Stock Received",icon:(0,er.jsx)(Cte,{className:"w-4 h-4"})},{value:"transfer_out",label:"Transfer Out",icon:(0,er.jsx)(Ete,{className:"w-4 h-4"})},{value:"usage",label:"Kitchen Usage",icon:(0,er.jsx)(sJ,{className:"w-4 h-4"})},{value:"waste",label:"Waste/Spoilage",icon:(0,er.jsx)(Tte,{className:"w-4 h-4"})},{value:"adjustment",label:"Audit Correction",icon:(0,er.jsx)(Ate,{className:"w-4 h-4"})}].map(e=>(0,er.jsxs)("button",{onClick:()=>i(Be(Be({},s),{},{type:e.value})),className:"px-3 py-2 text-sm font-medium rounded-lg flex items-center gap-2 ".concat(s.type===e.value?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[e.icon,e.label]},e.value))})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),(0,er.jsxs)("select",{value:s.category,onChange:e=>i(Be(Be({},s),{},{category:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",children:[(0,er.jsx)("option",{value:"all",children:"All Categories"}),a.map(e=>(0,er.jsx)("option",{value:e.name,children:e.name},e.id))]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Range"}),(0,er.jsxs)("div",{className:"flex gap-2",children:[(0,er.jsxs)("select",{value:s.dateRange,onChange:e=>i(Be(Be({},s),{},{dateRange:e.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",children:[(0,er.jsx)("option",{value:"today",children:"Today"}),(0,er.jsx)("option",{value:"week",children:"This Week"}),(0,er.jsx)("option",{value:"month",children:"This Month"}),(0,er.jsx)("option",{value:"custom",children:"Custom"}),(0,er.jsx)("option",{value:"all",children:"All Time"})]}),"custom"===s.dateRange&&(0,er.jsxs)(er.Fragment,{children:[(0,er.jsx)("input",{type:"date",value:s.startDate,onChange:e=>i(Be(Be({},s),{},{startDate:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"Start Date"}),(0,er.jsx)("input",{type:"date",value:s.endDate,onChange:e=>i(Be(Be({},s),{},{endDate:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"End Date"})]})]})]})]})]}),(0,er.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,er.jsx)("thead",{className:"bg-gray-50",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Item Details"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Transaction Type"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Qty Change"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Batch/Expiry"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Financials"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Action"})]})}),(0,er.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===d.length?(0,er.jsx)("tr",{children:(0,er.jsx)("td",{colSpan:"8",className:"px-4 py-8 text-center text-gray-500",children:"No transactions found"})}):d.map(e=>{var t,r,s,i;const o=(e=>{return"in"===e.transaction_type?{icon:(0,er.jsx)(Cte,{className:"w-4 h-4"}),label:"Purchase",color:"text-green-600 bg-green-50",statusColor:"bg-green-500"}:"transfer_in"===e.transaction_type?{icon:(0,er.jsx)(Cte,{className:"w-4 h-4"}),label:"Stock Received",color:"text-blue-600 bg-blue-50",statusColor:"bg-blue-500"}:"transfer_out"===e.transaction_type?{icon:(0,er.jsx)(Ete,{className:"w-4 h-4"}),label:"Transfer Out",color:"text-purple-600 bg-purple-50",statusColor:"bg-purple-500"}:"out"===e.transaction_type?null!==(t=e.notes)&&void 0!==t&&t.toLowerCase().includes("waste")||null!==(r=e.notes)&&void 0!==r&&r.toLowerCase().includes("spoilage")?{icon:(0,er.jsx)(Tte,{className:"w-4 h-4"}),label:"Waste/Spoilage",color:"text-red-600 bg-red-50",statusColor:"bg-red-500"}:null!==(n=e.notes)&&void 0!==n&&n.toLowerCase().includes("kitchen")?{icon:(0,er.jsx)(sJ,{className:"w-4 h-4"}),label:"Kitchen Usage",color:"text-yellow-600 bg-yellow-50",statusColor:"bg-yellow-500"}:{icon:(0,er.jsx)(Ete,{className:"w-4 h-4"}),label:"Usage",color:"text-orange-600 bg-orange-50",statusColor:"bg-orange-500"}:{icon:(0,er.jsx)(Ate,{className:"w-4 h-4"}),label:"Audit Correction",color:"text-blue-600 bg-blue-50",statusColor:"bg-blue-500"};var t,r,n})(e),c=(e=>{const t=n.find(t=>t.id===e);if(!t)return{name:"-",category:"-",unit:"-"};const r=a.find(e=>e.id===t.category_id);return{name:t.name,category:(null===r||void 0===r?void 0:r.name)||"-",unit:t.unit||"pcs",isPerishable:(null===r||void 0===r?void 0:r.is_perishable)||!1}})(e.item_id),d="in"===e.transaction_type||"transfer_in"===e.transaction_type;return(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsx)("td",{className:"px-4 py-3",children:(0,er.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(o.statusColor)})}),(0,er.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:y$(e.created_at)}),(0,er.jsxs)("td",{className:"px-4 py-3",children:[(0,er.jsx)("div",{className:"text-sm font-medium text-gray-900",children:c.name}),(0,er.jsxs)("div",{className:"text-xs text-gray-500",children:["(",c.category," / ",c.unit,")"]})]}),(0,er.jsxs)("td",{className:"px-4 py-3",children:[(0,er.jsxs)("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-semibold ".concat(o.color),children:[o.icon,o.label]}),e.reference_number&&(0,er.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["in"===e.transaction_type&&"Vendor: ",e.reference_number]})]}),(0,er.jsx)("td",{className:"px-4 py-3",children:(0,er.jsxs)("div",{className:"text-sm font-semibold ".concat(d?"text-green-600":"text-red-600"),children:[d?"+":"-"," ",e.quantity," ",c.unit]})}),(0,er.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:null!==(t=e.notes)&&void 0!==t&&t.includes("Exp:")?(0,er.jsx)("span",{className:"text-orange-600 font-medium",children:(null===(r=e.notes.match(/Exp: ([^\n]+)/))||void 0===r?void 0:r[1])||"See notes"}):null!==(s=e.notes)&&void 0!==s&&s.includes("Batch:")?(0,er.jsx)("span",{className:"text-blue-600",children:(null===(i=e.notes.match(/Batch: ([^\n]+)/))||void 0===i?void 0:i[1])||"See notes"}):c.isPerishable?(0,er.jsx)("span",{className:"text-gray-400 italic",children:"N/A"}):"-"}),(0,er.jsx)("td",{className:"px-4 py-3",children:e.total_amount?(0,er.jsxs)("div",{children:[(0,er.jsx)("div",{className:"text-sm font-semibold text-gray-900",children:ym(e.total_amount)}),e.unit_price&&(0,er.jsxs)("div",{className:"text-xs text-gray-500",children:["Rate: ",ym(e.unit_price)]})]}):(0,er.jsx)("span",{className:"text-gray-400",children:"-"})}),(0,er.jsx)("td",{className:"px-4 py-3",children:(0,er.jsxs)("div",{className:"flex items-center gap-2",children:[(0,er.jsx)("button",{className:"p-1 text-gray-600 hover:text-indigo-600",title:"View Details",onClick:()=>l&&l(e),children:(0,er.jsx)(Pte,{className:"w-4 h-4"})}),"Waste/Spoilage"===o.label&&(0,er.jsx)("button",{className:"p-1 text-gray-600 hover:text-indigo-600",title:"View Photo",children:(0,er.jsx)(uZ,{className:"w-4 h-4"})})]})})]},e.id)})})]})})})]})};function Qte(e){let{form:t,setForm:r,onSubmit:n,onClose:a}=e;return(0,er.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,er.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-3xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,er.jsxs)("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center sticky top-0 bg-white z-10",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Add Category"}),(0,er.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"GST-friendly category setup"})]}),(0,er.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:(0,er.jsx)(ZQ,{className:"w-6 h-6"})})]}),(0,er.jsxs)("form",{onSubmit:n,className:"p-6 space-y-6",children:[(0,er.jsxs)("div",{className:"border-b border-gray-200 pb-4",children:[(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Basic Information"}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Category Name ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("input",{type:"text",value:t.name,onChange:e=>r(Be(Be({},t),{},{name:e.target.value})),placeholder:"e.g., Dairy, Housekeeping Linen, Electrical Spares",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0})]}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Parent Department ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsxs)("select",{value:t.parent_department,onChange:e=>r(Be(Be({},t),{},{parent_department:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0,children:[(0,er.jsx)("option",{value:"",children:"Select Department"}),(0,er.jsx)("option",{value:"Restaurant",children:"Restaurant"}),(0,er.jsx)("option",{value:"Facility",children:"Facility"}),(0,er.jsx)("option",{value:"Hotel",children:"Hotel"}),(0,er.jsx)("option",{value:"Office",children:"Office"}),(0,er.jsx)("option",{value:"Fire & Safety",children:"Fire & Safety"}),(0,er.jsx)("option",{value:"Security",children:"Security"})]})]}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["GST Tax Rate ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsxs)("select",{value:t.gst_tax_rate,onChange:e=>r(Be(Be({},t),{},{gst_tax_rate:parseFloat(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0,children:[(0,er.jsx)("option",{value:"0",children:"0%"}),(0,er.jsx)("option",{value:"5",children:"5%"}),(0,er.jsx)("option",{value:"12",children:"12%"}),(0,er.jsx)("option",{value:"18",children:"18%"}),(0,er.jsx)("option",{value:"28",children:"28%"})]}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Essential for Purchase Logic"})]}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Classification ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsxs)("select",{value:t.classification,onChange:e=>r(Be(Be({},t),{},{classification:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0,children:[(0,er.jsx)("option",{value:"",children:"Select Classification"}),(0,er.jsx)("option",{value:"Goods",children:"Goods"}),(0,er.jsx)("option",{value:"Services",children:"Services"})]}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Goods require HSN, Services require SAC"})]}),(0,er.jsxs)("div",{className:"md:col-span-2",children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,er.jsx)("textarea",{value:t.description,onChange:e=>r(Be(Be({},t),{},{description:e.target.value})),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]})]}),(0,er.jsxs)("div",{className:"border-b border-gray-200 pb-4",children:[(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"GST Classification Properties"}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["HSN / SAC Code ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("input",{type:"text",value:t.hsn_sac_code,onChange:e=>r(Be(Be({},t),{},{hsn_sac_code:e.target.value})),placeholder:"Goods"===t.classification?"e.g., 6302 (Bed Linen)":"e.g., 996331 (Restaurant Service)",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"4, 6, or 8 digits - Mandatory for invoices"})]}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["GST Slab (Default) ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsxs)("select",{value:t.default_gst_rate,onChange:e=>r(Be(Be({},t),{},{default_gst_rate:parseFloat(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0,children:[(0,er.jsx)("option",{value:"0",children:"0%"}),(0,er.jsx)("option",{value:"5",children:"5%"}),(0,er.jsx)("option",{value:"12",children:"12%"}),(0,er.jsx)("option",{value:"18",children:"18%"}),(0,er.jsx)("option",{value:"28",children:"28%"})]}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Default tax rate for all items in this category"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cess Percentage"}),(0,er.jsx)("input",{type:"number",step:"0.01",min:"0",value:t.cess_percentage,onChange:e=>r(Be(Be({},t),{},{cess_percentage:parseFloat(e.target.value)||0})),placeholder:"e.g., 12",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Required for Aerated Drinks, Tobacco, etc."})]})]})]}),(0,er.jsxs)("div",{className:"border-b border-gray-200 pb-4",children:[(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"ITC (Input Tax Credit) Rules"}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["ITC Eligibility ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsxs)("select",{value:t.itc_eligibility,onChange:e=>r(Be(Be({},t),{},{itc_eligibility:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0,children:[(0,er.jsx)("option",{value:"Eligible",children:"Eligible"}),(0,er.jsx)("option",{value:"Ineligible (Blocked)",children:"Ineligible (Blocked)"})]}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Construction materials are usually Blocked"})]}),(0,er.jsxs)("div",{className:"flex items-center pt-6",children:[(0,er.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,er.jsx)("input",{type:"checkbox",checked:t.is_capital_good,onChange:e=>r(Be(Be({},t),{},{is_capital_good:e.target.checked})),className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),(0,er.jsx)("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"Capital Good?"})]}),(0,er.jsx)("span",{className:"ml-2 text-xs text-gray-500",children:"(ACs, Generators have different rules)"})]})]})]}),(0,er.jsxs)("div",{className:"border-b border-gray-200 pb-4",children:[(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Logic Switches"}),(0,er.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Enable specific workflows by toggling these options:"}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsx)("div",{className:"flex items-start p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:(0,er.jsxs)("label",{className:"flex items-start cursor-pointer flex-1",children:[(0,er.jsx)("input",{type:"checkbox",checked:t.is_perishable,onChange:e=>r(Be(Be({},t),{},{is_perishable:e.target.checked})),className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500 mt-1"}),(0,er.jsxs)("div",{className:"ml-3 flex-1",children:[(0,er.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Is Perishable"}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Activates Logic 1.1: System schedules expiry-based alerts. Used for: Vegetables, Milk, Meat (Restaurant)"})]})]})}),(0,er.jsx)("div",{className:"flex items-start p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:(0,er.jsxs)("label",{className:"flex items-start cursor-pointer flex-1",children:[(0,er.jsx)("input",{type:"checkbox",checked:t.is_asset_fixed,onChange:e=>r(Be(Be({},t),{},{is_asset_fixed:e.target.checked})),className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500 mt-1"}),(0,er.jsxs)("div",{className:"ml-3 flex-1",children:[(0,er.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Is Asset / Fixed"}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Activates Logic 2.2 & 6.2: System auto-generates maintenance reminders. Used for: ACs, CCTV, Fire Extinguishers"})]})]})}),(0,er.jsx)("div",{className:"flex items-start p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:(0,er.jsxs)("label",{className:"flex items-start cursor-pointer flex-1",children:[(0,er.jsx)("input",{type:"checkbox",checked:t.is_sellable,onChange:e=>r(Be(Be({},t),{},{is_sellable:e.target.checked})),className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500 mt-1"}),(0,er.jsxs)("div",{className:"ml-3 flex-1",children:[(0,er.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Is Sellable"}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Activates Logic 3.2: If usage exceeds limit, add charge to customer billing. Used for: Minibar drinks, Snacks, Chargeable Toiletries"})]})]})}),(0,er.jsx)("div",{className:"flex items-start p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:(0,er.jsxs)("label",{className:"flex items-start cursor-pointer flex-1",children:[(0,er.jsx)("input",{type:"checkbox",checked:t.track_laundry,onChange:e=>r(Be(Be({},t),{},{track_laundry:e.target.checked})),className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500 mt-1"}),(0,er.jsxs)("div",{className:"ml-3 flex-1",children:[(0,er.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Track Laundry Cycle"}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:'Activates Logic 5.4: Enables "Fresh \u2192 Used \u2192 Laundry \u2192 Fresh" cycle. Used for: Bed sheets, Towels, Robes'})]})]})}),(0,er.jsx)("div",{className:"flex items-start p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:(0,er.jsxs)("label",{className:"flex items-start cursor-pointer flex-1",children:[(0,er.jsx)("input",{type:"checkbox",checked:t.allow_partial_usage,onChange:e=>r(Be(Be({},t),{},{allow_partial_usage:e.target.checked})),className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500 mt-1"}),(0,er.jsxs)("div",{className:"ml-3 flex-1",children:[(0,er.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Allow Partial Usage"}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Activates Logic 1.2: Kitchen raises stock usage request by weight/volume. Used for: Oil (Liters), Rice (Kg)"})]})]})}),(0,er.jsx)("div",{className:"flex items-start p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:(0,er.jsxs)("label",{className:"flex items-start cursor-pointer flex-1",children:[(0,er.jsx)("input",{type:"checkbox",checked:t.consumable_instant,onChange:e=>r(Be(Be({},t),{},{consumable_instant:e.target.checked})),className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500 mt-1"}),(0,er.jsxs)("div",{className:"ml-3 flex-1",children:[(0,er.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Consumable Instant"}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Activates Logic 4.1: System deducts requested quantity immediately upon issuance. Used for: Office Stationery, Paper Cups"})]})]})})]})]}),(0,er.jsxs)("div",{className:"flex justify-end gap-4 pt-4",children:[(0,er.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,er.jsx)("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Save Category"})]})]})]})})}function $te(e){let{form:t,setForm:r,onSubmit:n,onClose:a,isEditing:s}=e;const i=["Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chhattisgarh","Goa","Gujarat","Haryana","Himachal Pradesh","Jharkhand","Karnataka","Kerala","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Odisha","Punjab","Rajasthan","Sikkim","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal","Andaman and Nicobar Islands","Chandigarh","Dadra and Nagar Haveli and Daman and Diu","Delhi","Jammu and Kashmir","Ladakh","Lakshadweep","Puducherry"],o="Regular"===t.gst_registration_type,l="Unregistered"===t.gst_registration_type||"Composition"===t.gst_registration_type,c=e=>{if(!e)return!0;return/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/.test(e.toUpperCase())};return(0,er.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,er.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full mx-4 max-h-[95vh] overflow-y-auto",children:[(0,er.jsxs)("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center sticky top-0 bg-white z-10",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:s?"Update Vendor":"Add Vendor"}),(0,er.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"GST-friendly vendor setup for GSTR compliance"})]}),(0,er.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:(0,er.jsx)(ZQ,{className:"w-6 h-6"})})]}),(0,er.jsxs)("form",{onSubmit:n,className:"p-6 space-y-6",children:[(0,er.jsxs)("div",{className:"border-b border-gray-200 pb-6",children:[(0,er.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[(0,er.jsx)("span",{className:"bg-indigo-100 text-indigo-600 rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold",children:"1"}),"Master Switch - GST Registration Type"]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["GST Registration Type ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsxs)("select",{value:t.gst_registration_type,onChange:e=>{const n=e.target.value;r(Be(Be({},t),{},{gst_registration_type:n,gst_number:"Unregistered"===n||"Composition"===n?"":t.gst_number,pan_number:"Regular"===n?"":t.pan_number}))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-indigo-50",required:!0,children:[(0,er.jsx)("option",{value:"",children:"Select Type"}),(0,er.jsx)("option",{value:"Regular",children:"Regular (With GST) - They charge tax, you get credit"}),(0,er.jsx)("option",{value:"Composition",children:"Composition Scheme (Without GST) - Cannot charge tax"}),(0,er.jsx)("option",{value:"Unregistered",children:"Unregistered (Without GST) - Small vendors, no tax"}),(0,er.jsx)("option",{value:"Overseas (Import)",children:"Overseas (Import)"}),(0,er.jsx)("option",{value:"SEZ",children:"SEZ"})]}),(0,er.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[o&&"\u2713 Regular vendor - GSTIN and Legal Name required",l&&"\u2713 Unregistered/Composition - PAN Number required, GSTIN disabled"]})]}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Trade Name ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("input",{type:"text",value:t.name,onChange:e=>r(Be(Be({},t),{},{name:e.target.value})),placeholder:"e.g., Sharma Sweets",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0})]})]})]}),o&&(0,er.jsxs)("div",{className:"border-b border-gray-200 pb-6 bg-green-50 p-4 rounded-lg",children:[(0,er.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[(0,er.jsx)("span",{className:"bg-green-100 text-green-600 rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold",children:"2"}),'Properties for "With GST" Vendor (Regular)']}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["GSTIN ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("input",{type:"text",value:t.gst_number,onChange:e=>(e=>{const n=e.toUpperCase();if(n.length>=12){const e=n.substring(2,12);r(Be(Be({},t),{},{gst_number:n,pan_number:e}))}else r(Be(Be({},t),{},{gst_number:n}))})(e.target.value),placeholder:"15 characters: 29ABCDE1234F1Z5",maxLength:15,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ".concat(t.gst_number&&!c(t.gst_number)?"border-red-300":"border-gray-300"),required:!0}),t.gst_number&&!c(t.gst_number)&&(0,er.jsx)("p",{className:"text-xs text-red-500 mt-1",children:"Invalid GSTIN format"}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"System validates format automatically"})]}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Legal Name ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("input",{type:"text",value:t.legal_name,onChange:e=>r(Be(Be({},t),{},{legal_name:e.target.value})),placeholder:"Must match GST Portal exactly",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"For GSTR-2B matching"})]}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Billing State ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsxs)("select",{value:t.billing_state,onChange:e=>r(Be(Be({},t),{},{billing_state:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0,children:[(0,er.jsx)("option",{value:"",children:"Select State"}),i.map(e=>(0,er.jsx)("option",{value:e,children:e},e))]}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Determines IGST vs CGST+SGST calculation"})]}),(0,er.jsxs)("div",{className:"flex items-center pt-6",children:[(0,er.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,er.jsx)("input",{type:"checkbox",checked:t.qmp_scheme,onChange:e=>r(Be(Be({},t),{},{qmp_scheme:e.target.checked})),className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),(0,er.jsx)("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"QMP Scheme?"})]}),(0,er.jsx)("span",{className:"ml-2 text-xs text-gray-500",children:"(Quarterly Return Monthly Payment)"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"PAN Number"}),(0,er.jsx)("input",{type:"text",value:t.pan_number,onChange:e=>r(Be(Be({},t),{},{pan_number:e.target.value.toUpperCase()})),placeholder:"Auto-extracted from GSTIN",maxLength:10,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-gray-50",readOnly:!0}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-extracted from GSTIN (chars 3-12)"})]})]})]}),l&&(0,er.jsxs)("div",{className:"border-b border-gray-200 pb-6 bg-orange-50 p-4 rounded-lg",children:[(0,er.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[(0,er.jsx)("span",{className:"bg-orange-100 text-orange-600 rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold",children:"3"}),'Properties for "Without GST" Vendor (',t.gst_registration_type,")"]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["PAN Number ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("input",{type:"text",value:t.pan_number,onChange:e=>r(Be(Be({},t),{},{pan_number:e.target.value.toUpperCase()})),placeholder:"10 characters: ABCDE1234F",maxLength:10,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Mandatory for TDS and annual reporting"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"MSME / Udyam No."}),(0,er.jsx)("input",{type:"text",value:t.msme_udyam_no,onChange:e=>r(Be(Be({},t),{},{msme_udyam_no:e.target.value})),placeholder:"e.g., UDYAM-XX-XXXX-XXXXX",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:'If entered, enforces "Pay within 45 days" rule'})]}),(0,er.jsxs)("div",{className:"md:col-span-2 flex items-center",children:[(0,er.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,er.jsx)("input",{type:"checkbox",checked:t.rcm_applicable,onChange:e=>r(Be(Be({},t),{},{rcm_applicable:e.target.checked})),className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),(0,er.jsxs)("span",{className:"ml-2 text-sm font-medium text-gray-700",children:["RCM Applicable? ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]})]}),(0,er.jsx)("span",{className:"ml-2 text-xs text-gray-500",children:"If Yes: System creates liability for you to pay tax to Govt, but you only pay vendor the base amount"})]}),(0,er.jsx)("div",{className:"md:col-span-2",children:(0,er.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:(0,er.jsxs)("p",{className:"text-xs text-yellow-800",children:[(0,er.jsx)("strong",{children:"Note:"})," GSTIN field is disabled for"," ",t.gst_registration_type," vendors. System will not add tax to PO total."," ",t.rcm_applicable?"RCM will create a separate tax liability entry.":"No tax entry will be created."]})})})]})]}),(0,er.jsxs)("div",{className:"border-b border-gray-200 pb-6",children:[(0,er.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[(0,er.jsx)("span",{className:"bg-indigo-100 text-indigo-600 rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold",children:"4"}),"Shared Properties (For All Vendors)"]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name"}),(0,er.jsx)("input",{type:"text",value:t.company_name,onChange:e=>r(Be(Be({},t),{},{company_name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),!o&&(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Legal Name"}),(0,er.jsx)("input",{type:"text",value:t.legal_name,onChange:e=>r(Be(Be({},t),{},{legal_name:e.target.value})),placeholder:"Legal business name",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]})]}),(0,er.jsxs)("div",{className:"border-b border-gray-200 pb-6",children:[(0,er.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[(0,er.jsx)("span",{className:"bg-indigo-100 text-indigo-600 rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold",children:"5"}),"Address & Place of Supply"]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{className:"md:col-span-2",children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Billing Address ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("textarea",{value:t.billing_address,onChange:e=>r(Be(Be({},t),{},{billing_address:e.target.value})),rows:"3",placeholder:"Full address for tax invoice generation",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0})]}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Billing State ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsxs)("select",{value:t.billing_state,onChange:e=>r(Be(Be({},t),{},{billing_state:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0,children:[(0,er.jsx)("option",{value:"",children:"Select State"}),i.map(e=>(0,er.jsx)("option",{value:e,children:e},e))]}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Determines CGST/SGST vs IGST"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Distance (Km)"}),(0,er.jsx)("input",{type:"number",step:"0.01",min:"0",value:t.distance_km,onChange:e=>r(Be(Be({},t),{},{distance_km:e.target.value?parseFloat(e.target.value):""})),placeholder:"For E-Way Bill generation",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,er.jsxs)("div",{className:"md:col-span-2",children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Shipping Address (If different from Billing)"}),(0,er.jsx)("textarea",{value:t.shipping_address,onChange:e=>r(Be(Be({},t),{},{shipping_address:e.target.value})),rows:"2",placeholder:"Bill To / Ship To model",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]})]}),(0,er.jsxs)("div",{className:"border-b border-gray-200 pb-6",children:[(0,er.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[(0,er.jsx)("span",{className:"bg-indigo-100 text-indigo-600 rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold",children:"6"}),"Contact Information"]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Person"}),(0,er.jsx)("input",{type:"text",value:t.contact_person,onChange:e=>r(Be(Be({},t),{},{contact_person:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,er.jsx)("input",{type:"email",value:t.email,onChange:e=>r(Be(Be({},t),{},{email:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),(0,er.jsx)("input",{type:"text",value:t.phone,onChange:e=>r(Be(Be({},t),{},{phone:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]})]}),(0,er.jsxs)("div",{className:"border-b border-gray-200 pb-6",children:[(0,er.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[(0,er.jsx)("span",{className:"bg-indigo-100 text-indigo-600 rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold",children:"C"}),"Compliance Settings"]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,er.jsxs)("div",{className:"flex items-center",children:[(0,er.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,er.jsx)("input",{type:"checkbox",checked:t.is_msme_registered,onChange:e=>r(Be(Be({},t),{},{is_msme_registered:e.target.checked})),className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),(0,er.jsx)("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"MSME Registered?"})]}),(0,er.jsx)("span",{className:"ml-2 text-xs text-gray-500",children:"(Pay within 45 days)"})]}),(0,er.jsxs)("div",{className:"flex items-center",children:[(0,er.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,er.jsx)("input",{type:"checkbox",checked:t.tds_apply,onChange:e=>r(Be(Be({},t),{},{tds_apply:e.target.checked})),className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),(0,er.jsx)("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"TDS Apply?"})]}),(0,er.jsx)("span",{className:"ml-2 text-xs text-gray-500",children:"(Auto-deduct TDS)"})]}),(0,er.jsxs)("div",{className:"flex items-center",children:[(0,er.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,er.jsx)("input",{type:"checkbox",checked:t.rcm_applicable,onChange:e=>r(Be(Be({},t),{},{rcm_applicable:e.target.checked})),className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),(0,er.jsx)("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"RCM Applicable?"})]}),(0,er.jsx)("span",{className:"ml-2 text-xs text-gray-500",children:"(Reverse Charge)"})]})]})]}),(0,er.jsxs)("div",{className:"border-b border-gray-200 pb-6 bg-blue-50 p-4 rounded-lg",children:[(0,er.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[(0,er.jsx)("span",{className:"bg-blue-100 text-blue-600 rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold",children:"8"}),"Payment & Banking Details"]}),(0,er.jsxs)("p",{className:"text-xs text-blue-700 mb-4 bg-blue-100 p-2 rounded",children:[(0,er.jsx)("strong",{children:"GST 180-Day Rule:"})," To claim ITC, you must pay vendors within 180 days. Accurate bank details prevent payment delays and protect your tax credit."]}),(0,er.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preferred Payment Method"}),(0,er.jsxs)("select",{value:t.preferred_payment_method,onChange:e=>r(Be(Be({},t),{},{preferred_payment_method:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[(0,er.jsx)("option",{value:"",children:"Select Method"}),(0,er.jsx)("option",{value:"Bank Transfer",children:"Bank Transfer (NEFT/RTGS)"}),(0,er.jsx)("option",{value:"UPI",children:"UPI"}),(0,er.jsx)("option",{value:"Cheque",children:"Cheque"}),(0,er.jsx)("option",{value:"Cash",children:"Cash"})]})]})}),"Bank Transfer"===t.preferred_payment_method&&(0,er.jsxs)("div",{className:"mt-4 space-y-4 border-t border-gray-200 pt-4",children:[(0,er.jsx)("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Bank Account Details (For NEFT/RTGS)"}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Account Holder Name"," ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("input",{type:"text",value:t.account_holder_name,onChange:e=>r(Be(Be({},t),{},{account_holder_name:e.target.value})),placeholder:"Should match Legal Name on GST",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ".concat(t.account_holder_name&&t.legal_name&&t.account_holder_name.toLowerCase()!==t.legal_name.toLowerCase()?"border-yellow-300 bg-yellow-50":"border-gray-300"),required:"Bank Transfer"===t.preferred_payment_method}),t.account_holder_name&&t.legal_name&&t.account_holder_name.toLowerCase()!==t.legal_name.toLowerCase()&&(0,er.jsx)("p",{className:"text-xs text-yellow-600 mt-1",children:"\u26a0\ufe0f Name mismatch! Account holder should match Legal Name to prevent fraud."}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Prevents fraud - should match Legal Name"})]}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Bank Name ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("input",{type:"text",value:t.bank_name,onChange:e=>r(Be(Be({},t),{},{bank_name:e.target.value})),placeholder:"e.g., HDFC Bank",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:"Bank Transfer"===t.preferred_payment_method})]}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Account Number ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("input",{type:"text",value:t.account_number,onChange:e=>r(Be(Be({},t),{},{account_number:e.target.value.replace(/\D/g,"")})),placeholder:"9-18 digits",maxLength:18,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ".concat(t.account_number&&t.account_number_confirm&&t.account_number!==t.account_number_confirm?"border-red-300":"border-gray-300"),required:"Bank Transfer"===t.preferred_payment_method}),t.account_number&&(t.account_number.length<9||t.account_number.length>18)&&(0,er.jsx)("p",{className:"text-xs text-red-500 mt-1",children:"Account number must be 9-18 digits"})]}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Confirm Account Number"," ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("input",{type:"text",value:t.account_number_confirm,onChange:e=>r(Be(Be({},t),{},{account_number_confirm:e.target.value.replace(/\D/g,"")})),placeholder:"Re-enter account number",maxLength:18,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ".concat(t.account_number&&t.account_number_confirm&&t.account_number!==t.account_number_confirm?"border-red-300":"border-gray-300"),required:"Bank Transfer"===t.preferred_payment_method}),t.account_number&&t.account_number_confirm&&t.account_number!==t.account_number_confirm&&(0,er.jsx)("p",{className:"text-xs text-red-500 mt-1",children:"Account numbers do not match!"})]}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["IFSC Code ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("input",{type:"text",value:t.ifsc_code,onChange:async e=>{const n=e.target.value.toUpperCase().replace(/[^A-Z0-9]/g,"");if(r(Be(Be({},t),{},{ifsc_code:n})),11===n.length)try{r(e=>Be(Be({},e),{},{branch_name:"Auto-fetched from IFSC"}))}catch(a){console.error("Error fetching branch:",a)}},placeholder:"11 characters: HDFC0001234",maxLength:11,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ".concat(t.ifsc_code&&11!==t.ifsc_code.length?"border-yellow-300":"border-gray-300"),required:"Bank Transfer"===t.preferred_payment_method}),t.ifsc_code&&11!==t.ifsc_code.length&&(0,er.jsx)("p",{className:"text-xs text-yellow-500 mt-1",children:"IFSC code must be exactly 11 characters"}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Critical for routing payments"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Branch Name"}),(0,er.jsx)("input",{type:"text",value:t.branch_name,onChange:e=>r(Be(Be({},t),{},{branch_name:e.target.value})),placeholder:"Auto-fetched from IFSC",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-gray-50",readOnly:!0}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Helpful for verification"})]})]})]}),"UPI"===t.preferred_payment_method&&(0,er.jsxs)("div",{className:"mt-4 space-y-4 border-t border-gray-200 pt-4",children:[(0,er.jsx)("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"UPI Details (For Small/Unregistered Vendors)"}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["UPI ID (VPA) ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("input",{type:"text",value:t.upi_id,onChange:e=>r(Be(Be({},t),{},{upi_id:e.target.value.toLowerCase()})),placeholder:"e.g., shopname@okhdfcbank",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:"UPI"===t.preferred_payment_method}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Allows instant payment via QR code"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mobile Number (Linked)"}),(0,er.jsx)("input",{type:"text",value:t.upi_mobile_number,onChange:e=>r(Be(Be({},t),{},{upi_mobile_number:e.target.value.replace(/\D/g,"").slice(0,10)})),placeholder:"10 digits",maxLength:10,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Alternative lookup for GPay/Paytm"})]})]})]})]}),(0,er.jsxs)("div",{className:"border-b border-gray-200 pb-6",children:[(0,er.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[(0,er.jsx)("span",{className:"bg-indigo-100 text-indigo-600 rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold",children:"9"}),"Additional Information"]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Terms"}),(0,er.jsx)("input",{type:"text",value:t.payment_terms,onChange:e=>r(Be(Be({},t),{},{payment_terms:e.target.value})),placeholder:"e.g., Net 30, COD",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,er.jsx)("div",{className:"flex items-center",children:(0,er.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,er.jsx)("input",{type:"checkbox",checked:t.is_active,onChange:e=>r(Be(Be({},t),{},{is_active:e.target.checked})),className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),(0,er.jsx)("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"Vendor is Active"})]})}),(0,er.jsxs)("div",{className:"md:col-span-2",children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),(0,er.jsx)("textarea",{value:t.notes,onChange:e=>r(Be(Be({},t),{},{notes:e.target.value})),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]})]}),(0,er.jsxs)("div",{className:"flex justify-end gap-4 pt-4",children:[(0,er.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,er.jsx)("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:s?"Update Vendor":"Save Vendor"})]})]})]})})}function Jte(e){let{form:t,setForm:r,items:n,categories:s,vendors:i,locations:l,purchases:c,onSubmit:d,onAddDetail:u,onRemoveDetail:h,onClose:m}=e;const p=()=>{const e=(new Date).toISOString().slice(0,10).replace(/-/g,""),t=c.length+1;return"PO-".concat(e,"-").concat(String(t).padStart(4,"0"))};(0,a.useEffect)(()=>{t.purchase_number||r(Be(Be({},t),{},{purchase_number:p()}))},[]);const f=e=>{const t=parseFloat(e.quantity)||0,r=parseFloat(e.unit_price)||0,n=parseFloat(e.gst_rate)||0,a=parseFloat(e.discount)||0;let s,i,o;if(e.tax_inclusive||!1){s=r/(1+n/100),i=(r-s)*t,o=r*t}else{s=r;const e=(s-a)*t;i=e*n/100,o=e+i}return{basePrice:s,taxAmount:i,netTotal:o}},g=(e,a,s)=>{const i=[...t.details];if("quantity"===a){const t=i[e].item_id,r=n.find(e=>e.id===parseInt(t));i[e][a]=rW(s,null===r||void 0===r?void 0:r.unit)}else i[e]=Be(Be({},i[e]),{},{[a]:s});r(Be(Be({},t),{},{details:i}))};return o.createPortal((0,er.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[10000]",children:(0,er.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-6xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,er.jsxs)("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center",children:[(0,er.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"New Purchase Order"}),(0,er.jsx)("button",{onClick:m,className:"text-gray-400 hover:text-gray-600",children:(0,er.jsx)(ZQ,{className:"w-6 h-6"})})]}),(0,er.jsxs)("form",{onSubmit:d,className:"p-6 space-y-4",children:[(0,er.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"PO Number *"}),(0,er.jsx)("input",{type:"text",value:t.purchase_number,onChange:e=>r(Be(Be({},t),{},{purchase_number:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",required:!0})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Vendor *"}),(0,er.jsxs)("select",{value:t.vendor_id,onChange:e=>r(Be(Be({},t),{},{vendor_id:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",required:!0,children:[(0,er.jsx)("option",{value:"",children:"Select Vendor"}),i.map(e=>(0,er.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purchase Date *"}),(0,er.jsx)("input",{type:"date",value:t.purchase_date,onChange:e=>r(Be(Be({},t),{},{purchase_date:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",required:!0})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expected Delivery"}),(0,er.jsx)("input",{type:"date",value:t.expected_delivery_date,onChange:e=>r(Be(Be({},t),{},{expected_delivery_date:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Invoice Number"}),(0,er.jsx)("input",{type:"text",value:t.invoice_number,onChange:e=>r(Be(Be({},t),{},{invoice_number:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,er.jsxs)("select",{value:t.status,onChange:e=>r(Be(Be({},t),{},{status:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",children:[(0,er.jsx)("option",{value:"draft",children:"Draft"}),(0,er.jsx)("option",{value:"confirmed",children:"Confirmed"}),(0,er.jsx)("option",{value:"received",children:"Received"})]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Method"}),(0,er.jsxs)("select",{value:t.payment_method||"Bank Transfer",onChange:e=>r(Be(Be({},t),{},{payment_method:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",children:[(0,er.jsx)("option",{value:"Cash",children:"Cash"}),(0,er.jsx)("option",{value:"Bank Transfer",children:"Bank Transfer"}),(0,er.jsx)("option",{value:"UPI",children:"UPI"}),(0,er.jsx)("option",{value:"Cheque",children:"Cheque"}),(0,er.jsx)("option",{value:"Credit Card",children:"Credit Card"})]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Status"}),(0,er.jsxs)("select",{value:t.payment_status,onChange:e=>r(Be(Be({},t),{},{payment_status:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",children:[(0,er.jsx)("option",{value:"pending",children:"Pending"}),(0,er.jsx)("option",{value:"partial",children:"Partial"}),(0,er.jsx)("option",{value:"paid",children:"Paid"})]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Destination Location *"}),(0,er.jsxs)("select",{value:t.destination_location_id||"",onChange:e=>r(Be(Be({},t),{},{destination_location_id:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",required:!0,children:[(0,er.jsx)("option",{value:"",children:"Select Destination"}),l.filter(e=>e.is_inventory_point).map(e=>(0,er.jsx)("option",{value:e.id,children:e.name||"".concat(e.building," - ").concat(e.room_area)},e.id))]}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Where items will be stored when received"})]})]}),(0,er.jsxs)("div",{className:"border-t pt-4",children:[(0,er.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Purchase Items (Smart Entry)"}),(0,er.jsxs)("button",{type:"button",onClick:u,className:"px-5 py-2.5 bg-gradient-to-r from-indigo-600 to-indigo-700 text-white font-semibold rounded-lg hover:from-indigo-700 hover:to-indigo-800 flex items-center gap-2 shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200",children:[(0,er.jsx)(r$,{className:"w-5 h-5"}),"Add Item"]})]}),(0,er.jsx)("div",{className:"overflow-x-auto border-2 border-indigo-200 rounded-lg",children:(0,er.jsxs)("table",{className:"w-full",children:[(0,er.jsx)("thead",{className:"bg-indigo-50",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"px-3 py-3 text-left text-sm font-semibold text-indigo-900",children:"Action"}),(0,er.jsx)("th",{className:"px-3 py-3 text-left text-sm font-semibold text-indigo-900",children:"Item Name"}),(0,er.jsx)("th",{className:"px-3 py-3 text-left text-sm font-semibold text-indigo-900",children:"Category"}),(0,er.jsx)("th",{className:"px-3 py-3 text-left text-sm font-semibold text-indigo-900",children:"HSN Code"}),(0,er.jsx)("th",{className:"px-3 py-3 text-left text-sm font-semibold text-indigo-900",children:"Unit"}),(0,er.jsx)("th",{className:"px-3 py-3 text-left text-sm font-semibold text-indigo-900",children:"Serial/Batch"}),(0,er.jsx)("th",{className:"px-3 py-3 text-left text-sm font-semibold text-indigo-900",children:"Expiry Date"}),(0,er.jsx)("th",{className:"px-3 py-3 text-left text-sm font-semibold text-indigo-900",children:"Quantity"}),(0,er.jsx)("th",{className:"px-3 py-3 text-left text-sm font-semibold text-indigo-900",children:"Unit Price"}),(0,er.jsx)("th",{className:"px-3 py-3 text-left text-sm font-semibold text-indigo-900",children:"Tax Inc?"}),(0,er.jsx)("th",{className:"px-3 py-3 text-left text-sm font-semibold text-indigo-900",children:"GST %"}),(0,er.jsx)("th",{className:"px-3 py-3 text-left text-sm font-semibold text-indigo-900",children:"Tax Amt"}),(0,er.jsx)("th",{className:"px-3 py-3 text-left text-sm font-semibold text-indigo-900",children:"Net Total"})]})}),(0,er.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.details.map((e,a)=>{var i,o,l,c;const d=(e=>{const t=n.find(t=>t.id===parseInt(e));if(!t)return null;const r=s.find(e=>e.id===t.category_id);return{item:t,category:r}})(e.item_id),u=(null===d||void 0===d||null===(i=d.category)||void 0===i?void 0:i.is_perishable)||(null===d||void 0===d||null===(o=d.item)||void 0===o?void 0:o.is_perishable),m=(null===d||void 0===d||null===(l=d.category)||void 0===l?void 0:l.is_asset_fixed)||(null===d||void 0===d||null===(c=d.item)||void 0===c?void 0:c.is_asset_fixed),p=u||m,x=u,{taxAmount:y,netTotal:v}=f(e);return(0,er.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[(0,er.jsx)("td",{className:"px-2 py-2",children:(0,er.jsx)("button",{type:"button",onClick:()=>h(a),className:"p-1 text-red-600 hover:text-red-800 hover:bg-red-50 rounded",title:"Remove Item",children:(0,er.jsx)(Qq,{className:"w-4 h-4"})})}),(0,er.jsx)("td",{className:"px-3 py-3",children:(0,er.jsxs)("select",{value:e.item_id,onChange:e=>((e,a)=>{const i=n.find(e=>e.id===parseInt(a));if(!i)return;const o=s.find(e=>e.id===i.category_id),l=[...t.details];l[e]=Be(Be({},l[e]),{},{item_id:a,category:(null===o||void 0===o?void 0:o.name)||"",hsn_code:i.hsn_code||"",unit:i.unit||"pcs",gst_rate:i.gst_rate||(null===o||void 0===o?void 0:o.gst_tax_rate)||0}),r(Be(Be({},t),{},{details:l}))})(a,e.target.value),className:"w-full px-3 py-2 text-sm font-semibold border-2 border-indigo-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white",required:!0,children:[(0,er.jsx)("option",{value:"",children:"Select Item"}),n.map(e=>(0,er.jsx)("option",{value:e.id,children:e.name},e.id))]})}),(0,er.jsx)("td",{className:"px-2 py-2",children:(0,er.jsx)("input",{type:"text",value:e.category||"",readOnly:!0,className:"w-full px-2 py-1 text-xs border border-gray-200 bg-gray-50 rounded text-gray-600",placeholder:"Auto-filled"})}),(0,er.jsx)("td",{className:"px-2 py-2",children:(0,er.jsx)("input",{type:"text",value:e.hsn_code||"",readOnly:!0,className:"w-full px-2 py-1 text-xs border border-gray-200 bg-gray-50 rounded text-gray-600",placeholder:"Auto-filled"})}),(0,er.jsx)("td",{className:"px-2 py-2",children:(0,er.jsx)("input",{type:"text",value:e.unit||"",readOnly:!0,className:"w-full px-2 py-1 text-xs border border-gray-200 bg-gray-50 rounded text-gray-600",placeholder:"Auto-filled"})}),(0,er.jsx)("td",{className:"px-2 py-2",children:p?(0,er.jsx)("input",{type:"text",value:e.serial_batch||"",onChange:e=>g(a,"serial_batch",e.target.value),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500",placeholder:"Serial/Batch"}):(0,er.jsx)("span",{className:"text-gray-400 text-xs",children:"-"})}),(0,er.jsx)("td",{className:"px-2 py-2",children:x?(0,er.jsx)("input",{type:"date",value:e.expiry_date||"",onChange:e=>g(a,"expiry_date",e.target.value),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500"}):(0,er.jsx)("span",{className:"text-gray-400 text-xs",children:"-"})}),(0,er.jsx)("td",{className:"px-2 py-2",children:(0,er.jsx)("input",{type:"number",step:"0.01",min:"0",value:e.quantity||0,onChange:e=>g(a,"quantity",parseFloat(e.target.value)||0),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500",required:!0})}),(0,er.jsx)("td",{className:"px-2 py-2",children:(0,er.jsx)("input",{type:"number",step:"0.01",min:"0",value:e.unit_price||0,onChange:e=>g(a,"unit_price",parseFloat(e.target.value)||0),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500",required:!0})}),(0,er.jsx)("td",{className:"px-2 py-2",children:(0,er.jsx)("input",{type:"checkbox",checked:e.tax_inclusive||!1,onChange:e=>g(a,"tax_inclusive",e.target.checked),className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500",title:"Tax Inclusive"})}),(0,er.jsx)("td",{className:"px-2 py-2",children:(0,er.jsx)("input",{type:"number",step:"0.01",min:"0",max:"100",value:e.gst_rate||0,onChange:e=>g(a,"gst_rate",parseFloat(e.target.value)||0),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500"})}),(0,er.jsx)("td",{className:"px-2 py-2",children:(0,er.jsx)("span",{className:"text-xs font-medium text-gray-700",children:ym(y)})}),(0,er.jsx)("td",{className:"px-2 py-2",children:(0,er.jsx)("span",{className:"text-xs font-semibold text-indigo-600",children:ym(v)})})]},a)})})]})}),(0,er.jsx)("div",{className:"mt-4 pt-4 border-t flex justify-end",children:(0,er.jsxs)("div",{className:"text-right",children:[(0,er.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Grand Total:"}),(0,er.jsx)("div",{className:"text-2xl font-bold text-indigo-600",children:ym(t.details.reduce((e,t)=>{if(!t.item_id)return e;const{netTotal:r}=f(t);return e+r},0))})]})})]}),(0,er.jsxs)("div",{className:"flex justify-end gap-4 pt-4 border-t",children:[(0,er.jsx)("button",{type:"button",onClick:m,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,er.jsx)("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Create Purchase Order"})]})]})]})}),document.body)}function Zte(e){var t,n;let{purchase:s,onClose:i,onUpdate:l}=e;const[c,d]=(0,a.useState)(!1),[u,h]=(0,a.useState)(!1),[m,p]=(0,a.useState)((null===s||void 0===s?void 0:s.status)||"draft"),[f,g]=(0,a.useState)((null===s||void 0===s?void 0:s.payment_status)||"pending"),[x,y]=(0,a.useState)(!1),[v,b]=(0,a.useState)(!1);if((0,a.useEffect)(()=>{s&&(p(s.status||"draft"),g(s.payment_status||"pending"))},[s]),!s)return null;const j=()=>{const e=document.getElementById("purchase-details-".concat(s.id));if(!e)return;const t=window.open("","_blank");t.document.write("\n      <html>\n        <head>\n          <title>Purchase Order - ".concat(s.purchase_number,"</title>\n          <style>\n            body { font-family: Arial, sans-serif; margin: 20px; }\n            .header { border-bottom: 2px solid #333; padding-bottom: 20px; margin-bottom: 20px; }\n            .header h1 { margin: 0; color: #1e40af; }\n            .info-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin: 20px 0; }\n            .info-item { margin: 10px 0; }\n            .info-label { font-weight: bold; color: #666; font-size: 12px; }\n            .info-value { font-size: 14px; margin-top: 5px; }\n            table { width: 100%; border-collapse: collapse; margin: 20px 0; }\n            th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }\n            th { background-color: #f3f4f6; font-weight: bold; }\n            .totals { margin-top: 20px; text-align: right; }\n            .totals div { margin: 5px 0; }\n            .grand-total { font-size: 18px; font-weight: bold; border-top: 2px solid #333; padding-top: 10px; }\n            @media print {\n              .no-print { display: none; }\n            }\n          </style>\n        </head>\n        <body>\n          ").concat(e.innerHTML,"\n        </body>\n      </html>\n    ")),t.document.close(),t.focus(),setTimeout(()=>{t.print(),t.close()},250)},w=[{value:"draft",label:"Draft",color:"bg-gray-100 text-gray-800"},{value:"confirmed",label:"Confirmed",color:"bg-blue-100 text-blue-800"},{value:"received",label:"Received",color:"bg-green-100 text-green-800"},{value:"cancelled",label:"Cancelled",color:"bg-red-100 text-red-800"}];return o.createPortal((0,er.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[10000]",children:(0,er.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-5xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,er.jsxs)("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center sticky top-0 bg-white z-10",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Purchase Order Details"}),(0,er.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["PO Number: ",s.purchase_number]})]}),(0,er.jsxs)("div",{className:"flex items-center gap-2",children:[(0,er.jsxs)("div",{className:"relative",children:[(0,er.jsxs)("button",{onClick:()=>y(!x),disabled:c,className:"px-3 py-2 text-sm font-medium rounded-lg border border-gray-300 hover:bg-gray-50 flex items-center gap-2 disabled:opacity-50",children:[(0,er.jsx)("span",{children:"Status:"}),(0,er.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat("received"===m?"bg-green-100 text-green-800":"confirmed"===m?"bg-blue-100 text-blue-800":"cancelled"===m?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:(null===(t=w.find(e=>e.value===m))||void 0===t?void 0:t.label)||m}),c?"...":"\u25bc"]}),x&&(0,er.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-20",children:w.map(e=>(0,er.jsx)("button",{onClick:()=>(async e=>{if(e!==m){d(!0);try{const t=localStorage.getItem("token"),r=Pa(),n=await fetch("".concat(r,"/inventory/purchases/").concat(s.id,"/status?status=").concat(e),{method:"PATCH",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(n.ok)p(e),l&&l(Be(Be({},s),{},{status:e})),alert("Status updated successfully!");else{const e=await n.json();alert("Failed to update status: ".concat(e.detail||"Unknown error"))}}catch(t){console.error("Error updating status:",t),alert("Failed to update status. Please try again.")}finally{d(!1),y(!1)}}else y(!1)})(e.value),disabled:c||e.value===m,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed ".concat(e.value===m?"bg-indigo-50":""),children:(0,er.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat(e.color),children:e.label})},e.value))})]}),(0,er.jsxs)("div",{className:"relative",children:[(0,er.jsxs)("button",{onClick:()=>b(!v),disabled:u,className:"px-3 py-2 text-sm font-medium rounded-lg border border-gray-300 hover:bg-gray-50 flex items-center gap-2 disabled:opacity-50",children:[(0,er.jsx)("span",{children:"Payment:"}),(0,er.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat("paid"===f?"bg-green-100 text-green-800":"partial"===f?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:f}),u?"...":"\u25bc"]}),v&&(0,er.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-20",children:[{value:"pending",label:"Pending",color:"bg-gray-100 text-gray-800"},{value:"partial",label:"Partial",color:"bg-yellow-100 text-yellow-800"},{value:"paid",label:"Paid",color:"bg-green-100 text-green-800"}].map(e=>(0,er.jsx)("button",{onClick:()=>(async e=>{if(e!==f){h(!0);try{const t=localStorage.getItem("token"),r=Pa(),n=await fetch("".concat(r,"/inventory/purchases/").concat(s.id),{method:"PUT",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({payment_status:e})});if(n.ok)g(e),l&&l(Be(Be({},s),{},{payment_status:e})),alert("Payment status updated successfully!");else{const e=await n.json();alert("Failed to update payment status: ".concat(e.detail||"Unknown error"))}}catch(t){console.error("Error updating payment status:",t),alert("Failed to update payment status. Please try again.")}finally{h(!1),b(!1)}}else b(!1)})(e.value),disabled:u||e.value===f,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed ".concat(e.value===f?"bg-indigo-50":""),children:(0,er.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat(e.color),children:e.label})},e.value))})]}),(0,er.jsxs)("button",{onClick:j,className:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",title:"Print",children:[(0,er.jsx)(Ote,{className:"w-4 h-4"}),"Print"]}),(0,er.jsxs)("button",{onClick:async()=>{try{const e=document.getElementById("purchase-details-".concat(s.id));if(!e)return;const{default:t}=await Promise.resolve().then(r.bind(r,7762)),n=(await r.e(239).then(r.t.bind(r,5239,23))).default,a=await n(e,{scale:2,useCORS:!0,logging:!1}),i=a.toDataURL("image/png"),o=new t("p","mm","a4"),l=210,c=295,d=a.height*l/a.width;let u=d,h=0;for(o.addImage(i,"PNG",0,h,l,d),u-=c;u>0;)h=u-d,o.addPage(),o.addImage(i,"PNG",0,h,l,d),u-=c;o.save("Purchase_Order_".concat(s.purchase_number,".pdf"))}catch(e){console.error("Error exporting PDF:",e),alert("PDF export failed. Using print instead."),j()}},className:"px-3 py-2 text-sm font-medium text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 flex items-center gap-2",title:"Export as PDF",children:[(0,er.jsx)(Dte,{className:"w-4 h-4"}),"PDF"]}),(0,er.jsx)("button",{onClick:()=>{navigator.share?navigator.share({title:"Purchase Order ".concat(s.purchase_number),text:"Purchase Order ".concat(s.purchase_number," - ").concat(s.vendor_name),url:window.location.href}).catch(()=>{}):(navigator.clipboard.writeText("Purchase Order: ".concat(s.purchase_number,"\nVendor: ").concat(s.vendor_name,"\nTotal: ").concat(ym(s.total_amount))),alert("Purchase details copied to clipboard!"))},className:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",title:"Share",children:(0,er.jsx)(Ite,{className:"w-4 h-4"})}),(0,er.jsx)("button",{onClick:i,className:"text-gray-400 hover:text-gray-600",children:(0,er.jsx)(ZQ,{className:"w-6 h-6"})})]})]}),(0,er.jsxs)("div",{id:"purchase-details-".concat(s.id),className:"p-6 space-y-6",children:[(0,er.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 p-4 bg-gray-50 rounded-lg",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Vendor"}),(0,er.jsx)("p",{className:"text-sm font-semibold text-gray-900 mt-1",children:s.vendor_name||"-"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Destination Location"}),(0,er.jsx)("p",{className:"text-sm font-semibold text-indigo-600 mt-1",children:s.destination_location_name||"Not specified"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Purchase Date"}),(0,er.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:new Date(s.purchase_date).toLocaleDateString()})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Status"}),(0,er.jsx)("p",{className:"mt-1",children:(0,er.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat("received"===m?"bg-green-100 text-green-800":"confirmed"===m?"bg-blue-100 text-blue-800":"cancelled"===m?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:(null===(n=w.find(e=>e.value===m))||void 0===n?void 0:n.label)||m})})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Payment Status"}),(0,er.jsx)("p",{className:"mt-1",children:(0,er.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat("paid"===f?"bg-green-100 text-green-800":"partial"===f?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:f})})]})]}),(0,er.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[s.destination_location_name&&(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Destination Location"}),(0,er.jsx)("p",{className:"text-sm text-gray-900 mt-1 font-medium text-indigo-600",children:s.destination_location_name})]}),s.expected_delivery_date&&(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Expected Delivery"}),(0,er.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:y$(s.expected_delivery_date)})]}),s.invoice_number&&(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Invoice Number"}),(0,er.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:s.invoice_number})]}),s.invoice_date&&(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Invoice Date"}),(0,er.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:new Date(s.invoice_date).toLocaleDateString()})]}),s.gst_number&&(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"GST Number"}),(0,er.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:s.gst_number})]}),s.payment_terms&&(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Payment Terms"}),(0,er.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:s.payment_terms})]}),s.created_by_name&&(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Created By"}),(0,er.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:s.created_by_name})]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Purchase Items"}),(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,er.jsx)("thead",{className:"bg-gray-50",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Item"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"HSN Code"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Quantity"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Unit"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Unit Price"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"GST %"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Discount"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"CGST"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"SGST"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"IGST"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total"})]})}),(0,er.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:s.details&&s.details.length>0?s.details.map((e,t)=>(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.item_name||"-"}),(0,er.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.hsn_code||"-"}),(0,er.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.quantity||0}),(0,er.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.unit||"-"}),(0,er.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:ym(e.unit_price||0)}),(0,er.jsxs)("td",{className:"px-4 py-3 text-sm text-gray-600",children:[e.gst_rate||0,"%"]}),(0,er.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:ym(e.discount||0)}),(0,er.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:ym(e.cgst_amount||0)}),(0,er.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:ym(e.sgst_amount||0)}),(0,er.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:ym(e.igst_amount||0)}),(0,er.jsx)("td",{className:"px-4 py-3 text-sm font-semibold text-gray-900",children:ym(e.total_amount||0)})]},e.id||t)):(0,er.jsx)("tr",{children:(0,er.jsx)("td",{colSpan:"11",className:"px-4 py-8 text-center text-gray-500",children:"No items found"})})})]})})]}),(0,er.jsx)("div",{className:"border-t pt-4",children:(0,er.jsx)("div",{className:"flex justify-end",children:(0,er.jsxs)("div",{className:"w-full max-w-md space-y-2",children:[(0,er.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,er.jsx)("span",{className:"text-gray-600",children:"Sub Total:"}),(0,er.jsx)("span",{className:"font-medium text-gray-900",children:ym(s.sub_total||0)})]}),s.cgst>0&&(0,er.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,er.jsx)("span",{className:"text-gray-600",children:"CGST:"}),(0,er.jsx)("span",{className:"font-medium text-gray-900",children:ym(s.cgst||0)})]}),s.sgst>0&&(0,er.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,er.jsx)("span",{className:"text-gray-600",children:"SGST:"}),(0,er.jsx)("span",{className:"font-medium text-gray-900",children:ym(s.sgst||0)})]}),s.igst>0&&(0,er.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,er.jsx)("span",{className:"text-gray-600",children:"IGST:"}),(0,er.jsx)("span",{className:"font-medium text-gray-900",children:ym(s.igst||0)})]}),s.discount>0&&(0,er.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,er.jsx)("span",{className:"text-gray-600",children:"Discount:"}),(0,er.jsxs)("span",{className:"font-medium text-red-600",children:["-",ym(s.discount||0)]})]}),(0,er.jsxs)("div",{className:"flex justify-between text-lg font-bold pt-2 border-t",children:[(0,er.jsx)("span",{className:"text-gray-900",children:"Grand Total:"}),(0,er.jsx)("span",{className:"text-indigo-600",children:ym(s.total_amount||0)})]})]})})}),s.notes&&(0,er.jsxs)("div",{className:"border-t pt-4",children:[(0,er.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Notes"}),(0,er.jsx)("p",{className:"text-sm text-gray-600 mt-1 bg-gray-50 p-3 rounded-lg",children:s.notes})]}),(0,er.jsx)("div",{className:"flex justify-end pt-4 border-t",children:(0,er.jsx)("button",{onClick:i,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Close"})})]})]})}),document.body)}function ere(e){let{form:t,setForm:r,items:n,locations:s,requisitions:i,onSubmit:l,onAddDetail:c,onRemoveDetail:d,onClose:u}=e;const[h,m]=(0,a.useState)([]);(0,a.useEffect)(()=>{t.source_location_id?Ia.get("/inventory/locations/".concat(t.source_location_id,"/items")).then(e=>{m(e.data.items||[])}).catch(e=>{console.error("Failed to fetch location items",e),m([])}):m([])},[t.source_location_id]);const p=(0,a.useCallback)(e=>{var r;if(!t.source_location_id)return(null===(r=n.find(t=>t.id===e))||void 0===r?void 0:r.current_stock)||0;const a=h.find(t=>t.item_id===e);return a&&void 0!==a.location_stock?a.location_stock:0},[t.source_location_id,n,h]),f=(0,a.useMemo)(()=>t.source_location_id?n.filter(e=>p(e.id)>0):n,[n,t.source_location_id,p]);return o.createPortal((0,er.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[10000]",children:(0,er.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,er.jsxs)("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center sticky top-0 bg-white z-10",children:[(0,er.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"New Stock Issue"}),(0,er.jsx)("button",{onClick:u,className:"text-gray-400 hover:text-gray-600",children:(0,er.jsx)(ZQ,{className:"w-6 h-6"})})]}),(0,er.jsxs)("form",{onSubmit:l,className:"p-6 space-y-6",children:[(0,er.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Linked Requisition (Optional)",(0,er.jsx)("span",{className:"ml-2 text-xs text-gray-500 font-normal",children:"(Link to a pending requisition if issuing from a request)"})]}),(0,er.jsxs)("select",{value:t.requisition_id,onChange:e=>{const a=e.target.value;let s=t.details;if(a){const e=i.find(e=>e.id===parseInt(a));null!==e&&void 0!==e&&e.details&&(s=e.details.map(t=>{var r,a;return{item_id:t.item_id,issued_quantity:t.requested_quantity||t.approved_quantity,unit:t.unit,cost:(null===(r=n.find(e=>e.id===t.item_id))||void 0===r?void 0:r.last_purchase_price)||(null===(a=n.find(e=>e.id===t.item_id))||void 0===a?void 0:a.unit_price)||0,notes:"From ".concat(e.requisition_number),batch_lot_number:""}}))}r(Be(Be({},t),{},{requisition_id:a,details:s.length>0?s:t.details}))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",children:[(0,er.jsx)("option",{value:"",children:"None - Direct Issue"}),i.filter(e=>"pending"===e.status||"approved"===e.status).map(e=>(0,er.jsxs)("option",{value:e.id,children:[e.requisition_number," - ",e.destination_department]},e.id))]}),0===i.filter(e=>"pending"===e.status||"approved"===e.status).length&&(0,er.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:'No pending requisitions. Create one in the "Requisitions" tab first.'})]}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Source Location *",(0,er.jsx)("span",{className:"ml-2 text-xs text-gray-500 font-normal",children:"(Where stock is coming FROM - must be an Inventory Point)"})]}),(0,er.jsxs)("select",{value:t.source_location_id,onChange:e=>r(Be(Be({},t),{},{source_location_id:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",required:!0,children:[(0,er.jsx)("option",{value:"",children:"Select Source"}),s.filter(e=>e.is_inventory_point).map(e=>(0,er.jsx)("option",{value:e.id,children:e.name||"".concat(e.building," - ").concat(e.room_area)},e.id))]}),0===s.filter(e=>e.is_inventory_point).length&&(0,er.jsx)("p",{className:"mt-1 text-xs text-red-600",children:'\u26a0\ufe0f No inventory points found! Create a warehouse location with "Is Inventory Point" = Yes in the Locations tab.'})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Destination Location *"}),(0,er.jsxs)("select",{value:t.destination_location_id,onChange:e=>r(Be(Be({},t),{},{destination_location_id:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",required:!0,children:[(0,er.jsx)("option",{value:"",children:"Select Destination"}),s.map(e=>(0,er.jsx)("option",{value:e.id,children:e.name||"".concat(e.building," - ").concat(e.room_area)},e.id))]})]})]}),(0,er.jsx)("div",{className:"grid grid-cols-2 gap-4",children:(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Issue Date *"}),(0,er.jsx)("input",{type:"date",value:t.issue_date,onChange:e=>r(Be(Be({},t),{},{issue_date:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",required:!0})]})}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),(0,er.jsx)("textarea",{value:t.notes,onChange:e=>r(Be(Be({},t),{},{notes:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",rows:"2"})]}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Issued Items"}),(0,er.jsxs)("button",{type:"button",onClick:c,className:"px-3 py-1 bg-indigo-600 text-white text-sm rounded-lg hover:bg-indigo-700 flex items-center gap-1",children:[(0,er.jsx)(r$,{className:"w-4 h-4"}),"Add Item"]})]}),(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,er.jsx)("thead",{className:"bg-gray-50",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Item"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Issued Qty"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Unit"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Batch/Lot No"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Cost"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Notes"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Action"})]})}),(0,er.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.details.map((e,a)=>{n.find(t=>t.id===parseInt(e.item_id));return(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{className:"px-3 py-2",children:(0,er.jsxs)("select",{value:e.item_id,onChange:e=>{const s=[...t.details];s[a].item_id=e.target.value;const i=n.find(t=>t.id===parseInt(e.target.value));i&&(s[a].unit=i.unit||"pcs",s[a].cost=i.last_purchase_price||i.unit_price||0),r(Be(Be({},t),{},{details:s}))},className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500",required:!0,children:[(0,er.jsx)("option",{value:"",children:"Select Item"}),f.map(e=>(0,er.jsxs)("option",{value:e.id,disabled:p(e.id)<=0,children:[e.name," (Stock: ",p(e.id),")"]},e.id))]})}),(0,er.jsx)("td",{className:"px-3 py-2",children:(()=>{const s=n.find(t=>t.id==e.item_id),i=s?s.current_stock:0;return(0,er.jsxs)("div",{children:[(0,er.jsx)("input",{type:"number",max:i,value:e.issued_quantity,onChange:e=>{const n=parseFloat(e.target.value);s&&n>i&&Tt.error("Only ".concat(i," available"));const o=[...t.details];o[a]=Be(Be({},o[a]),{},{issued_quantity:n||0}),r(Be(Be({},t),{},{details:o}))},className:"w-full px-3 py-2 border rounded-lg ".concat(e.issued_quantity>i?"border-red-500":"border-gray-300"),placeholder:"0"}),e.issued_quantity>i&&(0,er.jsx)("p",{className:"text-xs text-red-600 mt-1",children:"Exceeds available stock!"})]})})()}),(0,er.jsx)("td",{className:"px-3 py-2",children:(0,er.jsx)("input",{type:"text",value:e.unit,disabled:!0,className:"w-full px-2 py-1 text-sm border border-gray-200 rounded bg-gray-50 text-gray-600"})}),(0,er.jsx)("td",{className:"px-3 py-2",children:(0,er.jsx)("input",{type:"text",value:e.batch_lot_number,onChange:e=>{const n=[...t.details];n[a].batch_lot_number=e.target.value,r(Be(Be({},t),{},{details:n}))},className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500",placeholder:"Optional"})}),(0,er.jsx)("td",{className:"px-3 py-2",children:(0,er.jsx)("input",{type:"number",step:"0.01",value:e.cost,onChange:e=>{const n=[...t.details];n[a].cost=parseFloat(e.target.value)||0,r(Be(Be({},t),{},{details:n}))},className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500",placeholder:"0.00"})}),(0,er.jsx)("td",{className:"px-3 py-2",children:(0,er.jsx)("input",{type:"text",value:e.notes,onChange:e=>{const n=[...t.details];n[a].notes=e.target.value,r(Be(Be({},t),{},{details:n}))},className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500",placeholder:"Optional"})}),(0,er.jsx)("td",{className:"px-3 py-2",children:(0,er.jsx)("button",{type:"button",onClick:()=>d(a),className:"text-red-600 hover:text-red-800",children:(0,er.jsx)(Qq,{className:"w-4 h-4"})})})]},a)})})]})})]}),(0,er.jsxs)("div",{className:"flex justify-end gap-4 pt-4 border-t border-gray-200",children:[(0,er.jsx)("button",{type:"button",onClick:u,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,er.jsx)("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Create Issue"})]})]})]})}),document.body)}function tre(e){let{form:t,setForm:r,items:n,onSubmit:a,onAddDetail:s,onRemoveDetail:i,onClose:o}=e;return(0,er.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,er.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,er.jsxs)("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center sticky top-0 bg-white z-10",children:[(0,er.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"New Requisition"}),(0,er.jsx)("button",{onClick:o,className:"text-gray-400 hover:text-gray-600",children:(0,er.jsx)(ZQ,{className:"w-6 h-6"})})]}),(0,er.jsxs)("form",{onSubmit:a,className:"p-6 space-y-6",children:[(0,er.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Destination Department *"}),(0,er.jsxs)("select",{value:t.destination_department,onChange:e=>r(Be(Be({},t),{},{destination_department:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",required:!0,children:[(0,er.jsx)("option",{value:"",children:"Select Department"}),["Kitchen Main","Housekeeping","Office","Restaurant","Facility","Security","Fire & Safety"].map(e=>(0,er.jsx)("option",{value:e,children:e},e))]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date Needed"}),(0,er.jsx)("input",{type:"date",value:t.date_needed,onChange:e=>r(Be(Be({},t),{},{date_needed:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority *"}),(0,er.jsxs)("select",{value:t.priority,onChange:e=>r(Be(Be({},t),{},{priority:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",required:!0,children:[(0,er.jsx)("option",{value:"normal",children:"Normal"}),(0,er.jsx)("option",{value:"urgent",children:"Urgent"}),(0,er.jsx)("option",{value:"critical",children:"Critical"})]})]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),(0,er.jsx)("textarea",{value:t.notes,onChange:e=>r(Be(Be({},t),{},{notes:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",rows:"2"})]}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Requested Items"}),(0,er.jsxs)("button",{type:"button",onClick:s,className:"px-3 py-1 bg-indigo-600 text-white text-sm rounded-lg hover:bg-indigo-700 flex items-center gap-1",children:[(0,er.jsx)(r$,{className:"w-4 h-4"}),"Add Item"]})]}),(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,er.jsx)("thead",{className:"bg-gray-50",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Item"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Current Stock"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Requested Qty"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Approved Qty"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Unit"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Notes"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Action"})]})}),(0,er.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.details.map((e,a)=>{const s=n.find(t=>t.id===parseInt(e.item_id));return(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{className:"px-3 py-2",children:(0,er.jsxs)("select",{value:e.item_id,onChange:e=>{const s=[...t.details];s[a].item_id=e.target.value;const i=n.find(t=>t.id===parseInt(e.target.value));i&&(s[a].unit=i.unit||"pcs"),r(Be(Be({},t),{},{details:s}))},className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500",required:!0,children:[(0,er.jsx)("option",{value:"",children:"Select Item"}),n.map(e=>(0,er.jsx)("option",{value:e.id,children:e.name},e.id))]})}),(0,er.jsx)("td",{className:"px-3 py-2",children:(0,er.jsx)("input",{type:"text",value:s?s.current_stock||0:"N/A",disabled:!0,className:"w-full px-2 py-1 text-sm border border-gray-200 rounded bg-gray-50 text-gray-600"})}),(0,er.jsx)("td",{className:"px-3 py-2",children:(0,er.jsx)("input",{type:"number",step:"0.01",value:e.requested_quantity,onChange:e=>{const n=[...t.details];n[a].requested_quantity=parseFloat(e.target.value)||0,r(Be(Be({},t),{},{details:n}))},className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500",required:!0})}),(0,er.jsx)("td",{className:"px-3 py-2",children:(0,er.jsx)("input",{type:"number",step:"0.01",value:e.approved_quantity||"",onChange:e=>{const n=[...t.details];n[a].approved_quantity=e.target.value?parseFloat(e.target.value):null,r(Be(Be({},t),{},{details:n}))},className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500",placeholder:"Manager"})}),(0,er.jsx)("td",{className:"px-3 py-2",children:(0,er.jsx)("input",{type:"text",value:e.unit,readOnly:!0,className:"w-full px-2 py-1 text-sm border border-gray-200 rounded bg-gray-100"})}),(0,er.jsx)("td",{className:"px-3 py-2",children:(0,er.jsx)("input",{type:"text",value:e.notes,onChange:e=>{const n=[...t.details];n[a].notes=e.target.value,r(Be(Be({},t),{},{details:n}))},className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500",placeholder:"Reason"})}),(0,er.jsx)("td",{className:"px-3 py-2",children:(0,er.jsx)("button",{type:"button",onClick:()=>i(a),className:"text-red-600 hover:text-red-900",children:(0,er.jsx)(Qq,{className:"w-4 h-4"})})})]},a)})})]})})]}),(0,er.jsxs)("div",{className:"flex justify-end gap-4 pt-4 border-t",children:[(0,er.jsx)("button",{type:"button",onClick:o,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,er.jsx)("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Create Requisition"})]})]})]})})}function rre(e){let{form:t,setForm:r,items:n=[],foodItems:a=[],locations:s=[],onSubmit:i,onClose:o}=e;return(0,er.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[10000] p-2 sm:p-4",children:(0,er.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,er.jsxs)("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center",children:[(0,er.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Report Waste / Spoilage"}),(0,er.jsx)("button",{onClick:o,className:"text-gray-400 hover:text-gray-600",children:(0,er.jsx)(ZQ,{className:"w-6 h-6"})})]}),(0,er.jsxs)("form",{onSubmit:i,className:"p-6 space-y-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Item *"}),(0,er.jsxs)("select",{value:t.item_id||t.food_item_id||"",onChange:e=>{var s;const i=e.target.value;if("food"===(null===(s=e.target.selectedOptions[0])||void 0===s?void 0:s.dataset.type)){const e=a.find(e=>e.id===parseInt(i));r(Be(Be({},t),{},{food_item_id:i,item_id:"",is_food_item:!0,unit:(null===e||void 0===e?void 0:e.unit)||"pcs"}))}else{const e=n.find(e=>e.id===parseInt(i));r(Be(Be({},t),{},{item_id:i,food_item_id:"",is_food_item:!1,unit:(null===e||void 0===e?void 0:e.unit)||"pcs"}))}},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",required:!0,children:[(0,er.jsx)("option",{value:"",children:"Select Item"}),(0,er.jsx)("optgroup",{label:"Inventory Items (Raw Materials)",children:n.map(e=>(0,er.jsx)("option",{value:e.id,"data-type":"inventory",children:e.name},"inv-".concat(e.id)))}),(0,er.jsx)("optgroup",{label:"Food Items (Prepared Dishes)",children:a.map(e=>(0,er.jsx)("option",{value:e.id,"data-type":"food",children:e.name},"food-".concat(e.id)))})]})]}),(0,er.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Batch Number"}),(0,er.jsx)("input",{type:"text",value:t.batch_number,onChange:e=>r(Be(Be({},t),{},{batch_number:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiry Date"}),(0,er.jsx)("input",{type:"date",value:t.expiry_date,onChange:e=>r(Be(Be({},t),{},{expiry_date:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"})]})]}),(0,er.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity *"}),(0,er.jsx)("input",{type:"number",step:"0.01",value:t.quantity,onChange:e=>r(Be(Be({},t),{},{quantity:parseFloat(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",required:!0})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),(0,er.jsx)("input",{type:"text",value:t.unit,readOnly:!0,className:"w-full px-3 py-2 border border-gray-200 rounded bg-gray-100"})]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason Code *"}),(0,er.jsxs)("select",{value:t.reason_code,onChange:e=>r(Be(Be({},t),{},{reason_code:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",required:!0,children:[(0,er.jsx)("option",{value:"",children:"Select Reason"}),["Expired","Damaged","Spilled","Theft","Taste Test"].map(e=>(0,er.jsx)("option",{value:e,children:e},e))]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Action Taken"}),(0,er.jsxs)("select",{value:t.action_taken||"",onChange:e=>r(Be(Be({},t),{},{action_taken:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",children:[(0,er.jsx)("option",{value:"",children:"Select Action"}),(0,er.jsx)("option",{value:"Discarded",children:"Discarded"}),(0,er.jsx)("option",{value:"Returned to Vendor",children:"Returned to Vendor"})]})]}),(0,er.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),(0,er.jsxs)("select",{value:t.location_id||"",onChange:e=>r(Be(Be({},t),{},{location_id:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",children:[(0,er.jsx)("option",{value:"",children:"Select Location"}),s.map(e=>(0,er.jsx)("option",{value:e.id,children:e.name||"".concat(e.building," - ").concat(e.room_area)},e.id))]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Waste Date"}),(0,er.jsx)("input",{type:"date",value:t.waste_date||"",onChange:e=>r(Be(Be({},t),{},{waste_date:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"})]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Photo (Proof)"}),(0,er.jsx)("input",{type:"file",accept:"image/*",onChange:e=>r(Be(Be({},t),{},{photo:e.target.files[0]})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),(0,er.jsx)("textarea",{value:t.notes,onChange:e=>r(Be(Be({},t),{},{notes:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"})]}),(0,er.jsxs)("div",{className:"flex justify-end gap-4 pt-4 border-t",children:[(0,er.jsx)("button",{type:"button",onClick:o,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,er.jsx)("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Report Waste"})]})]})]})})}function nre(e){let{form:t,setForm:r,locations:n,onSubmit:a,onClose:s}=e;return(0,er.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[10000] p-2 sm:p-4",children:(0,er.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,er.jsxs)("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center",children:[(0,er.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Add Location"}),(0,er.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:(0,er.jsx)(ZQ,{className:"w-6 h-6"})})]}),(0,er.jsxs)("form",{onSubmit:a,className:"p-6 space-y-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location Name *"}),(0,er.jsx)("input",{type:"text",value:t.name||"",onChange:e=>r(Be(Be({},t),{},{name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"e.g., Main Warehouse, Kitchen Store, Room 101",required:!0}),(0,er.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"A friendly name for this location"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Building *"}),(0,er.jsx)("input",{type:"text",value:t.building,onChange:e=>r(Be(Be({},t),{},{building:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"e.g., Main Block, Villas",required:!0})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Floor"}),(0,er.jsx)("input",{type:"text",value:t.floor,onChange:e=>r(Be(Be({},t),{},{floor:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"e.g., Ground, 1st, 2nd"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Room/Area *"}),(0,er.jsx)("input",{type:"text",value:t.room_area,onChange:e=>r(Be(Be({},t),{},{room_area:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"e.g., Room 101, Lobby, Conference Hall",required:!0})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location Type *"}),(0,er.jsxs)("select",{value:t.location_type,onChange:e=>r(Be(Be({},t),{},{location_type:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",required:!0,children:[(0,er.jsx)("option",{value:"",children:"Select Type"}),[{value:"GUEST_ROOM",label:"Guest Room"},{value:"WAREHOUSE",label:"Warehouse"},{value:"LAUNDRY",label:"Laundry"},{value:"DEPARTMENT",label:"Department"},{value:"PUBLIC_AREA",label:"Public Area"},{value:"CENTRAL_WAREHOUSE",label:"Central Warehouse"},{value:"BRANCH_STORE",label:"Branch Store"},{value:"SUB_STORE",label:"Sub Store"}].map(e=>(0,er.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,er.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,er.jsxs)("div",{className:"flex items-start",children:[(0,er.jsx)("div",{className:"flex-shrink-0",children:(0,er.jsx)("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,er.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),(0,er.jsxs)("div",{className:"ml-3",children:[(0,er.jsx)("h3",{className:"text-sm font-medium text-blue-800",children:"Creating a Source Location (Warehouse)"}),(0,er.jsxs)("div",{className:"mt-2 text-sm text-blue-700",children:[(0,er.jsxs)("p",{children:["To create a location that can be used as a"," ",(0,er.jsx)("strong",{children:"Source Location"})," in stock issues:"]}),(0,er.jsxs)("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[(0,er.jsxs)("li",{children:["Select ",(0,er.jsx)("strong",{children:"Location Type"}),': "Warehouse", "Central Warehouse", or "Branch Store"']}),(0,er.jsxs)("li",{children:["Check ",(0,er.jsx)("strong",{children:'"Is Inventory Point"'})," = Yes (this makes it available as a source)"]}),(0,er.jsx)("li",{children:'Example: Name = "Main Warehouse", Type = "Central Warehouse", Is Inventory Point = Yes'})]})]})]})]})}),(0,er.jsxs)("div",{className:"flex items-center",children:[(0,er.jsx)("input",{type:"checkbox",id:"is_inventory_point",checked:t.is_inventory_point,onChange:e=>r(Be(Be({},t),{},{is_inventory_point:e.target.checked})),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),(0,er.jsxs)("label",{htmlFor:"is_inventory_point",className:"ml-2 block text-sm text-gray-700",children:[(0,er.jsx)("span",{className:"font-medium",children:"Is Inventory Point?"}),(0,er.jsx)("span",{className:"ml-2 text-xs text-gray-500",children:"(Check this to use as Source Location in stock issues)"})]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,er.jsx)("textarea",{value:t.description,onChange:e=>r(Be(Be({},t),{},{description:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"})]}),(0,er.jsxs)("div",{className:"flex justify-end gap-4 pt-4 border-t",children:[(0,er.jsx)("button",{type:"button",onClick:s,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,er.jsx)("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Create Location"})]})]})]})})}function are(e){let{form:t,setForm:r,items:n,locations:s,categories:i,onSubmit:o,onClose:l,isEditing:c}=e;const d=n.filter(e=>{const t=i.find(t=>t.id===e.category_id);return(null===t||void 0===t?void 0:t.is_asset_fixed)||!1}),[u,h]=(0,a.useState)([]);(0,a.useEffect)(()=>{(async()=>{try{const e=await Ia.get("/inventory/stocks");h(e.data||[])}catch(e){console.error("Failed to fetch detailed stocks",e)}})()},[]);const m=(e,t)=>{if(!e)return 0;if(!t){const t=n.find(t=>t.id==e);return t&&t.current_stock||0}const r=u.find(r=>r.item_id==e&&r.location_id==parseInt(t));return r?r.quantity:0},p=(e,n,a)=>{if("source_location_id"===n||"item_id"===n){const r=(t.assets||[])[e],s="item_id"===n?a:r.item_id,i="source_location_id"===n?a:r.source_location_id;if(s&&i){if(m(s,i)<=0)return void alert("Item is not available at selected location")}}const s=[...t.assets||[]];s[e]=Be(Be({},s[e]),{},{[n]:a}),r(Be(Be({},t),{},{assets:s}))};return(0,er.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[10000] p-2 sm:p-4",children:(0,er.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,er.jsxs)("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center sticky top-0 bg-white z-10",children:[(0,er.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:c?"Edit Asset Assignment":"Assign Assets to Location"}),(0,er.jsx)("button",{onClick:l,className:"text-gray-400 hover:text-gray-600",children:(0,er.jsx)(ZQ,{className:"w-6 h-6"})})]}),(0,er.jsxs)("form",{onSubmit:o,className:"p-6 space-y-6",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Target Location *"}),(0,er.jsxs)("select",{value:t.location_id||"",onChange:e=>r(Be(Be({},t),{},{location_id:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",required:!0,children:[(0,er.jsx)("option",{value:"",children:"Select Target"}),s.map(e=>(0,er.jsxs)("option",{value:e.id,children:[e.building," - ",e.room_area," ",e.floor?"(".concat(e.floor,")"):""]},e.id))]})]}),(0,er.jsxs)("div",{className:"border-t pt-4",children:[(0,er.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Assets"}),!c&&(0,er.jsxs)("button",{type:"button",onClick:()=>{r(Be(Be({},t),{},{assets:[...t.assets||[],{item_id:"",source_location_id:"",serial_number:"",quantity:1,notes:""}]}))},className:"px-3 py-2 bg-indigo-50 text-indigo-700 rounded-lg hover:bg-indigo-100 flex items-center gap-2 text-sm font-medium transition-colors",children:[(0,er.jsx)(r$,{className:"w-4 h-4"})," Add Asset"]})]}),(0,er.jsxs)("div",{className:"space-y-3",children:[0===(t.assets||[]).length&&(0,er.jsx)("div",{className:"text-center py-8 text-gray-500 bg-gray-50 rounded-lg border border-dashed border-gray-300",children:'No assets added yet. Click "Add Asset" to start.'}),(t.assets||[]).map((e,a)=>(0,er.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 p-4 bg-gray-50 rounded-xl border border-gray-200 items-start sm:items-start relative group transition-all hover:shadow-sm",children:[(0,er.jsxs)("div",{className:"flex-1 w-full",children:[(0,er.jsx)("label",{className:"block text-xs font-semibold text-gray-600 mb-1.5",children:"Asset Item *"}),(0,er.jsxs)("select",{value:e.item_id,onChange:e=>p(a,"item_id",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 text-sm",required:!0,disabled:c,children:[(0,er.jsx)("option",{value:"",children:"Select Asset"}),d.map(t=>{const r=m(t.id,e.source_location_id);return(0,er.jsxs)("option",{value:t.id,disabled:r<=0,children:[t.name," (",e.source_location_id?"Location":"Global"," Stock: ",r,")"]},t.id)})]})]}),(0,er.jsxs)("div",{className:"w-full sm:w-48",children:[(0,er.jsx)("label",{className:"block text-xs font-semibold text-gray-600 mb-1.5",children:"Source (Optional)"}),(0,er.jsxs)("select",{value:e.source_location_id||"",onChange:e=>p(a,"source_location_id",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 text-sm",disabled:c,children:[(0,er.jsxs)("option",{value:"",children:["Default (Global) ",e.item_id?"(Stock: ".concat(m(e.item_id,null),")"):""]}),s.filter(e=>e.is_inventory_point).map(t=>(0,er.jsxs)("option",{value:t.id,children:[t.name||"".concat(t.building," - ").concat(t.room_area),e.item_id?" (Stock: ".concat(m(e.item_id,t.id),")"):""]},t.id))]})]}),(0,er.jsxs)("div",{className:"w-full sm:w-24",children:[(0,er.jsx)("label",{className:"block text-xs font-semibold text-gray-600 mb-1.5",children:"Qty"}),(()=>{const t=n.find(t=>t.id==e.item_id),r=e.source_location_id,a=m(e.item_id,r);return(0,er.jsxs)("div",{children:[(0,er.jsx)("input",{type:"number",value:e.quantity||1,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100 text-gray-500 cursor-not-allowed text-sm font-medium"}),t&&(0,er.jsxs)("span",{className:"text-[10px] text-gray-500 block mt-1",children:["Available (",r?"Location":"Global","): ",a]})]})})()]}),(0,er.jsxs)("div",{className:"w-full sm:w-48",children:[(0,er.jsx)("label",{className:"block text-xs font-semibold text-gray-600 mb-1.5",children:"Serial Number"}),(0,er.jsx)("input",{type:"text",value:e.serial_number||"",onChange:e=>p(a,"serial_number",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 text-sm",placeholder:"e.g. SN-001"})]}),(0,er.jsxs)("div",{className:"flex-1 w-full",children:[(0,er.jsx)("label",{className:"block text-xs font-semibold text-gray-600 mb-1.5",children:"Notes"}),(0,er.jsx)("input",{type:"text",value:e.notes||"",onChange:e=>p(a,"notes",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 text-sm",placeholder:"Optional notes"})]}),(0,er.jsx)("button",{type:"button",onClick:()=>(e=>{const n=[...t.assets||[]];n.splice(e,1),r(Be(Be({},t),{},{assets:n}))})(a),className:"sm:mt-7 p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Remove Asset",children:(0,er.jsx)(Qq,{className:"w-5 h-5"})})]},a))]})]}),(0,er.jsxs)("div",{className:"flex justify-end gap-4 pt-6 border-t mt-4",children:[(0,er.jsx)("button",{type:"button",onClick:l,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 font-medium transition-colors",children:"Cancel"}),(0,er.jsx)("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium shadow-sm transition-all transform hover:scale-[1.02]",children:c?"Update Assignment":"Assign Assets"})]})]})]})})}function sre(e){let{isOpen:t,onClose:r,onConfirm:n,destination:a,setDestination:s,locations:i}=e;if(!t)return null;const o=i.filter(e=>e.location_type.toLowerCase().includes("warehouse")||e.location_type.toLowerCase().includes("store")||e.is_inventory_point);return(0,er.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[11000] p-4",children:(0,er.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full p-6 relative",children:[(0,er.jsx)("button",{onClick:r,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:(0,er.jsx)(ZQ,{className:"w-5 h-5"})}),(0,er.jsxs)("div",{className:"text-center mb-6",children:[(0,er.jsx)("div",{className:"bg-red-100 text-red-600 w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,er.jsx)(KJ,{className:"w-6 h-6"})}),(0,er.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:"Unassign Asset"}),(0,er.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"This will remove the asset from its current location. Please select where it should be moved to."})]}),(0,er.jsxs)("div",{className:"mb-6",children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Return to Location (Destination)"}),(0,er.jsxs)("select",{value:a,onChange:e=>s(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",children:[(0,er.jsx)("option",{value:"",children:"Select Destination (Optional - Defaults to Main Warehouse)"}),(0,er.jsx)("optgroup",{label:"Warehouses & Stores",children:o.map(e=>(0,er.jsxs)("option",{value:e.id,children:[e.name," (",e.location_type,")"]},e.id))}),(0,er.jsx)("optgroup",{label:"Other Locations",children:i.filter(e=>!o.includes(e)).map(e=>(0,er.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-2 text-left",children:"* If no location is selected, the system will attempt to return it to the default Central Warehouse."})]}),(0,er.jsxs)("div",{className:"flex gap-3",children:[(0,er.jsx)("button",{onClick:r,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,er.jsx)("button",{onClick:n,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 font-medium",children:"Confirm Unassign"})]})]})})}function ire(e){var t;let{requisition:r,items:n,onClose:a}=e;return(0,er.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[10000] p-2 sm:p-4",children:(0,er.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,er.jsxs)("div",{className:"p-4 sm:p-6 border-b border-gray-200 flex justify-between items-center sticky top-0 bg-white z-10",children:[(0,er.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Requisition Details"}),(0,er.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:(0,er.jsx)(ZQ,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]}),(0,er.jsxs)("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[(0,er.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Requisition Number"}),(0,er.jsx)("p",{className:"text-sm font-semibold text-gray-900 mt-1",children:r.requisition_number})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Department"}),(0,er.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:r.destination_department})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Status"}),(0,er.jsx)("p",{className:"mt-1",children:(0,er.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat("approved"===r.status?"bg-green-100 text-green-800":"rejected"===r.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:r.status})})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Priority"}),(0,er.jsx)("p",{className:"mt-1",children:(0,er.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat("urgent"===r.priority?"bg-red-100 text-red-800":"critical"===r.priority?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"),children:r.priority})})]}),r.date_needed&&(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Date Needed"}),(0,er.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:new Date(r.date_needed).toLocaleDateString()})]}),r.requested_by_name&&(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Requested By"}),(0,er.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:r.requested_by_name})]})]}),r.notes&&(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Notes"}),(0,er.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:r.notes})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Requested Items"}),(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,er.jsx)("thead",{className:"bg-gray-50",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Item"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Requested Qty"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Approved Qty"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Unit"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Notes"})]})}),(0,er.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:null===(t=r.details)||void 0===t?void 0:t.map((e,t)=>{const r=null===n||void 0===n?void 0:n.find(t=>t.id===e.item_id);return(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{className:"px-3 py-2 text-sm text-gray-900",children:(null===r||void 0===r?void 0:r.name)||e.item_name||"N/A"}),(0,er.jsx)("td",{className:"px-3 py-2 text-sm text-gray-600",children:e.requested_quantity||e.quantity||0}),(0,er.jsx)("td",{className:"px-3 py-2 text-sm text-gray-600",children:e.approved_quantity||"-"}),(0,er.jsx)("td",{className:"px-3 py-2 text-sm text-gray-600",children:e.unit}),(0,er.jsx)("td",{className:"px-3 py-2 text-sm text-gray-600",children:e.notes||"-"})]},t)})})]})})]}),(0,er.jsx)("div",{className:"flex justify-end pt-4 border-t",children:(0,er.jsx)("button",{onClick:a,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Close"})})]})]})})}function ore(e){var t;let{issue:r,items:n,locations:a,onClose:s}=e;return(0,er.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[10000] p-2 sm:p-4",children:(0,er.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,er.jsxs)("div",{className:"p-4 sm:p-6 border-b border-gray-200 flex justify-between items-center sticky top-0 bg-white z-10",children:[(0,er.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Issue Details"}),(0,er.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:(0,er.jsx)(ZQ,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]}),(0,er.jsxs)("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[(0,er.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Issue Number"}),(0,er.jsx)("p",{className:"text-sm font-semibold text-gray-900 mt-1",children:r.issue_number})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Source Location"}),(0,er.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:r.source_location_name||"Main Store"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Destination Location"}),(0,er.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:r.destination_location_name||"-"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Issue Date"}),(0,er.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:new Date(r.issue_date||r.created_at).toLocaleDateString()})]}),r.requisition_number&&(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Linked Requisition"}),(0,er.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:r.requisition_number})]}),r.issued_by_name&&(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Issued By"}),(0,er.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:r.issued_by_name})]})]}),r.notes&&(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Notes"}),(0,er.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:r.notes})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Issued Items"}),(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,er.jsx)("thead",{className:"bg-gray-50",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Item"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Quantity"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Unit"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase hidden md:table-cell",children:"Batch/Lot"}),(0,er.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase hidden lg:table-cell",children:"Cost"})]})}),(0,er.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:null===(t=r.details)||void 0===t?void 0:t.map((e,t)=>{const r=null===n||void 0===n?void 0:n.find(t=>t.id===e.item_id);return(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{className:"px-3 py-2 text-sm text-gray-900",children:(null===r||void 0===r?void 0:r.name)||e.item_name||"N/A"}),(0,er.jsx)("td",{className:"px-3 py-2 text-sm text-gray-600",children:e.issued_quantity||e.quantity||0}),(0,er.jsx)("td",{className:"px-3 py-2 text-sm text-gray-600",children:e.unit}),(0,er.jsx)("td",{className:"px-3 py-2 text-sm text-gray-600 hidden md:table-cell",children:e.batch_lot_number||"-"}),(0,er.jsx)("td",{className:"px-3 py-2 text-sm text-gray-600 hidden lg:table-cell",children:e.cost?"\u20b9".concat(e.cost.toFixed(2)):"-"})]},t)})})]})})]}),(0,er.jsx)("div",{className:"flex justify-end pt-4 border-t",children:(0,er.jsx)("button",{onClick:s,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Close"})})]})]})})}function lre(e){let{wasteLog:t,items:r,locations:n,onClose:a}=e;const s=null===r||void 0===r?void 0:r.find(e=>e.id===t.item_id),i=null===n||void 0===n?void 0:n.find(e=>e.id===t.location_id);return(0,er.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[10000] p-2 sm:p-4",children:(0,er.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,er.jsxs)("div",{className:"p-4 sm:p-6 border-b border-gray-200 flex justify-between items-center sticky top-0 bg-white z-10",children:[(0,er.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Waste Log Details"}),(0,er.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:(0,er.jsx)(ZQ,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]}),(0,er.jsxs)("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[(0,er.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Log Number"}),(0,er.jsx)("p",{className:"text-sm font-semibold text-gray-900 mt-1",children:t.log_number||"WL-".concat(t.id)})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Item"}),(0,er.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:(null===s||void 0===s?void 0:s.name)||t.item_name||"N/A"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Quantity"}),(0,er.jsxs)("p",{className:"text-sm text-gray-900 mt-1",children:[t.quantity," ",t.unit]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Reason Code"}),(0,er.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:t.reason_code||t.reason||"N/A"})]}),t.batch_number&&(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Batch Number"}),(0,er.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:t.batch_number})]}),t.expiry_date&&(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Expiry Date"}),(0,er.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:new Date(t.expiry_date).toLocaleDateString()})]}),t.action_taken&&(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Action Taken"}),(0,er.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:t.action_taken})]}),i&&(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Location"}),(0,er.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:i.name||"".concat(i.building," - ").concat(i.room_area)})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Waste Date"}),(0,er.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:new Date(t.waste_date||t.created_at).toLocaleDateString()})]}),t.reported_by_name&&(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Reported By"}),(0,er.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:t.reported_by_name})]})]}),t.photo_path&&(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Photo Proof"}),(0,er.jsx)("div",{className:"mt-2",children:(0,er.jsx)("img",{src:"http://localhost:8011".concat(t.photo_path),alt:"Waste proof",className:"max-w-full h-auto rounded-lg border border-gray-200",onError:e=>{e.target.style.display="none"}})})]}),t.notes&&(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Notes"}),(0,er.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:t.notes})]}),(0,er.jsx)("div",{className:"flex justify-end pt-4 border-t",children:(0,er.jsx)("button",{onClick:a,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Close"})})]})]})})}function cre(e){let{location:t,locations:r,onClose:n}=e;const a=null===r||void 0===r?void 0:r.find(e=>e.id===t.parent_location_id);return(0,er.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[10000] p-2 sm:p-4",children:(0,er.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,er.jsxs)("div",{className:"p-4 sm:p-6 border-b border-gray-200 flex justify-between items-center sticky top-0 bg-white z-10",children:[(0,er.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Location Details"}),(0,er.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:(0,er.jsx)(ZQ,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]}),(0,er.jsxs)("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[(0,er.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Location Code"}),(0,er.jsx)("p",{className:"text-sm font-semibold text-gray-900 mt-1",children:t.location_code||"LOC-".concat(t.id)})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Name"}),(0,er.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:t.name})]}),t.building&&(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Building"}),(0,er.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:t.building})]}),t.floor&&(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Floor"}),(0,er.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:t.floor})]}),t.room_area&&(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Room/Area"}),(0,er.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:t.room_area})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Type"}),(0,er.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:t.location_type})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Inventory Point"}),(0,er.jsx)("p",{className:"mt-1",children:t.is_inventory_point?(0,er.jsx)("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full",children:"Yes"}):(0,er.jsx)("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-800 rounded-full",children:"No"})})]}),a&&(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Parent Location"}),(0,er.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:a.name||"".concat(a.building," - ").concat(a.room_area)})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Status"}),(0,er.jsx)("p",{className:"mt-1",children:t.is_active?(0,er.jsx)("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full",children:"Active"}):(0,er.jsx)("span",{className:"px-2 py-1 text-xs bg-red-100 text-red-800 rounded-full",children:"Inactive"})})]})]}),t.description&&(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Description"}),(0,er.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:t.description})]}),(0,er.jsx)("div",{className:"flex justify-end pt-4 border-t",children:(0,er.jsx)("button",{onClick:n,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Close"})})]})]})})}function dre(e){let{asset:t,items:r,locations:n,onClose:a}=e;const s=null===r||void 0===r?void 0:r.find(e=>e.id===t.item_id),i=null===n||void 0===n?void 0:n.find(e=>e.id===t.current_location_id);return(0,er.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[10000] p-2 sm:p-4",children:(0,er.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,er.jsxs)("div",{className:"p-4 sm:p-6 border-b border-gray-200 flex justify-between items-center sticky top-0 bg-white z-10",children:[(0,er.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Asset Details"}),(0,er.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:(0,er.jsx)(ZQ,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]}),(0,er.jsxs)("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[(0,er.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Asset Tag ID"}),(0,er.jsx)("p",{className:"text-sm font-semibold text-gray-900 mt-1",children:t.asset_tag_id||"N/A"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Item Name"}),(0,er.jsx)("p",{className:"text-sm font-semibold text-gray-900 mt-1",children:(null===s||void 0===s?void 0:s.name)||"Unknown Item"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Current Location"}),(0,er.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:(null===i||void 0===i?void 0:i.name)||(i?"".concat(i.building," - ").concat(i.room_area):"Unknown Location")})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Status"}),(0,er.jsx)("p",{className:"mt-1",children:(()=>{let e="bg-gray-100 text-gray-800";return"in_use"===t.status?e="bg-green-100 text-green-800":"maintenance"===t.status?e="bg-yellow-100 text-yellow-800":"retired"===t.status&&(e="bg-red-100 text-red-800"),(0,er.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat(e),children:t.status?t.status.replace("_"," ").toUpperCase():"UNKNOWN"})})()})]}),t.purchase_date&&(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Purchase Date"}),(0,er.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:new Date(t.purchase_date).toLocaleDateString()})]}),t.warranty_expiry_date&&(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Warranty Expiry"}),(0,er.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:new Date(t.warranty_expiry_date).toLocaleDateString()})]}),t.last_maintenance_date&&(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Last Maintenance"}),(0,er.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:new Date(t.last_maintenance_date).toLocaleDateString()})]}),t.next_maintenance_due_date&&(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Next Maintenance Due"}),(0,er.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:new Date(t.next_maintenance_due_date).toLocaleDateString()})]}),t.assigned_date&&(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Assigned Date"}),(0,er.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:new Date(t.assigned_date).toLocaleDateString()})]})]}),t.notes&&(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Notes"}),(0,er.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:t.notes})]}),(0,er.jsx)("div",{className:"flex justify-end pt-4 border-t",children:(0,er.jsx)("button",{onClick:a,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Close"})})]})]})})}function ure(e){let{form:t,setForm:r,foodItems:n,items:a,editingRecipe:s,onSubmit:i,onClose:o}=e;const l=(e,n,a)=>{const s=[...t.ingredients];s[e]=Be(Be({},s[e]),{},{[n]:a}),r(Be(Be({},t),{},{ingredients:s}))};return(0,er.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[10000] p-2 sm:p-4",children:(0,er.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,er.jsxs)("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center sticky top-0 bg-white z-10",children:[(0,er.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:s?"Edit Recipe":"Add Recipe"}),(0,er.jsx)("button",{onClick:o,className:"text-gray-400 hover:text-gray-600",children:(0,er.jsx)(ZQ,{className:"w-6 h-6"})})]}),(0,er.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t.food_item_id&&t.name&&0!==t.ingredients.length?i(t):alert("Please fill in all required fields and add at least one ingredient")},className:"p-6 space-y-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Food Item *"}),(0,er.jsxs)("select",{value:t.food_item_id,onChange:e=>r(Be(Be({},t),{},{food_item_id:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2",required:!0,children:[(0,er.jsx)("option",{value:"",children:"Select Food Item"}),null===n||void 0===n?void 0:n.map(e=>(0,er.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Recipe Name *"}),(0,er.jsx)("input",{type:"text",value:t.name,onChange:e=>r(Be(Be({},t),{},{name:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2",required:!0})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,er.jsx)("textarea",{value:t.description,onChange:e=>r(Be(Be({},t),{},{description:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"3"})]}),(0,er.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Servings *"}),(0,er.jsx)("input",{type:"number",value:t.servings,onChange:e=>r(Be(Be({},t),{},{servings:parseInt(e.target.value)||1})),className:"w-full border border-gray-300 rounded-lg px-3 py-2",min:"1",required:!0})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prep Time (minutes)"}),(0,er.jsx)("input",{type:"number",value:t.prep_time_minutes,onChange:e=>r(Be(Be({},t),{},{prep_time_minutes:e.target.value?parseInt(e.target.value):""})),className:"w-full border border-gray-300 rounded-lg px-3 py-2",min:"0"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cook Time (minutes)"}),(0,er.jsx)("input",{type:"number",value:t.cook_time_minutes,onChange:e=>r(Be(Be({},t),{},{cook_time_minutes:e.target.value?parseInt(e.target.value):""})),className:"w-full border border-gray-300 rounded-lg px-3 py-2",min:"0"})]})]}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Ingredients *"}),(0,er.jsx)("button",{type:"button",onClick:()=>{r(Be(Be({},t),{},{ingredients:[...t.ingredients,{inventory_item_id:"",quantity:0,unit:"",notes:""}]}))},className:"px-3 py-1 bg-green-500 text-white rounded hover:bg-green-600 text-sm",children:"+ Add Ingredient"})]}),0===t.ingredients.length?(0,er.jsx)("p",{className:"text-sm text-gray-500 italic",children:'No ingredients added. Click "Add Ingredients" to add one.'}):(0,er.jsx)("div",{className:"space-y-2",children:t.ingredients.map((e,n)=>(0,er.jsxs)("div",{className:"flex gap-2 items-end p-3 border border-gray-200 rounded-lg",children:[(0,er.jsxs)("div",{className:"flex-1",children:[(0,er.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Inventory Item"}),(0,er.jsxs)("select",{value:e.inventory_item_id,onChange:e=>{const s=e.target.value,i=a.find(e=>e.id===parseInt(s)),o=[...t.ingredients];o[n]=Be(Be({},o[n]),{},{inventory_item_id:s,unit:i?i.unit:o[n].unit}),r(Be(Be({},t),{},{ingredients:o}))},className:"w-full border border-gray-300 rounded px-2 py-1 text-sm",required:!0,children:[(0,er.jsx)("option",{value:"",children:"Select Item"}),a.map(e=>(0,er.jsxs)("option",{value:e.id,children:[e.name," (",e.unit,")"]},e.id))]})]}),(0,er.jsxs)("div",{className:"w-24",children:[(0,er.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Quantity"}),(0,er.jsx)("input",{type:"number",value:e.quantity,onChange:e=>l(n,"quantity",parseFloat(e.target.value)||0),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm",step:"0.01",min:"0",required:!0})]}),(0,er.jsxs)("div",{className:"w-24",children:[(0,er.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Unit"}),(0,er.jsx)("input",{type:"text",value:e.unit,onChange:e=>l(n,"unit",e.target.value),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm",required:!0})]}),(0,er.jsxs)("div",{className:"w-32",children:[(0,er.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Notes"}),(0,er.jsx)("input",{type:"text",value:e.notes,onChange:e=>l(n,"notes",e.target.value),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm",placeholder:"e.g., chopped"})]}),(0,er.jsx)("button",{type:"button",onClick:()=>(e=>{r(Be(Be({},t),{},{ingredients:t.ingredients.filter((t,r)=>r!==e)}))})(n),className:"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600 text-sm",children:"Remove"})]},n))})]}),(0,er.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[(0,er.jsx)("button",{type:"button",onClick:o,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,er.jsx)("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:s?"Update Recipe":"Create Recipe"})]})]})]})})}const hre=()=>{const e=(0,a.useCallback)(e=>{let{title:t,message:r,type:n}=e;"success"===n?Tt.success(r):"error"===n?Tt.error("".concat(t,": ").concat(r)):Tt(r)},[]),[t,r]=(0,a.useState)("items"),[n,s]=(0,a.useState)(!1),[i,o]=(0,a.useState)(""),[l,c]=(0,a.useState)([]),[d,u]=(0,a.useState)([]),[h,m]=(0,a.useState)([]),[p,f]=(0,a.useState)([]),[g,x]=(0,a.useState)([]),[y,v]=(0,a.useState)([]),[b,j]=(0,a.useState)([]),[w,N]=(0,a.useState)([]),[_,k]=(0,a.useState)([]),[S,A]=(0,a.useState)([]),[C,E]=(0,a.useState)([]),[T,P]=(0,a.useState)(null),[O,D]=(0,a.useState)(null),[I,L]=(0,a.useState)([]),[M,R]=(0,a.useState)([]),[F,B]=(0,a.useState)(!1),[z,U]=(0,a.useState)(null),[q,W]=(0,a.useState)({food_item_id:"",name:"",description:"",servings:1,prep_time_minutes:"",cook_time_minutes:"",ingredients:[]}),[V,H]=(0,a.useState)({type:"all",category:"all",dateRange:"all",startDate:"",endDate:""}),[G,K]=(0,a.useState)(null),[Y,X]=(0,a.useState)(!1),[Q,$]=(0,a.useState)(!1),[J,Z]=(0,a.useState)(!1),[ee,te]=(0,a.useState)(!1),[re,ne]=(0,a.useState)(!1),[ae,se]=(0,a.useState)(null),[ie,oe]=(0,a.useState)(!1),[le,ce]=(0,a.useState)(!1),[de,ue]=(0,a.useState)(null),[he,me]=(0,a.useState)(null),[pe,fe]=(0,a.useState)(null),[ge,xe]=(0,a.useState)(!1),[ye,ve]=(0,a.useState)(!1),[be,je]=(0,a.useState)(!1),[we,Ne]=(0,a.useState)(!1),[_e,ke]=(0,a.useState)(!1),[Se,Ae]=(0,a.useState)(!1),[Ce,Ee]=(0,a.useState)({location_id:"",item_id:"",actual_stock:"",notes:""}),[Te,Pe]=(0,a.useState)(null),[Oe,De]=(0,a.useState)(!1),[Ie,Le]=(0,a.useState)(null),[Me,Re]=(0,a.useState)(!1),[Fe,ze]=(0,a.useState)(null),[Ue,qe]=(0,a.useState)(!1),[We,Ve]=(0,a.useState)(null),[He,Ge]=(0,a.useState)(!1),[Ke,Ye]=(0,a.useState)(null),[Xe,Qe]=(0,a.useState)(!1),[$e,Je]=(0,a.useState)(!1),[Ze,et]=(0,a.useState)(null),[tt,rt]=(0,a.useState)(""),[nt,at]=(0,a.useState)(!1),[st,it]=(0,a.useState)(null),[ot,lt]=(0,a.useState)([{value:"pcs",label:"Pieces (pcs)"},{value:"kg",label:"Kilograms (kg)"},{value:"liter",label:"Liters (L)"},{value:"box",label:"Box"},{value:"pack",label:"Pack"},{value:"meter",label:"Meters (m)"},{value:"sqft",label:"Square Feet (sqft)"},{value:"pair",label:"Pairs"}]),[ct,dt]=(0,a.useState)({value:"",label:""}),[ut,ht]=(0,a.useState)({name:"",item_code:"",description:"",category_id:"",sub_category:"",hsn_code:"",unit:"pcs",initial_stock:"",min_stock_level:0,max_stock_level:"",unit_price:0,selling_price:"",gst_rate:0,location:"",barcode:"",image:null,is_perishable:!1,track_serial_number:!1,is_sellable_to_guest:!1,track_laundry_cycle:!1,is_asset_fixed:!1,maintenance_schedule_days:"",complimentary_limit:"",ingredient_yield_percentage:"",preferred_vendor_id:"",vendor_item_code:"",lead_time_days:"",is_active:!0}),[mt,pt]=(0,a.useState)({name:"",description:"",parent_department:"",gst_tax_rate:0,classification:"",hsn_sac_code:"",default_gst_rate:0,cess_percentage:0,itc_eligibility:"Eligible",is_capital_good:!1,is_perishable:!1,is_asset_fixed:!1,is_sellable:!1,track_laundry:!1,allow_partial_usage:!1,consumable_instant:!1}),[ft,gt]=(0,a.useState)({name:"",company_name:"",gst_registration_type:"",gst_number:"",legal_name:"",trade_name:"",pan_number:"",qmp_scheme:!1,msme_udyam_no:"",contact_person:"",email:"",phone:"",billing_address:"",billing_state:"",shipping_address:"",distance_km:"",address:"",city:"",state:"",pincode:"",country:"India",is_msme_registered:!1,tds_apply:!1,rcm_applicable:!1,payment_terms:"",preferred_payment_method:"",account_holder_name:"",bank_name:"",account_number:"",account_number_confirm:"",ifsc_code:"",branch_name:"",upi_id:"",upi_mobile_number:"",notes:"",is_active:!0}),[xt,yt]=(0,a.useState)({purchase_number:"",vendor_id:"",purchase_date:b$(),expected_delivery_date:"",invoice_number:"",invoice_date:"",gst_number:"",payment_terms:"",payment_status:"pending",notes:"",status:"draft",details:[{item_id:"",category:"",hsn_code:"",unit:"pcs",quantity:0,unit_price:0,gst_rate:0,tax_inclusive:!1,serial_batch:"",expiry_date:"",discount:0}]});(0,a.useEffect)(()=>{(async()=>{try{const[e,t,r,n,a,s]=await Promise.all([Ia.get("/inventory/categories?limit=1000"),Ia.get("/inventory/vendors?limit=1000"),Ia.get("/inventory/locations?limit=10000"),Ia.get("/inventory/items?limit=1000"),Ia.get("/inventory/purchases?limit=1000"),Ia.get("/inventory/waste-logs?limit=1000")]);u(e.data||[]),m(t.data||[]),k(r.data||[]),c(n.data||[]),f(a.data||[]),N(s.data||[])}catch(e){console.error("Error fetching essential data:",e)}})()},[]),(0,a.useEffect)(()=>{vt()},[t]);const vt=(0,a.useCallback)(async()=>{s(!0);try{const s="locations"===t?1e4:500;if("items"===t){const e=await Ia.get("/inventory/items?limit=".concat(s));c(e.data||[])}else if("categories"===t){const e=await Ia.get("/inventory/categories?limit=".concat(s));u(e.data||[])}else if("vendors"===t){const e=await Ia.get("/inventory/vendors?limit=".concat(s));m(e.data||[])}else if("purchases"===t){const e=await Ia.get("/inventory/purchases?limit=".concat(s));f(e.data||[])}else if("transactions"===t){const e=await Ia.get("/inventory/transactions?limit=".concat(s));x(e.data||[])}else if("requisitions"===t){const e=await Ia.get("/inventory/requisitions?limit=".concat(s));v(e.data||[])}else if("issues"===t){const e=await Ia.get("/inventory/issues?limit=".concat(s));j(e.data||[])}else if("waste"===t){const e=await Ia.get("/inventory/waste-logs?limit=".concat(s));N(e.data||[]);try{const e=await Ia.get("/food-items");R(e.data||[])}catch(w){console.error("Failed to fetch food items:",w)}}else if("locations"===t){const e=await Ia.get("/inventory/locations?limit=10000");k(e.data||[])}else if("assets"===t){const e=await Ia.get("/inventory/asset-mappings?limit=".concat(s));A(e.data||[])}else if("location-stock"===t){const e=await Ia.get("/inventory/stock-by-location");if(E(e.data||[]),T)try{const e=await Ia.get("/inventory/locations/".concat(T,"/items"));D(e.data)}catch(_){console.error("Error refreshing location details:",_)}}else if("recipe"===t){try{var e;console.log("Fetching recipes from:",Ia.defaults.baseURL+"/recipes");const t=await Ia.get("/recipes");console.log("Recipes fetched successfully:",(null===(e=t.data)||void 0===e?void 0:e.length)||0,"recipes"),L(t.data||[])}catch(w){var r,n,a,i,o,l,d,h;if(console.error("Failed to fetch recipes:",w),console.error("Request URL:",null===(r=w.config)||void 0===r?void 0:r.url),console.error("Base URL:",null===(n=w.config)||void 0===n?void 0:n.baseURL),console.error("Full URL:",(null===(a=w.config)||void 0===a?void 0:a.baseURL)+(null===(i=w.config)||void 0===i?void 0:i.url)),console.error("Error details:",{status:null===(o=w.response)||void 0===o?void 0:o.status,statusText:null===(l=w.response)||void 0===l?void 0:l.statusText,data:null===(d=w.response)||void 0===d?void 0:d.data,message:w.message}),404===(null===(h=w.response)||void 0===h?void 0:h.status)){var p,g;const e=((null===(p=w.config)||void 0===p?void 0:p.baseURL)||"")+((null===(g=w.config)||void 0===g?void 0:g.url)||"");alert("Recipe endpoint not found (404).\n\nRequested URL: ".concat(e,"\n\nPlease check:\n1. Backend server is running on port 8011\n2. Recipe router is registered\n3. Try hard refresh (Ctrl+Shift+R)"))}else{var y,b;alert("Failed to fetch recipes: ".concat((null===(y=w.response)||void 0===y||null===(b=y.data)||void 0===b?void 0:b.detail)||w.message||"Unknown error"))}L([])}try{const e=await Ia.get("/food-items");R(e.data||[])}catch(w){console.error("Failed to fetch food items:",w)}}}catch(_){console.error("Error fetching data:",_),alert("Failed to fetch data")}finally{s(!1)}},[t,d.length,h.length,_.length,T]),bt={totalItems:l.length,lowStockItems:l.filter(e=>e.is_low_stock).length,totalValue:l.reduce((e,t)=>e+t.current_stock*t.unit_price,0),categoriesCount:d.length,totalVendors:h.length,activeVendors:h.filter(e=>e.is_active).length,totalPurchases:p.length,pendingPurchases:p.filter(e=>"draft"===e.status||"confirmed"===e.status).length,totalWasteLogs:w.length,totalWasteValue:w.reduce((e,t)=>{const r=l.find(e=>e.id===t.item_id),n=(null===r||void 0===r?void 0:r.unit_price)||0;return e+t.quantity*n},0)},jt=e=>{fe(e),gt(Be(Be({},e),{},{company_name:e.company_name||"",gst_registration_type:e.gst_registration_type||"",gst_number:e.gst_number||"",legal_name:e.legal_name||"",trade_name:e.trade_name||"",pan_number:e.pan_number||"",qmp_scheme:e.qmp_scheme||!1,msme_udyam_no:e.msme_udyam_no||"",contact_person:e.contact_person||"",email:e.email||"",phone:e.phone||"",billing_address:e.billing_address||"",billing_state:e.billing_state||"",shipping_address:e.shipping_address||"",distance_km:e.distance_km||"",address:e.address||"",city:e.city||"",state:e.state||"",pincode:e.pincode||"",bank_name:e.bank_name||"",account_number:e.account_number||"",account_number_confirm:e.account_number||"",ifsc_code:e.ifsc_code||"",branch_name:e.branch_name||"",preferred_payment_method:e.preferred_payment_method||"Bank Transfer",payment_terms_days:e.payment_terms_days||30,credit_limit:e.credit_limit||"",opening_balance:e.opening_balance||0,opening_balance_type:e.opening_balance_type||"Credit",notes:e.notes||""})),te(!0)},[wt,Nt]=(0,a.useState)({destination_department:"",date_needed:"",priority:"normal",notes:"",details:[{item_id:"",requested_quantity:0,approved_quantity:null,unit:"pcs",notes:""}]}),[_t,kt]=(0,a.useState)({requisition_id:"",source_location_id:"",destination_location_id:"",issue_date:b$(),notes:"",details:[{item_id:"",issued_quantity:0,unit:"pcs",batch_lot_number:"",cost:0,notes:""}]}),St=async(t,r)=>{try{await Ia.patch("/inventory/requisitions/".concat(t),{status:r}),e({title:"Success",message:"Requisition status updated to ".concat(r),type:"success"}),vt()}catch(n){e({title:"Error",message:"Failed to update status",type:"error"})}},[At,Ct]=(0,a.useState)({item_id:"",batch_number:"",expiry_date:"",quantity:0,unit:"pcs",reason_code:"",action_taken:"",location_id:"",waste_date:b$(),notes:"",photo:null}),[Et,Pt]=(0,a.useState)({name:"",location_type:"",building:"",floor:"",room_area:"",parent_location_id:"",is_inventory_point:!1,description:"",is_active:!0}),[Ot,Dt]=(0,a.useState)({location_id:"",assets:[{item_id:"",source_location_id:"",serial_number:"",quantity:1,notes:""}]}),[It,Lt]=(0,a.useState)(null),Mt=e=>{et(e),rt(""),Je(!0)},Rt=(0,a.useMemo)(()=>{if(!i)return l;const e=i.toLowerCase();return l.filter(t=>{var r,n,a;return(null===(r=t.name)||void 0===r?void 0:r.toLowerCase().includes(e))||(null===(n=t.description)||void 0===n?void 0:n.toLowerCase().includes(e))||(null===(a=t.category_name)||void 0===a?void 0:a.toLowerCase().includes(e))})},[l,i]),Ft=(0,a.useMemo)(()=>{if(!i)return d;const e=i.toLowerCase();return d.filter(t=>{var r;return null===(r=t.name)||void 0===r?void 0:r.toLowerCase().includes(e)})},[d,i]),Bt=(0,a.useMemo)(()=>{if(!i)return h;const e=i.toLowerCase();return h.filter(t=>{var r,n;return(null===(r=t.name)||void 0===r?void 0:r.toLowerCase().includes(e))||(null===(n=t.company_name)||void 0===n?void 0:n.toLowerCase().includes(e))})},[h,i]),zt=(0,a.useMemo)(()=>{if(!i)return p;const e=i.toLowerCase();return p.filter(t=>{var r,n;return(null===(r=t.purchase_number)||void 0===r?void 0:r.toLowerCase().includes(e))||(null===(n=t.vendor_name)||void 0===n?void 0:n.toLowerCase().includes(e))})},[p,i]),Ut=((0,a.useMemo)(()=>{if(!i)return g;const e=i.toLowerCase();return g.filter(t=>{var r,n;return(null===(r=t.item_name)||void 0===r?void 0:r.toLowerCase().includes(e))||(null===(n=t.transaction_type)||void 0===n?void 0:n.toLowerCase().includes(e))})},[g,i]),(0,a.useMemo)(()=>{if(!i)return y;const e=i.toLowerCase();return y.filter(t=>{var r,n;return(null===(r=t.requisition_number)||void 0===r?void 0:r.toLowerCase().includes(e))||(null===(n=t.destination_department)||void 0===n?void 0:n.toLowerCase().includes(e))})},[y,i])),qt=(0,a.useMemo)(()=>{if(!i)return b;const e=i.toLowerCase();return b.filter(t=>{var r;return null===(r=t.issue_number)||void 0===r?void 0:r.toLowerCase().includes(e)})},[b,i]),Wt=(0,a.useMemo)(()=>{if(!i)return w;const e=i.toLowerCase();return w.filter(t=>{var r,n;return(null===(r=t.item_name)||void 0===r?void 0:r.toLowerCase().includes(e))||(null===(n=t.reason_code)||void 0===n?void 0:n.toLowerCase().includes(e))})},[w,i]),Vt=(0,a.useMemo)(()=>{if(!i)return _;const e=i.toLowerCase();return _.filter(t=>{var r,n;return(null===(r=t.building)||void 0===r?void 0:r.toLowerCase().includes(e))||(null===(n=t.room_area)||void 0===n?void 0:n.toLowerCase().includes(e))})},[_,i]),Ht=(0,a.useMemo)(()=>{if(!i)return S;const e=i.toLowerCase();return S.filter(t=>{var r,n;return(null===(r=t.item_name)||void 0===r?void 0:r.toLowerCase().includes(e))||(null===(n=t.location_name)||void 0===n?void 0:n.toLowerCase().includes(e))})},[S,i]);return(0,er.jsxs)(xm,{children:[(0,er.jsxs)("div",{className:"bubbles-container",children:[(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{}),(0,er.jsx)("li",{})]}),(0,er.jsxs)("div",{className:"max-w-[1600px] mx-auto px-4 py-6 space-y-6",children:[(0,er.jsx)("div",{className:"flex items-center justify-between",children:(0,er.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Inventory Management"})}),(0,er.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4",children:[(0,er.jsx)(Mte,{label:"Total Products",value:(0,er.jsxs)("div",{className:"flex flex-col items-start bg-blue-50/50 p-1 rounded",children:[(0,er.jsxs)("span",{className:"font-bold text-2xl text-gray-800",children:[bt.totalItems," SKUs"]}),(0,er.jsxs)("span",{className:"text-sm font-medium text-blue-600",children:["Stock: ",parseFloat(l.reduce((e,t)=>e+(parseFloat(t.current_stock)||0),0).toFixed(2))," units"]})]}),icon:(0,er.jsx)(Zh,{className:"w-5 h-5"}),color:"blue"}),(0,er.jsx)(Mte,{label:"Low Stock",value:bt.lowStockItems,icon:(0,er.jsx)(KJ,{className:"w-5 h-5"}),color:"red",highlight:bt.lowStockItems>0}),(0,er.jsx)(Mte,{label:"Total Value",value:vm(bt.totalValue),icon:(0,er.jsx)(nJ,{className:"w-5 h-5"}),color:"green"}),(0,er.jsx)(Mte,{label:"Categories",value:bt.categoriesCount,icon:(0,er.jsx)(mJ,{className:"w-5 h-5"}),color:"purple"}),(0,er.jsx)(Mte,{label:"Vendors",value:bt.totalVendors,icon:(0,er.jsx)(oJ,{className:"w-5 h-5"}),color:"indigo"}),(0,er.jsx)(Mte,{label:"Active Vendors",value:bt.activeVendors,icon:(0,er.jsx)(oJ,{className:"w-5 h-5"}),color:"teal"}),(0,er.jsx)(Mte,{label:"Purchases",value:bt.totalPurchases,icon:(0,er.jsx)(sJ,{className:"w-5 h-5"}),color:"orange"}),(0,er.jsx)(Mte,{label:"Waste / Spoilage",value:(0,er.jsxs)("div",{children:[(0,er.jsxs)("span",{className:"block",children:[bt.totalWasteLogs," Logs"]}),(0,er.jsx)("span",{className:"text-sm font-normal text-red-600",children:ym(bt.totalWasteValue)})]}),icon:(0,er.jsx)(Qq,{className:"w-5 h-5"}),color:"red"})]}),(0,er.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[(0,er.jsx)("div",{className:"flex border-b border-gray-200 overflow-x-auto scrollbar-hide",children:["items","categories","vendors","purchases","transactions","requisitions","issues","waste","locations","assets","location-stock","recipe"].map(e=>(0,er.jsx)("button",{onClick:()=>{r(e),o("")},className:"px-6 py-3 font-medium capitalize transition-colors whitespace-nowrap flex-shrink-0 ".concat(t===e?"text-indigo-600 border-b-2 border-indigo-600":"text-gray-600 hover:text-gray-900"),children:"location-stock"===e?"Location Stock":"recipe"===e?"Recipe":e},e))}),(0,er.jsxs)("div",{className:"p-6",children:[(0,er.jsxs)("div",{className:"mb-4 flex gap-4",children:[(0,er.jsxs)("div",{className:"flex-1 relative",children:[(0,er.jsx)(Y$,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,er.jsx)("input",{type:"text",placeholder:"Search ".concat(t,"..."),value:i,onChange:e=>o(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"}),i&&(0,er.jsx)("button",{onClick:()=>o(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:(0,er.jsx)(ZQ,{className:"w-5 h-5"})})]}),"items"===t&&(0,er.jsxs)("button",{onClick:()=>$(!0),className:"px-6 py-3 bg-gradient-to-r from-indigo-600 to-indigo-700 text-white rounded-lg hover:from-indigo-700 hover:to-indigo-800 flex items-center gap-2 shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200 font-semibold text-base",children:[(0,er.jsx)(r$,{className:"w-5 h-5"}),"Add New Item"]}),"categories"===t&&(0,er.jsxs)("button",{onClick:()=>Z(!0),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center gap-2",children:[(0,er.jsx)(r$,{className:"w-4 h-4"}),"Add Category"]}),"vendors"===t&&(0,er.jsxs)("button",{onClick:()=>te(!0),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center gap-2",children:[(0,er.jsx)(r$,{className:"w-4 h-4"}),"Add Vendor"]}),"purchases"===t&&(0,er.jsxs)("button",{onClick:()=>ne(!0),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center gap-2",children:[(0,er.jsx)(r$,{className:"w-4 h-4"}),"New Purchase"]}),"requisitions"===t&&(0,er.jsxs)("button",{onClick:()=>xe(!0),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center gap-2",children:[(0,er.jsx)(r$,{className:"w-4 h-4"}),"New Requisition"]}),"issues"===t&&(0,er.jsxs)(er.Fragment,{children:[(0,er.jsxs)("button",{onClick:()=>ve(!0),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center gap-2",children:[(0,er.jsx)(r$,{className:"w-4 h-4"}),"New Issue"]}),(0,er.jsxs)("button",{onClick:()=>Ae(!0),className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 flex items-center gap-2 ml-2",children:[(0,er.jsx)(K$,{className:"w-4 h-4"}),"Adjust Stock"]})]}),"waste"===t&&(0,er.jsxs)("button",{onClick:()=>je(!0),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center gap-2",children:[(0,er.jsx)(r$,{className:"w-4 h-4"}),"Log Waste/Spoilage"]}),"locations"===t&&(0,er.jsxs)("button",{onClick:()=>Ne(!0),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center gap-2",children:[(0,er.jsx)(r$,{className:"w-4 h-4"}),"New Location"]}),"assets"===t&&(0,er.jsxs)("button",{onClick:()=>ke(!0),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center gap-2",children:[(0,er.jsx)(r$,{className:"w-4 h-4"}),"Assign Asset"]})]}),n?(0,er.jsxs)("div",{className:"text-center py-12",children:[(0,er.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"}),(0,er.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading..."})]}):(0,er.jsxs)(er.Fragment,{children:["items"===t&&(0,er.jsx)(Rte,{items:Rt,categories:d,onDelete:async t=>{if(window.confirm("Are you sure you want to delete this item?"))try{await Ia.delete("/inventory/items/".concat(t)),e({title:"Success",message:"Item deleted successfully",type:"success"}),c(e=>e.filter(e=>e.id!==t))}catch(a){var r,n;console.error("Error deleting item:",a),e({title:"Error",message:"Failed to delete item: "+((null===(r=a.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.detail)||a.message),type:"error"})}},onEdit:e=>{ue(e),ht(Be(Be({},e),{},{category_id:e.category_id,image:null})),$(!0)},onViewHistory:e=>{it(e),at(!0)}}),"categories"===t&&(0,er.jsx)(Fte,{categories:Ft,onEdit:e=>{me(e),pt(Be(Be({},e),{},{description:e.description||"",parent_department:e.parent_department||""})),Z(!0)},onDelete:async t=>{if(window.confirm("Are you sure you want to delete this category?"))try{await Ia.delete("/inventory/categories/".concat(t)),e({title:"Success",message:"Category deleted successfully",type:"success"}),u(e=>e.filter(e=>e.id!==t))}catch(a){var r,n;console.error("Error deleting category:",a),e({title:"Error",message:"Failed to delete category: "+((null===(r=a.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.detail)||a.message),type:"error"})}}}),"vendors"===t&&(0,er.jsx)(Bte,{vendors:Bt,onEdit:jt,onView:jt}),"purchases"===t&&(0,er.jsx)(zte,{purchases:zt,onPurchaseClick:e=>{se(e),oe(!0)}}),"transactions"===t&&(0,er.jsxs)(er.Fragment,{children:[(0,er.jsx)(Xte,{transactions:g,purchases:p,items:l,foodItems:M,categories:d,filters:V,setFilters:H,onRefresh:vt,onTransactionClick:e=>{K(e),X(!0)}}),Y&&G&&(0,er.jsx)(Yte,{transaction:G,items:l,foodItems:M,categories:d,purchases:p,onClose:()=>{X(!1),K(null)}})]}),"requisitions"===t&&(0,er.jsxs)(er.Fragment,{children:[(0,er.jsx)("div",{className:"md:hidden space-y-4",children:0===Ut.length?(0,er.jsx)("div",{className:"text-center py-8 text-gray-500",children:'No requisitions found. Click "New Requisition" to create one.'}):Ut.map(e=>{var t;return(0,er.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm cursor-pointer hover:shadow-md transition-shadow",onClick:()=>{Pe(e),De(!0)},children:[(0,er.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,er.jsx)("h3",{className:"font-semibold text-gray-900",children:e.requisition_number}),(0,er.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat("approved"===e.status?"bg-green-100 text-green-800":"issued"===e.status?"bg-blue-100 text-blue-800":"rejected"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:e.status})]}),(0,er.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[(0,er.jsxs)("p",{children:[(0,er.jsx)("span",{className:"font-medium",children:"Department:"})," ",e.destination_department]}),(0,er.jsxs)("p",{children:[(0,er.jsx)("span",{className:"font-medium",children:"Priority:"}),(0,er.jsx)("span",{className:"ml-1 px-2 py-0.5 text-xs rounded-full ".concat("urgent"===e.priority?"bg-red-100 text-red-800":"critical"===e.priority?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"),children:e.priority})]}),(0,er.jsxs)("p",{children:[(0,er.jsx)("span",{className:"font-medium",children:"Items:"})," ",(null===(t=e.details)||void 0===t?void 0:t.length)||0]}),e.date_needed&&(0,er.jsxs)("p",{children:[(0,er.jsx)("span",{className:"font-medium",children:"Date Needed:"})," ",y$(e.date_needed)]})]}),(0,er.jsx)("div",{className:"mt-3",onClick:e=>e.stopPropagation(),children:(0,er.jsxs)("select",{value:e.status,onChange:t=>St(e.id,t.target.value),className:"w-full px-3 py-2 text-sm border rounded-lg ".concat("approved"===e.status?"bg-green-50 text-green-700 border-green-200":"issued"===e.status?"bg-blue-50 text-blue-700 border-blue-200":"rejected"===e.status?"bg-red-50 text-red-700 border-red-200":"completed"===e.status?"bg-blue-50 text-blue-700 border-blue-200":"bg-yellow-50 text-yellow-700 border-yellow-200"),children:[(0,er.jsx)("option",{value:"pending",children:"Pending"}),(0,er.jsx)("option",{value:"approved",children:"Approved"}),(0,er.jsx)("option",{value:"issued",children:"Issued"}),(0,er.jsx)("option",{value:"rejected",children:"Rejected"}),(0,er.jsx)("option",{value:"completed",children:"Completed"})]})})]},e.id)})}),(0,er.jsx)("div",{className:"hidden md:block overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,er.jsx)("thead",{className:"bg-gray-50",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Req #"}),(0,er.jsx)("th",{className:"px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Department"}),(0,er.jsx)("th",{className:"px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase hidden lg:table-cell",children:"Date Needed"}),(0,er.jsx)("th",{className:"px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Priority"}),(0,er.jsx)("th",{className:"px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),(0,er.jsx)("th",{className:"px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Items"}),(0,er.jsx)("th",{className:"px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,er.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===Ut.length?(0,er.jsx)("tr",{children:(0,er.jsx)("td",{colSpan:"7",className:"px-4 py-8 text-center text-gray-500",children:'No requisitions found. Click "New Requisition" to create one.'})}):Ut.map(e=>{var t;return(0,er.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>{Pe(e),De(!0)},children:[(0,er.jsx)("td",{className:"px-2 sm:px-4 py-3 text-sm font-medium text-gray-900",children:e.requisition_number}),(0,er.jsx)("td",{className:"px-2 sm:px-4 py-3 text-sm text-gray-600 hidden md:table-cell",children:e.destination_department}),(0,er.jsx)("td",{className:"px-2 sm:px-4 py-3 text-sm text-gray-600 hidden lg:table-cell",children:e.date_needed?y$(e.date_needed):"-"}),(0,er.jsx)("td",{className:"px-2 sm:px-4 py-3",children:(0,er.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat("urgent"===e.priority?"bg-red-100 text-red-800":"critical"===e.priority?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"),children:e.priority})}),(0,er.jsx)("td",{className:"px-2 sm:px-4 py-3",children:(0,er.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat("approved"===e.status?"bg-green-100 text-green-800":"issued"===e.status?"bg-blue-100 text-blue-800":"rejected"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:e.status})}),(0,er.jsxs)("td",{className:"px-2 sm:px-4 py-3 text-sm text-gray-600",children:[(null===(t=e.details)||void 0===t?void 0:t.length)||0," items"]}),(0,er.jsx)("td",{className:"px-2 sm:px-4 py-3",onClick:e=>e.stopPropagation(),children:(0,er.jsxs)("select",{value:e.status,onChange:t=>St(e.id,t.target.value),className:"px-3 py-1 text-sm rounded border ".concat("approved"===e.status?"bg-green-100 text-green-800 border-green-300":"issued"===e.status?"bg-blue-100 text-blue-800 border-blue-300":"rejected"===e.status?"bg-red-100 text-red-800 border-red-300":"completed"===e.status?"bg-blue-100 text-blue-800 border-blue-300":"bg-yellow-100 text-yellow-800 border-yellow-300"),children:[(0,er.jsx)("option",{value:"pending",children:"Pending"}),(0,er.jsx)("option",{value:"approved",children:"Approved"}),(0,er.jsx)("option",{value:"issued",children:"Issued"}),(0,er.jsx)("option",{value:"rejected",children:"Rejected"}),(0,er.jsx)("option",{value:"completed",children:"Completed"})]})})]},e.id)})})]})})]}),"issues"===t&&(0,er.jsxs)(er.Fragment,{children:[(0,er.jsx)("div",{className:"md:hidden space-y-4",children:0===qt.length?(0,er.jsx)("div",{className:"text-center py-8 text-gray-500",children:'No issues found. Click "New Issue" to create one.'}):qt.map(e=>{var t;return(0,er.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm cursor-pointer hover:shadow-md transition-shadow",onClick:()=>{Le(e),Re(!0)},children:[(0,er.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,er.jsx)("h3",{className:"font-semibold text-gray-900",children:e.issue_number}),(0,er.jsx)("span",{className:"text-xs text-gray-500",children:y$(e.issue_date||e.created_at)})]}),(0,er.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[(0,er.jsxs)("p",{children:[(0,er.jsx)("span",{className:"font-medium",children:"From:"})," ",e.source_location_name||"Main Store"]}),(0,er.jsxs)("p",{children:[(0,er.jsx)("span",{className:"font-medium",children:"To:"})," ",e.destination_location_name||"-"]}),(0,er.jsxs)("p",{children:[(0,er.jsx)("span",{className:"font-medium",children:"Items:"})," ",(null===(t=e.details)||void 0===t?void 0:t.length)||0]})]})]},e.id)})}),(0,er.jsx)("div",{className:"hidden md:block overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,er.jsx)("thead",{className:"bg-gray-50",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Issue #"}),(0,er.jsx)("th",{className:"px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"From"}),(0,er.jsx)("th",{className:"px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"To"}),(0,er.jsx)("th",{className:"px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),(0,er.jsx)("th",{className:"px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Items"})]})}),(0,er.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===qt.length?(0,er.jsx)("tr",{children:(0,er.jsx)("td",{colSpan:"5",className:"px-4 py-8 text-center text-gray-500",children:'No issues found. Click "New Issue" to create one.'})}):qt.map(e=>{var t;return(0,er.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>{Le(e),Re(!0)},children:[(0,er.jsx)("td",{className:"px-2 sm:px-4 py-3 text-sm font-medium text-gray-900",children:e.issue_number}),(0,er.jsx)("td",{className:"px-2 sm:px-4 py-3 text-sm text-gray-600 hidden md:table-cell",children:e.source_location_name||"Main Store"}),(0,er.jsx)("td",{className:"px-2 sm:px-4 py-3 text-sm text-gray-600 hidden md:table-cell",children:e.destination_location_name||"-"}),(0,er.jsx)("td",{className:"px-2 sm:px-4 py-3 text-sm text-gray-600",children:y$(e.issue_date||e.created_at)}),(0,er.jsxs)("td",{className:"px-2 sm:px-4 py-3 text-sm text-gray-600",children:[(null===(t=e.details)||void 0===t?void 0:t.length)||0," items"]})]},e.id)})})]})})]}),"waste"===t&&(0,er.jsxs)(er.Fragment,{children:[(0,er.jsx)("div",{className:"md:hidden space-y-4",children:0===Wt.length?(0,er.jsx)("div",{className:"text-center py-8 text-gray-500",children:'No waste logs found. Click "Log Waste/Spoilage" to create one.'}):Wt.map(e=>(0,er.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm cursor-pointer hover:shadow-md transition-shadow",onClick:()=>{ze(e),qe(!0)},children:[(0,er.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,er.jsx)("h3",{className:"font-semibold text-gray-900",children:e.log_number||"WL-".concat(e.id)}),(0,er.jsx)("span",{className:"text-xs text-gray-500",children:y$(e.waste_date||e.created_at)})]}),(0,er.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[(0,er.jsxs)("p",{children:[(0,er.jsx)("span",{className:"font-medium",children:"Item:"})," ",e.item_name||"N/A"]}),(0,er.jsxs)("p",{children:[(0,er.jsx)("span",{className:"font-medium",children:"Quantity:"})," ",e.quantity," ",e.unit]}),(0,er.jsxs)("p",{children:[(0,er.jsx)("span",{className:"font-medium",children:"Reason:"})," ",e.reason_code||e.reason||"N/A"]}),e.location_name&&(0,er.jsxs)("p",{children:[(0,er.jsx)("span",{className:"font-medium",children:"Location:"})," ",e.location_name]})]})]},e.id))}),(0,er.jsx)("div",{className:"hidden md:block overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,er.jsx)("thead",{className:"bg-gray-50",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Log #"}),(0,er.jsx)("th",{className:"px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Item"}),(0,er.jsx)("th",{className:"px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase hidden md:table-cell",children:"Quantity"}),(0,er.jsx)("th",{className:"px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase hidden lg:table-cell",children:"Reason"}),(0,er.jsx)("th",{className:"px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),(0,er.jsx)("th",{className:"px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase hidden lg:table-cell",children:"Location"})]})}),(0,er.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===Wt.length?(0,er.jsx)("tr",{children:(0,er.jsx)("td",{colSpan:"6",className:"px-4 py-8 text-center text-gray-500",children:'No waste logs found. Click "Log Waste/Spoilage" to create one.'})}):Wt.map(e=>(0,er.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>{ze(e),qe(!0)},children:[(0,er.jsx)("td",{className:"px-2 sm:px-4 py-3 text-sm font-medium text-gray-900",children:e.log_number||"WL-".concat(e.id)}),(0,er.jsx)("td",{className:"px-2 sm:px-4 py-3 text-sm text-gray-600",children:e.item_name||"N/A"}),(0,er.jsxs)("td",{className:"px-2 sm:px-4 py-3 text-sm text-gray-600 hidden md:table-cell",children:[e.quantity," ",e.unit]}),(0,er.jsx)("td",{className:"px-2 sm:px-4 py-3 text-sm text-gray-600 hidden lg:table-cell",children:e.reason_code||e.reason||"N/A"}),(0,er.jsx)("td",{className:"px-2 sm:px-4 py-3 text-sm text-gray-600",children:y$(e.waste_date||e.created_at)}),(0,er.jsx)("td",{className:"px-2 sm:px-4 py-3 text-sm text-gray-600 hidden lg:table-cell",children:e.location_name||"-"})]},e.id))})]})})]}),"locations"===t&&(0,er.jsxs)(er.Fragment,{children:[(0,er.jsx)("div",{className:"md:hidden space-y-4",children:0===Vt.length?(0,er.jsx)("div",{className:"text-center py-8 text-gray-500",children:'No locations found. Click "New Location" to create one.'}):Vt.map(e=>(0,er.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm cursor-pointer hover:shadow-md transition-shadow",onClick:()=>{Ve(e),Ge(!0)},children:[(0,er.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,er.jsx)("h3",{className:"font-semibold text-gray-900",children:e.name}),e.is_inventory_point?(0,er.jsx)("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full",children:"Inventory Point"}):null]}),(0,er.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[(0,er.jsxs)("p",{children:[(0,er.jsx)("span",{className:"font-medium",children:"Code:"})," ",e.location_code||"LOC-".concat(e.id)]}),e.building&&(0,er.jsxs)("p",{children:[(0,er.jsx)("span",{className:"font-medium",children:"Building:"})," ",e.building]}),e.floor&&(0,er.jsxs)("p",{children:[(0,er.jsx)("span",{className:"font-medium",children:"Floor:"})," ",e.floor]}),(0,er.jsxs)("p",{children:[(0,er.jsx)("span",{className:"font-medium",children:"Type:"})," ",e.location_type]})]})]},e.id))}),(0,er.jsx)("div",{className:"hidden md:block overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,er.jsx)("thead",{className:"bg-gray-50",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Code"}),(0,er.jsx)("th",{className:"px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),(0,er.jsx)("th",{className:"px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase hidden md:table-cell",children:"Building"}),(0,er.jsx)("th",{className:"px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase hidden lg:table-cell",children:"Floor"}),(0,er.jsx)("th",{className:"px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase hidden md:table-cell",children:"Type"}),(0,er.jsx)("th",{className:"px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Inventory Point"})]})}),(0,er.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===Vt.length?(0,er.jsx)("tr",{children:(0,er.jsx)("td",{colSpan:"6",className:"px-4 py-8 text-center text-gray-500",children:'No locations found. Click "New Location" to create one.'})}):Vt.map(e=>(0,er.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>{Ve(e),Ge(!0)},children:[(0,er.jsx)("td",{className:"px-2 sm:px-4 py-3 text-sm font-medium text-gray-900",children:e.location_code||"LOC-".concat(e.id)}),(0,er.jsx)("td",{className:"px-2 sm:px-4 py-3 text-sm text-gray-600",children:e.name}),(0,er.jsx)("td",{className:"px-2 sm:px-4 py-3 text-sm text-gray-600 hidden md:table-cell",children:e.building||"-"}),(0,er.jsx)("td",{className:"px-2 sm:px-4 py-3 text-sm text-gray-600 hidden lg:table-cell",children:e.floor||"-"}),(0,er.jsx)("td",{className:"px-2 sm:px-4 py-3 text-sm text-gray-600 hidden md:table-cell",children:e.location_type}),(0,er.jsx)("td",{className:"px-2 sm:px-4 py-3",children:e.is_inventory_point?(0,er.jsx)("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full",children:"Yes"}):(0,er.jsx)("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-800 rounded-full",children:"No"})})]},e.id))})]})})]}),"assets"===t&&(0,er.jsxs)(er.Fragment,{children:[(0,er.jsx)("div",{className:"md:hidden space-y-4",children:0===Ht.length?(0,er.jsx)("div",{className:"text-center py-8 text-gray-500",children:'No asset mappings found. Click "Assign Asset" to create one.'}):Ht.map(e=>(0,er.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm cursor-pointer hover:shadow-md transition-shadow",onClick:()=>{Ye(e),Qe(!0)},children:[(0,er.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,er.jsx)("h3",{className:"font-semibold text-gray-900",children:e.item_name||"N/A"}),(0,er.jsx)("span",{className:"text-xs text-gray-500",children:y$(e.assigned_date||e.created_at)})]}),(0,er.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[(0,er.jsxs)("p",{children:[(0,er.jsx)("span",{className:"font-medium",children:"Location:"})," ",e.location_name||"-"]}),(0,er.jsxs)("p",{children:[(0,er.jsx)("span",{className:"font-medium",children:"Qty:"})," ",e.quantity||1]}),e.serial_number&&(0,er.jsxs)("p",{children:[(0,er.jsx)("span",{className:"font-medium",children:"Serial #:"})," ",e.serial_number]})]}),(0,er.jsxs)("div",{className:"flex gap-2 mt-3",children:[(0,er.jsx)("button",{onClick:t=>{t.stopPropagation(),Lt(e),Dt({location_id:e.location_id,assets:[{item_id:e.item_id,serial_number:e.serial_number,quantity:e.quantity||1,notes:e.notes}]}),ke(!0)},className:"flex-1 px-3 py-2 bg-indigo-600 text-white text-sm rounded hover:bg-indigo-700",children:"Edit"}),(0,er.jsx)("button",{onClick:t=>{t.stopPropagation(),Mt(e.id)},className:"flex-1 px-3 py-2 bg-red-600 text-white text-sm rounded hover:bg-red-700",children:"Unassign"})]})]},e.id))}),(0,er.jsx)("div",{className:"hidden md:block overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,er.jsx)("thead",{className:"bg-gray-50",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Item"}),(0,er.jsx)("th",{className:"px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase hidden md:table-cell",children:"Location"}),(0,er.jsx)("th",{className:"px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Qty"}),(0,er.jsx)("th",{className:"px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase hidden lg:table-cell",children:"Serial #"}),(0,er.jsx)("th",{className:"px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Assigned Date"}),(0,er.jsx)("th",{className:"px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,er.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===Ht.length?(0,er.jsx)("tr",{children:(0,er.jsx)("td",{colSpan:"5",className:"px-4 py-8 text-center text-gray-500",children:'No asset mappings found. Click "Assign Asset" to create one.'})}):Ht.map(e=>(0,er.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>{Ye(e),Qe(!0)},children:[(0,er.jsx)("td",{className:"px-2 sm:px-4 py-3 text-sm font-medium text-gray-900",children:e.item_name||"N/A"}),(0,er.jsx)("td",{className:"px-2 sm:px-4 py-3 text-sm text-gray-600 hidden md:table-cell",children:e.location_name||"-"}),(0,er.jsx)("td",{className:"px-2 sm:px-4 py-3 text-sm text-gray-600",children:e.quantity||1}),(0,er.jsx)("td",{className:"px-2 sm:px-4 py-3 text-sm text-gray-600 hidden lg:table-cell",children:e.serial_number||"-"}),(0,er.jsx)("td",{className:"px-2 sm:px-4 py-3 text-sm text-gray-600",children:y$(e.assigned_date||e.created_at)}),(0,er.jsx)("td",{className:"px-2 sm:px-4 py-3",onClick:e=>e.stopPropagation(),children:(0,er.jsxs)("div",{className:"flex gap-2",children:[(0,er.jsx)("button",{onClick:t=>{t.stopPropagation(),Lt(e),Dt({location_id:e.location_id,assets:[{item_id:e.item_id,serial_number:e.serial_number,quantity:e.quantity||1,notes:e.notes}]}),ke(!0)},className:"px-3 py-1 bg-indigo-600 text-white text-sm rounded hover:bg-indigo-700",children:"Edit"}),(0,er.jsx)("button",{onClick:()=>Mt(e.id),className:"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700",children:"Unassign"})]})})]},e.id))})]})})]}),"location-stock"===t&&(0,er.jsx)(Lte,{locations:C,onLocationClick:async e=>{try{const t=await Ia.get("/inventory/locations/".concat(e,"/items"));D(t.data),P(e)}catch(n){var t,r;console.error("Error fetching location items:",n),alert("Failed to load location items: "+((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||n.message))}}}),"recipe"===t&&(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsxs)("div",{className:"flex justify-between items-center",children:[(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Food Item Recipes"}),(0,er.jsx)("button",{onClick:()=>{W({food_item_id:"",name:"",description:"",servings:1,prep_time_minutes:"",cook_time_minutes:"",ingredients:[]}),U(null),B(!0)},className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"+ Add Recipe"})]}),0===I.length?(0,er.jsx)("div",{className:"text-center py-8 text-gray-500",children:'No recipes found. Click "Add Recipe" to create one.'}):(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,er.jsx)("thead",{className:"bg-gray-50",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Food Item"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Recipe Name"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Servings"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Ingredients"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cost/Serving"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,er.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:I.map(e=>{var t;return(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsx)("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:e.food_item_name||"Food Item #".concat(e.food_item_id)}),(0,er.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.name}),(0,er.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.servings}),(0,er.jsxs)("td",{className:"px-4 py-3 text-sm text-gray-600",children:[e.ingredients.length," ingredient(s)"]}),(0,er.jsxs)("td",{className:"px-4 py-3 text-sm font-semibold text-green-600",children:["\u20b9",(null===(t=e.total_cost)||void 0===t?void 0:t.toFixed(2))||"0.00"]}),(0,er.jsx)("td",{className:"px-4 py-3 text-sm",children:(0,er.jsxs)("div",{className:"flex gap-2",children:[(0,er.jsx)("button",{onClick:()=>{U(e),W({food_item_id:e.food_item_id,name:e.name,description:e.description||"",servings:e.servings,prep_time_minutes:e.prep_time_minutes||"",cook_time_minutes:e.cook_time_minutes||"",ingredients:e.ingredients.map(e=>({inventory_item_id:e.inventory_item_id,quantity:e.quantity,unit:e.unit,notes:e.notes||""}))}),B(!0)},className:"px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Edit"}),(0,er.jsx)("button",{onClick:async()=>{if(window.confirm("Are you sure you want to delete this recipe?"))try{await Ia.delete("/recipes/".concat(e.id)),vt()}catch(n){var t,r;alert("Failed to delete recipe: "+((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||n.message))}},className:"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600",children:"Delete"})]})})]},e.id)})})]})})]})]})]})]})]}),(0,er.jsx)(sre,{isOpen:$e,onClose:()=>Je(!1),onConfirm:async()=>{try{let t="/inventory/asset-mappings/".concat(Ze);tt&&(t+="?destination_location_id=".concat(tt)),await Ia.delete(t),e({title:"Success",message:"Asset unassigned successfully!",type:"success"}),Je(!1),vt()}catch(n){var t,r;console.error("Error unassigning asset:",n),e({title:"Error",message:"Failed to unassign asset: "+((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||n.message),type:"error"})}},destination:tt,setDestination:rt,locations:_}),le&&(0,er.jsx)(qte,{unit:ct,setUnit:dt,onSubmit:e=>{e.preventDefault(),ct.value&&ct.label&&(ot.find(e=>e.value.toLowerCase()===ct.value.toLowerCase())?alert("Unit already exists!"):(lt([...ot,{value:ct.value.toLowerCase(),label:ct.label}]),ht(Be(Be({},ut),{},{unit:ct.value.toLowerCase()})),dt({value:"",label:""}),ce(!1)))},onClose:()=>{ce(!1),dt({value:"",label:""})}}),Q&&(0,er.jsx)(Ute,{form:ut,setForm:ht,categories:d,vendors:h,units:ot,setShowUnitForm:ce,onSubmit:async t=>{t.preventDefault();try{const t=new FormData;if(Object.keys(ut).forEach(e=>{"image"===e?ut.image&&t.append("image",ut.image):"max_stock_level"===e||"selling_price"===e||"maintenance_schedule_days"===e||"complimentary_limit"===e||"ingredient_yield_percentage"===e||"preferred_vendor_id"===e||"lead_time_days"===e?""!==ut[e]&&null!==ut[e]&&void 0!==ut[e]&&t.append(e,ut[e]):t.append(e,ut[e])}),de){const r=await Ia.put("/inventory/items/".concat(de.id),t,{headers:{"Content-Type":"multipart/form-data"}});e({title:"Success",message:"Item updated successfully!",type:"success"}),c(e=>e.map(e=>e.id===r.data.id?r.data:e))}else{const r=await Ia.post("/inventory/items",t,{headers:{"Content-Type":"multipart/form-data"}});e({title:"Success",message:"Item created successfully!",type:"success"}),c(e=>[r.data,...e])}ht({name:"",item_code:"",description:"",category_id:"",sub_category:"",hsn_code:"",unit:"pcs",initial_stock:0,min_stock_level:0,max_stock_level:"",unit_price:0,selling_price:"",gst_rate:0,location:"",barcode:"",image:null,is_perishable:!1,track_serial_number:!1,is_sellable_to_guest:!1,track_laundry_cycle:!1,is_asset_fixed:!1,maintenance_schedule_days:"",complimentary_limit:"",ingredient_yield_percentage:"",preferred_vendor_id:"",vendor_item_code:"",lead_time_days:"",is_active:!0}),$(!1),ue(null)}catch(a){var r,n;console.error("Error submitting item:",a),e({title:"Error",message:"Failed to submit item: "+((null===(r=a.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.detail)||a.message),type:"error"})}},onClose:()=>{$(!1),ue(null),ht({name:"",item_code:"",description:"",category_id:"",sub_category:"",hsn_code:"",unit:"pcs",initial_stock:0,min_stock_level:0,max_stock_level:"",unit_price:0,selling_price:"",gst_rate:0,location:"",barcode:"",image:null,is_perishable:!1,track_serial_number:!1,is_sellable_to_guest:!1,track_laundry_cycle:!1,is_asset_fixed:!1,maintenance_schedule_days:"",complimentary_limit:"",ingredient_yield_percentage:"",preferred_vendor_id:"",vendor_item_code:"",lead_time_days:"",is_active:!0})}}),J&&(0,er.jsx)(Qte,{form:mt,setForm:pt,onSubmit:async t=>{t.preventDefault();try{if(he){const t=await Ia.put("/inventory/categories/".concat(he.id),mt);e({title:"Success",message:"Category updated successfully!",type:"success"}),u(e=>e.map(e=>e.id===t.data.id?t.data:e))}else{const t=await Ia.post("/inventory/categories",mt);e({title:"Success",message:"Category created successfully!",type:"success"}),u(e=>[t.data,...e])}pt({name:"",description:"",parent_department:"",gst_tax_rate:0,classification:"",hsn_sac_code:"",default_gst_rate:0,cess_percentage:0,itc_eligibility:"Eligible",is_capital_good:!1,is_perishable:!1,is_asset_fixed:!1,is_sellable:!1,track_laundry:!1,allow_partial_usage:!1,consumable_instant:!1}),me(null),Z(!1)}catch(a){var r,n;console.error("Error submitting category:",a),e({title:"Error",message:"Failed to submit category: "+((null===(r=a.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.detail)||a.message),type:"error"})}},onClose:()=>{Z(!1),pt({name:"",description:"",parent_department:"",gst_tax_rate:0,classification:"",hsn_sac_code:"",default_gst_rate:0,cess_percentage:0,itc_eligibility:"Eligible",is_capital_good:!1,is_perishable:!1,is_asset_fixed:!1,is_sellable:!1,track_laundry:!1,allow_partial_usage:!1,consumable_instant:!1})}}),ee&&(0,er.jsx)($te,{form:ft,setForm:gt,onSubmit:async t=>{if(t.preventDefault(),"Bank Transfer"===ft.preferred_payment_method){if(ft.account_number!==ft.account_number_confirm)return void e({title:"Validation Error",message:"Account numbers do not match! Please verify.",type:"error"});if(!ft.account_number||ft.account_number.length<9||ft.account_number.length>18)return void e({title:"Validation Error",message:"Account number must be 9-18 digits!",type:"error"});if(!ft.ifsc_code||11!==ft.ifsc_code.length)return void e({title:"Validation Error",message:"IFSC code must be exactly 11 characters!",type:"error"})}const{account_number_confirm:r}=ft,n=qa(ft,Gte),a={};for(const[e,d]of Object.entries(n))a[e]=""===d||null===d||void 0===d?"distance_km"===e||"string"===typeof d&&""===d?null:d:"distance_km"===e&&"string"===typeof d?d?parseFloat(d):null:d;try{if(pe){const t=await Ia.put("/inventory/vendors/".concat(pe.id),a);e({title:"Success",message:"Vendor updated successfully!",type:"success"}),m(e=>e.map(e=>e.id===t.data.id?t.data:e))}else{const t=await Ia.post("/inventory/vendors",a);e({title:"Success",message:"Vendor created successfully!",type:"success"}),m(e=>[t.data,...e])}gt({name:"",company_name:"",gst_registration_type:"",gst_number:"",legal_name:"",trade_name:"",pan_number:"",qmp_scheme:!1,msme_udyam_no:"",contact_person:"",email:"",phone:"",billing_address:"",billing_state:"",shipping_address:"",distance_km:"",address:"",city:"",state:"",pincode:"",country:"India",is_msme_registered:!1,tds_apply:!1,rcm_applicable:!1,payment_terms:"",preferred_payment_method:"",account_holder_name:"",bank_name:"",account_number:"",account_number_confirm:"",ifsc_code:"",branch_name:"",upi_id:"",upi_mobile_number:"",notes:"",is_active:!0}),fe(null),te(!1)}catch(c){var s,i,o,l;console.error("Error submitting vendor:",c);const t=(null===(s=c.response)||void 0===s||null===(i=s.data)||void 0===i?void 0:i.detail)||(null===(o=c.response)||void 0===o||null===(l=o.data)||void 0===l?void 0:l.message)||c.message||"Failed to submit vendor";e({title:"Error",message:"Failed to submit vendor: ".concat(t),type:"error"})}},isEditing:!!pe,onClose:()=>{te(!1),gt({name:"",company_name:"",gst_registration_type:"",gst_number:"",legal_name:"",trade_name:"",pan_number:"",qmp_scheme:!1,msme_udyam_no:"",contact_person:"",email:"",phone:"",billing_address:"",billing_state:"",shipping_address:"",distance_km:"",address:"",city:"",state:"",pincode:"",country:"India",is_msme_registered:!1,tds_apply:!1,rcm_applicable:!1,payment_terms:"",preferred_payment_method:"",account_holder_name:"",bank_name:"",account_number:"",account_number_confirm:"",ifsc_code:"",branch_name:"",upi_id:"",upi_mobile_number:"",notes:"",is_active:!0})}}),ie&&ae&&(0,er.jsx)(Zte,{purchase:ae,onClose:()=>{oe(!1),se(null)},onUpdate:e=>{f(p.map(t=>t.id===e.id?e:t)),se(e)}}),re&&(0,er.jsx)(Jte,{form:xt,setForm:yt,items:l,foodItems:M,categories:d,vendors:h,locations:_,purchases:p,onSubmit:async t=>{t.preventDefault();try{if(!xt.purchase_number||!xt.vendor_id)return void e({title:"Validation Error",message:"Please fill in all required fields (PO Number and Vendor)",type:"error"});const t=xt.details.filter(e=>e.item_id&&""!==e.item_id).map(e=>{const t=parseFloat(e.quantity)||0,r=parseFloat(e.unit_price)||0,n=parseFloat(e.gst_rate)||0,a=parseFloat(e.discount)||0;let s,i;return e.tax_inclusive||!1?(s=r/(1+n/100),i=r):(s=r,i=r*(1+n/100)),{item_id:parseInt(e.item_id),quantity:t,unit:e.unit||"pcs",unit_price:s,gst_rate:n,discount:a,hsn_code:e.hsn_code||null,notes:e.serial_batch||e.expiry_date?"Serial/Batch: ".concat(e.serial_batch||"N/A",", Expiry: ").concat(e.expiry_date||"N/A"):null}});if(0===t.length)return void e({title:"Validation Error",message:"Please add at least one item to the purchase order",type:"error"});const r={purchase_number:xt.purchase_number,vendor_id:parseInt(xt.vendor_id),purchase_date:xt.purchase_date,expected_delivery_date:xt.expected_delivery_date||null,invoice_number:xt.invoice_number||null,invoice_date:xt.invoice_date||null,gst_number:xt.gst_number||null,payment_terms:xt.payment_terms||null,payment_status:xt.payment_status||"pending",destination_location_id:xt.destination_location_id?parseInt(xt.destination_location_id):null,notes:xt.notes||null,status:xt.status||"draft",details:t},n=await Ia.post("/inventory/purchases",r);f(e=>[n.data,...e]),yt({purchase_number:"",vendor_id:"",purchase_date:b$(),expected_delivery_date:"",invoice_number:"",invoice_date:"",gst_number:"",payment_terms:"",payment_status:"pending",notes:"",status:"draft",details:[{item_id:"",category:"",hsn_code:"",unit:"pcs",quantity:0,unit_price:0,gst_rate:0,tax_inclusive:!1,serial_batch:"",expiry_date:"",discount:0}]}),ne(!1)}catch(a){var r,n;console.error("Error submitting purchase:",a);const t=(null===(r=a.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.detail)||a.message||"Failed to submit purchase";e({title:"Error",message:"Failed to submit purchase: ".concat(t),type:"error"})}},onAddDetail:()=>{yt(Be(Be({},xt),{},{details:[...xt.details,{item_id:"",category:"",hsn_code:"",unit:"pcs",quantity:0,unit_price:0,gst_rate:0,tax_inclusive:!1,serial_batch:"",expiry_date:"",discount:0}]}))},onRemoveDetail:e=>{yt(Be(Be({},xt),{},{details:xt.details.filter((t,r)=>r!==e)}))},onClose:()=>{ne(!1),yt({purchase_number:"",vendor_id:"",purchase_date:b$(),expected_delivery_date:"",invoice_number:"",invoice_date:"",gst_number:"",payment_terms:"",payment_status:"pending",notes:"",status:"draft",details:[{item_id:"",category:"",hsn_code:"",unit:"pcs",quantity:0,unit_price:0,gst_rate:0,tax_inclusive:!1,serial_batch:"",expiry_date:"",discount:0}]})}}),ge&&(0,er.jsx)(tre,{form:wt,setForm:Nt,items:l,foodItems:M,onSubmit:async t=>{t.preventDefault();try{const t=wt.details.filter(e=>e.item_id&&""!==e.item_id).map(e=>({item_id:parseInt(e.item_id),requested_quantity:parseFloat(e.requested_quantity)||0,approved_quantity:e.approved_quantity?parseFloat(e.approved_quantity):null,unit:e.unit||"pcs",notes:e.notes||null}));if(0===t.length)return void e({title:"Validation Error",message:"Please add at least one item",type:"error"});await Ia.post("/inventory/requisitions",{destination_department:wt.destination_department,date_needed:wt.date_needed||null,priority:wt.priority,notes:wt.notes,details:t}),e({title:"Success",message:"Requisition created successfully!",type:"success"}),xe(!1),Nt({destination_department:"",date_needed:"",priority:"Normal",notes:"",details:[{item_id:"",requested_quantity:0,approved_quantity:null,unit:"pcs",notes:""}]}),vt(),vt()}catch(a){var r,n;console.error("Error creating requisition:",a),e({title:"Error",message:"Failed to create requisition: "+((null===(r=a.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.detail)||a.message),type:"error"})}},onAddDetail:()=>{Nt(Be(Be({},wt),{},{details:[...wt.details,{item_id:"",requested_quantity:0,approved_quantity:null,unit:"pcs",notes:""}]}))},onRemoveDetail:e=>{const t=wt.details.filter((t,r)=>r!==e);Nt(Be(Be({},wt),{},{details:t.length>0?t:[{item_id:"",requested_quantity:0,approved_quantity:null,unit:"pcs",notes:""}]}))},onClose:()=>{xe(!1),Nt({destination_department:"",date_needed:"",priority:"Normal",notes:"",details:[{item_id:"",requested_quantity:0,approved_quantity:null,unit:"pcs",notes:""}]})}}),Se&&(0,er.jsx)(mre,{form:Ce,setForm:Ee,items:l,locations:_,onSubmit:async t=>{t.preventDefault();try{await Ia.post("/inventory/adjustments",Ce),e({title:"Success",message:"Stock adjusted successfully",type:"success"}),Ae(!1),Ee({location_id:"",item_id:"",actual_stock:"",notes:""}),vt()}catch(a){var r,n;console.error(a),e({title:"Error",message:"Failed to adjust stock "+((null===(r=a.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.detail)||""),type:"error"})}},onClose:()=>Ae(!1)}),ye&&(0,er.jsx)(ere,{form:_t,setForm:kt,items:l,foodItems:M,locations:_,requisitions:y,onSubmit:async t=>{t.preventDefault();try{const t=_t.details.filter(e=>e.item_id&&""!==e.item_id).map(e=>({item_id:parseInt(e.item_id),issued_quantity:parseFloat(e.issued_quantity)||0,unit:e.unit||"pcs",batch_lot_number:e.batch_lot_number||null,cost:e.cost?parseFloat(e.cost):null,notes:e.notes||null}));if(0===t.length)return void e({title:"Validation Error",message:"Please add at least one item",type:"error"});if(!_t.source_location_id||!_t.destination_location_id)return void e({title:"Validation Error",message:"Please select source and destination locations",type:"error"});await Ia.post("/inventory/issues",{requisition_id:_t.requisition_id||null,source_location_id:parseInt(_t.source_location_id),destination_location_id:parseInt(_t.destination_location_id),issue_date:_t.issue_date||null,notes:_t.notes||null,details:t}),e({title:"Success",message:"Stock issue created successfully!",type:"success"}),ve(!1),kt({requisition_id:"",source_location_id:"",destination_location_id:"",issue_date:b$(),notes:"",details:[{item_id:"",issued_quantity:0,unit:"pcs",batch_lot_number:"",cost:0,notes:""}]}),r("issues"),vt()}catch(s){var n,a;console.error("Error creating issue:",s),e({title:"Error",message:"Failed to create issue: "+((null===(n=s.response)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.detail)||s.message),type:"error"})}},onAddDetail:()=>{kt(Be(Be({},_t),{},{details:[..._t.details,{item_id:"",issued_quantity:0,unit:"pcs",batch_lot_number:"",cost:0,notes:""}]}))},onRemoveDetail:e=>{const t=_t.details.filter((t,r)=>r!==e);kt(Be(Be({},_t),{},{details:t.length>0?t:[{item_id:"",issued_quantity:0,unit:"pcs",batch_lot_number:"",cost:0,notes:""}]}))},onClose:()=>{ve(!1),kt({requisition_id:"",source_location_id:"",destination_location_id:"",issue_date:b$(),notes:"",details:[{item_id:"",issued_quantity:0,unit:"pcs",batch_lot_number:"",cost:0,notes:""}]})}}),be&&(0,er.jsx)(rre,{form:At,setForm:Ct,items:l,foodItems:M,locations:_,onSubmit:async t=>{t.preventDefault();try{const t=new FormData;if(At.item_id&&At.item_id.toString().startsWith("food_")){const e=At.item_id.replace("food_","");t.append("food_item_id",e),t.append("is_food_item","1")}else At.item_id&&t.append("item_id",At.item_id),t.append("is_food_item","0");At.batch_number&&t.append("batch_number",At.batch_number),At.expiry_date&&t.append("expiry_date",At.expiry_date),t.append("quantity",At.quantity),t.append("unit",At.unit),t.append("reason_code",At.reason_code),At.action_taken&&t.append("action_taken",At.action_taken),At.location_id&&t.append("location_id",At.location_id),t.append("waste_date",At.waste_date||b$()),At.notes&&t.append("notes",At.notes),At.photo&&t.append("photo",At.photo);const r=await Ia.post("/inventory/waste-logs",t,{headers:{"Content-Type":"multipart/form-data"}});e({title:"Success",message:"Waste log created successfully!",type:"success"}),N(e=>[r.data,...e]),je(!1),Ct({item_id:"",batch_number:"",expiry_date:"",quantity:0,unit:"pcs",reason_code:"",action_taken:"",location_id:"",waste_date:b$(),notes:"",photo:null})}catch(a){var r,n;console.error("Error creating waste log:",a),e({title:"Error",message:"Failed to create waste log: "+((null===(r=a.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.detail)||a.message),type:"error"})}},onClose:()=>{je(!1),Ct({item_id:"",batch_number:"",expiry_date:"",quantity:0,unit:"pcs",reason_code:"",action_taken:"",location_id:"",waste_date:b$(),notes:"",photo:null})}}),we&&(0,er.jsx)(nre,{form:Et,setForm:Pt,locations:_,onSubmit:async t=>{t.preventDefault();try{await Ia.post("/inventory/locations",Et),e({title:"Success",message:"Location created successfully!",type:"success"}),Ne(!1),Pt({name:"",location_type:"",building:"",floor:"",room_area:"",parent_location_id:"",is_inventory_point:!1,description:"",is_active:!0}),vt()}catch(a){var r,n;console.error("Error creating location:",a),e({title:"Error",message:"Failed to create location: "+((null===(r=a.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.detail)||a.message),type:"error"})}},onClose:()=>{Ne(!1),Pt({name:"",location_type:"",building:"",floor:"",room_area:"",parent_location_id:"",is_inventory_point:!1,description:"",is_active:!0})}}),_e&&(0,er.jsx)(are,{form:Ot,setForm:Dt,items:l,foodItems:M,locations:_,categories:d,isEditing:!!It,onSubmit:async e=>{if(e.preventDefault(),!Ot.location_id)return void alert("Please select a location");const t=(Ot.assets||[]).filter(e=>e.item_id);if(0!==t.length)try{if(It){const e=t[0];await Ia.put("/inventory/asset-mappings/".concat(It.id),{location_id:parseInt(Ot.location_id),serial_number:e.serial_number||null,quantity:parseFloat(e.quantity)||1,notes:e.notes||null,is_active:!0}),alert("Asset assignment updated successfully!")}else{for(const e of t)await Ia.post("/inventory/asset-mappings",{item_id:parseInt(e.item_id),location_id:parseInt(Ot.location_id),source_location_id:e.source_location_id?parseInt(e.source_location_id):null,serial_number:e.serial_number||null,quantity:parseFloat(e.quantity)||1,notes:e.notes||null});alert("Assets assigned successfully!")}ke(!1),Lt(null),Dt({location_id:"",assets:[{item_id:"",source_location_id:"",serial_number:"",quantity:1,notes:""}]}),vt()}catch(a){var r,n;console.error("Error saving asset mapping:",a),alert("Failed to save asset assignment: "+((null===(r=a.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.detail)||a.message))}else alert("Please add at least one asset")},onClose:()=>{ke(!1),Lt(null),Dt({location_id:"",assets:[{item_id:"",serial_number:"",quantity:1,notes:""}]})}}),Oe&&Te&&(0,er.jsx)(ire,{requisition:Te,items:l,foodItems:M,onClose:()=>{De(!1),Pe(null)}}),Me&&Ie&&(0,er.jsx)(ore,{issue:Ie,items:l,foodItems:M,locations:_,onClose:()=>{Re(!1),Le(null)}}),Ue&&Fe&&(0,er.jsx)(lre,{wasteLog:Fe,items:l,foodItems:M,locations:_,onClose:()=>{qe(!1),ze(null)}}),nt&&st&&(0,er.jsx)(Hte,{isOpen:nt,item:st,onClose:()=>{at(!1),it(null)}}),He&&We&&(0,er.jsx)(cre,{location:We,onClose:()=>{Ge(!1),Ve(null)},refreshLocation:()=>vt()}),Xe&&Ke&&(0,er.jsx)(dre,{asset:Ke,items:l,foodItems:M,locations:_,onClose:()=>{Qe(!1),Ye(null)}}),O&&(0,er.jsx)(Kte,{locationData:O,onClose:()=>{D(null),P(null)}}),F&&(0,er.jsx)(ure,{form:q,setForm:W,foodItems:M,items:l,editingRecipe:z,onSubmit:async e=>{try{z?await Ia.put("/recipes/".concat(z.id),e):await Ia.post("/recipes",e),B(!1),U(null),vt()}catch(n){var t,r;alert("Failed to save recipe: "+((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||n.message))}},onClose:()=>{B(!1),U(null),W({food_item_id:"",name:"",description:"",servings:1,prep_time_minutes:"",cook_time_minutes:"",ingredients:[]})}})]})};function mre(e){let{form:t,setForm:r,items:n,locations:s,onSubmit:i,onClose:l}=e;const[c,d]=(0,a.useState)(null),[u,h]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{t.location_id&&t.item_id?(h(!0),Ia.get("/inventory/locations/".concat(t.location_id,"/items")).then(e=>{var r;const n=null===(r=e.data.items)||void 0===r?void 0:r.find(e=>(e.item_id||e.id)===parseInt(t.item_id));d(n&&n.location_stock||0)}).catch(()=>d(0)).finally(()=>h(!1))):d(null)},[t.location_id,t.item_id]),o.createPortal((0,er.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[10000]",children:(0,er.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full mx-4",children:[(0,er.jsxs)("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center",children:[(0,er.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Adjust Stock"}),(0,er.jsx)("button",{onClick:l,className:"text-gray-400 hover:text-gray-600",children:(0,er.jsx)(ZQ,{className:"w-6 h-6"})})]}),(0,er.jsxs)("form",{onSubmit:i,className:"p-6 space-y-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),(0,er.jsxs)("select",{value:t.location_id,onChange:e=>r(Be(Be({},t),{},{location_id:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0,children:[(0,er.jsx)("option",{value:"",children:"Select Location"}),s.map(e=>(0,er.jsx)("option",{value:e.id,children:e.name||"".concat(e.building," - ").concat(e.room_area)},e.id))]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Item"}),(0,er.jsxs)("select",{value:t.item_id,onChange:e=>r(Be(Be({},t),{},{item_id:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0,children:[(0,er.jsx)("option",{value:"",children:"Select Item"}),n.map(e=>(0,er.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,er.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg flex justify-between items-center",children:[(0,er.jsx)("span",{className:"text-sm text-blue-800 font-medium",children:"Current Stock in System:"}),(0,er.jsx)("span",{className:"text-lg font-bold text-blue-900",children:u?"...":null!==c?c:"-"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Actual Stock (Physical Count)"}),(0,er.jsx)("input",{type:"number",step:"any",value:t.actual_stock,onChange:e=>r(Be(Be({},t),{},{actual_stock:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500",required:!0,placeholder:"Enter the actual count found"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason / Notes"}),(0,er.jsx)("textarea",{value:t.notes,onChange:e=>r(Be(Be({},t),{},{notes:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",rows:"3"})]}),(0,er.jsxs)("div",{className:"flex justify-end pt-4 gap-2",children:[(0,er.jsx)("button",{type:"button",onClick:l,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Cancel"}),(0,er.jsx)("button",{type:"submit",className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700",children:"Confirm Adjustment"})]})]})]})}),document.body)}const pre=Xh("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);function fre(){const[e,t]=(0,a.useState)("system_settings"),[r,n]=(0,a.useState)({gst_number:""}),[s,i]=(0,a.useState)(!1),[o,l]=(0,a.useState)([]),[c,d]=(0,a.useState)({name:"",document_type:"",description:"",file:null}),[u,h]=(0,a.useState)(!1),m=async()=>{h(!0);try{const e=await Ia.get("/legal/");l(e.data)}catch(e){console.error("Error fetching legal documents:",e)}finally{h(!1)}};return(0,a.useEffect)(()=>{"system_settings"===e?(async()=>{i(!0);try{const e=await Ia.get("/settings/"),t={};e.data.forEach(e=>{t[e.key]=e.value}),n(e=>Be(Be({},e),t))}catch(e){console.error("Error fetching settings:",e)}finally{i(!1)}})():"legal_documents"===e&&m()},[e]),(0,er.jsx)(xm,{children:(0,er.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,er.jsxs)("div",{className:"mb-6",children:[(0,er.jsxs)("h1",{className:"text-3xl font-bold text-gray-800 flex items-center gap-3",children:[(0,er.jsx)(dm,{className:"text-indigo-600",size:32}),"Settings & Documents"]}),(0,er.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage system settings and legal documents"})]}),(0,er.jsx)("div",{className:"bg-white rounded-lg shadow mb-6",children:(0,er.jsx)("div",{className:"border-b border-gray-200",children:(0,er.jsxs)("div",{className:"flex space-x-1 p-2",children:[(0,er.jsxs)("button",{onClick:()=>t("system_settings"),className:"px-6 py-3 font-medium rounded-t-lg transition-colors ".concat("system_settings"===e?"bg-indigo-600 text-white":"text-gray-600 hover:bg-gray-100"),children:[(0,er.jsx)(dm,{className:"inline mr-2",size:18}),"System Settings"]}),(0,er.jsxs)("button",{onClick:()=>t("legal_documents"),className:"px-6 py-3 font-medium rounded-t-lg transition-colors ".concat("legal_documents"===e?"bg-indigo-600 text-white":"text-gray-600 hover:bg-gray-100"),children:[(0,er.jsx)(mJ,{className:"inline mr-2",size:18}),"Legal Documents"]})]})})}),"system_settings"===e&&(0,er.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,er.jsx)("h2",{className:"text-xl font-bold mb-4",children:"System Settings"}),s?(0,er.jsx)("div",{className:"text-center py-8",children:"Loading settings..."}):(0,er.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await Ia.post("/settings/",{key:"gst_number",value:r.gst_number,description:"Resort GST Number"}),alert("Settings saved successfully")}catch(t){console.error("Error saving settings:",t),alert("Failed to save settings")}},className:"space-y-6",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium mb-2",children:"GST Number"}),(0,er.jsx)("input",{type:"text",value:r.gst_number,onChange:e=>n(Be(Be({},r),{},{gst_number:e.target.value})),className:"w-full border rounded px-4 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Enter GST Number"}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"This GST number will be used in all invoices and reports"})]}),(0,er.jsxs)("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 flex items-center gap-2",children:[(0,er.jsx)(o$,{size:18}),"Save Settings"]})]})]}),"legal_documents"===e&&(0,er.jsxs)("div",{className:"space-y-6",children:[(0,er.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,er.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Upload Legal Document"}),(0,er.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!c.file)return void alert("Please select a file");const t=new FormData;t.append("file",c.file),t.append("name",c.name),t.append("document_type",c.document_type),t.append("description",c.description);try{await Ia.post("/legal/upload",t,{headers:{"Content-Type":"multipart/form-data"}}),alert("Document uploaded successfully"),d({name:"",document_type:"",description:"",file:null}),m()}catch(r){console.error("Error uploading document:",r),alert("Failed to upload document")}},className:"space-y-4",children:[(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Document Name *"}),(0,er.jsx)("input",{type:"text",value:c.name,onChange:e=>d(Be(Be({},c),{},{name:e.target.value})),className:"w-full border rounded px-3 py-2",required:!0})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Document Type *"}),(0,er.jsxs)("select",{value:c.document_type,onChange:e=>d(Be(Be({},c),{},{document_type:e.target.value})),className:"w-full border rounded px-3 py-2",required:!0,children:[(0,er.jsx)("option",{value:"",children:"Select Type"}),(0,er.jsx)("option",{value:"license",children:"License"}),(0,er.jsx)("option",{value:"permit",children:"Permit"}),(0,er.jsx)("option",{value:"contract",children:"Contract"}),(0,er.jsx)("option",{value:"policy",children:"Policy"}),(0,er.jsx)("option",{value:"certificate",children:"Certificate"}),(0,er.jsx)("option",{value:"other",children:"Other"})]})]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Description"}),(0,er.jsx)("textarea",{value:c.description,onChange:e=>d(Be(Be({},c),{},{description:e.target.value})),className:"w-full border rounded px-3 py-2",rows:"3"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium mb-1",children:"File *"}),(0,er.jsx)("input",{type:"file",onChange:e=>d(Be(Be({},c),{},{file:e.target.files[0]})),className:"w-full border rounded px-3 py-2",required:!0})]}),(0,er.jsxs)("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 flex items-center gap-2",children:[(0,er.jsx)(pre,{size:18}),"Upload Document"]})]})]}),(0,er.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,er.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Legal Documents"}),u?(0,er.jsx)("div",{className:"text-center py-8",children:"Loading documents..."}):0===o.length?(0,er.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No documents uploaded yet"}):(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full",children:[(0,er.jsx)("thead",{className:"bg-gray-50",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Name"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Type"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Description"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Uploaded"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Actions"})]})}),(0,er.jsx)("tbody",{className:"divide-y divide-gray-200",children:o.map(e=>(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsx)("td",{className:"px-4 py-3 text-sm",children:e.name}),(0,er.jsx)("td",{className:"px-4 py-3 text-sm",children:(0,er.jsx)("span",{className:"px-2 py-1 bg-indigo-100 text-indigo-800 rounded text-xs",children:e.document_type})}),(0,er.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.description||"-"}),(0,er.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:new Date(e.uploaded_at).toLocaleDateString()}),(0,er.jsx)("td",{className:"px-4 py-3 text-sm",children:(0,er.jsxs)("div",{className:"flex gap-2",children:[(0,er.jsx)("a",{href:"http://localhost:8011".concat(e.file_path),target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:text-indigo-800",title:"Download",children:(0,er.jsx)(Dte,{size:18})}),(0,er.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this document?"))try{await Ia.delete("/legal/".concat(e)),m()}catch(t){console.error("Error deleting document:",t),alert("Failed to delete document")}})(e.id),className:"text-red-600 hover:text-red-800",title:"Delete",children:(0,er.jsx)(Qq,{size:18})})]})})]},e.id))})]})})]})]})]})})}const gre=function(){const e=(()=>{if("undefined"===typeof window)return"/admin";const e=window.location.pathname||"";if(e.startsWith("/orchidadmin"))return"/orchidadmin";if(e.startsWith("/pommaadmin"))return"/pommaadmin";const t=window.location.hostname||"";return"localhost"===t||"127.0.0.1"===t||t.startsWith("192.168.")||t.startsWith("10.")?"":"/admin"})();return(0,er.jsx)(Te,{basename:e,children:(0,er.jsxs)(rr,{children:[(0,er.jsxs)(_e,{children:[(0,er.jsx)(we,{path:"/",element:(0,er.jsx)(Ba,{})}),(0,er.jsx)(we,{path:"/dashboard",element:(0,er.jsx)(gm,{requiredPermission:"/dashboard",children:(0,er.jsx)(Vq,{})})}),(0,er.jsx)(we,{path:"/bookings",element:(0,er.jsx)(gm,{requiredPermission:"/bookings",children:(0,er.jsx)(O$,{})})}),(0,er.jsx)(we,{path:"/rooms",element:(0,er.jsx)(gm,{requiredPermission:"/rooms",children:(0,er.jsx)(g$,{})})}),(0,er.jsx)(we,{path:"/users",element:(0,er.jsx)(gm,{requiredPermission:"/users",children:(0,er.jsx)(D$,{})})}),(0,er.jsx)(we,{path:"/services",element:(0,er.jsx)(gm,{requiredPermission:"/services",children:(0,er.jsx)(R$,{})})}),(0,er.jsx)(we,{path:"/expenses",element:(0,er.jsx)(gm,{requiredPermission:"/expenses",children:(0,er.jsx)(F$,{})})}),(0,er.jsx)(we,{path:"/roles",element:(0,er.jsx)(gm,{requiredPermission:"/roles",children:(0,er.jsx)(Zq,{})})}),(0,er.jsx)(we,{path:"/billing",element:(0,er.jsx)(gm,{requiredPermission:"/billing",children:(0,er.jsx)(rJ,{})})}),(0,er.jsx)(we,{path:"/food-orders",element:(0,er.jsx)(gm,{requiredPermission:"/food-orders",children:(0,er.jsx)(q$,{})})}),(0,er.jsx)(we,{path:"/food-categories",element:(0,er.jsx)(gm,{requiredPermission:"/food-categories",children:(0,er.jsx)(q$,{})})}),(0,er.jsx)(we,{path:"/food-items",element:(0,er.jsx)(gm,{requiredPermission:"/food-items",children:(0,er.jsx)(q$,{})})}),(0,er.jsx)(we,{path:"/account",element:(0,er.jsx)(gm,{requiredPermission:"/account",children:(0,er.jsx)(wJ,{})})}),(0,er.jsx)(we,{path:"/accounting",element:(0,er.jsx)(je,{to:"/account",replace:!0})}),(0,er.jsx)(we,{path:"/Userfrontend_data",element:(0,er.jsx)(gm,{requiredPermission:"/Userfrontend_data",children:(0,er.jsx)(WJ,{})})}),(0,er.jsx)(we,{path:"/packages",element:(0,er.jsx)(gm,{requiredPermission:"/package",children:(0,er.jsx)(u$,{})})}),(0,er.jsx)(we,{path:"/report",element:(0,er.jsx)(gm,{requiredPermission:"/report",children:(0,er.jsx)(oZ,{})})}),(0,er.jsx)(we,{path:"/guestprofiles",element:(0,er.jsx)(gm,{requiredPermission:"/guestprofiles",children:(0,er.jsx)(pZ,{})})}),(0,er.jsx)(we,{path:"/user-history",element:(0,er.jsx)(gm,{requiredPermission:"/user-history",children:(0,er.jsx)(yZ,{})})}),(0,er.jsx)(we,{path:"/employee-management",element:(0,er.jsx)(gm,{requiredPermission:"/employee-management",children:(0,er.jsx)(kte,{})})}),(0,er.jsx)(we,{path:"/employee-dashboard",element:(0,er.jsx)(gm,{requiredPermission:"/employee-dashboard",children:(0,er.jsx)(Ste,{})})}),(0,er.jsx)(we,{path:"/inventory",element:(0,er.jsx)(gm,{requiredPermission:"/inventory",children:(0,er.jsx)(hre,{})})}),(0,er.jsx)(we,{path:"/settings",element:(0,er.jsx)(gm,{requiredPermission:"/settings",children:(0,er.jsx)(fre,{})})})]}),(0,er.jsx)(Zt,{position:"top-right"})]})})},xre=()=>{const e=e=>{const t=e.target;t&&"date"===t.type&&"function"===typeof t.showPicker&&setTimeout(()=>{try{const e=t.showPicker();e&&"function"===typeof e.catch&&e.catch(()=>{})}catch(e){console.debug("showPicker failed:",e)}},50)},t=()=>{document.querySelectorAll('input[type="date"]').forEach(t=>{t.hasAttribute("data-date-clickable")||(t.setAttribute("data-date-clickable","true"),t.addEventListener("click",e))})};t();new MutationObserver(t).observe(document.body,{childList:!0,subtree:!0})};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",xre):xre();i.createRoot(document.getElementById("root")).render((0,er.jsx)(gre,{}))})()})();
//# sourceMappingURL=main.a5521765.js.map